{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/react/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/react-dom/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../src/Glue.tsx","../../../src/useGlueInit.ts","../../../src/useGlue.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/prop-types/index.js","../node_modules/webpack/buildin/global.js","../node_modules/react-input-autosize/lib/AutosizeInput.js","../node_modules/@glue42/web/dist/web.es.js","../node_modules/chroma-js/chroma.js","../node_modules/object-assign/index.js","../node_modules/buffer/index.js","../node_modules/process/browser.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@glue42/desktop/dist/desktop.browser.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/memoize-one/dist/memoize-one.esm.js","../node_modules/@emotion/sheet/dist/sheet.browser.esm.js","../node_modules/@emotion/stylis/dist/stylis.browser.esm.js","../node_modules/@emotion/cache/dist/cache.browser.esm.js","../node_modules/@emotion/utils/dist/utils.browser.esm.js","../node_modules/@emotion/hash/dist/hash.browser.esm.js","../node_modules/@emotion/unitless/dist/unitless.browser.esm.js","../node_modules/@emotion/memoize/dist/memoize.browser.esm.js","../node_modules/@emotion/serialize/dist/serialize.browser.esm.js","../node_modules/@emotion/core/dist/emotion-element-57a3a7a3.browser.esm.js","../node_modules/@emotion/css/dist/css.browser.esm.js","../node_modules/@emotion/core/dist/core.browser.esm.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/react-select/dist/index-75b02bac.browser.esm.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/react-select/dist/Select-e1cf49ae.browser.esm.js","../node_modules/react-select/dist/stateManager-2f2b6f5b.browser.esm.js","../node_modules/react-select/dist/react-select.browser.esm.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/buffer/node_modules/isarray/index.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/ws/browser.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/inheritsLoose.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js"],"names":["module","exports","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","_slicedToArray","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","process","console","error","_unsupportedIterableToArray","o","minLen","n","toString","call","slice","constructor","name","test","GlueContext","GlueProvider","children","fallback","settings","glue","setGlue","a","web","webPlatform","Error","window","glue42gd","desktop","factory","Glue","config","GlueWeb","GlueWebPlatform","factoryResult","useGlueInit","Provider","propTypes","displayName","useGlue","cb","dependencies","result","setResult","_arrayLikeToArray","len","arr2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","Promise","then","_asyncToGenerator","fn","self","this","args","g","Function","e","_extends","assign","hasOwnProperty","_react","_react2","_interopRequireDefault","_propTypes2","__esModule","default","sizerStyle","position","top","left","visibility","height","overflow","whiteSpace","INPUT_PROPS_BLACKLIST","copyStyles","styles","node","style","fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform","isIE","navigator","userAgent","generateId","Math","random","substr","AutosizeInput","_Component","_this","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","inputRef","el","input","placeHolderSizerRef","placeHolderSizer","sizerRef","sizer","state","inputWidth","minWidth","inputId","id","prevId","subClass","superClass","create","setPrototypeOf","_inherits","mounted","copyInputStyles","updateInputWidth","prevProps","prevState","onAutosize","getComputedStyle","inputStyles","scrollWidth","newInputWidth","placeholder","placeholderIsMinWidth","max","type","extraWidth","parseInt","setState","focus","blur","select","injectStyles","createElement","dangerouslySetInnerHTML","__html","sizerValue","defaultValue","reduce","previousValue","currentValue","wrapperStyle","display","inputStyle","boxSizing","width","inputProps","indexOf","_objectWithoutProperties","field","cleanInputProps","className","inputClassName","renderStyles","ref","Component","string","any","oneOfType","number","bool","func","onChange","defaultProps","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","defaultConfig","logger","gateway","libraries","parseConfig","_a","combined","systemLogger","level","checkSingleton","glue42CoreNamespace","glue42core","webStarted","enterprise","_b","enterpriseConfig","windows","layouts","appManager","channels","ok","asPromise","r","withDefault","withException","map","f","map2","ar","br","mapError","andThen","__assign","freeze","isOk","isErr","successes","results","acc","concat","t","s","p","isJsonArray","json","isJsonObject","expectedGot","expected","got","JSON","stringify","typeString","printPath","paths","path","join","prependAt","newAt","at","rest","propertyIsEnumerable","__rest","Decoder","decode","run","kind","message","runPromise","runWithException","where","errorMessage","succeed","fail","boolean","constant","isEqual","b","decoders","array","decoder","v","err$$1","decodeValue_1","tuple","nth","union","ad","bd","oneOf","intersection","ds","anyJson","unknownJson","dict","optional","errors","errorsList","valueAt","jsonAtPath","fixedValue","lazy","mkDecoder","nonEmptyStringDecoder","nonNegativeNumberDecoder","num","libDomainDecoder","windowOperationTypesDecoder","appManagerOperationTypesDecoder","layoutsOperationTypesDecoder","windowRelativeDirectionDecoder","windowOpenSettingsDecoder","context","relativeTo","relativeDirection","windowId","openWindowConfigDecoder","url","options","windowHelloDecoder","coreWindowDataDecoder","simpleWindowDecoder","helloSuccessDecoder","isWorkspaceFrame","windowTitleConfigDecoder","title","windowMoveResizeConfigDecoder","relative","windowBoundsResultDecoder","bounds","windowUrlResultDecoder","anyDecoder","boundsDecoder","instanceDataDecoder","applicationName","applicationDetailsDecoder","intentDefinitionDecoder","contexts","customConfig","fdc3AppDefinitionDecoder","version","appId","manifest","manifestType","tooltip","description","contactEmail","supportEmail","publisher","images","icons","icon","intents","applicationDefinitionDecoder","customProperties","caption","details","allApplicationDefinitionsDecoder","appRemoveConfigDecoder","definitions","mode","appsExportOperationDecoder","applicationDataDecoder","instances","userProperties","baseApplicationDataDecoder","appHelloSuccessDecoder","apps","basicInstanceDataDecoder","applicationStartConfigDecoder","waitForAGMReady","layoutTypeDecoder","componentTypeDecoder","windowLayoutComponentDecoder","componentType","parentId","main","windowLayoutItemDecoder","appName","groupLayoutItemDecoder","columnLayoutItemDecoder","rowLayoutItemDecoder","workspaceLayoutComponentDecoder","glueLayoutDecoder","components","metadata","newLayoutOptionsDecoder","restoreOptionsDecoder","closeRunningInstance","layoutSummaryDecoder","simpleLayoutConfigDecoder","getAllLayoutsConfigDecoder","allLayoutsFullConfigDecoder","importModeDecoder","layoutsImportConfigDecoder","allLayoutsSummariesResultDecoder","summaries","optionalSimpleLayoutResult","layout","intentsOperationTypesDecoder","intentHandlerDecoder","applicationTitle","applicationDescription","applicationIcon","contextTypes","instanceId","instanceTitle","intentDecoder","handlers","intentTargetDecoder","app","intentContextDecoder","data","wrappedIntentsDecoder","intentFilterDecoder","contextType","findFilterDecoder","wrappedIntentFilterDecoder","intentRequestDecoder","intent","raiseRequestDecoder","intentResultDecoder","request","handler","addIntentListenerRequestDecoder","addIntentListenerIntentDecoder","channelNameDecoder","channelNames","includes","operations","openWindow","dataDecoder","resultDecoder","windowHello","windowAdded","windowRemoved","getBounds","getUrl","moveResize","close","getTitle","setTitle","createRegistry","errorHandling","_userErrorHandler","callbacks","_handleError","exceptionArtifact","errParam","msg","stack","add","callback","replayArgumentsArr","callbacksForKey","setTimeout","replayArgument","allForKey","element","index","execute","argumentsArr","clear","clearKey","lib","WebWindowModel","_id","_name","_bridge","registry","myCtxKey","ctxUnsubscribe","contextLib","subscribe","api","getURL","bind","resizeTo","moveTo","getContext","updateContext","setContext","onContextUpdated","me","send","dimension","targetBounds","commandArgs","ttl","get","ctx","update","set","WindowsController","allWindowProjections","coreGlue","ioc","subLogger","trace","publicWindowId","connection","transport","actualWindowId","interop","addWindowOperationExecutors","bridge","platformRegistration","registerWithPlatform","toApi","operationName","operation","operationData","windowSuccess","buildWebWindow","projection","find","open","my","list","findById","onWindowAdded","onWindowRemoved","handleWindowAdded","handleWindowRemoved","handleGetBounds","handleGetTitle","handleGetUrl","handleMoveResize","handleSetTitle","helloSuccess","sayHello","myWindow","w","all","currentWindows","some","webWindowProjection","removed","model","clean","screenTop","screenLeft","innerWidth","innerHeight","document","location","href","targetTop","targetLeft","targetHeight","targetWidth","moveMethod","moveBy","resizeMethod","resizeBy","PromiseWrap","promise","timeoutMilliseconds","timeoutMessage","promiseActive","timeout","clearTimeout","catch","GlueBridge","platformMethodTimeoutMs","controllers","checkWaitMethod","registerAsync","_","success","passMessageController","sub","onData","pkg","servers","application","peerId","domain","transmitMessage","operationResult","executor","methods","method","unSub","methodAdded","decodeResult","handleBridgeMessage","resolutionData","warn","messageData","baseErrorMessage","invoke","invocationResult","all_return_values","all_errors","invocationErrorMessage","returned","operations$1","appHello","applicationAdded","applicationRemoved","applicationChanged","instanceStarted","instanceStopped","applicationStart","instanceStop","import","remove","export","AppManagerController","applications","addOperationsExecutors","startOptions","reuseId","openResult","buildInstance","myInstance","inMemory","getApplication","getApplications","getInstances","onAppAdded","onAppChanged","onAppRemoved","onInstanceStarted","onInstanceStopped","handleApplicationAddedMessage","handleApplicationRemovedMessage","handleApplicationChangedMessage","handleInstanceStartedMessage","handleInstanceStoppedMessage","appData","buildApplication","appIndex","findIndex","splice","instanceData","instIdx","inst","instIdxApps","parseResult","soFar","definition","valid","invalid","imported","response","verifiedName","instancesSoFar","findMyInstance","foundInstance","InstanceModel","agm","getInteropInstance","stop","ApplicationModel","controller","start","startApplication","operations$2","layoutAdded","layoutChanged","layoutRemoved","getAll","LayoutsController","save","restore","onAdded","onChanged","onRemoved","handleOnAdded","handleOnChanged","handleOnRemoved","NotificationsController","notifications","raise","permissionPromise","Notification","permission","requestPermission","notification","raiseUsingWebApi","clickInterop","interopOptions","onclick","operations$3","getIntents","findIntent","raiseIntent","IntentsController","myIntents","Set","GlueWebIntentsPrefix","addIntentListener","requestObj","subscribed","intentName","methodName","has","unsubscribe","unregister","delete","flags","register","intentFilter","intentFilterObj","ChannelsController","GlueWebChannelsPrefix","SubsKey","ChangedKey","subscribeFor","publish","leave","current","changed","channelName","contextName","startsWith","channelContextName","replace","unsubscribeFunc","currentChannelName","createContextName","__","___","extraData","updaterId","setPathSupported","pathValues","setPaths","getAllChannelNames","updateData","channelContexts","switchToChannel","IoC","windowsController","appManagerController","layoutsController","notificationsController","intentsController","channelsController","applicationInstances","_windowsControllerInstance","_appManagerControllerInstance","_layoutsControllerInstance","_notificationsControllerInstance","_intentsControllerInstance","_channelsControllerInstance","_bridgeInstance","extendStatics","d","__extends","__assign$1","__awaiter$1","__generator","body","y","label","sent","trys","ops","verb","op","pop","__spreadArrays","il","k","j","jl","MetricTypes","getMetricTypeByValue","metric","getTypeByValue","Date","serializeMetric","serializedMetrics","values","memo","innerType","composite","defineNestedComposite","normalizeMetricName","getMetricValueByType","now","publishNestedComposite","getTime","Boolean","composeMsgForRootStateMetric","system","merged","flatten","flat","toFlatten","root","getAggregateState","highestState","sort","m","idx","aggregateDescription","Helpers","parent","BaseMetric","createMetric","repo","newValue","updateMetric","NumberMetric","_super","incrementBy","increment","decrement","decrementBy","ObjectMetric","mergeValues","StringMetric","TimestampMetric","Repository","protocol","init","separator","_transport","_description","_repo","_parent","_path","_buildPath","shadowedSystem","_state","_subSystems","_metrics","_getOrCreateMetric","metricObject","expectedType","metricDef","matching","shadowedMetric","existing","subSystem","nameSystem","descriptionSystem","match","_system","getState","stateDescription","updateSystem","stringMetric","timestampMetric","objectMetric","numberMetric","aggState","shadowedSubSystem","createSystem","addSystemMetrics","clickStream","rootSystem","useClickStream","clickStream_1","documentClickHandler","timestamp","tagName","toLowerCase","page","addEventListener","attachEvent","urlMetric","appNameMetric","startUrl","NullProtocol","PerfTracker","initialPublishTimeout","publishInterval","lastCount","scheduleCollection","collect","setInterval","collectMemory","collectEntries","memory","performance","totalJSHeapSize","usedJSHeapSize","allEntries","getEntries","metrics","joinPromise","session","replayRepo","replaySystem","subSystems","ss","createMetricsMsg","Description","Value","metricClone","cloneMetric","updateMetricCore","canUpdate","publishMetricsMsg","sendFireAndForget","canUpdateMetric","resolveReadyPromise","onJoined","reconnect","defineRootMetricsMsg","service","shadowedUpdateMetric","stateObj","rootMetric","peer_id","gw3","disableAutoAppSystem","featureMetric","reportingSystem","def","action","payload","addFAVSupport","perfConfig","pagePerformanceMetrics","enabled","initPerf","createRegistry$1","lib$1","InProcTransport","gw","facade","connect","_client","messageHandler","client","sendObject","_msg","onMessage","onConnectedChanged","SharedWorkerTransport","workerFile","worker","SharedWorker","port","onmessage","postMessage","Utils","getGDMajorVersion","glueDesktop","ver","Number","isNaN","isNode","_isNode","global","PromiseWrapper","resolved","delay","time","timers","timer","timerName","marks","endTime","period","startTime","mark","currentTime","diff","timerObj","WebSocketConstructor","WebSocket","WS","startupTimer","_running","_registry","wsRequests","ws","waitForSocketConnection","pw","failed","readyState","openSocket","retryInterval","retriesLeft","reconnectInterval","notifyForSocketState","debug","initiateSocket","retries","onerror","reason","seen_1","WeakSet","notifyStatusChanged","onclose","onopen","identity","wsRequest","status","seed","alphabet","previousSeed","shuffled","randomFromSeed","nextValue","_seed_","ORIGINAL","reset","setCharacters","_alphabet_","unique","split","item","ind","lastIndexOf","getShuffled","characterIndex","sourceArray","targetArray","floor","shuffle","alphabet_1","characters","lookup","crypto","msCrypto","randomByteBrowser","getRandomValues","dest","Uint8Array","encode_1","loopCounter","str","pow","decode_1","isValid","lib$1$1","createCommonjsModule","counter","previousSeconds","clusterWorkerId","generate","seconds","seedValue","workerId","newCharacters","shortid","domainSession","successMessages","errorMessages","_latestOptions","isJoined","tryReconnecting","_connectionOn","disconnected","loggedIn","on","handleSuccessMessage","handleErrorMessage","sm","requestsMap","destination","wasReconnect","handleJoined","requestId","request_id","entry","getNextRequestId","tag","skipPeerId","successMsg","_tag","errorMsg","onLeft","connected","GW3ProtocolImpl","protocolVersion","datePrefix","datePrefixLen","dateMinLen","datePrefixFirstChar","_isLoggedIn","shouldTryLogin","initialLogin","initialLoginAttempts","sessions","handleDisconnected","ping","processStringMessage","parse","substring","milliseconds","ex","msgType","createStringMessage","oldToJson","toJSON","datePrefix_1","processObjectMessage","createObjectMessage","login","authentication","e_1","helloMsg","sendOptions","welcomeMsg","token","err_1","_c","loginConfig","username","password","gatewayToken","getNewGWToken","flowName","provider","flowCallback","sessionId","secret","globalDomain","maxRetries","reconnectAttempts","Buffer","resolvedIdentity","resolved_identity","availableDomains","available_domains","access_token","setLoggedIn","logout","promises","pingTimer","domainName","domainLogger","authToken","res","getGWToken","MessageReplayerImpl","specs","specsNames","messages","subs","subsRefCount","specs_1","spec","name_1","_loop_1","refCount","this_1","processMessage","types","isDone","name_2","drain","off","PromisePlus$1","WebPlatformTransport","parentReady","iAmConnected","parentPingTimeout","connectionRequestTimeout","defaultTargetString","connectionAccepted","handle","handleConnectionAccepted","connectionRejected","handleConnectionRejected","connectionRequest","handleConnectionRequest","handleParentReady","parentPing","handleParentPing","platformPing","handlePlatformPing","platformUnload","handlePlatformUnload","platformReady","handlePlatformReady","clientUnload","handleClientUnload","setUpMessageListener","setUpUnload","opener","parentType","event","waitParent","initiateRemoteConnection","connectionResolve","connectionReject","myClientId","bridgeInstanceId","clientId","clientType","parentPingResolve","checkMessageTypeValid","messageType","ownWindowId","handleAcceptanceOfMyRequest","handleAcceptanceOfGrandChildRequest","parentWindowId","child","c","grandChildId","origin","rejectConnectionRequest","typeToValidate","rejection","Connection","messageHandlers","ids","_connected","isTrace","inproc","sharedWorker","canPublish","handleConnectionChanged","handleTransportMessage","replaySpecs","replayer","isObjectBasedTransport","strMessage","isLoggedIn","authRequest","distributeMessage","handlerId","loggerError","log","msgObj","order","Logger","logFn","subLoggers","customLogFn","loggerFullName","includeTimeAndLevel","existingSub","publishLevel","_publishLevel","consoleLevel","_consoleLevel","publishMessage","compareWith","loggerName","Interop","InteropMethodName","prefix","date","getHours","getMinutes","getSeconds","getMilliseconds","toPrint","ContextMessageReplaySpec","GW3ContextData","contextId","isAnnounced","activityId","updateCallbacks","hasCallbacks","applyContextDelta","delta","deepClone","commands","command","deletePath","setValueToPath","added_1","added","updated_1","updated","mergeObjectsProperties","hash","WeakMap","RegExp","what","withWhat","right","deepEqual","x","pathArr","InvokeStatus","GW3Bridge","_contextNameToData","_gw3Subscriptions","_nextCallbackSubscriptionNumber","_contextNameToId","_contextIdToName","_protocolVersion","_connection","_logger","_gw3Session","subscribeToContextCreatedMessages","subscribeToContextUpdatedMessages","subscribeToContextDestroyedMessages","handleContextCreatedMessage","handleContextUpdatedMessage","handleContextDestroyedMessage","contextsDomainInfo","uri","dispose","createContext","lifetime","createContextMsg","context_id","contextData","currentContext","calculatedDelta","calculateContextDeltaV2","calculateContextDeltaV1","gwResponse","handleUpdated","setPath","pathValues_1","pathValue","pathValues_2","_r","un","thisCallbackSubscriptionNumber","clone","hadCallbacks","joinedActivity","sentExplicitSubscription","sendSubscribe","subscriptionKey","sendUnsubscribe","destroy","oldContext","invokeUpdateCallbacks","createdMessageTypes_1","createdMessageType","contextCreatedMsg","activity_id","updatedMessageTypes_1","updatedMessageType","contextUpdatedMsg","justSeen","context_snapshot","updater_id","updateCallbackIndex","updateCallback","destroyedMessageTypes_1","destroyedMessageType","destroyedMsg","to","ContextsModule","checkName","checkData","checkPath","paths_1","ready","promisify","successCallback","errorCallback","rejectAfter","ms","finally","Client","configuration","callProtocolSubscribe","targetServers","stream","successProxy","errorProxy","methodResponseTimeout","waitTimeoutMs","methodDef","method_response_timeout","wait_for_method_timeout","delayTillNow","currentServers","getServerMethodsByFilterAndTarget","retry_1","streamInfo","methodFilter","filterCopy","getServers","serverMethodMap","server","getMethods","methodsForInstance","getMethodsForInstance","onMethodAdded","methodRemoved","onMethodRemoved","serverAdded","onServerAdded","serverRemoved","onServerRemoved","serverMethodAdded","onServerMethodAdded","serverMethodRemoved","onServerMethodRemoved","argumentObj","additionalOptions","methodDefinition","serversMethodMap","errorObj","additionalOptionsCopy","invokePromises","invocationMessages","methodResponseTimeoutMs","tryToAwaitForMethods","supportsStreaming","objectTypes","called_with","executed_by","serversMethodPair","invId","invokePromise","race","invocationId","getInvocationResultObj","every","getInvokePromise","invocationResults","calledWith","invokeMessage","Success","allValues","allErrors","currError","invResult","interval","clearInterval","filterByTarget","matches","myMatches","serverMethodPair","instanceMatch","localMachine","isLocal","instanceFilter","instanceDefinition","containsProps","methodMatch","repoMethod","prop","isMatch","filterValue","repoMethodValue","filterValueEl","isSubset","superObj","subObj","ele","String","matchingServers","resultMethodsObject","methodKey","identifier","prev","matchingMethods","ServerSubscription","subscription","branchKey","closeSingleSubscription","pushDataToSingle","Request","requestContext","accept","acceptRequestOnBranch","acceptOnBranch","branch","rejectRequest","ServerStreaming","onSubRequest","rc","rm","handleSubRequest","onSubAdded","handleSubAdded","onSubRemoved","handleSubRemoved","streamCallbacks","subscriptionRequestHandler","subscriptionAddedHandler","subscriptionRemovedHandler","ServerBranch","subscriptions","getSubscriptionList","closeAllSubscriptions","pushData","ServerStream","_protocol","_repoMethod","_server","branches","bList","getBranchList","def2","accepts","returns","updateRepoMethod","Server","serverRepository","invocations","currentlyUnregistering","streaming","onInvoked","onMethodInvoked","createStream","streamDef","existingStream","streamMethodDefinition","getList","serverMethod","protocolState","streamUserObject","repoId","wrappedCallbackFunction","resultCallback","resultValue","userCallback","registerCore","wrappedCallback","resultCalled_1","methodResult","userCallbackAsync","forStream","methodToBeRemoved","unregisterWithPredicate","removeMethodsOrStreams","filterPredicate","methodsOrStreamsToRemove","methodsToRemove","methodUnregPromises","addAsCurrentlyUnregistering","theFunction","unregisterInProgress","methodToExecute","invocationArgs","unStrException","_value","methodInvocationResult","InstanceWrapper","API","wrapped","getStreams","refreshWrappedObject","refresh","unwrap","user","pid","machine","environment","region","hideMethodSystemFlags","ClientRepository","methodsCount","myServer","wrapper","unwrappedInstance","addServer","serverId","serverEntry","removeServerById","methodId","removeServerMethod","addServerMethod","createMethodIdentifier","that","gatewayId","display_name","object_types","input_signature","result_signature","getServersByMethod","clientMethodDefinition","extractMethodsFromServers","hideServerMethodSystemFlags","serversWithMethodsToReplay","returnUnsubWithDelayedReplay","methodsToReplay","unsubCalled","getServerById","methodInfo","allServers","collectionToReplay","clientMethods","entries","ServerRepository","nextId","getById","ServerStreaming$1","repository","ERR_URI_SUBSCRIPTION_FAILED","nextStreamId","handleAddInterest","handleRemoveInterest","streamingMethod","subscriptionsMap","branchKeyToStreamIdMap","streamId","getStreamId","subscription_id","subscribeMsg","stream_id","sendSubscriptionFailed","dropSubscriptionMessage","closeMultipleSubscriptions","subscriptionsToClose","drop","allSubscriptions","onSubscriptionLifetimeEvent","method_id","eventName","handlerFunc","getNextStreamId","caller_id","arguments_kv","subscriptionId","reason_uri","needleBranch","ServerProtocol","clientRepository","handleInvokeMessage","isStreaming","registerMsg","restrictions","invocation_id","callerId","UserSubscription","subscriptionData","params","trackedServers","pair","dataCallback","queued","dataItem","onClosed","closedCallback","onFailed","onConnected","setNewSubscription","newSub","ClientStreaming","subscriptionsList","subscriptionIdToLocalKeyMap","nextSubLocalKey","handleErrorSubscribing","errorResponse","subLocalKey","pendingSub","timeoutId","callArgs","callOnClosedHandlers","handleSubscribed","acceptingServer","isFirstResponse","serverInstance","handleEventData","trackedServersFound","isPrivateData","oob","sendingServerId","receivedStreamData","requestArguments","private","onDataHandlers","queuedData","handleSubscriptionCancelled","expectedNewLength","closers","getNextSubscriptionLocalKey","registerSubscription","server_id","ERR_MSG_SUB_FAILED","drainSubscriptions","subsInfo","localKey","closeSubscription","closingServer","closersCount","closingServerId","ClientProtocol","handlePeerAdded","handlePeerRemoved","handleMethodsAddedMessage","handleMethodsRemovedMessage","handleResultMessage","handleInvocationError","newPeerId","new_peer_id","remoteId","meta","local","serverInfo","removedPeerId","removed_id","methodIdList","gW3ProtocolFactory","libConfig","readyPromise","existingSubscriptions_1","registeredMethods","registeredMethods_1","handleReconnect","protocolPromise","waitForMethod","MessageBus","topic","routingKey","removeEmptyValues","routing_key","target_identity","watchOnEvent","keysMatch","cleaned","obj1","obj2","keysObj1","allMatch","GlueCore","userConfig","ext","gdVersion","preloadPromise","gdPreloadPromise","_interop","_contexts","_bus","_allowTrace","glueInitTimer","internalConfig","nodeStartingContext","startingContextString","_GD_STARTING_CONTEXT_","_f","uid","applicationConfig","gwConfig","gwURL","uniqueAppName","env","appInstanceId","getConnection","windowAsAny","containerApplication","htmlContainer","containerName","bus","auth","gwToken","getAuth","gdConsoleLevel","consoleLogLevel","getLogger","libs","customLogger","prepareConfig","registerLib","inner","initTime","initEndTime","initStartTime","setupMetrics","initTimer","metricsPublishingEnabledFunc","getMetricsPublishingEnabled","setupInterop","agmConfig","setupContexts","hasActivities","activities","setupBus","setupExternalLibs","externalLibs","createCallback","setupExternalLib","authPromise","authConfig","libsReadyPromises","coreVersion","feedback","feedbackInfo","timing","duration","extOptions","enrichGlue","updatePerfData","deprecatedDecorator","wrong","proper","agmAny","method_added","method_removed","server_added","server_method_aded","server_method_removed","coreFactoryFunction","glueWebFactory","windowAny","limit","min","classToType","PI","utils","clip_rgb","rgb","_clipped","_unclipped","unpack","keyOrder","last","l","TWOPI","PITHIRD","DEG2RAD","RAD2DEG","format","autodetect","last$1","clip_rgb$1","type$1","Color","sorted","chk","_rgb","hex","Color_1","chroma","chroma_1","unpack$1","rgb2cmyk_1","unpack$2","cmyk2rgb_1","alpha","unpack$3","type$2","cmyk","unpack$4","last$2","rnd","round","hsl2css_1","hsla","unpack$5","rgb2hsl_1","h","NaN","unpack$6","last$3","rgb2css_1","rgba","unpack$7","round$1","hsl2rgb_1","t3","t2","t1","h_","RE_RGB","RE_RGBA","RE_RGB_PCT","RE_RGBA_PCT","RE_HSL","RE_HSLA","round$2","css2rgb","css","trim","named","rgb$1","i$1","rgb$2","i$2","rgb$3","i$3","hsl","rgb$4","hsl$1","rgb$5","css2rgb_1","type$3","unpack$8","gl","unpack$9","rgb2hcg_1","_g","unpack$a","hcg2rgb_1","assign$1","assign$2","assign$3","assign$4","assign$5","q","unpack$b","type$4","hcg","unpack$c","last$4","round$3","rgb2hex_1","u","hxa","RE_HEX","RE_HEXA","hex2rgb_1","u$1","type$5","unpack$d","sqrt","acos","rgb2hsi_1","min_","unpack$e","limit$1","TWOPI$1","cos","hsi2rgb_1","unpack$f","type$6","hsi","unpack$g","type$7","unpack$h","min$1","max$1","rgb2hsv","max_","unpack$i","floor$1","hsv2rgb_1","unpack$j","type$8","hsv","labConstants","unpack$k","rgb_xyz","xyz_lab","rgb2xyz","rgb2lab_1","ref$1","z","unpack$l","pow$1","xyz_rgb","lab_xyz","lab2rgb_1","unpack$m","type$9","lab","unpack$n","sqrt$1","atan2","round$4","lab2lch_1","unpack$o","rgb2lch_1","b_","unpack$p","sin","cos$1","lch2lab_1","unpack$q","lch2rgb_1","L","unpack$r","hcl2rgb_1","hcl","reverse","unpack$s","type$a","lch","w3cx11_1","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflower","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","laserlemon","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrod","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","maroon2","maroon3","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","purple2","purple3","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","type$b","unpack$t","rgb2num_1","type$c","num2rgb_1","type$d","unpack$u","type$e","round$5","temperature2rgb_1","kelvin","temp","unpack$v","round$6","rgb2temperature_1","minTemp","maxTemp","eps","temperature","type$f","mutate","clipped","darken","amount","brighten","darker","brighter","mc","channel","src","type$g","pow$2","luminance","lum","cur_lum","max_iter","low","high","mid","interpolate","lm","abs","rgb2luminance","luminance_x","interpolator","type$h","mix","col1","col2","premultiply","saturate","desaturate","type$i","charAt","out","xyz0","xyz1","sqrt$2","pow$3","lrgb","x1","y1","z1","x2","y2","z2","_hsx","hue0","hue1","sat0","sat1","lbv0","lbv1","sat","hue","lch$1","c1","c2","clip_rgb$2","pow$4","sqrt$3","PI$1","cos$2","sin$1","atan2$1","_average_lrgb","colors","weights","xyz","col","type$j","pow$5","scale","_mode","_nacol","_spread","_domain","_pos","_padding","_classes","_colors","_out","_min","_max","_correctLightness","_colorCache","_useCache","_gamma","setColors","brewer","c$1","resetCache","tMapLightness","tMapDomain","getColor","val","bypassMap","getClass","classes","analyze","limits","tOut","tBreaks","_m","range","_o","spread","correctLightness","L0","L1","pol","L_actual","L_ideal","L_diff","t0","padding","numColors","dm","dd","__range__","samples","end","asc","cache","gamma","nodata","inclusive","ascending","bezier","I","lab0","lab1","lab2","lab3","I0","I1","blend","bottom","blend_f","c0","each","normal","multiply","screen","overlay","lighten","dodge","burn","blend_1","type$k","clip_rgb$3","TWOPI$2","pow$6","sin$2","cos$3","floor$2","log$1","pow$7","floor$3","MAX_VALUE","sum","count","min_log","LOG10E","max_log","pb","pr","cluster","assignments","clusterSizes","repeat","nb_iters","centroids","i$4","mindist","best","j$1","dist","newCentroids","j$2","i$5","j$3","j$4","kClusters","j$5","i$6","tmpKMeansBreaks","j$6","i$7","analyze_1","sqrt$4","atan2$2","abs$1","cos$4","PI$2","scales","cool","hot","colorbrewer","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Viridis","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","list$1","colorbrewer_1","average","first","shift","cnt","dx","dy","A","ci","xyz2","A$1","cubehelix","rotations","lightness","dl","dh","fract","amp","cos_a","sin_a","code","contrast","l1","l2","deltaE","C","a1","b1","L2","a2","b2","sl","sc","h1","c4","sh","delC","delA","delB","v1","v2","distance","sum_sq","propIsEnumerable","toObject","test1","getOwnPropertyNames","test2","fromCharCode","test3","letter","shouldUseNative","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","encodingOrOffset","allocUnsafe","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","buffer","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","ret","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","marker","runClearTimeout","Item","noop","nextTick","browser","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","_createForOfIteratorHelper","F","it","normalCompletion","didErr","_e2","extendStatics$1","__extends$1","__generator$1","PromisePlus","Map","ActivityEntity","_update","other","_updateCore","_beforeDelete","isString","isUndefined","isUndefinedOrNull","isFunction","ifNotUndefined","doWithIt","ActivityType","ownerWindow","helperWindows","_ownerWindow","_helperWindows","hw","covertToWindowDef","initiate","_manager","windowType","WindowType","appByWindowTypeGetter","_appByWindowTypeGetter","getWindows","activity","isIndependent","createWindow","EntityEvent","entitiy","entity","EntityEventContext","eventType","ActivityStatusChangeEventContext","newStatus","oldStatus","EntityEventType","StatusChange","ActivityContextChangedEventContext","ActivityContextChange","Added","Removed","Updated","Closed","ActivityWindowEvent","ActivityWindowJoinedActivity","ActivityWindowLeftActivity","ActivityState","Created","Started","Destroyed","ActivityAGM","_activity","_ensureHasAgm","AGM","methodNames","methodsForWindow","currentWindowMethod","activityServers","promisify$1","potentialTargets","firstElem","_isInstance","_isActivityWindow","win","parameters","AttachedActivityDescriptor","manager","ownerActivityId","_ownerActivityId","ownerId","windowIds","frameColor","detach","detachActivities","nodeify","resp","Activity","actType","_actType","_status","_context","_ownerId","_agm","getActivityType","addWindow","addWindowToActivity","createStackedWindows","windowTypes","leaveWindowFromActivity","getWindowsByType","setActivityContext","updateActivityContext","onStatusChange","subscribeActivityEvents","ns","os","onWindowEvent","subscribeWindowEvents","onContextChanged","subscribeActivityContextChanged","act","stopActivity","attach","attachActivities","onActivityAttached","subscribeActivitiesAttached","newActId","oldActId","onDetached","subscribeActivitiesDetached","newAct","originalActivity","_updateDescriptors","allStates","_attached","setFrameColor","color","callbacksToWait","underlyingWindow","getFrameColor","LogLevel","Trace","Debug","Info","Warn","Logger$1","GlueLogger","_glueLogger","GetNamed","Get","owner","GetTypeName","Level","_getMessage","exec","ActivityWindow","windowGetter","hcWindowId","_type","_activityId","_instance","_isIndependent","_windowGetter","_hcWindowId","getWindowBounds","getWindowType","getActivityById","setVisible","isVisible","setWindowVisibility","activate","activateWindow","setBounds","setWindowBounds","closeWindow","onActivityJoined","_subscribeForActivityWindowEvent","onActivityRemoved","ActivityStatus","getMessage","GW3Bridge$1","_activityChangeCallbacks","_activityTypeStatusChangeCallbacks","_activityWindowChangeCallbacks","_windowTypeStatusChangeCallbacks","_peerIdAndFactoryIdToPeerType","_peerFactoriesRegisteredByUs","_contextSubscriptions","_activityTypesInitiatedFromMe","_config","_windows","_sessionJoinedPromise","_sessionJoinedPromiseResolve","_activityJoinedPromise","_activityJoinedPromiseResolve","glue42gd_1","addRefreshHandler","setGWToken","activityTypeGwMessageEntityToActivityType","nameToWindowType","windowName","owner_type","helper_types","peerFactoryGwMessageEntityToWindowType","peer_type","activityGwMessageToActivity","owner_id","activity_type","activityToActivityStatusChangeEvent","forwardActivityTypeMessagesToStatusEventHandlers","handleActivityCreatedMessage","handleActivityDestroyedMessage","forwardActivityMessagesToStatusEventHandlers","forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers","forwardPeerFactoryMessagesToStatusEventHandlers","forwardPeerFactoryMessagesToPeerFactoryRequests","handlePeerFactoriesAdded","handlePeerFactoriesRemoved","forwardActivityWindowMessagesToEventHandlers","disposeRequestHandling","exit","activity_types","typesToTrack","initReady","onActivityTypeStatusChange","registerActivityType","activityTypeName","toActivityPeerConfig","windowDefinition","activityType","invokeCallbacks","unregisterActivityType","onWindowTypeStatusChange","registerWindowFactory","factories","unregisterWindowFactory","factory_ids","onActivityStatusChange","initiateActivity","initiateMsg","initial_context","isOverrideTypeDefinition","types_override","helpers","wd","sendCreateAndMapResultingMessagesToPromise","initMsg","fullReplace","removedKeys","removedKeys_1","announceWindow","activityWindowId","registerWindow","independent","shouldSendReady","activityInfo","getAgmInstance","generateWindowGetter","onActivityWindowChange","cellSize","peer_name","created_id","joinActivity","destroy_peer_id","getAnnouncementInfo","announcementInfo","activityWindowType","activityWindowIndependent","activityWindowName","search","URLSearchParams","searchParams","maybeName","target_id","leaveActivity","getActivityTypes","getWindowTypes","getActivities","getActivityWindows","windowDefinitions","visible","cloneActivity","cloneOptions","into","merge","newActivityInfo","onActivitiesAttached","onActivitiesDetached","onActivityAttachedDescriptorsRefreshed","getAttachedDescriptors","getRandomRequestId","forwardAddedAndRemovedMessagesToEventHandler","addedMessageType","removedMessageType","mapper","getGetEntityEvent","isAdded","forwardMessageToEventHandler","getEntityEvent","ent","initiatedMessageType","initiatedMessageFilter","createdMessageFilter","cancelledMessageType","cancelledMessageFilter","createdMessageToPromiseResolution","resolveCreatedPromise","rejectCreatedPromise","initiatedSubscription","createdSubscription","cancelledSubscription","errorSubscription","reqId","createdPromise","initiatedMessageAck","dropSubscriptions","dropSubscription","msg4","msg1","msg2","msg3","toReturn","peerFactoryIdAndOwnerIdToWindowType","factoryId","peerType","subscribeToContext","unsubscribeContext","activityCreatedMessage","participants","createdMessage","peer_factory","gateway_token","joinedMessage","joinedId","joined_id","joinedType","joined_type","joinedName","joined_name","left_id","ActivityMy","_myAttached","_myDetached","_myAttachedTo","_myDetachedFrom","_myActivityFrameColorChanged","_myActivityJoinedCallbacks","_myActivityRemovedCallbacks","_myContextUpdateCallbacks","am","_subscribeMyContextChanged","_subscribeMyWindowEvent","_subscribeActivitiesAttached","_subscribeActivitiesDetached","onWindowFrameColorChanged","_subscribeWindowFrameColorChanged","_w","announcedWindows","myWin","onActivityLeft","onActivityDetached","onAttachedToActivity","onDetachedFromActivity","attached","onFrameColorChanged","myActivity","_notifyMyContextChanged","_notifyMyWindowEvent","callbackStore","_notifyAttached","_notifyDetached","_notifyAttachedTo","_notifyDetachedFrom","detached","oldAct","ReadyMarker","signalsToWait","_signals","_callbacks","setCallback","isSet","isError","_error","signal","getError","EntityObservableCollection","processNew","_items","_listeners","_processNew","addOne","items","internalEntity","_updateInternalCollections","_notifyListeners","getByName","getOrWait","entityAddedHandler","listener","entityAsAny","isActivityDestroy","isWindowClose","oldEntity","ActivityManager","autoAnnounce","_announcedWindows","_attachedCallbacks","_detachedCallbacks","_frameColorChangesCallbacks","_windowHandlers","_activityTypes","_grabEntity","_windowTypes","_activities","_dataReadyMarker","_descriptorsMarker","_readyMarker","dataErr","errCatch","refreshDescriptors","_handleActivitiesAttached","_handleActivitiesDetached","_handleActivityDescriptorsRefreshed","_handleWindowFrameColorChanged","_subscribeForData","aw","_getInitialData","bridgeType","ownerWindowType","helperWindowTypes","ownerDefinition","helperDefinitions","windowStyleAttributes","actId","subscribeActivityTypeEvents","factoryMethod","getName","predicate","currentWindow","windowEventHandler_1","unsubscribeWindowEvents","subscribeWindowTypeEvents","wt","window_1","wrappingHandler","windowTypeOrConfiguration","relativeToWindow","invalidKeys_1","filteredWindowTypeOrConfiguration_1","wid","relativeWindowTypes","stackedWindow","tasks","removedKey","descriptors","stateWrapped","subscribeActivityFrameColorChanged","ac","descriptorAsObjectFromAPI","oldActivityId","newActivityId","ActivityManagementAPI","_my","activityTypes","_getActivityTypesWrapper","_getWindowTypesWrapper","registerFactory","unregisterFactory","announce","onAttached","onActivityFrameColorChanged","ActivityAPI","_mgr","aware","inActivity","getAvailableFrameColors","ActivityModule","logLevel","_isUsingHCImplementation","gdMajorVersion","_isUsingGW3Implementation","checkIsUsingGW3Implementation","activityManager","disableAutoAnnounce","_api","_readyPromise","lib$2","objectValues","objectClone","ApplicationImpl","_appManager","onAppAvailable","onAppUnavailable","_props","Title","Version","AutoStart","IsShell","Caption","IsHidden","ApplicationName","ActivityWindowType","Arguments","AllowMultiple","IsReady","Icon","IconUrl","SortOrder","UserProperties","autoStart","hidden","container","allowMultiple","Type","Mode","isActivity","styleAttributes","WindowStyleAttributes","modeIndex","startModeIndex","stopModeIndex","updateFromProps","Name","Context","Options","acsResult","Instance_0","Id","handleInstanceStarted","unsub","check","filtered","isActivityInstance","onInstanceAgmServerReady","waitForApplicationInstance","onAvailable","onUnavailable","InstanceImpl","_appName","startFailed","onAgmReady","_addToRegistry","onStopped","_unsubscribeInstanceStopped","_unsubscribeInstanceAgmServerReady","activityInstance","_isActivityOwner","activityInstances","isActivityOwner","activityOwnerInstance","_startUpContext","_title","_isActivityInstance","_inActivity","_agmInstance","ActivityId","IsActivityOwner","updateAgmInstanceFromProps","AgmServers","GD3","agmInstances","gdAgmServers","propsAgmServer","propsAgm","machineName","userName","handleInstanceStopped","AppManagerImpl","_gdMajorVersion","_apps","_instances","getMyInstance","instanceId_1","handleAppAdded","_getAppId","_updateAppFromProps","handleAppUpdated","handleAppRemoved","handleAppReady","_getAppOrThrow","available","_getInstanceId","_getInstanceAppName","_updateInstanceFromProps","_getInstanceOrThrow","_matchInstance","handleInstanceAgmServerReady","handleInstanceStartFailed","handleInstanceUpdated","onInstanceStartFailed","onInstanceUpdated","_getInstanceByIdAndName","promisify$2","EntitlementsImpl","_isMethodRegistered","handleBranchModified","handleBranchesModified","getRegion","_agmInvoke","Region","getBranches","Branches","getCurrentBranch","Branch","setRegion","ResultMessage","setCurrentBranch","currentUser","getFunctionalEntitlement","funct","Entitlement","getFunctionalEntitlementBranch","canI","Result","canIBranch","onBranchesChanged","onBranchChanged","onShuttingDown","registerMethod","restart","transformFunction","InMemoryStore","createAppDef","AppManagerFactory","entitlements","skipIcon","snapshot","skipIcons","resolveFunc","rejectFunc","resultPromise","streamData","events","createDataSubscription","windowStore","WindowStore","waitForTimeoutInMilliseconds","_pendingWindows","_pendingWindowsStates","getIfReady","remote","urlChanged","setReadyState","targetWindowState","markReadyToShow","setUrlChangedState","waitFor","onReadyWindow","Utils$1","callbackifyPromise","getMonitor","displays","workingAreaWidth","workingAreaHeight","monitor","totalOverlap","calculateTotalOverlap","getDisplayCenterOfScreen","r1","r2","r1x","r1y","r1xMax","r1yMax","r2x","r2y","r2xMax","r2yMax","windowFactory","appManagerGetter","displayAPIGetter","_group","resultWindow","_url","_bounds","_frameColor","_focus","_neighbours","neighbours","_groupId","groupId","_isGroupHeaderVisible","isGroupHeaderVisible","_isTabHeaderVisible","isTabHeaderVisible","_isTabSelected","isTabSelected","_settings","_isVisible","_isSticky","isSticky","isCollapsed","_windowState","_tabGroupId","tabGroupId","_isLocked","isLocked","_frameButtons","_zoomFactor","zoomFactor","_placementSettings","placementSettings","dimensions","resolveTimeout","unsubscribeBoundsChanged","resolveImmediately","areBoundsEqual","onBoundsChanged","toBeVisible","onVisibilityChanged","waitForLockingChanged","onLockingChanged","onTitleChanged","onClose","onUrlChanged","onFrameButtonAdded","onFrameButtonRemoved","onCollapsed","onExpanded","onMaximized","onMinimized","onNormal","onFocusChanged","onTabHeaderVisibilityChanged","onGroupChanged","getNeighboursByDirection","direction","winId","getApplicationName","_APPLICATION_NAME","_t42","getWindowInfo","requested","minHeight","maxHeight","maxWidth","areHeightsEqual","areWidthsEqual","areLeftsEqual","areTopsEqual","handleWindowClose","handleWindowChangeState","handleTitleChanged","newTitle","handleVisibilityChanged","handleUrlChanged","newUrl","handleWindowSettingsChanged","handleContextUpdated","handleFrameIsLockedChanged","handleBoundsChanged","handleFocusChanged","isFocused","handleFrameButtonAdded","frameButton","buttonObj","btn","buttonId","handleFrameButtonRemoved","frameButtonId","button","handleFrameButtonClicked","handleFrameColorChanged","handleFrameAttached","handleFrameSelectionChanged","newWindow","prevWindow","selectedWindow","previousWindow","un_1","onTabSelectionChanged","newWin","prevWin","handleCompositionChanged","handleGroupHeaderVisibilityChanged","handleTabHeaderVisibilityChanged","handleGroupChanged","newGroup","oldGroup","handleGroupAssociation","group","handleAttached","newTabGroupId","tabHeaderVisible","handleDetached","handleWindowAttached","handleWindowDetached","handleZoomFactorChanged","handleIsStickyChanged","handlePlacementSettingsChanged","displayAPI_1","index_1","hostInstance","monitors","maximize","minimize","maximizeRestore","collapse","expand","toggleCollapse","setStyle","errMessage","setOnTop","onTop","resetButtons","buttons","setSizeConstraints","constraints","navigate","addFrameButton","buttonInfo","imageBase64","removeFrameButton","show","hide","center","snap","targetWindowGroup","targetWindow","targetGroup","showLoader","loader","hideLoader","lock","unlock","getIcon","setIcon","base64Image","setTabTooltip","attachTab","tab","sourceWindowId","targetWindowId","argsForSend","detachTab","opt","_options","hideTabHeader","visibilityChangeHeard","detachedHeard","unVisibility","isVisibilityCorrect","unDetached","setTabHeaderVisible","toBeTabHeaderVisible","showPopup","createFlydown","setModalState","isModal","setZoomFactor","zoomIn","zoomOut","showDevTools","capture","captureOptions","flash","suppliedOptions","flashOptions","shouldFlash","setSticky","print","printOptions","printToPDF","printToPDFOptions","place","ungroup","ungroupOptions","unGroupChanged","onFrameButtonClicked","onStickyChanged","onWindowAttached","onWindowDetached","onClosing","onRefreshing","prevent","onZoomFactorChanged","onPlacementSettingsChanged","onNeighboursChanged","allWindows","getAllTabs","getParentWindow","myParentId","parentInstanceId","getChildWindows","Events","Registry","GDExecutor","agmTarget","stylePromises","wait","toolTip","allowClose","allowCollapse","allowLockUnlock","allowMaximize","allowMinimize","tabTooltip","tabToolTip","buttonsConfig","snappingEdge","dataURL","toShow","optionsCopy","reformatedOptions","targetLocation","popupBounds","targetId","popupId","fullOptions","horizontalOffset","verticalOffset","reformatFlydownOptions","zoneIds","zones","flydownSize","cancel","clearFlydownArea","handleFlydownBoundsRequested","cancelCallback","callbackData","responses","defaultResponse","zoneId","flydownId","flydownWindowBounds","flydownWindowId","captureGroup","groupWindowIds","configure","filePath","setGroupHeaderVisible","getGroupTitle","setGroupTitle","addCloseHandler","assignGeneralIfUnassigned","zone","valueFromOptions","flydownBounds","flydownActiveArea","activeArea","areaIds","getWindowsByTabGroupId","GDEnvironment","wndId","_waitTimeout","normalizeInstance","_windowId","_appManagerGetter","_displayAPIGetter","caller","respondToEvent","streamResolve","streamReject","updateWindow","copyOptions","windowState","tabAttached","tabDetached","onEvent","onCompositionChanged","onGroupHeaderVisibilityChanged","onWindowGotFocus","onWindowLostFocus","windowInfo","readyResolve","extendedStreamEvent","getExtendedStreamEvent","windowInfoCreatedEvent","windowObjectAndEvents","theWindow","theWindowEvents","windowInfoBoundsChangedEvent","windowInfoUrlChangedEvent","windowInfoTitleChanged","windowInfoIsStickyChangedChanged","windowInfoCompositionChanged","neighbors","groupHeaderVisible","windowInfoFocusChanged","focusChanged","frameId","winsToBeNotified_1","oldTabGroupId","winsToBeNotified_2","newWindowId","prevWindowId","windowObjAndEvents","mapToWindowConstructorOptions","isActiveTab","streamEvent","toUpperCase","groupFactory","_windowsId","waitForHeaderVisibilityChanged","onHeaderVisibilityChanged","groupObject","_mapToWindowObjects","winObjects","windowObject","_mapToWindowObject","mappedWindows","mappedWindow","showHeader","hideHeader","groupAPI","groupInternal","removeWindow","window_2","groupsFactory","_groups","heardForWindowsCounter","findGroupByWindow","groupFound","addNewWindow","windowGroupId","createdGroup","createOrGetGroup","deleteGroup","newGroupId","oldGroupId","groupEvents","groupsAPI","groupsEvents","onWindowMoved","WindowsFactory","groups","isReady","gdPromise","rej","envDetector","errorHandler","windowsForListing","onTabAttached","unsubFunc","unsubscribed","onTabDetached","store","LayoutStore","removeWhere","condition","seed$1","alphabet$1","previousSeed$1","shuffled$1","randomFromSeed$1","ORIGINAL$1","reset$1","setCharacters$1","getShuffled$1","shuffle$1","alphabet_1$1","crypto$1","randomByteBrowser$1","encode_1$1","decode_1$1","build_1","isValid$1","lib$3","createCommonjsModule$1","shortid$1","ContextProvider","activitiesGetter","registerRequestMethods","onSaveRequested","context_1","activityIsOwner","usersCbs","requestResult","autoSaveWindowContext","windowContext","activityContext","transformACSLayout","something","accumulator","convertedValue","LayoutImpl","LayoutsAPIImpl","activityGetter","setDefaultGlobal","clearDefaultGlobal","getDefaultGlobal","isSlimMode","gotSnapshot","verifyNotSlimMode","ignoreHidden","layoutObject","actIds","appIds","ignoreLayoutRestrictions","isVisibleWindow","ignoreMyInstance","autoCollectApps","invokeMethodAndTrack","activityIdToJoin","restoreActivityOwner","ignoreActivityWindowTypes","reuseWindows","t42","restoreOptions","activityToJoin","closeOldWindows","reuseExistingWindows","toClose","splash","getInstancesToClose","layoutType","getObjectValues","Layouts","rename","newName","oldName","updateMetadata","hibernate","resume","getCurrentLayout","onRestored","onRenamed","updateAppContextInCurrent","updateDefaultContext","skipStreamEvent","agmResult","streamEventReceived","handleResult","shellApp","isShell","shellApplicationName","ACSStream","resolveReady","rejectReady","resolveGotSnapshot","rejectGotSnapshot","noRetry","transform","checkForLayoutEventMethod","IsSnapshot","addLayouts","OnLayoutAdded","removeLayouts","OnLayoutRemoved","changeLayouts","OnLayoutChanged","renameLayouts","OnLayoutRenamed","restoredLayout","OnLayoutRestored","Token","layoutsData","layoutData","removedLayouts","removedLayout","existingLayout","compareLayouts","changedLayouts","changedLayout","renamedLayouts","renamedLayout","layout1","layout2","restoredLayouts","LayoutsFactory","acsStream","DisplayCommand","DisplayManager","callGD","GetAll","decorateDisplay","getPrimary","isPrimary","Capture","captureAll","CaptureAll","getMousePosition","GetMousePosition","original","switchChannel","swId","newChannel","SharedContextSubscriber","isChannel","getContextData","updateChannel","ChannelsImpl","shared","subsKey","changedKey","joinCore","joinNoSelectorSwitch","leaveCore","leaveNoSelectorSwitch","changeSelector","doesChannelExist","intervalId","sharedContexts","interopLib","setupAGM","HotkeysImpl","firstHotkey","hotkeys","hkToLower","hotkey","formatHotkey","registerInvokeAGMMethod","unregisterAll","isRegistered","prepareConfig$1","getLibConfig","defaultMode","trueMode","getModeAsString","Glue42Notification","actions","badge","image","lang","renotify","requireInteraction","silent","removeEventListener","dispatchEvent","Notifications","methodsRegistered","methodNameRoot","bunchOfPromises","validActions","validActions_1","g42notification","maxActions","handleNotificationAction","severity","glueRoutingDetailMethodName","g42notificationId","g42action","g42interopMethod","g42interopTarget","stringValue","glueAction","payload_1","event_1","Event","onaction","actionInterop","event_2","ThemesImpl","core","isSubscribed","getConfiguration","getMethodName","getCurrent","selected","theme","setMethodName","sharedContextName","getThemesMethodName","setThemesMethodName","initInfo","Intents","ctToLower_1","ct","intentDef","isDynamicIntent","anAppHandler","anInstanceHandler","intentDefHandler","intentHandler","startApp","raiseIntentToInstance","appsWithIntents","appsWithIntents_1","serverWindowIds","T42WndGetInfo","windowsInfos","servers_1","withIntentsInfo","serverWindowId","appIntent","appWithIntents","appDefIntent","windowsIdToTitle","registeredIntent","interopServer","registeredMethod","addedMethod","windowsInfo","InitInfo","numberOfCalls","getPromise","factory$3","factoryCore","createWindows","glueConfig","windowsLogger","getLibLogger","debugLog","_displays","createActivities","activityLogger","createAppManager","createLayouts","layoutsConfig","lay","createChannels","channelsAPI","createHotkeys","hotkeysAPI","factory$1","createIntents","intentsAPI","createNotifications","notificationsAPI","createDisplaysApi","displaysLogger","createThemes","themesAPI","themes","factory$2","newLogger","loggerConfig","currentLog","glueApi","glueFactoryLog","whatToExpose","shouldSetToWindow","autoInjected","_setPrototypeOf","_typeof","_assertThisInitialized","_getPrototypeOf","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","lastThis","lastResult","lastArgs","calledOnce","newArgs","StyleSheet","isSpeedy","speedy","tags","ctr","nonce","before","_proto","insert","rule","setAttribute","appendChild","createTextNode","createStyleElement","nextSibling","insertBefore","sheet","styleSheets","ownerNode","sheetForTag","isImportRule","insertRule","cssRules","flush","parentNode","removeChild","stylis_min","W","X","ia","Z","ja","ka","aa","G","ba","la","ma","R","na","ea","oa","H","S","B","U","D","M","K","J","N","ca","O","da","fa","Y","E","ha","Q","use","T","toSheet","block","Sheet","ruleSheet","content","selectors","parents","line","column","depth","delimiter","createCache","stylisOptions","stylis","Stylis","inserted","head","_insert","nodes","querySelectorAll","getAttribute","stylisPlugins","selector","serialized","shouldCache","registered","getRegisteredStyles","registeredStyles","classNames","rawClassName","insertStyles","isStringTag","murmur2","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","lineHeight","opacity","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","memoize","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","processStyleName","styleName","processStyleValue","p1","p2","cursor","unitless","handleInterpolation","mergedProps","interpolation","couldBeSelectorInterpolation","__emotion_styles","anim","_key","interpolated","createStringFromObject","previousCursor","cached","labelPattern","serializeStyles","stringMode","strings","raw","lastIndex","identifierName","hashString","EmotionCacheContext","HTMLElement","ThemeContext","CacheProvider","withEmotionCache","render","Consumer","forwardRef","typePropName","createEmotionProps","newProps","cssProp","Emotion","_len","jsx","argsLength","createElementArgArray","classnames","cls","toAdd","ClassNames","cx","_len2","_key2","excluded","sourceKeys","sourceSymbolKeys","applyPrefixToName","cleanValue","isDocumentElement","documentElement","getScrollTop","pageYOffset","scrollTop","scrollTo","easeOutCubic","animatedScrollTo","change","animateScroll","requestAnimationFrame","isTouchCapable","createEvent","_objectSpread","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","getMenuPlacement","_ref","menuEl","placement","shouldScroll","isFixedPosition","spacing","scrollParent","excludeStaticParent","overflowRx","docEl","parentElement","overflowY","overflowX","getScrollParent","defaultState","offsetParent","scrollHeight","getBoundingClientRect","_menuEl$getBoundingCl","menuBottom","menuHeight","menuTop","containerTop","viewHeight","marginBottom","marginTop","viewSpaceAbove","viewSpaceBelow","scrollSpaceAbove","scrollSpaceBelow","scrollDown","scrollUp","_constrainedHeight","spaceAbove","controlHeight","_constrainedHeight2","coercePlacement","PortalPlacementContext","getPortalPlacement","MenuPlacer","maxMenuHeight","getPlacement","_this$props","minMenuHeight","menuPlacement","menuPosition","menuShouldScrollIntoView","getUpdatedProps","placerProps","noticeCSS","_ref5","_ref5$theme","baseUnit","neutral40","textAlign","noOptionsMessageCSS","loadingMessageCSS","NoOptionsMessage","getStyles","innerProps","LoadingMessage","MenuPortal","_Component2","_super2","_this2","_ref7","_this$props2","appendTo","controlElement","isFixed","rect","getBoundingClientObj","scrollDistance","menuWrapper","createPortal","keyList","hasProp","exportedEqual","equal","arrA","arrB","dateA","dateB","regexpA","regexpB","$$typeof","_templateObject","_ref2","Svg","viewBox","focusable","CrossIcon","DownChevron","baseCSS","_ref3","_ref3$theme","neutral60","neutral20","transition","neutral80","dropdownIndicatorCSS","clearIndicatorCSS","loadingDotAnimations","insertable","keyframes","LoadingDot","_ref6","_css","animation","backgroundColor","borderRadius","marginLeft","verticalAlign","LoadingIndicator","isRtl","indicator","ownKeys$1","_objectSpread$1","ownKeys$2","_objectSpread$2","isHidden","background","border","outline","ownKeys$3","_objectSpread$3","MultiValueGeneric","_ref4","MultiValueContainer","MultiValueLabel","MultiValue","isDisabled","removeProps","selectProps","Container","Label","Remove","emotionCx","cropWithEllipsis","ownKeys$4","_objectSpread$4","ClearIndicator","Control","innerRef","menuIsOpen","control","DropdownIndicator","Group","Heading","headingProps","GroupHeading","cleanProps","IndicatorsContainer","indicators","IndicatorSeparator","Input","disabled","Menu","menu","MenuList","isMulti","MultiValueRemove","Option","isSelected","option","Placeholder","SelectContainer","SingleValue","ValueContainer","hasValue","diacritics","base","letters","anyDiacritic","diacriticToBase","diacritic","stripDiacritics","trimString","defaultStringify","A11yText","DummyInput","in","onExited","appear","enter","emotion","NodeResolver","findDOMNode","STYLE_KEYS","LOCK_STYLES","preventTouchMove","preventDefault","allowTouchMove","stopPropagation","preventInertiaScroll","totalScroll","currentScroll","offsetHeight","isTouchDevice","maxTouchPoints","_createSuper$1","_isNativeReflectConstruct$1","canUseDOM","activeScrollLocks","ScrollLock","originalStyles","listenerOptions","passive","accountForScrollbars","touchScrollTarget","targetStyle","currentPadding","paddingRight","clientWidth","adjustedPadding","_this3","_createSuper$2","_isNativeReflectConstruct$2","_ref$1","ScrollBlock","_PureComponent","getScrollTarget","blurSelectInput","activeElement","isEnabled","onClick","PureComponent","_createSuper$3","_isNativeReflectConstruct$3","ScrollCaptor","isBottom","isTop","scrollTarget","touchStart","cancelScroll","handleEventDelta","onBottomArrive","onBottomLeave","onTopArrive","onTopLeave","_this$scrollTarget","clientHeight","isDeltaPositive","availableScroll","shouldCancelScroll","onWheel","deltaY","onTouchStart","changedTouches","clientY","onTouchMove","startListening","stopListening","React","ScrollCaptorSwitch","_ref$isEnabled","instructionsAriaMessage","isSearchable","tabSelectsValue","valueEventAriaMessage","isOptionDisabled","defaultStyles","clearIndicator","pointerEvents","_ref$theme","alignItems","neutral5","neutral0","borderColor","neutral10","primary","borderStyle","borderWidth","boxShadow","flexWrap","justifyContent","neutral30","dropdownIndicator","paddingBottom","paddingTop","groupHeading","paddingLeft","indicatorsContainer","alignSelf","indicatorSeparator","_ref4$theme","margin","loadingIndicator","marginRight","loadingMessage","_ref2$theme","alignToControl","menuGutter","menuList","WebkitOverflowScrolling","menuPortal","multiValue","multiValueLabel","textOverflow","multiValueRemove","dangerLight","danger","noOptionsMessage","primary25","userSelect","WebkitTapHighlightColor","primary50","neutral50","singleValue","valueContainer","defaultTheme","primary75","neutral70","neutral90","_createSuper$4","_isNativeReflectConstruct$4","backspaceRemovesValue","blurInputOnSelect","captureMenuScroll","closeMenuOnSelect","closeMenuOnScroll","controlShouldRenderValue","escapeClearsValue","filterOption","rawInput","_ignoreCase$ignoreAcc","ignoreCase","ignoreAccents","matchFrom","candidate","formatGroupLabel","getOptionLabel","getOptionValue","isLoading","menuShouldBlockScroll","isMobileDevice","openMenuOnFocus","openMenuOnClick","pageSize","screenReaderStatus","tabIndex","Select","ariaLiveSelection","ariaLiveContext","focusedOption","focusedValue","inputIsHidden","menuOptions","selectValue","blockOptionHover","isComposing","clearFocusValueOnUpdate","commonProps","hasGroups","initialTouchX","initialTouchY","inputIsHiddenAfterUpdate","instancePrefix","openAfterFocus","scrollToFocusedOptionOnUpdate","userIsDragging","controlRef","getControlRef","focusedOptionRef","getFocusedOptionRef","menuListRef","getMenuListRef","getInputRef","cacheComponents","focusInput","blurInput","actionMeta","setValue","onInputChange","onMenuClose","selectOption","_this$props3","isOptionSelected","announceAriaLiveSelection","removeValue","removedValue","clearValue","popValue","lastSelectedValue","getValue","classNamePrefix","custom","getElementId","getActiveDescendentId","_this$state","announceAriaLiveContext","onMenuMouseDown","onMenuMouseMove","onControlMouseDown","openMenu","onDropdownIndicatorMouseDown","_this$props4","onClearIndicatorMouseDown","onScroll","onCompositionStart","onCompositionEnd","touches","touch","clientX","deltaX","onTouchEnd","contains","onControlTouchEnd","onClearIndicatorTouchEnd","onDropdownIndicatorTouchEnd","handleInputChange","inputValue","currentTarget","onMenuOpen","onInputFocus","_this$props5","onFocus","onInputBlur","onBlur","onOptionHover","shouldHideSelectedOptions","_this$props6","hideSelectedOptions","onKeyDown","_this$props7","isClearable","_this$state2","defaultPrevented","focusValue","shiftKey","keyCode","focusOption","buildMenuOptions","_props$inputValue","toOption","onHover","onSelect","optionId","onMouseMove","onMouseOver","itemIndex","_selectValue","newSelectValue","_ref9","lastProps","_menuOptions","startListeningComposition","startListeningToTouch","autoFocus","nextProps","_this$props8","getNextFocusedValue","getNextFocusedOption","_this$props9","focusedEl","menuRect","focusedRect","overScroll","offsetTop","scrollIntoView","stopListeningComposition","stopListeningToTouch","_this$props10","_this$state3","_this$props11","openAtIndex","selectedIndex","_this$props12","_this$state4","focusedIndex","nextFocus","_this$props13","_this$state5","getTheme","nextSelectValue","_this$state6","lastFocusedIndex","lastFocusedOption","_this$props14","formatOptionLabel","_this$state7","_this$props15","focusedValueMsg","valueFocusAriaMessage","focusedOptionMsg","optionFocusAriaMessage","resultsMsg","screenReaderMessage","resultsAriaMessage","countOptions","_this$props16","form","ariaAttributes","readOnly","_this$commonProps","autoCapitalize","autoComplete","autoCorrect","spellCheck","_this4","_this$components","_this$props17","_this$state8","isOptionFocused","onMouseDown","_this$props18","_this$props19","_this$components2","_this5","_this$components3","_this$state9","_this$props20","menuPortalTarget","onMenuScrollToTop","onMenuScrollToBottom","menuUI","hasOptions","headingId","_message","menuPlacementProps","menuElement","_ref10","_ref10$placerProps","_this6","_this$props21","_value2","constructAriaLiveMessage","_this$components4","_this$props22","getCommonProps","renderLiveRegion","renderPlaceholderOrValue","renderInput","renderClearIndicator","renderLoadingIndicator","renderIndicatorSeparator","renderDropdownIndicator","renderMenu","renderFormField","defaultInputValue","defaultMenuIsOpen","SelectComponent","_class","_temp","StateManager","callProp","getProp","manageState","for","encodeURIComponent","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","refs","updater","isReactComponent","forceUpdate","isPureReactComponent","__self","__source","_owner","keyPrefix","V","escape","ReactCurrentDispatcher","ReactCurrentBatchConfig","suspense","ReactCurrentOwner","IsSomeRendererActing","Children","toArray","only","Fragment","Profiler","StrictMode","Suspense","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","createFactory","createRef","isValidElement","_ctor","_result","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","onError","pa","qa","ra","sa","extractEvents","eventTypes","ta","phasedRegistrationNames","ua","registrationName","va","wa","xa","ya","za","Aa","Ba","Ca","stateNode","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","Ua","Va","xlinkHref","Wa","Xa","Sa","Ta","Ra","removeAttribute","setAttributeNS","Ya","Za","$a","ab","bb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","qb","_debugOwner","_debugSource","fileName","lineNumber","return","rb","sb","nodeName","xb","_valueTracker","stopTracking","tb","yb","zb","defaultChecked","_wrapperState","initialChecked","Ab","initialValue","controlled","Bb","Cb","Db","Eb","ownerDocument","Gb","Fb","Hb","defaultSelected","Ib","Jb","Kb","Lb","textContent","Mb","Nb","Ob","Pb","Qb","MSApp","execUnsafeLocalFunction","namespaceURI","innerHTML","valueOf","firstChild","Rb","lastChild","nodeType","nodeValue","Sb","Tb","animationend","animationiteration","animationstart","transitionend","Ub","Vb","Wb","Xb","Yb","Zb","$b","bc","cc","dc","alternate","effectTag","ec","memoizedState","dehydrated","fc","hc","sibling","gc","ic","jc","kc","lc","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","nc","srcElement","correspondingUseElement","oc","pc","qc","topLevelType","nativeEvent","targetInst","ancestors","eventSystemFlags","containerInfo","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Kc","blockedOn","Lc","pointerId","Mc","Nc","Pc","unstable_runWithPriority","priority","hydrate","Qc","Rc","Sc","Tc","Uc","unstable_scheduleCallback","unstable_NormalPriority","Vc","Wc","Yc","Zc","$c","bubbled","captured","eventPriority","cd","unstable_UserBlockingPriority","ed","fd","gd","hd","Oc","jd","gridArea","lineClamp","kd","ld","md","setProperty","nd","menuitem","area","embed","hr","img","keygen","link","param","track","wbr","od","pd","is","qd","rd","sd","td","ud","vd","xd","HTMLIFrameElement","contentWindow","yd","contentEditable","Dd","Ed","Fd","Gd","Hd","Jd","Kd","previousSibling","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","dispatchConfig","Ud","_targetInst","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","Interface","isDefaultPrevented","returnValue","ee","eventPool","fe","destructor","de","getPooled","cancelBubble","persist","eventPhase","bubbles","cancelable","timeStamp","isTrusted","extend","ge","he","ie","je","ke","documentMode","le","ne","oe","beforeInput","compositionEnd","compositionStart","compositionUpdate","pe","qe","re","detail","se","ve","locale","which","te","ctrlKey","altKey","metaKey","char","ue","we","datetime","email","month","tel","text","week","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","detachEvent","He","Ie","Je","Ke","Le","Me","_isInputEventSupported","Ne","view","Oe","Alt","Meta","Shift","Pe","getModifierState","Qe","Re","Se","Te","Ue","Ve","screenX","screenY","pageX","pageY","relatedTarget","fromElement","toElement","movementX","movementY","We","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","Xe","mouseEnter","mouseLeave","pointerEnter","pointerLeave","Ye","defaultView","parentWindow","$e","af","bf","cf","df","ef","ff","gf","hf","jf","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","kf","lf","animationName","elapsedTime","pseudoElement","mf","clipboardData","nf","of","charCode","pf","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Apps","Scroll","MozPrintableKey","qf","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","rf","sf","dataTransfer","tf","targetTouches","uf","vf","wheelDeltaX","wheelDeltaY","wheelDelta","deltaZ","deltaMode","wf","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","yf","zf","Af","Bf","Cf","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","childContextTypes","Df","Ef","Ff","getChildContext","Gf","__reactInternalMemoizedMergedChildContext","Hf","If","Jf","Kf","unstable_cancelCallback","Lf","unstable_requestPaint","Mf","unstable_now","Nf","unstable_getCurrentPriorityLevel","Of","unstable_ImmediatePriority","Pf","Qf","Rf","unstable_LowPriority","Sf","unstable_IdlePriority","Tf","Uf","unstable_shouldYield","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","childExpirationTime","qg","firstContext","expirationTime","rg","sg","observedBits","responders","tg","ug","updateQueue","baseState","baseQueue","pending","effects","vg","wg","suspenseConfig","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Jg","_reactInternalFiber","Gg","Hg","Ig","Kg","shouldComponentUpdate","Lg","Mg","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Ng","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Og","Pg","_stringRef","Qg","Rg","lastEffect","nextEffect","firstEffect","Sg","Tg","elementType","Ug","implementation","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","eh","fh","gh","hh","memoizedProps","revealOrder","ih","responder","jh","kh","lh","mh","nh","oh","ph","qh","rh","th","uh","vh","wh","lastRenderedReducer","eagerReducer","eagerState","lastRenderedState","dispatch","xh","yh","zh","Ah","deps","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","readContext","useResponder","useDeferredValue","useTransition","Oh","Ph","Qh","Rh","Sh","Th","pendingProps","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","di","ei","fi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","gi","getDerivedStateFromError","pendingContext","ni","pi","qi","ii","retryTime","ji","unstable_avoidThisFallback","ki","li","isBackwards","rendering","renderingStartTime","tail","tailExpiration","tailMode","mi","ri","si","wasMultiple","multiple","createElementNS","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Fi","Ei","Gi","__reactInternalSnapshotBeforeUpdate","Hi","Ii","Ji","Ki","Li","componentWillUnmount","Di","Mi","Ni","Oi","Pi","Qi","_reactRootContainer","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","componentDidCatch","aj","componentStack","Rj","bj","ceil","cj","dj","kj","lj","mj","nj","oj","qj","rj","sj","tj","uj","vj","wj","timeoutMs","xj","yj","zj","lastExpiredTime","Aj","firstPendingTime","lastPingedTime","nextKnownPendingLevel","callbackExpirationTime","callbackPriority","callbackNode","Bj","Cj","Dj","Ej","Fj","Gj","Hj","finishedWork","finishedExpirationTime","lastSuspendedTime","Ij","timeoutHandle","Jj","busyMinDurationMs","busyDelayMs","Kj","Mj","Nj","pingCache","Oj","ub","Pj","Xc","Qj","Sj","firstSuspendedTime","rangeCount","wb","activeElementDetached","focusedElem","selectionRange","Tj","compareDocumentPosition","createRange","setStart","removeAllRanges","addRange","setEnd","scrollLeft","vb","Uj","Vj","Wj","ob","Xj","unstable_observedBits","Zj","pendingChildren","ak","bk","ck","dk","ek","fk","Jc","_internalRoot","gk","ik","hasAttribute","hk","jk","kk","unmount","Lj","lk","findFiberByHostInstance","supportsFiber","inject","onCommitFiberRoot","onCommitFiberUnmount","Yj","overrideHookState","overrideProps","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","bundleType","rendererPackageName","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","MessageChannel","unstable_forceFrameRate","cancelAnimationFrame","port2","port1","sortIndex","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_wrapCallback","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","LN2","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","_invoke","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","awrap","async","skipTempReset","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","objectWithoutPropertiesLoose","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","getShim","isRequired","ReactPropTypes","symbol","arrayOf","instanceOf","objectOf","shape","exact","checkPropTypes","PropTypes"],"mappings":"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S,mCACR,CACDD,KAAM,IACNC,QAAS,yFACR,CACDD,KAAM,IACNC,QAAS,mFACR,CACDD,KAAM,IACNC,QAAS,+GACR,CACDD,KAAM,IACNC,QAAS,6BACR,CACDD,KAAM,IACNC,QAAS,mFACR,CACDD,KAAM,IACNC,QAAS,2GACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,+CACR,CACDD,KAAM,IACNC,QAAS,6FACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,qPACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,2DACR,CACDD,KAAM,IACNC,QAAS,mCACR,CACDD,KAAM,IACNC,QAAS,qGACR,CACDD,KAAM,IACNC,QAAS,qGACR,CACDD,KAAM,IACNC,QAAS,yFACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,mMACR,CACDD,KAAM,IACNC,QAAS,+CACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,2DACR,CACDD,KAAM,IACNC,QAAS,6BACR,CACDD,KAAM,IACNC,QAAS,uFACR,CACDD,KAAM,IACNC,QAAS,mFACR,CACDD,KAAM,IACNC,QAAS,qMACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,oBACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,gBACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,qDACR,CACDD,KAAM,IACNC,QAAS,2EACR,CACDD,KAAM,IACNC,QAAS,mFACR,CACDD,KAAM,KACNC,QAAS,gBACR,CACDD,KAAM,IACNC,QAAS,iLACR,CACDD,KAAM,IACNC,QAAS,mCACR,CACDD,KAAM,IACNC,QAAS,yFACR,CACDD,KAAM,IACNC,QAAS,yFACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,+GACR,CACDD,KAAM,IACNC,QAAS,mCACR,CACDD,KAAM,IACNC,QAAS,mFACR,CACDD,KAAM,IACNC,QAAS,iHACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,+CACR,CACDD,KAAM,IACNC,QAAS,mGACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,qPACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,2DACR,CACDD,KAAM,IACNC,QAAS,mCACR,CACDD,KAAM,IACNC,QAAS,qGACR,CACDD,KAAM,IACNC,QAAS,yGACR,CACDD,KAAM,IACNC,QAAS,+FACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,mMACR,CACDD,KAAM,IACNC,QAAS,+CACR,CACDD,KAAM,KACNC,QAAS,UACR,CACDD,KAAM,IACNC,QAAS,iEACR,CACDD,KAAM,IACNC,QAAS,6BACR,CACDD,KAAM,IACNC,QAAS,2FACR,CACDD,KAAM,IACNC,QAAS,oFAEPC,GAAe,IAAIhgG,OAAO,IAAM6/F,GAAWjhI,KAAI,SAAU4gB,GAC3D,OAAOA,EAAEugH,WACRr/H,KAAK,IAAM,IAAK,KACfu/H,GAAkB,GAEb9wI,GAAI,EAAGA,GAAI0wI,GAAWxwI,OAAQF,KAGrC,IAFA,IAAI+wI,GAAYL,GAAW1wI,IAElBsxB,GAAI,EAAGA,GAAIy/G,GAAUH,QAAQ1wI,OAAQoxB,KAC5Cw/G,GAAgBC,GAAUH,QAAQt/G,KAAMy/G,GAAUJ,KAItD,IAAIK,GAAkB,SAAyBpvG,GAC7C,OAAOA,EAAItT,QAAQuiH,IAAc,SAAU76G,GACzC,OAAO86G,GAAgB96G,OAI3B,SAAS72B,GAAQC,EAAQC,GAAkB,IAAIC,EAAOR,OAAOQ,KAAKF,GAAS,GAAIN,OAAOS,sBAAuB,CAAE,IAAIC,EAAUV,OAAOS,sBAAsBH,GAAaC,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOZ,OAAOa,yBAAyBP,EAAQM,GAAKV,eAAgBM,EAAKM,KAAKC,MAAMP,EAAME,GAAY,OAAOF,EAI9U,IAAI2xI,GAAa,SAAoBrvG,GACnC,OAAOA,EAAItT,QAAQ,aAAc,KAG/B4iH,GAAmB,SAA0Bd,GAC/C,MAAO,GAAG7/H,OAAO6/H,EAAOx/G,MAAO,KAAKrgB,OAAO6/H,EAAOvxI,QAqCpD,IAAImnI,GAA+C,CACjD5iI,KAAM,mBACNuE,OAAQ,2JAQNwpI,GAAW,SAAkBvwI,GAC/B,OAAO4iI,EAAI,OAAQh9H,EAAS,CAC1B+uD,IAAKywE,IACJplI,KAGL,SAASwwI,GAAWpL,GACLA,EAAKqL,GACRrL,EAAK78D,IACA68D,EAAKsL,SACPtL,EAAKuL,OACNvL,EAAKwL,MACNxL,EAAK7zC,KALhB,IAMI48C,EAAW/I,EAAK+I,SAEhBnuI,GADUolI,EAAKyL,QACPjlI,EAAyBw5H,EAAM,CAAC,KAAM,MAAO,WAAY,SAAU,QAAS,OAAQ,WAAY,aAE5G,OAAOxC,EAAI,QAASh9H,EAAS,CAC3BsG,IAAKiiI,GACJnuI,EAAO,CACR20D,IAAkBo3E,EAAK,CACrB/7G,MAAO,aAEP68G,WAAY,EACZC,OAAQ,EACR5lI,SAAU,UACV6lI,QAAS,EACTv/D,QAAS,EAET/hE,MAAO,EAEP0gF,MAAO,cAEP3lF,MAAO,IACPu4H,QAAS,EACTz4H,SAAU,WACVikH,UAAW,YAC8B,OAI/C,SAASka,GAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPq/H,GAA6B,OAAO,WAAkC,IAAsC3gI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAI5Z,IAAIysI,GAA4B,SAAU9oI,GACxCuB,EAAUunI,EAAc9oI,GAExB,IAAImrB,EAASsxG,GAAaqM,GAE1B,SAASA,IAGP,OAFAnxI,EAAgB4F,KAAMurI,GAEf39G,EAAOl0B,MAAMsG,KAAMlG,WAoB5B,OAjBAa,EAAa4wI,EAAc,CAAC,CAC1B9yI,IAAK,oBACLC,MAAO,WACLsH,KAAKvF,MAAMmuI,SAAS4C,sBAAYxrI,SAEjC,CACDvH,IAAK,uBACLC,MAAO,WACLsH,KAAKvF,MAAMmuI,SAAS,QAErB,CACDnwI,IAAK,SACLC,MAAO,WACL,OAAOsH,KAAKvF,MAAM4C,aAIfkuI,EA5BuB,CA6B9B3kI,aAEE6kI,GAAa,CAAC,YAAa,SAAU,WAAY,eAAgB,YACjEC,GAAc,CAChBzlI,UAAW,aAEX7E,SAAU,SACVL,SAAU,WACVI,OAAQ,QAGV,SAASwqI,GAAiBvrI,GACxBA,EAAEwrI,iBAEJ,SAASC,GAAezrI,GACtBA,EAAE0rI,kBAEJ,SAASC,KACP,IAAI/qI,EAAMhB,KAAKw+H,UACXwN,EAAchsI,KAAK6gI,aACnBoL,EAAgBjrI,EAAMhB,KAAKksI,aAEnB,IAARlrI,EACFhB,KAAKw+H,UAAY,EACRyN,IAAkBD,IAC3BhsI,KAAKw+H,UAAYx9H,EAAM,GAK3B,SAASmrI,KACP,MAAO,iBAAkBruI,QAAUoE,UAAUkqI,eAG/C,SAASC,GAAelN,GAAW,IAAIC,EAEvC,WAAyC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPksI,GAA+B,OAAO,WAAkC,IAAsCxtI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAGha,IAAIytI,MAAgBzuI,OAAOsf,WAAYtf,OAAOsf,SAAS9X,eACnDknI,GAAoB,EAEpBC,GAA0B,SAAUhqI,GACtCuB,EAAUyoI,EAAYhqI,GAEtB,IAAImrB,EAASy+G,GAAeI,GAE5B,SAASA,IACP,IAAI/pI,EAEJtI,EAAgB4F,KAAMysI,GAEtB,IAAK,IAAIrP,EAAOtjI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAMmiI,GAAO1B,EAAO,EAAGA,EAAO0B,EAAM1B,IAC/Ez7H,EAAKy7H,GAAQ5hI,UAAU4hI,GASzB,OANAh5H,EAAQkrB,EAAO9wB,KAAKpD,MAAMk0B,EAAQ,CAAC5tB,MAAMoK,OAAOnK,KAC1CysI,eAAiB,GACvBhqI,EAAMiqI,gBAAkB,CACtBl5B,SAAS,EACTm5B,SAAS,GAEJlqI,EAgGT,OA7FA/H,EAAa8xI,EAAY,CAAC,CACxBh0I,IAAK,oBACLC,MAAO,WACL,IAAImrI,EAAS7jI,KAEb,GAAKusI,GAAL,CACA,IAAIhK,EAAcviI,KAAKvF,MACnBoyI,EAAuBtK,EAAYsK,qBACnCC,EAAoBvK,EAAYuK,kBAChClzI,EAASwjB,SAASmN,KAClBwiH,EAAcnzI,GAAUA,EAAO8H,MAWnC,GATImrI,GAEFpB,GAAWxxI,SAAQ,SAAUxB,GAC3B,IAAIouE,EAAMkmE,GAAeA,EAAYt0I,GACrCorI,EAAO6I,eAAej0I,GAAOouE,KAK7BgmE,GAAwBL,GAAoB,EAAG,CACjD,IAAIQ,EAAiBhoI,SAAShF,KAAK0sI,eAAeO,aAAc,KAAO,EACnEC,EAAc9vH,SAASmN,KAAOnN,SAASmN,KAAK2iH,YAAc,EAC1DC,EAAkBrvI,OAAOof,WAAagwH,EAAcF,GAAkB,EAC1Er0I,OAAOQ,KAAKuyI,IAAazxI,SAAQ,SAAUxB,GACzC,IAAIouE,EAAM6kE,GAAYjzI,GAElBs0I,IACFA,EAAYt0I,GAAOouE,MAInBkmE,IACFA,EAAYE,aAAe,GAAG7iI,OAAO+iI,EAAiB,OAKtDvzI,GAAUuyI,OAEZvyI,EAAOu3B,iBAAiB,YAAaw6G,GAAkB3rI,KAAK2sI,iBAExDG,IACFA,EAAkB37G,iBAAiB,aAAc46G,GAAsB/rI,KAAK2sI,iBAC5EG,EAAkB37G,iBAAiB,YAAa06G,GAAgB7rI,KAAK2sI,mBAKzEH,IAAqB,KAEtB,CACD/zI,IAAK,uBACLC,MAAO,WACL,IAAI00I,EAASptI,KAEb,GAAKusI,GAAL,CACA,IAAIxI,EAAe/jI,KAAKvF,MACpBoyI,EAAuB9I,EAAa8I,qBACpCC,EAAoB/I,EAAa+I,kBACjClzI,EAASwjB,SAASmN,KAClBwiH,EAAcnzI,GAAUA,EAAO8H,MAEnC8qI,GAAoBnqI,KAAKwC,IAAI2nI,GAAoB,EAAG,GAEhDK,GAAwBL,GAAoB,GAC9Cf,GAAWxxI,SAAQ,SAAUxB,GAC3B,IAAIouE,EAAMumE,EAAOV,eAAej0I,GAE5Bs0I,IACFA,EAAYt0I,GAAOouE,MAMrBjtE,GAAUuyI,OACZvyI,EAAOywH,oBAAoB,YAAashB,GAAkB3rI,KAAK2sI,iBAE3DG,IACFA,EAAkBziB,oBAAoB,aAAc0hB,GAAsB/rI,KAAK2sI,iBAC/EG,EAAkBziB,oBAAoB,YAAawhB,GAAgB7rI,KAAK2sI,sBAI7E,CACDl0I,IAAK,SACLC,MAAO,WACL,OAAO,SAIJ+zI,EApHqB,CAqH5B7lI,aAQF,SAASymI,GAAelO,GAAW,IAAIC,EAEvC,WAAyC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPktI,GAA+B,OAAO,WAAkC,IAAsCxuI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IANha2tI,GAAWrlI,aAAe,CACxBylI,sBAAsB,GASxB,IAAIU,GAAiD,CACnDtwI,KAAM,UACNuE,OAAQ,iDAYNgsI,GAA2B,SAAUC,GACvCzpI,EAAUwpI,EAAaC,GAEvB,IAAI7/G,EAASy/G,GAAeG,GAE5B,SAASA,IACP,IAAI9qI,EAEJtI,EAAgB4F,KAAMwtI,GAEtB,IAAK,IAAIpQ,EAAOtjI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAMmiI,GAAO1B,EAAO,EAAGA,EAAO0B,EAAM1B,IAC/Ez7H,EAAKy7H,GAAQ5hI,UAAU4hI,GAsBzB,OAnBAh5H,EAAQkrB,EAAO9wB,KAAKpD,MAAMk0B,EAAQ,CAAC5tB,MAAMoK,OAAOnK,KAC1CqD,MAAQ,CACZwpI,kBAAmB,MAGrBpqI,EAAMgrI,gBAAkB,SAAU/mI,GAC5BA,IAAQjE,EAAMY,MAAMwpI,mBAExBpqI,EAAMuC,SAAS,CACb6nI,kBAAmBnmI,KAIvBjE,EAAMirI,gBAAkB,WAClBvwH,SAASwwH,eACXxwH,SAASwwH,cAAczoI,QAIpBzC,EAoCT,OAjCA/H,EAAa6yI,EAAa,CAAC,CACzB/0I,IAAK,SACLC,MAAO,WACL,IAAI6pI,EAAcviI,KAAKvF,MACnB4C,EAAWklI,EAAYllI,SACvBwwI,EAAYtL,EAAYsL,UACxBf,EAAoB9sI,KAAKsD,MAAMwpI,kBAEnC,OAAKe,EAcExQ,EAAI,MAAO,KAAMA,EAAI,MAAO,CACjCyQ,QAAS9tI,KAAK2tI,gBACdv+E,IAAKm+E,KACHlQ,EAAIkO,GAAc,CACpB3C,SAAU5oI,KAAK0tI,iBACdrwI,GAAWyvI,EAAoBzP,EAAIoP,GAAY,CAChDK,kBAAmBA,IAChB,MArBkBzvI,MAyBpBmwI,EArEsB,CAsE7BO,iBAEF,SAASC,GAAe7O,GAAW,IAAIC,EAEvC,WAAyC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzP6tI,GAA+B,OAAO,WAAkC,IAAsCnvI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAIha,IAAIovI,GAA4B,SAAUzrI,GACxCuB,EAAUkqI,EAAczrI,GAExB,IAAImrB,EAASogH,GAAeE,GAE5B,SAASA,IACP,IAAIxrI,EAEJtI,EAAgB4F,KAAMkuI,GAEtB,IAAK,IAAI9Q,EAAOtjI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAMmiI,GAAO1B,EAAO,EAAGA,EAAO0B,EAAM1B,IAC/Ez7H,EAAKy7H,GAAQ5hI,UAAU4hI,GAmFzB,OAhFAh5H,EAAQkrB,EAAO9wB,KAAKpD,MAAMk0B,EAAQ,CAAC5tB,MAAMoK,OAAOnK,KAC1CkuI,UAAW,EACjBzrI,EAAM0rI,OAAQ,EACd1rI,EAAM2rI,kBAAe,EACrB3rI,EAAM4rI,gBAAa,EAEnB5rI,EAAM6rI,aAAe,SAAUtpG,GAC7BA,EAAM2mG,iBACN3mG,EAAM6mG,mBAGRppI,EAAM8rI,iBAAmB,SAAUvpG,EAAO4E,GACxC,IAAI04F,EAAc7/H,EAAMjI,MACpBg0I,EAAiBlM,EAAYkM,eAC7BC,EAAgBnM,EAAYmM,cAC5BC,EAAcpM,EAAYoM,YAC1BC,EAAarM,EAAYqM,WACzBC,EAAqBnsI,EAAM2rI,aAC3B7P,EAAYqQ,EAAmBrQ,UAC/BqC,EAAegO,EAAmBhO,aAClCiO,EAAeD,EAAmBC,aAClCl1I,EAAS8I,EAAM2rI,aACfU,EAAkBllG,EAAQ,EAC1BmlG,EAAkBnO,EAAeiO,EAAetQ,EAChDyQ,GAAqB,EAErBD,EAAkBnlG,GAASnnC,EAAMyrI,WAC/BO,GAAeA,EAAczpG,GACjCviC,EAAMyrI,UAAW,GAGfY,GAAmBrsI,EAAM0rI,QACvBQ,GAAYA,EAAW3pG,GAC3BviC,EAAM0rI,OAAQ,GAIZW,GAAmBllG,EAAQmlG,GACzBP,IAAmB/rI,EAAMyrI,UAC3BM,EAAexpG,GAGjBrrC,EAAO4kI,UAAYqC,EACnBoO,GAAqB,EACrBvsI,EAAMyrI,UAAW,IACPY,IAAoBllG,EAAQ20F,IAClCmQ,IAAgBjsI,EAAM0rI,OACxBO,EAAY1pG,GAGdrrC,EAAO4kI,UAAY,EACnByQ,GAAqB,EACrBvsI,EAAM0rI,OAAQ,GAIZa,GACFvsI,EAAM6rI,aAAatpG,IAIvBviC,EAAMwsI,QAAU,SAAUjqG,GACxBviC,EAAM8rI,iBAAiBvpG,EAAOA,EAAMkqG,SAGtCzsI,EAAM0sI,aAAe,SAAUnqG,GAE7BviC,EAAM4rI,WAAarpG,EAAMoqG,eAAe,GAAGC,SAG7C5sI,EAAM6sI,YAAc,SAAUtqG,GAC5B,IAAIkqG,EAASzsI,EAAM4rI,WAAarpG,EAAMoqG,eAAe,GAAGC,QAExD5sI,EAAM8rI,iBAAiBvpG,EAAOkqG,IAGhCzsI,EAAMgrI,gBAAkB,SAAU/mI,GAChCjE,EAAM2rI,aAAe1nI,GAGhBjE,EAyDT,OAtDA/H,EAAauzI,EAAc,CAAC,CAC1Bz1I,IAAK,oBACLC,MAAO,WACLsH,KAAKwvI,eAAexvI,KAAKquI,gBAE1B,CACD51I,IAAK,uBACLC,MAAO,WACLsH,KAAKyvI,cAAczvI,KAAKquI,gBAEzB,CACD51I,IAAK,iBACLC,MAAO,SAAwBsK,GAExBA,IAE8B,oBAAxBA,EAAGmuB,kBACZnuB,EAAGmuB,iBAAiB,QAASnxB,KAAKkvI,SAAS,GAGV,oBAAxBlsI,EAAGmuB,kBACZnuB,EAAGmuB,iBAAiB,aAAcnxB,KAAKovI,cAAc,GAGpB,oBAAxBpsI,EAAGmuB,kBACZnuB,EAAGmuB,iBAAiB,YAAanxB,KAAKuvI,aAAa,MAGtD,CACD92I,IAAK,gBACLC,MAAO,SAAuBsK,GACvBA,IAEiC,oBAA3BA,EAAGqnH,qBACZrnH,EAAGqnH,oBAAoB,QAASrqH,KAAKkvI,SAAS,GAGV,oBAA3BlsI,EAAGqnH,qBACZrnH,EAAGqnH,oBAAoB,aAAcrqH,KAAKovI,cAAc,GAGpB,oBAA3BpsI,EAAGqnH,qBACZrnH,EAAGqnH,oBAAoB,YAAarqH,KAAKuvI,aAAa,MAGzD,CACD92I,IAAK,SACLC,MAAO,WACL,OAAoBg3I,IAAMpqI,cAAcimI,GAAc,CACpD3C,SAAU5oI,KAAK0tI,iBACd1tI,KAAKvF,MAAM4C,cAIX6wI,EAvJuB,CAwJ9BtnI,aAEF,SAAS+oI,GAAmB9P,GAC1B,IAAI+P,EAAiB/P,EAAKgO,UACtBA,OAA+B,IAAnB+B,GAAmCA,EAC/Cn1I,EAAQ4L,EAAyBw5H,EAAM,CAAC,cAE5C,OAAOgO,EAAyB6B,IAAMpqI,cAAc4oI,GAAczzI,GAASA,EAAM4C,SAGnF,IAAIwyI,GAA0B,SAAiC5qG,GAC7D,IAAIr2B,EAAU9U,UAAUC,OAAS,QAAsB+B,IAAjBhC,UAAU,GAAmBA,UAAU,GAAK,GAC9Eg2I,EAAelhI,EAAQkhI,aACvBjG,EAAUj7H,EAAQi7H,QAClBp/G,EAAQ7b,EAAQ6b,MAChBu9G,EAAap5H,EAAQo5H,WACrB+H,EAAkBnhI,EAAQmhI,gBAE9B,OAAQ9qG,GACN,IAAK,OACH,MAAO,oCAAoC76B,OAAO49H,EAAa,GAAK,uDAAwD,mCAAmC59H,OAAO2lI,EAAkB,qDAAuD,GAAI,KAErP,IAAK,QACH,MAAO,GAAG3lI,OAAOqgB,GAAgB,SAAU,gBAAgBrgB,OAAO0lI,EAAe,uBAAyB,GAAI,mCAAmC1lI,OAAOy/H,EAAU,uCAAyC,IAE7M,IAAK,QACH,MAAO,+GAGTmG,GAAwB,SAA+B/qG,EAAOr2B,GAChE,IAAIlW,EAAQkW,EAAQlW,MAChBsvI,EAAap5H,EAAQo5H,WACzB,GAAKtvI,EAEL,OAAQusC,GACN,IAAK,kBACL,IAAK,YACL,IAAK,eACH,MAAO,UAAU76B,OAAO1R,EAAO,iBAEjC,IAAK,gBACH,MAAoB,UAAU0R,OAAO1R,EAA9BsvI,EAAqC,uCAAkE,iBA8BhHiI,GAAmB,SAA0BhG,GAC/C,QAASA,EAAOjC,YAMlB,IAAIkI,GAAgB,CAClBC,eAAgBjK,GAChB/nC,UFrJiB,SAAsB0hC,GACvC,IAAImI,EAAanI,EAAKmI,WAEtB,MAAO,CACLv9G,MAAO,YACPihF,UAHUm0B,EAAKkH,MAGI,MAAQ,KAC3BqJ,cAAepI,EAAa,OAAS,KAErCjnI,SAAU,aE8IZ+nI,QFsIQ,SAAajJ,GACrB,IAAImI,EAAanI,EAAKmI,WAClB56B,EAAYyyB,EAAKzyB,UACjBijC,EAAaxQ,EAAKxT,MAClBrnD,EAASqrE,EAAWrrE,OACpB2hE,EAAe0J,EAAW1J,aAC1BzG,EAAUmQ,EAAWnQ,QACzB,MAAO,CACLz1G,MAAO,UACP6lH,WAAY,SACZ5J,gBAAiBsB,EAAahjE,EAAOurE,SAAWvrE,EAAOwrE,SACvDC,YAAazI,EAAahjE,EAAO0rE,UAAYtjC,EAAYpoC,EAAO2rE,QAAU3rE,EAAO8gE,UACjFa,aAAcA,EACdiK,YAAa,QACbC,YAAa,EACbC,UAAW1jC,EAAY,aAAahjG,OAAO46D,EAAO2rE,SAAW,KAC7DzV,OAAQ,UACRn1H,QAAS,OACTgrI,SAAU,OACVC,eAAgB,gBAChB/kC,UAAWi0B,EAAQ6B,cACnByF,QAAS,eACTzmI,SAAU,WACVglI,WAAY,YACZ,UAAW,CACT0K,YAAarjC,EAAYpoC,EAAO2rE,QAAU3rE,EAAOisE,aE9JrDC,kBAAmBjL,GACnBj3B,MF2La,SAAkB6wB,GAC/B,IAAIK,EAAUL,EAAKxT,MAAM6T,QACzB,MAAO,CACLiR,cAAkC,EAAnBjR,EAAQ+C,SACvBmO,WAA+B,EAAnBlR,EAAQ+C,WE9LtBoO,aFyNoB,SAAyBjM,GAC7C,IAAIlF,EAAUkF,EAAM/Y,MAAM6T,QAC1B,MAAO,CACLz1G,MAAO,QACPm8D,MAAO,OACPs0C,OAAQ,UACRn1H,QAAS,QACTpE,SAAU,MACVE,WAAY,MACZw/H,aAAc,SACdiQ,YAAgC,EAAnBpR,EAAQ+C,SACrBgK,aAAiC,EAAnB/M,EAAQ+C,SACtBjhI,cAAe,cEpOjBuvI,oBF5F2B,WAC3B,MAAO,CACLjB,WAAY,SACZkB,UAAW,UACXzrI,QAAS,OACTyyH,WAAY,IEwFdiZ,mBFkC0B,SAA+B7J,GACzD,IAAII,EAAaJ,EAAMI,WACnB0J,EAAc9J,EAAMvb,MACpB4W,EAAWyO,EAAYxR,QAAQ+C,SAC/Bj+D,EAAS0sE,EAAY1sE,OACzB,MAAO,CACLv6C,MAAO,qBACP+mH,UAAW,UACX9K,gBAAiBsB,EAAahjE,EAAO0rE,UAAY1rE,EAAO8gE,UACxDzE,aAAyB,EAAX4B,EACd3B,UAAsB,EAAX2B,EACX/8H,MAAO,IE5CTjD,MF0Pa,SAAkB48H,GAC/B,IAAImI,EAAanI,EAAKmI,WAClBqI,EAAaxQ,EAAKxT,MAClB6T,EAAUmQ,EAAWnQ,QACrBl7D,EAASqrE,EAAWrrE,OACxB,MAAO,CACL2sE,OAAQzR,EAAQ+C,SAAW,EAC3BkO,cAAejR,EAAQ+C,SAAW,EAClCmO,WAAYlR,EAAQ+C,SAAW,EAC/B/hI,WAAY8mI,EAAa,SAAW,UACpCphD,MAAO5hB,EAAOghE,YEnQhB4L,iBF8DwB,SAA6B7O,GACrD,IAAI31B,EAAY21B,EAAM31B,UAClB94B,EAAOyuD,EAAMzuD,KACb0uD,EAAcD,EAAM1W,MACpBrnD,EAASg+D,EAAYh+D,OACrBi+D,EAAWD,EAAY9C,QAAQ+C,SACnC,MAAO,CACLx4G,MAAO,mBACPm8D,MAAOwmB,EAAYpoC,EAAO6gE,UAAY7gE,EAAO8gE,UAC7C//H,QAAS,OACTkiE,QAAoB,EAAXg7D,EACT8C,WAAY,cACZyL,UAAW,SACX7vI,SAAU2yE,EACVilD,WAAY,EACZsY,YAAav9D,EACb6uD,UAAW,SACX0D,cAAe,WE9EjBiL,eAAgBzO,GAChBsG,KF9gBY,SAAiBvE,GAC7B,IAAIO,EAEA5F,EAAYqF,EAAMrF,UAClBgS,EAAc3M,EAAM/Y,MACpBsa,EAAeoL,EAAYpL,aAC3BzG,EAAU6R,EAAY7R,QACtBl7D,EAAS+sE,EAAY/sE,OACzB,OAEGzsE,GAFIotI,EAAQ,CACbl7G,MAAO,QArBX,SAAwBs1G,GAKtB,OAAOA,EAJkB,CACvBx2D,OAAQ,MACRvoE,IAAK,UAE+B++H,GAAa,SAiBzBiS,CAAejS,GAAY,QAASxnI,GAAgBotI,EAAO,kBAAmB3gE,EAAOwrE,UAAWj4I,GAAgBotI,EAAO,eAAgBgB,GAAepuI,GAAgBotI,EAAO,YAAa,mEAAoEptI,GAAgBotI,EAAO,eAAgBzF,EAAQ+R,YAAa15I,GAAgBotI,EAAO,YAAazF,EAAQ+R,YAAa15I,GAAgBotI,EAAO,WAAY,YAAaptI,GAAgBotI,EAAO,QAAS,QAASptI,GAAgBotI,EAAO,SAAU,GAAIA,GEqgB3gBuM,SFlagB,SAAqBtK,GACrC,IAAI17B,EAAY07B,EAAM17B,UAClB+2B,EAAW2E,EAAMvb,MAAM6T,QAAQ+C,SACnC,MAAO,CACL/2B,UAAWA,EACXs0B,UAAW,OACX2Q,cAAelO,EACfmO,WAAYnO,EACZliI,SAAU,WAEVoxI,wBAAyB,UEyZ3BC,WFhVkB,SAAuB7L,GACzC,IAAIpC,EAAOoC,EAAMpC,KACbpuD,EAASwwD,EAAMxwD,OACfh1E,EAAWwlI,EAAMxlI,SACrB,MAAO,CACLE,KAAMkjI,EAAKljI,KACXF,SAAUA,EACVC,IAAK+0E,EACL7vE,MAAOi+H,EAAKj+H,MACZ0zH,OAAQ,IEwUVyY,WF2SkB,SAAuBxS,GACzC,IAAIwQ,EAAaxQ,EAAKxT,MAClB6T,EAAUmQ,EAAWnQ,QACrByG,EAAe0J,EAAW1J,aAE9B,MAAO,CACLl8G,MAAO,aACPi8G,gBAHW2J,EAAWrrE,OAGE0rE,UACxB/J,aAAcA,EAAe,EAC7B5gI,QAAS,OACT4rI,OAAQzR,EAAQ+C,SAAW,EAC3Bz/H,SAAU,IErTZ8uI,gBFyTuB,SAA4BlN,GACnD,IAAI2M,EAAc3M,EAAM/Y,MACpBsa,EAAeoL,EAAYpL,aAC3B3hE,EAAS+sE,EAAY/sE,OACrBujE,EAAmBnD,EAAMmD,iBAC7B,MAAO,CACL5B,aAAcA,EAAe,EAC7B//C,MAAO5hB,EAAOghE,UACdrkI,SAAU,MACVP,SAAU,SACV6mE,QAAS,EACTqpE,YAAa,EACbiB,aAAchK,EAAmB,WAAa,KAC9ClnI,WAAY,WErUdmxI,iBFwUwB,SAA6B7M,GACrD,IAAIC,EAAcD,EAAMtZ,MACpB6T,EAAU0F,EAAY1F,QACtByG,EAAef,EAAYe,aAC3B3hE,EAAS4gE,EAAY5gE,OAEzB,MAAO,CACLsrE,WAAY,SACZ3J,aAAcA,EAAe,EAC7BD,gBAJcf,EAAMv4B,WAIUpoC,EAAOytE,YACrC1sI,QAAS,OACTurI,YAAapR,EAAQ+C,SACrBgK,aAAc/M,EAAQ+C,SACtB,SAAU,CACRyD,gBAAiB1hE,EAAOytE,YACxB7rD,MAAO5hB,EAAO0tE,UEtVlBC,iBAAkBvP,GAClB6G,OF0Zc,SAAmBpK,GACjC,IAAImI,EAAanI,EAAKmI,WAClB56B,EAAYyyB,EAAKzyB,UACjB48B,EAAanK,EAAKmK,WAClBqG,EAAaxQ,EAAKxT,MAClB6T,EAAUmQ,EAAWnQ,QACrBl7D,EAASqrE,EAAWrrE,OACxB,MAAO,CACLv6C,MAAO,SACPi8G,gBAAiBsD,EAAahlE,EAAO2rE,QAAUvjC,EAAYpoC,EAAO4tE,UAAY,cAC9EhsD,MAAOohD,EAAahjE,EAAO8gE,UAAYkE,EAAahlE,EAAOwrE,SAAW,UACtEtV,OAAQ,UACRn1H,QAAS,QACTpE,SAAU,UACVsmE,QAAS,GAAG79D,OAA0B,EAAnB81H,EAAQ+C,SAAc,OAAO74H,OAA0B,EAAnB81H,EAAQ+C,SAAc,MAC7E/8H,MAAO,OACP2sI,WAAY,OACZC,wBAAyB,mBAEzB,UAAW,CACTpM,iBAAkBsB,IAAegC,EAAahlE,EAAO2rE,QAAU3rE,EAAO+tE,cE7a1EpuI,YFwcmB,SAAwBk7H,GAC3C,IAAIwQ,EAAaxQ,EAAKxT,MAClB6T,EAAUmQ,EAAWnQ,QAEzB,MAAO,CACLz1G,MAAO,cACPm8D,MAHWypD,EAAWrrE,OAGRguE,UACdpM,WAAY1G,EAAQ+C,SAAW,EAC/B4O,YAAa3R,EAAQ+C,SAAW,EAChCliI,SAAU,WACVC,IAAK,MACLgkH,UAAW,qBEldbiuB,YFoeU,SAAapT,GACvB,IAAImI,EAAanI,EAAKmI,WAClBqI,EAAaxQ,EAAKxT,MAClB6T,EAAUmQ,EAAWnQ,QACrBl7D,EAASqrE,EAAWrrE,OACxB,MAAO,CACLv6C,MAAO,cACPm8D,MAAOohD,EAAahjE,EAAOk+D,UAAYl+D,EAAOghE,UAC9CY,WAAY1G,EAAQ+C,SAAW,EAC/B4O,YAAa3R,EAAQ+C,SAAW,EAChC92B,SAAU,eAAe/hG,OAA0B,EAAnB81H,EAAQ+C,SAAc,OACtD7hI,SAAU,SACVL,SAAU,WACVwxI,aAAc,WACdlxI,WAAY,SACZL,IAAK,MACLgkH,UAAW,qBEnfbkuB,eF3IsB,SAA2B9N,GACjD,IAAIlF,EAAUkF,EAAM/Y,MAAM6T,QAC1B,MAAO,CACLoQ,WAAY,SACZvqI,QAAS,OACTsyH,KAAM,EACN0Y,SAAU,OACV9oE,QAAS,GAAG79D,OAAO81H,EAAQ+C,SAAW,EAAG,OAAO74H,OAA0B,EAAnB81H,EAAQ+C,SAAc,MAC7EkP,wBAAyB,QACzBpxI,SAAU,WACVK,SAAU,YEwJd,IA+BI+xI,GAAe,CACjBxM,aAbiB,EAcjB3hE,OAjCW,CACX2rE,QAAS,UACTyC,UAAW,UACXL,UAAW,UACXH,UAAW,UACXF,OAAQ,UACRD,YAAa,UACbjC,SAAU,mBACVD,SAAU,kBACVG,UAAW,kBACX5K,UAAW,kBACXmL,UAAW,kBACX/N,UAAW,kBACX8P,UAAW,kBACXnN,UAAW,kBACXwN,UAAW,kBACXrN,UAAW,kBACXsN,UAAW,mBAiBXpT,QARY,CACZ+C,SANa,EAOblB,cALkB,GAMlBkQ,WAJehP,IAYjB,SAASkE,GAAUluI,EAAQC,GAAkB,IAAIC,EAAOR,OAAOQ,KAAKF,GAAS,GAAIN,OAAOS,sBAAuB,CAAE,IAAIC,EAAUV,OAAOS,sBAAsBH,GAAaC,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOZ,OAAOa,yBAAyBP,EAAQM,GAAKV,eAAgBM,EAAKM,KAAKC,MAAMP,EAAME,GAAY,OAAOF,EAEhV,SAASiuI,GAAgBxtI,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKstI,GAAUxuI,OAAOqB,IAAS,GAAMC,SAAQ,SAAUxB,GAAOF,GAAgBqB,EAAQnB,EAAKuB,EAAOvB,OAAsBE,OAAOuB,0BAA6BvB,OAAOwB,iBAAiBP,EAAQjB,OAAOuB,0BAA0BF,IAAmBmtI,GAAUxuI,OAAOqB,IAASC,SAAQ,SAAUxB,GAAOE,OAAOC,eAAegB,EAAQnB,EAAKE,OAAOa,yBAAyBQ,EAAQvB,OAAe,OAAOmB,EAEnhB,SAAS25I,GAAepU,GAAW,IAAIC,EAEvC,WAAyC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPozI,GAA+B,OAAO,WAAkC,IAAsC10I,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAGha,IAxrByCX,GAwrBrCiJ,GAAe,CACjBqsI,uBAAuB,EACvBC,kBAAmB3U,KACnB4U,mBAAoB5U,KACpB6U,mBAAmB,EACnBC,mBAAmB,EACnBzgI,WAAY,GACZ0gI,0BAA0B,EAC1BC,mBAAmB,EACnBC,aAhsBO,SAAU/J,EAAQgK,GACvB,IAAIC,EAZR,SAAuBt6I,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKb,GAAQL,OAAOqB,IAAS,GAAMC,SAAQ,SAAUxB,GAAOF,GAAgBqB,EAAQnB,EAAKuB,EAAOvB,OAAsBE,OAAOuB,0BAA6BvB,OAAOwB,iBAAiBP,EAAQjB,OAAOuB,0BAA0BF,IAAmBhB,GAAQL,OAAOqB,IAASC,SAAQ,SAAUxB,GAAOE,OAAOC,eAAegB,EAAQnB,EAAKE,OAAOa,yBAAyBQ,EAAQvB,OAAe,OAAOmB,EAY7eqlI,CAAc,CACxCkV,YAAY,EACZC,eAAe,EACfrpI,UAAWggI,GACX17E,MAAM,EACNglF,UAAW,OACVl2I,IACCg2I,EAAaD,EAAsBC,WACnCC,EAAgBF,EAAsBE,cACtCrpI,EAAYmpI,EAAsBnpI,UAClCskD,EAAO6kF,EAAsB7kF,KAC7BglF,EAAYH,EAAsBG,UAElCpxI,EAAQosD,EAAOy7E,GAAWmJ,GAAYA,EACtCK,EAAYjlF,EAAOy7E,GAAW//H,EAAUk/H,IAAWl/H,EAAUk/H,GAYjE,OAVIkK,IACFlxI,EAAQA,EAAMguB,cACdqjH,EAAYA,EAAUrjH,eAGpBmjH,IACFnxI,EAAQ4nI,GAAgB5nI,GACxBqxI,EAAYzJ,GAAgByJ,IAGT,UAAdD,EAAwBC,EAAU/xI,OAAO,EAAGU,EAAMlJ,UAAYkJ,EAAQqxI,EAAUluI,QAAQnD,IAAU,GAsqB3GsxI,iBAnHqB,SAA0BvlC,GAC/C,OAAOA,EAAMvkF,OAmHb+pH,eAjHmB,SAAwBvK,GAC3C,OAAOA,EAAOx/G,OAiHdgqH,eA/GmB,SAAwBxK,GAC3C,OAAOA,EAAOvxI,OA+GdsvI,YAAY,EACZ0M,WAAW,EACX7K,SAAS,EACT9C,OAAO,EACP+I,cAAc,EACdG,iBAAkBA,GAClB6B,eAAgB,WACd,MAAO,cAETzP,cAAe,IACfG,cAAe,IACfqG,YAAY,EACZpG,cAAe,SACfC,aAAc,WACdiS,uBAAuB,EACvBhS,0BFtzBF,WACE,IACE,MAAO,iEAAiEzlI,KAAKgF,UAAUC,WACvF,MAAO/B,GACP,OAAO,GEkzBkBw0I,GAC3BjC,iBAAkB,WAChB,MAAO,cAETkC,iBAAiB,EACjBC,iBAAiB,EACjB5lI,QAAS,GACT6lI,SAAU,EACVpwI,YAAa,YACbqwI,mBAAoB,SAA4BnV,GAC9C,IAAI90D,EAAQ80D,EAAK90D,MACjB,MAAO,GAAG3gE,OAAO2gE,EAAO,WAAW3gE,OAAiB,IAAV2gE,EAAc,IAAM,GAAI,eAEpEvpE,OAAQ,GACRyzI,SAAU,IACVlF,iBAAiB,GAEft7H,GAAa,EAEbygI,GAAsB,SAAUzyI,GAClCuB,EAAUkxI,EAAQzyI,GAElB,IAAImrB,EAAS2lH,GAAe2B,GAS5B,SAASA,EAAOj4C,GACd,IAAIv6F,EAEJtI,EAAgB4F,KAAMk1I,IAEtBxyI,EAAQkrB,EAAO9wB,KAAKkD,KAAMi9F,IACpB35F,MAAQ,CACZ6xI,kBAAmB,GACnBC,gBAAiB,GACjBC,cAAe,KACfC,aAAc,KACdC,eAAe,EACfnoC,WAAW,EACXooC,YAAa,CACX5Y,OAAQ,GACR2I,UAAW,IAEbkQ,YAAa,IAEf/yI,EAAMgzI,kBAAmB,EACzBhzI,EAAMizI,aAAc,EACpBjzI,EAAMkzI,yBAA0B,EAChClzI,EAAMmzI,iBAAc,EACpBnzI,EAAM0Q,gBAAa,EACnB1Q,EAAMozI,WAAY,EAClBpzI,EAAMqzI,cAAgB,EACtBrzI,EAAMszI,cAAgB,EACtBtzI,EAAMuzI,8BAA2B,EACjCvzI,EAAMwzI,eAAiB,GACvBxzI,EAAMyzI,gBAAiB,EACvBzzI,EAAM0zI,+BAAgC,EACtC1zI,EAAM2zI,oBAAiB,EACvB3zI,EAAM4zI,WAAa,KAEnB5zI,EAAM6zI,cAAgB,SAAU5vI,GAC9BjE,EAAM4zI,WAAa3vI,GAGrBjE,EAAM8zI,iBAAmB,KAEzB9zI,EAAM+zI,oBAAsB,SAAU9vI,GACpCjE,EAAM8zI,iBAAmB7vI,GAG3BjE,EAAMg0I,YAAc,KAEpBh0I,EAAMi0I,eAAiB,SAAUhwI,GAC/BjE,EAAMg0I,YAAc/vI,GAGtBjE,EAAMK,SAAW,KAEjBL,EAAMk0I,YAAc,SAAUjwI,GAC5BjE,EAAMK,SAAW4D,GAGnBjE,EAAMm0I,gBAAkB,SAAUzjI,GF+Wd,IAA2B3Y,EE9W7CiI,EAAM0Q,YF8WuC3Y,EE9WR,CACnC2Y,WAAYA,GF8WXq1H,GAAgBA,GAAgB,GAAIr1H,IAAa3Y,EAAM2Y,cE1W5D1Q,EAAMwC,MAAQxC,EAAMo0I,WACpBp0I,EAAMyC,KAAOzC,EAAMq0I,UAEnBr0I,EAAMyE,SAAW,SAAUsmB,EAAUupH,GACnC,IAAIzU,EAAc7/H,EAAMjI,MACpB0M,EAAWo7H,EAAYp7H,SACvBlK,EAAOslI,EAAYtlI,KACvBkK,EAASsmB,EAAU25G,GAAgBA,GAAgB,GAAI4P,GAAa,GAAI,CACtE/5I,KAAMA,MAIVyF,EAAMu0I,SAAW,SAAUxpH,GACzB,IAAI8G,EAASz6B,UAAUC,OAAS,QAAsB+B,IAAjBhC,UAAU,GAAmBA,UAAU,GAAK,YAC7EmwI,EAASnwI,UAAUC,OAAS,EAAID,UAAU,QAAKgC,EAC/CioI,EAAerhI,EAAMjI,MACrBm5I,EAAoB7P,EAAa6P,kBACjC/J,EAAU9F,EAAa8F,QAE3BnnI,EAAMw0I,cAAc,GAAI,CACtB3iH,OAAQ,cAGNq/G,IACFlxI,EAAMuzI,0BAA4BpM,EAElCnnI,EAAMy0I,eAIRz0I,EAAMkzI,yBAA0B,EAEhClzI,EAAMyE,SAASsmB,EAAU,CACvB8G,OAAQA,EACR01G,OAAQA,KAIZvnI,EAAM00I,aAAe,SAAU3pH,GAC7B,IAAI4pH,EAAe30I,EAAMjI,MACrBi5I,EAAoB2D,EAAa3D,kBACjC7J,EAAUwN,EAAaxN,QACvB4L,EAAc/yI,EAAMY,MAAMmyI,YAE9B,GAAI5L,EACF,GAAInnI,EAAM40I,iBAAiB7pH,EAAUgoH,GAAc,CACjD,IAAInB,EAAY5xI,EAAM+xI,eAAehnH,GAErC/qB,EAAMu0I,SAASxB,EAAYn8I,QAAO,SAAUO,GAC1C,OAAO6I,EAAM+xI,eAAe56I,KAAOy6I,KACjC,kBAAmB7mH,GAEvB/qB,EAAM60I,0BAA0B,CAC9BtyG,MAAO,kBACPr2B,QAAS,CACPlW,MAAOgK,EAAM8xI,eAAe/mH,WAI3B/qB,EAAMutI,iBAAiBxiH,EAAUgoH,GAWpC/yI,EAAM60I,0BAA0B,CAC9BtyG,MAAO,gBACPr2B,QAAS,CACPlW,MAAOgK,EAAM8xI,eAAe/mH,GAC5Bu6G,YAAY,MAdhBtlI,EAAMu0I,SAAS,GAAG7sI,OAAOrP,GAAmB06I,GAAc,CAAChoH,IAAY,gBAAiBA,GAExF/qB,EAAM60I,0BAA0B,CAC9BtyG,MAAO,gBACPr2B,QAAS,CACPlW,MAAOgK,EAAM8xI,eAAe/mH,YAe/B/qB,EAAMutI,iBAAiBxiH,EAAUgoH,GAWpC/yI,EAAM60I,0BAA0B,CAC9BtyG,MAAO,gBACPr2B,QAAS,CACPlW,MAAOgK,EAAM8xI,eAAe/mH,GAC5Bu6G,YAAY,MAdhBtlI,EAAMu0I,SAASxpH,EAAU,iBAEzB/qB,EAAM60I,0BAA0B,CAC9BtyG,MAAO,gBACPr2B,QAAS,CACPlW,MAAOgK,EAAM8xI,eAAe/mH,OAehCimH,GACFhxI,EAAMq0I,aAIVr0I,EAAM80I,YAAc,SAAUC,GAC5B,IAAIhC,EAAc/yI,EAAMY,MAAMmyI,YAE1BnB,EAAY5xI,EAAM+xI,eAAegD,GAEjChqH,EAAWgoH,EAAYn8I,QAAO,SAAUO,GAC1C,OAAO6I,EAAM+xI,eAAe56I,KAAOy6I,KAGrC5xI,EAAMyE,SAASsmB,EAAS1zB,OAAS0zB,EAAW,KAAM,CAChD8G,OAAQ,eACRkjH,aAAcA,IAGhB/0I,EAAM60I,0BAA0B,CAC9BtyG,MAAO,eACPr2B,QAAS,CACPlW,MAAO++I,EAAe/0I,EAAM8xI,eAAeiD,GAAgB,MAI/D/0I,EAAMo0I,cAGRp0I,EAAMg1I,WAAa,WACjBh1I,EAAMyE,SAAS,KAAM,CACnBotB,OAAQ,WAIZ7xB,EAAMi1I,SAAW,WACf,IAAIlC,EAAc/yI,EAAMY,MAAMmyI,YAC1BmC,EAAoBnC,EAAYA,EAAY17I,OAAS,GACrD0zB,EAAWgoH,EAAY14I,MAAM,EAAG04I,EAAY17I,OAAS,GAEzD2I,EAAM60I,0BAA0B,CAC9BtyG,MAAO,YACPr2B,QAAS,CACPlW,MAAOk/I,EAAoBl1I,EAAM8xI,eAAeoD,GAAqB,MAIzEl1I,EAAMyE,SAASsmB,EAAS1zB,OAAS0zB,EAAW,KAAM,CAChD8G,OAAQ,YACRkjH,aAAcG,KAIlBl1I,EAAMm1I,SAAW,WACf,OAAOn1I,EAAMY,MAAMmyI,aAGrB/yI,EAAMk7H,GAAK,WACT,IAAK,IAAIR,EAAOtjI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAMmiI,GAAO1B,EAAO,EAAGA,EAAO0B,EAAM1B,IAC/Ez7H,EAAKy7H,GAAQ5hI,UAAU4hI,GAGzB,OAAOpE,GAAW59H,WAAM,EAAQ,CAACgJ,EAAMjI,MAAMq9I,iBAAiB1tI,OAAOnK,KAGvEyC,EAAM8xI,eAAiB,SAAUx/H,GAC/B,OAAOtS,EAAMjI,MAAM+5I,eAAex/H,IAGpCtS,EAAM+xI,eAAiB,SAAUz/H,GAC/B,OAAOtS,EAAMjI,MAAMg6I,eAAez/H,IAGpCtS,EAAM6gI,UAAY,SAAU9qI,EAAKgC,GAC/B,IAAI+vI,EAAO0F,GAAcz3I,GAAKgC,GAC9B+vI,EAAKvkI,UAAY,aACjB,IAAI8xI,EAASr1I,EAAMjI,MAAM+G,OAAO/I,GAChC,OAAOs/I,EAASA,EAAOvN,EAAM/vI,GAAS+vI,GAGxC9nI,EAAMs1I,aAAe,SAAUlgI,GAC7B,MAAO,GAAG1N,OAAO1H,EAAMwzI,eAAgB,KAAK9rI,OAAO0N,IAGrDpV,EAAMu1I,sBAAwB,WAC5B,IAAIpP,EAAanmI,EAAMjI,MAAMouI,WACzBqP,EAAcx1I,EAAMY,MACpBkyI,EAAc0C,EAAY1C,YAC1BH,EAAgB6C,EAAY7C,cAChC,GAAKA,GAAkBxM,EAAvB,CACA,IAAI9wH,EAAQy9H,EAAYjQ,UAAUn/H,QAAQivI,GACtCpL,EAASuL,EAAY5Y,OAAO7kH,GAChC,OAAOkyH,GAAUA,EAAOxxI,MAG1BiK,EAAM60I,0BAA4B,SAAUnS,GAC1C,IAAIngG,EAAQmgG,EAAMngG,MACdr2B,EAAUw2H,EAAMx2H,QAEpBlM,EAAMuC,SAAS,CACbkwI,kBAAmBnF,GAAsB/qG,EAAOr2B,MAIpDlM,EAAMy1I,wBAA0B,SAAUxS,GACxC,IAAI1gG,EAAQ0gG,EAAM1gG,MACdr2B,EAAU+2H,EAAM/2H,QAEpBlM,EAAMuC,SAAS,CACbmwI,gBAAiBvF,GAAwB5qG,EAAOmiG,GAAgBA,GAAgB,GAAIx4H,GAAU,GAAI,CAChG6b,MAAO/nB,EAAMjI,MAAM,oBAKzBiI,EAAM01I,gBAAkB,SAAUnzG,GACX,IAAjBA,EAAM2oE,SAIV3oE,EAAM6mG,kBACN7mG,EAAM2mG,iBAENlpI,EAAMo0I,eAGRp0I,EAAM21I,gBAAkB,SAAUpzG,GAChCviC,EAAMgzI,kBAAmB,GAG3BhzI,EAAM41I,mBAAqB,SAAUrzG,GACnC,IAAI6vG,EAAkBpyI,EAAMjI,MAAMq6I,gBAE7BpyI,EAAMY,MAAM8pG,UAML1qG,EAAMjI,MAAMouI,WAMG,UAAzB5jG,EAAMrrC,OAAOo3B,SAAgD,aAAzBiU,EAAMrrC,OAAOo3B,SAC/CtuB,EAAMy0I,cANJrC,GACFpyI,EAAM61I,SAAS,UAPbzD,IACFpyI,EAAMyzI,gBAAiB,GAGzBzzI,EAAMo0I,cAaiB,UAAzB7xG,EAAMrrC,OAAOo3B,SAAgD,aAAzBiU,EAAMrrC,OAAOo3B,SAC/CiU,EAAM2mG,kBAIVlpI,EAAM81I,6BAA+B,SAAUvzG,GAE7C,KAAIA,GAAwB,cAAfA,EAAMngC,MAAyC,IAAjBmgC,EAAM2oE,UAI7ClrG,EAAMjI,MAAMutI,WAAhB,CACA,IAAIyQ,EAAe/1I,EAAMjI,MACrBovI,EAAU4O,EAAa5O,QACvBhB,EAAa4P,EAAa5P,WAE9BnmI,EAAMo0I,aAEFjO,GACFnmI,EAAMuzI,0BAA4BpM,EAElCnnI,EAAMy0I,eAENz0I,EAAM61I,SAAS,SAGjBtzG,EAAM2mG,iBACN3mG,EAAM6mG,oBAGRppI,EAAMg2I,0BAA4B,SAAUzzG,GAEtCA,GAAwB,cAAfA,EAAMngC,MAAyC,IAAjBmgC,EAAM2oE,SAIjDlrG,EAAMg1I,aAENzyG,EAAM6mG,kBACNppI,EAAMyzI,gBAAiB,EAEJ,aAAflxG,EAAMngC,KACRpC,EAAMo0I,aAENn/H,YAAW,WACT,OAAOjV,EAAMo0I,kBAKnBp0I,EAAMi2I,SAAW,SAAU1zG,GACoB,mBAAlCviC,EAAMjI,MAAMo5I,kBACjB5uG,EAAMrrC,kBAAkB4iI,aAAe4B,GAAkBn5F,EAAMrrC,SACjE8I,EAAMjI,MAAM08I,cAEoC,oBAAlCz0I,EAAMjI,MAAMo5I,mBACxBnxI,EAAMjI,MAAMo5I,kBAAkB5uG,IAChCviC,EAAMjI,MAAM08I,eAKlBz0I,EAAMk2I,mBAAqB,WACzBl2I,EAAMizI,aAAc,GAGtBjzI,EAAMm2I,iBAAmB,WACvBn2I,EAAMizI,aAAc,GAGtBjzI,EAAM0sI,aAAe,SAAUxH,GAC7B,IAAIkR,EAAUlR,EAAMkR,QAChBC,EAAQD,GAAWA,EAAQz+G,KAAK,GAE/B0+G,IAILr2I,EAAMqzI,cAAgBgD,EAAMC,QAC5Bt2I,EAAMszI,cAAgB+C,EAAMzJ,QAC5B5sI,EAAM2zI,gBAAiB,IAGzB3zI,EAAM6sI,YAAc,SAAUxM,GAC5B,IAAI+V,EAAU/V,EAAM+V,QAChBC,EAAQD,GAAWA,EAAQz+G,KAAK,GAEpC,GAAK0+G,EAAL,CAIA,IAAIE,EAAS52I,KAAK8/D,IAAI42E,EAAMC,QAAUt2I,EAAMqzI,eACxC5G,EAAS9sI,KAAK8/D,IAAI42E,EAAMzJ,QAAU5sI,EAAMszI,eAE5CtzI,EAAM2zI,eAAiB4C,EADH,GAC6B9J,EAD7B,IAItBzsI,EAAMw2I,WAAa,SAAUj0G,GACvBviC,EAAM2zI,iBAIN3zI,EAAM4zI,aAAe5zI,EAAM4zI,WAAW6C,SAASl0G,EAAMrrC,SAAW8I,EAAMg0I,cAAgBh0I,EAAMg0I,YAAYyC,SAASl0G,EAAMrrC,SACzH8I,EAAMq0I,YAIRr0I,EAAMqzI,cAAgB,EACtBrzI,EAAMszI,cAAgB,IAGxBtzI,EAAM02I,kBAAoB,SAAUn0G,GAC9BviC,EAAM2zI,gBAEV3zI,EAAM41I,mBAAmBrzG,IAG3BviC,EAAM22I,yBAA2B,SAAUp0G,GACrCviC,EAAM2zI,gBAEV3zI,EAAMg2I,0BAA0BzzG,IAGlCviC,EAAM42I,4BAA8B,SAAUr0G,GACxCviC,EAAM2zI,gBAEV3zI,EAAM81I,6BAA6BvzG,IAGrCviC,EAAM62I,kBAAoB,SAAUt0G,GAClC,IAAIu0G,EAAav0G,EAAMw0G,cAAc/gJ,MACrCgK,EAAMuzI,0BAA2B,EAEjCvzI,EAAMw0I,cAAcsC,EAAY,CAC9BjlH,OAAQ,iBAGL7xB,EAAMjI,MAAMouI,YACfnmI,EAAMg3I,cAIVh3I,EAAMi3I,aAAe,SAAU10G,GAC7B,IAAI20G,EAAel3I,EAAMjI,MACrBq1I,EAAe8J,EAAa9J,aAC5BjG,EAAU+P,EAAa/P,QAEvBnnI,EAAMjI,MAAMo/I,SACdn3I,EAAMjI,MAAMo/I,QAAQ50G,GAGtBviC,EAAMuzI,0BAA2B,EAEjCvzI,EAAMy1I,wBAAwB,CAC5BlzG,MAAO,QACPr2B,QAAS,CACPkhI,aAAcA,EACdjG,QAASA,KAIbnnI,EAAMuC,SAAS,CACbmoG,WAAW,KAGT1qG,EAAMyzI,gBAAkBzzI,EAAMjI,MAAMo6I,kBACtCnyI,EAAM61I,SAAS,SAGjB71I,EAAMyzI,gBAAiB,GAGzBzzI,EAAMo3I,YAAc,SAAU70G,GACxBviC,EAAMg0I,aAAeh0I,EAAMg0I,YAAYyC,SAAS/7H,SAASwwH,eAC3DlrI,EAAMK,SAASmC,SAKbxC,EAAMjI,MAAMs/I,QACdr3I,EAAMjI,MAAMs/I,OAAO90G,GAGrBviC,EAAMw0I,cAAc,GAAI,CACtB3iH,OAAQ,eAGV7xB,EAAMy0I,cAENz0I,EAAMuC,SAAS,CACbqwI,aAAc,KACdloC,WAAW,MAIf1qG,EAAMs3I,cAAgB,SAAU3E,GAC1B3yI,EAAMgzI,kBAAoBhzI,EAAMY,MAAM+xI,gBAAkBA,GAI5D3yI,EAAMuC,SAAS,CACbowI,cAAeA,KAInB3yI,EAAMu3I,0BAA4B,WAChC,IAAIC,EAAex3I,EAAMjI,MACrB0/I,EAAsBD,EAAaC,oBACnCtQ,EAAUqQ,EAAarQ,QAC3B,YAA4B/tI,IAAxBq+I,EAA0CtQ,EACvCsQ,GAGTz3I,EAAM03I,UAAY,SAAUn1G,GAC1B,IAAIo1G,EAAe33I,EAAMjI,MACrBovI,EAAUwQ,EAAaxQ,QACvB4J,EAAwB4G,EAAa5G,sBACrCM,EAAoBsG,EAAatG,kBACjCyF,EAAaa,EAAab,WAC1Bc,EAAcD,EAAaC,YAC3BtS,EAAaqS,EAAarS,WAC1Ba,EAAawR,EAAaxR,WAC1BuR,EAAYC,EAAaD,UACzBrK,EAAkBsK,EAAatK,gBAC/B8E,EAAkBwF,EAAaxF,gBAC/B0F,EAAe73I,EAAMY,MACrB+xI,EAAgBkF,EAAalF,cAC7BC,EAAeiF,EAAajF,aAC5BG,EAAc8E,EAAa9E,YAC/B,IAAIzN,IAEqB,oBAAdoS,IACTA,EAAUn1G,IAENA,EAAMu1G,mBAHZ,CAWA,OAFA93I,EAAMgzI,kBAAmB,EAEjBzwG,EAAMxsC,KACZ,IAAK,YACH,IAAKoxI,GAAW2P,EAAY,OAE5B92I,EAAM+3I,WAAW,YAEjB,MAEF,IAAK,aACH,IAAK5Q,GAAW2P,EAAY,OAE5B92I,EAAM+3I,WAAW,QAEjB,MAEF,IAAK,SACL,IAAK,YACH,GAAIjB,EAAY,OAEhB,GAAIlE,EACF5yI,EAAM80I,YAAYlC,OACb,CACL,IAAK7B,EAAuB,OAExB5J,EACFnnI,EAAMi1I,WACG2C,GACT53I,EAAMg1I,aAIV,MAEF,IAAK,MACH,GAAIh1I,EAAMizI,YAAa,OAEvB,GAAI1wG,EAAMy1G,WAAa7R,IAAekH,IAAoBsF,GAE1DR,GAAmBnyI,EAAM40I,iBAAiBjC,EAAeI,GACvD,OAGF/yI,EAAM00I,aAAa/B,GAEnB,MAEF,IAAK,QACH,GAAsB,MAAlBpwG,EAAM01G,QAGR,MAGF,GAAI9R,EAAY,CACd,IAAKwM,EAAe,OACpB,GAAI3yI,EAAMizI,YAAa,OAEvBjzI,EAAM00I,aAAa/B,GAEnB,MAGF,OAEF,IAAK,SACCxM,GACFnmI,EAAMuzI,0BAA2B,EAEjCvzI,EAAMw0I,cAAc,GAAI,CACtB3iH,OAAQ,eAGV7xB,EAAMy0I,eACGmD,GAAevG,GACxBrxI,EAAMg1I,aAGR,MAEF,IAAK,IAEH,GAAI8B,EACF,OAGF,IAAK3Q,EAAY,CACfnmI,EAAM61I,SAAS,SAEf,MAGF,IAAKlD,EAAe,OAEpB3yI,EAAM00I,aAAa/B,GAEnB,MAEF,IAAK,UACCxM,EACFnmI,EAAMk4I,YAAY,MAElBl4I,EAAM61I,SAAS,QAGjB,MAEF,IAAK,YACC1P,EACFnmI,EAAMk4I,YAAY,QAElBl4I,EAAM61I,SAAS,SAGjB,MAEF,IAAK,SACH,IAAK1P,EAAY,OAEjBnmI,EAAMk4I,YAAY,UAElB,MAEF,IAAK,WACH,IAAK/R,EAAY,OAEjBnmI,EAAMk4I,YAAY,YAElB,MAEF,IAAK,OACH,IAAK/R,EAAY,OAEjBnmI,EAAMk4I,YAAY,SAElB,MAEF,IAAK,MACH,IAAK/R,EAAY,OAEjBnmI,EAAMk4I,YAAY,QAElB,MAEF,QACE,OAGJ31G,EAAM2mG,mBAGRlpI,EAAMm4I,iBAAmB,SAAUpgJ,EAAOg7I,GACxC,IAAIqF,EAAoBrgJ,EAAM++I,WAC1BA,OAAmC,IAAtBsB,EAA+B,GAAKA,EACjD5rI,EAAUzU,EAAMyU,QAEhB6rI,EAAW,SAAkB9Q,EAAQvmI,GACvC,IAAIskI,EAAatlI,EAAMutI,iBAAiBhG,EAAQwL,GAE5CzL,EAAatnI,EAAM40I,iBAAiBrN,EAAQwL,GAE5ChrH,EAAQ/nB,EAAM8xI,eAAevK,GAE7BvxI,EAAQgK,EAAM+xI,eAAexK,GAEjC,KAAIvnI,EAAMu3I,6BAA+BjQ,IAAetnI,EAAMsxI,aAAa,CACzEvpH,MAAOA,EACP/xB,MAAOA,EACPsc,KAAMi1H,GACLuP,IAJH,CAQA,IAAIwB,EAAUhT,OAAalsI,EAAY,WACrC,OAAO4G,EAAMs3I,cAAc/P,IAEzBgR,EAAWjT,OAAalsI,EAAY,WACtC,OAAO4G,EAAM00I,aAAanN,IAExBiR,EAAW,GAAG9wI,OAAO1H,EAAMs1I,aAAa,UAAW,KAAK5tI,OAAO1G,GACnE,MAAO,CACL8/H,WAAY,CACV9/H,GAAIw3I,EACJpN,QAASmN,EACTE,YAAaH,EACbI,YAAaJ,EACb/F,UAAW,GAEbjgI,KAAMi1H,EACNjC,WAAYA,EACZgC,WAAYA,EACZvxI,IAAKyiJ,EACLzwH,MAAOA,EACP3lB,KAAM,SACNpM,MAAOA,KAIX,OAAOwW,EAAQvJ,QAAO,SAAUwE,EAAKkwB,EAAMghH,GACzC,GAAIhhH,EAAKnrB,QAAS,CAEXxM,EAAMozI,YAAWpzI,EAAMozI,WAAY,GACxC,IACIz4I,EADQg9B,EAAKnrB,QACI5F,KAAI,SAAU28B,EAAOpsC,GACxC,IAAIowI,EAAS8Q,EAAS90G,EAAO,GAAG77B,OAAOixI,EAAW,KAAKjxI,OAAOvQ,IAE9D,OADIowI,GAAQ9/H,EAAIo7H,UAAU9rI,KAAKwsC,GACxBgkG,KACN3wI,OAAOgzB,SAEV,GAAIjvB,EAAStD,OAAQ,CACnB,IAAI6uG,EAAU,GAAGx+F,OAAO1H,EAAMs1I,aAAa,SAAU,KAAK5tI,OAAOixI,GACjElxI,EAAIyyH,OAAOnjI,KAAK,CACdqL,KAAM,QACNrM,IAAKmwG,EACL5zF,KAAMqlB,EACNnrB,QAAS7R,SAGR,CACL,IAAI4sI,EAAS8Q,EAAS1gH,EAAM,GAAGjwB,OAAOixI,IAElCpR,IACF9/H,EAAIyyH,OAAOnjI,KAAKwwI,GAChB9/H,EAAIo7H,UAAU9rI,KAAK4gC,IAIvB,OAAOlwB,IACN,CACDyyH,OAAQ,GACR2I,UAAW,MAIf,IAAI1qF,EAASoiD,EAAOvkG,MACpBgK,EAAMm0I,gBAAkBvlB,EAAW5uH,EAAMm0I,gBAAiBnS,IAAe1rH,KAAKi4G,EAAuBvuH,IAErGA,EAAMm0I,gBAAgB55C,EAAO7pF,YAE7B1Q,EAAMwzI,eAAiB,iBAAmBxzI,EAAMjI,MAAMga,cAAgBA,IAEtE,IAAI6mI,EAAend,GAAWtjF,GAE9Bn4C,EAAMm4I,iBAAmBvpB,EAAW5uH,EAAMm4I,kBAAkB,SAAUjpB,EAASF,GAC7E,IACIoS,EAAQroI,GADAm2H,EACsB,GAC9BqL,EAAW6G,EAAM,GACjByX,EAAiBzX,EAAM,GAGvB0X,EAAQ//I,GADAi2H,EACsB,GAC9B+pB,EAAYD,EAAM,GAGtB,OAAOD,IAFeC,EAAM,IAEiBve,EAASuc,aAAeiC,EAAUjC,YAAcvc,EAAS/tH,UAAYusI,EAAUvsI,WAC3H8J,KAAKi4G,EAAuBvuH,IAE/B,IAAIg5I,EAAez+C,EAAO4rC,WAAanmI,EAAMm4I,iBAAiB59C,EAAQq+C,GAAgB,CACpF1e,OAAQ,GACR2I,UAAW,IAKb,OAFA7iI,EAAMY,MAAMkyI,YAAckG,EAC1Bh5I,EAAMY,MAAMmyI,YAAc6F,EACnB54I,EAu8BT,OAp8BA/H,EAAau6I,EAAQ,CAAC,CACpBz8I,IAAK,oBACLC,MAAO,WACLsH,KAAK27I,4BACL37I,KAAK47I,wBAED57I,KAAKvF,MAAMo5I,mBAAqBz2H,UAAYA,SAAS+T,kBAEvD/T,SAAS+T,iBAAiB,SAAUnxB,KAAK24I,UAAU,GAGjD34I,KAAKvF,MAAMohJ,WACb77I,KAAK82I,eAGR,CACDr+I,IAAK,mCACLC,MAAO,SAA0CojJ,GAC/C,IAAIC,EAAe/7I,KAAKvF,MACpByU,EAAU6sI,EAAa7sI,QACvBxW,EAAQqjJ,EAAarjJ,MACrBmwI,EAAakT,EAAalT,WAC1B2Q,EAAauC,EAAavC,WAI9B,GAFAx5I,KAAK62I,gBAAgBiF,EAAU1oI,YAE3B0oI,EAAUpjJ,QAAUA,GAASojJ,EAAU5sI,UAAYA,GAAW4sI,EAAUjT,aAAeA,GAAciT,EAAUtC,aAAeA,EAAY,CAC5I,IAAI/D,EAActX,GAAW2d,EAAUpjJ,OACnC88I,EAAcsG,EAAUjT,WAAa7oI,KAAK66I,iBAAiBiB,EAAWrG,GAAe,CACvF7Y,OAAQ,GACR2I,UAAW,IAET+P,EAAet1I,KAAKg8I,oBAAoBvG,GACxCJ,EAAgBr1I,KAAKi8I,qBAAqBzG,EAAYjQ,WAC1DvlI,KAAKiF,SAAS,CACZuwI,YAAaA,EACbC,YAAaA,EACbJ,cAAeA,EACfC,aAAcA,IAKmB,MAAjCt1I,KAAKi2I,2BACPj2I,KAAKiF,SAAS,CACZswI,cAAev1I,KAAKi2I,kCAEfj2I,KAAKi2I,4BAGf,CACDx9I,IAAK,qBACLC,MAAO,SAA4B0L,GACjC,IAAI83I,EAAel8I,KAAKvF,MACpButI,EAAakU,EAAalU,WAC1Ba,EAAaqT,EAAarT,WAC1Bz7B,EAAYptG,KAAKsD,MAAM8pG,WAG3BA,IAAc46B,GAAc5jI,EAAU4jI,YACtC56B,GAAay7B,IAAezkI,EAAUykI,aACpC7oI,KAAK82I,aAGH1pC,GAAa46B,IAAe5jI,EAAU4jI,YAExChoI,KAAKiF,SAAS,CACZmoG,WAAW,GACVptG,KAAKm3I,aAINn3I,KAAK02I,aAAe12I,KAAKw2I,kBAAoBx2I,KAAKo2I,iCF3vD5D,SAAwBtW,EAAQqc,GAC9B,IAAIC,EAAWtc,EAAOgB,wBAClBub,EAAcF,EAAUrb,wBACxBwb,EAAaH,EAAUjQ,aAAe,EAEtCmQ,EAAY9yE,OAAS+yE,EAAaF,EAAS7yE,OAC7Ck1D,GAASqB,EAAQz9H,KAAK6oD,IAAIixF,EAAUI,UAAYJ,EAAUrN,aAAehP,EAAOoM,aAAeoQ,EAAYxc,EAAOe,eACzGwb,EAAYr7I,IAAMs7I,EAAaF,EAASp7I,KACjDy9H,GAASqB,EAAQz9H,KAAKwC,IAAIs3I,EAAUI,UAAYD,EAAY,IEovDxDE,CAAex8I,KAAK02I,YAAa12I,KAAKw2I,kBACtCx2I,KAAKo2I,+BAAgC,KAGxC,CACD39I,IAAK,uBACLC,MAAO,WACLsH,KAAKy8I,2BACLz8I,KAAK08I,uBACLt/H,SAASitG,oBAAoB,SAAUrqH,KAAK24I,UAAU,KAEvD,CACDlgJ,IAAK,aAILC,MAAO,WACLsH,KAAKvF,MAAMi/I,eAEZ,CACDjhJ,IAAK,cACLC,MAAO,WACL,IAAIikJ,EAAgB38I,KAAKvF,MACrBq1I,EAAe6M,EAAc7M,aAC7BjG,EAAU8S,EAAc9S,QAC5B7pI,KAAKm4I,wBAAwB,CAC3BlzG,MAAO,QACPr2B,QAAS,CACPkhI,aAAcA,EACdjG,QAASA,KAGb7pI,KAAKk3I,cAAc,GAAI,CACrB3iH,OAAQ,eAEVv0B,KAAKvF,MAAM08I,gBAEZ,CACD1+I,IAAK,gBACLC,MAAO,SAAuB+0B,EAAUupH,GACtCh3I,KAAKvF,MAAMy8I,cAAczpH,EAAUupH,KAKpC,CACDv+I,IAAK,aACLC,MAAO,WACAsH,KAAK+C,UACV/C,KAAK+C,SAASmC,UAEf,CACDzM,IAAK,YACLC,MAAO,WACAsH,KAAK+C,UACV/C,KAAK+C,SAASoC,SAGf,CACD1M,IAAK,WACLC,MAAO,SAAkBkiJ,GACvB,IAAI/W,EAAS7jI,KAET48I,EAAe58I,KAAKsD,MACpBmyI,EAAcmH,EAAanH,YAC3BroC,EAAYwvC,EAAaxvC,UACzBooC,EAAcx1I,KAAK66I,iBAAiB76I,KAAKvF,MAAOg7I,GAChDoH,EAAgB78I,KAAKvF,MACrBovI,EAAUgT,EAAchT,QACxBkG,EAAkB8M,EAAc9M,gBAChC+M,EAA8B,UAAhBlC,EAA0B,EAAIpF,EAAYjQ,UAAUxrI,OAAS,EAE/E,IAAK8vI,EAAS,CACZ,IAAIkT,EAAgBvH,EAAYjQ,UAAUn/H,QAAQqvI,EAAY,IAE1DsH,GAAiB,IACnBD,EAAcC,GAKlB/8I,KAAKo2I,gCAAkChpC,GAAaptG,KAAK02I,aACzD12I,KAAKi2I,0BAA2B,EAChCj2I,KAAKiF,SAAS,CACZuwI,YAAaA,EACbF,aAAc,KACdD,cAAeG,EAAYjQ,UAAUuX,KACpC,WACDjZ,EAAO6V,aAEP7V,EAAOsU,wBAAwB,CAC7BlzG,MAAO,OACPr2B,QAAS,CACPmhI,gBAAiBA,UAKxB,CACDt3I,IAAK,aACLC,MAAO,SAAoBgzG,GACzB,IAAIsxC,EAAgBh9I,KAAKvF,MACrBovI,EAAUmT,EAAcnT,QACxBiG,EAAekN,EAAclN,aAC7BmN,EAAej9I,KAAKsD,MACpBmyI,EAAcwH,EAAaxH,YAC3BH,EAAe2H,EAAa3H,aAEhC,GAAKzL,EAAL,CACA7pI,KAAKiF,SAAS,CACZowI,cAAe,OAEjB,IAAI6H,EAAezH,EAAYrvI,QAAQkvI,GAElCA,IACH4H,GAAgB,EAChBl9I,KAAKm4I,wBAAwB,CAC3BlzG,MAAO,WAIX,IAAIm3F,EAAYqZ,EAAY17I,OAAS,EACjCojJ,GAAa,EACjB,GAAK1H,EAAY17I,OAAjB,CAEA,OAAQ2xG,GACN,IAAK,WAGDyxC,EAFmB,IAAjBD,EAEU,GACe,IAAlBA,EAEG9gB,EAEA8gB,EAAe,EAG7B,MAEF,IAAK,OACCA,GAAgB,GAAKA,EAAe9gB,IACtC+gB,EAAYD,EAAe,IAMd,IAAfC,GACFn9I,KAAKm4I,wBAAwB,CAC3BlzG,MAAO,QACPr2B,QAAS,CACPkhI,aAAcA,EACdjG,QAASA,KAKf7pI,KAAKiF,SAAS,CACZswI,eAA8B,IAAf4H,EACf7H,aAAcG,EAAY0H,SAG7B,CACD1kJ,IAAK,cACLC,MAAO,WACL,IAAIgzG,EAAY5xG,UAAUC,OAAS,QAAsB+B,IAAjBhC,UAAU,GAAmBA,UAAU,GAAK,QAChFsjJ,EAAgBp9I,KAAKvF,MACrBs6I,EAAWqI,EAAcrI,SACzBhF,EAAkBqN,EAAcrN,gBAChCsN,EAAer9I,KAAKsD,MACpB+xI,EAAgBgI,EAAahI,cAC7BG,EAAc6H,EAAa7H,YAC3BtmI,EAAUsmI,EAAYjQ,UAC1B,GAAKr2H,EAAQnV,OAAb,CACA,IAAIojJ,EAAY,EAEZD,EAAehuI,EAAQ9I,QAAQivI,GAE9BA,IACH6H,GAAgB,EAChBl9I,KAAKm4I,wBAAwB,CAC3BlzG,MAAO,OACPr2B,QAAS,CACPmhI,gBAAiBA,MAKL,OAAdrkC,EACFyxC,EAAYD,EAAe,EAAIA,EAAe,EAAIhuI,EAAQnV,OAAS,EAC5C,SAAd2xG,EACTyxC,GAAaD,EAAe,GAAKhuI,EAAQnV,OAClB,WAAd2xG,GACTyxC,EAAYD,EAAenI,GACX,IAAGoI,EAAY,GACR,aAAdzxC,GACTyxC,EAAYD,EAAenI,GACX7lI,EAAQnV,OAAS,IAAGojJ,EAAYjuI,EAAQnV,OAAS,GAC1C,SAAd2xG,IACTyxC,EAAYjuI,EAAQnV,OAAS,GAG/BiG,KAAKo2I,+BAAgC,EACrCp2I,KAAKiF,SAAS,CACZowI,cAAenmI,EAAQiuI,GACvB7H,aAAc,OAEhBt1I,KAAKm4I,wBAAwB,CAC3BlzG,MAAO,OACPr2B,QAAS,CACPo5H,WAAYiI,GAAiB/gI,EAAQiuI,IACrCpN,gBAAiBA,QAItB,CACDt3I,IAAK,WAILC,MAAO,WAEL,OAAKsH,KAAKvF,MAAM4xH,MAOgB,oBAArBrsH,KAAKvF,MAAM4xH,MACbrsH,KAAKvF,MAAM4xH,MAAM8mB,IAKnB/L,GAAgBA,GAAgB,GAAI+L,IAAenzI,KAAKvF,MAAM4xH,OAZ5D8mB,KAcV,CACD16I,IAAK,iBACLC,MAAO,WACL,IAAIg/I,EAAa13I,KAAK03I,WAClB9Z,EAAK59H,KAAK49H,GACV2F,EAAYvjI,KAAKujI,UACjBsU,EAAW73I,KAAK63I,SAChBZ,EAAWj3I,KAAKi3I,SAChBG,EAAep3I,KAAKo3I,aACpB38I,EAAQuF,KAAKvF,MACbovI,EAAUpvI,EAAMovI,QAChB9C,EAAQtsI,EAAMssI,MACd73H,EAAUzU,EAAMyU,QAEpB,MAAO,CACL0uH,GAAIA,EACJ8Z,WAAYA,EACZnU,UAAWA,EACXsU,SAAUA,EACVvN,SANatqI,KAAKsqI,WAOlBT,QAASA,EACT9C,MAAOA,EACP73H,QAASA,EACTkoI,aAAcA,EACdH,SAAUA,EACV/O,YAAaztI,EACb4xH,MAAOrsH,KAAKs9I,cAGf,CACD7kJ,IAAK,sBACLC,MAAO,SAA6B6kJ,GAClC,GAAIv9I,KAAK41I,wBAEP,OADA51I,KAAK41I,yBAA0B,EACxB,KAGT,IAAI4H,EAAex9I,KAAKsD,MACpBgyI,EAAekI,EAAalI,aAE5BmI,EADkBD,EAAa/H,YACIrvI,QAAQkvI,GAE/C,GAAImI,GAAoB,EAAG,CAGzB,GAFuBF,EAAgBn3I,QAAQkvI,IAEvB,EAEtB,OAAOA,EACF,GAAImI,EAAmBF,EAAgBxjJ,OAG5C,OAAOwjJ,EAAgBE,GAI3B,OAAO,OAER,CACDhlJ,IAAK,uBACLC,MAAO,SAA8BwW,GACnC,IAAIwuI,EAAoB19I,KAAKsD,MAAM+xI,cACnC,OAAOqI,GAAqBxuI,EAAQ9I,QAAQs3I,IAAsB,EAAIA,EAAoBxuI,EAAQ,KAEnG,CACDzW,IAAK,WACLC,MAAO,WAEL,OADkBsH,KAAKsD,MAAMmyI,YACV17I,OAAS,IAE7B,CACDtB,IAAK,aACLC,MAAO,WACL,QAASsH,KAAKsD,MAAMkyI,YAAY5Y,OAAO7iI,SAExC,CACDtB,IAAK,eACLC,MAAO,WACL,OAAOsH,KAAKsD,MAAMkyI,YAAYjQ,UAAUxrI,SAEzC,CACDtB,IAAK,cACLC,MAAO,WACL,IAAIilJ,EAAgB39I,KAAKvF,MACrB6/I,EAAcqD,EAAcrD,YAC5BzQ,EAAU8T,EAAc9T,QAG5B,YAAoB/tI,IAAhBw+I,EAAkCzQ,EAC/ByQ,IAER,CACD7hJ,IAAK,mBACLC,MAAO,SAA0BuxI,EAAQwL,GACvC,MAA8C,oBAAhCz1I,KAAKvF,MAAMw1I,kBAAkCjwI,KAAKvF,MAAMw1I,iBAAiBhG,EAAQwL,KAEhG,CACDh9I,IAAK,mBACLC,MAAO,SAA0BuxI,EAAQwL,GACvC,IAAIrI,EAASptI,KAEb,GAAIy1I,EAAYrvI,QAAQ6jI,IAAW,EAAG,OAAO,EAE7C,GAA2C,oBAAhCjqI,KAAKvF,MAAM68I,iBACpB,OAAOt3I,KAAKvF,MAAM68I,iBAAiBrN,EAAQwL,GAG7C,IAAInB,EAAYt0I,KAAKy0I,eAAexK,GACpC,OAAOwL,EAAY94H,MAAK,SAAU9iB,GAChC,OAAOuzI,EAAOqH,eAAe56I,KAAOy6I,OAGvC,CACD77I,IAAK,eACLC,MAAO,SAAsBuxI,EAAQuP,GACnC,OAAOx5I,KAAKvF,MAAMu5I,cAAeh0I,KAAKvF,MAAMu5I,aAAa/J,EAAQuP,KAElE,CACD/gJ,IAAK,oBACLC,MAAO,SAA2Bsc,EAAMpG,GACtC,GAA4C,oBAAjC5O,KAAKvF,MAAMmjJ,kBAAkC,CACtD,IAAIpE,EAAax5I,KAAKvF,MAAM++I,WACxB/D,EAAcz1I,KAAKsD,MAAMmyI,YAC7B,OAAOz1I,KAAKvF,MAAMmjJ,kBAAkB5oI,EAAM,CACxCpG,QAASA,EACT4qI,WAAYA,EACZ/D,YAAaA,IAGf,OAAOz1I,KAAKw0I,eAAex/H,KAG9B,CACDvc,IAAK,mBACLC,MAAO,SAA0Bsc,GAC/B,OAAOhV,KAAKvF,MAAM85I,iBAAiBv/H,KAKpC,CACDvc,IAAK,4BAILC,MAAO,WACD0kB,UAAYA,SAAS+T,mBACvB/T,SAAS+T,iBAAiB,mBAAoBnxB,KAAK44I,oBAAoB,GACvEx7H,SAAS+T,iBAAiB,iBAAkBnxB,KAAK64I,kBAAkB,MAGtE,CACDpgJ,IAAK,2BACLC,MAAO,WACD0kB,UAAYA,SAASitG,sBACvBjtG,SAASitG,oBAAoB,mBAAoBrqH,KAAK44I,oBACtDx7H,SAASitG,oBAAoB,iBAAkBrqH,KAAK64I,qBAGvD,CACDpgJ,IAAK,wBAILC,MAAO,WACD0kB,UAAYA,SAAS+T,mBACvB/T,SAAS+T,iBAAiB,aAAcnxB,KAAKovI,cAAc,GAC3DhyH,SAAS+T,iBAAiB,YAAanxB,KAAKuvI,aAAa,GACzDnyH,SAAS+T,iBAAiB,WAAYnxB,KAAKk5I,YAAY,MAG1D,CACDzgJ,IAAK,uBACLC,MAAO,WACD0kB,UAAYA,SAASitG,sBACvBjtG,SAASitG,oBAAoB,aAAcrqH,KAAKovI,cAChDhyH,SAASitG,oBAAoB,YAAarqH,KAAKuvI,aAC/CnyH,SAASitG,oBAAoB,WAAYrqH,KAAKk5I,eAGjD,CACDzgJ,IAAK,2BAILC,MAAO,WACL,IAAImlJ,EAAe79I,KAAKsD,MACpB8xI,EAAkByI,EAAazI,gBAC/BK,EAAcoI,EAAapI,YAC3BH,EAAeuI,EAAavI,aAC5BD,EAAgBwI,EAAaxI,cAC7ByI,EAAgB99I,KAAKvF,MACrByU,EAAU4uI,EAAc5uI,QACxB25H,EAAaiV,EAAcjV,WAC3B2Q,EAAasE,EAActE,WAC3BxE,EAAqB8I,EAAc9I,mBAEnC+I,EAAkBzI,EAt+CA,SAA+BzV,GACzD,IAAIyV,EAAezV,EAAKyV,aACpBd,EAAiB3U,EAAK2U,eACtBiB,EAAc5V,EAAK4V,YACvB,MAAO,SAASrrI,OAAOoqI,EAAec,GAAe,cAAclrI,OAAOqrI,EAAYrvI,QAAQkvI,GAAgB,EAAG,QAAQlrI,OAAOqrI,EAAY17I,OAAQ,KAk+C3GikJ,CAAsB,CACzD1I,aAAcA,EACdd,eAAgBx0I,KAAKw0I,eACrBiB,YAAaA,IACV,GAEDwI,EAAmB5I,GAAiBxM,EAt+CjB,SAAgCzD,GAC3D,IAAIiQ,EAAgBjQ,EAAMiQ,cACtBb,EAAiBpP,EAAMoP,eACvBtlI,EAAUk2H,EAAMl2H,QACpB,MAAO,UAAU9E,OAAOoqI,EAAea,GAAgB,YAAYjrI,OAAOirI,EAAcrN,WAAa,YAAc,GAAI,MAAM59H,OAAO8E,EAAQ9I,QAAQivI,GAAiB,EAAG,QAAQjrI,OAAO8E,EAAQnV,OAAQ,KAk+C9ImkJ,CAAuB,CAC1E7I,cAAeA,EACfb,eAAgBx0I,KAAKw0I,eACrBtlI,QAASA,IACN,GAEDivI,EAt+Ce,SAA4BxY,GACnD,IAAI6T,EAAa7T,EAAM6T,WACnB4E,EAAsBzY,EAAMyY,oBAChC,MAAO,GAAGh0I,OAAOg0I,GAAqBh0I,OAAOovI,EAAa,oBAAsBA,EAAa,GAAI,KAm+C5E6E,CAAmB,CAClC7E,WAAYA,EACZ4E,oBAAqBpJ,EAAmB,CACtCjqE,MAAO/qE,KAAKs+I,mBAGhB,MAAO,GAAGl0I,OAAO2zI,EAAiB,KAAK3zI,OAAO6zI,EAAkB,KAAK7zI,OAAO+zI,EAAY,KAAK/zI,OAAOgrI,KAErG,CACD38I,IAAK,cACLC,MAAO,WACL,IAAI6lJ,EAAgBv+I,KAAKvF,MACrButI,EAAauW,EAAcvW,WAC3B8H,EAAeyO,EAAczO,aAC7BrsI,EAAU86I,EAAc96I,QACxB+1I,EAAa+E,EAAc/E,WAC3BvE,EAAWsJ,EAActJ,SACzBuJ,EAAOD,EAAcC,KACrBhV,EAAQxpI,KAAKoT,WAAWo2H,MACxB+L,EAAgBv1I,KAAKsD,MAAMiyI,cAC3B7xI,EAAKD,GAAWzD,KAAKg4I,aAAa,SAElCyG,EAAiB,CACnB,oBAAqB,OACrB,aAAcz+I,KAAKvF,MAAM,cACzB,kBAAmBuF,KAAKvF,MAAM,oBAGhC,IAAKq1I,EAEH,OAAoBJ,IAAMpqI,cAAc2lI,GAAY5qI,EAAS,CAC3DqD,GAAIA,EACJklI,SAAU5oI,KAAK42I,YACfmD,OAAQ/5I,KAAK85I,YACb3yI,SAAUw2E,GACVk8D,QAAS75I,KAAK25I,aACd+E,UAAU,EACVjV,SAAUzB,EACViN,SAAUA,EACVuJ,KAAMA,EACN9lJ,MAAO,IACN+lJ,IAGL,IAAIE,EAAoB3+I,KAAK61I,YACzBjY,EAAK+gB,EAAkB/gB,GACvBvR,EAAQsyB,EAAkBtyB,MAC1B6b,EAAcyW,EAAkBzW,YACpC,OAAoBwH,IAAMpqI,cAAckkI,EAAOnpI,EAAS,CACtDu+I,eAAgB,OAChBC,aAAc,MACdC,YAAa,MACblhB,GAAIA,EACJ2F,UAAWvjI,KAAKujI,UAChB7/H,GAAIA,EACJklI,SAAU5oI,KAAK42I,YACf5O,WAAYA,EACZX,SAAUkO,EACVwE,OAAQ/5I,KAAK85I,YACb3yI,SAAUnH,KAAKu5I,kBACfM,QAAS75I,KAAK25I,aACdzR,YAAaA,EACb6W,WAAY,QACZ9J,SAAUA,EACVuJ,KAAMA,EACNnyB,MAAOA,EACPvnH,KAAM,OACNpM,MAAO8gJ,GACNiF,MAEJ,CACDhmJ,IAAK,2BACLC,MAAO,WACL,IAAIsmJ,EAASh/I,KAETi/I,EAAmBj/I,KAAKoT,WACxB20H,EAAakX,EAAiBlX,WAC9BF,EAAsBoX,EAAiBpX,oBACvCC,EAAkBmX,EAAiBnX,gBACnCgC,EAAmBmV,EAAiBnV,iBACpCM,EAAc6U,EAAiB7U,YAC/BF,EAAc+U,EAAiB/U,YAC/B2L,EAAc71I,KAAK61I,YACnBqJ,EAAgBl/I,KAAKvF,MACrBq5I,EAA2BoL,EAAcpL,yBACzC9L,EAAakX,EAAclX,WAC3B6B,EAAUqV,EAAcrV,QACxB2P,EAAa0F,EAAc1F,WAC3B70I,EAAcu6I,EAAcv6I,YAC5Bw6I,EAAen/I,KAAKsD,MACpBmyI,EAAc0J,EAAa1J,YAC3BH,EAAe6J,EAAa7J,aAC5BloC,EAAY+xC,EAAa/xC,UAE7B,IAAKptG,KAAKsqI,aAAewJ,EACvB,OAAO0F,EAAa,KAAoB9J,IAAMpqI,cAAc4kI,EAAa7pI,EAAS,GAAIw1I,EAAa,CACjGp9I,IAAK,cACLuvI,WAAYA,EACZ56B,UAAWA,IACTzoG,GAGN,GAAIklI,EA4BF,OA3BmB4L,EAAYnsI,KAAI,SAAUipG,EAAKx6F,GAChD,IAAIqnI,EAAkB7sC,IAAQ+iC,EAC9B,OAAoB5F,IAAMpqI,cAAcyiI,EAAY1nI,EAAS,GAAIw1I,EAAa,CAC5EziI,WAAY,CACV+0H,UAAWN,EACXO,MAAON,EACPO,OAAQyB,GAEV18B,UAAWgyC,EACXpX,WAAYA,EACZvvI,IAAK,GAAG2R,OAAO40I,EAAOvK,eAAeliC,IAAMnoG,OAAO2N,GAClDA,MAAOA,EACPkwH,YAAa,CACX6F,QAAS,WACP,OAAOkR,EAAOxH,YAAYjlC,IAE5B2mC,WAAY,WACV,OAAO8F,EAAOxH,YAAYjlC,IAE5B8sC,YAAa,SAAqBj/I,GAChCA,EAAEwrI,iBACFxrI,EAAE0rI,oBAGN92H,KAAMu9F,IACJysC,EAAOpB,kBAAkBrrC,EAAK,aAKtC,GAAIinC,EACF,OAAO,KAGT,IAAIvG,EAAcwC,EAAY,GAC9B,OAAoB/F,IAAMpqI,cAAc8kI,EAAa/pI,EAAS,GAAIw1I,EAAa,CAC7E7gI,KAAMi+H,EACNjL,WAAYA,IACVhoI,KAAK49I,kBAAkB3K,EAAa,YAEzC,CACDx6I,IAAK,uBACLC,MAAO,WACL,IAAIgwI,EAAiB1oI,KAAKoT,WAAWs1H,eACjCmN,EAAc71I,KAAK61I,YACnByJ,EAAgBt/I,KAAKvF,MACrButI,EAAasX,EAActX,WAC3B0M,EAAY4K,EAAc5K,UAC1BtnC,EAAYptG,KAAKsD,MAAM8pG,UAE3B,IAAKptG,KAAKs6I,gBAAkB5R,GAAkBV,IAAehoI,KAAKsqI,YAAcoK,EAC9E,OAAO,KAGT,IAAIlR,EAAa,CACf6b,YAAar/I,KAAK04I,0BAClBQ,WAAYl5I,KAAKq5I,yBACjB,cAAe,QAEjB,OAAoB3J,IAAMpqI,cAAcojI,EAAgBroI,EAAS,GAAIw1I,EAAa,CAChFrS,WAAYA,EACZp2B,UAAWA,OAGd,CACD30G,IAAK,yBACLC,MAAO,WACL,IAAIouI,EAAmB9mI,KAAKoT,WAAW0zH,iBACnC+O,EAAc71I,KAAK61I,YACnB0J,EAAgBv/I,KAAKvF,MACrButI,EAAauX,EAAcvX,WAC3B0M,EAAY6K,EAAc7K,UAC1BtnC,EAAYptG,KAAKsD,MAAM8pG,UAC3B,IAAK05B,IAAqB4N,EAAW,OAAO,KAI5C,OAAoBhF,IAAMpqI,cAAcwhI,EAAkBzmI,EAAS,GAAIw1I,EAAa,CAClFrS,WAJe,CACf,cAAe,QAIfwE,WAAYA,EACZ56B,UAAWA,OAGd,CACD30G,IAAK,2BACLC,MAAO,WACL,IAAI8mJ,EAAoBx/I,KAAKoT,WACzB21H,EAAoByW,EAAkBzW,kBACtCQ,EAAqBiW,EAAkBjW,mBAE3C,IAAKR,IAAsBQ,EAAoB,OAAO,KACtD,IAAIsM,EAAc71I,KAAK61I,YACnB7N,EAAahoI,KAAKvF,MAAMutI,WACxB56B,EAAYptG,KAAKsD,MAAM8pG,UAC3B,OAAoBsiC,IAAMpqI,cAAcikI,EAAoBlpI,EAAS,GAAIw1I,EAAa,CACpF7N,WAAYA,EACZ56B,UAAWA,OAGd,CACD30G,IAAK,0BACLC,MAAO,WACL,IAAIqwI,EAAoB/oI,KAAKoT,WAAW21H,kBACxC,IAAKA,EAAmB,OAAO,KAC/B,IAAI8M,EAAc71I,KAAK61I,YACnB7N,EAAahoI,KAAKvF,MAAMutI,WACxB56B,EAAYptG,KAAKsD,MAAM8pG,UACvBo2B,EAAa,CACf6b,YAAar/I,KAAKw4I,6BAClBU,WAAYl5I,KAAKs5I,4BACjB,cAAe,QAEjB,OAAoB5J,IAAMpqI,cAAcyjI,EAAmB1oI,EAAS,GAAIw1I,EAAa,CACnFrS,WAAYA,EACZwE,WAAYA,EACZ56B,UAAWA,OAGd,CACD30G,IAAK,aACLC,MAAO,WACL,IAAI+mJ,EAASz/I,KAET0/I,EAAoB1/I,KAAKoT,WACzB41H,EAAQ0W,EAAkB1W,MAC1BG,EAAeuW,EAAkBvW,aACjCO,EAAOgW,EAAkBhW,KACzBE,EAAW8V,EAAkB9V,SAC7BlG,EAAagc,EAAkBhc,WAC/BD,EAAiBic,EAAkBjc,eACnCH,EAAmBoc,EAAkBpc,iBACrCyG,EAAS2V,EAAkB3V,OAC3B8L,EAAc71I,KAAK61I,YACnB8J,EAAe3/I,KAAKsD,MACpB+xI,EAAgBsK,EAAatK,cAC7BG,EAAcmK,EAAanK,YAC3BoK,EAAgB5/I,KAAKvF,MACrBk5I,EAAoBiM,EAAcjM,kBAClC6F,EAAaoG,EAAcpG,WAC3B9E,EAAYkL,EAAclL,UAC1B5C,EAAiB8N,EAAc9N,eAC/BtP,EAAgBod,EAAcpd,cAC9BH,EAAgBud,EAAcvd,cAC9BwG,EAAa+W,EAAc/W,WAC3BpG,EAAgBmd,EAAcnd,cAC9BC,EAAekd,EAAcld,aAC7Bmd,EAAmBD,EAAcC,iBACjClL,EAAwBiL,EAAcjL,sBACtChS,EAA2Bid,EAAcjd,yBACzCgQ,EAAmBiN,EAAcjN,iBACjCmN,EAAoBF,EAAcE,kBAClCC,EAAuBH,EAAcG,qBACzC,IAAKlX,EAAY,OAAO,KAExB,IAUImX,EAVApjB,EAAS,SAAgBniI,GAG3B,IAAI2yG,EAAYioC,IAAkB56I,EAAMua,KAExC,OADAva,EAAMmuI,SAAWx7B,EAAYqyC,EAAOhJ,yBAAsB36I,EACtC4zI,IAAMpqI,cAAcykI,EAAQ1pI,EAAS,GAAIw1I,EAAap7I,EAAO,CAC/E2yG,UAAWA,IACTqyC,EAAO7B,kBAAkBnjJ,EAAMua,KAAM,UAK3C,GAAIhV,KAAKigJ,aACPD,EAASxK,EAAY5Y,OAAOtzH,KAAI,SAAU+wB,GACxC,GAAkB,UAAdA,EAAKv1B,KAAkB,CACdu1B,EAAKv1B,KAAhB,IACIkqG,EAAQ3oG,EAAyBg0B,EAAM,CAAC,SAExC6lH,EAAY,GAAG91I,OAAOiwB,EAAK5hC,IAAK,YACpC,OAAoBi3I,IAAMpqI,cAAc0jI,EAAO3oI,EAAS,GAAIw1I,EAAa7mC,EAAO,CAC9Ei6B,QAASE,EACTD,aAAc,CACZxlI,GAAIw8I,EACJlrI,KAAMqlB,EAAKrlB,MAEbyV,MAAOg1H,EAAOlL,iBAAiBl6G,EAAKrlB,QAClCqlB,EAAKnrB,QAAQ5F,KAAI,SAAU2gI,GAC7B,OAAOrN,EAAOqN,OAEX,GAAkB,WAAd5vG,EAAKv1B,KACd,OAAO83H,EAAOviG,WAGb,GAAIq6G,EAAW,CACpB,IAAI3oI,EAAU+lI,EAAe,CAC3B0H,WAAYA,IAEd,GAAgB,OAAZztI,EAAkB,OAAO,KAC7Bi0I,EAAsBtQ,IAAMpqI,cAAcm+H,EAAgBoS,EAAa9pI,OAClE,CACL,IAAIo0I,EAAWxN,EAAiB,CAC9B6G,WAAYA,IAGd,GAAiB,OAAb2G,EAAmB,OAAO,KAC9BH,EAAsBtQ,IAAMpqI,cAAcg+H,EAAkBuS,EAAasK,GAG3E,IAAIC,EAAqB,CACvB5d,cAAeA,EACfH,cAAeA,EACfI,cAAeA,EACfC,aAAcA,EACdC,yBAA0BA,GAExB0d,EAA2B3Q,IAAMpqI,cAAc88H,GAAY/hI,EAAS,GAAIw1I,EAAauK,IAAqB,SAAUE,GACtH,IAAI35I,EAAM25I,EAAO35I,IACb45I,EAAqBD,EAAOzd,YAC5B9C,EAAYwgB,EAAmBxgB,UAC/B7zB,EAAYq0C,EAAmBr0C,UACnC,OAAoBwjC,IAAMpqI,cAAcokI,EAAMrpI,EAAS,GAAIw1I,EAAauK,EAAoB,CAC1FxX,SAAUjiI,EACV68H,WAAY,CACV6b,YAAaI,EAAOrH,gBACpB+C,YAAasE,EAAOpH,iBAEtB3D,UAAWA,EACX3U,UAAWA,IACI2P,IAAMpqI,cAAcqqI,GAAoB,CACvD9B,UAAW8F,EACXhF,YAAamR,EACbrR,eAAgBsR,GACFrQ,IAAMpqI,cAAckoI,GAAa,CAC/CK,UAAW8G,GACGjF,IAAMpqI,cAAcskI,EAAUvpI,EAAS,GAAIw1I,EAAa,CACtEjN,SAAU6W,EAAO9I,eACjBjC,UAAWA,EACXxoC,UAAWA,IACT8zC,SAKN,OAAOH,GAAqC,UAAjBnd,EAAwCgN,IAAMpqI,cAAco+H,EAAYrjI,EAAS,GAAIw1I,EAAa,CAC3H7R,SAAU6b,EACV5b,eAAgBjkI,KAAKs2I,WACrB7T,cAAeA,EACfC,aAAcA,IACZ2d,GAAeA,IAEpB,CACD5nJ,IAAK,kBACLC,MAAO,WACL,IAAI8nJ,EAASxgJ,KAETygJ,EAAgBzgJ,KAAKvF,MACrB27H,EAAYqqB,EAAcrqB,UAC1B4R,EAAayY,EAAczY,WAC3B6B,EAAU4W,EAAc5W,QACxB5sI,EAAOwjJ,EAAcxjJ,KACrBw4I,EAAcz1I,KAAKsD,MAAMmyI,YAC7B,GAAKx4I,IAAQ+qI,EAAb,CAEA,GAAI6B,EAAS,CACX,GAAIzT,EAAW,CACb,IAAI19H,EAAQ+8I,EAAYnsI,KAAI,SAAUipG,GACpC,OAAOiuC,EAAO/L,eAAeliC,MAC5BnnG,KAAKgrH,GACR,OAAoBsZ,IAAMpqI,cAAc,QAAS,CAC/CrI,KAAMA,EACN6H,KAAM,SACNpM,MAAOA,IAGT,IAAIuK,EAAQwyI,EAAY17I,OAAS,EAAI07I,EAAYnsI,KAAI,SAAUipG,EAAK14G,GAClE,OAAoB61I,IAAMpqI,cAAc,QAAS,CAC/C7M,IAAK,KAAK2R,OAAOvQ,GACjBoD,KAAMA,EACN6H,KAAM,SACNpM,MAAO8nJ,EAAO/L,eAAeliC,QAEfm9B,IAAMpqI,cAAc,QAAS,CAC7CrI,KAAMA,EACN6H,KAAM,WAER,OAAoB4qI,IAAMpqI,cAAc,MAAO,KAAMrC,GAGvD,IAAIy9I,EAAUjL,EAAY,GAAKz1I,KAAKy0I,eAAegB,EAAY,IAAM,GAErE,OAAoB/F,IAAMpqI,cAAc,QAAS,CAC/CrI,KAAMA,EACN6H,KAAM,SACNpM,MAAOgoJ,OAIZ,CACDjoJ,IAAK,mBACLC,MAAO,WACL,OAAKsH,KAAKsD,MAAM8pG,UACIsiC,IAAMpqI,cAAc0lI,GAAU,CAChD,YAAa,UACC0E,IAAMpqI,cAAc,OAAQ,CAC1C5B,GAAI,wBACH,OAAQ1D,KAAKsD,MAAM6xI,mBAAiCzF,IAAMpqI,cAAc,OAAQ,CACjF5B,GAAI,gBACH,OAAQ1D,KAAK2gJ,6BAPkB,OASnC,CACDloJ,IAAK,SACLC,MAAO,WACL,IAAIkoJ,EAAoB5gJ,KAAKoT,WACzBu1H,EAAUiY,EAAkBjY,QAC5BU,EAAsBuX,EAAkBvX,oBACxCc,EAAkByW,EAAkBzW,gBACpCE,EAAiBuW,EAAkBvW,eACnCwW,EAAgB7gJ,KAAKvF,MACrB+L,EAAYq6I,EAAcr6I,UAC1B9C,EAAKm9I,EAAcn9I,GACnBskI,EAAa6Y,EAAc7Y,WAC3Ba,EAAagY,EAAchY,WAC3Bz7B,EAAYptG,KAAKsD,MAAM8pG,UACvByoC,EAAc71I,KAAK61I,YAAc71I,KAAK8gJ,iBAC1C,OAAoBpR,IAAMpqI,cAAc6kI,EAAiB9pI,EAAS,GAAIw1I,EAAa,CACjFrvI,UAAWA,EACXg9H,WAAY,CACV9/H,GAAIA,EACJ02I,UAAWp6I,KAAKo6I,WAElBpS,WAAYA,EACZ56B,UAAWA,IACTptG,KAAK+gJ,mBAAiCrR,IAAMpqI,cAAcqjI,EAAStoI,EAAS,GAAIw1I,EAAa,CAC/FjN,SAAU5oI,KAAKu2I,cACf/S,WAAY,CACV6b,YAAar/I,KAAKs4I,mBAClBY,WAAYl5I,KAAKo5I,mBAEnBpR,WAAYA,EACZ56B,UAAWA,EACXy7B,WAAYA,IACG6G,IAAMpqI,cAAc+kI,EAAgBhqI,EAAS,GAAIw1I,EAAa,CAC7E7N,WAAYA,IACVhoI,KAAKghJ,2BAA4BhhJ,KAAKihJ,eAA6BvR,IAAMpqI,cAAc+jI,EAAqBhpI,EAAS,GAAIw1I,EAAa,CACxI7N,WAAYA,IACVhoI,KAAKkhJ,uBAAwBlhJ,KAAKmhJ,yBAA0BnhJ,KAAKohJ,2BAA4BphJ,KAAKqhJ,4BAA6BrhJ,KAAKshJ,aAActhJ,KAAKuhJ,uBAIxJrM,EAtwDiB,CAuwDxBtuI,aAEFsuI,GAAO9tI,aAAeA,G,MCrxFtB,SAAS83H,GAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPq/H,GAA6B,OAAO,WAAkC,IAAsC3gI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAG5Z,IAAIsI,GAAe,CACjBo6I,kBAAmB,GACnBC,mBAAmB,EACnB/7I,aAAc,MCUhB,SAASw5H,GAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E/zG,KAAK3wB,UAAU+B,SAASC,KAAKuiI,QAAQC,UAAU7zG,KAAM,IAAI,iBAAyB,EAAQ,MAAOrrB,GAAK,OAAO,GAFzPq/H,GAA6B,OAAO,WAAkC,IAAsC3gI,EAAlC4gI,EAAQxO,EAAgBiO,GAAkB,GAAIC,EAA2B,CAAE,IAAIO,EAAYzO,EAAgBlxH,MAAMhD,YAAa8B,EAASugI,QAAQC,UAAUI,EAAO5lI,UAAW6lI,QAAqB7gI,EAAS4gI,EAAMhmI,MAAMsG,KAAMlG,WAAc,OAAO8I,EAA2B5C,KAAMlB,IAqC1Z8H,YAjCF,IAmCImR,GD9Cc,SAAqB2pI,GACrC,IAAIC,EAAQC,EAEZ,OAAOA,EAAQD,EAAsB,SAAUl/I,GAC7CuB,EAAU69I,EAAcp/I,GAExB,IAAImrB,EAASsxG,GAAa2iB,GAE1B,SAASA,IACP,IAAIn/I,EAEJtI,EAAgB4F,KAAM6hJ,GAEtB,IAAK,IAAIzkB,EAAOtjI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAMmiI,GAAO1B,EAAO,EAAGA,EAAO0B,EAAM1B,IAC/Ez7H,EAAKy7H,GAAQ5hI,UAAU4hI,GA6CzB,OA1CAh5H,EAAQkrB,EAAO9wB,KAAKpD,MAAMk0B,EAAQ,CAAC5tB,MAAMoK,OAAOnK,KAC1CmF,YAAS,EACf1C,EAAMY,MAAQ,CACZk2I,gBAAuC19I,IAA3B4G,EAAMjI,MAAM++I,WAA2B92I,EAAMjI,MAAM++I,WAAa92I,EAAMjI,MAAM+mJ,kBACxF3Y,gBAAuC/sI,IAA3B4G,EAAMjI,MAAMouI,WAA2BnmI,EAAMjI,MAAMouI,WAAanmI,EAAMjI,MAAMgnJ,kBACxF/oJ,WAA6BoD,IAAtB4G,EAAMjI,MAAM/B,MAAsBgK,EAAMjI,MAAM/B,MAAQgK,EAAMjI,MAAMiL,cAG3EhD,EAAMyE,SAAW,SAAUzO,EAAOs+I,GAChCt0I,EAAMo/I,SAAS,WAAYppJ,EAAOs+I,GAElCt0I,EAAMuC,SAAS,CACbvM,MAAOA,KAIXgK,EAAMw0I,cAAgB,SAAUx+I,EAAOs+I,GAGrC,IAAIvpH,EAAW/qB,EAAMo/I,SAAS,gBAAiBppJ,EAAOs+I,GAEtDt0I,EAAMuC,SAAS,CACbu0I,gBAAyB19I,IAAb2xB,EAAyBA,EAAW/0B,KAIpDgK,EAAMg3I,WAAa,WACjBh3I,EAAMo/I,SAAS,cAEfp/I,EAAMuC,SAAS,CACb4jI,YAAY,KAIhBnmI,EAAMy0I,YAAc,WAClBz0I,EAAMo/I,SAAS,eAEfp/I,EAAMuC,SAAS,CACb4jI,YAAY,KAITnmI,EA2DT,OAxDA/H,EAAaknJ,EAAc,CAAC,CAC1BppJ,IAAK,QACLC,MAAO,WACLsH,KAAKoF,OAAOF,UAEb,CACDzM,IAAK,OACLC,MAAO,WACLsH,KAAKoF,OAAOD,SAGb,CACD1M,IAAK,UACLC,MAAO,SAAiBD,GACtB,YAA2BqD,IAApBkE,KAAKvF,MAAMhC,GAAqBuH,KAAKvF,MAAMhC,GAAOuH,KAAKsD,MAAM7K,KAGrE,CACDA,IAAK,WACLC,MAAO,SAAkBuE,GACvB,GAAgC,oBAArB+C,KAAKvF,MAAMwC,GAAsB,CAG1C,IAFA,IAAIslI,EAEK1E,EAAQ/jI,UAAUC,OAAQkG,EAAO,IAAIhF,MAAM4iI,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxG79H,EAAK69H,EAAQ,GAAKhkI,UAAUgkI,GAG9B,OAAQyE,EAAcviI,KAAKvF,OAAOwC,GAAMvD,MAAM6oI,EAAatiI,MAG9D,CACDxH,IAAK,SACLC,MAAO,WACL,IAAImrI,EAAS7jI,KAET+jI,EAAe/jI,KAAKvF,MAIpBA,GAHoBspI,EAAayd,kBACbzd,EAAa0d,kBAClB1d,EAAar+H,aACpBW,EAAyB09H,EAAc,CAAC,oBAAqB,oBAAqB,kBAE9F,OAAoB2L,IAAMpqI,cAAco8I,EAAiBrhJ,EAAS,GAAI5F,EAAO,CAC3EkM,IAAK,SAAak5H,GAChBgE,EAAOz+H,OAASy6H,GAElB2Z,WAAYx5I,KAAK+hJ,QAAQ,cACzBlZ,WAAY7oI,KAAK+hJ,QAAQ,cACzB56I,SAAUnH,KAAKmH,SACf+vI,cAAel3I,KAAKk3I,cACpBC,YAAan3I,KAAKm3I,YAClBuC,WAAY15I,KAAK05I,WACjBhhJ,MAAOsH,KAAK+hJ,QAAQ,gBAKnBF,EAnH4B,CAoHnCj7I,aAAY+6I,EAAOv6I,aAAeA,GAAcw6I,ECzExCI,CAAY9M,IAETn9H,Q,8BCzDF,IAAI8zC,EAAEvzD,EAAQ,IAAiBsE,EAAE,oBAAoBvB,QAAQA,OAAO4mJ,IAAI13I,EAAE3N,EAAEvB,OAAO4mJ,IAAI,iBAAiB,MAAMlxF,EAAEn0D,EAAEvB,OAAO4mJ,IAAI,gBAAgB,MAAM94I,EAAEvM,EAAEvB,OAAO4mJ,IAAI,kBAAkB,MAAM53I,EAAEzN,EAAEvB,OAAO4mJ,IAAI,qBAAqB,MAAM1wF,EAAE30D,EAAEvB,OAAO4mJ,IAAI,kBAAkB,MAAMp1I,EAAEjQ,EAAEvB,OAAO4mJ,IAAI,kBAAkB,MAAMzlI,EAAE5f,EAAEvB,OAAO4mJ,IAAI,iBAAiB,MAAMl3G,EAAEnuC,EAAEvB,OAAO4mJ,IAAI,qBAAqB,MAAMz3H,EAAE5tB,EAAEvB,OAAO4mJ,IAAI,kBAAkB,MAAMluF,EAAEn3D,EAAEvB,OAAO4mJ,IAAI,cAAc,MAAMhyE,EAAErzE,EAAEvB,OAAO4mJ,IAAI,cACxe,MAAMxtB,EAAE,oBAAoBp5H,QAAQA,OAAOC,SAAS,SAAS61E,EAAEzzE,GAAG,IAAI,IAAI+O,EAAE,yDAAyD/O,EAAEwoC,EAAE,EAAEA,EAAEpsC,UAAUC,OAAOmsC,IAAIz5B,GAAG,WAAWy1I,mBAAmBpoJ,UAAUosC,IAAI,MAAM,yBAAyBxoC,EAAE,WAAW+O,EAAE,iHAC/P,IAAIkoH,EAAE,CAACwtB,UAAU,WAAW,OAAM,GAAIC,mBAAmB,aAAaC,oBAAoB,aAAaC,gBAAgB,cAAcjtB,EAAE,GAAG,SAASx2C,EAAEnhF,EAAE+O,EAAEy5B,GAAGlmC,KAAKvF,MAAMiD,EAAEsC,KAAK4O,QAAQnC,EAAEzM,KAAKuiJ,KAAKltB,EAAEr1H,KAAKwiJ,QAAQt8G,GAAGyuF,EACpN,SAASZ,KAA6B,SAASQ,EAAE72H,EAAE+O,EAAEy5B,GAAGlmC,KAAKvF,MAAMiD,EAAEsC,KAAK4O,QAAQnC,EAAEzM,KAAKuiJ,KAAKltB,EAAEr1H,KAAKwiJ,QAAQt8G,GAAGyuF,EADsG91C,EAAE/jF,UAAU2nJ,iBAAiB,GAAG5jE,EAAE/jF,UAAUmK,SAAS,SAASvH,EAAE+O,GAAG,GAAG,kBAAkB/O,GAAG,oBAAoBA,GAAG,MAAMA,EAAE,MAAMG,MAAMszE,EAAE,KAAKnxE,KAAKwiJ,QAAQF,gBAAgBtiJ,KAAKtC,EAAE+O,EAAE,aAAaoyE,EAAE/jF,UAAU4nJ,YAAY,SAAShlJ,GAAGsC,KAAKwiJ,QAAQJ,mBAAmBpiJ,KAAKtC,EAAE,gBACndq2H,EAAEj5H,UAAU+jF,EAAE/jF,UAAsF,IAAIiuE,EAAEwrD,EAAEz5H,UAAU,IAAIi5H,EAAEhrD,EAAE/rE,YAAYu3H,EAAE1oE,EAAEkd,EAAE8V,EAAE/jF,WAAWiuE,EAAE45E,sBAAqB,EAAG,IAAI7tB,EAAE,CAACjtG,QAAQ,MAAMgtG,EAAEl8H,OAAOmC,UAAUyF,eAAe+0D,EAAE,CAAC78D,KAAI,EAAGkO,KAAI,EAAGi8I,QAAO,EAAGC,UAAS,GAChS,SAASjuB,EAAEl3H,EAAE+O,EAAEy5B,GAAG,IAAI9lC,EAAE8pB,EAAE,GAAGhqB,EAAE,KAAKgrB,EAAE,KAAK,GAAG,MAAMze,EAAE,IAAIrM,UAAK,IAASqM,EAAE9F,MAAMukB,EAAEze,EAAE9F,UAAK,IAAS8F,EAAEhU,MAAMyH,EAAE,GAAGuM,EAAEhU,KAAKgU,EAAEooH,EAAE/3H,KAAK2P,EAAErM,KAAKk1D,EAAE/0D,eAAeH,KAAK8pB,EAAE9pB,GAAGqM,EAAErM,IAAI,IAAImJ,EAAEzP,UAAUC,OAAO,EAAE,GAAG,IAAIwP,EAAE2gB,EAAE7sB,SAAS6oC,OAAO,GAAG,EAAE38B,EAAE,CAAC,IAAI,IAAIwkD,EAAE9yD,MAAMsO,GAAG0jB,EAAE,EAAEA,EAAE1jB,EAAE0jB,IAAI8gC,EAAE9gC,GAAGnzB,UAAUmzB,EAAE,GAAG/C,EAAE7sB,SAAS0wD,EAAE,GAAGrwD,GAAGA,EAAE0J,aAAa,IAAIhH,KAAKmJ,EAAE7L,EAAE0J,kBAAe,IAAS8iB,EAAE9pB,KAAK8pB,EAAE9pB,GAAGmJ,EAAEnJ,IAAI,MAAM,CAAC8kI,SAAS36H,EAAEzF,KAAKpH,EAAEjF,IAAIyH,EAAEyG,IAAIukB,EAAEzwB,MAAMyvB,EAAE44H,OAAOhuB,EAAEjtG,SACxU,SAASotG,EAAEv3H,GAAG,MAAM,kBAAkBA,GAAG,OAAOA,GAAGA,EAAEwnI,WAAW36H,EAA0G,IAAI/C,EAAE,OAAO+tH,EAAE,GAAG,SAASpB,EAAEz2H,EAAE+O,EAAEy5B,EAAE9lC,GAAG,GAAGm1H,EAAEx7H,OAAO,CAAC,IAAImwB,EAAEqrG,EAAExqG,MAA8D,OAAxDb,EAAEprB,OAAOpB,EAAEwsB,EAAE64H,UAAUt2I,EAAEyd,EAAEhjB,KAAKg/B,EAAEhc,EAAEtb,QAAQxO,EAAE8pB,EAAE6gD,MAAM,EAAS7gD,EAAE,MAAM,CAACprB,OAAOpB,EAAEqlJ,UAAUt2I,EAAEvF,KAAKg/B,EAAEt3B,QAAQxO,EAAE2qE,MAAM,GAC5b,SAASypD,EAAE92H,GAAGA,EAAEoB,OAAO,KAAKpB,EAAEqlJ,UAAU,KAAKrlJ,EAAEwJ,KAAK,KAAKxJ,EAAEkR,QAAQ,KAAKlR,EAAEqtE,MAAM,EAAE,GAAGwqD,EAAEx7H,QAAQw7H,EAAE97H,KAAKiE,GAE2F,SAASslJ,EAAEtlJ,EAAE+O,EAAEy5B,GAAG,OAAO,MAAMxoC,EAAE,EADlO,SAAS+3H,EAAE/3H,EAAE+O,EAAEy5B,EAAE9lC,GAAG,IAAI8pB,SAASxsB,EAAK,cAAcwsB,GAAG,YAAYA,IAAExsB,EAAE,MAAK,IAAIwC,GAAE,EAAG,GAAG,OAAOxC,EAAEwC,GAAE,OAAQ,OAAOgqB,GAAG,IAAK,SAAS,IAAK,SAAShqB,GAAE,EAAG,MAAM,IAAK,SAAS,OAAOxC,EAAEwnI,UAAU,KAAK36H,EAAE,KAAKwmD,EAAE7wD,GAAE,GAAI,GAAGA,EAAE,OAAOgmC,EAAE9lC,EAAE1C,EAAE,KAAK+O,EAAE,IAAIioH,EAAEh3H,EAAE,GAAG+O,GAAG,EAAyB,GAAvBvM,EAAE,EAAEuM,EAAE,KAAKA,EAAE,IAAIA,EAAE,IAAOxR,MAAMC,QAAQwC,GAAG,IAAI,IAAIwtB,EAAE,EAAEA,EAAExtB,EAAE3D,OAAOmxB,IAAI,CAAQ,IAAI3hB,EAAEkD,EAAEioH,EAAfxqG,EAAExsB,EAAEwtB,GAAeA,GAAGhrB,GAAGu1H,EAAEvrG,EAAE3gB,EAAE28B,EAAE9lC,QAAQ,GAAG,OAAO1C,GAAG,kBAAkBA,EAAE6L,EAAE,KAAiCA,EAAE,oBAA7BA,EAAEkrH,GAAG/2H,EAAE+2H,IAAI/2H,EAAE,eAAsC6L,EAAE,KAAM,oBAAoBA,EAAE,IAAI7L,EAAE6L,EAAEzM,KAAKY,GAAGwtB,EACpf,IAAIhB,EAAExsB,EAAEzB,QAAQC,MAA6BgE,GAAGu1H,EAA1BvrG,EAAEA,EAAExxB,MAAM6Q,EAAEkD,EAAEioH,EAAExqG,EAAEgB,KAAcgb,EAAE9lC,QAAQ,GAAG,WAAW8pB,EAAE,MAAMgc,EAAE,GAAGxoC,EAAEG,MAAMszE,EAAE,GAAG,oBAAoBjrC,EAAE,qBAAqBvtC,OAAOQ,KAAKuE,GAAG0N,KAAK,MAAM,IAAI86B,EAAE,KAAK,OAAOhmC,EAAqCu1H,CAAE/3H,EAAE,GAAG+O,EAAEy5B,GAAG,SAASwuF,EAAEh3H,EAAE+O,GAAG,MAAM,kBAAkB/O,GAAG,OAAOA,GAAG,MAAMA,EAAEjF,IAH9I,SAAgBiF,GAAG,IAAI+O,EAAE,CAAC,IAAI,KAAK,IAAI,MAAM,MAAM,KAAK,GAAG/O,GAAGyqB,QAAQ,SAAQ,SAASzqB,GAAG,OAAO+O,EAAE/O,MAG+CulJ,CAAOvlJ,EAAEjF,KAAKgU,EAAE5P,SAAS,IAAI,SAAS22H,EAAE91H,EAAE+O,GAAG/O,EAAEwJ,KAAKpK,KAAKY,EAAEkR,QAAQnC,EAAE/O,EAAEqtE,SACxX,SAAS+oD,EAAGp2H,EAAE+O,EAAEy5B,GAAG,IAAI9lC,EAAE1C,EAAEoB,OAAOorB,EAAExsB,EAAEqlJ,UAAUrlJ,EAAEA,EAAEwJ,KAAKpK,KAAKY,EAAEkR,QAAQnC,EAAE/O,EAAEqtE,SAAS9vE,MAAMC,QAAQwC,GAAG+1H,EAAE/1H,EAAE0C,EAAE8lC,GAAE,SAASxoC,GAAG,OAAOA,KAAI,MAAMA,IAAIu3H,EAAEv3H,KAAKA,EAJtJ,SAAWA,EAAE+O,GAAG,MAAM,CAACy4H,SAAS36H,EAAEzF,KAAKpH,EAAEoH,KAAKrM,IAAIgU,EAAE9F,IAAIjJ,EAAEiJ,IAAIlM,MAAMiD,EAAEjD,MAAMqoJ,OAAOplJ,EAAEolJ,QAImE/tB,CAAEr3H,EAAEwsB,IAAIxsB,EAAEjF,KAAKgU,GAAGA,EAAEhU,MAAMiF,EAAEjF,IAAI,IAAI,GAAGiF,EAAEjF,KAAK0vB,QAAQ3gB,EAAE,OAAO,KAAK0+B,IAAI9lC,EAAE3G,KAAKiE,IAAI,SAAS+1H,EAAE/1H,EAAE+O,EAAEy5B,EAAE9lC,EAAE8pB,GAAG,IAAIhqB,EAAE,GAAG,MAAMgmC,IAAIhmC,GAAG,GAAGgmC,GAAG/d,QAAQ3gB,EAAE,OAAO,KAAkBw7I,EAAEtlJ,EAAEo2H,EAAjBrnH,EAAE0nH,EAAE1nH,EAAEvM,EAAEE,EAAE8pB,IAAasqG,EAAE/nH,GAAG,IAAI2oH,EAAE,CAACvtG,QAAQ,MAAM,SAAS8rG,IAAI,IAAIj2H,EAAE03H,EAAEvtG,QAAQ,GAAG,OAAOnqB,EAAE,MAAMG,MAAMszE,EAAE,MAAM,OAAOzzE,EACxa,IAAIs2H,EAAG,CAACkvB,uBAAuB9tB,EAAE+tB,wBAAwB,CAACC,SAAS,MAAMC,kBAAkBvuB,EAAEwuB,qBAAqB,CAACz7H,SAAQ,GAAIvnB,OAAOurD,GAAGxzD,EAAQkrJ,SAAS,CAACj6I,IAAI,SAAS5L,EAAE+O,EAAEy5B,GAAG,GAAG,MAAMxoC,EAAE,OAAOA,EAAE,IAAI0C,EAAE,GAAmB,OAAhBqzH,EAAE/1H,EAAE0C,EAAE,KAAKqM,EAAEy5B,GAAU9lC,GAAGnG,QAAQ,SAASyD,EAAE+O,EAAEy5B,GAAG,GAAG,MAAMxoC,EAAE,OAAOA,EAAqBslJ,EAAEtlJ,EAAE81H,EAAvB/mH,EAAE0nH,EAAE,KAAK,KAAK1nH,EAAEy5B,IAAYsuF,EAAE/nH,IAAIs+D,MAAM,SAASrtE,GAAG,OAAOslJ,EAAEtlJ,GAAE,WAAW,OAAO,OAAM,OAAO8lJ,QAAQ,SAAS9lJ,GAAG,IAAI+O,EAAE,GAAqC,OAAlCgnH,EAAE/1H,EAAE+O,EAAE,MAAK,SAAS/O,GAAG,OAAOA,KAAW+O,GAAGg3I,KAAK,SAAS/lJ,GAAG,IAAIu3H,EAAEv3H,GAAG,MAAMG,MAAMszE,EAAE,MAAM,OAAOzzE,IAC9erF,EAAQuO,UAAUi4E,EAAExmF,EAAQqrJ,SAASv6I,EAAE9Q,EAAQsrJ,SAASpyF,EAAEl5D,EAAQ01I,cAAcxZ,EAAEl8H,EAAQurJ,WAAWv5I,EAAEhS,EAAQwrJ,SAASr5H,EAAEnyB,EAAQyrJ,mDAAmD9vB,EACrL37H,EAAQ0rJ,aAAa,SAASrmJ,EAAE+O,EAAEy5B,GAAG,GAAG,OAAOxoC,QAAG,IAASA,EAAE,MAAMG,MAAMszE,EAAE,IAAIzzE,IAAI,IAAI0C,EAAEyrD,EAAE,GAAGnuD,EAAEjD,OAAOyvB,EAAExsB,EAAEjF,IAAIyH,EAAExC,EAAEiJ,IAAIukB,EAAExtB,EAAEolJ,OAAO,GAAG,MAAMr2I,EAAE,CAAoE,QAAnE,IAASA,EAAE9F,MAAMzG,EAAEuM,EAAE9F,IAAIukB,EAAE4pG,EAAEjtG,cAAS,IAASpb,EAAEhU,MAAMyxB,EAAE,GAAGzd,EAAEhU,KAAQiF,EAAEoH,MAAMpH,EAAEoH,KAAKsC,aAAa,IAAImC,EAAE7L,EAAEoH,KAAKsC,aAAa,IAAI2mD,KAAKthD,EAAEooH,EAAE/3H,KAAK2P,EAAEshD,KAAKuH,EAAE/0D,eAAewtD,KAAK3tD,EAAE2tD,QAAG,IAASthD,EAAEshD,SAAI,IAASxkD,EAAEA,EAAEwkD,GAAGthD,EAAEshD,IAAI,IAAIA,EAAEj0D,UAAUC,OAAO,EAAE,GAAG,IAAIg0D,EAAE3tD,EAAE/C,SAAS6oC,OAAO,GAAG,EAAE6nB,EAAE,CAACxkD,EAAEtO,MAAM8yD,GAAG,IAAI,IAAI9gC,EAAE,EAAEA,EAAE8gC,EAAE9gC,IAAI1jB,EAAE0jB,GAAGnzB,UAAUmzB,EAAE,GAAG7sB,EAAE/C,SAASkM,EAAE,MAAM,CAAC27H,SAAS36H,EAAEzF,KAAKpH,EAAEoH,KACxfrM,IAAIyxB,EAAEvjB,IAAIzG,EAAEzF,MAAM2F,EAAE0iJ,OAAO53H,IAAI7yB,EAAQg0C,cAAc,SAAS3uC,EAAE+O,GAA8K,YAA3K,IAASA,IAAIA,EAAE,OAAM/O,EAAE,CAACwnI,SAAS1oH,EAAEwnI,sBAAsBv3I,EAAEw3I,cAAcvmJ,EAAEwmJ,eAAexmJ,EAAEymJ,aAAa,EAAE3lJ,SAAS,KAAKq+H,SAAS,OAAQr+H,SAAS,CAAC0mI,SAASr4H,EAAE23E,SAAS9mF,GAAUA,EAAEm/H,SAASn/H,GAAGrF,EAAQiN,cAAcsvH,EAAEv8H,EAAQ+rJ,cAAc,SAAS1mJ,GAAG,IAAI+O,EAAEmoH,EAAE57G,KAAK,KAAKtb,GAAY,OAAT+O,EAAE3H,KAAKpH,EAAS+O,GAAGpU,EAAQgsJ,UAAU,WAAW,MAAM,CAACx8H,QAAQ,OAAOxvB,EAAQykI,WAAW,SAASp/H,GAAG,MAAM,CAACwnI,SAASn6F,EAAE6xF,OAAOl/H,IAAIrF,EAAQisJ,eAAervB,EAC3e58H,EAAQ4V,KAAK,SAASvQ,GAAG,MAAM,CAACwnI,SAASj1D,EAAEs0E,MAAM7mJ,EAAE6mF,SAAS,EAAEigE,QAAQ,OAAOnsJ,EAAQwzB,KAAK,SAASnuB,EAAE+O,GAAG,MAAM,CAACy4H,SAASnxE,EAAEjvD,KAAKpH,EAAE46E,aAAQ,IAAS7rE,EAAE,KAAKA,IAAIpU,EAAQosJ,YAAY,SAAS/mJ,EAAE+O,GAAG,OAAOknH,IAAI8wB,YAAY/mJ,EAAE+O,IAAIpU,EAAQqsJ,WAAW,SAAShnJ,EAAE+O,GAAG,OAAOknH,IAAI+wB,WAAWhnJ,EAAE+O,IAAIpU,EAAQssJ,cAAc,aAAatsJ,EAAQusJ,UAAU,SAASlnJ,EAAE+O,GAAG,OAAOknH,IAAIixB,UAAUlnJ,EAAE+O,IAAIpU,EAAQwsJ,oBAAoB,SAASnnJ,EAAE+O,EAAEy5B,GAAG,OAAOytF,IAAIkxB,oBAAoBnnJ,EAAE+O,EAAEy5B,IACtc7tC,EAAQysJ,gBAAgB,SAASpnJ,EAAE+O,GAAG,OAAOknH,IAAImxB,gBAAgBpnJ,EAAE+O,IAAIpU,EAAQ0sJ,QAAQ,SAASrnJ,EAAE+O,GAAG,OAAOknH,IAAIoxB,QAAQrnJ,EAAE+O,IAAIpU,EAAQ2sJ,WAAW,SAAStnJ,EAAE+O,EAAEy5B,GAAG,OAAOytF,IAAIqxB,WAAWtnJ,EAAE+O,EAAEy5B,IAAI7tC,EAAQ4sJ,OAAO,SAASvnJ,GAAG,OAAOi2H,IAAIsxB,OAAOvnJ,IAAIrF,EAAQ6sJ,SAAS,SAASxnJ,GAAG,OAAOi2H,IAAIuxB,SAASxnJ,IAAIrF,EAAQmY,QAAQ,W,6BCZxS,IAAIsjH,EAAGx7H,EAAQ,GAASsE,EAAEtE,EAAQ,IAAiB6Q,EAAE7Q,EAAQ,IAAa,SAASi5D,EAAE7zD,GAAG,IAAI,IAAI+O,EAAE,yDAAyD/O,EAAEwoC,EAAE,EAAEA,EAAEpsC,UAAUC,OAAOmsC,IAAIz5B,GAAG,WAAWy1I,mBAAmBpoJ,UAAUosC,IAAI,MAAM,yBAAyBxoC,EAAE,WAAW+O,EAAE,iHAAiH,IAAIqnH,EAAG,MAAMj2H,MAAM0zD,EAAE,MACxa,SAASyiE,EAAGt2H,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,EAAErJ,EAAE6tD,EAAE7iC,GAAG,IAAI2gC,EAAE5wD,MAAMH,UAAUiC,MAAMD,KAAKhD,UAAU,GAAG,IAAI2S,EAAE/S,MAAMwsC,EAAE2lB,GAAG,MAAM5+B,GAAGjtB,KAAKmlJ,QAAQl4H,IAAI,IAAIioG,GAAG,EAAGb,EAAG,KAAKc,GAAG,EAAGG,EAAG,KAAK5B,EAAG,CAACyxB,QAAQ,SAASznJ,GAAGw3H,GAAG,EAAGb,EAAG32H,IAAI,SAASk2H,EAAGl2H,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,EAAErJ,EAAE6tD,EAAE7iC,GAAGgqG,GAAG,EAAGb,EAAG,KAAKL,EAAGt6H,MAAMg6H,EAAG55H,WAAmJ,IAAIm6H,EAAG,KAAKC,EAAG,KAAKE,EAAG,KACha,SAASE,EAAG52H,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAEoH,MAAM,gBAAgBpH,EAAE+7I,cAAcrlB,EAAGluF,GAD6L,SAAYxoC,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,EAAErJ,EAAE6tD,EAAE7iC,GAA4B,GAAzB0oG,EAAGl6H,MAAMsG,KAAKlG,WAAco7H,EAAG,CAAC,IAAGA,EAAgC,MAAMr3H,MAAM0zD,EAAE,MAA1C,IAAI1F,EAAEwoE,EAAGa,GAAG,EAAGb,EAAG,KAA8Bc,IAAKA,GAAG,EAAGG,EAAGzpE,IAC9TgoE,CAAG3pG,EAAEzd,OAAE,EAAO/O,GAAGA,EAAE+7I,cAAc,KAAK,IAAI2L,EAAG,KAAKC,EAAG,GAC5H,SAASC,IAAK,GAAGF,EAAG,IAAI,IAAI1nJ,KAAK2nJ,EAAG,CAAC,IAAI54I,EAAE44I,EAAG3nJ,GAAGwoC,EAAEk/G,EAAGh/I,QAAQ1I,GAAG,MAAM,EAAEwoC,GAAG,MAAMroC,MAAM0zD,EAAE,GAAG7zD,IAAI,IAAI6nJ,EAAGr/G,GAAG,CAAC,IAAIz5B,EAAE+4I,cAAc,MAAM3nJ,MAAM0zD,EAAE,GAAG7zD,IAA2B,IAAI,IAAIwsB,KAA/Bq7H,EAAGr/G,GAAGz5B,EAAEy5B,EAAEz5B,EAAEg5I,WAA0B,CAAC,IAAIrlJ,OAAE,EAAWmJ,EAAE28B,EAAEhc,GAAGhqB,EAAEuM,EAAEshD,EAAE7jC,EAAE,GAAGw7H,EAAGnlJ,eAAewtD,GAAG,MAAMlwD,MAAM0zD,EAAE,GAAGxD,IAAI23F,EAAG33F,GAAGxkD,EAAE,IAAI2hB,EAAE3hB,EAAEo8I,wBAAwB,GAAGz6H,EAAE,CAAC,IAAI9qB,KAAK8qB,EAAEA,EAAE3qB,eAAeH,IAAIwlJ,EAAG16H,EAAE9qB,GAAGF,EAAE6tD,GAAG3tD,GAAE,OAAQmJ,EAAEs8I,kBAAkBD,EAAGr8I,EAAEs8I,iBAAiB3lJ,EAAE6tD,GAAG3tD,GAAE,GAAIA,GAAE,EAAG,IAAIA,EAAE,MAAMvC,MAAM0zD,EAAE,GAAGrnC,EAAExsB,OACjc,SAASkoJ,EAAGloJ,EAAE+O,EAAEy5B,GAAG,GAAG4/G,EAAGpoJ,GAAG,MAAMG,MAAM0zD,EAAE,IAAI7zD,IAAIooJ,EAAGpoJ,GAAG+O,EAAEs5I,EAAGroJ,GAAG+O,EAAEg5I,WAAWv/G,GAAGrnC,aAAa,IAAI0mJ,EAAG,GAAGG,EAAG,GAAGI,EAAG,GAAGC,EAAG,GAAG,SAASC,EAAGtoJ,GAAG,IAASwoC,EAALz5B,GAAE,EAAK,IAAIy5B,KAAKxoC,EAAE,GAAGA,EAAE6C,eAAe2lC,GAAG,CAAC,IAAIhc,EAAExsB,EAAEwoC,GAAG,IAAIm/G,EAAG9kJ,eAAe2lC,IAAIm/G,EAAGn/G,KAAKhc,EAAE,CAAC,GAAGm7H,EAAGn/G,GAAG,MAAMroC,MAAM0zD,EAAE,IAAIrrB,IAAIm/G,EAAGn/G,GAAGhc,EAAEzd,GAAE,GAAIA,GAAG64I,IAAK,IAAIW,IAAK,qBAAqBnoJ,QAAQ,qBAAqBA,OAAOsf,UAAU,qBAAqBtf,OAAOsf,SAAS9X,eAAe4gJ,EAAG,KAAKC,EAAG,KAAKC,EAAG,KAC9a,SAASC,EAAG3oJ,GAAG,GAAGA,EAAEw2H,EAAGx2H,GAAG,CAAC,GAAG,oBAAoBwoJ,EAAG,MAAMroJ,MAAM0zD,EAAE,MAAM,IAAI9kD,EAAE/O,EAAE4oJ,UAAU75I,IAAIA,EAAEwnH,EAAGxnH,GAAGy5I,EAAGxoJ,EAAE4oJ,UAAU5oJ,EAAEoH,KAAK2H,KAAK,SAAS85I,EAAG7oJ,GAAGyoJ,EAAGC,EAAGA,EAAG3sJ,KAAKiE,GAAG0oJ,EAAG,CAAC1oJ,GAAGyoJ,EAAGzoJ,EAAE,SAAS8oJ,IAAK,GAAGL,EAAG,CAAC,IAAIzoJ,EAAEyoJ,EAAG15I,EAAE25I,EAAoB,GAAjBA,EAAGD,EAAG,KAAKE,EAAG3oJ,GAAM+O,EAAE,IAAI/O,EAAE,EAAEA,EAAE+O,EAAE1S,OAAO2D,IAAI2oJ,EAAG55I,EAAE/O,KAAK,SAAS+oJ,EAAG/oJ,EAAE+O,GAAG,OAAO/O,EAAE+O,GAAG,SAASi6I,EAAGhpJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,OAAO1C,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,SAASumJ,KAAM,IAAIC,EAAGH,EAAGI,GAAG,EAAGC,GAAG,EAAG,SAASC,IAAQ,OAAOZ,GAAI,OAAOC,IAAGO,IAAKH,KAC9Z,SAASQ,EAAGtpJ,EAAE+O,EAAEy5B,GAAG,GAAG4gH,EAAG,OAAOppJ,EAAE+O,EAAEy5B,GAAG4gH,GAAG,EAAG,IAAI,OAAOF,EAAGlpJ,EAAE+O,EAAEy5B,GAAlB,QAA6B4gH,GAAG,EAAGC,KAAM,IAAIE,EAAG,8VAA8VC,EAAGvuJ,OAAOmC,UAAUyF,eAAe4mJ,EAAG,GAAGC,EAAG,GAE/Q,SAASv6I,EAAEnP,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAGvJ,KAAKqnJ,gBAAgB,IAAI56I,GAAG,IAAIA,GAAG,IAAIA,EAAEzM,KAAKsnJ,cAAcp9H,EAAElqB,KAAKunJ,mBAAmBnnJ,EAAEJ,KAAKwnJ,gBAAgBthH,EAAElmC,KAAKynJ,aAAa/pJ,EAAEsC,KAAK8E,KAAK2H,EAAEzM,KAAK0nJ,YAAYn+I,EAAE,IAAI4nE,EAAE,GACxZ,uIAAuI/2C,MAAM,KAAKngC,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAE,MAAK,MAAM,CAAC,CAAC,gBAAgB,kBAAkB,CAAC,YAAY,SAAS,CAAC,UAAU,OAAO,CAAC,YAAY,eAAezD,SAAQ,SAASyD,GAAG,IAAI+O,EAAE/O,EAAE,GAAGyzE,EAAE1kE,GAAG,IAAII,EAAEJ,EAAE,GAAE,EAAG/O,EAAE,GAAG,MAAK,MAAM,CAAC,kBAAkB,YAAY,aAAa,SAASzD,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAEuzB,cAAc,MAAK,MAC9d,CAAC,cAAc,4BAA4B,YAAY,iBAAiBh3B,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAE,MAAK,MAAM,wNAAwN08B,MAAM,KAAKngC,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAEuzB,cAAc,MAAK,MACzZ,CAAC,UAAU,WAAW,QAAQ,YAAYh3B,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAE,MAAK,MAAM,CAAC,UAAU,YAAYzD,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAE,MAAK,MAAM,CAAC,OAAO,OAAO,OAAO,QAAQzD,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAE,MAAK,MAAM,CAAC,UAAU,SAASzD,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAEuzB,cAAc,MAAK,MAAM,IAAI02H,EAAG,gBAAgB,SAASC,EAAGlqJ,GAAG,OAAOA,EAAE,GAAGw+G,cAC/X,0jCAA0jC9hF,MAAM,KAAKngC,SAAQ,SAASyD,GAAG,IAAI+O,EAAE/O,EAAEyqB,QAAQw/H,EACzmCC,GAAIz2E,EAAE1kE,GAAG,IAAII,EAAEJ,EAAE,GAAE,EAAG/O,EAAE,MAAK,MAAM,2EAA2E08B,MAAM,KAAKngC,SAAQ,SAASyD,GAAG,IAAI+O,EAAE/O,EAAEyqB,QAAQw/H,EAAGC,GAAIz2E,EAAE1kE,GAAG,IAAII,EAAEJ,EAAE,GAAE,EAAG/O,EAAE,gCAA+B,MAAM,CAAC,WAAW,WAAW,aAAazD,SAAQ,SAASyD,GAAG,IAAI+O,EAAE/O,EAAEyqB,QAAQw/H,EAAGC,GAAIz2E,EAAE1kE,GAAG,IAAII,EAAEJ,EAAE,GAAE,EAAG/O,EAAE,wCAAuC,MAAM,CAAC,WAAW,eAAezD,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAEuzB,cAAc,MAAK,MACnckgD,EAAE02E,UAAU,IAAIh7I,EAAE,YAAY,GAAE,EAAG,aAAa,gCAA+B,GAAI,CAAC,MAAM,OAAO,SAAS,cAAc5S,SAAQ,SAASyD,GAAGyzE,EAAEzzE,GAAG,IAAImP,EAAEnP,EAAE,GAAE,EAAGA,EAAEuzB,cAAc,MAAK,MAAM,IAAI62H,EAAGh0B,EAAGgwB,mDACnM,SAASiE,EAAGrqJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAE+wE,EAAE5wE,eAAekM,GAAG0kE,EAAE1kE,GAAG,MAAW,OAAOrM,EAAE,IAAIA,EAAE0E,MAAKolB,IAAO,EAAEzd,EAAE1S,SAAS,MAAM0S,EAAE,IAAI,MAAMA,EAAE,MAAI,MAAMA,EAAE,IAAI,MAAMA,EAAE,QAPnJ,SAAY/O,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAG,OAAOzd,GAAG,qBAAqBA,GAD4D,SAAY/O,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAG,OAAOgc,GAAG,IAAIA,EAAEphC,KAAK,OAAM,EAAG,cAAc2H,GAAG,IAAK,WAAW,IAAK,SAAS,OAAM,EAAG,IAAK,UAAU,OAAGyd,IAAc,OAAOgc,GAASA,EAAEmhH,gBAAmD,WAAnC3pJ,EAAEA,EAAEuzB,cAAcl0B,MAAM,EAAE,KAAsB,UAAUW,GAAE,QAAQ,OAAM,GACnTsqJ,CAAGtqJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,OAAM,EAAG,GAAGA,EAAE,OAAM,EAAG,GAAG,OAAOgc,EAAE,OAAOA,EAAEphC,MAAM,KAAK,EAAE,OAAO2H,EAAE,KAAK,EAAE,OAAM,IAAKA,EAAE,KAAK,EAAE,OAAO8pB,MAAM9pB,GAAG,KAAK,EAAE,OAAO8pB,MAAM9pB,IAAI,EAAEA,EAAE,OAAM,EAOrDw7I,CAAGx7I,EAAEy5B,EAAE9lC,EAAE8pB,KAAKgc,EAAE,MAAMhc,GAAG,OAAO9pB,EARhM,SAAY1C,GAAG,QAAGwpJ,EAAGpqJ,KAAKsqJ,EAAG1pJ,KAAewpJ,EAAGpqJ,KAAKqqJ,EAAGzpJ,KAAeupJ,EAAG/pJ,KAAKQ,GAAU0pJ,EAAG1pJ,IAAG,GAAGypJ,EAAGzpJ,IAAG,GAAS,IAQkFwqJ,CAAGz7I,KAAK,OAAOy5B,EAAExoC,EAAEyqJ,gBAAgB17I,GAAG/O,EAAE60H,aAAa9lH,EAAE,GAAGy5B,IAAI9lC,EAAEonJ,gBAAgB9pJ,EAAE0C,EAAEqnJ,cAAc,OAAOvhH,EAAE,IAAI9lC,EAAE0E,MAAQ,GAAGohC,GAAGz5B,EAAErM,EAAEknJ,cAAcp9H,EAAE9pB,EAAEmnJ,mBAAmB,OAAOrhH,EAAExoC,EAAEyqJ,gBAAgB17I,IAAay5B,EAAE,KAAX9lC,EAAEA,EAAE0E,OAAc,IAAI1E,IAAG,IAAK8lC,EAAE,GAAG,GAAGA,EAAEhc,EAAExsB,EAAE0qJ,eAAel+H,EAAEzd,EAAEy5B,GAAGxoC,EAAE60H,aAAa9lH,EAAEy5B,MADtO4hH,EAAGvnJ,eAAe,4BAA4BunJ,EAAG5E,uBAAuB,CAACr7H,QAAQ,OAAOigI,EAAGvnJ,eAAe,6BAA6BunJ,EAAG3E,wBAAwB,CAACC,SAAS,OAEla,IAAIiF,EAAG,cAAchzB,EAAE,oBAAoBh6H,QAAQA,OAAO4mJ,IAAIqG,GAAGjzB,EAAEh6H,OAAO4mJ,IAAI,iBAAiB,MAAMsG,GAAGlzB,EAAEh6H,OAAO4mJ,IAAI,gBAAgB,MAAMuG,GAAGnzB,EAAEh6H,OAAO4mJ,IAAI,kBAAkB,MAAMwG,GAAGpzB,EAAEh6H,OAAO4mJ,IAAI,qBAAqB,MAAMrjJ,GAAGy2H,EAAEh6H,OAAO4mJ,IAAI,kBAAkB,MAAMyG,GAAGrzB,EAAEh6H,OAAO4mJ,IAAI,kBAAkB,MAAM0G,GAAGtzB,EAAEh6H,OAAO4mJ,IAAI,iBAAiB,MAAM2G,GAAGvzB,EAAEh6H,OAAO4mJ,IAAI,yBAAyB,MAAM4G,GAAGxzB,EAAEh6H,OAAO4mJ,IAAI,qBAAqB,MAAM6G,GAAGzzB,EAAEh6H,OAAO4mJ,IAAI,kBAAkB,MAAM8G,GAAG1zB,EAAEh6H,OAAO4mJ,IAAI,uBACve,MAAM+G,GAAG3zB,EAAEh6H,OAAO4mJ,IAAI,cAAc,MAAMgH,GAAG5zB,EAAEh6H,OAAO4mJ,IAAI,cAAc,MAAMiH,GAAG7zB,EAAEh6H,OAAO4mJ,IAAI,eAAe,MAAMkH,GAAG,oBAAoB9tJ,QAAQA,OAAOC,SAAS,SAAS8tJ,GAAG1rJ,GAAG,OAAG,OAAOA,GAAG,kBAAkBA,EAAS,KAAwC,oBAAnCA,EAAEyrJ,IAAIzrJ,EAAEyrJ,KAAKzrJ,EAAE,eAA0CA,EAAE,KACzR,SAASytE,GAAGztE,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,GAAG,oBAAoBA,EAAE,OAAOA,EAAEgB,aAAahB,EAAET,MAAM,KAAK,GAAG,kBAAkBS,EAAE,OAAOA,EAAE,OAAOA,GAAG,KAAK8qJ,GAAG,MAAM,WAAW,KAAKD,GAAG,MAAM,SAAS,KAAK3pJ,GAAG,MAAM,WAAW,KAAK6pJ,GAAG,MAAM,aAAa,KAAKK,GAAG,MAAM,WAAW,KAAKC,GAAG,MAAM,eAAe,GAAG,kBAAkBrrJ,EAAE,OAAOA,EAAEwnI,UAAU,KAAKyjB,GAAG,MAAM,mBAAmB,KAAKD,GAAG,MAAM,mBAAmB,KAAKG,GAAG,IAAIp8I,EAAE/O,EAAEk/H,OAAmC,OAA5BnwH,EAAEA,EAAE/N,aAAa+N,EAAExP,MAAM,GAAUS,EAAEgB,cAAc,KAAK+N,EAAE,cAAcA,EAAE,IACnf,cAAc,KAAKu8I,GAAG,OAAO79E,GAAGztE,EAAEoH,MAAM,KAAKokJ,GAAG,OAAO/9E,GAAGztE,EAAEk/H,QAAQ,KAAKqsB,GAAG,GAAGvrJ,EAAE,IAAIA,EAAE6mF,QAAQ7mF,EAAE8mJ,QAAQ,KAAK,OAAOr5E,GAAGztE,GAAG,OAAO,KAAK,SAAS2rJ,GAAG3rJ,GAAG,IAAI+O,EAAE,GAAG,EAAE,CAAC/O,EAAE,OAAOA,EAAEmgC,KAAK,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,IAAIqI,EAAE,GAAG,MAAMxoC,EAAE,QAAQ,IAAIwsB,EAAExsB,EAAE4rJ,YAAYlpJ,EAAE1C,EAAE6rJ,aAAahgJ,EAAE4hE,GAAGztE,EAAEoH,MAAMohC,EAAE,KAAKhc,IAAIgc,EAAEilC,GAAGjhD,EAAEplB,OAAOolB,EAAE3gB,EAAEA,EAAE,GAAGnJ,EAAEmJ,EAAE,QAAQnJ,EAAEopJ,SAASrhI,QAAQkgI,EAAG,IAAI,IAAIjoJ,EAAEqpJ,WAAW,IAAIvjH,IAAI38B,EAAE,gBAAgB28B,EAAE,KAAKA,EAAE,aAAahc,GAAG,WAAW3gB,EAAEkD,GAAGy5B,EAAExoC,EAAEA,EAAEgsJ,aAAahsJ,GAAG,OAAO+O,EACje,SAASk9I,GAAGjsJ,GAAG,cAAcA,GAAG,IAAK,UAAU,IAAK,SAAS,IAAK,SAAS,IAAK,SAAS,IAAK,YAAY,OAAOA,EAAE,QAAQ,MAAM,IAAI,SAASksJ,GAAGlsJ,GAAG,IAAI+O,EAAE/O,EAAEoH,KAAK,OAAOpH,EAAEA,EAAEmsJ,WAAW,UAAUnsJ,EAAEuzB,gBAAgB,aAAaxkB,GAAG,UAAUA,GAEzN,SAASq9I,GAAGpsJ,GAAGA,EAAEqsJ,gBAAgBrsJ,EAAEqsJ,cADvD,SAAYrsJ,GAAG,IAAI+O,EAAEm9I,GAAGlsJ,GAAG,UAAU,QAAQwoC,EAAEvtC,OAAOa,yBAAyBkE,EAAEV,YAAYlC,UAAU2R,GAAGyd,EAAE,GAAGxsB,EAAE+O,GAAG,IAAI/O,EAAE6C,eAAekM,IAAI,qBAAqBy5B,GAAG,oBAAoBA,EAAErsB,KAAK,oBAAoBqsB,EAAElsB,IAAI,CAAC,IAAI5Z,EAAE8lC,EAAErsB,IAAItQ,EAAE28B,EAAElsB,IAAiL,OAA7KrhB,OAAOC,eAAe8E,EAAE+O,EAAE,CAAC3T,cAAa,EAAG+gB,IAAI,WAAW,OAAOzZ,EAAEtD,KAAKkD,OAAOga,IAAI,SAAStc,GAAGwsB,EAAE,GAAGxsB,EAAE6L,EAAEzM,KAAKkD,KAAKtC,MAAM/E,OAAOC,eAAe8E,EAAE+O,EAAE,CAAC5T,WAAWqtC,EAAErtC,aAAmB,CAACg/I,SAAS,WAAW,OAAO3tH,GAAG+sH,SAAS,SAASv5I,GAAGwsB,EAAE,GAAGxsB,GAAGssJ,aAAa,WAAWtsJ,EAAEqsJ,cACxf,YAAYrsJ,EAAE+O,MAAuDw9I,CAAGvsJ,IAAI,SAASwsJ,GAAGxsJ,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAI+O,EAAE/O,EAAEqsJ,cAAc,IAAIt9I,EAAE,OAAM,EAAG,IAAIy5B,EAAEz5B,EAAEorI,WAAe3tH,EAAE,GAAqD,OAAlDxsB,IAAIwsB,EAAE0/H,GAAGlsJ,GAAGA,EAAEu2E,QAAQ,OAAO,QAAQv2E,EAAEhF,QAAOgF,EAAEwsB,KAAagc,IAAGz5B,EAAEwqI,SAASv5I,IAAG,GAAO,SAASysJ,GAAGzsJ,EAAE+O,GAAG,IAAIy5B,EAAEz5B,EAAEwnE,QAAQ,OAAOr3E,EAAE,GAAG6P,EAAE,CAAC29I,oBAAe,EAAO1kJ,kBAAa,EAAOhN,WAAM,EAAOu7E,QAAQ,MAAM/tC,EAAEA,EAAExoC,EAAE2sJ,cAAcC,iBACzY,SAASC,GAAG7sJ,EAAE+O,GAAG,IAAIy5B,EAAE,MAAMz5B,EAAE/G,aAAa,GAAG+G,EAAE/G,aAAawkB,EAAE,MAAMzd,EAAEwnE,QAAQxnE,EAAEwnE,QAAQxnE,EAAE29I,eAAelkH,EAAEyjH,GAAG,MAAMl9I,EAAE/T,MAAM+T,EAAE/T,MAAMwtC,GAAGxoC,EAAE2sJ,cAAc,CAACC,eAAepgI,EAAEsgI,aAAatkH,EAAEukH,WAAW,aAAah+I,EAAE3H,MAAM,UAAU2H,EAAE3H,KAAK,MAAM2H,EAAEwnE,QAAQ,MAAMxnE,EAAE/T,OAAO,SAASgyJ,GAAGhtJ,EAAE+O,GAAe,OAAZA,EAAEA,EAAEwnE,UAAiB8zE,EAAGrqJ,EAAE,UAAU+O,GAAE,GACjU,SAASk+I,GAAGjtJ,EAAE+O,GAAGi+I,GAAGhtJ,EAAE+O,GAAG,IAAIy5B,EAAEyjH,GAAGl9I,EAAE/T,OAAOwxB,EAAEzd,EAAE3H,KAAK,GAAG,MAAMohC,EAAK,WAAWhc,GAAM,IAAIgc,GAAG,KAAKxoC,EAAEhF,OAAOgF,EAAEhF,OAAOwtC,KAAExoC,EAAEhF,MAAM,GAAGwtC,GAAOxoC,EAAEhF,QAAQ,GAAGwtC,IAAIxoC,EAAEhF,MAAM,GAAGwtC,QAAQ,GAAG,WAAWhc,GAAG,UAAUA,EAA8B,YAA3BxsB,EAAEyqJ,gBAAgB,SAAgB17I,EAAElM,eAAe,SAASqqJ,GAAGltJ,EAAE+O,EAAE3H,KAAKohC,GAAGz5B,EAAElM,eAAe,iBAAiBqqJ,GAAGltJ,EAAE+O,EAAE3H,KAAK6kJ,GAAGl9I,EAAE/G,eAAe,MAAM+G,EAAEwnE,SAAS,MAAMxnE,EAAE29I,iBAAiB1sJ,EAAE0sJ,iBAAiB39I,EAAE29I,gBACnZ,SAASS,GAAGntJ,EAAE+O,EAAEy5B,GAAG,GAAGz5B,EAAElM,eAAe,UAAUkM,EAAElM,eAAe,gBAAgB,CAAC,IAAI2pB,EAAEzd,EAAE3H,KAAK,KAAK,WAAWolB,GAAG,UAAUA,QAAG,IAASzd,EAAE/T,OAAO,OAAO+T,EAAE/T,OAAO,OAAO+T,EAAE,GAAG/O,EAAE2sJ,cAAcG,aAAatkH,GAAGz5B,IAAI/O,EAAEhF,QAAQgF,EAAEhF,MAAM+T,GAAG/O,EAAEgI,aAAa+G,EAAW,MAATy5B,EAAExoC,EAAET,QAAcS,EAAET,KAAK,IAAIS,EAAE0sJ,iBAAiB1sJ,EAAE2sJ,cAAcC,eAAe,KAAKpkH,IAAIxoC,EAAET,KAAKipC,GACvV,SAAS0kH,GAAGltJ,EAAE+O,EAAEy5B,GAAM,WAAWz5B,GAAG/O,EAAEotJ,cAAcld,gBAAgBlwI,IAAE,MAAMwoC,EAAExoC,EAAEgI,aAAa,GAAGhI,EAAE2sJ,cAAcG,aAAa9sJ,EAAEgI,eAAe,GAAGwgC,IAAIxoC,EAAEgI,aAAa,GAAGwgC,IAAwF,SAAS6kH,GAAGrtJ,EAAE+O,GAA6D,OAA1D/O,EAAEd,EAAE,CAACS,cAAS,GAAQoP,IAAMA,EAAlI,SAAY/O,GAAG,IAAI+O,EAAE,GAAuD,OAApDqnH,EAAGyvB,SAAStpJ,QAAQyD,GAAE,SAASA,GAAG,MAAMA,IAAI+O,GAAG/O,MAAY+O,EAAiDu+I,CAAGv+I,EAAEpP,aAAUK,EAAEL,SAASoP,GAAS/O,EACjV,SAASutJ,GAAGvtJ,EAAE+O,EAAEy5B,EAAEhc,GAAe,GAAZxsB,EAAEA,EAAEwR,QAAWzC,EAAE,CAACA,EAAE,GAAG,IAAI,IAAIrM,EAAE,EAAEA,EAAE8lC,EAAEnsC,OAAOqG,IAAIqM,EAAE,IAAIy5B,EAAE9lC,KAAI,EAAG,IAAI8lC,EAAE,EAAEA,EAAExoC,EAAE3D,OAAOmsC,IAAI9lC,EAAEqM,EAAElM,eAAe,IAAI7C,EAAEwoC,GAAGxtC,OAAOgF,EAAEwoC,GAAGkmF,WAAWhsH,IAAI1C,EAAEwoC,GAAGkmF,SAAShsH,GAAGA,GAAG8pB,IAAIxsB,EAAEwoC,GAAGglH,iBAAgB,OAAQ,CAAmB,IAAlBhlH,EAAE,GAAGyjH,GAAGzjH,GAAGz5B,EAAE,KAASrM,EAAE,EAAEA,EAAE1C,EAAE3D,OAAOqG,IAAI,CAAC,GAAG1C,EAAE0C,GAAG1H,QAAQwtC,EAAiD,OAA9CxoC,EAAE0C,GAAGgsH,UAAS,OAAGliG,IAAIxsB,EAAE0C,GAAG8qJ,iBAAgB,IAAW,OAAOz+I,GAAG/O,EAAE0C,GAAGqpI,WAAWh9H,EAAE/O,EAAE0C,IAAI,OAAOqM,IAAIA,EAAE2/G,UAAS,IACpY,SAAS++B,GAAGztJ,EAAE+O,GAAG,GAAG,MAAMA,EAAElH,wBAAwB,MAAM1H,MAAM0zD,EAAE,KAAK,OAAO30D,EAAE,GAAG6P,EAAE,CAAC/T,WAAM,EAAOgN,kBAAa,EAAOrI,SAAS,GAAGK,EAAE2sJ,cAAcG,eAAe,SAASY,GAAG1tJ,EAAE+O,GAAG,IAAIy5B,EAAEz5B,EAAE/T,MAAM,GAAG,MAAMwtC,EAAE,CAA+B,GAA9BA,EAAEz5B,EAAEpP,SAASoP,EAAEA,EAAE/G,aAAgB,MAAMwgC,EAAE,CAAC,GAAG,MAAMz5B,EAAE,MAAM5O,MAAM0zD,EAAE,KAAK,GAAGt2D,MAAMC,QAAQgrC,GAAG,CAAC,KAAK,GAAGA,EAAEnsC,QAAQ,MAAM8D,MAAM0zD,EAAE,KAAKrrB,EAAEA,EAAE,GAAGz5B,EAAEy5B,EAAE,MAAMz5B,IAAIA,EAAE,IAAIy5B,EAAEz5B,EAAE/O,EAAE2sJ,cAAc,CAACG,aAAab,GAAGzjH,IAC/Y,SAASmlH,GAAG3tJ,EAAE+O,GAAG,IAAIy5B,EAAEyjH,GAAGl9I,EAAE/T,OAAOwxB,EAAEy/H,GAAGl9I,EAAE/G,cAAc,MAAMwgC,KAAIA,EAAE,GAAGA,KAAMxoC,EAAEhF,QAAQgF,EAAEhF,MAAMwtC,GAAG,MAAMz5B,EAAE/G,cAAchI,EAAEgI,eAAewgC,IAAIxoC,EAAEgI,aAAawgC,IAAI,MAAMhc,IAAIxsB,EAAEgI,aAAa,GAAGwkB,GAAG,SAASohI,GAAG5tJ,GAAG,IAAI+O,EAAE/O,EAAE6tJ,YAAY9+I,IAAI/O,EAAE2sJ,cAAcG,cAAc,KAAK/9I,GAAG,OAAOA,IAAI/O,EAAEhF,MAAM+T,GAAG,IAAI++I,GAAS,+BAATA,GAAwF,6BAC9X,SAASC,GAAG/tJ,GAAG,OAAOA,GAAG,IAAK,MAAM,MAAM,6BAA6B,IAAK,OAAO,MAAM,qCAAqC,QAAQ,MAAM,gCAAgC,SAASguJ,GAAGhuJ,EAAE+O,GAAG,OAAO,MAAM/O,GAAG,iCAAiCA,EAAE+tJ,GAAGh/I,GAAG,+BAA+B/O,GAAG,kBAAkB+O,EAAE,+BAA+B/O,EAC3U,IAAIiuJ,GAAGC,GAAG,SAASluJ,GAAG,MAAM,qBAAqBmuJ,OAAOA,MAAMC,wBAAwB,SAASr/I,EAAEy5B,EAAEhc,EAAE9pB,GAAGyrJ,MAAMC,yBAAwB,WAAW,OAAOpuJ,EAAE+O,EAAEy5B,OAAUxoC,EAA5J,EAA+J,SAASA,EAAE+O,GAAG,GAAG/O,EAAEquJ,eAAeP,IAAQ,cAAc9tJ,EAAEA,EAAEsuJ,UAAUv/I,MAAM,CAA2F,KAA1Fk/I,GAAGA,IAAIvuI,SAAS9X,cAAc,QAAU0mJ,UAAU,QAAQv/I,EAAEw/I,UAAUpvJ,WAAW,SAAa4P,EAAEk/I,GAAGO,WAAWxuJ,EAAEwuJ,YAAYxuJ,EAAE41H,YAAY51H,EAAEwuJ,YAAY,KAAKz/I,EAAEy/I,YAAYxuJ,EAAE80H,YAAY/lH,EAAEy/I,gBACjb,SAASC,GAAGzuJ,EAAE+O,GAAG,GAAGA,EAAE,CAAC,IAAIy5B,EAAExoC,EAAEwuJ,WAAW,GAAGhmH,GAAGA,IAAIxoC,EAAE0uJ,WAAW,IAAIlmH,EAAEmmH,SAAwB,YAAdnmH,EAAEomH,UAAU7/I,GAAU/O,EAAE6tJ,YAAY9+I,EAAE,SAAS8/I,GAAG7uJ,EAAE+O,GAAG,IAAIy5B,EAAE,GAAkF,OAA/EA,EAAExoC,EAAEuzB,eAAexkB,EAAEwkB,cAAciV,EAAE,SAASxoC,GAAG,SAAS+O,EAAEy5B,EAAE,MAAMxoC,GAAG,MAAM+O,EAASy5B,EAAE,IAAIsmH,GAAG,CAACC,aAAaF,GAAG,YAAY,gBAAgBG,mBAAmBH,GAAG,YAAY,sBAAsBI,eAAeJ,GAAG,YAAY,kBAAkBK,cAAcL,GAAG,aAAa,kBAAkBM,GAAG,GAAGC,GAAG,GAC1M,SAASC,GAAGrvJ,GAAG,GAAGmvJ,GAAGnvJ,GAAG,OAAOmvJ,GAAGnvJ,GAAG,IAAI8uJ,GAAG9uJ,GAAG,OAAOA,EAAE,IAAYwoC,EAARz5B,EAAE+/I,GAAG9uJ,GAAK,IAAIwoC,KAAKz5B,EAAE,GAAGA,EAAElM,eAAe2lC,IAAIA,KAAK4mH,GAAG,OAAOD,GAAGnvJ,GAAG+O,EAAEy5B,GAAG,OAAOxoC,EAA9XuoJ,IAAK6G,GAAG1vI,SAAS9X,cAAc,OAAO5D,MAAM,mBAAmB5D,gBAAgB0uJ,GAAGC,aAAahmB,iBAAiB+lB,GAAGE,mBAAmBjmB,iBAAiB+lB,GAAGG,eAAelmB,WAAW,oBAAoB3oI,eAAe0uJ,GAAGI,cAAc7mB,YACxO,IAAIinB,GAAGD,GAAG,gBAAgBE,GAAGF,GAAG,sBAAsBG,GAAGH,GAAG,kBAAkBI,GAAGJ,GAAG,iBAAiBlyD,GAAG,sNAAsNzgE,MAAM,KAAKgzH,GAAG,IAAK,oBAAoB3iH,QAAQA,QAAQ60C,KAAK,SAAS+tE,GAAG3vJ,GAAG,IAAI+O,EAAE2gJ,GAAGvzI,IAAInc,GAAuC,YAApC,IAAS+O,IAAIA,EAAE,IAAI6yE,IAAI8tE,GAAGpzI,IAAItc,EAAE+O,IAAWA,EACpc,SAAS6gJ,GAAG5vJ,GAAG,IAAI+O,EAAE/O,EAAEwoC,EAAExoC,EAAE,GAAGA,EAAE6vJ,UAAU,KAAK9gJ,EAAEi9I,QAAQj9I,EAAEA,EAAEi9I,WAAW,CAAChsJ,EAAE+O,EAAE,GAAO,KAAiB,MAArBA,EAAE/O,GAAS8vJ,aAAkBtnH,EAAEz5B,EAAEi9I,QAAQhsJ,EAAE+O,EAAEi9I,aAAahsJ,GAAG,OAAO,IAAI+O,EAAEoxB,IAAIqI,EAAE,KAAK,SAASunH,GAAG/vJ,GAAG,GAAG,KAAKA,EAAEmgC,IAAI,CAAC,IAAIpxB,EAAE/O,EAAEgwJ,cAAsE,GAAxD,OAAOjhJ,IAAkB,QAAd/O,EAAEA,EAAE6vJ,aAAqB9gJ,EAAE/O,EAAEgwJ,gBAAmB,OAAOjhJ,EAAE,OAAOA,EAAEkhJ,WAAW,OAAO,KAAK,SAASC,GAAGlwJ,GAAG,GAAG4vJ,GAAG5vJ,KAAKA,EAAE,MAAMG,MAAM0zD,EAAE,MAEhK,SAASs8F,GAAGnwJ,GAAW,KAARA,EADtN,SAAYA,GAAG,IAAI+O,EAAE/O,EAAE6vJ,UAAU,IAAI9gJ,EAAE,CAAS,GAAG,QAAXA,EAAE6gJ,GAAG5vJ,IAAe,MAAMG,MAAM0zD,EAAE,MAAM,OAAO9kD,IAAI/O,EAAE,KAAKA,EAAE,IAAI,IAAIwoC,EAAExoC,EAAEwsB,EAAEzd,IAAI,CAAC,IAAIrM,EAAE8lC,EAAEwjH,OAAO,GAAG,OAAOtpJ,EAAE,MAAM,IAAImJ,EAAEnJ,EAAEmtJ,UAAU,GAAG,OAAOhkJ,EAAE,CAAY,GAAG,QAAd2gB,EAAE9pB,EAAEspJ,QAAmB,CAACxjH,EAAEhc,EAAE,SAAS,MAAM,GAAG9pB,EAAE6lC,QAAQ18B,EAAE08B,MAAM,CAAC,IAAI18B,EAAEnJ,EAAE6lC,MAAM18B,GAAG,CAAC,GAAGA,IAAI28B,EAAE,OAAO0nH,GAAGxtJ,GAAG1C,EAAE,GAAG6L,IAAI2gB,EAAE,OAAO0jI,GAAGxtJ,GAAGqM,EAAElD,EAAEA,EAAEukJ,QAAQ,MAAMjwJ,MAAM0zD,EAAE,MAAO,GAAGrrB,EAAEwjH,SAASx/H,EAAEw/H,OAAOxjH,EAAE9lC,EAAE8pB,EAAE3gB,MAAM,CAAC,IAAI,IAAIrJ,GAAE,EAAG6tD,EAAE3tD,EAAE6lC,MAAM8nB,GAAG,CAAC,GAAGA,IAAI7nB,EAAE,CAAChmC,GAAE,EAAGgmC,EAAE9lC,EAAE8pB,EAAE3gB,EAAE,MAAM,GAAGwkD,IAAI7jC,EAAE,CAAChqB,GAAE,EAAGgqB,EAAE9pB,EAAE8lC,EAAE38B,EAAE,MAAMwkD,EAAEA,EAAE+/F,QAAQ,IAAI5tJ,EAAE,CAAC,IAAI6tD,EAAExkD,EAAE08B,MAAM8nB,GAAG,CAAC,GAAGA,IAC5f7nB,EAAE,CAAChmC,GAAE,EAAGgmC,EAAE38B,EAAE2gB,EAAE9pB,EAAE,MAAM,GAAG2tD,IAAI7jC,EAAE,CAAChqB,GAAE,EAAGgqB,EAAE3gB,EAAE28B,EAAE9lC,EAAE,MAAM2tD,EAAEA,EAAE+/F,QAAQ,IAAI5tJ,EAAE,MAAMrC,MAAM0zD,EAAE,OAAQ,GAAGrrB,EAAEqnH,YAAYrjI,EAAE,MAAMrsB,MAAM0zD,EAAE,MAAO,GAAG,IAAIrrB,EAAErI,IAAI,MAAMhgC,MAAM0zD,EAAE,MAAM,OAAOrrB,EAAEogH,UAAUz+H,UAAUqe,EAAExoC,EAAE+O,EAAmBshJ,CAAGrwJ,IAAS,OAAO,KAAK,IAAI,IAAI+O,EAAE/O,IAAI,CAAC,GAAG,IAAI+O,EAAEoxB,KAAK,IAAIpxB,EAAEoxB,IAAI,OAAOpxB,EAAE,GAAGA,EAAEw5B,MAAMx5B,EAAEw5B,MAAMyjH,OAAOj9I,EAAEA,EAAEA,EAAEw5B,UAAU,CAAC,GAAGx5B,IAAI/O,EAAE,MAAM,MAAM+O,EAAEqhJ,SAAS,CAAC,IAAIrhJ,EAAEi9I,QAAQj9I,EAAEi9I,SAAShsJ,EAAE,OAAO,KAAK+O,EAAEA,EAAEi9I,OAAOj9I,EAAEqhJ,QAAQpE,OAAOj9I,EAAEi9I,OAAOj9I,EAAEA,EAAEqhJ,SAAS,OAAO,KAC5c,SAASE,GAAGtwJ,EAAE+O,GAAG,GAAG,MAAMA,EAAE,MAAM5O,MAAM0zD,EAAE,KAAK,OAAG,MAAM7zD,EAAS+O,EAAKxR,MAAMC,QAAQwC,GAAOzC,MAAMC,QAAQuR,IAAU/O,EAAEjE,KAAKC,MAAMgE,EAAE+O,GAAG/O,IAAEA,EAAEjE,KAAKgT,GAAU/O,GAASzC,MAAMC,QAAQuR,GAAG,CAAC/O,GAAG0M,OAAOqC,GAAG,CAAC/O,EAAE+O,GAAG,SAASwhJ,GAAGvwJ,EAAE+O,EAAEy5B,GAAGjrC,MAAMC,QAAQwC,GAAGA,EAAEzD,QAAQwS,EAAEy5B,GAAGxoC,GAAG+O,EAAE3P,KAAKopC,EAAExoC,GAAG,IAAIwwJ,GAAG,KAC/Q,SAASC,GAAGzwJ,GAAG,GAAGA,EAAE,CAAC,IAAI+O,EAAE/O,EAAE0wJ,mBAAmBloH,EAAExoC,EAAE2wJ,mBAAmB,GAAGpzJ,MAAMC,QAAQuR,GAAG,IAAI,IAAIyd,EAAE,EAAEA,EAAEzd,EAAE1S,SAAS2D,EAAE4wJ,uBAAuBpkI,IAAIoqG,EAAG52H,EAAE+O,EAAEyd,GAAGgc,EAAEhc,SAASzd,GAAG6nH,EAAG52H,EAAE+O,EAAEy5B,GAAGxoC,EAAE0wJ,mBAAmB,KAAK1wJ,EAAE2wJ,mBAAmB,KAAK3wJ,EAAE6wJ,gBAAgB7wJ,EAAEV,YAAYwxJ,QAAQ9wJ,IAAI,SAAS2jE,GAAG3jE,GAAwC,GAArC,OAAOA,IAAIwwJ,GAAGF,GAAGE,GAAGxwJ,IAAIA,EAAEwwJ,GAAGA,GAAG,KAAQxwJ,EAAE,CAAU,GAATuwJ,GAAGvwJ,EAAEywJ,IAAOD,GAAG,MAAMrwJ,MAAM0zD,EAAE,KAAK,GAAG4jE,EAAG,MAAMz3H,EAAE43H,EAAGH,GAAG,EAAGG,EAAG,KAAK53H,GAC9Y,SAAS+wJ,GAAG/wJ,GAA6F,OAA1FA,EAAEA,EAAE9D,QAAQ8D,EAAEgxJ,YAAY5wJ,QAAS6wJ,0BAA0BjxJ,EAAEA,EAAEixJ,yBAAgC,IAAIjxJ,EAAE2uJ,SAAS3uJ,EAAE21H,WAAW31H,EAAE,SAASkxJ,GAAGlxJ,GAAG,IAAIuoJ,EAAG,OAAM,EAAY,IAAIx5I,GAAb/O,EAAE,KAAKA,KAAa0f,SAAqG,OAA5F3Q,KAAIA,EAAE2Q,SAAS9X,cAAc,QAASitH,aAAa70H,EAAE,WAAW+O,EAAE,oBAAoBA,EAAE/O,IAAW+O,EAAE,IAAIoiJ,GAAG,GAAG,SAASC,GAAGpxJ,GAAGA,EAAEqxJ,aAAa,KAAKrxJ,EAAEsxJ,YAAY,KAAKtxJ,EAAEuxJ,WAAW,KAAKvxJ,EAAEwxJ,UAAUn1J,OAAO,EAAE,GAAG80J,GAAG90J,QAAQ80J,GAAGp1J,KAAKiE,GAC5a,SAASi5C,GAAGj5C,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAG2kI,GAAG90J,OAAO,CAAC,IAAIqG,EAAEyuJ,GAAG9jI,MAA2E,OAArE3qB,EAAE2uJ,aAAarxJ,EAAE0C,EAAE+uJ,iBAAiBjlI,EAAE9pB,EAAE4uJ,YAAYviJ,EAAErM,EAAE6uJ,WAAW/oH,EAAS9lC,EAAE,MAAM,CAAC2uJ,aAAarxJ,EAAEyxJ,iBAAiBjlI,EAAE8kI,YAAYviJ,EAAEwiJ,WAAW/oH,EAAEgpH,UAAU,IAC9M,SAASx9E,GAAGh0E,GAAG,IAAI+O,EAAE/O,EAAEuxJ,WAAW/oH,EAAEz5B,EAAE,EAAE,CAAC,IAAIy5B,EAAE,CAACxoC,EAAEwxJ,UAAUz1J,KAAKysC,GAAG,MAAM,IAAIhc,EAAEgc,EAAE,GAAG,IAAIhc,EAAE2T,IAAI3T,EAAEA,EAAEo8H,UAAU8I,kBAAkB,CAAC,KAAKllI,EAAEw/H,QAAQx/H,EAAEA,EAAEw/H,OAAOx/H,EAAE,IAAIA,EAAE2T,IAAI,KAAK3T,EAAEo8H,UAAU8I,cAAc,IAAIllI,EAAE,MAAc,KAARzd,EAAEy5B,EAAErI,MAAW,IAAIpxB,GAAG/O,EAAEwxJ,UAAUz1J,KAAKysC,GAAGA,EAAEmpH,GAAGnlI,SAASgc,GAAG,IAAIA,EAAE,EAAEA,EAAExoC,EAAEwxJ,UAAUn1J,OAAOmsC,IAAI,CAACz5B,EAAE/O,EAAEwxJ,UAAUhpH,GAAG,IAAI9lC,EAAEquJ,GAAG/wJ,EAAEsxJ,aAAa9kI,EAAExsB,EAAEqxJ,aAAa,IAAIxlJ,EAAE7L,EAAEsxJ,YAAY9uJ,EAAExC,EAAEyxJ,iBAAiB,IAAIjpH,IAAIhmC,GAAG,IAAI,IAAI,IAAI6tD,EAAE,KAAK7iC,EAAE,EAAEA,EAAEq6H,EAAGxrJ,OAAOmxB,IAAI,CAAC,IAAI2gC,EAAE05F,EAAGr6H,GAAG2gC,IAAIA,EAAEA,EAAE25F,cAAct7H,EAAEzd,EAAElD,EAAEnJ,EAAEF,MAAM6tD,EACpfigG,GAAGjgG,EAAElC,IAAIwV,GAAGtT,IAAI,SAASuhG,GAAG5xJ,EAAE+O,EAAEy5B,GAAG,IAAIA,EAAEpf,IAAIppB,GAAG,CAAC,OAAOA,GAAG,IAAK,SAAS6xJ,GAAG9iJ,EAAE,UAAS,GAAI,MAAM,IAAK,QAAQ,IAAK,OAAO8iJ,GAAG9iJ,EAAE,SAAQ,GAAI8iJ,GAAG9iJ,EAAE,QAAO,GAAIy5B,EAAElsB,IAAI,OAAO,MAAMksB,EAAElsB,IAAI,QAAQ,MAAM,MAAM,IAAK,SAAS,IAAK,QAAQ40I,GAAGlxJ,IAAI6xJ,GAAG9iJ,EAAE/O,GAAE,GAAI,MAAM,IAAK,UAAU,IAAK,SAAS,IAAK,QAAQ,MAAM,SAAS,IAAIm9F,GAAGz0F,QAAQ1I,IAAImhF,GAAEnhF,EAAE+O,GAAGy5B,EAAElsB,IAAItc,EAAE,OACtV,IAAI8xJ,GAAGC,GAAGC,GAAGC,IAAG,EAAGC,GAAG,GAAGC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,IAAI1wE,IAAI2wE,GAAG,IAAI3wE,IAAI4wE,GAAG,GAAGC,GAAG,0QAA0Q/1H,MAAM,KAAKg2H,GAAG,gHAAgHh2H,MAAM,KAC3X,SAASi2H,GAAG3yJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,MAAM,CAACkwJ,UAAU5yJ,EAAEqxJ,aAAatiJ,EAAE0iJ,iBAAmB,GAAFjpH,EAAK8oH,YAAY5uJ,EAAE+9F,UAAUj0E,GAC1M,SAASqmI,GAAG7yJ,EAAE+O,GAAG,OAAO/O,GAAG,IAAK,QAAQ,IAAK,OAAOmyJ,GAAG,KAAK,MAAM,IAAK,YAAY,IAAK,YAAYC,GAAG,KAAK,MAAM,IAAK,YAAY,IAAK,WAAWC,GAAG,KAAK,MAAM,IAAK,cAAc,IAAK,aAAaC,GAAG/oI,OAAOxa,EAAE+jJ,WAAW,MAAM,IAAK,oBAAoB,IAAK,qBAAqBP,GAAGhpI,OAAOxa,EAAE+jJ,YAAY,SAASC,GAAG/yJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,OAAG,OAAO7L,GAAGA,EAAEsxJ,cAAczlJ,GAAS7L,EAAE2yJ,GAAG5jJ,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,OAAOkD,IAAY,QAARA,EAAEikJ,GAAGjkJ,KAAagjJ,GAAGhjJ,IAAI/O,IAAEA,EAAEyxJ,kBAAkBjlI,EAASxsB,GAEhc,SAASizJ,GAAGjzJ,GAAG,IAAI+O,EAAE4iJ,GAAG3xJ,EAAE9D,QAAQ,GAAG,OAAO6S,EAAE,CAAC,IAAIy5B,EAAEonH,GAAG7gJ,GAAG,GAAG,OAAOy5B,EAAE,GAAW,MAARz5B,EAAEy5B,EAAErI,MAAY,GAAW,QAARpxB,EAAEghJ,GAAGvnH,IAAoF,OAAvExoC,EAAE4yJ,UAAU7jJ,OAAEtD,EAAEynJ,yBAAyBlzJ,EAAEmzJ,UAAS,WAAWnB,GAAGxpH,WAAkB,GAAG,IAAIz5B,GAAGy5B,EAAEogH,UAAUwK,QAA8D,YAArDpzJ,EAAE4yJ,UAAU,IAAIpqH,EAAErI,IAAIqI,EAAEogH,UAAU8I,cAAc,MAAa1xJ,EAAE4yJ,UAAU,KAAK,SAASS,GAAGrzJ,GAAG,GAAG,OAAOA,EAAE4yJ,UAAU,OAAM,EAAG,IAAI7jJ,EAAEukJ,GAAGtzJ,EAAEqxJ,aAAarxJ,EAAEyxJ,iBAAiBzxJ,EAAEygG,UAAUzgG,EAAEsxJ,aAAa,GAAG,OAAOviJ,EAAE,CAAC,IAAIy5B,EAAEwqH,GAAGjkJ,GAAiC,OAA9B,OAAOy5B,GAAGupH,GAAGvpH,GAAGxoC,EAAE4yJ,UAAU7jJ,GAAQ,EAAG,OAAM,EAC1e,SAASwkJ,GAAGvzJ,EAAE+O,EAAEy5B,GAAG6qH,GAAGrzJ,IAAIwoC,EAAEjf,OAAOxa,GAAG,SAASykJ,KAAK,IAAIvB,IAAG,EAAG,EAAEC,GAAG71J,QAAQ,CAAC,IAAI2D,EAAEkyJ,GAAG,GAAG,GAAG,OAAOlyJ,EAAE4yJ,UAAU,CAAmB,QAAlB5yJ,EAAEgzJ,GAAGhzJ,EAAE4yJ,aAAqBd,GAAG9xJ,GAAG,MAAM,IAAI+O,EAAEukJ,GAAGtzJ,EAAEqxJ,aAAarxJ,EAAEyxJ,iBAAiBzxJ,EAAEygG,UAAUzgG,EAAEsxJ,aAAa,OAAOviJ,EAAE/O,EAAE4yJ,UAAU7jJ,EAAEmjJ,GAAG//E,QAAQ,OAAOggF,IAAIkB,GAAGlB,MAAMA,GAAG,MAAM,OAAOC,IAAIiB,GAAGjB,MAAMA,GAAG,MAAM,OAAOC,IAAIgB,GAAGhB,MAAMA,GAAG,MAAMC,GAAG/1J,QAAQg3J,IAAIhB,GAAGh2J,QAAQg3J,IAAI,SAASE,GAAGzzJ,EAAE+O,GAAG/O,EAAE4yJ,YAAY7jJ,IAAI/O,EAAE4yJ,UAAU,KAAKX,KAAKA,IAAG,EAAGxmJ,EAAEioJ,0BAA0BjoJ,EAAEkoJ,wBAAwBH,MACze,SAASI,GAAG5zJ,GAAG,SAAS+O,EAAEA,GAAG,OAAO0kJ,GAAG1kJ,EAAE/O,GAAG,GAAG,EAAEkyJ,GAAG71J,OAAO,CAACo3J,GAAGvB,GAAG,GAAGlyJ,GAAG,IAAI,IAAIwoC,EAAE,EAAEA,EAAE0pH,GAAG71J,OAAOmsC,IAAI,CAAC,IAAIhc,EAAE0lI,GAAG1pH,GAAGhc,EAAEomI,YAAY5yJ,IAAIwsB,EAAEomI,UAAU,OAA+F,IAAxF,OAAOT,IAAIsB,GAAGtB,GAAGnyJ,GAAG,OAAOoyJ,IAAIqB,GAAGrB,GAAGpyJ,GAAG,OAAOqyJ,IAAIoB,GAAGpB,GAAGryJ,GAAGsyJ,GAAG/1J,QAAQwS,GAAGwjJ,GAAGh2J,QAAQwS,GAAOy5B,EAAE,EAAEA,EAAEgqH,GAAGn2J,OAAOmsC,KAAIhc,EAAEgmI,GAAGhqH,IAAKoqH,YAAY5yJ,IAAIwsB,EAAEomI,UAAU,MAAM,KAAK,EAAEJ,GAAGn2J,QAAiB,QAARmsC,EAAEgqH,GAAG,IAAYI,WAAYK,GAAGzqH,GAAG,OAAOA,EAAEoqH,WAAWJ,GAAGrgF,QAC/X,IAAI0hF,GAAG,GAAGC,GAAG,IAAIlyE,IAAImyE,GAAG,IAAInyE,IAAIoyE,GAAG,CAAC,QAAQ,QAAQ1E,GAAG,eAAeC,GAAG,qBAAqBC,GAAG,iBAAiB,UAAU,UAAU,iBAAiB,iBAAiB,iBAAiB,iBAAiB,UAAU,UAAU,YAAY,YAAY,QAAQ,QAAQ,QAAQ,QAAQ,oBAAoB,oBAAoB,OAAO,OAAO,aAAa,aAAa,iBAAiB,iBAAiB,YAAY,YAAY,qBAAqB,qBAAqB,UAAU,UAAU,WAAW,WAAW,UACpf,UAAU,UAAU,UAAU,UAAU,UAAU,aAAa,aAAaC,GAAG,gBAAgB,UAAU,WAAW,SAAShgJ,GAAGzP,EAAE+O,GAAG,IAAI,IAAIy5B,EAAE,EAAEA,EAAExoC,EAAE3D,OAAOmsC,GAAG,EAAE,CAAC,IAAIhc,EAAExsB,EAAEwoC,GAAG9lC,EAAE1C,EAAEwoC,EAAE,GAAG38B,EAAE,MAAMnJ,EAAE,GAAG87G,cAAc97G,EAAErD,MAAM,IAAIwM,EAAE,CAACo8I,wBAAwB,CAACgM,QAAQpoJ,EAAEqoJ,SAASroJ,EAAE,WAAW1K,aAAa,CAACqrB,GAAG2nI,cAAcplJ,GAAGglJ,GAAGz3I,IAAIkQ,EAAEzd,GAAG+kJ,GAAGx3I,IAAIkQ,EAAE3gB,GAAGgoJ,GAAGnxJ,GAAGmJ,GACzV4D,GAAG,6iBAA6iBitB,MAAM,KAAK,GAC3jBjtB,GAAG,oRAAoRitB,MAAM,KAAK,GAAGjtB,GAAGukJ,GAAG,GAAG,IAAI,IAAItkJ,GAAG,qFAAqFgtB,MAAM,KAAK03H,GAAG,EAAEA,GAAG1kJ,GAAGrT,OAAO+3J,KAAKL,GAAGz3I,IAAI5M,GAAG0kJ,IAAI,GAC9b,IAAI1pF,GAAGj/D,EAAE4oJ,8BAA8BC,GAAG7oJ,EAAEynJ,yBAAyBqB,IAAG,EAAG,SAASpzE,GAAEnhF,EAAE+O,GAAG8iJ,GAAG9iJ,EAAE/O,GAAE,GAAI,SAAS6xJ,GAAG7xJ,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEunI,GAAG53I,IAAIpN,GAAG,YAAO,IAASyd,EAAE,EAAEA,GAAG,KAAK,EAAEA,EAAEgoI,GAAGl5I,KAAK,KAAKvM,EAAE,EAAE/O,GAAG,MAAM,KAAK,EAAEwsB,EAAEioI,GAAGn5I,KAAK,KAAKvM,EAAE,EAAE/O,GAAG,MAAM,QAAQwsB,EAAExmB,GAAGsV,KAAK,KAAKvM,EAAE,EAAE/O,GAAGwoC,EAAExoC,EAAEyzB,iBAAiB1kB,EAAEyd,GAAE,GAAIxsB,EAAEyzB,iBAAiB1kB,EAAEyd,GAAE,GAAI,SAASgoI,GAAGx0J,EAAE+O,EAAEy5B,EAAEhc,GAAG28H,GAAIF,IAAK,IAAIvmJ,EAAEsD,GAAG6F,EAAEs9I,EAAGA,GAAG,EAAG,IAAIH,EAAGtmJ,EAAE1C,EAAE+O,EAAEy5B,EAAEhc,GAAf,SAA2B28H,EAAGt9I,IAAIw9I,KAAM,SAASoL,GAAGz0J,EAAE+O,EAAEy5B,EAAEhc,GAAG8nI,GAAG5pF,GAAG1kE,GAAGsV,KAAK,KAAKtb,EAAE+O,EAAEy5B,EAAEhc,IACpc,SAASxmB,GAAGhG,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAG+nI,GAAG,GAAG,EAAErC,GAAG71J,SAAS,EAAEo2J,GAAG/pJ,QAAQ1I,GAAGA,EAAE2yJ,GAAG,KAAK3yJ,EAAE+O,EAAEy5B,EAAEhc,GAAG0lI,GAAGn2J,KAAKiE,OAAO,CAAC,IAAI0C,EAAE4wJ,GAAGtzJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAG,OAAO9pB,EAAEmwJ,GAAG7yJ,EAAEwsB,QAAQ,IAAI,EAAEimI,GAAG/pJ,QAAQ1I,GAAGA,EAAE2yJ,GAAGjwJ,EAAE1C,EAAE+O,EAAEy5B,EAAEhc,GAAG0lI,GAAGn2J,KAAKiE,QAAQ,IAT9L,SAAYA,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,OAAOqM,GAAG,IAAK,QAAQ,OAAOojJ,GAAGY,GAAGZ,GAAGnyJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,IAAG,EAAG,IAAK,YAAY,OAAO0vJ,GAAGW,GAAGX,GAAGpyJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,IAAG,EAAG,IAAK,YAAY,OAAO2vJ,GAAGU,GAAGV,GAAGryJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,IAAG,EAAG,IAAK,cAAc,IAAImJ,EAAEnJ,EAAEowJ,UAAkD,OAAxCR,GAAGh2I,IAAIzQ,EAAEknJ,GAAGT,GAAGn2I,IAAItQ,IAAI,KAAK7L,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,KAAU,EAAG,IAAK,oBAAoB,OAAOmJ,EAAEnJ,EAAEowJ,UAAUP,GAAGj2I,IAAIzQ,EAAEknJ,GAAGR,GAAGp2I,IAAItQ,IAAI,KAAK7L,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,KAAI,EAAG,OAAM,EAS7JgyJ,CAAGhyJ,EAAE1C,EAAE+O,EAAEy5B,EAAEhc,GAAG,CAACqmI,GAAG7yJ,EAAEwsB,GAAGxsB,EAAEi5C,GAAGj5C,EAAEwsB,EAAE,KAAKzd,GAAG,IAAIu6I,EAAGt1E,GAAGh0E,GAAV,QAAqBoxJ,GAAGpxJ,MAClQ,SAASszJ,GAAGtzJ,EAAE+O,EAAEy5B,EAAEhc,GAAmB,GAAG,QAAXgc,EAAEmpH,GAAVnpH,EAAEuoH,GAAGvkI,KAAuB,CAAC,IAAI9pB,EAAEktJ,GAAGpnH,GAAG,GAAG,OAAO9lC,EAAE8lC,EAAE,SAAS,CAAC,IAAI38B,EAAEnJ,EAAEy9B,IAAI,GAAG,KAAKt0B,EAAE,CAAS,GAAG,QAAX28B,EAAEunH,GAAGrtJ,IAAe,OAAO8lC,EAAEA,EAAE,UAAU,GAAG,IAAI38B,EAAE,CAAC,GAAGnJ,EAAEkmJ,UAAUwK,QAAQ,OAAO,IAAI1wJ,EAAEy9B,IAAIz9B,EAAEkmJ,UAAU8I,cAAc,KAAKlpH,EAAE,UAAU9lC,IAAI8lC,IAAIA,EAAE,OAAOxoC,EAAEi5C,GAAGj5C,EAAEwsB,EAAEgc,EAAEz5B,GAAG,IAAIu6I,EAAGt1E,GAAGh0E,GAAV,QAAqBoxJ,GAAGpxJ,GAAG,OAAO,KACpT,IAAI20J,GAAG,CAACz6B,yBAAwB,EAAGC,mBAAkB,EAAGC,kBAAiB,EAAGC,kBAAiB,EAAGC,SAAQ,EAAGC,cAAa,EAAGC,iBAAgB,EAAGC,aAAY,EAAGC,SAAQ,EAAGC,MAAK,EAAGC,UAAS,EAAGC,cAAa,EAAGC,YAAW,EAAGC,cAAa,EAAGC,WAAU,EAAG45B,UAAS,EAAG35B,SAAQ,EAAGC,YAAW,EAAGC,aAAY,EAAGC,cAAa,EAAGC,YAAW,EAAGC,eAAc,EAAGC,gBAAe,EAAGC,iBAAgB,EAAGr3H,YAAW,EAAG0wJ,WAAU,EAAGh5B,YAAW,EAAGC,SAAQ,EAAG3xF,OAAM,EAAG4xF,SAAQ,EAAGC,SAAQ,EAAGC,QAAO,EAAGC,QAAO,EAAGC,MAAK,EAAGE,aAAY,EAC1fC,cAAa,EAAGC,aAAY,EAAGC,iBAAgB,EAAGC,kBAAiB,EAAGC,kBAAiB,EAAGC,eAAc,EAAGC,aAAY,GAAIk4B,GAAG,CAAC,SAAS,KAAK,MAAM,KAA6H,SAASC,GAAG/0J,EAAE+O,EAAEy5B,GAAG,OAAO,MAAMz5B,GAAG,mBAAmBA,GAAG,KAAKA,EAAE,GAAGy5B,GAAG,kBAAkBz5B,GAAG,IAAIA,GAAG4lJ,GAAG9xJ,eAAe7C,IAAI20J,GAAG30J,IAAI,GAAG+O,GAAG4iD,OAAO5iD,EAAE,KAC9Z,SAASimJ,GAAGh1J,EAAE+O,GAAa,IAAI,IAAIy5B,KAAlBxoC,EAAEA,EAAEgE,MAAmB+K,EAAE,GAAGA,EAAElM,eAAe2lC,GAAG,CAAC,IAAIhc,EAAE,IAAIgc,EAAE9/B,QAAQ,MAAMhG,EAAEqyJ,GAAGvsH,EAAEz5B,EAAEy5B,GAAGhc,GAAG,UAAUgc,IAAIA,EAAE,YAAYhc,EAAExsB,EAAEi1J,YAAYzsH,EAAE9lC,GAAG1C,EAAEwoC,GAAG9lC,GADTzH,OAAOQ,KAAKk5J,IAAIp4J,SAAQ,SAASyD,GAAG80J,GAAGv4J,SAAQ,SAASwS,GAAGA,EAAEA,EAAE/O,EAAEqlE,OAAO,GAAGm5C,cAAcx+G,EAAEyhC,UAAU,GAAGkzH,GAAG5lJ,GAAG4lJ,GAAG30J,SACrG,IAAIk1J,GAAGh2J,EAAE,CAACi2J,UAAS,GAAI,CAACC,MAAK,EAAGtoB,MAAK,EAAG9gI,IAAG,EAAGy7D,KAAI,EAAG4tF,OAAM,EAAGC,IAAG,EAAGC,KAAI,EAAGhwJ,OAAM,EAAGiwJ,QAAO,EAAGC,MAAK,EAAG9uG,MAAK,EAAG+uG,OAAM,EAAGp5J,QAAO,EAAGq5J,OAAM,EAAGC,KAAI,IAClT,SAASC,GAAG71J,EAAE+O,GAAG,GAAGA,EAAE,CAAC,GAAGmmJ,GAAGl1J,KAAK,MAAM+O,EAAEpP,UAAU,MAAMoP,EAAElH,yBAAyB,MAAM1H,MAAM0zD,EAAE,IAAI7zD,EAAE,KAAK,GAAG,MAAM+O,EAAElH,wBAAwB,CAAC,GAAG,MAAMkH,EAAEpP,SAAS,MAAMQ,MAAM0zD,EAAE,KAAK,GAAK,kBAAkB9kD,EAAElH,2BAAyB,WAAWkH,EAAElH,yBAAyB,MAAM1H,MAAM0zD,EAAE,KAAM,GAAG,MAAM9kD,EAAE/K,OAAO,kBAAkB+K,EAAE/K,MAAM,MAAM7D,MAAM0zD,EAAE,GAAG,MAClW,SAASiiG,GAAG91J,EAAE+O,GAAG,IAAI,IAAI/O,EAAE0I,QAAQ,KAAK,MAAM,kBAAkBqG,EAAEgnJ,GAAG,OAAO/1J,GAAG,IAAK,iBAAiB,IAAK,gBAAgB,IAAK,YAAY,IAAK,gBAAgB,IAAK,gBAAgB,IAAK,mBAAmB,IAAK,iBAAiB,IAAK,gBAAgB,OAAM,EAAG,QAAQ,OAAM,GAAI,IAAIg2J,GAAGlI,GAAQ,SAASmI,GAAGj2J,EAAE+O,GAAuD,IAAIy5B,EAAEmnH,GAA1D3vJ,EAAE,IAAIA,EAAE2uJ,UAAU,KAAK3uJ,EAAE2uJ,SAAS3uJ,EAAEA,EAAEotJ,eAA0Br+I,EAAEs5I,EAAGt5I,GAAG,IAAI,IAAIyd,EAAE,EAAEA,EAAEzd,EAAE1S,OAAOmwB,IAAIolI,GAAG7iJ,EAAEyd,GAAGxsB,EAAEwoC,GAAG,SAAS0tH,MAC5a,SAASC,GAAGn2J,GAAwD,GAAG,qBAAxDA,EAAEA,IAAI,qBAAqB0f,SAASA,cAAS,IAAkC,OAAO,KAAK,IAAI,OAAO1f,EAAEkwI,eAAelwI,EAAE6sB,KAAK,MAAM9d,GAAG,OAAO/O,EAAE6sB,MAAM,SAASupI,GAAGp2J,GAAG,KAAKA,GAAGA,EAAEwuJ,YAAYxuJ,EAAEA,EAAEwuJ,WAAW,OAAOxuJ,EAAE,SAASq2J,GAAGr2J,EAAE+O,GAAG,IAAwByd,EAApBgc,EAAE4tH,GAAGp2J,GAAO,IAAJA,EAAE,EAAYwoC,GAAG,CAAC,GAAG,IAAIA,EAAEmmH,SAAS,CAA0B,GAAzBniI,EAAExsB,EAAEwoC,EAAEqlH,YAAYxxJ,OAAU2D,GAAG+O,GAAGyd,GAAGzd,EAAE,MAAM,CAAChL,KAAKykC,EAAE6vC,OAAOtpE,EAAE/O,GAAGA,EAAEwsB,EAAExsB,EAAE,CAAC,KAAKwoC,GAAG,CAAC,GAAGA,EAAEysF,YAAY,CAACzsF,EAAEA,EAAEysF,YAAY,MAAMj1H,EAAEwoC,EAAEA,EAAEmtF,WAAWntF,OAAE,EAAOA,EAAE4tH,GAAG5tH,IAC3P,SAAS8tH,KAAK,IAAI,IAAIt2J,EAAEI,OAAO2O,EAAEonJ,KAAKpnJ,aAAa/O,EAAEu2J,mBAAmB,CAAC,IAAI,IAAI/tH,EAAE,kBAAkBz5B,EAAEynJ,cAAc72I,SAASC,KAAK,MAAM4M,GAAGgc,GAAE,EAAG,IAAGA,EAAyB,MAAMz5B,EAAEonJ,IAA/Bn2J,EAAE+O,EAAEynJ,eAAgC92I,UAAU,OAAO3Q,EAC5Y,SAAS0nJ,GAAGz2J,GAAG,IAAI+O,EAAE/O,GAAGA,EAAEmsJ,UAAUnsJ,EAAEmsJ,SAAS54H,cAAc,OAAOxkB,IAAI,UAAUA,IAAI,SAAS/O,EAAEoH,MAAM,WAAWpH,EAAEoH,MAAM,QAAQpH,EAAEoH,MAAM,QAAQpH,EAAEoH,MAAM,aAAapH,EAAEoH,OAAO,aAAa2H,GAAG,SAAS/O,EAAE02J,iBAAiB,IAAmCC,GAAG,KAAKC,GAAG,KAAK,SAASC,GAAG72J,EAAE+O,GAAG,OAAO/O,GAAG,IAAK,SAAS,IAAK,QAAQ,IAAK,SAAS,IAAK,WAAW,QAAQ+O,EAAEovI,UAAU,OAAM,EAC7X,SAAS2Y,GAAG92J,EAAE+O,GAAG,MAAM,aAAa/O,GAAG,WAAWA,GAAG,aAAaA,GAAG,kBAAkB+O,EAAEpP,UAAU,kBAAkBoP,EAAEpP,UAAU,kBAAkBoP,EAAElH,yBAAyB,OAAOkH,EAAElH,yBAAyB,MAAMkH,EAAElH,wBAAwBC,OAAO,IAAIivJ,GAAG,oBAAoB98I,WAAWA,gBAAW,EAAOwnF,GAAG,oBAAoB9gF,aAAaA,kBAAa,EAAO,SAASq2I,GAAGh3J,GAAG,KAAK,MAAMA,EAAEA,EAAEA,EAAEi1H,YAAY,CAAC,IAAIlmH,EAAE/O,EAAE2uJ,SAAS,GAAG,IAAI5/I,GAAG,IAAIA,EAAE,MAAM,OAAO/O,EAClc,SAASi3J,GAAGj3J,GAAGA,EAAEA,EAAEk3J,gBAAgB,IAAI,IAAInoJ,EAAE,EAAE/O,GAAG,CAAC,GAAG,IAAIA,EAAE2uJ,SAAS,CAAC,IAAInmH,EAAExoC,EAAEsX,KAAK,GAFgJ,MAE7IkxB,GAFoK,OAE5JA,GAFoJ,OAE5IA,EAAO,CAAC,GAAG,IAAIz5B,EAAE,OAAO/O,EAAE+O,QAF0G,OAEjGy5B,GAAQz5B,IAAI/O,EAAEA,EAAEk3J,gBAAgB,OAAO,KAAK,IAAIC,GAAGxyJ,KAAKC,SAASzF,SAAS,IAAIE,MAAM,GAAG+3J,GAAG,2BAA2BD,GAAGE,GAAG,wBAAwBF,GAAGG,GAAG,qBAAqBH,GACvT,SAASxF,GAAG3xJ,GAAG,IAAI+O,EAAE/O,EAAEo3J,IAAI,GAAGroJ,EAAE,OAAOA,EAAE,IAAI,IAAIy5B,EAAExoC,EAAE21H,WAAWntF,GAAG,CAAC,GAAGz5B,EAAEy5B,EAAE8uH,KAAK9uH,EAAE4uH,IAAI,CAAe,GAAd5uH,EAAEz5B,EAAE8gJ,UAAa,OAAO9gJ,EAAEw5B,OAAO,OAAOC,GAAG,OAAOA,EAAED,MAAM,IAAIvoC,EAAEi3J,GAAGj3J,GAAG,OAAOA,GAAG,CAAC,GAAGwoC,EAAExoC,EAAEo3J,IAAI,OAAO5uH,EAAExoC,EAAEi3J,GAAGj3J,GAAG,OAAO+O,EAAMy5B,GAAJxoC,EAAEwoC,GAAMmtF,WAAW,OAAO,KAAK,SAASq9B,GAAGhzJ,GAAkB,QAAfA,EAAEA,EAAEo3J,KAAKp3J,EAAEs3J,MAAc,IAAIt3J,EAAEmgC,KAAK,IAAIngC,EAAEmgC,KAAK,KAAKngC,EAAEmgC,KAAK,IAAIngC,EAAEmgC,IAAI,KAAKngC,EAAE,SAASu3J,GAAGv3J,GAAG,GAAG,IAAIA,EAAEmgC,KAAK,IAAIngC,EAAEmgC,IAAI,OAAOngC,EAAE4oJ,UAAU,MAAMzoJ,MAAM0zD,EAAE,KAAM,SAAS2jG,GAAGx3J,GAAG,OAAOA,EAAEq3J,KAAK,KAClb,SAASI,GAAGz3J,GAAG,GAAGA,EAAEA,EAAEgsJ,aAAahsJ,GAAG,IAAIA,EAAEmgC,KAAK,OAAOngC,GAAI,KAC5D,SAAS03J,GAAG13J,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE4oJ,UAAU,IAAIpgH,EAAE,OAAO,KAAK,IAAIhc,EAAE+pG,EAAG/tF,GAAG,IAAIhc,EAAE,OAAO,KAAKgc,EAAEhc,EAAEzd,GAAG/O,EAAE,OAAO+O,GAAG,IAAK,UAAU,IAAK,iBAAiB,IAAK,gBAAgB,IAAK,uBAAuB,IAAK,cAAc,IAAK,qBAAqB,IAAK,cAAc,IAAK,qBAAqB,IAAK,YAAY,IAAK,mBAAmB,IAAK,gBAAgByd,GAAGA,EAAEu/G,YAAqBv/G,IAAI,YAAbxsB,EAAEA,EAAEoH,OAAuB,UAAUpH,GAAG,WAAWA,GAAG,aAAaA,IAAIA,GAAGwsB,EAAE,MAAMxsB,EAAE,QAAQA,GAAE,EAAG,GAAGA,EAAE,OAAO,KAAK,GAAGwoC,GAAG,oBAAoBA,EAAE,MAAMroC,MAAM0zD,EAAE,IACjgB9kD,SAASy5B,IAAI,OAAOA,EAAE,SAASmvH,GAAG33J,EAAE+O,EAAEy5B,IAAMz5B,EAAE2oJ,GAAG13J,EAAEwoC,EAAEovH,eAAe3P,wBAAwBl5I,OAAIy5B,EAAEkoH,mBAAmBJ,GAAG9nH,EAAEkoH,mBAAmB3hJ,GAAGy5B,EAAEmoH,mBAAmBL,GAAG9nH,EAAEmoH,mBAAmB3wJ,IAAG,SAAS63J,GAAG73J,GAAG,GAAGA,GAAGA,EAAE43J,eAAe3P,wBAAwB,CAAC,IAAI,IAAIl5I,EAAE/O,EAAE83J,YAAYtvH,EAAE,GAAGz5B,GAAGy5B,EAAEzsC,KAAKgT,GAAGA,EAAE0oJ,GAAG1oJ,GAAG,IAAIA,EAAEy5B,EAAEnsC,OAAO,EAAE0S,KAAK4oJ,GAAGnvH,EAAEz5B,GAAG,WAAW/O,GAAG,IAAI+O,EAAE,EAAEA,EAAEy5B,EAAEnsC,OAAO0S,IAAI4oJ,GAAGnvH,EAAEz5B,GAAG,UAAU/O,IACtY,SAAS+3J,GAAG/3J,EAAE+O,EAAEy5B,GAAGxoC,GAAGwoC,GAAGA,EAAEovH,eAAezP,mBAAmBp5I,EAAE2oJ,GAAG13J,EAAEwoC,EAAEovH,eAAezP,qBAAqB3/G,EAAEkoH,mBAAmBJ,GAAG9nH,EAAEkoH,mBAAmB3hJ,GAAGy5B,EAAEmoH,mBAAmBL,GAAG9nH,EAAEmoH,mBAAmB3wJ,IAAI,SAASg4J,GAAGh4J,GAAGA,GAAGA,EAAE43J,eAAezP,kBAAkB4P,GAAG/3J,EAAE83J,YAAY,KAAK93J,GAAG,SAASi4J,GAAGj4J,GAAGuwJ,GAAGvwJ,EAAE63J,IAAI,IAAIK,GAAG,KAAKC,GAAG,KAAKC,GAAG,KACxU,SAASC,KAAK,GAAGD,GAAG,OAAOA,GAAG,IAAIp4J,EAAkBwsB,EAAhBzd,EAAEopJ,GAAG3vH,EAAEz5B,EAAE1S,OAASqG,EAAE,UAAUw1J,GAAGA,GAAGl9J,MAAMk9J,GAAGrK,YAAYhiJ,EAAEnJ,EAAErG,OAAO,IAAI2D,EAAE,EAAEA,EAAEwoC,GAAGz5B,EAAE/O,KAAK0C,EAAE1C,GAAGA,KAAK,IAAIwC,EAAEgmC,EAAExoC,EAAE,IAAIwsB,EAAE,EAAEA,GAAGhqB,GAAGuM,EAAEy5B,EAAEhc,KAAK9pB,EAAEmJ,EAAE2gB,GAAGA,KAAK,OAAO4rI,GAAG11J,EAAErD,MAAMW,EAAE,EAAEwsB,EAAE,EAAEA,OAAE,GAAQ,SAAS8rI,KAAK,OAAM,EAAG,SAASC,KAAK,OAAM,EAClQ,SAASliC,GAAEr2H,EAAE+O,EAAEy5B,EAAEhc,GAA4F,IAAI,IAAI9pB,KAAjGJ,KAAKs1J,eAAe53J,EAAEsC,KAAKw1J,YAAY/oJ,EAAEzM,KAAKgvJ,YAAY9oH,EAAExoC,EAAEsC,KAAKhD,YAAYk5J,UAAyBx4J,EAAE6C,eAAeH,MAAMqM,EAAE/O,EAAE0C,IAAIJ,KAAKI,GAAGqM,EAAEy5B,GAAG,WAAW9lC,EAAEJ,KAAKpG,OAAOswB,EAAElqB,KAAKI,GAAG8lC,EAAE9lC,IAAgI,OAA5HJ,KAAKm2J,oBAAoB,MAAMjwH,EAAEs0G,iBAAiBt0G,EAAEs0G,kBAAiB,IAAKt0G,EAAEkwH,aAAaJ,GAAGC,GAAGj2J,KAAKsuJ,qBAAqB2H,GAAUj2J,KAGrF,SAASq2J,GAAG34J,EAAE+O,EAAEy5B,EAAEhc,GAAG,GAAGlqB,KAAKs2J,UAAUv8J,OAAO,CAAC,IAAIqG,EAAEJ,KAAKs2J,UAAUvrI,MAA2B,OAArB/qB,KAAKlD,KAAKsD,EAAE1C,EAAE+O,EAAEy5B,EAAEhc,GAAU9pB,EAAE,OAAO,IAAIJ,KAAKtC,EAAE+O,EAAEy5B,EAAEhc,GAC7X,SAASqsI,GAAG74J,GAAG,KAAKA,aAAasC,MAAM,MAAMnC,MAAM0zD,EAAE,MAAM7zD,EAAE84J,aAAa,GAAGx2J,KAAKs2J,UAAUv8J,QAAQiG,KAAKs2J,UAAU78J,KAAKiE,GAAG,SAAS+4J,GAAG/4J,GAAGA,EAAE44J,UAAU,GAAG54J,EAAEg5J,UAAUL,GAAG34J,EAAE8wJ,QAAQ+H,GAHlL35J,EAAEm3H,GAAEj5H,UAAU,CAAC8wI,eAAe,WAAW5rI,KAAKw6I,kBAAiB,EAAG,IAAI98I,EAAEsC,KAAKgvJ,YAAYtxJ,IAAIA,EAAEkuI,eAAeluI,EAAEkuI,iBAAiB,mBAAmBluI,EAAE04J,cAAc14J,EAAE04J,aAAY,GAAIp2J,KAAKm2J,mBAAmBH,KAAKlqB,gBAAgB,WAAW,IAAIpuI,EAAEsC,KAAKgvJ,YAAYtxJ,IAAIA,EAAEouI,gBAAgBpuI,EAAEouI,kBAAkB,mBAAmBpuI,EAAEi5J,eAAej5J,EAAEi5J,cAAa,GAAI32J,KAAKsuJ,qBAAqB0H,KAAKY,QAAQ,WAAW52J,KAAKuuJ,aAAayH,IAAIzH,aAAa0H,GAAGO,WAAW,WAAW,IACpd/pJ,EADwd/O,EAAEsC,KAAKhD,YAAYk5J,UACze,IAAIzpJ,KAAK/O,EAAEsC,KAAKyM,GAAG,KAAKzM,KAAKgvJ,YAAYhvJ,KAAKw1J,YAAYx1J,KAAKs1J,eAAe,KAAKt1J,KAAKsuJ,qBAAqBtuJ,KAAKm2J,mBAAmBF,GAAGj2J,KAAKquJ,mBAAmBruJ,KAAKouJ,mBAAmB,QAAQr6B,GAAEmiC,UAAU,CAACpxJ,KAAK,KAAKlL,OAAO,KAAK6/I,cAAc,WAAW,OAAO,MAAMod,WAAW,KAAKC,QAAQ,KAAKC,WAAW,KAAKC,UAAU,SAASt5J,GAAG,OAAOA,EAAEs5J,WAAWvrI,KAAKU,OAAOquH,iBAAiB,KAAKyc,UAAU,MAC9YljC,GAAEmjC,OAAO,SAASx5J,GAAG,SAAS+O,KAAK,SAASy5B,IAAI,OAAOhc,EAAExwB,MAAMsG,KAAKlG,WAAW,IAAIowB,EAAElqB,KAAKyM,EAAE3R,UAAUovB,EAAEpvB,UAAU,IAAIsF,EAAE,IAAIqM,EAAmH,OAAjH7P,EAAEwD,EAAE8lC,EAAEprC,WAAWorC,EAAEprC,UAAUsF,EAAE8lC,EAAEprC,UAAUkC,YAAYkpC,EAAEA,EAAEgwH,UAAUt5J,EAAE,GAAGstB,EAAEgsI,UAAUx4J,GAAGwoC,EAAEgxH,OAAOhtI,EAAEgtI,OAAOT,GAAGvwH,GAAUA,GAAGuwH,GAAG1iC,IACvE,IAAIojC,GAAGpjC,GAAEmjC,OAAO,CAACliJ,KAAK,OAAOoiJ,GAAGrjC,GAAEmjC,OAAO,CAACliJ,KAAK,OAAOqiJ,GAAG,CAAC,EAAE,GAAG,GAAG,IAAIC,GAAGrR,GAAI,qBAAqBnoJ,OAAOy5J,GAAG,KAAKtR,GAAI,iBAAiB7oI,WAAWm6I,GAAGn6I,SAASo6I,cAClV,IAAIC,GAAGxR,GAAI,cAAcnoJ,SAASy5J,GAAGh+I,GAAG0sI,KAAMqR,IAAIC,IAAI,EAAEA,IAAI,IAAIA,IAAIG,GAAGpiH,OAAOo9B,aAAa,IAAIilF,GAAG,CAACC,YAAY,CAACjS,wBAAwB,CAACgM,QAAQ,gBAAgBC,SAAS,wBAAwB/yJ,aAAa,CAAC,iBAAiB,WAAW,YAAY,UAAUg5J,eAAe,CAAClS,wBAAwB,CAACgM,QAAQ,mBAAmBC,SAAS,2BAA2B/yJ,aAAa,uDAAuDu7B,MAAM,MAAM09H,iBAAiB,CAACnS,wBAAwB,CAACgM,QAAQ,qBAC7eC,SAAS,6BAA6B/yJ,aAAa,yDAAyDu7B,MAAM,MAAM29H,kBAAkB,CAACpS,wBAAwB,CAACgM,QAAQ,sBAAsBC,SAAS,8BAA8B/yJ,aAAa,0DAA0Du7B,MAAM,OAAO49H,IAAG,EAChU,SAASC,GAAGv6J,EAAE+O,GAAG,OAAO/O,GAAG,IAAK,QAAQ,OAAO,IAAI25J,GAAGjxJ,QAAQqG,EAAEkuI,SAAS,IAAK,UAAU,OAAO,MAAMluI,EAAEkuI,QAAQ,IAAK,WAAW,IAAK,YAAY,IAAK,OAAO,OAAM,EAAG,QAAQ,OAAM,GAAI,SAASud,GAAGx6J,GAAc,MAAM,kBAAjBA,EAAEA,EAAEy6J,SAAkC,SAASz6J,EAAEA,EAAEsX,KAAK,KAAK,IAAIojJ,IAAG,EAE1Q,IAAIC,GAAG,CAAC5S,WAAWkS,GAAGnS,cAAc,SAAS9nJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAE,GAAGk3J,GAAG7qJ,EAAE,CAAC,OAAO/O,GAAG,IAAK,mBAAmB,IAAI6L,EAAEouJ,GAAGG,iBAAiB,MAAMrrJ,EAAE,IAAK,iBAAiBlD,EAAEouJ,GAAGE,eAAe,MAAMprJ,EAAE,IAAK,oBAAoBlD,EAAEouJ,GAAGI,kBAAkB,MAAMtrJ,EAAElD,OAAE,OAAY6uJ,GAAGH,GAAGv6J,EAAEwoC,KAAK38B,EAAEouJ,GAAGE,gBAAgB,YAAYn6J,GAAG,MAAMwoC,EAAEy0G,UAAUpxI,EAAEouJ,GAAGG,kBAClL,OADoMvuJ,GAAGgQ,IAAI,OAAO2sB,EAAEoyH,SAASF,IAAI7uJ,IAAIouJ,GAAGG,iBAAiBvuJ,IAAIouJ,GAAGE,gBAAgBO,KAAKh4J,EAAE21J,OAAYF,GAAG,UAARD,GAAG1rI,GAAkB0rI,GAAGl9J,MAAMk9J,GAAGrK,YAAY6M,IAAG,IAAK7uJ,EAAE4tJ,GAAGT,UAAUntJ,EACzfkD,EAAEy5B,EAAEhc,GAAG9pB,EAAEmJ,EAAEyL,KAAK5U,EAAW,QAARA,EAAE83J,GAAGhyH,MAAc38B,EAAEyL,KAAK5U,GAAIu1J,GAAGpsJ,GAAGnJ,EAAEmJ,GAAGnJ,EAAE,MAAM1C,EAAE+5J,GAHuM,SAAY/5J,EAAE+O,GAAG,OAAO/O,GAAG,IAAK,iBAAiB,OAAOw6J,GAAGzrJ,GAAG,IAAK,WAAW,OAAG,KAAKA,EAAE8rJ,MAAa,MAAKP,IAAG,EAAUN,IAAG,IAAK,YAAY,OAAOh6J,EAAE+O,EAAEuI,QAAS0iJ,IAAIM,GAAG,KAAKt6J,EAAE,QAAQ,OAAO,MAGhY86J,CAAG96J,EAAEwoC,GAF9E,SAAYxoC,EAAE+O,GAAG,GAAG2rJ,GAAG,MAAM,mBAAmB16J,IAAI45J,IAAIW,GAAGv6J,EAAE+O,IAAI/O,EAAEq4J,KAAKD,GAAGD,GAAGD,GAAG,KAAKwC,IAAG,EAAG16J,GAAG,KAAK,OAAOA,GAAG,IAAK,QAAQ,OAAO,KAAK,IAAK,WAAW,KAAK+O,EAAEgsJ,SAAShsJ,EAAEisJ,QAAQjsJ,EAAEksJ,UAAUlsJ,EAAEgsJ,SAAShsJ,EAAEisJ,OAAO,CAAC,GAAGjsJ,EAAEmsJ,MAAM,EAAEnsJ,EAAEmsJ,KAAK7+J,OAAO,OAAO0S,EAAEmsJ,KAAK,GAAGnsJ,EAAE8rJ,MAAM,OAAOjjH,OAAOo9B,aAAajmE,EAAE8rJ,OAAO,OAAO,KAAK,IAAK,iBAAiB,OAAOh/I,IAAI,OAAO9M,EAAE6rJ,OAAO,KAAK7rJ,EAAEuI,KAAK,QAAQ,OAAO,MAEjT6jJ,CAAGn7J,EAAEwoC,MAAKz5B,EAAE2qJ,GAAGV,UAAUiB,GAAGC,YAAYnrJ,EAAEy5B,EAAEhc,IAAKlV,KAAKtX,EAAEi4J,GAAGlpJ,IAAIA,EAAE,KAAY,OAAOrM,EAAEqM,EAAE,OAAOA,EAAErM,EAAE,CAACA,EAAEqM,KAAKqsJ,GAAG,CAAClyE,OAAM,EAAG79C,MAAK,EAAGgwH,UAAS,EAAG,kBAAiB,EAAGC,OAAM,EAAGC,OAAM,EAAGjyJ,QAAO,EAAGw5B,UAAS,EAAG8mC,OAAM,EAAG2nB,QAAO,EAAGiqE,KAAI,EAAGC,MAAK,EAAGriI,MAAK,EAAG7nB,KAAI,EAAGmqJ,MAAK,GAAI,SAASC,GAAG37J,GAAG,IAAI+O,EAAE/O,GAAGA,EAAEmsJ,UAAUnsJ,EAAEmsJ,SAAS54H,cAAc,MAAM,UAAUxkB,IAAIqsJ,GAAGp7J,EAAEoH,MAAM,aAAa2H,EAC5b,IAAI6sJ,GAAG,CAAC16B,OAAO,CAAC+mB,wBAAwB,CAACgM,QAAQ,WAAWC,SAAS,mBAAmB/yJ,aAAa,8DAA8Du7B,MAAM,OAAO,SAASm/H,GAAG77J,EAAE+O,EAAEy5B,GAA8D,OAA3DxoC,EAAEq2H,GAAE2iC,UAAU4C,GAAG16B,OAAOlhI,EAAE+O,EAAEy5B,IAAKphC,KAAK,SAASyhJ,EAAGrgH,GAAGyvH,GAAGj4J,GAAUA,EAAE,IAAI87J,GAAG,KAAKC,GAAG,KAAK,SAASC,GAAGh8J,GAAG2jE,GAAG3jE,GAAG,SAASi8J,GAAGj8J,GAAe,GAAGwsJ,GAAT+K,GAAGv3J,IAAY,OAAOA,EAAE,SAASk8J,GAAGl8J,EAAE+O,GAAG,GAAG,WAAW/O,EAAE,OAAO+O,EAAE,IAAIotJ,IAAG,EAC9Y,SAASC,KAAKN,KAAKA,GAAGO,YAAY,mBAAmBC,IAAIP,GAAGD,GAAG,MAAM,SAASQ,GAAGt8J,GAAG,GAAG,UAAUA,EAAE+pJ,cAAckS,GAAGF,IAAI,GAAG/7J,EAAE67J,GAAGE,GAAG/7J,EAAE+wJ,GAAG/wJ,IAAImpJ,EAAGxlF,GAAG3jE,OAAO,CAACmpJ,GAAG,EAAG,IAAIJ,EAAGiT,GAAGh8J,GAAV,QAAqBmpJ,GAAG,EAAGE,MAAO,SAASkT,GAAGv8J,EAAE+O,EAAEy5B,GAAG,UAAUxoC,GAAGo8J,KAAUL,GAAGvzH,GAARszH,GAAG/sJ,GAAU2kB,YAAY,mBAAmB4oI,KAAK,SAASt8J,GAAGo8J,KAAK,SAASI,GAAGx8J,GAAG,GAAG,oBAAoBA,GAAG,UAAUA,GAAG,YAAYA,EAAE,OAAOi8J,GAAGF,IAAI,SAASU,GAAGz8J,EAAE+O,GAAG,GAAG,UAAU/O,EAAE,OAAOi8J,GAAGltJ,GAAG,SAAS2tJ,GAAG18J,EAAE+O,GAAG,GAAG,UAAU/O,GAAG,WAAWA,EAAE,OAAOi8J,GAAGltJ,GAD/Ew5I,IAAK4T,GAAGjL,GAAG,YAAYxxI,SAASo6I,cAAc,EAAEp6I,SAASo6I,eAE1c,IAAI6C,GAAG,CAAC5U,WAAW6T,GAAGgB,uBAAuBT,GAAGrU,cAAc,SAAS9nJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAEqM,EAAEwoJ,GAAGxoJ,GAAG3O,OAAOyL,EAAEnJ,EAAEypJ,UAAUzpJ,EAAEypJ,SAAS54H,cAAc,GAAG,WAAW1nB,GAAG,UAAUA,GAAG,SAASnJ,EAAE0E,KAAK,IAAI5E,EAAE05J,QAAQ,GAAGP,GAAGj5J,GAAG,GAAGy5J,GAAG35J,EAAEk6J,OAAO,CAACl6J,EAAEg6J,GAAG,IAAInsG,EAAEksG,QAAQ1wJ,EAAEnJ,EAAEypJ,WAAW,UAAUtgJ,EAAE0nB,gBAAgB,aAAa7wB,EAAE0E,MAAM,UAAU1E,EAAE0E,QAAQ5E,EAAEi6J,IAAI,GAAGj6J,IAAIA,EAAEA,EAAExC,EAAE+O,IAAI,OAAO8sJ,GAAGr5J,EAAEgmC,EAAEhc,GAAG6jC,GAAGA,EAAErwD,EAAE0C,EAAEqM,GAAG,SAAS/O,IAAIA,EAAE0C,EAAEiqJ,gBAAgB3sJ,EAAE+sJ,YAAY,WAAWrqJ,EAAE0E,MAAM8lJ,GAAGxqJ,EAAE,SAASA,EAAE1H,SAAS6hK,GAAGxmC,GAAEmjC,OAAO,CAACsD,KAAK,KAAKrC,OAAO,OACrfsC,GAAG,CAACC,IAAI,SAAS/xB,QAAQ,UAAUgyB,KAAK,UAAUC,MAAM,YAAY,SAASC,GAAGn9J,GAAG,IAAI+O,EAAEzM,KAAKgvJ,YAAY,OAAOviJ,EAAEquJ,iBAAiBruJ,EAAEquJ,iBAAiBp9J,MAAIA,EAAE+8J,GAAG/8J,OAAM+O,EAAE/O,GAAM,SAASq9J,KAAK,OAAOF,GACnM,IAAIG,GAAG,EAAEC,GAAG,EAAEC,IAAG,EAAGC,IAAG,EAAGC,GAAGb,GAAGrD,OAAO,CAACmE,QAAQ,KAAKC,QAAQ,KAAKtiB,QAAQ,KAAK1J,QAAQ,KAAKisB,MAAM,KAAKC,MAAM,KAAK/C,QAAQ,KAAK/d,SAAS,KAAKge,OAAO,KAAKC,QAAQ,KAAKmC,iBAAiBC,GAAGntD,OAAO,KAAK6C,QAAQ,KAAKgrD,cAAc,SAAS/9J,GAAG,OAAOA,EAAE+9J,gBAAgB/9J,EAAEg+J,cAAch+J,EAAEgxJ,WAAWhxJ,EAAEi+J,UAAUj+J,EAAEg+J,cAAcE,UAAU,SAASl+J,GAAG,GAAG,cAAcA,EAAE,OAAOA,EAAEk+J,UAAU,IAAInvJ,EAAEuuJ,GAAgB,OAAbA,GAAGt9J,EAAE29J,QAAeH,GAAG,cAAcx9J,EAAEoH,KAAKpH,EAAE29J,QAAQ5uJ,EAAE,GAAGyuJ,IAAG,EAAG,IAAIW,UAAU,SAASn+J,GAAG,GAAG,cAAcA,EAAE,OAAOA,EAAEm+J,UAC3f,IAAIpvJ,EAAEwuJ,GAAgB,OAAbA,GAAGv9J,EAAE49J,QAAeH,GAAG,cAAcz9J,EAAEoH,KAAKpH,EAAE49J,QAAQ7uJ,EAAE,GAAG0uJ,IAAG,EAAG,MAAMW,GAAGV,GAAGlE,OAAO,CAAC1G,UAAU,KAAKtqJ,MAAM,KAAK/E,OAAO,KAAK46J,SAAS,KAAKC,mBAAmB,KAAKC,MAAM,KAAKC,MAAM,KAAKC,MAAM,KAAKC,YAAY,KAAKj1C,UAAU,OAAOk1C,GAAG,CAACC,WAAW,CAACzW,iBAAiB,eAAehnJ,aAAa,CAAC,WAAW,cAAc09J,WAAW,CAAC1W,iBAAiB,eAAehnJ,aAAa,CAAC,WAAW,cAAc29J,aAAa,CAAC3W,iBAAiB,iBAAiBhnJ,aAAa,CAAC,aAAa,gBAAgB49J,aAAa,CAAC5W,iBAAiB,iBACjhBhnJ,aAAa,CAAC,aAAa,iBAAiB69J,GAAG,CAACjX,WAAW4W,GAAG7W,cAAc,SAAS9nJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,IAAImJ,EAAE,cAAc7L,GAAG,gBAAgBA,EAAEwC,EAAE,aAAaxC,GAAG,eAAeA,EAAE,GAAG6L,GAAG,KAAO,GAAFnJ,KAAQ8lC,EAAEu1H,eAAev1H,EAAEw1H,eAAex7J,IAAIqJ,EAAE,OAAO,MAAKA,EAAE2gB,EAAEpsB,SAASosB,EAAEA,GAAG3gB,EAAE2gB,EAAE4gI,eAAevhJ,EAAEozJ,aAAapzJ,EAAEqzJ,aAAa9+J,OAAUoC,IAAMA,EAAEuM,EAAgD,QAA9CA,GAAGA,EAAEy5B,EAAEu1H,eAAev1H,EAAEy1H,WAAWtM,GAAG5iJ,GAAG,QAA8BA,IAAT6gJ,GAAG7gJ,IAAa,IAAIA,EAAEoxB,KAAK,IAAIpxB,EAAEoxB,OAAIpxB,EAAE,OAAWvM,EAAE,KAAK,GAAGA,IAAIuM,EAAE,OAAO,KAAK,GAAG,aAAa/O,GAAG,cACzeA,EAAG,IAAIwtB,EAAEkwI,GAAOvvG,EAAEwwG,GAAGE,WAAetvI,EAAEovI,GAAGC,WAAe/xJ,EAAE,YAAgB,eAAe7M,GAAG,gBAAgBA,IAAEwtB,EAAE4wI,GAAGjwG,EAAEwwG,GAAGI,aAAaxvI,EAAEovI,GAAGG,aAAajyJ,EAAE,WAAgM,GAAtL7M,EAAE,MAAMwC,EAAEqJ,EAAE0rJ,GAAG/0J,GAAGqJ,EAAE,MAAMkD,EAAElD,EAAE0rJ,GAAGxoJ,IAAGo/C,EAAE3gC,EAAEwrI,UAAU7qG,EAAE3rD,EAAEgmC,EAAEhc,IAAKplB,KAAKyF,EAAE,QAAQshD,EAAEjyD,OAAO8D,EAAEmuD,EAAE4vG,cAAclyJ,GAAE28B,EAAEhb,EAAEwrI,UAAUzpI,EAAExgB,EAAEy5B,EAAEhc,IAAKplB,KAAKyF,EAAE,QAAQ27B,EAAEtsC,OAAO2P,EAAE28B,EAAEu1H,cAAc/9J,EAAM6M,EAAEkC,GAANyd,EAAEhqB,IAAYqK,EAAE7M,EAAE,CAAa,IAARuvB,EAAE1iB,EAAErK,EAAE,EAAMxC,EAAhBwtB,EAAEhB,EAAkBxsB,EAAEA,EAAEy3J,GAAGz3J,GAAGwC,IAAQ,IAAJxC,EAAE,EAAM+O,EAAEwgB,EAAExgB,EAAEA,EAAE0oJ,GAAG1oJ,GAAG/O,IAAI,KAAK,EAAEwC,EAAExC,GAAGwtB,EAAEiqI,GAAGjqI,GAAGhrB,IAAI,KAAK,EAAExC,EAAEwC,GAAG+sB,EAAEkoI,GAAGloI,GAAGvvB,IAAI,KAAKwC,KAAK,CAAC,GAAGgrB,IAAI+B,GAAG/B,IAAI+B,EAAEsgI,UAAU,MAAM7vJ,EAC3fwtB,EAAEiqI,GAAGjqI,GAAG+B,EAAEkoI,GAAGloI,GAAG/B,EAAE,UAAUA,EAAE,KAAS,IAAJ+B,EAAE/B,EAAMA,EAAE,GAAGhB,GAAGA,IAAI+C,IAAqB,QAAjB/sB,EAAEgqB,EAAEqjI,YAAuBrtJ,IAAI+sB,IAAQ/B,EAAEzxB,KAAKywB,GAAGA,EAAEirI,GAAGjrI,GAAG,IAAIA,EAAE,GAAG3f,GAAGA,IAAI0iB,IAAqB,QAAjB/sB,EAAEqK,EAAEgjJ,YAAuBrtJ,IAAI+sB,IAAQ/C,EAAEzwB,KAAK8Q,GAAGA,EAAE4qJ,GAAG5qJ,GAAG,IAAIA,EAAE,EAAEA,EAAE2gB,EAAEnxB,OAAOwQ,IAAIkrJ,GAAGvqI,EAAE3gB,GAAG,UAAUshD,GAAG,IAAIthD,EAAE2f,EAAEnwB,OAAO,EAAEwQ,KAAKkrJ,GAAGvrI,EAAE3f,GAAG,WAAW27B,GAAG,OAAO,KAAO,GAAF9lC,GAAM,CAACyrD,GAAG,CAACA,EAAE3lB,KAAqE,IAAI22H,GAAG,oBAAoBlkK,OAAO86J,GAAG96J,OAAO86J,GAA5G,SAAY/1J,EAAE+O,GAAG,OAAO/O,IAAI+O,IAAI,IAAI/O,GAAG,EAAEA,IAAI,EAAE+O,IAAI/O,IAAIA,GAAG+O,IAAIA,GAAoDqwJ,GAAGnkK,OAAOmC,UAAUyF,eAC7b,SAASw8J,GAAGr/J,EAAE+O,GAAG,GAAGowJ,GAAGn/J,EAAE+O,GAAG,OAAM,EAAG,GAAG,kBAAkB/O,GAAG,OAAOA,GAAG,kBAAkB+O,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAIy5B,EAAEvtC,OAAOQ,KAAKuE,GAAGwsB,EAAEvxB,OAAOQ,KAAKsT,GAAG,GAAGy5B,EAAEnsC,SAASmwB,EAAEnwB,OAAO,OAAM,EAAG,IAAImwB,EAAE,EAAEA,EAAEgc,EAAEnsC,OAAOmwB,IAAI,IAAI4yI,GAAGhgK,KAAK2P,EAAEy5B,EAAEhc,MAAM2yI,GAAGn/J,EAAEwoC,EAAEhc,IAAIzd,EAAEy5B,EAAEhc,KAAK,OAAM,EAAG,OAAM,EACpQ,IAAI8yI,GAAG/W,GAAI,iBAAiB7oI,UAAU,IAAIA,SAASo6I,aAAayF,GAAG,CAAC73J,OAAO,CAACugJ,wBAAwB,CAACgM,QAAQ,WAAWC,SAAS,mBAAmB/yJ,aAAa,iFAAiFu7B,MAAM,OAAO8iI,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,IAAG,EAC1R,SAASC,GAAG5/J,EAAE+O,GAAG,IAAIy5B,EAAEz5B,EAAE3O,SAAS2O,EAAEA,EAAE2Q,SAAS,IAAI3Q,EAAE4/I,SAAS5/I,EAAEA,EAAEq+I,cAAc,OAAGuS,IAAI,MAAMH,IAAIA,KAAKrJ,GAAG3tH,GAAU,MAAU,mBAALA,EAAEg3H,KAAyB/I,GAAGjuH,GAAGA,EAAE,CAAC7hB,MAAM6hB,EAAEq3H,eAAeh1F,IAAIriC,EAAEs3H,cAAuFt3H,EAAE,CAACu3H,YAA3Ev3H,GAAGA,EAAE4kH,eAAe5kH,EAAE4kH,cAAc6R,aAAa7+J,QAAQ4/J,gBAA+BD,WAAWE,aAAaz3H,EAAEy3H,aAAaC,UAAU13H,EAAE03H,UAAUC,YAAY33H,EAAE23H,aAAqBT,IAAIL,GAAGK,GAAGl3H,GAAG,MAAMk3H,GAAGl3H,GAAExoC,EAAEq2H,GAAE2iC,UAAUuG,GAAG73J,OAAO+3J,GAAGz/J,EAAE+O,IAAK3H,KAAK,SAASpH,EAAE9D,OAAOsjK,GAAGvH,GAAGj4J,GAAGA,IAC1d,IAAIogK,GAAG,CAACrY,WAAWwX,GAAGzX,cAAc,SAAS9nJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAmE,KAAKA,IAArEnJ,EAAEmJ,IAAI2gB,EAAEpsB,SAASosB,EAAEA,EAAE9M,SAAS,IAAI8M,EAAEmiI,SAASniI,EAAEA,EAAE4gI,iBAA0B,CAACptJ,EAAE,CAAC0C,EAAEitJ,GAAGjtJ,GAAGmJ,EAAEw8I,EAAG9K,SAAS,IAAI,IAAI/6I,EAAE,EAAEA,EAAEqJ,EAAExP,OAAOmG,IAAI,IAAIE,EAAE0mB,IAAIvd,EAAErJ,IAAI,CAACE,GAAE,EAAG,MAAM1C,EAAE0C,GAAE,EAAGmJ,GAAGnJ,EAAE,GAAGmJ,EAAE,OAAO,KAAsB,OAAjBnJ,EAAEqM,EAAEwoJ,GAAGxoJ,GAAG3O,OAAcJ,GAAG,IAAK,SAAW27J,GAAGj5J,IAAI,SAASA,EAAEg0J,mBAAgB8I,GAAG98J,EAAE+8J,GAAG1wJ,EAAE2wJ,GAAG,MAAK,MAAM,IAAK,OAAOA,GAAGD,GAAGD,GAAG,KAAK,MAAM,IAAK,YAAYG,IAAG,EAAG,MAAM,IAAK,cAAc,IAAK,UAAU,IAAK,UAAU,OAAOA,IAAG,EAAGC,GAAGp3H,EAAEhc,GAAG,IAAK,kBAAkB,GAAG8yI,GAAG,MACxf,IAAK,UAAU,IAAK,QAAQ,OAAOM,GAAGp3H,EAAEhc,GAAG,OAAO,OAAO6zI,GAAGhqC,GAAEmjC,OAAO,CAAC8G,cAAc,KAAKC,YAAY,KAAKC,cAAc,OAAOC,GAAGpqC,GAAEmjC,OAAO,CAACkH,cAAc,SAAS1gK,GAAG,MAAM,kBAAkBA,EAAEA,EAAE0gK,cAActgK,OAAOsgK,iBAAiBC,GAAG9D,GAAGrD,OAAO,CAACuE,cAAc,OAAO,SAAS6C,GAAG5gK,GAAG,IAAI+O,EAAE/O,EAAEi9I,QAA+E,MAAvE,aAAaj9I,EAAgB,KAAbA,EAAEA,EAAE6gK,WAAgB,KAAK9xJ,IAAI/O,EAAE,IAAKA,EAAE+O,EAAE,KAAK/O,IAAIA,EAAE,IAAW,IAAIA,GAAG,KAAKA,EAAEA,EAAE,EACxY,IAAI8gK,GAAG,CAACC,IAAI,SAASC,SAAS,IAAIC,KAAK,YAAYC,GAAG,UAAUC,MAAM,aAAaC,KAAK,YAAYC,IAAI,SAASC,IAAI,KAAKt1B,KAAK,cAAcu1B,KAAK,cAAcC,OAAO,aAAaC,gBAAgB,gBAAgBC,GAAG,CAACC,EAAE,YAAYC,EAAE,MAAMC,GAAG,QAAQC,GAAG,QAAQC,GAAG,QAAQC,GAAG,UAAUC,GAAG,MAAMC,GAAG,QAAQC,GAAG,WAAWC,GAAG,SAASC,GAAG,IAAIC,GAAG,SAASC,GAAG,WAAWC,GAAG,MAAMC,GAAG,OAAOC,GAAG,YAAYC,GAAG,UAAUC,GAAG,aAAaC,GAAG,YAAYC,GAAG,SAASC,GAAG,SAASC,IAAI,KAAKC,IAAI,KAAKC,IAAI,KAAKC,IAAI,KAChfC,IAAI,KAAKC,IAAI,KAAKC,IAAI,KAAKC,IAAI,KAAKC,IAAI,KAAKC,IAAI,MAAMC,IAAI,MAAMC,IAAI,MAAMC,IAAI,UAAUC,IAAI,aAAaC,IAAI,QAAQC,GAAGlH,GAAGrD,OAAO,CAACz+J,IAAI,SAASiF,GAAG,GAAGA,EAAEjF,IAAI,CAAC,IAAIgU,EAAE+xJ,GAAG9gK,EAAEjF,MAAMiF,EAAEjF,IAAI,GAAG,iBAAiBgU,EAAE,OAAOA,EAAE,MAAM,aAAa/O,EAAEoH,KAAc,MAARpH,EAAE4gK,GAAG5gK,IAAU,QAAQ43C,OAAOo9B,aAAah1E,GAAI,YAAYA,EAAEoH,MAAM,UAAUpH,EAAEoH,KAAKs6J,GAAG1hK,EAAEi9I,UAAU,eAAe,IAAIt9H,SAAS,KAAKo7I,QAAQ,KAAK/d,SAAS,KAAKge,OAAO,KAAKC,QAAQ,KAAKntF,OAAO,KAAK8sF,OAAO,KAAKwC,iBAAiBC,GAAGwD,SAAS,SAAS7gK,GAAG,MAAM,aAC9eA,EAAEoH,KAAKw5J,GAAG5gK,GAAG,GAAGi9I,QAAQ,SAASj9I,GAAG,MAAM,YAAYA,EAAEoH,MAAM,UAAUpH,EAAEoH,KAAKpH,EAAEi9I,QAAQ,GAAG4d,MAAM,SAAS76J,GAAG,MAAM,aAAaA,EAAEoH,KAAKw5J,GAAG5gK,GAAG,YAAYA,EAAEoH,MAAM,UAAUpH,EAAEoH,KAAKpH,EAAEi9I,QAAQ,KAAK+mB,GAAGtG,GAAGlE,OAAO,CAACyK,aAAa,OAAOC,GAAGrH,GAAGrD,OAAO,CAACpe,QAAQ,KAAK+oB,cAAc,KAAKxyB,eAAe,KAAKqpB,OAAO,KAAKC,QAAQ,KAAKF,QAAQ,KAAK/d,SAAS,KAAKogB,iBAAiBC,KAAK+G,GAAG/tC,GAAEmjC,OAAO,CAACzP,aAAa,KAAKwW,YAAY,KAAKC,cAAc,OAAO6D,GAAG3G,GAAGlE,OAAO,CAACje,OAAO,SAASv7I,GAAG,MAAM,WAAWA,EAAEA,EAAEu7I,OAAO,gBAClfv7I,GAAGA,EAAEskK,YAAY,GAAG7yB,OAAO,SAASzxI,GAAG,MAAM,WAAWA,EAAEA,EAAEyxI,OAAO,gBAAgBzxI,GAAGA,EAAEukK,YAAY,eAAevkK,GAAGA,EAAEwkK,WAAW,GAAGC,OAAO,KAAKC,UAAU,OAAOC,GAAG,CAAC5c,WAAW8L,GAAG/L,cAAc,SAAS9nJ,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAEoxJ,GAAG33I,IAAInc,GAAG,IAAI0C,EAAE,OAAO,KAAK,OAAO1C,GAAG,IAAK,WAAW,GAAG,IAAI4gK,GAAGp4H,GAAG,OAAO,KAAK,IAAK,UAAU,IAAK,QAAQxoC,EAAE+jK,GAAG,MAAM,IAAK,OAAO,IAAK,QAAQ/jK,EAAE2gK,GAAG,MAAM,IAAK,QAAQ,GAAG,IAAIn4H,EAAE0nE,OAAO,OAAO,KAAK,IAAK,WAAW,IAAK,WAAW,IAAK,YAAY,IAAK,YAAY,IAAK,UAAU,IAAK,WAAW,IAAK,YAAY,IAAK,cAAclwG,EACniB09J,GAAG,MAAM,IAAK,OAAO,IAAK,UAAU,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,WAAW,IAAK,YAAY,IAAK,OAAO19J,EAAEgkK,GAAG,MAAM,IAAK,cAAc,IAAK,WAAW,IAAK,YAAY,IAAK,aAAahkK,EAAEkkK,GAAG,MAAM,KAAK5U,GAAG,KAAKC,GAAG,KAAKC,GAAGxvJ,EAAEqgK,GAAG,MAAM,KAAK5Q,GAAGzvJ,EAAEokK,GAAG,MAAM,IAAK,SAASpkK,EAAE68J,GAAG,MAAM,IAAK,QAAQ78J,EAAEqkK,GAAG,MAAM,IAAK,OAAO,IAAK,MAAM,IAAK,QAAQrkK,EAAEygK,GAAG,MAAM,IAAK,oBAAoB,IAAK,qBAAqB,IAAK,gBAAgB,IAAK,cAAc,IAAK,cAAc,IAAK,aAAa,IAAK,cAAc,IAAK,YAAYzgK,EACzhBo+J,GAAG,MAAM,QAAQp+J,EAAEq2H,GAA+B,OAAN4hC,GAAvBlpJ,EAAE/O,EAAEg5J,UAAUt2J,EAAEqM,EAAEy5B,EAAEhc,IAAgBzd,IAAI,GAAG24I,EAAG,MAAMvnJ,MAAM0zD,EAAE,MAAM6zF,EAAGnqJ,MAAMH,UAAUiC,MAAMD,KAAK,0HAA0Hs9B,MAAM,MAAMkrH,IAAerxB,EAAGihC,GAAGhhC,EAATw8B,GAAet8B,EAAG6gC,GAAGjP,EAAG,CAACsc,kBAAkBD,GAAGE,sBAAsB7F,GAAG8F,kBAAkBnI,GAAGoI,kBAAkB3E,GAAG4E,uBAAuBrK,KAAK,IAAIsK,GAAG,GAAGC,IAAI,EAAE,SAASruC,GAAE72H,GAAG,EAAEklK,KAAKllK,EAAEmqB,QAAQ86I,GAAGC,IAAID,GAAGC,IAAI,KAAKA,MACtd,SAAS75F,GAAErrE,EAAE+O,GAAGm2J,KAAKD,GAAGC,IAAIllK,EAAEmqB,QAAQnqB,EAAEmqB,QAAQpb,EAAE,IAAIo2J,GAAG,GAAG/tC,GAAE,CAACjtG,QAAQg7I,IAAIhuC,GAAE,CAAChtG,SAAQ,GAAIi7I,GAAGD,GAAG,SAASE,GAAGrlK,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAEoH,KAAK0P,aAAa,IAAI0xB,EAAE,OAAO28H,GAAG,IAAI34I,EAAExsB,EAAE4oJ,UAAU,GAAGp8H,GAAGA,EAAE84I,8CAA8Cv2J,EAAE,OAAOyd,EAAE+4I,0CAA0C,IAAS15J,EAALnJ,EAAE,GAAK,IAAImJ,KAAK28B,EAAE9lC,EAAEmJ,GAAGkD,EAAElD,GAAoH,OAAjH2gB,KAAIxsB,EAAEA,EAAE4oJ,WAAY0c,4CAA4Cv2J,EAAE/O,EAAEulK,0CAA0C7iK,GAAUA,EAAE,SAASk1D,GAAE53D,GAAyB,OAAO,QAA7BA,EAAEA,EAAEwlK,yBAAmC,IAASxlK,EAChf,SAASylK,KAAK5uC,GAAEM,IAAGN,GAAEO,IAAG,SAASsuC,GAAG1lK,EAAE+O,EAAEy5B,GAAG,GAAG4uF,GAAEjtG,UAAUg7I,GAAG,MAAMhlK,MAAM0zD,EAAE,MAAMwX,GAAE+rD,GAAEroH,GAAGs8D,GAAE8rD,GAAE3uF,GAAG,SAASm9H,GAAG3lK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAE4oJ,UAAgC,GAAtB5oJ,EAAE+O,EAAEy2J,kBAAqB,oBAAoBh5I,EAAEo5I,gBAAgB,OAAOp9H,EAAwB,IAAI,IAAI9lC,KAA9B8pB,EAAEA,EAAEo5I,kBAAiC,KAAKljK,KAAK1C,GAAG,MAAMG,MAAM0zD,EAAE,IAAI4Z,GAAG1+D,IAAI,UAAUrM,IAAI,OAAOxD,EAAE,GAAGspC,EAAE,GAAGhc,GAAG,SAASq5I,GAAG7lK,GAAyG,OAAtGA,GAAGA,EAAEA,EAAE4oJ,YAAY5oJ,EAAE8lK,2CAA2CX,GAAGC,GAAGhuC,GAAEjtG,QAAQkhD,GAAE+rD,GAAEp3H,GAAGqrE,GAAE8rD,GAAEA,GAAEhtG,UAAe,EACpb,SAAS47I,GAAG/lK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAE4oJ,UAAU,IAAIp8H,EAAE,MAAMrsB,MAAM0zD,EAAE,MAAMrrB,GAAGxoC,EAAE2lK,GAAG3lK,EAAE+O,EAAEq2J,IAAI54I,EAAEs5I,0CAA0C9lK,EAAE62H,GAAEM,IAAGN,GAAEO,IAAG/rD,GAAE+rD,GAAEp3H,IAAI62H,GAAEM,IAAG9rD,GAAE8rD,GAAE3uF,GACxJ,IAAIw9H,GAAGv6J,EAAEynJ,yBAAyB+S,GAAGx6J,EAAEioJ,0BAA0BwS,GAAGz6J,EAAE06J,wBAAwBC,GAAG36J,EAAE46J,sBAAsBC,GAAG76J,EAAE86J,aAAaC,GAAG/6J,EAAEg7J,iCAAiCC,GAAGj7J,EAAEk7J,2BAA2BC,GAAGn7J,EAAE4oJ,8BAA8BwS,GAAGp7J,EAAEkoJ,wBAAwBmT,GAAGr7J,EAAEs7J,qBAAqBC,GAAGv7J,EAAEw7J,sBAAsBC,GAAG,GAAGC,GAAG17J,EAAE27J,qBAAqBC,QAAG,IAASjB,GAAGA,GAAG,aAAakB,GAAG,KAAKC,GAAG,KAAKC,IAAG,EAAGC,GAAGnB,KAAKoB,GAAG,IAAID,GAAGnB,GAAG,WAAW,OAAOA,KAAKmB,IACvc,SAASE,KAAK,OAAOnB,MAAM,KAAKE,GAAG,OAAO,GAAG,KAAKE,GAAG,OAAO,GAAG,KAAKC,GAAG,OAAO,GAAG,KAAKC,GAAG,OAAO,GAAG,KAAKE,GAAG,OAAO,GAAG,QAAQ,MAAM7mK,MAAM0zD,EAAE,OAAQ,SAAS+zG,GAAG5nK,GAAG,OAAOA,GAAG,KAAK,GAAG,OAAO0mK,GAAG,KAAK,GAAG,OAAOE,GAAG,KAAK,GAAG,OAAOC,GAAG,KAAK,GAAG,OAAOC,GAAG,KAAK,GAAG,OAAOE,GAAG,QAAQ,MAAM7mK,MAAM0zD,EAAE,OAAQ,SAASg0G,GAAG7nK,EAAE+O,GAAW,OAAR/O,EAAE4nK,GAAG5nK,GAAUgmK,GAAGhmK,EAAE+O,GAAG,SAAS+4J,GAAG9nK,EAAE+O,EAAEy5B,GAAW,OAARxoC,EAAE4nK,GAAG5nK,GAAUimK,GAAGjmK,EAAE+O,EAAEy5B,GAAG,SAASu/H,GAAG/nK,GAA8C,OAA3C,OAAOsnK,IAAIA,GAAG,CAACtnK,GAAGunK,GAAGtB,GAAGS,GAAGsB,KAAKV,GAAGvrK,KAAKiE,GAAUknK,GAAG,SAASe,KAAK,GAAG,OAAOV,GAAG,CAAC,IAAIvnK,EAAEunK,GAAGA,GAAG,KAAKrB,GAAGlmK,GAAGgoK,KAC/e,SAASA,KAAK,IAAIR,IAAI,OAAOF,GAAG,CAACE,IAAG,EAAG,IAAIxnK,EAAE,EAAE,IAAI,IAAI+O,EAAEu4J,GAAGO,GAAG,IAAG,WAAW,KAAK7nK,EAAE+O,EAAE1S,OAAO2D,IAAI,CAAC,IAAIwoC,EAAEz5B,EAAE/O,GAAG,GAAGwoC,EAAEA,GAAE,SAAU,OAAOA,OAAM8+H,GAAG,KAAK,MAAM9+H,GAAG,MAAM,OAAO8+H,KAAKA,GAAGA,GAAGjoK,MAAMW,EAAE,IAAIimK,GAAGS,GAAGuB,IAAIz/H,EAA3J,QAAsKg/H,IAAG,IAAK,SAASU,GAAGloK,EAAE+O,EAAEy5B,GAAS,OAAO,YAAsC,IAAxB,WAAWxoC,EAAE+O,EAAE,KAA1Cy5B,GAAG,IAA6C,IAAMA,EAAE,SAAS2/H,GAAGnoK,EAAE+O,GAAG,GAAG/O,GAAGA,EAAE0J,aAAyC,IAAI,IAAI8+B,KAAnCz5B,EAAE7P,EAAE,GAAG6P,GAAG/O,EAAEA,EAAE0J,kBAA4B,IAASqF,EAAEy5B,KAAKz5B,EAAEy5B,GAAGxoC,EAAEwoC,IAAI,OAAOz5B,EAAE,IAAIq5J,GAAG,CAACj+I,QAAQ,MAAMk+I,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAK,SAASC,KAAKD,GAAGD,GAAGD,GAAG,KACle,SAASI,GAAGzoK,GAAG,IAAI+O,EAAEq5J,GAAGj+I,QAAQ0sG,GAAEuxC,IAAIpoK,EAAEoH,KAAK0/E,SAASy/D,cAAcx3I,EAAE,SAAS25J,GAAG1oK,EAAE+O,GAAG,KAAK,OAAO/O,GAAG,CAAC,IAAIwoC,EAAExoC,EAAE6vJ,UAAU,GAAG7vJ,EAAE2oK,oBAAoB55J,EAAE/O,EAAE2oK,oBAAoB55J,EAAE,OAAOy5B,GAAGA,EAAEmgI,oBAAoB55J,IAAIy5B,EAAEmgI,oBAAoB55J,OAAQ,MAAG,OAAOy5B,GAAGA,EAAEmgI,oBAAoB55J,GAA+B,MAA7By5B,EAAEmgI,oBAAoB55J,EAAa/O,EAAEA,EAAEgsJ,QAAQ,SAAS4c,GAAG5oK,EAAE+O,GAAGs5J,GAAGroK,EAAEuoK,GAAGD,GAAG,KAAsB,QAAjBtoK,EAAEA,EAAEmB,eAAuB,OAAOnB,EAAE6oK,eAAe7oK,EAAE8oK,gBAAgB/5J,IAAIg6J,IAAG,GAAI/oK,EAAE6oK,aAAa,MAClc,SAASG,GAAGhpK,EAAE+O,GAAG,GAAGw5J,KAAKvoK,IAAG,IAAK+O,GAAG,IAAIA,EAAmG,GAA7F,kBAAkBA,GAAG,aAAaA,IAAEw5J,GAAGvoK,EAAE+O,EAAE,YAAWA,EAAE,CAACmC,QAAQlR,EAAEipK,aAAal6J,EAAExQ,KAAK,MAAS,OAAO+pK,GAAG,CAAC,GAAG,OAAOD,GAAG,MAAMloK,MAAM0zD,EAAE,MAAMy0G,GAAGv5J,EAAEs5J,GAAGlnK,aAAa,CAAC2nK,eAAe,EAAED,aAAa95J,EAAEm6J,WAAW,WAAWZ,GAAGA,GAAG/pK,KAAKwQ,EAAE,OAAO/O,EAAEumJ,cAAc,IAAI4iB,IAAG,EAAG,SAASC,GAAGppK,GAAGA,EAAEqpK,YAAY,CAACC,UAAUtpK,EAAEgwJ,cAAcuZ,UAAU,KAAK/+C,OAAO,CAACg/C,QAAQ,MAAMC,QAAQ,MACzZ,SAASC,GAAG1pK,EAAE+O,GAAG/O,EAAEA,EAAEqpK,YAAYt6J,EAAEs6J,cAAcrpK,IAAI+O,EAAEs6J,YAAY,CAACC,UAAUtpK,EAAEspK,UAAUC,UAAUvpK,EAAEupK,UAAU/+C,OAAOxqH,EAAEwqH,OAAOi/C,QAAQzpK,EAAEypK,UAAU,SAASE,GAAG3pK,EAAE+O,GAAoF,OAAjF/O,EAAE,CAAC8oK,eAAe9oK,EAAE4pK,eAAe76J,EAAEoxB,IAAI,EAAErJ,QAAQ,KAAKhd,SAAS,KAAKvb,KAAK,OAAeA,KAAKyB,EAAE,SAAS6pK,GAAG7pK,EAAE+O,GAAmB,GAAG,QAAnB/O,EAAEA,EAAEqpK,aAAwB,CAAY,IAAI7gI,GAAfxoC,EAAEA,EAAEwqH,QAAeg/C,QAAQ,OAAOhhI,EAAEz5B,EAAExQ,KAAKwQ,GAAGA,EAAExQ,KAAKiqC,EAAEjqC,KAAKiqC,EAAEjqC,KAAKwQ,GAAG/O,EAAEwpK,QAAQz6J,GACpY,SAAS+6J,GAAG9pK,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE6vJ,UAAU,OAAOrnH,GAAGkhI,GAAGlhI,EAAExoC,GAAiC,QAAdwoC,GAAhBxoC,EAAEA,EAAEqpK,aAAgBE,YAAoBvpK,EAAEupK,UAAUx6J,EAAExQ,KAAKwQ,EAAEA,EAAExQ,KAAKwQ,IAAIA,EAAExQ,KAAKiqC,EAAEjqC,KAAKiqC,EAAEjqC,KAAKwQ,GAClJ,SAASg7J,GAAG/pK,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAE1C,EAAEqpK,YAAYF,IAAG,EAAG,IAAIt9J,EAAEnJ,EAAE6mK,UAAU/mK,EAAEE,EAAE8nH,OAAOg/C,QAAQ,GAAG,OAAOhnK,EAAE,CAAC,GAAG,OAAOqJ,EAAE,CAAC,IAAIwkD,EAAExkD,EAAEtN,KAAKsN,EAAEtN,KAAKiE,EAAEjE,KAAKiE,EAAEjE,KAAK8xD,EAAExkD,EAAErJ,EAAEE,EAAE8nH,OAAOg/C,QAAQ,KAAmB,QAAdn5G,EAAErwD,EAAE6vJ,aAAqC,QAAhBx/F,EAAEA,EAAEg5G,eAAuBh5G,EAAEk5G,UAAU/mK,IAAI,GAAG,OAAOqJ,EAAE,CAACwkD,EAAExkD,EAAEtN,KAAK,IAAIivB,EAAE9qB,EAAE4mK,UAAUn7G,EAAE,EAAE5+B,EAAE,KAAK1iB,EAAE,KAAKwgC,EAAE,KAAK,GAAG,OAAOgjB,EAAW,IAAR,IAAIgG,EAAEhG,IAAI,CAAoB,IAAnB7tD,EAAE6zD,EAAEyyG,gBAAoBt8I,EAAE,CAAC,IAAI8qG,EAAG,CAACwxC,eAAezyG,EAAEyyG,eAAec,eAAevzG,EAAEuzG,eAAezpI,IAAIk2B,EAAEl2B,IAAIrJ,QAAQu/B,EAAEv/B,QAAQhd,SAASu8C,EAAEv8C,SAASvb,KAAK,MAAM,OAAO8uC,GAAGxgC,EAAEwgC,EACnfiqF,EAAG/nG,EAAE/B,GAAG6f,EAAEA,EAAE9uC,KAAK+4H,EAAG90H,EAAE2rD,IAAIA,EAAE3rD,OAAO,CAAC,OAAO6qC,IAAIA,EAAEA,EAAE9uC,KAAK,CAACuqK,eAAe,WAAWc,eAAevzG,EAAEuzG,eAAezpI,IAAIk2B,EAAEl2B,IAAIrJ,QAAQu/B,EAAEv/B,QAAQhd,SAASu8C,EAAEv8C,SAASvb,KAAK,OAAOyrK,GAAGxnK,EAAE6zD,EAAEuzG,gBAAgB5pK,EAAE,CAAC,IAAIi3H,EAAEj3H,EAAE2M,EAAE0pD,EAAW,OAAT7zD,EAAEuM,EAAEuoH,EAAG9uF,EAAS77B,EAAEwzB,KAAK,KAAK,EAAc,GAAG,oBAAf82F,EAAEtqH,EAAEmqB,SAAiC,CAACtJ,EAAEypG,EAAE73H,KAAKk4H,EAAG9pG,EAAEhrB,GAAG,MAAMxC,EAAEwtB,EAAEypG,EAAE,MAAMj3H,EAAE,KAAK,EAAEi3H,EAAE64B,WAAuB,KAAb74B,EAAE64B,UAAgB,GAAG,KAAK,EAAuD,GAAG,QAA5CttJ,EAAE,oBAAdy0H,EAAEtqH,EAAEmqB,SAAgCmgG,EAAE73H,KAAKk4H,EAAG9pG,EAAEhrB,GAAGy0H,SAAe,IAASz0H,EAAE,MAAMxC,EAAEwtB,EAAEtuB,EAAE,GAAGsuB,EAAEhrB,GAAG,MAAMxC,EAAE,KAAK,EAAEmpK,IAAG,GAAI,OAAO9yG,EAAEv8C,WAC5e9Z,EAAE8vJ,WAAW,GAAe,QAAZttJ,EAAEE,EAAE+mK,SAAiB/mK,EAAE+mK,QAAQ,CAACpzG,GAAG7zD,EAAEzG,KAAKs6D,IAAa,GAAG,QAAZA,EAAEA,EAAE93D,OAAkB83D,IAAIhG,EAAE,IAAsB,QAAnB7tD,EAAEE,EAAE8nH,OAAOg/C,SAAiB,MAAWnzG,EAAExqD,EAAEtN,KAAKiE,EAAEjE,KAAKiE,EAAEjE,KAAK8xD,EAAE3tD,EAAE6mK,UAAU19J,EAAErJ,EAAEE,EAAE8nH,OAAOg/C,QAAQ,MAAc,OAAOn8H,EAAE9d,EAAE/B,EAAE6f,EAAE9uC,KAAKsO,EAAEnK,EAAE4mK,UAAU/5I,EAAE7sB,EAAE6mK,UAAUl8H,EAAE48H,GAAG97G,GAAGnuD,EAAE8oK,eAAe36G,EAAEnuD,EAAEgwJ,cAAcxiI,GACxS,SAAS08I,GAAGlqK,EAAE+O,EAAEy5B,GAA8B,GAA3BxoC,EAAE+O,EAAE06J,QAAQ16J,EAAE06J,QAAQ,KAAQ,OAAOzpK,EAAE,IAAI+O,EAAE,EAAEA,EAAE/O,EAAE3D,OAAO0S,IAAI,CAAC,IAAIyd,EAAExsB,EAAE+O,GAAGrM,EAAE8pB,EAAE1S,SAAS,GAAG,OAAOpX,EAAE,CAAyB,GAAxB8pB,EAAE1S,SAAS,KAAK0S,EAAE9pB,EAAEA,EAAE8lC,EAAK,oBAAoBhc,EAAE,MAAMrsB,MAAM0zD,EAAE,IAAIrnC,IAAIA,EAAEptB,KAAKsD,KAAK,IAAIynK,GAAG/f,EAAG3E,wBAAwB2kB,IAAI,IAAIh0C,EAAGltH,WAAW27I,KAAK,SAASwlB,GAAGrqK,EAAE+O,EAAEy5B,EAAEhc,GAA8Bgc,EAAE,QAAXA,EAAEA,EAAEhc,EAAtBzd,EAAE/O,EAAEgwJ,sBAAmC,IAASxnH,EAAEz5B,EAAE7P,EAAE,GAAG6P,EAAEy5B,GAAGxoC,EAAEgwJ,cAAcxnH,EAAE,IAAIxoC,EAAE8oK,iBAAiB9oK,EAAEqpK,YAAYC,UAAU9gI,GAC3Z,IAAI8hI,GAAG,CAAC7lB,UAAU,SAASzkJ,GAAG,SAAOA,EAAEA,EAAEuqK,sBAAqB3a,GAAG5vJ,KAAKA,GAAM4kJ,gBAAgB,SAAS5kJ,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEuqK,oBAAoB,IAAI/9I,EAAEg+I,KAAK9nK,EAAEynK,GAAGzkB,UAAqBhjJ,EAAEinK,GAAdn9I,EAAEi+I,GAAGj+I,EAAExsB,EAAE0C,GAAUA,IAAKo0B,QAAQ/nB,OAAE,IAASy5B,GAAG,OAAOA,IAAI9lC,EAAEoX,SAAS0uB,GAAGqhI,GAAG7pK,EAAE0C,GAAGgoK,GAAG1qK,EAAEwsB,IAAIm4H,oBAAoB,SAAS3kJ,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEuqK,oBAAoB,IAAI/9I,EAAEg+I,KAAK9nK,EAAEynK,GAAGzkB,UAAqBhjJ,EAAEinK,GAAdn9I,EAAEi+I,GAAGj+I,EAAExsB,EAAE0C,GAAUA,IAAKy9B,IAAI,EAAEz9B,EAAEo0B,QAAQ/nB,OAAE,IAASy5B,GAAG,OAAOA,IAAI9lC,EAAEoX,SAAS0uB,GAAGqhI,GAAG7pK,EAAE0C,GAAGgoK,GAAG1qK,EAAEwsB,IAAIk4H,mBAAmB,SAAS1kJ,EAAE+O,GAAG/O,EAAEA,EAAEuqK,oBAAoB,IAAI/hI,EAAEgiI,KAAKh+I,EAAE29I,GAAGzkB,UACvel5H,EAAEm9I,GAAdnhI,EAAEiiI,GAAGjiI,EAAExoC,EAAEwsB,GAAUA,IAAK2T,IAAI,OAAE,IAASpxB,GAAG,OAAOA,IAAIyd,EAAE1S,SAAS/K,GAAG86J,GAAG7pK,EAAEwsB,GAAGk+I,GAAG1qK,EAAEwoC,KAAK,SAASmiI,GAAG3qK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,EAAErJ,GAAiB,MAAM,oBAApBxC,EAAEA,EAAE4oJ,WAAsCgiB,sBAAsB5qK,EAAE4qK,sBAAsBp+I,EAAE3gB,EAAErJ,IAAGuM,EAAE3R,YAAW2R,EAAE3R,UAAU6nJ,wBAAsBoa,GAAG72H,EAAEhc,KAAK6yI,GAAG38J,EAAEmJ,IAC7Q,SAASg/J,GAAG7qK,EAAE+O,EAAEy5B,GAAG,IAAIhc,GAAE,EAAG9pB,EAAEyiK,GAAOt5J,EAAEkD,EAAE0I,YAA8W,MAAlW,kBAAkB5L,GAAG,OAAOA,EAAEA,EAAEm9J,GAAGn9J,IAAInJ,EAAEk1D,GAAE7oD,GAAGq2J,GAAGhuC,GAAEjtG,QAAyBte,GAAG2gB,EAAE,QAAtBA,EAAEzd,EAAE+H,oBAA4B,IAAS0V,GAAG64I,GAAGrlK,EAAE0C,GAAGyiK,IAAIp2J,EAAE,IAAIA,EAAEy5B,EAAE38B,GAAG7L,EAAEgwJ,cAAc,OAAOjhJ,EAAEnJ,YAAO,IAASmJ,EAAEnJ,MAAMmJ,EAAEnJ,MAAM,KAAKmJ,EAAE+1I,QAAQwlB,GAAGtqK,EAAE4oJ,UAAU75I,EAAEA,EAAEw7J,oBAAoBvqK,EAAEwsB,KAAIxsB,EAAEA,EAAE4oJ,WAAY0c,4CAA4C5iK,EAAE1C,EAAEulK,0CAA0C15J,GAAUkD,EAC9Z,SAAS+7J,GAAG9qK,EAAE+O,EAAEy5B,EAAEhc,GAAGxsB,EAAE+O,EAAEnJ,MAAM,oBAAoBmJ,EAAEg8J,2BAA2Bh8J,EAAEg8J,0BAA0BviI,EAAEhc,GAAG,oBAAoBzd,EAAEi8J,kCAAkCj8J,EAAEi8J,iCAAiCxiI,EAAEhc,GAAGzd,EAAEnJ,QAAQ5F,GAAGsqK,GAAG3lB,oBAAoB51I,EAAEA,EAAEnJ,MAAM,MAC/P,SAASqlK,GAAGjrK,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAE1C,EAAE4oJ,UAAUlmJ,EAAE3F,MAAMyrC,EAAE9lC,EAAEkD,MAAM5F,EAAEgwJ,cAActtJ,EAAEmiJ,KAAKulB,GAAGhB,GAAGppK,GAAG,IAAI6L,EAAEkD,EAAE0I,YAAY,kBAAkB5L,GAAG,OAAOA,EAAEnJ,EAAEwO,QAAQ83J,GAAGn9J,IAAIA,EAAE+rD,GAAE7oD,GAAGq2J,GAAGhuC,GAAEjtG,QAAQznB,EAAEwO,QAAQm0J,GAAGrlK,EAAE6L,IAAIk+J,GAAG/pK,EAAEwoC,EAAE9lC,EAAE8pB,GAAG9pB,EAAEkD,MAAM5F,EAAEgwJ,cAA2C,oBAA7BnkJ,EAAEkD,EAAEm8J,4BAAiDb,GAAGrqK,EAAE+O,EAAElD,EAAE28B,GAAG9lC,EAAEkD,MAAM5F,EAAEgwJ,eAAe,oBAAoBjhJ,EAAEm8J,0BAA0B,oBAAoBxoK,EAAEyoK,yBAAyB,oBAAoBzoK,EAAE0oK,2BAA2B,oBAAoB1oK,EAAE2oK,qBACtet8J,EAAErM,EAAEkD,MAAM,oBAAoBlD,EAAE2oK,oBAAoB3oK,EAAE2oK,qBAAqB,oBAAoB3oK,EAAE0oK,2BAA2B1oK,EAAE0oK,4BAA4Br8J,IAAIrM,EAAEkD,OAAO0kK,GAAG3lB,oBAAoBjiJ,EAAEA,EAAEkD,MAAM,MAAMmkK,GAAG/pK,EAAEwoC,EAAE9lC,EAAE8pB,GAAG9pB,EAAEkD,MAAM5F,EAAEgwJ,eAAe,oBAAoBttJ,EAAE4oK,oBAAoBtrK,EAAE8vJ,WAAW,GAAG,IAAIyb,GAAGhuK,MAAMC,QAC3T,SAASguK,GAAGxrK,EAAE+O,EAAEy5B,GAAW,GAAG,QAAXxoC,EAAEwoC,EAAEv/B,MAAiB,oBAAoBjJ,GAAG,kBAAkBA,EAAE,CAAC,GAAGwoC,EAAE48G,OAAO,CAAY,GAAX58G,EAAEA,EAAE48G,OAAY,CAAC,GAAG,IAAI58G,EAAErI,IAAI,MAAMhgC,MAAM0zD,EAAE,MAAM,IAAIrnC,EAAEgc,EAAEogH,UAAU,IAAIp8H,EAAE,MAAMrsB,MAAM0zD,EAAE,IAAI7zD,IAAI,IAAI0C,EAAE,GAAG1C,EAAE,OAAG,OAAO+O,GAAG,OAAOA,EAAE9F,KAAK,oBAAoB8F,EAAE9F,KAAK8F,EAAE9F,IAAIwiK,aAAa/oK,EAASqM,EAAE9F,MAAI8F,EAAE,SAAS/O,GAAG,IAAI+O,EAAEyd,EAAEq4H,KAAK91I,IAAIq7J,KAAKr7J,EAAEyd,EAAEq4H,KAAK,IAAI,OAAO7kJ,SAAS+O,EAAErM,GAAGqM,EAAErM,GAAG1C,IAAKyrK,WAAW/oK,EAASqM,GAAE,GAAG,kBAAkB/O,EAAE,MAAMG,MAAM0zD,EAAE,MAAM,IAAIrrB,EAAE48G,OAAO,MAAMjlJ,MAAM0zD,EAAE,IAAI7zD,IAAK,OAAOA,EAChe,SAAS0rK,GAAG1rK,EAAE+O,GAAG,GAAG,aAAa/O,EAAEoH,KAAK,MAAMjH,MAAM0zD,EAAE,GAAG,oBAAoB54D,OAAOmC,UAAU+B,SAASC,KAAK2P,GAAG,qBAAqB9T,OAAOQ,KAAKsT,GAAGrB,KAAK,MAAM,IAAIqB,EAAE,KACpK,SAAS48J,GAAG3rK,GAAG,SAAS+O,EAAEA,EAAEy5B,GAAG,GAAGxoC,EAAE,CAAC,IAAIwsB,EAAEzd,EAAE68J,WAAW,OAAOp/I,GAAGA,EAAEq/I,WAAWrjI,EAAEz5B,EAAE68J,WAAWpjI,GAAGz5B,EAAE+8J,YAAY/8J,EAAE68J,WAAWpjI,EAAEA,EAAEqjI,WAAW,KAAKrjI,EAAEsnH,UAAU,GAAG,SAAStnH,EAAEA,EAAEhc,GAAG,IAAIxsB,EAAE,OAAO,KAAK,KAAK,OAAOwsB,GAAGzd,EAAEy5B,EAAEhc,GAAGA,EAAEA,EAAE4jI,QAAQ,OAAO,KAAK,SAAS5jI,EAAExsB,EAAE+O,GAAG,IAAI/O,EAAE,IAAI4hF,IAAI,OAAO7yE,GAAG,OAAOA,EAAEhU,IAAIiF,EAAEsc,IAAIvN,EAAEhU,IAAIgU,GAAG/O,EAAEsc,IAAIvN,EAAEsL,MAAMtL,GAAGA,EAAEA,EAAEqhJ,QAAQ,OAAOpwJ,EAAE,SAAS0C,EAAE1C,EAAE+O,GAAsC,OAAnC/O,EAAE+rK,GAAG/rK,EAAE+O,IAAKsL,MAAM,EAAEra,EAAEowJ,QAAQ,KAAYpwJ,EAAE,SAAS6L,EAAEkD,EAAEy5B,EAAEhc,GAAa,OAAVzd,EAAEsL,MAAMmS,EAAMxsB,EAA4B,QAAjBwsB,EAAEzd,EAAE8gJ,YAA6BrjI,EAAEA,EAAEnS,OAAQmuB,GAAGz5B,EAAE+gJ,UAClf,EAAEtnH,GAAGhc,GAAEzd,EAAE+gJ,UAAU,EAAStnH,GADkaA,EACha,SAAShmC,EAAEuM,GAA0C,OAAvC/O,GAAG,OAAO+O,EAAE8gJ,YAAY9gJ,EAAE+gJ,UAAU,GAAU/gJ,EAAE,SAASshD,EAAErwD,EAAE+O,EAAEy5B,EAAEhc,GAAG,OAAG,OAAOzd,GAAG,IAAIA,EAAEoxB,MAAWpxB,EAAEi9J,GAAGxjI,EAAExoC,EAAEkU,KAAKsY,IAAKw/H,OAAOhsJ,EAAE+O,KAAEA,EAAErM,EAAEqM,EAAEy5B,IAAKwjH,OAAOhsJ,EAAS+O,GAAE,SAASye,EAAExtB,EAAE+O,EAAEy5B,EAAEhc,GAAG,OAAG,OAAOzd,GAAGA,EAAEk9J,cAAczjI,EAAEphC,OAAYolB,EAAE9pB,EAAEqM,EAAEy5B,EAAEzrC,QAASkM,IAAIuiK,GAAGxrK,EAAE+O,EAAEy5B,GAAGhc,EAAEw/H,OAAOhsJ,EAAEwsB,KAAEA,EAAE0/I,GAAG1jI,EAAEphC,KAAKohC,EAAEztC,IAAIytC,EAAEzrC,MAAM,KAAKiD,EAAEkU,KAAKsY,IAAKvjB,IAAIuiK,GAAGxrK,EAAE+O,EAAEy5B,GAAGhc,EAAEw/H,OAAOhsJ,EAASwsB,GAAE,SAAS2hC,EAAEnuD,EAAE+O,EAAEy5B,EAAEhc,GAAG,OAAG,OAAOzd,GAAG,IAAIA,EAAEoxB,KAAKpxB,EAAE65I,UAAU8I,gBAAgBlpH,EAAEkpH,eAAe3iJ,EAAE65I,UAAUujB,iBACte3jI,EAAE2jI,iBAAsBp9J,EAAEq9J,GAAG5jI,EAAExoC,EAAEkU,KAAKsY,IAAKw/H,OAAOhsJ,EAAE+O,KAAEA,EAAErM,EAAEqM,EAAEy5B,EAAE7oC,UAAU,KAAMqsJ,OAAOhsJ,EAAS+O,GAAE,SAASwgB,EAAEvvB,EAAE+O,EAAEy5B,EAAEhc,EAAE3gB,GAAG,OAAG,OAAOkD,GAAG,IAAIA,EAAEoxB,MAAWpxB,EAAEs9J,GAAG7jI,EAAExoC,EAAEkU,KAAKsY,EAAE3gB,IAAKmgJ,OAAOhsJ,EAAE+O,KAAEA,EAAErM,EAAEqM,EAAEy5B,IAAKwjH,OAAOhsJ,EAAS+O,GAAE,SAASlC,EAAE7M,EAAE+O,EAAEy5B,GAAG,GAAG,kBAAkBz5B,GAAG,kBAAkBA,EAAE,OAAOA,EAAEi9J,GAAG,GAAGj9J,EAAE/O,EAAEkU,KAAKs0B,IAAKwjH,OAAOhsJ,EAAE+O,EAAE,GAAG,kBAAkBA,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEy4H,UAAU,KAAKojB,GAAG,OAAOpiH,EAAE0jI,GAAGn9J,EAAE3H,KAAK2H,EAAEhU,IAAIgU,EAAEhS,MAAM,KAAKiD,EAAEkU,KAAKs0B,IAAKv/B,IAAIuiK,GAAGxrK,EAAE,KAAK+O,GAAGy5B,EAAEwjH,OAAOhsJ,EAAEwoC,EAAE,KAAKqiH,GAAG,OAAO97I,EAAEq9J,GAAGr9J,EAAE/O,EAAEkU,KAAKs0B,IAAKwjH,OAAOhsJ,EAAE+O,EAAE,GAAGw8J,GAAGx8J,IACvf28I,GAAG38I,GAAG,OAAOA,EAAEs9J,GAAGt9J,EAAE/O,EAAEkU,KAAKs0B,EAAE,OAAQwjH,OAAOhsJ,EAAE+O,EAAE28J,GAAG1rK,EAAE+O,GAAG,OAAO,KAAK,SAASs+B,EAAErtC,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAE,OAAOqM,EAAEA,EAAEhU,IAAI,KAAK,GAAG,kBAAkBytC,GAAG,kBAAkBA,EAAE,OAAO,OAAO9lC,EAAE,KAAK2tD,EAAErwD,EAAE+O,EAAE,GAAGy5B,EAAEhc,GAAG,GAAG,kBAAkBgc,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEg/F,UAAU,KAAKojB,GAAG,OAAOpiH,EAAEztC,MAAM2H,EAAE8lC,EAAEphC,OAAO0jJ,GAAGv7H,EAAEvvB,EAAE+O,EAAEy5B,EAAEzrC,MAAM4C,SAAS6sB,EAAE9pB,GAAG8qB,EAAExtB,EAAE+O,EAAEy5B,EAAEhc,GAAG,KAAK,KAAKq+H,GAAG,OAAOriH,EAAEztC,MAAM2H,EAAEyrD,EAAEnuD,EAAE+O,EAAEy5B,EAAEhc,GAAG,KAAK,GAAG++I,GAAG/iI,IAAIkjH,GAAGljH,GAAG,OAAO,OAAO9lC,EAAE,KAAK6sB,EAAEvvB,EAAE+O,EAAEy5B,EAAEhc,EAAE,MAAMk/I,GAAG1rK,EAAEwoC,GAAG,OAAO,KAAK,SAAS6tB,EAAEr2D,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,GAAG,kBAAkB8pB,GAAG,kBAAkBA,EAAE,OAC5e6jC,EAAEthD,EADif/O,EAClgBA,EAAEmc,IAAIqsB,IAAI,KAAW,GAAGhc,EAAE9pB,GAAG,GAAG,kBAAkB8pB,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAEg7G,UAAU,KAAKojB,GAAG,OAAO5qJ,EAAEA,EAAEmc,IAAI,OAAOqQ,EAAEzxB,IAAIytC,EAAEhc,EAAEzxB,MAAM,KAAKyxB,EAAEplB,OAAO0jJ,GAAGv7H,EAAExgB,EAAE/O,EAAEwsB,EAAEzvB,MAAM4C,SAAS+C,EAAE8pB,EAAEzxB,KAAKyyB,EAAEze,EAAE/O,EAAEwsB,EAAE9pB,GAAG,KAAKmoJ,GAAG,OAA2C18F,EAAEp/C,EAAtC/O,EAAEA,EAAEmc,IAAI,OAAOqQ,EAAEzxB,IAAIytC,EAAEhc,EAAEzxB,MAAM,KAAWyxB,EAAE9pB,GAAG,GAAG6oK,GAAG/+I,IAAIk/H,GAAGl/H,GAAG,OAAwB+C,EAAExgB,EAAnB/O,EAAEA,EAAEmc,IAAIqsB,IAAI,KAAWhc,EAAE9pB,EAAE,MAAMgpK,GAAG38J,EAAEyd,GAAG,OAAO,KAAK,SAAS8qG,EAAG50H,EAAEF,EAAE6tD,EAAE7iC,GAAG,IAAI,IAAI2gC,EAAE,KAAKxhD,EAAE,KAAK4iB,EAAE/sB,EAAEsqB,EAAEtqB,EAAE,EAAE+vE,EAAE,KAAK,OAAOhjD,GAAGzC,EAAEujC,EAAEh0D,OAAOywB,IAAI,CAACyC,EAAElV,MAAMyS,GAAGylD,EAAEhjD,EAAEA,EAAE,MAAMgjD,EAAEhjD,EAAE6gI,QAAQ,IAAI/8F,EAAEhmB,EAAE3qC,EAAE6sB,EAAE8gC,EAAEvjC,GAAGU,GAAG,GAAG,OAAO6lC,EAAE,CAAC,OAAO9jC,IAAIA,EAAEgjD,GAAG,MAAMvyE,GACtfuvB,GAAG,OAAO8jC,EAAEw8F,WAAW9gJ,EAAErM,EAAE6sB,GAAG/sB,EAAEqJ,EAAEwnD,EAAE7wD,EAAEsqB,GAAG,OAAOngB,EAAEwhD,EAAEkF,EAAE1mD,EAAEyjJ,QAAQ/8F,EAAE1mD,EAAE0mD,EAAE9jC,EAAEgjD,EAAE,GAAGzlD,IAAIujC,EAAEh0D,OAAO,OAAOmsC,EAAE9lC,EAAE6sB,GAAG4+B,EAAE,GAAG,OAAO5+B,EAAE,CAAC,KAAKzC,EAAEujC,EAAEh0D,OAAOywB,IAAkB,QAAdyC,EAAE1iB,EAAEnK,EAAE2tD,EAAEvjC,GAAGU,MAAchrB,EAAEqJ,EAAE0jB,EAAE/sB,EAAEsqB,GAAG,OAAOngB,EAAEwhD,EAAE5+B,EAAE5iB,EAAEyjJ,QAAQ7gI,EAAE5iB,EAAE4iB,GAAG,OAAO4+B,EAAE,IAAI5+B,EAAE/C,EAAE9pB,EAAE6sB,GAAGzC,EAAEujC,EAAEh0D,OAAOywB,IAAsB,QAAlBylD,EAAElc,EAAE9mC,EAAE7sB,EAAEoqB,EAAEujC,EAAEvjC,GAAGU,MAAcxtB,GAAG,OAAOuyE,EAAEs9E,WAAWtgI,EAAEhG,OAAO,OAAOgpD,EAAEx3E,IAAI+xB,EAAEylD,EAAEx3E,KAAKyH,EAAEqJ,EAAE0mE,EAAE/vE,EAAEsqB,GAAG,OAAOngB,EAAEwhD,EAAEokB,EAAE5lE,EAAEyjJ,QAAQ79E,EAAE5lE,EAAE4lE,GAA4C,OAAzCvyE,GAAGuvB,EAAEhzB,SAAQ,SAASyD,GAAG,OAAO+O,EAAErM,EAAE1C,MAAYmuD,EAAE,SAAS8oE,EAAEv0H,EAAEF,EAAE6tD,EAAElC,GAAG,IAAI3gC,EAAEk+H,GAAGr7F,GAAG,GAAG,oBAAoB7iC,EAAE,MAAMrtB,MAAM0zD,EAAE,MACve,GAAG,OAD0exD,EAAE7iC,EAAEpuB,KAAKixD,IAC3e,MAAMlwD,MAAM0zD,EAAE,MAAM,IAAI,IAAItkC,EAAE/B,EAAE,KAAK7gB,EAAEnK,EAAEsqB,EAAEtqB,EAAE,EAAE+vE,EAAE,KAAKlf,EAAEhD,EAAE9xD,OAAO,OAAOoO,IAAI0mD,EAAE70D,KAAKsuB,IAAIumC,EAAEhD,EAAE9xD,OAAO,CAACoO,EAAE0N,MAAMyS,GAAGylD,EAAE5lE,EAAEA,EAAE,MAAM4lE,EAAE5lE,EAAEyjJ,QAAQ,IAAIn5B,EAAE5pF,EAAE3qC,EAAEiK,EAAE0mD,EAAEr4D,MAAMmzD,GAAG,GAAG,OAAO8oE,EAAE,CAAC,OAAOtqH,IAAIA,EAAE4lE,GAAG,MAAMvyE,GAAG2M,GAAG,OAAOsqH,EAAE44B,WAAW9gJ,EAAErM,EAAEiK,GAAGnK,EAAEqJ,EAAEorH,EAAEz0H,EAAEsqB,GAAG,OAAOyC,EAAE/B,EAAEypG,EAAE1nG,EAAE6gI,QAAQn5B,EAAE1nG,EAAE0nG,EAAEtqH,EAAE4lE,EAAE,GAAGlf,EAAE70D,KAAK,OAAOgqC,EAAE9lC,EAAEiK,GAAG6gB,EAAE,GAAG,OAAO7gB,EAAE,CAAC,MAAM0mD,EAAE70D,KAAKsuB,IAAIumC,EAAEhD,EAAE9xD,OAAwB,QAAjB80D,EAAExmD,EAAEnK,EAAE2wD,EAAEr4D,MAAMmzD,MAAc3rD,EAAEqJ,EAAEwnD,EAAE7wD,EAAEsqB,GAAG,OAAOyC,EAAE/B,EAAE6lC,EAAE9jC,EAAE6gI,QAAQ/8F,EAAE9jC,EAAE8jC,GAAG,OAAO7lC,EAAE,IAAI7gB,EAAE6f,EAAE9pB,EAAEiK,IAAI0mD,EAAE70D,KAAKsuB,IAAIumC,EAAEhD,EAAE9xD,OAA4B,QAArB80D,EAAEgD,EAAE1pD,EAAEjK,EAAEoqB,EAAEumC,EAAEr4D,MAAMmzD,MAAcnuD,GAAG,OAChfqzD,EAAEw8F,WAAWljJ,EAAE4c,OAAO,OAAO8pC,EAAEt4D,IAAI+xB,EAAEumC,EAAEt4D,KAAKyH,EAAEqJ,EAAEwnD,EAAE7wD,EAAEsqB,GAAG,OAAOyC,EAAE/B,EAAE6lC,EAAE9jC,EAAE6gI,QAAQ/8F,EAAE9jC,EAAE8jC,GAA4C,OAAzCrzD,GAAG2M,EAAEpQ,SAAQ,SAASyD,GAAG,OAAO+O,EAAErM,EAAE1C,MAAYwtB,EAAE,OAAO,SAASxtB,EAAEwsB,EAAE3gB,EAAEwkD,GAAG,IAAI7iC,EAAE,kBAAkB3hB,GAAG,OAAOA,GAAGA,EAAEzE,OAAO0jJ,IAAI,OAAOj/I,EAAE9Q,IAAIyyB,IAAI3hB,EAAEA,EAAE9O,MAAM4C,UAAU,IAAIwuD,EAAE,kBAAkBtiD,GAAG,OAAOA,EAAE,GAAGsiD,EAAE,OAAOtiD,EAAE27H,UAAU,KAAKojB,GAAG5qJ,EAAE,CAAS,IAARmuD,EAAEtiD,EAAE9Q,IAAQyyB,EAAEhB,EAAE,OAAOgB,GAAG,CAAC,GAAGA,EAAEzyB,MAAMozD,EAAE,CAAC,OAAO3gC,EAAE2S,KAAK,KAAK,EAAE,GAAGt0B,EAAEzE,OAAO0jJ,GAAG,CAACtiH,EAAExoC,EAAEwtB,EAAE4iI,UAAS5jI,EAAE9pB,EAAE8qB,EAAE3hB,EAAE9O,MAAM4C,WAAYqsJ,OAAOhsJ,EAAEA,EAAEwsB,EAAE,MAAMxsB,EAAE,MAAM,QAAQ,GAAGwtB,EAAEy+I,cAAcpgK,EAAEzE,KAAK,CAACohC,EAAExoC,EACrfwtB,EAAE4iI,UAAS5jI,EAAE9pB,EAAE8qB,EAAE3hB,EAAE9O,QAASkM,IAAIuiK,GAAGxrK,EAAEwtB,EAAE3hB,GAAG2gB,EAAEw/H,OAAOhsJ,EAAEA,EAAEwsB,EAAE,MAAMxsB,GAAGwoC,EAAExoC,EAAEwtB,GAAG,MAAWze,EAAE/O,EAAEwtB,GAAGA,EAAEA,EAAE4iI,QAAQvkJ,EAAEzE,OAAO0jJ,KAAIt+H,EAAE6/I,GAAGxgK,EAAE9O,MAAM4C,SAASK,EAAEkU,KAAKm8C,EAAExkD,EAAE9Q,MAAOixJ,OAAOhsJ,EAAEA,EAAEwsB,KAAI6jC,EAAE67G,GAAGrgK,EAAEzE,KAAKyE,EAAE9Q,IAAI8Q,EAAE9O,MAAM,KAAKiD,EAAEkU,KAAKm8C,IAAKpnD,IAAIuiK,GAAGxrK,EAAEwsB,EAAE3gB,GAAGwkD,EAAE27F,OAAOhsJ,EAAEA,EAAEqwD,GAAG,OAAO7tD,EAAExC,GAAG,KAAK6qJ,GAAG7qJ,EAAE,CAAC,IAAIwtB,EAAE3hB,EAAE9Q,IAAI,OAAOyxB,GAAG,CAAC,GAAGA,EAAEzxB,MAAMyyB,EAAX,CAAa,GAAG,IAAIhB,EAAE2T,KAAK3T,EAAEo8H,UAAU8I,gBAAgB7lJ,EAAE6lJ,eAAellI,EAAEo8H,UAAUujB,iBAAiBtgK,EAAEsgK,eAAe,CAAC3jI,EAAExoC,EAAEwsB,EAAE4jI,UAAS5jI,EAAE9pB,EAAE8pB,EAAE3gB,EAAElM,UAAU,KAAMqsJ,OAAOhsJ,EAAEA,EAAEwsB,EAAE,MAAMxsB,EAAOwoC,EAAExoC,EAAEwsB,GAAG,MAAWzd,EAAE/O,EAAEwsB,GAAGA,EACnfA,EAAE4jI,SAAQ5jI,EAAE4/I,GAAGvgK,EAAE7L,EAAEkU,KAAKm8C,IAAK27F,OAAOhsJ,EAAEA,EAAEwsB,EAAE,OAAOhqB,EAAExC,GAAG,GAAG,kBAAkB6L,GAAG,kBAAkBA,EAAE,OAAOA,EAAE,GAAGA,EAAE,OAAO2gB,GAAG,IAAIA,EAAE2T,KAAKqI,EAAExoC,EAAEwsB,EAAE4jI,UAAS5jI,EAAE9pB,EAAE8pB,EAAE3gB,IAAKmgJ,OAAOhsJ,EAAEA,EAAEwsB,IAAIgc,EAAExoC,EAAEwsB,IAAGA,EAAEw/I,GAAGngK,EAAE7L,EAAEkU,KAAKm8C,IAAK27F,OAAOhsJ,EAAEA,EAAEwsB,GAAGhqB,EAAExC,GAAG,GAAGurK,GAAG1/J,GAAG,OAAOyrH,EAAGt3H,EAAEwsB,EAAE3gB,EAAEwkD,GAAG,GAAGq7F,GAAG7/I,GAAG,OAAOorH,EAAEj3H,EAAEwsB,EAAE3gB,EAAEwkD,GAAc,GAAXlC,GAAGu9G,GAAG1rK,EAAE6L,GAAM,qBAAqBA,IAAI2hB,EAAE,OAAOxtB,EAAEmgC,KAAK,KAAK,EAAE,KAAK,EAAE,MAAMngC,EAAEA,EAAEoH,KAAKjH,MAAM0zD,EAAE,IAAI7zD,EAAEgB,aAAahB,EAAET,MAAM,cAAe,OAAOipC,EAAExoC,EAAEwsB,IAAI,IAAI8/I,GAAGX,IAAG,GAAIY,GAAGZ,IAAG,GAAIa,GAAG,GAAGC,GAAG,CAACtiJ,QAAQqiJ,IAAIE,GAAG,CAACviJ,QAAQqiJ,IAAIG,GAAG,CAACxiJ,QAAQqiJ,IACjf,SAASI,GAAG5sK,GAAG,GAAGA,IAAIwsK,GAAG,MAAMrsK,MAAM0zD,EAAE,MAAM,OAAO7zD,EAAE,SAAS+yE,GAAG/yE,EAAE+O,GAAyC,OAAtCs8D,GAAEshG,GAAG59J,GAAGs8D,GAAEqhG,GAAG1sK,GAAGqrE,GAAEohG,GAAGD,IAAIxsK,EAAE+O,EAAE4/I,UAAmB,KAAK,EAAE,KAAK,GAAG5/I,GAAGA,EAAEA,EAAE4xH,iBAAiB5xH,EAAEs/I,aAAaL,GAAG,KAAK,IAAI,MAAM,QAAkEj/I,EAAEi/I,GAArCj/I,GAAvB/O,EAAE,IAAIA,EAAE+O,EAAE4mH,WAAW5mH,GAAMs/I,cAAc,KAAKruJ,EAAEA,EAAEszB,SAAkBujG,GAAE41C,IAAIphG,GAAEohG,GAAG19J,GAAG,SAAS89J,KAAKh2C,GAAE41C,IAAI51C,GAAE61C,IAAI71C,GAAE81C,IAAI,SAASG,GAAG9sK,GAAG4sK,GAAGD,GAAGxiJ,SAAS,IAAIpb,EAAE69J,GAAGH,GAAGtiJ,SAAaqe,EAAEwlH,GAAGj/I,EAAE/O,EAAEoH,MAAM2H,IAAIy5B,IAAI6iC,GAAEqhG,GAAG1sK,GAAGqrE,GAAEohG,GAAGjkI,IAAI,SAASukI,GAAG/sK,GAAG0sK,GAAGviJ,UAAUnqB,IAAI62H,GAAE41C,IAAI51C,GAAE61C,KAAK,IAAIx1C,GAAE,CAAC/sG,QAAQ,GACpd,SAAS6iJ,GAAGhtK,GAAG,IAAI,IAAI+O,EAAE/O,EAAE,OAAO+O,GAAG,CAAC,GAAG,KAAKA,EAAEoxB,IAAI,CAAC,IAAIqI,EAAEz5B,EAAEihJ,cAAc,GAAG,OAAOxnH,IAAmB,QAAfA,EAAEA,EAAEynH,aAzEqJ,OAyEhIznH,EAAElxB,MAzEsI,OAyE3HkxB,EAAElxB,MAAW,OAAOvI,OAAO,GAAG,KAAKA,EAAEoxB,UAAK,IAASpxB,EAAEk+J,cAAcC,aAAa,GAAG,KAAiB,GAAZn+J,EAAE+gJ,WAAc,OAAO/gJ,OAAO,GAAG,OAAOA,EAAEw5B,MAAM,CAACx5B,EAAEw5B,MAAMyjH,OAAOj9I,EAAEA,EAAEA,EAAEw5B,MAAM,SAAS,GAAGx5B,IAAI/O,EAAE,MAAM,KAAK,OAAO+O,EAAEqhJ,SAAS,CAAC,GAAG,OAAOrhJ,EAAEi9I,QAAQj9I,EAAEi9I,SAAShsJ,EAAE,OAAO,KAAK+O,EAAEA,EAAEi9I,OAAOj9I,EAAEqhJ,QAAQpE,OAAOj9I,EAAEi9I,OAAOj9I,EAAEA,EAAEqhJ,QAAQ,OAAO,KAAK,SAAS+c,GAAGntK,EAAE+O,GAAG,MAAM,CAACq+J,UAAUptK,EAAEjD,MAAMgS,GACve,IAAIs+J,GAAGjjB,EAAG5E,uBAAuB8nB,GAAGljB,EAAG3E,wBAAwB8nB,GAAG,EAAEl2C,GAAE,KAAKE,GAAE,KAAKztH,GAAE,KAAK0jK,IAAG,EAAG,SAAS31C,KAAI,MAAM13H,MAAM0zD,EAAE,MAAO,SAAS45G,GAAGztK,EAAE+O,GAAG,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAI,IAAIy5B,EAAE,EAAEA,EAAEz5B,EAAE1S,QAAQmsC,EAAExoC,EAAE3D,OAAOmsC,IAAI,IAAI22H,GAAGn/J,EAAEwoC,GAAGz5B,EAAEy5B,IAAI,OAAM,EAAG,OAAM,EAC/O,SAASklI,GAAG1tK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAkI,GAA/H0hK,GAAG1hK,EAAEwrH,GAAEtoH,EAAEA,EAAEihJ,cAAc,KAAKjhJ,EAAEs6J,YAAY,KAAKt6J,EAAE+5J,eAAe,EAAEuE,GAAGljJ,QAAQ,OAAOnqB,GAAG,OAAOA,EAAEgwJ,cAAc2d,GAAGC,GAAG5tK,EAAEwoC,EAAEhc,EAAE9pB,GAAMqM,EAAE+5J,iBAAiByE,GAAG,CAAC1hK,EAAE,EAAE,EAAE,CAAoB,GAAnBkD,EAAE+5J,eAAe,IAAO,GAAGj9J,GAAG,MAAM1L,MAAM0zD,EAAE,MAAMhoD,GAAG,EAAE/B,GAAEytH,GAAE,KAAKxoH,EAAEs6J,YAAY,KAAKgE,GAAGljJ,QAAQ0jJ,GAAG7tK,EAAEwoC,EAAEhc,EAAE9pB,SAASqM,EAAE+5J,iBAAiByE,IAAkE,GAA9DF,GAAGljJ,QAAQgqD,GAAGplE,EAAE,OAAOwoH,IAAG,OAAOA,GAAEh5H,KAAKgvK,GAAG,EAAEzjK,GAAEytH,GAAEF,GAAE,KAAKm2C,IAAG,EAAMz+J,EAAE,MAAM5O,MAAM0zD,EAAE,MAAM,OAAO7zD,EAC9Z,SAAS8tK,KAAK,IAAI9tK,EAAE,CAACgwJ,cAAc,KAAKsZ,UAAU,KAAKC,UAAU,KAAK9pF,MAAM,KAAKlhF,KAAK,MAA8C,OAAxC,OAAOuL,GAAEutH,GAAE24B,cAAclmJ,GAAE9J,EAAE8J,GAAEA,GAAEvL,KAAKyB,EAAS8J,GAAE,SAASikK,KAAK,GAAG,OAAOx2C,GAAE,CAAC,IAAIv3H,EAAEq3H,GAAEw4B,UAAU7vJ,EAAE,OAAOA,EAAEA,EAAEgwJ,cAAc,UAAUhwJ,EAAEu3H,GAAEh5H,KAAK,IAAIwQ,EAAE,OAAOjF,GAAEutH,GAAE24B,cAAclmJ,GAAEvL,KAAK,GAAG,OAAOwQ,EAAEjF,GAAEiF,EAAEwoH,GAAEv3H,MAAM,CAAC,GAAG,OAAOA,EAAE,MAAMG,MAAM0zD,EAAE,MAAU7zD,EAAE,CAACgwJ,eAAPz4B,GAAEv3H,GAAqBgwJ,cAAcsZ,UAAU/xC,GAAE+xC,UAAUC,UAAUhyC,GAAEgyC,UAAU9pF,MAAM83C,GAAE93C,MAAMlhF,KAAK,MAAM,OAAOuL,GAAEutH,GAAE24B,cAAclmJ,GAAE9J,EAAE8J,GAAEA,GAAEvL,KAAKyB,EAAE,OAAO8J,GAChe,SAASkkK,GAAGhuK,EAAE+O,GAAG,MAAM,oBAAoBA,EAAEA,EAAE/O,GAAG+O,EAClD,SAASk/J,GAAGjuK,GAAG,IAAI+O,EAAEg/J,KAAKvlI,EAAEz5B,EAAE0wE,MAAM,GAAG,OAAOj3C,EAAE,MAAMroC,MAAM0zD,EAAE,MAAMrrB,EAAE0lI,oBAAoBluK,EAAE,IAAIwsB,EAAE+qG,GAAE70H,EAAE8pB,EAAE+8I,UAAU19J,EAAE28B,EAAEghI,QAAQ,GAAG,OAAO39J,EAAE,CAAC,GAAG,OAAOnJ,EAAE,CAAC,IAAIF,EAAEE,EAAEnE,KAAKmE,EAAEnE,KAAKsN,EAAEtN,KAAKsN,EAAEtN,KAAKiE,EAAEgqB,EAAE+8I,UAAU7mK,EAAEmJ,EAAE28B,EAAEghI,QAAQ,KAAK,GAAG,OAAO9mK,EAAE,CAACA,EAAEA,EAAEnE,KAAKiuB,EAAEA,EAAE88I,UAAU,IAAIj5G,EAAE7tD,EAAEqJ,EAAE,KAAK2hB,EAAE9qB,EAAE,EAAE,CAAC,IAAIyrD,EAAE3gC,EAAEs7I,eAAe,GAAG36G,EAAEo/G,GAAG,CAAC,IAAIh+I,EAAE,CAACu5I,eAAet7I,EAAEs7I,eAAec,eAAep8I,EAAEo8I,eAAe/yI,OAAOrJ,EAAEqJ,OAAOs3I,aAAa3gJ,EAAE2gJ,aAAaC,WAAW5gJ,EAAE4gJ,WAAW7vK,KAAK,MAAM,OAAO8xD,GAAG7tD,EAAE6tD,EAAE9gC,EAAE1jB,EAAE2gB,GAAG6jC,EAAEA,EAAE9xD,KAAKgxB,EAAE4+B,EAAEkpE,GAAEyxC,iBAC9ezxC,GAAEyxC,eAAe36G,EAAE87G,GAAG97G,SAAS,OAAOkC,IAAIA,EAAEA,EAAE9xD,KAAK,CAACuqK,eAAe,WAAWc,eAAep8I,EAAEo8I,eAAe/yI,OAAOrJ,EAAEqJ,OAAOs3I,aAAa3gJ,EAAE2gJ,aAAaC,WAAW5gJ,EAAE4gJ,WAAW7vK,KAAK,OAAOyrK,GAAG77G,EAAE3gC,EAAEo8I,gBAAgBp9I,EAAEgB,EAAE2gJ,eAAenuK,EAAEwtB,EAAE4gJ,WAAWpuK,EAAEwsB,EAAEgB,EAAEqJ,QAAQrJ,EAAEA,EAAEjvB,WAAW,OAAOivB,GAAGA,IAAI9qB,GAAG,OAAO2tD,EAAExkD,EAAE2gB,EAAE6jC,EAAE9xD,KAAKiE,EAAE28J,GAAG3yI,EAAEzd,EAAEihJ,iBAAiB+Y,IAAG,GAAIh6J,EAAEihJ,cAAcxjI,EAAEzd,EAAEu6J,UAAUz9J,EAAEkD,EAAEw6J,UAAUl5G,EAAE7nB,EAAE6lI,kBAAkB7hJ,EAAE,MAAM,CAACzd,EAAEihJ,cAAcxnH,EAAE8lI,UACxb,SAASC,GAAGvuK,GAAG,IAAI+O,EAAEg/J,KAAKvlI,EAAEz5B,EAAE0wE,MAAM,GAAG,OAAOj3C,EAAE,MAAMroC,MAAM0zD,EAAE,MAAMrrB,EAAE0lI,oBAAoBluK,EAAE,IAAIwsB,EAAEgc,EAAE8lI,SAAS5rK,EAAE8lC,EAAEghI,QAAQ39J,EAAEkD,EAAEihJ,cAAc,GAAG,OAAOttJ,EAAE,CAAC8lC,EAAEghI,QAAQ,KAAK,IAAIhnK,EAAEE,EAAEA,EAAEnE,KAAK,GAAGsN,EAAE7L,EAAE6L,EAAErJ,EAAEq0B,QAAQr0B,EAAEA,EAAEjE,WAAWiE,IAAIE,GAAGy8J,GAAGtzJ,EAAEkD,EAAEihJ,iBAAiB+Y,IAAG,GAAIh6J,EAAEihJ,cAAcnkJ,EAAE,OAAOkD,EAAEw6J,YAAYx6J,EAAEu6J,UAAUz9J,GAAG28B,EAAE6lI,kBAAkBxiK,EAAE,MAAM,CAACA,EAAE2gB,GACnV,SAASgiJ,GAAGxuK,GAAG,IAAI+O,EAAE++J,KAAmL,MAA9K,oBAAoB9tK,IAAIA,EAAEA,KAAK+O,EAAEihJ,cAAcjhJ,EAAEu6J,UAAUtpK,EAAoFA,GAAlFA,EAAE+O,EAAE0wE,MAAM,CAAC+pF,QAAQ,KAAK8E,SAAS,KAAKJ,oBAAoBF,GAAGK,kBAAkBruK,IAAOsuK,SAASG,GAAGnzJ,KAAK,KAAK+7G,GAAEr3H,GAAS,CAAC+O,EAAEihJ,cAAchwJ,GAAG,SAAS0uK,GAAG1uK,EAAE+O,EAAEy5B,EAAEhc,GAAkO,OAA/NxsB,EAAE,CAACmgC,IAAIngC,EAAEoG,OAAO2I,EAAEqhC,QAAQ5H,EAAEmmI,KAAKniJ,EAAEjuB,KAAK,MAAsB,QAAhBwQ,EAAEsoH,GAAEgyC,cAAsBt6J,EAAE,CAAC68J,WAAW,MAAMv0C,GAAEgyC,YAAYt6J,EAAEA,EAAE68J,WAAW5rK,EAAEzB,KAAKyB,GAAmB,QAAfwoC,EAAEz5B,EAAE68J,YAAoB78J,EAAE68J,WAAW5rK,EAAEzB,KAAKyB,GAAGwsB,EAAEgc,EAAEjqC,KAAKiqC,EAAEjqC,KAAKyB,EAAEA,EAAEzB,KAAKiuB,EAAEzd,EAAE68J,WAAW5rK,GAAWA,EAC7d,SAAS4uK,KAAK,OAAOb,KAAK/d,cAAc,SAAS6e,GAAG7uK,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAEorK,KAAKz2C,GAAEy4B,WAAW9vJ,EAAE0C,EAAEstJ,cAAc0e,GAAG,EAAE3/J,EAAEy5B,OAAE,OAAO,IAAShc,EAAE,KAAKA,GAAG,SAASsiJ,GAAG9uK,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAEqrK,KAAKvhJ,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAI3gB,OAAE,EAAO,GAAG,OAAO0rH,GAAE,CAAC,IAAI/0H,EAAE+0H,GAAEy4B,cAA0B,GAAZnkJ,EAAErJ,EAAE4tC,QAAW,OAAO5jB,GAAGihJ,GAAGjhJ,EAAEhqB,EAAEmsK,MAAmB,YAAZD,GAAG3/J,EAAEy5B,EAAE38B,EAAE2gB,GAAW6qG,GAAEy4B,WAAW9vJ,EAAE0C,EAAEstJ,cAAc0e,GAAG,EAAE3/J,EAAEy5B,EAAE38B,EAAE2gB,GAAG,SAASuiJ,GAAG/uK,EAAE+O,GAAG,OAAO8/J,GAAG,IAAI,EAAE7uK,EAAE+O,GAAG,SAASigK,GAAGhvK,EAAE+O,GAAG,OAAO+/J,GAAG,IAAI,EAAE9uK,EAAE+O,GAAG,SAASkgK,GAAGjvK,EAAE+O,GAAG,OAAO+/J,GAAG,EAAE,EAAE9uK,EAAE+O,GACnc,SAASmgK,GAAGlvK,EAAE+O,GAAG,MAAG,oBAAoBA,GAAS/O,EAAEA,IAAI+O,EAAE/O,GAAG,WAAW+O,EAAE,QAAU,OAAOA,QAAG,IAASA,GAAS/O,EAAEA,IAAI+O,EAAEob,QAAQnqB,EAAE,WAAW+O,EAAEob,QAAQ,YAAtE,EAA4E,SAASglJ,GAAGnvK,EAAE+O,EAAEy5B,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE97B,OAAO,CAAC1M,IAAI,KAAY8uK,GAAG,EAAE,EAAEI,GAAG5zJ,KAAK,KAAKvM,EAAE/O,GAAGwoC,GAAG,SAAS4mI,MAAM,SAASC,GAAGrvK,EAAE+O,GAA4C,OAAzC++J,KAAK9d,cAAc,CAAChwJ,OAAE,IAAS+O,EAAE,KAAKA,GAAU/O,EAAE,SAASsvK,GAAGtvK,EAAE+O,GAAG,IAAIy5B,EAAEulI,KAAKh/J,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIyd,EAAEgc,EAAEwnH,cAAc,OAAG,OAAOxjI,GAAG,OAAOzd,GAAG0+J,GAAG1+J,EAAEyd,EAAE,IAAWA,EAAE,IAAGgc,EAAEwnH,cAAc,CAAChwJ,EAAE+O,GAAU/O,GAC/d,SAASuvK,GAAGvvK,EAAE+O,GAAG,IAAIy5B,EAAEulI,KAAKh/J,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIyd,EAAEgc,EAAEwnH,cAAc,OAAG,OAAOxjI,GAAG,OAAOzd,GAAG0+J,GAAG1+J,EAAEyd,EAAE,IAAWA,EAAE,IAAGxsB,EAAEA,IAAIwoC,EAAEwnH,cAAc,CAAChwJ,EAAE+O,GAAU/O,GAAE,SAASwvK,GAAGxvK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEm7I,KAAKE,GAAG,GAAGr7I,EAAE,GAAGA,GAAE,WAAWxsB,GAAE,MAAM6nK,GAAG,GAAGr7I,EAAE,GAAGA,GAAE,WAAW,IAAIA,EAAE8gJ,GAAG5nB,SAAS4nB,GAAG5nB,cAAS,IAAS32I,EAAE,KAAKA,EAAE,IAAI/O,GAAE,GAAIwoC,IAAV,QAAsB8kI,GAAG5nB,SAASl5H,MACjU,SAASiiJ,GAAGzuK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEg+I,KAAK9nK,EAAEynK,GAAGzkB,SAAqBhjJ,EAAE,CAAComK,eAAft8I,EAAEi+I,GAAGj+I,EAAExsB,EAAE0C,GAAuBknK,eAAelnK,EAAEm0B,OAAO2R,EAAE2lI,aAAa,KAAKC,WAAW,KAAK7vK,KAAK,MAAM,IAAIsN,EAAEkD,EAAEy6J,QAA6E,GAArE,OAAO39J,EAAEnJ,EAAEnE,KAAKmE,GAAGA,EAAEnE,KAAKsN,EAAEtN,KAAKsN,EAAEtN,KAAKmE,GAAGqM,EAAEy6J,QAAQ9mK,EAAEmJ,EAAE7L,EAAE6vJ,UAAa7vJ,IAAIq3H,IAAG,OAAOxrH,GAAGA,IAAIwrH,GAAEm2C,IAAG,EAAG9qK,EAAEomK,eAAeyE,GAAGl2C,GAAEyxC,eAAeyE,OAAO,CAAC,GAAG,IAAIvtK,EAAE8oK,iBAAiB,OAAOj9J,GAAG,IAAIA,EAAEi9J,iBAA0C,QAAxBj9J,EAAEkD,EAAEm/J,qBAA8B,IAAI,IAAI1rK,EAAEuM,EAAEs/J,kBAAkBh+G,EAAExkD,EAAErJ,EAAEgmC,GAAmC,GAAhC9lC,EAAEyrK,aAAatiK,EAAEnJ,EAAE0rK,WAAW/9G,EAAK8uG,GAAG9uG,EAAE7tD,GAAG,OAAO,MAAMgrB,IAAak9I,GAAG1qK,EAClgBwsB,IACA,IAAI2nD,GAAG,CAACs7F,YAAYzG,GAAGjiB,YAAYlvB,GAAEmvB,WAAWnvB,GAAEqvB,UAAUrvB,GAAEsvB,oBAAoBtvB,GAAEuvB,gBAAgBvvB,GAAEwvB,QAAQxvB,GAAEyvB,WAAWzvB,GAAE0vB,OAAO1vB,GAAE2vB,SAAS3vB,GAAEovB,cAAcpvB,GAAE63C,aAAa73C,GAAE83C,iBAAiB93C,GAAE+3C,cAAc/3C,IAAG81C,GAAG,CAAC8B,YAAYzG,GAAGjiB,YAAYsoB,GAAGroB,WAAWgiB,GAAG9hB,UAAU6nB,GAAG5nB,oBAAoB,SAASnnJ,EAAE+O,EAAEy5B,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE97B,OAAO,CAAC1M,IAAI,KAAY6uK,GAAG,EAAE,EAAEK,GAAG5zJ,KAAK,KAAKvM,EAAE/O,GAAGwoC,IAAI4+G,gBAAgB,SAASpnJ,EAAE+O,GAAG,OAAO8/J,GAAG,EAAE,EAAE7uK,EAAE+O,IAAIs4I,QAAQ,SAASrnJ,EAAE+O,GAAG,IAAIy5B,EAAEslI,KAC9c,OADmd/+J,OAAE,IAASA,EAAE,KAAKA,EAAE/O,EAAEA,IAAIwoC,EAAEwnH,cAAc,CAAChwJ,EACjgB+O,GAAU/O,GAAGsnJ,WAAW,SAAStnJ,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEshJ,KAAuK,OAAlK/+J,OAAE,IAASy5B,EAAEA,EAAEz5B,GAAGA,EAAEyd,EAAEwjI,cAAcxjI,EAAE88I,UAAUv6J,EAAmF/O,GAAjFA,EAAEwsB,EAAEizD,MAAM,CAAC+pF,QAAQ,KAAK8E,SAAS,KAAKJ,oBAAoBluK,EAAEquK,kBAAkBt/J,IAAOu/J,SAASG,GAAGnzJ,KAAK,KAAK+7G,GAAEr3H,GAAS,CAACwsB,EAAEwjI,cAAchwJ,IAAIunJ,OAAO,SAASvnJ,GAA4B,OAAdA,EAAE,CAACmqB,QAAQnqB,GAAhB8tK,KAA4B9d,cAAchwJ,GAAGwnJ,SAASgnB,GAAGvnB,cAAcmoB,GAAGM,aAAavC,GAAGwC,iBAAiB,SAAS3vK,EAAE+O,GAAG,IAAIy5B,EAAEgmI,GAAGxuK,GAAGwsB,EAAEgc,EAAE,GAAG9lC,EAAE8lC,EAAE,GAC9Y,OADiZumI,IAAG,WAAW,IAAIvmI,EAAE8kI,GAAG5nB,SAAS4nB,GAAG5nB,cAAS,IAAS32I,EAAE,KAAKA,EAAE,IAAIrM,EAAE1C,GAAN,QAAiBstK,GAAG5nB,SAC9el9G,KAAI,CAACxoC,EAAE+O,IAAWyd,GAAGojJ,cAAc,SAAS5vK,GAAG,IAAI+O,EAAEy/J,IAAG,GAAIhmI,EAAEz5B,EAAE,GAAU,OAAPA,EAAEA,EAAE,GAAS,CAACsgK,GAAGG,GAAGl0J,KAAK,KAAKvM,EAAE/O,GAAG,CAAC+O,EAAE/O,IAAIwoC,KAAKolI,GAAG,CAAC6B,YAAYzG,GAAGjiB,YAAYuoB,GAAGtoB,WAAWgiB,GAAG9hB,UAAU8nB,GAAG7nB,oBAAoBgoB,GAAG/nB,gBAAgB6nB,GAAG5nB,QAAQkoB,GAAGjoB,WAAW2mB,GAAG1mB,OAAOqnB,GAAGpnB,SAAS,WAAW,OAAOymB,GAAGD,KAAK/mB,cAAcmoB,GAAGM,aAAavC,GAAGwC,iBAAiB,SAAS3vK,EAAE+O,GAAG,IAAIy5B,EAAEylI,GAAGD,IAAIxhJ,EAAEgc,EAAE,GAAG9lC,EAAE8lC,EAAE,GAAyG,OAAtGwmI,IAAG,WAAW,IAAIxmI,EAAE8kI,GAAG5nB,SAAS4nB,GAAG5nB,cAAS,IAAS32I,EAAE,KAAKA,EAAE,IAAIrM,EAAE1C,GAAN,QAAiBstK,GAAG5nB,SAASl9G,KAAI,CAACxoC,EAAE+O,IAAWyd,GAAGojJ,cAAc,SAAS5vK,GAAG,IAAI+O,EACxgBk/J,GAAGD,IAAIxlI,EAAEz5B,EAAE,GAAU,OAAPA,EAAEA,EAAE,GAAS,CAACugK,GAAGE,GAAGl0J,KAAK,KAAKvM,EAAE/O,GAAG,CAAC+O,EAAE/O,IAAIwoC,KAAKqlI,GAAG,CAAC4B,YAAYzG,GAAGjiB,YAAYuoB,GAAGtoB,WAAWgiB,GAAG9hB,UAAU8nB,GAAG7nB,oBAAoBgoB,GAAG/nB,gBAAgB6nB,GAAG5nB,QAAQkoB,GAAGjoB,WAAWinB,GAAGhnB,OAAOqnB,GAAGpnB,SAAS,WAAW,OAAO+mB,GAAGP,KAAK/mB,cAAcmoB,GAAGM,aAAavC,GAAGwC,iBAAiB,SAAS3vK,EAAE+O,GAAG,IAAIy5B,EAAE+lI,GAAGP,IAAIxhJ,EAAEgc,EAAE,GAAG9lC,EAAE8lC,EAAE,GAAyG,OAAtGwmI,IAAG,WAAW,IAAIxmI,EAAE8kI,GAAG5nB,SAAS4nB,GAAG5nB,cAAS,IAAS32I,EAAE,KAAKA,EAAE,IAAIrM,EAAE1C,GAAN,QAAiBstK,GAAG5nB,SAASl9G,KAAI,CAACxoC,EAAE+O,IAAWyd,GAAGojJ,cAAc,SAAS5vK,GAAG,IAAI+O,EAAEw/J,GAAGP,IAAIxlI,EAAEz5B,EAAE,GAAU,OAAPA,EAAEA,EAAE,GAAS,CAACugK,GAAGE,GAAGl0J,KAAK,KAC5fvM,EAAE/O,GAAG,CAAC+O,EAAE/O,IAAIwoC,KAAKqnI,GAAG,KAAKC,GAAG,KAAKC,IAAG,EAAG,SAASC,GAAGhwK,EAAE+O,GAAG,IAAIy5B,EAAEynI,GAAG,EAAE,KAAK,KAAK,GAAGznI,EAAEyjI,YAAY,UAAUzjI,EAAEphC,KAAK,UAAUohC,EAAEogH,UAAU75I,EAAEy5B,EAAEwjH,OAAOhsJ,EAAEwoC,EAAEsnH,UAAU,EAAE,OAAO9vJ,EAAE4rK,YAAY5rK,EAAE4rK,WAAWC,WAAWrjI,EAAExoC,EAAE4rK,WAAWpjI,GAAGxoC,EAAE8rK,YAAY9rK,EAAE4rK,WAAWpjI,EAC1P,SAAS0nI,GAAGlwK,EAAE+O,GAAG,OAAO/O,EAAEmgC,KAAK,KAAK,EAAE,IAAIqI,EAAExoC,EAAEoH,KAAyE,OAAO,QAA3E2H,EAAE,IAAIA,EAAE4/I,UAAUnmH,EAAEjV,gBAAgBxkB,EAAEo9I,SAAS54H,cAAc,KAAKxkB,KAAmB/O,EAAE4oJ,UAAU75I,GAAE,GAAO,KAAK,EAAE,OAAoD,QAA7CA,EAAE,KAAK/O,EAAEmwK,cAAc,IAAIphK,EAAE4/I,SAAS,KAAK5/I,KAAY/O,EAAE4oJ,UAAU75I,GAAE,GAAO,KAAK,GAAY,QAAQ,OAAM,GACtR,SAASqhK,GAAGpwK,GAAG,GAAG+vK,GAAG,CAAC,IAAIhhK,EAAE+gK,GAAG,GAAG/gK,EAAE,CAAC,IAAIy5B,EAAEz5B,EAAE,IAAImhK,GAAGlwK,EAAE+O,GAAG,CAAqB,KAApBA,EAAEioJ,GAAGxuH,EAAEysF,gBAAqBi7C,GAAGlwK,EAAE+O,GAA+C,OAA3C/O,EAAE8vJ,WAAuB,KAAb9vJ,EAAE8vJ,UAAgB,EAAEigB,IAAG,OAAGF,GAAG7vK,GAASgwK,GAAGH,GAAGrnI,GAAGqnI,GAAG7vK,EAAE8vK,GAAG9Y,GAAGjoJ,EAAEy/I,iBAAiBxuJ,EAAE8vJ,WAAuB,KAAb9vJ,EAAE8vJ,UAAgB,EAAEigB,IAAG,EAAGF,GAAG7vK,GAAG,SAASqwK,GAAGrwK,GAAG,IAAIA,EAAEA,EAAEgsJ,OAAO,OAAOhsJ,GAAG,IAAIA,EAAEmgC,KAAK,IAAIngC,EAAEmgC,KAAK,KAAKngC,EAAEmgC,KAAKngC,EAAEA,EAAEgsJ,OAAO6jB,GAAG7vK,EAC5T,SAASswK,GAAGtwK,GAAG,GAAGA,IAAI6vK,GAAG,OAAM,EAAG,IAAIE,GAAG,OAAOM,GAAGrwK,GAAG+vK,IAAG,GAAG,EAAG,IAAIhhK,EAAE/O,EAAEoH,KAAK,GAAG,IAAIpH,EAAEmgC,KAAK,SAASpxB,GAAG,SAASA,IAAI+nJ,GAAG/nJ,EAAE/O,EAAEitK,eAAe,IAAIl+J,EAAE+gK,GAAG/gK,GAAGihK,GAAGhwK,EAAE+O,GAAGA,EAAEioJ,GAAGjoJ,EAAEkmH,aAAmB,GAANo7C,GAAGrwK,GAAM,KAAKA,EAAEmgC,IAAI,CAAgD,KAA7BngC,EAAE,QAApBA,EAAEA,EAAEgwJ,eAAyBhwJ,EAAEiwJ,WAAW,MAAW,MAAM9vJ,MAAM0zD,EAAE,MAAM7zD,EAAE,CAAiB,IAAhBA,EAAEA,EAAEi1H,YAAgBlmH,EAAE,EAAE/O,GAAG,CAAC,GAAG,IAAIA,EAAE2uJ,SAAS,CAAC,IAAInmH,EAAExoC,EAAEsX,KAAK,GA9FpG,OA8FuGkxB,EAAO,CAAC,GAAG,IAAIz5B,EAAE,CAAC+gK,GAAG9Y,GAAGh3J,EAAEi1H,aAAa,MAAMj1H,EAAE+O,QA9F7J,MA8FsKy5B,GA9F/I,OA8FuJA,GA9F/J,OA8FuKA,GAAQz5B,IAAI/O,EAAEA,EAAEi1H,YAAY66C,GAAG,WAAWA,GAAGD,GAAG7Y,GAAGh3J,EAAE4oJ,UAAU3zB,aAAa,KAAK,OAAM,EAChf,SAASs7C,KAAKT,GAAGD,GAAG,KAAKE,IAAG,EAAG,IAAIS,GAAGpmB,EAAGzE,kBAAkBojB,IAAG,EAAG,SAAStyC,GAAEz2H,EAAE+O,EAAEy5B,EAAEhc,GAAGzd,EAAEw5B,MAAM,OAAOvoC,EAAEusK,GAAGx9J,EAAE,KAAKy5B,EAAEhc,GAAG8/I,GAAGv9J,EAAE/O,EAAEuoC,MAAMC,EAAEhc,GAAG,SAASikJ,GAAGzwK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG8lC,EAAEA,EAAE02F,OAAO,IAAIrzH,EAAEkD,EAAE9F,IAA8B,OAA1B2/J,GAAG75J,EAAErM,GAAG8pB,EAAEkhJ,GAAG1tK,EAAE+O,EAAEy5B,EAAEhc,EAAE3gB,EAAEnJ,GAAM,OAAO1C,GAAI+oK,IAA4Gh6J,EAAE+gJ,WAAW,EAAEr5B,GAAEz2H,EAAE+O,EAAEyd,EAAE9pB,GAAUqM,EAAEw5B,QAArIx5B,EAAEs6J,YAAYrpK,EAAEqpK,YAAYt6J,EAAE+gJ,YAAY,IAAI9vJ,EAAE8oK,gBAAgBpmK,IAAI1C,EAAE8oK,eAAe,GAAG4H,GAAG1wK,EAAE+O,EAAErM,IACtU,SAASiuK,GAAG3wK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,GAAG,OAAO7L,EAAE,CAAC,IAAIwC,EAAEgmC,EAAEphC,KAAK,MAAG,oBAAoB5E,GAAIouK,GAAGpuK,SAAI,IAASA,EAAEkH,cAAc,OAAO8+B,EAAEoyC,cAAS,IAASpyC,EAAE9+B,eAAsD1J,EAAEksK,GAAG1jI,EAAEphC,KAAK,KAAKolB,EAAE,KAAKzd,EAAEmF,KAAKrI,IAAK5C,IAAI8F,EAAE9F,IAAIjJ,EAAEgsJ,OAAOj9I,EAASA,EAAEw5B,MAAMvoC,IAA1G+O,EAAEoxB,IAAI,GAAGpxB,EAAE3H,KAAK5E,EAAEgwE,GAAGxyE,EAAE+O,EAAEvM,EAAEgqB,EAAE9pB,EAAEmJ,IAAuF,OAAVrJ,EAAExC,EAAEuoC,MAAS7lC,EAAEmJ,IAAInJ,EAAEF,EAAEyqK,eAA0BzkI,EAAE,QAAdA,EAAEA,EAAEoyC,SAAmBpyC,EAAE62H,IAAK38J,EAAE8pB,IAAIxsB,EAAEiJ,MAAM8F,EAAE9F,KAAYynK,GAAG1wK,EAAE+O,EAAElD,IAAGkD,EAAE+gJ,WAAW,GAAE9vJ,EAAE+rK,GAAGvpK,EAAEgqB,IAAKvjB,IAAI8F,EAAE9F,IAAIjJ,EAAEgsJ,OAAOj9I,EAASA,EAAEw5B,MAAMvoC,GACnb,SAASwyE,GAAGxyE,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,OAAO,OAAO7L,GAAGq/J,GAAGr/J,EAAEitK,cAAczgJ,IAAIxsB,EAAEiJ,MAAM8F,EAAE9F,MAAM8/J,IAAG,EAAGrmK,EAAEmJ,IAAIkD,EAAE+5J,eAAe9oK,EAAE8oK,eAAe4H,GAAG1wK,EAAE+O,EAAElD,IAAIglK,GAAG7wK,EAAE+O,EAAEy5B,EAAEhc,EAAE3gB,GAAG,SAASilK,GAAG9wK,EAAE+O,GAAG,IAAIy5B,EAAEz5B,EAAE9F,KAAO,OAAOjJ,GAAG,OAAOwoC,GAAG,OAAOxoC,GAAGA,EAAEiJ,MAAMu/B,KAAEz5B,EAAE+gJ,WAAW,KAAI,SAAS+gB,GAAG7wK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,IAAImJ,EAAE+rD,GAAEpvB,GAAG48H,GAAGhuC,GAAEjtG,QAA4C,OAApCte,EAAEw5J,GAAGt2J,EAAElD,GAAG+8J,GAAG75J,EAAErM,GAAG8lC,EAAEklI,GAAG1tK,EAAE+O,EAAEy5B,EAAEhc,EAAE3gB,EAAEnJ,GAAM,OAAO1C,GAAI+oK,IAA4Gh6J,EAAE+gJ,WAAW,EAAEr5B,GAAEz2H,EAAE+O,EAAEy5B,EAAE9lC,GAAUqM,EAAEw5B,QAArIx5B,EAAEs6J,YAAYrpK,EAAEqpK,YAAYt6J,EAAE+gJ,YAAY,IAAI9vJ,EAAE8oK,gBAAgBpmK,IAAI1C,EAAE8oK,eAAe,GAAG4H,GAAG1wK,EAAE+O,EAAErM,IAC3b,SAASquK,GAAG/wK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,GAAGk1D,GAAEpvB,GAAG,CAAC,IAAI38B,GAAE,EAAGg6J,GAAG92J,QAAQlD,GAAE,EAAW,GAAR+8J,GAAG75J,EAAErM,GAAM,OAAOqM,EAAE65I,UAAU,OAAO5oJ,IAAIA,EAAE6vJ,UAAU,KAAK9gJ,EAAE8gJ,UAAU,KAAK9gJ,EAAE+gJ,WAAW,GAAG+a,GAAG97J,EAAEy5B,EAAEhc,GAAGy+I,GAAGl8J,EAAEy5B,EAAEhc,EAAE9pB,GAAG8pB,GAAE,OAAQ,GAAG,OAAOxsB,EAAE,CAAC,IAAIwC,EAAEuM,EAAE65I,UAAUv4F,EAAEthD,EAAEk+J,cAAczqK,EAAEzF,MAAMszD,EAAE,IAAI7iC,EAAEhrB,EAAE0O,QAAQi9C,EAAE3lB,EAAE/wB,YAAY,kBAAkB02C,GAAG,OAAOA,EAAEA,EAAE66G,GAAG76G,GAAwBA,EAAEk3G,GAAGt2J,EAAzBo/C,EAAEyJ,GAAEpvB,GAAG48H,GAAGhuC,GAAEjtG,SAAmB,IAAIoF,EAAEiZ,EAAE0iI,yBAAyBr+J,EAAE,oBAAoB0iB,GAAG,oBAAoB/sB,EAAE2oK,wBAAwBt+J,GAAG,oBAAoBrK,EAAEwoK,kCACtd,oBAAoBxoK,EAAEuoK,4BAA4B16G,IAAI7jC,GAAGgB,IAAI2gC,IAAI28G,GAAG/7J,EAAEvM,EAAEgqB,EAAE2hC,GAAGg7G,IAAG,EAAG,IAAI97H,EAAEt+B,EAAEihJ,cAAcxtJ,EAAEoD,MAAMynC,EAAE08H,GAAGh7J,EAAEyd,EAAEhqB,EAAEE,GAAG8qB,EAAEze,EAAEihJ,cAAc3/F,IAAI7jC,GAAG6gB,IAAI7f,GAAG2pG,GAAEhtG,SAASg/I,IAAI,oBAAoB55I,IAAI86I,GAAGt7J,EAAEy5B,EAAEjZ,EAAE/C,GAAGgB,EAAEze,EAAEihJ,gBAAgB3/F,EAAE84G,IAAIwB,GAAG57J,EAAEy5B,EAAE6nB,EAAE7jC,EAAE6gB,EAAE7f,EAAE2gC,KAAKthD,GAAG,oBAAoBrK,EAAE4oK,2BAA2B,oBAAoB5oK,EAAE6oK,qBAAqB,oBAAoB7oK,EAAE6oK,oBAAoB7oK,EAAE6oK,qBAAqB,oBAAoB7oK,EAAE4oK,2BAA2B5oK,EAAE4oK,6BAA6B,oBACze5oK,EAAE8oK,oBAAoBv8J,EAAE+gJ,WAAW,KAAK,oBAAoBttJ,EAAE8oK,oBAAoBv8J,EAAE+gJ,WAAW,GAAG/gJ,EAAEk+J,cAAczgJ,EAAEzd,EAAEihJ,cAAcxiI,GAAGhrB,EAAEzF,MAAMyvB,EAAEhqB,EAAEoD,MAAM4nB,EAAEhrB,EAAE0O,QAAQi9C,EAAE3hC,EAAE6jC,IAAI,oBAAoB7tD,EAAE8oK,oBAAoBv8J,EAAE+gJ,WAAW,GAAGtjI,GAAE,QAAShqB,EAAEuM,EAAE65I,UAAU8gB,GAAG1pK,EAAE+O,GAAGshD,EAAEthD,EAAEk+J,cAAczqK,EAAEzF,MAAMgS,EAAE3H,OAAO2H,EAAEk9J,YAAY57G,EAAE83G,GAAGp5J,EAAE3H,KAAKipD,GAAG7iC,EAAEhrB,EAAE0O,QAAwB,kBAAhBi9C,EAAE3lB,EAAE/wB,cAAiC,OAAO02C,EAAEA,EAAE66G,GAAG76G,GAAwBA,EAAEk3G,GAAGt2J,EAAzBo/C,EAAEyJ,GAAEpvB,GAAG48H,GAAGhuC,GAAEjtG,UAAiDtd,EAAE,oBAAhC0iB,EAAEiZ,EAAE0iI,2BAAmD,oBACje1oK,EAAE2oK,0BAA0B,oBAAoB3oK,EAAEwoK,kCAAkC,oBAAoBxoK,EAAEuoK,4BAA4B16G,IAAI7jC,GAAGgB,IAAI2gC,IAAI28G,GAAG/7J,EAAEvM,EAAEgqB,EAAE2hC,GAAGg7G,IAAG,EAAG37I,EAAEze,EAAEihJ,cAAcxtJ,EAAEoD,MAAM4nB,EAAEu8I,GAAGh7J,EAAEyd,EAAEhqB,EAAEE,GAAG2qC,EAAEt+B,EAAEihJ,cAAc3/F,IAAI7jC,GAAGgB,IAAI6f,GAAG8pF,GAAEhtG,SAASg/I,IAAI,oBAAoB55I,IAAI86I,GAAGt7J,EAAEy5B,EAAEjZ,EAAE/C,GAAG6gB,EAAEt+B,EAAEihJ,gBAAgBzgI,EAAE45I,IAAIwB,GAAG57J,EAAEy5B,EAAE6nB,EAAE7jC,EAAEgB,EAAE6f,EAAE8gB,KAAKthD,GAAG,oBAAoBrK,EAAEwuK,4BAA4B,oBAAoBxuK,EAAEyuK,sBAAsB,oBAAoBzuK,EAAEyuK,qBAAqBzuK,EAAEyuK,oBAAoBzkJ,EACzf6gB,EAAE8gB,GAAG,oBAAoB3rD,EAAEwuK,4BAA4BxuK,EAAEwuK,2BAA2BxkJ,EAAE6gB,EAAE8gB,IAAI,oBAAoB3rD,EAAE0uK,qBAAqBniK,EAAE+gJ,WAAW,GAAG,oBAAoBttJ,EAAE2oK,0BAA0Bp8J,EAAE+gJ,WAAW,OAAO,oBAAoBttJ,EAAE0uK,oBAAoB7gH,IAAIrwD,EAAEitK,eAAez/I,IAAIxtB,EAAEgwJ,gBAAgBjhJ,EAAE+gJ,WAAW,GAAG,oBAAoBttJ,EAAE2oK,yBAAyB96G,IAAIrwD,EAAEitK,eAAez/I,IAAIxtB,EAAEgwJ,gBAAgBjhJ,EAAE+gJ,WAAW,KAAK/gJ,EAAEk+J,cAAczgJ,EAAEzd,EAAEihJ,cAAc3iH,GAAG7qC,EAAEzF,MAAMyvB,EAAEhqB,EAAEoD,MAAMynC,EAAE7qC,EAAE0O,QAAQi9C,EAAE3hC,EAAE+C,IAClf,oBAAoB/sB,EAAE0uK,oBAAoB7gH,IAAIrwD,EAAEitK,eAAez/I,IAAIxtB,EAAEgwJ,gBAAgBjhJ,EAAE+gJ,WAAW,GAAG,oBAAoBttJ,EAAE2oK,yBAAyB96G,IAAIrwD,EAAEitK,eAAez/I,IAAIxtB,EAAEgwJ,gBAAgBjhJ,EAAE+gJ,WAAW,KAAKtjI,GAAE,GAAI,OAAO2kJ,GAAGnxK,EAAE+O,EAAEy5B,EAAEhc,EAAE3gB,EAAEnJ,GAC5O,SAASyuK,GAAGnxK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAGilK,GAAG9wK,EAAE+O,GAAG,IAAIvM,EAAE,KAAiB,GAAZuM,EAAE+gJ,WAAc,IAAItjI,IAAIhqB,EAAE,OAAOE,GAAGqjK,GAAGh3J,EAAEy5B,GAAE,GAAIkoI,GAAG1wK,EAAE+O,EAAElD,GAAG2gB,EAAEzd,EAAE65I,UAAU4nB,GAAGrmJ,QAAQpb,EAAE,IAAIshD,EAAE7tD,GAAG,oBAAoBgmC,EAAE4oI,yBAAyB,KAAK5kJ,EAAE0yG,SAA2I,OAAlInwH,EAAE+gJ,WAAW,EAAE,OAAO9vJ,GAAGwC,GAAGuM,EAAEw5B,MAAM+jI,GAAGv9J,EAAE/O,EAAEuoC,MAAM,KAAK18B,GAAGkD,EAAEw5B,MAAM+jI,GAAGv9J,EAAE,KAAKshD,EAAExkD,IAAI4qH,GAAEz2H,EAAE+O,EAAEshD,EAAExkD,GAAGkD,EAAEihJ,cAAcxjI,EAAE5mB,MAAMlD,GAAGqjK,GAAGh3J,EAAEy5B,GAAE,GAAWz5B,EAAEw5B,MAAM,SAAS4wC,GAAGn5E,GAAG,IAAI+O,EAAE/O,EAAE4oJ,UAAU75I,EAAEsiK,eAAe3L,GAAG1lK,EAAE+O,EAAEsiK,eAAetiK,EAAEsiK,iBAAiBtiK,EAAEmC,SAASnC,EAAEmC,SAASw0J,GAAG1lK,EAAE+O,EAAEmC,SAAQ,GAAI6hE,GAAG/yE,EAAE+O,EAAE2iJ,eACpe,IAOoX4f,GAAMC,GAAGC,GAPzXC,GAAG,CAACxhB,WAAW,KAAKyhB,UAAU,GAClC,SAASC,GAAG3xK,EAAE+O,EAAEy5B,GAAG,IAA+C6nB,EAA3C7jC,EAAEzd,EAAEmF,KAAKxR,EAAEqM,EAAEohK,aAAatkK,EAAEqrH,GAAE/sG,QAAQ3nB,GAAE,EAAqN,IAA/M6tD,EAAE,KAAiB,GAAZthD,EAAE+gJ,cAAiBz/F,EAAE,KAAO,EAAFxkD,KAAO,OAAO7L,GAAG,OAAOA,EAAEgwJ,gBAAgB3/F,GAAG7tD,GAAE,EAAGuM,EAAE+gJ,YAAY,IAAI,OAAO9vJ,GAAG,OAAOA,EAAEgwJ,oBAAe,IAASttJ,EAAE9C,WAAU,IAAK8C,EAAEkvK,6BAA6B/lK,GAAG,GAAGw/D,GAAE6rD,GAAI,EAAFrrH,GAAQ,OAAO7L,EAAE,CAA4B,QAA3B,IAAS0C,EAAE9C,UAAUwwK,GAAGrhK,GAAMvM,EAAE,CAA6C,GAA5CA,EAAEE,EAAE9C,UAAS8C,EAAE2pK,GAAG,KAAK7/I,EAAE,EAAE,OAAQw/H,OAAOj9I,EAAK,KAAY,EAAPA,EAAEmF,MAAQ,IAAIlU,EAAE,OAAO+O,EAAEihJ,cAAcjhJ,EAAEw5B,MAAMA,MAAMx5B,EAAEw5B,MAAM7lC,EAAE6lC,MAAMvoC,EAAE,OAAOA,GAAGA,EAAEgsJ,OAAOtpJ,EAAE1C,EAAEA,EAAEowJ,QAC3a,OADmb5nH,EAAE6jI,GAAG7pK,EAAEgqB,EAAEgc,EAAE,OAAQwjH,OACjfj9I,EAAErM,EAAE0tJ,QAAQ5nH,EAAEz5B,EAAEihJ,cAAcyhB,GAAG1iK,EAAEw5B,MAAM7lC,EAAS8lC,EAAoC,OAAlChc,EAAE9pB,EAAE/C,SAASoP,EAAEihJ,cAAc,KAAYjhJ,EAAEw5B,MAAMgkI,GAAGx9J,EAAE,KAAKyd,EAAEgc,GAAG,GAAG,OAAOxoC,EAAEgwJ,cAAc,CAAuB,GAAZxjI,GAAVxsB,EAAEA,EAAEuoC,OAAU6nH,QAAW5tJ,EAAE,CAAgD,GAA/CE,EAAEA,EAAE9C,UAAS4oC,EAAEujI,GAAG/rK,EAAEA,EAAEmwK,eAAgBnkB,OAAOj9I,EAAK,KAAY,EAAPA,EAAEmF,QAAU1R,EAAE,OAAOuM,EAAEihJ,cAAcjhJ,EAAEw5B,MAAMA,MAAMx5B,EAAEw5B,SAAUvoC,EAAEuoC,MAAO,IAAIC,EAAED,MAAM/lC,EAAE,OAAOA,GAAGA,EAAEwpJ,OAAOxjH,EAAEhmC,EAAEA,EAAE4tJ,QAA8F,OAAtF5jI,EAAEu/I,GAAGv/I,EAAE9pB,IAAKspJ,OAAOj9I,EAAEy5B,EAAE4nH,QAAQ5jI,EAAEgc,EAAEmgI,oBAAoB,EAAE55J,EAAEihJ,cAAcyhB,GAAG1iK,EAAEw5B,MAAMC,EAAShc,EAAoD,OAAlDgc,EAAE8jI,GAAGv9J,EAAE/O,EAAEuoC,MAAM7lC,EAAE/C,SAAS6oC,GAAGz5B,EAAEihJ,cAAc,KAAYjhJ,EAAEw5B,MACnfC,EAAY,GAAVxoC,EAAEA,EAAEuoC,MAAS/lC,EAAE,CAA8E,GAA7EA,EAAEE,EAAE9C,UAAS8C,EAAE2pK,GAAG,KAAK7/I,EAAE,EAAE,OAAQw/H,OAAOj9I,EAAErM,EAAE6lC,MAAMvoC,EAAE,OAAOA,IAAIA,EAAEgsJ,OAAOtpJ,GAAM,KAAY,EAAPqM,EAAEmF,MAAQ,IAAIlU,EAAE,OAAO+O,EAAEihJ,cAAcjhJ,EAAEw5B,MAAMA,MAAMx5B,EAAEw5B,MAAM7lC,EAAE6lC,MAAMvoC,EAAE,OAAOA,GAAGA,EAAEgsJ,OAAOtpJ,EAAE1C,EAAEA,EAAEowJ,QAAoH,OAA5G5nH,EAAE6jI,GAAG7pK,EAAEgqB,EAAEgc,EAAE,OAAQwjH,OAAOj9I,EAAErM,EAAE0tJ,QAAQ5nH,EAAEA,EAAEsnH,WAAW,EAAEptJ,EAAEimK,oBAAoB,EAAE55J,EAAEihJ,cAAcyhB,GAAG1iK,EAAEw5B,MAAM7lC,EAAS8lC,EAAuB,OAArBz5B,EAAEihJ,cAAc,KAAYjhJ,EAAEw5B,MAAM+jI,GAAGv9J,EAAE/O,EAAE0C,EAAE/C,SAAS6oC,GAC1X,SAASqpI,GAAG7xK,EAAE+O,GAAG/O,EAAE8oK,eAAe/5J,IAAI/O,EAAE8oK,eAAe/5J,GAAG,IAAIy5B,EAAExoC,EAAE6vJ,UAAU,OAAOrnH,GAAGA,EAAEsgI,eAAe/5J,IAAIy5B,EAAEsgI,eAAe/5J,GAAG25J,GAAG1oK,EAAEgsJ,OAAOj9I,GAAG,SAAS+iK,GAAG9xK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,IAAIrJ,EAAExC,EAAEgwJ,cAAc,OAAOxtJ,EAAExC,EAAEgwJ,cAAc,CAAC+hB,YAAYhjK,EAAEijK,UAAU,KAAKC,mBAAmB,EAAE/jH,KAAK1hC,EAAE0lJ,KAAK1pI,EAAE2pI,eAAe,EAAEC,SAAS1vK,EAAEkpK,WAAW//J,IAAIrJ,EAAEuvK,YAAYhjK,EAAEvM,EAAEwvK,UAAU,KAAKxvK,EAAEyvK,mBAAmB,EAAEzvK,EAAE0rD,KAAK1hC,EAAEhqB,EAAE0vK,KAAK1pI,EAAEhmC,EAAE2vK,eAAe,EAAE3vK,EAAE4vK,SAAS1vK,EAAEF,EAAEopK,WAAW//J,GACzb,SAASwmK,GAAGryK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEzd,EAAEohK,aAAaztK,EAAE8pB,EAAE0gJ,YAAYrhK,EAAE2gB,EAAE0lJ,KAAqC,GAAhCz7C,GAAEz2H,EAAE+O,EAAEyd,EAAE7sB,SAAS6oC,GAAkB,KAAO,GAAtBhc,EAAE0qG,GAAE/sG,UAAqBqC,EAAI,EAAFA,EAAI,EAAEzd,EAAE+gJ,WAAW,OAAO,CAAC,GAAG,OAAO9vJ,GAAG,KAAiB,GAAZA,EAAE8vJ,WAAc9vJ,EAAE,IAAIA,EAAE+O,EAAEw5B,MAAM,OAAOvoC,GAAG,CAAC,GAAG,KAAKA,EAAEmgC,IAAI,OAAOngC,EAAEgwJ,eAAe6hB,GAAG7xK,EAAEwoC,QAAQ,GAAG,KAAKxoC,EAAEmgC,IAAI0xI,GAAG7xK,EAAEwoC,QAAQ,GAAG,OAAOxoC,EAAEuoC,MAAM,CAACvoC,EAAEuoC,MAAMyjH,OAAOhsJ,EAAEA,EAAEA,EAAEuoC,MAAM,SAAS,GAAGvoC,IAAI+O,EAAE,MAAM/O,EAAE,KAAK,OAAOA,EAAEowJ,SAAS,CAAC,GAAG,OAAOpwJ,EAAEgsJ,QAAQhsJ,EAAEgsJ,SAASj9I,EAAE,MAAM/O,EAAEA,EAAEA,EAAEgsJ,OAAOhsJ,EAAEowJ,QAAQpE,OAAOhsJ,EAAEgsJ,OAAOhsJ,EAAEA,EAAEowJ,QAAQ5jI,GAAG,EAAS,GAAP6+C,GAAE6rD,GAAE1qG,GAAM,KAAY,EAAPzd,EAAEmF,MAAQnF,EAAEihJ,cAChf,UAAU,OAAOttJ,GAAG,IAAK,WAAqB,IAAV8lC,EAAEz5B,EAAEw5B,MAAU7lC,EAAE,KAAK,OAAO8lC,GAAiB,QAAdxoC,EAAEwoC,EAAEqnH,YAAoB,OAAOmd,GAAGhtK,KAAK0C,EAAE8lC,GAAGA,EAAEA,EAAE4nH,QAAY,QAAJ5nH,EAAE9lC,IAAYA,EAAEqM,EAAEw5B,MAAMx5B,EAAEw5B,MAAM,OAAO7lC,EAAE8lC,EAAE4nH,QAAQ5nH,EAAE4nH,QAAQ,MAAM0hB,GAAG/iK,GAAE,EAAGrM,EAAE8lC,EAAE38B,EAAEkD,EAAE68J,YAAY,MAAM,IAAK,YAA6B,IAAjBpjI,EAAE,KAAK9lC,EAAEqM,EAAEw5B,MAAUx5B,EAAEw5B,MAAM,KAAK,OAAO7lC,GAAG,CAAe,GAAG,QAAjB1C,EAAE0C,EAAEmtJ,YAAuB,OAAOmd,GAAGhtK,GAAG,CAAC+O,EAAEw5B,MAAM7lC,EAAE,MAAM1C,EAAE0C,EAAE0tJ,QAAQ1tJ,EAAE0tJ,QAAQ5nH,EAAEA,EAAE9lC,EAAEA,EAAE1C,EAAE8xK,GAAG/iK,GAAE,EAAGy5B,EAAE,KAAK38B,EAAEkD,EAAE68J,YAAY,MAAM,IAAK,WAAWkG,GAAG/iK,GAAE,EAAG,KAAK,UAAK,EAAOA,EAAE68J,YAAY,MAAM,QAAQ78J,EAAEihJ,cAAc,KAAK,OAAOjhJ,EAAEw5B,MAC/f,SAASmoI,GAAG1wK,EAAE+O,EAAEy5B,GAAG,OAAOxoC,IAAI+O,EAAE5N,aAAanB,EAAEmB,cAAc,IAAIqrB,EAAEzd,EAAE+5J,eAA4B,GAAb,IAAIt8I,GAAGy9I,GAAGz9I,GAAMzd,EAAE45J,oBAAoBngI,EAAE,OAAO,KAAK,GAAG,OAAOxoC,GAAG+O,EAAEw5B,QAAQvoC,EAAEuoC,MAAM,MAAMpoC,MAAM0zD,EAAE,MAAM,GAAG,OAAO9kD,EAAEw5B,MAAM,CAA4C,IAAjCC,EAAEujI,GAAZ/rK,EAAE+O,EAAEw5B,MAAavoC,EAAEmwK,cAAcphK,EAAEw5B,MAAMC,EAAMA,EAAEwjH,OAAOj9I,EAAE,OAAO/O,EAAEowJ,SAASpwJ,EAAEA,EAAEowJ,SAAQ5nH,EAAEA,EAAE4nH,QAAQ2b,GAAG/rK,EAAEA,EAAEmwK,eAAgBnkB,OAAOj9I,EAAEy5B,EAAE4nH,QAAQ,KAAK,OAAOrhJ,EAAEw5B,MAK5T,SAAS+pI,GAAGtyK,EAAE+O,GAAG,OAAO/O,EAAEoyK,UAAU,IAAK,SAASrjK,EAAE/O,EAAEkyK,KAAK,IAAI,IAAI1pI,EAAE,KAAK,OAAOz5B,GAAG,OAAOA,EAAE8gJ,YAAYrnH,EAAEz5B,GAAGA,EAAEA,EAAEqhJ,QAAQ,OAAO5nH,EAAExoC,EAAEkyK,KAAK,KAAK1pI,EAAE4nH,QAAQ,KAAK,MAAM,IAAK,YAAY5nH,EAAExoC,EAAEkyK,KAAK,IAAI,IAAI1lJ,EAAE,KAAK,OAAOgc,GAAG,OAAOA,EAAEqnH,YAAYrjI,EAAEgc,GAAGA,EAAEA,EAAE4nH,QAAQ,OAAO5jI,EAAEzd,GAAG,OAAO/O,EAAEkyK,KAAKlyK,EAAEkyK,KAAK,KAAKlyK,EAAEkyK,KAAK9hB,QAAQ,KAAK5jI,EAAE4jI,QAAQ,MAC/W,SAASmiB,GAAGvyK,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEzd,EAAEohK,aAAa,OAAOphK,EAAEoxB,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,OAAO,KAAK,KAAK,EAAE,OAAOy3B,GAAE7oD,EAAE3H,OAAOq+J,KAAK,KAAK,KAAK,EAAE,OAAOoH,KAAKh2C,GAAEM,IAAGN,GAAEO,KAAG5uF,EAAEz5B,EAAE65I,WAAYyoB,iBAAiB7oI,EAAEt3B,QAAQs3B,EAAE6oI,eAAe7oI,EAAE6oI,eAAe,MAAM,OAAOrxK,GAAG,OAAOA,EAAEuoC,QAAQ+nI,GAAGvhK,KAAKA,EAAE+gJ,WAAW,GAAS,KAAK,KAAK,EAAEid,GAAGh+J,GAAGy5B,EAAEokI,GAAGD,GAAGxiJ,SAAS,IAAIznB,EAAEqM,EAAE3H,KAAK,GAAG,OAAOpH,GAAG,MAAM+O,EAAE65I,UAAU2oB,GAAGvxK,EAAE+O,EAAErM,EAAE8pB,EAAEgc,GAAGxoC,EAAEiJ,MAAM8F,EAAE9F,MAAM8F,EAAE+gJ,WAAW,SAAS,CAAC,IAAItjI,EAAE,CAAC,GAAG,OAAOzd,EAAE65I,UAAU,MAAMzoJ,MAAM0zD,EAAE,MACxgB,OAAO,KAAsB,GAAjB7zD,EAAE4sK,GAAGH,GAAGtiJ,SAAYmmJ,GAAGvhK,GAAG,CAACyd,EAAEzd,EAAE65I,UAAUlmJ,EAAEqM,EAAE3H,KAAK,IAAIyE,EAAEkD,EAAEk+J,cAA8B,OAAhBzgJ,EAAE4qI,IAAIroJ,EAAEyd,EAAE6qI,IAAIxrJ,EAASnJ,GAAG,IAAK,SAAS,IAAK,SAAS,IAAK,QAAQy+E,GAAE,OAAO30D,GAAG,MAAM,IAAK,QAAQ,IAAK,QAAQ,IAAIxsB,EAAE,EAAEA,EAAEm9F,GAAG9gG,OAAO2D,IAAImhF,GAAEgc,GAAGn9F,GAAGwsB,GAAG,MAAM,IAAK,SAAS20D,GAAE,QAAQ30D,GAAG,MAAM,IAAK,MAAM,IAAK,QAAQ,IAAK,OAAO20D,GAAE,QAAQ30D,GAAG20D,GAAE,OAAO30D,GAAG,MAAM,IAAK,OAAO20D,GAAE,QAAQ30D,GAAG20D,GAAE,SAAS30D,GAAG,MAAM,IAAK,UAAU20D,GAAE,SAAS30D,GAAG,MAAM,IAAK,QAAQqgI,GAAGrgI,EAAE3gB,GAAGs1E,GAAE,UAAU30D,GAAGypI,GAAGztH,EAAE,YAAY,MAAM,IAAK,SAAShc,EAAEmgI,cAC3e,CAAC6lB,cAAc3mK,EAAE4mK,UAAUtxF,GAAE,UAAU30D,GAAGypI,GAAGztH,EAAE,YAAY,MAAM,IAAK,WAAWklH,GAAGlhI,EAAE3gB,GAAGs1E,GAAE,UAAU30D,GAAGypI,GAAGztH,EAAE,YAA2B,IAAI,IAAIhmC,KAAvBqzJ,GAAGnzJ,EAAEmJ,GAAG7L,EAAE,KAAkB6L,EAAE,GAAGA,EAAEhJ,eAAeL,GAAG,CAAC,IAAI6tD,EAAExkD,EAAErJ,GAAG,aAAaA,EAAE,kBAAkB6tD,EAAE7jC,EAAEqhI,cAAcx9F,IAAIrwD,EAAE,CAAC,WAAWqwD,IAAI,kBAAkBA,GAAG7jC,EAAEqhI,cAAc,GAAGx9F,IAAIrwD,EAAE,CAAC,WAAW,GAAGqwD,IAAI+3F,EAAGvlJ,eAAeL,IAAI,MAAM6tD,GAAG4lG,GAAGztH,EAAEhmC,GAAG,OAAOE,GAAG,IAAK,QAAQ0pJ,GAAG5/H,GAAG2gI,GAAG3gI,EAAE3gB,GAAE,GAAI,MAAM,IAAK,WAAWugJ,GAAG5/H,GAAGohI,GAAGphI,GAAG,MAAM,IAAK,SAAS,IAAK,SAAS,MAAM,QAAQ,oBAAoB3gB,EAAEukI,UAC1f5jH,EAAElE,QAAQ4tI,IAAI1tH,EAAExoC,EAAE+O,EAAEs6J,YAAY7gI,EAAE,OAAOA,IAAIz5B,EAAE+gJ,WAAW,OAAO,CAAuY,OAAtYttJ,EAAE,IAAIgmC,EAAEmmH,SAASnmH,EAAEA,EAAE4kH,cAAcptJ,IAAIg2J,KAAKh2J,EAAE+tJ,GAAGrrJ,IAAI1C,IAAIg2J,GAAG,WAAWtzJ,IAAG1C,EAAEwC,EAAEoF,cAAc,QAAS0mJ,UAAU,qBAAuBtuJ,EAAEA,EAAE41H,YAAY51H,EAAEwuJ,aAAa,kBAAkBhiI,EAAEupI,GAAG/1J,EAAEwC,EAAEoF,cAAclF,EAAE,CAACqzJ,GAAGvpI,EAAEupI,MAAM/1J,EAAEwC,EAAEoF,cAAclF,GAAG,WAAWA,IAAIF,EAAExC,EAAEwsB,EAAEimJ,SAASjwK,EAAEiwK,UAAS,EAAGjmJ,EAAEoqD,OAAOp0E,EAAEo0E,KAAKpqD,EAAEoqD,QAAQ52E,EAAEwC,EAAEkwK,gBAAgB1yK,EAAE0C,GAAG1C,EAAEo3J,IAAIroJ,EAAE/O,EAAEq3J,IAAI7qI,EAAE8kJ,GAAGtxK,EAAE+O,GAASA,EAAE65I,UAAU5oJ,EAAEwC,EAAEszJ,GAAGpzJ,EAAE8pB,GAAU9pB,GAAG,IAAK,SAAS,IAAK,SAAS,IAAK,QAAQy+E,GAAE,OAC9fnhF,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,QAAQ,IAAK,QAAQ,IAAI6jC,EAAE,EAAEA,EAAE8sC,GAAG9gG,OAAOg0D,IAAI8wB,GAAEgc,GAAG9sC,GAAGrwD,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,SAAS20D,GAAE,QAAQnhF,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,MAAM,IAAK,QAAQ,IAAK,OAAO20D,GAAE,QAAQnhF,GAAGmhF,GAAE,OAAOnhF,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,OAAO20D,GAAE,QAAQnhF,GAAGmhF,GAAE,SAASnhF,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,UAAU20D,GAAE,SAASnhF,GAAGqwD,EAAE7jC,EAAE,MAAM,IAAK,QAAQqgI,GAAG7sJ,EAAEwsB,GAAG6jC,EAAEo8F,GAAGzsJ,EAAEwsB,GAAG20D,GAAE,UAAUnhF,GAAGi2J,GAAGztH,EAAE,YAAY,MAAM,IAAK,SAAS6nB,EAAEg9F,GAAGrtJ,EAAEwsB,GAAG,MAAM,IAAK,SAASxsB,EAAE2sJ,cAAc,CAAC6lB,cAAchmJ,EAAEimJ,UAAUpiH,EAAEnxD,EAAE,GAAGstB,EAAE,CAACxxB,WAAM,IAASmmF,GAAE,UAAUnhF,GAAGi2J,GAAGztH,EAAE,YAAY,MAAM,IAAK,WAAWklH,GAAG1tJ,EACtgBwsB,GAAG6jC,EAAEo9F,GAAGztJ,EAAEwsB,GAAG20D,GAAE,UAAUnhF,GAAGi2J,GAAGztH,EAAE,YAAY,MAAM,QAAQ6nB,EAAE7jC,EAAEqpI,GAAGnzJ,EAAE2tD,GAAG,IAAI7iC,EAAE6iC,EAAE,IAAIxkD,KAAK2hB,EAAE,GAAGA,EAAE3qB,eAAegJ,GAAG,CAAC,IAAIsiD,EAAE3gC,EAAE3hB,GAAG,UAAUA,EAAEmpJ,GAAGh1J,EAAEmuD,GAAG,4BAA4BtiD,EAAuB,OAApBsiD,EAAEA,EAAEA,EAAErmD,YAAO,IAAgBomJ,GAAGluJ,EAAEmuD,GAAI,aAAatiD,EAAE,kBAAkBsiD,GAAG,aAAazrD,GAAG,KAAKyrD,IAAIsgG,GAAGzuJ,EAAEmuD,GAAG,kBAAkBA,GAAGsgG,GAAGzuJ,EAAE,GAAGmuD,GAAG,mCAAmCtiD,GAAG,6BAA6BA,GAAG,cAAcA,IAAIu8I,EAAGvlJ,eAAegJ,GAAG,MAAMsiD,GAAG8nG,GAAGztH,EAAE38B,GAAG,MAAMsiD,GAAGk8F,EAAGrqJ,EAAE6L,EAAEsiD,EAAE3rD,IAAI,OAAOE,GAAG,IAAK,QAAQ0pJ,GAAGpsJ,GAAGmtJ,GAAGntJ,EAAEwsB,GAAE,GACnf,MAAM,IAAK,WAAW4/H,GAAGpsJ,GAAG4tJ,GAAG5tJ,GAAG,MAAM,IAAK,SAAS,MAAMwsB,EAAExxB,OAAOgF,EAAE60H,aAAa,QAAQ,GAAGo3B,GAAGz/H,EAAExxB,QAAQ,MAAM,IAAK,SAASgF,EAAEyyK,WAAWjmJ,EAAEimJ,SAAmB,OAAVjqI,EAAEhc,EAAExxB,OAAcuyJ,GAAGvtJ,IAAIwsB,EAAEimJ,SAASjqI,GAAE,GAAI,MAAMhc,EAAExkB,cAAculJ,GAAGvtJ,IAAIwsB,EAAEimJ,SAASjmJ,EAAExkB,cAAa,GAAI,MAAM,QAAQ,oBAAoBqoD,EAAE+/E,UAAUpwI,EAAEsoB,QAAQ4tI,IAAIW,GAAGn0J,EAAE8pB,KAAKzd,EAAE+gJ,WAAW,GAAG,OAAO/gJ,EAAE9F,MAAM8F,EAAE+gJ,WAAW,KAAK,OAAO,KAAK,KAAK,EAAE,GAAG9vJ,GAAG,MAAM+O,EAAE65I,UAAU4oB,GAAGxxK,EAAE+O,EAAE/O,EAAEitK,cAAczgJ,OAAO,CAAC,GAAG,kBAAkBA,GAAG,OAAOzd,EAAE65I,UAAU,MAAMzoJ,MAAM0zD,EAAE,MACvfrrB,EAAEokI,GAAGD,GAAGxiJ,SAASyiJ,GAAGH,GAAGtiJ,SAASmmJ,GAAGvhK,IAAIy5B,EAAEz5B,EAAE65I,UAAUp8H,EAAEzd,EAAEk+J,cAAczkI,EAAE4uH,IAAIroJ,EAAEy5B,EAAEomH,YAAYpiI,IAAIzd,EAAE+gJ,WAAW,MAAKtnH,GAAG,IAAIA,EAAEmmH,SAASnmH,EAAEA,EAAE4kH,eAAer4B,eAAevoG,IAAK4qI,IAAIroJ,EAAEA,EAAE65I,UAAUpgH,GAAG,OAAO,KAAK,KAAK,GAA0B,OAAvBquF,GAAEK,IAAG1qG,EAAEzd,EAAEihJ,cAAiB,KAAiB,GAAZjhJ,EAAE+gJ,YAAqB/gJ,EAAE+5J,eAAetgI,EAAEz5B,IAAEy5B,EAAE,OAAOhc,EAAEA,GAAE,EAAG,OAAOxsB,OAAE,IAAS+O,EAAEk+J,cAAcrtK,UAAU0wK,GAAGvhK,IAAsByd,EAAE,QAApB9pB,EAAE1C,EAAEgwJ,eAAyBxnH,GAAG,OAAO9lC,GAAsB,QAAlBA,EAAE1C,EAAEuoC,MAAM6nH,WAAmC,QAAhBvkJ,EAAEkD,EAAE+8J,cAAsB/8J,EAAE+8J,YAAYppK,EAAEA,EAAEmpK,WAAWhgK,IAAIkD,EAAE+8J,YAAY/8J,EAAE68J,WACtflpK,EAAEA,EAAEmpK,WAAW,MAAMnpK,EAAEotJ,UAAU,IAAQtnH,IAAIhc,GAAG,KAAY,EAAPzd,EAAEmF,QAAW,OAAOlU,IAAG,IAAK+O,EAAEk+J,cAAc2E,4BAA4B,KAAe,EAAV16C,GAAE/sG,SAAW2sG,KAAI67C,KAAK77C,GAAE87C,KAAY97C,KAAI67C,IAAI77C,KAAI87C,KAAG97C,GAAE+7C,IAAG,IAAIC,IAAI,OAAO/6C,KAAIg7C,GAAGh7C,GAAEf,IAAGg8C,GAAGj7C,GAAE+6C,QAAQtqI,GAAGhc,KAAEzd,EAAE+gJ,WAAW,GAAS,MAAK,KAAK,EAAE,OAAO+c,KAAW,KAAK,KAAK,GAAG,OAAOpE,GAAG15J,GAAG,KAAK,KAAK,GAAG,OAAO6oD,GAAE7oD,EAAE3H,OAAOq+J,KAAK,KAAK,KAAK,GAA0B,GAAvB5uC,GAAEK,IAAwB,QAArB1qG,EAAEzd,EAAEihJ,eAA0B,OAAO,KAA0C,GAArCttJ,EAAE,KAAiB,GAAZqM,EAAE+gJ,WAA+B,QAAjBjkJ,EAAE2gB,EAAEwlJ,YAAsB,GAAGtvK,EAAE4vK,GAAG9lJ,GAAE,QAAS,GAAGsqG,KAAI67C,IAAI,OAAO3yK,GAAG,KAC9e,GADmfA,EAAE8vJ,WACjf,IAAIjkJ,EAAEkD,EAAEw5B,MAAM,OAAO18B,GAAG,CAAS,GAAG,QAAX7L,EAAEgtK,GAAGnhK,IAAe,CAAyJ,IAAxJkD,EAAE+gJ,WAAW,GAAGwiB,GAAG9lJ,GAAE,GAAoB,QAAhB9pB,EAAE1C,EAAEqpK,eAAuBt6J,EAAEs6J,YAAY3mK,EAAEqM,EAAE+gJ,WAAW,GAAG,OAAOtjI,EAAEo/I,aAAa78J,EAAE+8J,YAAY,MAAM/8J,EAAE68J,WAAWp/I,EAAEo/I,WAAep/I,EAAEzd,EAAEw5B,MAAM,OAAO/b,GAAO3gB,EAAE28B,GAAN9lC,EAAE8pB,GAAQsjI,WAAW,EAAEptJ,EAAEmpK,WAAW,KAAKnpK,EAAEopK,YAAY,KAAKppK,EAAEkpK,WAAW,KAAmB,QAAd5rK,EAAE0C,EAAEmtJ,YAAoBntJ,EAAEimK,oBAAoB,EAAEjmK,EAAEomK,eAAej9J,EAAEnJ,EAAE6lC,MAAM,KAAK7lC,EAAEuqK,cAAc,KAAKvqK,EAAEstJ,cAAc,KAAKttJ,EAAE2mK,YAAY,KAAK3mK,EAAEvB,aAAa,OAAOuB,EAAEimK,oBAAoB3oK,EAAE2oK,oBAC3ejmK,EAAEomK,eAAe9oK,EAAE8oK,eAAepmK,EAAE6lC,MAAMvoC,EAAEuoC,MAAM7lC,EAAEuqK,cAAcjtK,EAAEitK,cAAcvqK,EAAEstJ,cAAchwJ,EAAEgwJ,cAActtJ,EAAE2mK,YAAYrpK,EAAEqpK,YAAYx9J,EAAE7L,EAAEmB,aAAauB,EAAEvB,aAAa,OAAO0K,EAAE,KAAK,CAACi9J,eAAej9J,EAAEi9J,eAAeD,aAAah9J,EAAEg9J,aAAaK,WAAWr9J,EAAEq9J,aAAa18I,EAAEA,EAAE4jI,QAA2B,OAAnB/kF,GAAE6rD,GAAY,EAAVA,GAAE/sG,QAAU,GAAUpb,EAAEw5B,MAAM18B,EAAEA,EAAEukJ,aAAa,CAAC,IAAI1tJ,EAAE,GAAW,QAAR1C,EAAEgtK,GAAGnhK,KAAa,GAAGkD,EAAE+gJ,WAAW,GAAGptJ,GAAE,EAAmB,QAAhB8lC,EAAExoC,EAAEqpK,eAAuBt6J,EAAEs6J,YAAY7gI,EAAEz5B,EAAE+gJ,WAAW,GAAGwiB,GAAG9lJ,GAAE,GAAI,OAAOA,EAAE0lJ,MAAM,WAAW1lJ,EAAE4lJ,WAAWvmK,EAAEgkJ,UAAU,OACne,QAD0e9gJ,EACpgBA,EAAE68J,WAAWp/I,EAAEo/I,cAAsB78J,EAAE88J,WAAW,MAAM,UAAU,EAAEnE,KAAKl7I,EAAEylJ,mBAAmBzlJ,EAAE2lJ,gBAAgB,EAAE3pI,IAAIz5B,EAAE+gJ,WAAW,GAAGptJ,GAAE,EAAG4vK,GAAG9lJ,GAAE,GAAIzd,EAAE+5J,eAAe/5J,EAAE45J,oBAAoBngI,EAAE,GAAGhc,EAAEulJ,aAAalmK,EAAEukJ,QAAQrhJ,EAAEw5B,MAAMx5B,EAAEw5B,MAAM18B,IAAa,QAAT28B,EAAEhc,EAAE0hC,MAAc1lB,EAAE4nH,QAAQvkJ,EAAEkD,EAAEw5B,MAAM18B,EAAE2gB,EAAE0hC,KAAKriD,GAAG,OAAO,OAAO2gB,EAAE0lJ,MAAM,IAAI1lJ,EAAE2lJ,iBAAiB3lJ,EAAE2lJ,eAAezK,KAAK,KAAKl/H,EAAEhc,EAAE0lJ,KAAK1lJ,EAAEwlJ,UAAUxpI,EAAEhc,EAAE0lJ,KAAK1pI,EAAE4nH,QAAQ5jI,EAAEo/I,WAAW78J,EAAE68J,WAAWp/I,EAAEylJ,mBAAmBvK,KAAKl/H,EAAE4nH,QAAQ,KAAKrhJ,EAAEmoH,GAAE/sG,QAAQkhD,GAAE6rD,GAAEx0H,EAAI,EAAFqM,EAAI,EAAI,EAAFA,GAAKy5B,GAAG,KAAK,MAAMroC,MAAM0zD,EAAE,IACrgB9kD,EAAEoxB,MAAO,SAAS8yI,GAAGjzK,GAAG,OAAOA,EAAEmgC,KAAK,KAAK,EAAEy3B,GAAE53D,EAAEoH,OAAOq+J,KAAK,IAAI12J,EAAE/O,EAAE8vJ,UAAU,OAAS,KAAF/gJ,GAAQ/O,EAAE8vJ,WAAa,KAAH/gJ,EAAQ,GAAG/O,GAAG,KAAK,KAAK,EAA+B,GAA7B6sK,KAAKh2C,GAAEM,IAAGN,GAAEO,IAAoB,KAAO,IAAxBroH,EAAE/O,EAAE8vJ,YAAwB,MAAM3vJ,MAAM0zD,EAAE,MAA6B,OAAvB7zD,EAAE8vJ,WAAa,KAAH/gJ,EAAQ,GAAU/O,EAAE,KAAK,EAAE,OAAO+sK,GAAG/sK,GAAG,KAAK,KAAK,GAAG,OAAO62H,GAAEK,IAAmB,MAAhBnoH,EAAE/O,EAAE8vJ,YAAkB9vJ,EAAE8vJ,WAAa,KAAH/gJ,EAAQ,GAAG/O,GAAG,KAAK,KAAK,GAAG,OAAO62H,GAAEK,IAAG,KAAK,KAAK,EAAE,OAAO21C,KAAK,KAAK,KAAK,GAAG,OAAOpE,GAAGzoK,GAAG,KAAK,QAAQ,OAAO,MAAM,SAASkzK,GAAGlzK,EAAE+O,GAAG,MAAM,CAAC/T,MAAMgF,EAAE1D,OAAOyS,EAAE6K,MAAM+xI,GAAG58I,IAjBvduiK,GAAG,SAAStxK,EAAE+O,GAAG,IAAI,IAAIy5B,EAAEz5B,EAAEw5B,MAAM,OAAOC,GAAG,CAAC,GAAG,IAAIA,EAAErI,KAAK,IAAIqI,EAAErI,IAAIngC,EAAE80H,YAAYtsF,EAAEogH,gBAAgB,GAAG,IAAIpgH,EAAErI,KAAK,OAAOqI,EAAED,MAAM,CAACC,EAAED,MAAMyjH,OAAOxjH,EAAEA,EAAEA,EAAED,MAAM,SAAS,GAAGC,IAAIz5B,EAAE,MAAM,KAAK,OAAOy5B,EAAE4nH,SAAS,CAAC,GAAG,OAAO5nH,EAAEwjH,QAAQxjH,EAAEwjH,SAASj9I,EAAE,OAAOy5B,EAAEA,EAAEwjH,OAAOxjH,EAAE4nH,QAAQpE,OAAOxjH,EAAEwjH,OAAOxjH,EAAEA,EAAE4nH,UAChSmhB,GAAG,SAASvxK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,IAAImJ,EAAE7L,EAAEitK,cAAc,GAAGphK,IAAI2gB,EAAE,CAAC,IAAsW6jC,EAAE7iC,EAApWhrB,EAAEuM,EAAE65I,UAAgC,OAAtBgkB,GAAGH,GAAGtiJ,SAASnqB,EAAE,KAAYwoC,GAAG,IAAK,QAAQ38B,EAAE4gJ,GAAGjqJ,EAAEqJ,GAAG2gB,EAAEigI,GAAGjqJ,EAAEgqB,GAAGxsB,EAAE,GAAG,MAAM,IAAK,SAAS6L,EAAEwhJ,GAAG7qJ,EAAEqJ,GAAG2gB,EAAE6gI,GAAG7qJ,EAAEgqB,GAAGxsB,EAAE,GAAG,MAAM,IAAK,SAAS6L,EAAE3M,EAAE,GAAG2M,EAAE,CAAC7Q,WAAM,IAASwxB,EAAEttB,EAAE,GAAGstB,EAAE,CAACxxB,WAAM,IAASgF,EAAE,GAAG,MAAM,IAAK,WAAW6L,EAAE4hJ,GAAGjrJ,EAAEqJ,GAAG2gB,EAAEihI,GAAGjrJ,EAAEgqB,GAAGxsB,EAAE,GAAG,MAAM,QAAQ,oBAAoB6L,EAAEukI,SAAS,oBAAoB5jH,EAAE4jH,UAAU5tI,EAAE8lB,QAAQ4tI,IAA2B,IAAI7lG,KAA3BwlG,GAAGrtH,EAAEhc,GAAWgc,EAAE,KAAc38B,EAAE,IAAI2gB,EAAE3pB,eAAewtD,IAAIxkD,EAAEhJ,eAAewtD,IAAI,MAAMxkD,EAAEwkD,GAAG,GAAG,UAC/eA,EAAE,IAAI7iC,KAAKhrB,EAAEqJ,EAAEwkD,GAAK7tD,EAAEK,eAAe2qB,KAAKgb,IAAIA,EAAE,IAAIA,EAAEhb,GAAG,QAAQ,4BAA4B6iC,GAAG,aAAaA,GAAG,mCAAmCA,GAAG,6BAA6BA,GAAG,cAAcA,IAAI+3F,EAAGvlJ,eAAewtD,GAAGrwD,IAAIA,EAAE,KAAKA,EAAEA,GAAG,IAAIjE,KAAKs0D,EAAE,OAAO,IAAIA,KAAK7jC,EAAE,CAAC,IAAI2hC,EAAE3hC,EAAE6jC,GAAyB,GAAtB7tD,EAAE,MAAMqJ,EAAEA,EAAEwkD,QAAG,EAAU7jC,EAAE3pB,eAAewtD,IAAIlC,IAAI3rD,IAAI,MAAM2rD,GAAG,MAAM3rD,GAAG,GAAG,UAAU6tD,EAAE,GAAG7tD,EAAE,CAAC,IAAIgrB,KAAKhrB,GAAGA,EAAEK,eAAe2qB,IAAI2gC,GAAGA,EAAEtrD,eAAe2qB,KAAKgb,IAAIA,EAAE,IAAIA,EAAEhb,GAAG,IAAI,IAAIA,KAAK2gC,EAAEA,EAAEtrD,eAAe2qB,IAAIhrB,EAAEgrB,KAAK2gC,EAAE3gC,KAAKgb,IAAIA,EAAE,IACpfA,EAAEhb,GAAG2gC,EAAE3gC,SAASgb,IAAIxoC,IAAIA,EAAE,IAAIA,EAAEjE,KAAKs0D,EAAE7nB,IAAIA,EAAE2lB,MAAM,4BAA4BkC,GAAGlC,EAAEA,EAAEA,EAAErmD,YAAO,EAAOtF,EAAEA,EAAEA,EAAEsF,YAAO,EAAO,MAAMqmD,GAAG3rD,IAAI2rD,IAAInuD,EAAEA,GAAG,IAAIjE,KAAKs0D,EAAElC,IAAI,aAAakC,EAAE7tD,IAAI2rD,GAAG,kBAAkBA,GAAG,kBAAkBA,IAAInuD,EAAEA,GAAG,IAAIjE,KAAKs0D,EAAE,GAAGlC,GAAG,mCAAmCkC,GAAG,6BAA6BA,IAAI+3F,EAAGvlJ,eAAewtD,IAAI,MAAMlC,GAAG8nG,GAAGvzJ,EAAE2tD,GAAGrwD,GAAGwC,IAAI2rD,IAAInuD,EAAE,MAAMA,EAAEA,GAAG,IAAIjE,KAAKs0D,EAAElC,IAAI3lB,IAAIxoC,EAAEA,GAAG,IAAIjE,KAAK,QAAQysC,GAAG9lC,EAAE1C,GAAK+O,EAAEs6J,YAAY3mK,KAAEqM,EAAE+gJ,WAAW,KAC5c0hB,GAAG,SAASxxK,EAAE+O,EAAEy5B,EAAEhc,GAAGgc,IAAIhc,IAAIzd,EAAE+gJ,WAAW,IAc1C,IAAIqjB,GAAG,oBAAoB53I,QAAQA,QAAQ1S,IAAI,SAASuqJ,GAAGpzK,EAAE+O,GAAG,IAAIy5B,EAAEz5B,EAAEzS,OAAOkwB,EAAEzd,EAAE6K,MAAM,OAAO4S,GAAG,OAAOgc,IAAIhc,EAAEm/H,GAAGnjH,IAAI,OAAOA,GAAGilC,GAAGjlC,EAAEphC,MAAM2H,EAAEA,EAAE/T,MAAM,OAAOgF,GAAG,IAAIA,EAAEmgC,KAAKstC,GAAGztE,EAAEoH,MAAM,IAAIvI,QAAQC,MAAMiQ,GAAG,MAAMrM,GAAGuX,YAAW,WAAW,MAAMvX,MAAsH,SAAS2wK,GAAGrzK,GAAG,IAAI+O,EAAE/O,EAAEiJ,IAAI,GAAG,OAAO8F,EAAE,GAAG,oBAAoBA,EAAE,IAAIA,EAAE,MAAM,MAAMy5B,GAAG8qI,GAAGtzK,EAAEwoC,QAAQz5B,EAAEob,QAAQ,KACld,SAASopJ,GAAGvzK,EAAE+O,GAAG,OAAOA,EAAEoxB,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,OAAO,KAAK,EAAE,GAAe,IAAZpxB,EAAE+gJ,WAAe,OAAO9vJ,EAAE,CAAC,IAAIwoC,EAAExoC,EAAEitK,cAAczgJ,EAAExsB,EAAEgwJ,cAA4BjhJ,GAAd/O,EAAE+O,EAAE65I,WAAcuiB,wBAAwBp8J,EAAEk9J,cAAcl9J,EAAE3H,KAAKohC,EAAE2/H,GAAGp5J,EAAE3H,KAAKohC,GAAGhc,GAAGxsB,EAAEwzK,oCAAoCzkK,EAAE,OAAO,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,OAAO,MAAM5O,MAAM0zD,EAAE,MAC7U,SAAS4/G,GAAGzzK,EAAE+O,GAAgD,GAAG,QAAhCA,EAAE,QAAlBA,EAAEA,EAAEs6J,aAAuBt6J,EAAE68J,WAAW,MAAiB,CAAC,IAAIpjI,EAAEz5B,EAAEA,EAAExQ,KAAK,EAAE,CAAC,IAAIiqC,EAAErI,IAAIngC,KAAKA,EAAE,CAAC,IAAIwsB,EAAEgc,EAAE4H,QAAQ5H,EAAE4H,aAAQ,OAAO,IAAS5jB,GAAGA,IAAIgc,EAAEA,EAAEjqC,WAAWiqC,IAAIz5B,IAAI,SAAS2kK,GAAG1zK,EAAE+O,GAAgD,GAAG,QAAhCA,EAAE,QAAlBA,EAAEA,EAAEs6J,aAAuBt6J,EAAE68J,WAAW,MAAiB,CAAC,IAAIpjI,EAAEz5B,EAAEA,EAAExQ,KAAK,EAAE,CAAC,IAAIiqC,EAAErI,IAAIngC,KAAKA,EAAE,CAAC,IAAIwsB,EAAEgc,EAAEpiC,OAAOoiC,EAAE4H,QAAQ5jB,IAAIgc,EAAEA,EAAEjqC,WAAWiqC,IAAIz5B,IACtV,SAAS4kK,GAAG3zK,EAAE+O,EAAEy5B,GAAG,OAAOA,EAAErI,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAW,YAARuzI,GAAG,EAAElrI,GAAU,KAAK,EAAgB,GAAdxoC,EAAEwoC,EAAEogH,UAAyB,EAAZpgH,EAAEsnH,UAAY,GAAG,OAAO/gJ,EAAE/O,EAAEsrK,wBAAwB,CAAC,IAAI9+I,EAAEgc,EAAEyjI,cAAczjI,EAAEphC,KAAK2H,EAAEk+J,cAAc9E,GAAG3/H,EAAEphC,KAAK2H,EAAEk+J,eAAejtK,EAAEkxK,mBAAmB1kJ,EAAEzd,EAAEihJ,cAAchwJ,EAAEwzK,qCAAyE,YAApB,QAAhBzkK,EAAEy5B,EAAE6gI,cAAsBa,GAAG1hI,EAAEz5B,EAAE/O,IAAU,KAAK,EAAkB,GAAG,QAAnB+O,EAAEy5B,EAAE6gI,aAAwB,CAAQ,GAAPrpK,EAAE,KAAQ,OAAOwoC,EAAED,MAAM,OAAOC,EAAED,MAAMpI,KAAK,KAAK,EAAEngC,EAAEwoC,EAAED,MAAMqgH,UAAU,MAAM,KAAK,EAAE5oJ,EAAEwoC,EAAED,MAAMqgH,UAAUshB,GAAG1hI,EAAEz5B,EAAE/O,GAAG,OACpf,KAAK,EAA+E,OAA7EA,EAAEwoC,EAAEogH,eAAU,OAAO75I,GAAe,EAAZy5B,EAAEsnH,WAAa+G,GAAGruH,EAAEphC,KAAKohC,EAAEykI,gBAAgBjtK,EAAEwH,SAAe,KAAK,EAAS,KAAK,EAAS,KAAK,GAAG,OAAO,KAAK,GAAoH,YAAjH,OAAOghC,EAAEwnH,gBAAgBxnH,EAAEA,EAAEqnH,UAAU,OAAOrnH,IAAIA,EAAEA,EAAEwnH,cAAc,OAAOxnH,IAAIA,EAAEA,EAAEynH,WAAW,OAAOznH,GAAGorH,GAAGprH,OAAa,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,OAAO,MAAMroC,MAAM0zD,EAAE,MAC3T,SAAS+/G,GAAG5zK,EAAE+O,EAAEy5B,GAAiC,OAA9B,oBAAoBqrI,IAAIA,GAAG9kK,GAAUA,EAAEoxB,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAmB,GAAG,QAAnBngC,EAAE+O,EAAEs6J,cAAyC,QAAfrpK,EAAEA,EAAE4rK,YAAqB,CAAC,IAAIp/I,EAAExsB,EAAEzB,KAAKspK,GAAG,GAAGr/H,EAAE,GAAGA,GAAE,WAAW,IAAIxoC,EAAEwsB,EAAE,EAAE,CAAC,IAAIgc,EAAExoC,EAAEowC,QAAQ,QAAG,IAAS5H,EAAE,CAAC,IAAIhmC,EAAEuM,EAAE,IAAIy5B,IAAI,MAAM6nB,GAAGijH,GAAG9wK,EAAE6tD,IAAIrwD,EAAEA,EAAEzB,WAAWyB,IAAIwsB,MAAK,MAAM,KAAK,EAAE6mJ,GAAGtkK,GAAiB,oBAAdy5B,EAAEz5B,EAAE65I,WAAgCkrB,sBALxG,SAAY9zK,EAAE+O,GAAG,IAAIA,EAAEhS,MAAMiD,EAAEitK,cAAcl+J,EAAEnJ,MAAM5F,EAAEgwJ,cAAcjhJ,EAAE+kK,uBAAuB,MAAMtrI,GAAG8qI,GAAGtzK,EAAEwoC,IAKkBurI,CAAGhlK,EAAEy5B,GAAG,MAAM,KAAK,EAAE6qI,GAAGtkK,GAAG,MAAM,KAAK,EAAEilK,GAAGh0K,EAAE+O,EAAEy5B,IACna,SAASyrI,GAAGj0K,GAAG,IAAI+O,EAAE/O,EAAE6vJ,UAAU7vJ,EAAEgsJ,OAAO,KAAKhsJ,EAAEuoC,MAAM,KAAKvoC,EAAEgwJ,cAAc,KAAKhwJ,EAAEqpK,YAAY,KAAKrpK,EAAEmB,aAAa,KAAKnB,EAAE6vJ,UAAU,KAAK7vJ,EAAE8rK,YAAY,KAAK9rK,EAAE4rK,WAAW,KAAK5rK,EAAEmwK,aAAa,KAAKnwK,EAAEitK,cAAc,KAAKjtK,EAAE4oJ,UAAU,KAAK,OAAO75I,GAAGklK,GAAGllK,GAAG,SAASmlK,GAAGl0K,GAAG,OAAO,IAAIA,EAAEmgC,KAAK,IAAIngC,EAAEmgC,KAAK,IAAIngC,EAAEmgC,IAC1S,SAASg0I,GAAGn0K,GAAGA,EAAE,CAAC,IAAI,IAAI+O,EAAE/O,EAAEgsJ,OAAO,OAAOj9I,GAAG,CAAC,GAAGmlK,GAAGnlK,GAAG,CAAC,IAAIy5B,EAAEz5B,EAAE,MAAM/O,EAAE+O,EAAEA,EAAEi9I,OAAO,MAAM7rJ,MAAM0zD,EAAE,MAAqB,OAAd9kD,EAAEy5B,EAAEogH,UAAiBpgH,EAAErI,KAAK,KAAK,EAAE,IAAI3T,GAAE,EAAG,MAAM,KAAK,EAA+B,KAAK,EAAEzd,EAAEA,EAAE2iJ,cAAcllI,GAAE,EAAG,MAAM,QAAQ,MAAMrsB,MAAM0zD,EAAE,MAAmB,GAAZrrB,EAAEsnH,YAAerB,GAAG1/I,EAAE,IAAIy5B,EAAEsnH,YAAY,IAAI9vJ,EAAE+O,EAAE,IAAIy5B,EAAExoC,IAAI,CAAC,KAAK,OAAOwoC,EAAE4nH,SAAS,CAAC,GAAG,OAAO5nH,EAAEwjH,QAAQkoB,GAAG1rI,EAAEwjH,QAAQ,CAACxjH,EAAE,KAAK,MAAMxoC,EAAEwoC,EAAEA,EAAEwjH,OAAiC,IAA1BxjH,EAAE4nH,QAAQpE,OAAOxjH,EAAEwjH,OAAWxjH,EAAEA,EAAE4nH,QAAQ,IAAI5nH,EAAErI,KAAK,IAAIqI,EAAErI,KAAK,KAAKqI,EAAErI,KAAK,CAAC,GAAe,EAAZqI,EAAEsnH,UAAY,SAAS/gJ,EACvf,GAAG,OAAOy5B,EAAED,OAAO,IAAIC,EAAErI,IAAI,SAASpxB,EAAOy5B,EAAED,MAAMyjH,OAAOxjH,EAAEA,EAAEA,EAAED,MAAM,KAAiB,EAAZC,EAAEsnH,WAAa,CAACtnH,EAAEA,EAAEogH,UAAU,MAAM5oJ,GAAGwsB,EACpH,SAAS4nJ,EAAGp0K,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAEmgC,IAAIz9B,EAAE,IAAI8pB,GAAG,IAAIA,EAAE,GAAG9pB,EAAE1C,EAAE0C,EAAE1C,EAAE4oJ,UAAU5oJ,EAAE4oJ,UAAUjsJ,SAASoS,EAAE,IAAIy5B,EAAEmmH,SAASnmH,EAAEmtF,WAAWT,aAAal1H,EAAE+O,GAAGy5B,EAAE0sF,aAAal1H,EAAE+O,IAAI,IAAIy5B,EAAEmmH,UAAU5/I,EAAEy5B,EAAEmtF,YAAaT,aAAal1H,EAAEwoC,IAAKz5B,EAAEy5B,GAAIssF,YAAY90H,GAA4B,QAAxBwoC,EAAEA,EAAE6rI,2BAA8B,IAAS7rI,GAAG,OAAOz5B,EAAEuZ,UAAUvZ,EAAEuZ,QAAQ4tI,UAAU,GAAG,IAAI1pI,GAAc,QAAVxsB,EAAEA,EAAEuoC,OAAgB,IAAI6rI,EAAGp0K,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEowJ,QAAQ,OAAOpwJ,GAAGo0K,EAAGp0K,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEowJ,QADxRgkB,CAAGp0K,EAAEwoC,EAAEz5B,GAE7H,SAASulK,EAAGt0K,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAEmgC,IAAIz9B,EAAE,IAAI8pB,GAAG,IAAIA,EAAE,GAAG9pB,EAAE1C,EAAE0C,EAAE1C,EAAE4oJ,UAAU5oJ,EAAE4oJ,UAAUjsJ,SAASoS,EAAEy5B,EAAE0sF,aAAal1H,EAAE+O,GAAGy5B,EAAEssF,YAAY90H,QAAQ,GAAG,IAAIwsB,GAAc,QAAVxsB,EAAEA,EAAEuoC,OAAgB,IAAI+rI,EAAGt0K,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEowJ,QAAQ,OAAOpwJ,GAAGs0K,EAAGt0K,EAAE+O,EAAEy5B,GAAGxoC,EAAEA,EAAEowJ,QAFrFkkB,CAAGt0K,EAAEwoC,EAAEz5B,GAGvI,SAASilK,GAAGh0K,EAAE+O,EAAEy5B,GAAG,IAAI,IAAa38B,EAAErJ,EAAXgqB,EAAEzd,EAAErM,GAAE,IAAS,CAAC,IAAIA,EAAE,CAACA,EAAE8pB,EAAEw/H,OAAOhsJ,EAAE,OAAO,CAAC,GAAG,OAAO0C,EAAE,MAAMvC,MAAM0zD,EAAE,MAAoB,OAAdhoD,EAAEnJ,EAAEkmJ,UAAiBlmJ,EAAEy9B,KAAK,KAAK,EAAE39B,GAAE,EAAG,MAAMxC,EAAE,KAAK,EAAiC,KAAK,EAAE6L,EAAEA,EAAE6lJ,cAAclvJ,GAAE,EAAG,MAAMxC,EAAE0C,EAAEA,EAAEspJ,OAAOtpJ,GAAE,EAAG,GAAG,IAAI8pB,EAAE2T,KAAK,IAAI3T,EAAE2T,IAAI,CAACngC,EAAE,IAAI,IAAIqwD,EAAErwD,EAAEwtB,EAAEhB,EAAE2hC,EAAE3lB,EAAEjZ,EAAE/B,IAAI,GAAGomJ,GAAGvjH,EAAE9gC,EAAE4+B,GAAG,OAAO5+B,EAAEgZ,OAAO,IAAIhZ,EAAE4Q,IAAI5Q,EAAEgZ,MAAMyjH,OAAOz8H,EAAEA,EAAEA,EAAEgZ,UAAU,CAAC,GAAGhZ,IAAI/B,EAAE,MAAMxtB,EAAE,KAAK,OAAOuvB,EAAE6gI,SAAS,CAAC,GAAG,OAAO7gI,EAAEy8H,QAAQz8H,EAAEy8H,SAASx+H,EAAE,MAAMxtB,EAAEuvB,EAAEA,EAAEy8H,OAAOz8H,EAAE6gI,QAAQpE,OAAOz8H,EAAEy8H,OAAOz8H,EAAEA,EAAE6gI,QAAQ5tJ,GAAG6tD,EACrfxkD,EAAE2hB,EAAEhB,EAAEo8H,UAAU,IAAIv4F,EAAEs+F,SAASt+F,EAAEslE,WAAWC,YAAYpoG,GAAG6iC,EAAEulE,YAAYpoG,IAAI3hB,EAAE+pH,YAAYppG,EAAEo8H,gBAAgB,GAAG,IAAIp8H,EAAE2T,KAAK,GAAG,OAAO3T,EAAE+b,MAAM,CAAC18B,EAAE2gB,EAAEo8H,UAAU8I,cAAclvJ,GAAE,EAAGgqB,EAAE+b,MAAMyjH,OAAOx/H,EAAEA,EAAEA,EAAE+b,MAAM,eAAe,GAAGqrI,GAAG5zK,EAAEwsB,EAAEgc,GAAG,OAAOhc,EAAE+b,MAAM,CAAC/b,EAAE+b,MAAMyjH,OAAOx/H,EAAEA,EAAEA,EAAE+b,MAAM,SAAS,GAAG/b,IAAIzd,EAAE,MAAM,KAAK,OAAOyd,EAAE4jI,SAAS,CAAC,GAAG,OAAO5jI,EAAEw/H,QAAQx/H,EAAEw/H,SAASj9I,EAAE,OAAkB,KAAXyd,EAAEA,EAAEw/H,QAAa7rH,MAAMz9B,GAAE,GAAI8pB,EAAE4jI,QAAQpE,OAAOx/H,EAAEw/H,OAAOx/H,EAAEA,EAAE4jI,SACpa,SAASmkB,GAAGv0K,EAAE+O,GAAG,OAAOA,EAAEoxB,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAW,YAARszI,GAAG,EAAE1kK,GAAU,KAAK,EAAE,OAAO,KAAK,EAAE,IAAIy5B,EAAEz5B,EAAE65I,UAAU,GAAG,MAAMpgH,EAAE,CAAC,IAAIhc,EAAEzd,EAAEk+J,cAAcvqK,EAAE,OAAO1C,EAAEA,EAAEitK,cAAczgJ,EAAExsB,EAAE+O,EAAE3H,KAAK,IAAIyE,EAAEkD,EAAEs6J,YAA+B,GAAnBt6J,EAAEs6J,YAAY,KAAQ,OAAOx9J,EAAE,CAAgF,IAA/E28B,EAAE6uH,IAAI7qI,EAAE,UAAUxsB,GAAG,UAAUwsB,EAAEplB,MAAM,MAAMolB,EAAEjtB,MAAMytJ,GAAGxkH,EAAEhc,GAAGspI,GAAG91J,EAAE0C,GAAGqM,EAAE+mJ,GAAG91J,EAAEwsB,GAAO9pB,EAAE,EAAEA,EAAEmJ,EAAExP,OAAOqG,GAAG,EAAE,CAAC,IAAIF,EAAEqJ,EAAEnJ,GAAG2tD,EAAExkD,EAAEnJ,EAAE,GAAG,UAAUF,EAAEwyJ,GAAGxsH,EAAE6nB,GAAG,4BAA4B7tD,EAAE0rJ,GAAG1lH,EAAE6nB,GAAG,aAAa7tD,EAAEisJ,GAAGjmH,EAAE6nB,GAAGg6F,EAAG7hH,EAAEhmC,EAAE6tD,EAAEthD,GAAG,OAAO/O,GAAG,IAAK,QAAQitJ,GAAGzkH,EAAEhc,GAAG,MAChf,IAAK,WAAWmhI,GAAGnlH,EAAEhc,GAAG,MAAM,IAAK,SAASzd,EAAEy5B,EAAEmkH,cAAc6lB,YAAYhqI,EAAEmkH,cAAc6lB,cAAchmJ,EAAEimJ,SAAmB,OAAVzyK,EAAEwsB,EAAExxB,OAAcuyJ,GAAG/kH,IAAIhc,EAAEimJ,SAASzyK,GAAE,GAAI+O,MAAMyd,EAAEimJ,WAAW,MAAMjmJ,EAAExkB,aAAaulJ,GAAG/kH,IAAIhc,EAAEimJ,SAASjmJ,EAAExkB,cAAa,GAAIulJ,GAAG/kH,IAAIhc,EAAEimJ,SAASjmJ,EAAEimJ,SAAS,GAAG,IAAG,MAAO,OAAO,KAAK,EAAE,GAAG,OAAO1jK,EAAE65I,UAAU,MAAMzoJ,MAAM0zD,EAAE,MAA4C,YAAtC9kD,EAAE65I,UAAUgG,UAAU7/I,EAAEk+J,eAAqB,KAAK,EAA8D,aAA5Dl+J,EAAEA,EAAE65I,WAAYwK,UAAUrkJ,EAAEqkJ,SAAQ,EAAGQ,GAAG7kJ,EAAE2iJ,iBAAuB,KAAK,GAAG,OAAO,KAAK,GACzb,GAD4blpH,EAAEz5B,EAAE,OAAOA,EAAEihJ,cACvexjI,GAAE,GAAIA,GAAE,EAAGgc,EAAEz5B,EAAEw5B,MAAMisI,GAAG9M,MAAS,OAAOl/H,EAAExoC,EAAE,IAAIA,EAAEwoC,IAAI,CAAC,GAAG,IAAIxoC,EAAEmgC,IAAIt0B,EAAE7L,EAAE4oJ,UAAUp8H,EAAa,oBAAV3gB,EAAEA,EAAE7H,OAA4BixJ,YAAYppJ,EAAEopJ,YAAY,UAAU,OAAO,aAAappJ,EAAExD,QAAQ,QAASwD,EAAE7L,EAAE4oJ,UAAkClmJ,OAAE,KAA1BA,EAAE1C,EAAEitK,cAAcjpK,QAAoB,OAAOtB,GAAGA,EAAEG,eAAe,WAAWH,EAAE2F,QAAQ,KAAKwD,EAAE7H,MAAMqE,QAAQ0sJ,GAAG,UAAUryJ,SAAS,GAAG,IAAI1C,EAAEmgC,IAAIngC,EAAE4oJ,UAAUgG,UAAUpiI,EAAE,GAAGxsB,EAAEitK,kBAAmB,IAAG,KAAKjtK,EAAEmgC,KAAK,OAAOngC,EAAEgwJ,eAAe,OAAOhwJ,EAAEgwJ,cAAcC,WAAW,EAACpkJ,EAAE7L,EAAEuoC,MAAM6nH,SAAUpE,OAAOhsJ,EAAEA,EACnf6L,EAAE,SAAc,GAAG,OAAO7L,EAAEuoC,MAAM,CAACvoC,EAAEuoC,MAAMyjH,OAAOhsJ,EAAEA,EAAEA,EAAEuoC,MAAM,UAAS,GAAGvoC,IAAIwoC,EAAE,MAAM,KAAK,OAAOxoC,EAAEowJ,SAAS,CAAC,GAAG,OAAOpwJ,EAAEgsJ,QAAQhsJ,EAAEgsJ,SAASxjH,EAAE,MAAMxoC,EAAEA,EAAEA,EAAEgsJ,OAAOhsJ,EAAEowJ,QAAQpE,OAAOhsJ,EAAEgsJ,OAAOhsJ,EAAEA,EAAEowJ,QAAc,YAANqkB,GAAG1lK,GAAU,KAAK,GAAS,YAAN0lK,GAAG1lK,GAAU,KAAK,GAAG,OAAO,MAAM5O,MAAM0zD,EAAE,MAAO,SAAS4gH,GAAGz0K,GAAG,IAAI+O,EAAE/O,EAAEqpK,YAAY,GAAG,OAAOt6J,EAAE,CAAC/O,EAAEqpK,YAAY,KAAK,IAAI7gI,EAAExoC,EAAE4oJ,UAAU,OAAOpgH,IAAIA,EAAExoC,EAAE4oJ,UAAU,IAAIuqB,IAAIpkK,EAAExS,SAAQ,SAASwS,GAAG,IAAIyd,EAAEkoJ,GAAGp5J,KAAK,KAAKtb,EAAE+O,GAAGy5B,EAAEpf,IAAIra,KAAKy5B,EAAE3uB,IAAI9K,GAAGA,EAAE7M,KAAKsqB,EAAEA,QAC/c,IAAImoJ,GAAG,oBAAoB5nI,QAAQA,QAAQ60C,IAAI,SAASgzF,GAAG50K,EAAE+O,EAAEy5B,IAAGA,EAAEmhI,GAAGnhI,EAAE,OAAQrI,IAAI,EAAEqI,EAAE1R,QAAQ,CAAC1c,QAAQ,MAAM,IAAIoS,EAAEzd,EAAE/T,MAAsD,OAAhDwtC,EAAE1uB,SAAS,WAAW+6J,KAAKA,IAAG,EAAGC,GAAGtoJ,GAAG4mJ,GAAGpzK,EAAE+O,IAAWy5B,EACrL,SAASusI,GAAG/0K,EAAE+O,EAAEy5B,IAAGA,EAAEmhI,GAAGnhI,EAAE,OAAQrI,IAAI,EAAE,IAAI3T,EAAExsB,EAAEoH,KAAKgqK,yBAAyB,GAAG,oBAAoB5kJ,EAAE,CAAC,IAAI9pB,EAAEqM,EAAE/T,MAAMwtC,EAAE1R,QAAQ,WAAmB,OAARs8I,GAAGpzK,EAAE+O,GAAUyd,EAAE9pB,IAAI,IAAImJ,EAAE7L,EAAE4oJ,UAA8O,OAApO,OAAO/8I,GAAG,oBAAoBA,EAAEmpK,oBAAoBxsI,EAAE1uB,SAAS,WAAW,oBAAoB0S,IAAI,OAAOyoJ,GAAGA,GAAG,IAAIpsJ,IAAI,CAACvmB,OAAO2yK,GAAGp7J,IAAIvX,MAAM8wK,GAAGpzK,EAAE+O,IAAI,IAAIy5B,EAAEz5B,EAAE6K,MAAMtX,KAAK0yK,kBAAkBjmK,EAAE/T,MAAM,CAACk6K,eAAe,OAAO1sI,EAAEA,EAAE,OAAcA,EAC7Z,IA+B+T2sI,GA/B3TC,GAAGzwK,KAAK0wK,KAAKC,GAAGlrB,EAAG5E,uBAAuB+vB,GAAGnrB,EAAGzE,kBAAuCgtB,GAAG,EAAYC,GAAG,EAAEC,GAAG,EAAO/8C,GAAjD,EAAqDiC,GAAE,KAAKhC,GAAE,KAAKiB,GAAE,EAAEF,GAAE67C,GAAG6C,GAAG,KAAKC,GAAG,WAAWC,GAAG,WAAWC,GAAG,KAAK7C,GAAG,EAAE8C,IAAG,EAAGpB,GAAG,EAAS98C,GAAE,KAAKm9C,IAAG,EAAGC,GAAG,KAAKG,GAAG,KAAKY,IAAG,EAAGC,GAAG,KAAKC,GAAG,GAAGC,GAAG,KAAKC,GAAG,EAAEC,GAAG,KAAKC,GAAG,EAAE,SAAS3L,KAAK,OAAxO,KAAgP,GAAD10C,IAAe,YAAY4xC,KAAK,GAAG,GAAG,IAAIyO,GAAGA,GAAGA,GAAG,YAAYzO,KAAK,GAAG,GAC9X,SAAS+C,GAAGzqK,EAAE+O,EAAEy5B,GAAY,GAAG,KAAO,GAAnBz5B,EAAEA,EAAEmF,OAAkB,OAAO,WAAW,IAAIsY,EAAEm7I,KAAK,GAAG,KAAO,EAAF54J,GAAK,OAAO,KAAKyd,EAAE,WAAW,WAAW,GAD/C,KAAU,GACyCspG,IAAU,OAAOkB,GAAE,GAAG,OAAOxuF,EAAExoC,EAAEkoK,GAAGloK,EAAc,EAAZwoC,EAAE4tI,WAAa,IAAI,UAAU,OAAO5pJ,GAAG,KAAK,GAAGxsB,EAAE,WAAW,MAAM,KAAK,GAAGA,EAAEkoK,GAAGloK,EAAE,IAAI,KAAK,MAAM,KAAK,GAAG,KAAK,GAAGA,EAAEkoK,GAAGloK,EAAE,IAAI,KAAK,MAAM,KAAK,GAAGA,EAAE,EAAE,MAAM,QAAQ,MAAMG,MAAM0zD,EAAE,MAA4B,OAArB,OAAOkkE,IAAG/3H,IAAIg3H,MAAKh3H,EAASA,EAClX,SAAS0qK,GAAG1qK,EAAE+O,GAAG,GAAG,GAAGknK,GAAG,MAAMA,GAAG,EAAEC,GAAG,KAAK/1K,MAAM0zD,EAAE,MAAgB,GAAG,QAAb7zD,EAAEq2K,GAAGr2K,EAAE+O,IAAe,CAAC,IAAIy5B,EAAEm/H,KAAK,aAAa54J,EAFlC,KAAK,EAEgC+mH,KAFrC,KAEkD,GAADA,IAAewgD,GAAGt2K,IAAIi2H,GAAEj2H,GAFzE,IAE4E81H,IAAOmyC,MAAMhyC,GAAEj2H,GAF3F,KAEiG,EAAF81H,KAAU,KAAKttF,GAAG,KAAKA,IAAI,OAAOwtI,GAAGA,GAAG,IAAIp0F,IAAI,CAAC,CAAC5hF,EAAE+O,WAAmB,KAAby5B,EAAEwtI,GAAG75J,IAAInc,KAAgBwoC,EAAEz5B,IAAIinK,GAAG15J,IAAItc,EAAE+O,KACzQ,SAASsnK,GAAGr2K,EAAE+O,GAAG/O,EAAE8oK,eAAe/5J,IAAI/O,EAAE8oK,eAAe/5J,GAAG,IAAIy5B,EAAExoC,EAAE6vJ,UAAU,OAAOrnH,GAAGA,EAAEsgI,eAAe/5J,IAAIy5B,EAAEsgI,eAAe/5J,GAAG,IAAIyd,EAAExsB,EAAEgsJ,OAAOtpJ,EAAE,KAAK,GAAG,OAAO8pB,GAAG,IAAIxsB,EAAEmgC,IAAIz9B,EAAE1C,EAAE4oJ,eAAe,KAAK,OAAOp8H,GAAG,CAA+H,GAA9Hgc,EAAEhc,EAAEqjI,UAAUrjI,EAAEm8I,oBAAoB55J,IAAIyd,EAAEm8I,oBAAoB55J,GAAG,OAAOy5B,GAAGA,EAAEmgI,oBAAoB55J,IAAIy5B,EAAEmgI,oBAAoB55J,GAAM,OAAOyd,EAAEw/H,QAAQ,IAAIx/H,EAAE2T,IAAI,CAACz9B,EAAE8pB,EAAEo8H,UAAU,MAAMp8H,EAAEA,EAAEw/H,OAA0D,OAAnD,OAAOtpJ,IAAIq1H,KAAIr1H,IAAIunK,GAAGl7J,GAAG+nH,KAAI+7C,IAAIE,GAAGrwK,EAAEs0H,KAAIg8C,GAAGtwK,EAAEqM,IAAWrM,EACrc,SAAS6zK,GAAGv2K,GAAG,IAAI+O,EAAE/O,EAAEw2K,gBAAgB,GAAG,IAAIznK,EAAE,OAAOA,EAAuB,IAAI0nK,GAAGz2K,EAA5B+O,EAAE/O,EAAE02K,kBAA6B,OAAO3nK,EAAE,IAAIy5B,EAAExoC,EAAE22K,eAAmD,OAAO,IAAjB32K,EAAEwoC,GAA5BxoC,EAAEA,EAAE42K,uBAA4BpuI,EAAExoC,IAAe+O,IAAI/O,EAAE,EAAEA,EACnL,SAASi2H,GAAEj2H,GAAG,GAAG,IAAIA,EAAEw2K,gBAAgBx2K,EAAE62K,uBAAuB,WAAW72K,EAAE82K,iBAAiB,GAAG92K,EAAE+2K,aAAahP,GAAGuO,GAAGh7J,KAAK,KAAKtb,QAAQ,CAAC,IAAI+O,EAAEwnK,GAAGv2K,GAAGwoC,EAAExoC,EAAE+2K,aAAa,GAAG,IAAIhoK,EAAE,OAAOy5B,IAAIxoC,EAAE+2K,aAAa,KAAK/2K,EAAE62K,uBAAuB,EAAE72K,EAAE82K,iBAAiB,QAAQ,CAAC,IAAItqJ,EAAEg+I,KAAqH,GAAhH,aAAaz7J,EAAEyd,EAAE,GAAG,IAAIzd,GAAG,IAAIA,EAAEyd,EAAE,GAA0CA,EAAE,IAAxCA,EAAE,IAAI,WAAWzd,GAAG,IAAI,WAAWyd,IAAU,GAAG,KAAKA,EAAE,GAAG,MAAMA,EAAE,GAAG,GAAO,OAAOgc,EAAE,CAAC,IAAI9lC,EAAE1C,EAAE82K,iBAAiB,GAAG92K,EAAE62K,yBAAyB9nK,GAAGrM,GAAG8pB,EAAE,OAAOgc,IAAI0+H,IAAIhB,GAAG19H,GAAGxoC,EAAE62K,uBACne9nK,EAAE/O,EAAE82K,iBAAiBtqJ,EAAEzd,EAAE,aAAaA,EAAEg5J,GAAGuO,GAAGh7J,KAAK,KAAKtb,IAAI8nK,GAAGt7I,EAAEwqJ,GAAG17J,KAAK,KAAKtb,GAAG,CAAC0gB,QAAQ,IAAI,WAAW3R,GAAG24J,OAAO1nK,EAAE+2K,aAAahoK,IAClI,SAASioK,GAAGh3K,EAAE+O,GAAQ,GAALonK,GAAG,EAAKpnK,EAAE,OAAckoK,GAAGj3K,EAAV+O,EAAEy7J,MAAav0C,GAAEj2H,GAAG,KAAK,IAAIwoC,EAAE+tI,GAAGv2K,GAAG,GAAG,IAAIwoC,EAAE,CAAkB,GAAjBz5B,EAAE/O,EAAE+2K,aAPb,KAO+B,GAADjhD,IAAe,MAAM31H,MAAM0zD,EAAE,MAAiC,GAA3BqjH,KAAKl3K,IAAI+3H,IAAGvvF,IAAIwuF,IAAGmgD,GAAGn3K,EAAEwoC,GAAM,OAAOutF,GAAE,CAAC,IAAIvpG,EAAEspG,GAAEA,IAPvG,GAOwH,IAAX,IAAIpzH,EAAE00K,OAAQ,IAAIC,KAAK,MAAM,MAAMhnH,GAAGinH,GAAGt3K,EAAEqwD,GAAkC,GAAtBm4G,KAAK1yC,GAAEtpG,EAAE8oJ,GAAGnrJ,QAAQznB,EAPvK,IAO4Ko0H,GAAO,MAAM/nH,EAAEymK,GAAG2B,GAAGn3K,EAAEwoC,GAAGuqI,GAAG/yK,EAAEwoC,GAAGytF,GAAEj2H,GAAG+O,EAAE,GAAG,OAAOgnH,GAAE,OAAOrzH,EAAE1C,EAAEu3K,aAAav3K,EAAEmqB,QAAQ0lI,UAAU7vJ,EAAEw3K,uBAAuBhvI,EAAEhc,EAAEsqG,GAAEiB,GAAE,KAAKvrG,GAAG,KAAKmmJ,GAAG,KAP9T,EAOsU,MAAMxyK,MAAM0zD,EAAE,MAAM,KAPrV,EAO6VojH,GAAGj3K,EAAE,EAAEwoC,EAAE,EAAEA,GAAG,MAAM,KAAKoqI,GACvb,GAD0bG,GAAG/yK,EAAEwoC,GACteA,KADyehc,EAAExsB,EAAEy3K,qBACrez3K,EAAE42K,sBAAsBc,GAAGh1K,IAAO,aAAa+yK,IAAkB,IAAb/yK,EAAE8xK,GARqJ,IAQ/I9M,MAAW,CAAC,GAAGkO,GAAG,CAAC,IAAI/pK,EAAE7L,EAAE22K,eAAe,GAAG,IAAI9qK,GAAGA,GAAG28B,EAAE,CAACxoC,EAAE22K,eAAenuI,EAAE2uI,GAAGn3K,EAAEwoC,GAAG,OAAe,GAAG,KAAX38B,EAAE0qK,GAAGv2K,KAAa6L,IAAI28B,EAAE,MAAM,GAAG,IAAIhc,GAAGA,IAAIgc,EAAE,CAACxoC,EAAE22K,eAAenqJ,EAAE,MAAMxsB,EAAE23K,cAAc5gB,GAAG6gB,GAAGt8J,KAAK,KAAKtb,GAAG0C,GAAG,MAAMk1K,GAAG53K,GAAG,MAAM,KAAK6yK,GAAwE,GAArEE,GAAG/yK,EAAEwoC,GAAyBA,KAAtBhc,EAAExsB,EAAEy3K,qBAA0Bz3K,EAAE42K,sBAAsBc,GAAGh1K,IAAOkzK,KAAwB,KAAnBlzK,EAAE1C,EAAE22K,iBAAsBj0K,GAAG8lC,GAAG,CAACxoC,EAAE22K,eAAenuI,EAAE2uI,GAAGn3K,EAAEwoC,GAAG,MAAc,GAAG,KAAX9lC,EAAE6zK,GAAGv2K,KAAa0C,IAAI8lC,EAAE,MAAM,GAAG,IAAIhc,GAAGA,IAAIgc,EAAE,CAACxoC,EAAE22K,eACxenqJ,EAAE,MAAgP,GAA1O,aAAakpJ,GAAGlpJ,EAAE,IAAI,WAAWkpJ,IAAIhO,KAAK,aAAa+N,GAAGjpJ,EAAE,GAAGA,EAAE,IAAI,WAAWipJ,IAAI,IAAuC,GAANjpJ,GAA7B9pB,EAAEglK,MAA+Bl7I,KAAQA,EAAE,IAApCgc,EAAE,IAAI,WAAWA,GAAG9lC,IAAmB8pB,GAAG,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAK4oJ,GAAG5oJ,EAAE,OAAOA,KAAQA,EAAEgc,IAAO,GAAGhc,EAAE,CAACxsB,EAAE23K,cAAc5gB,GAAG6gB,GAAGt8J,KAAK,KAAKtb,GAAGwsB,GAAG,MAAMorJ,GAAG53K,GAAG,MAAM,KAT5L,EASoM,GAAG,aAAay1K,IAAI,OAAOE,GAAG,CAAC9pK,EAAE4pK,GAAG,IAAIjzK,EAAEmzK,GAAuH,GAA5F,IAAxBnpJ,EAAsB,EAApBhqB,EAAEq1K,mBAAyBrrJ,EAAE,GAAG9pB,EAAgB,EAAdF,EAAEs1K,YAA8DtrJ,GAAhD3gB,EAAE67J,MAAM,IAAI,WAAW77J,IAAgB,EAAZrJ,EAAE4zK,WAAa,QAAW1zK,EAAE,EAAEA,EAAE8pB,EAAE3gB,GAAM,GAAG2gB,EAAE,CAACumJ,GAAG/yK,EAAEwoC,GAAGxoC,EAAE23K,cAC/e5gB,GAAG6gB,GAAGt8J,KAAK,KAAKtb,GAAGwsB,GAAG,OAAOorJ,GAAG53K,GAAG,MAAM,QAAQ,MAAMG,MAAM0zD,EAAE,MAAY,GAALoiE,GAAEj2H,GAAMA,EAAE+2K,eAAehoK,EAAE,OAAOioK,GAAG17J,KAAK,KAAKtb,IAAI,OAAO,KAChI,SAASs2K,GAAGt2K,GAAG,IAAI+O,EAAE/O,EAAEw2K,gBAAqC,GAArBznK,EAAE,IAAIA,EAAEA,EAAE,WAXuB,KAWP,GAAD+mH,IAAe,MAAM31H,MAAM0zD,EAAE,MAAiC,GAA3BqjH,KAAKl3K,IAAI+3H,IAAGhpH,IAAIioH,IAAGmgD,GAAGn3K,EAAE+O,GAAM,OAAOgnH,GAAE,CAAC,IAAIvtF,EAAEstF,GAAEA,IAXjE,GAWkF,IAAX,IAAItpG,EAAE4qJ,OAAQ,IAAIW,KAAK,MAAM,MAAMr1K,GAAG40K,GAAGt3K,EAAE0C,GAAkC,GAAtB8lK,KAAK1yC,GAAEttF,EAAE8sI,GAAGnrJ,QAAQqC,EAXjI,IAWsIsqG,GAAO,MAAMtuF,EAAEgtI,GAAG2B,GAAGn3K,EAAE+O,GAAGgkK,GAAG/yK,EAAE+O,GAAGknH,GAAEj2H,GAAGwoC,EAAE,GAAG,OAAOutF,GAAE,MAAM51H,MAAM0zD,EAAE,MAAM7zD,EAAEu3K,aAAav3K,EAAEmqB,QAAQ0lI,UAAU7vJ,EAAEw3K,uBAAuBzoK,EAAEgpH,GAAE,KAAK6/C,GAAG53K,GAAGi2H,GAAEj2H,GAAG,OAAO,KACzY,SAASg4K,GAAGh4K,EAAE+O,GAAG,IAAIy5B,EAAEstF,GAAEA,IAAG,EAAE,IAAI,OAAO91H,EAAE+O,GAAb,QAZ0C,KAYlB+mH,GAAEttF,IAASy/H,MAAM,SAASgQ,GAAGj4K,EAAE+O,GAAG,IAAIy5B,EAAEstF,GAAEA,KAAI,EAAEA,IAZzB,EAY+B,IAAI,OAAO91H,EAAE+O,GAAb,QAZpC,KAY4D+mH,GAAEttF,IAASy/H,MAC/I,SAASkP,GAAGn3K,EAAE+O,GAAG/O,EAAEu3K,aAAa,KAAKv3K,EAAEw3K,uBAAuB,EAAE,IAAIhvI,EAAExoC,EAAE23K,cAAiD,IAAlC,IAAInvI,IAAIxoC,EAAE23K,eAAe,EAAEl2E,GAAGj5D,IAAO,OAAOutF,GAAE,IAAIvtF,EAAEutF,GAAEi2B,OAAO,OAAOxjH,GAAG,CAAC,IAAIhc,EAAEgc,EAAE,OAAOhc,EAAE2T,KAAK,KAAK,EAA6B,QAA3B3T,EAAEA,EAAEplB,KAAKo+J,yBAA4B,IAASh5I,GAAGi5I,KAAK,MAAM,KAAK,EAAEoH,KAAKh2C,GAAEM,IAAGN,GAAEO,IAAG,MAAM,KAAK,EAAE21C,GAAGvgJ,GAAG,MAAM,KAAK,EAAEqgJ,KAAK,MAAM,KAAK,GAAc,KAAK,GAAGh2C,GAAEK,IAAG,MAAM,KAAK,GAAGuxC,GAAGj8I,GAAGgc,EAAEA,EAAEwjH,OAAOj0B,GAAE/3H,EAAE+1H,GAAEg2C,GAAG/rK,EAAEmqB,QAAQ,MAAM6sG,GAAEjoH,EAAE+nH,GAAE67C,GAAG6C,GAAG,KAAKE,GAAGD,GAAG,WAAWE,GAAG,KAAK7C,GAAG,EAAE8C,IAAG,EACnc,SAAS0B,GAAGt3K,EAAE+O,GAAG,OAAE,CAAC,IAAuB,GAAnBy5J,KAAK6E,GAAGljJ,QAAQgqD,GAAMq5F,GAAG,IAAI,IAAIhlI,EAAE6uF,GAAE24B,cAAc,OAAOxnH,GAAG,CAAC,IAAIhc,EAAEgc,EAAEi3C,MAAM,OAAOjzD,IAAIA,EAAEg9I,QAAQ,MAAMhhI,EAAEA,EAAEjqC,KAA2B,GAAtBgvK,GAAG,EAAEzjK,GAAEytH,GAAEF,GAAE,KAAKm2C,IAAG,EAAM,OAAOz3C,IAAG,OAAOA,GAAEi2B,OAAO,OAAOl1B,GAd/F,EAcoG0+C,GAAGzmK,EAAEgnH,GAAE,KAAK/1H,EAAE,CAAC,IAAI0C,EAAE1C,EAAE6L,EAAEkqH,GAAEi2B,OAAOxpJ,EAAEuzH,GAAE1lE,EAAEthD,EAAwD,GAAtDA,EAAEioH,GAAEx0H,EAAEstJ,WAAW,KAAKttJ,EAAEspK,YAAYtpK,EAAEopK,WAAW,KAAQ,OAAOv7G,GAAG,kBAAkBA,GAAG,oBAAoBA,EAAEnuD,KAAK,CAAC,IAAIsrB,EAAE6iC,EAAE,GAAG,KAAY,EAAP7tD,EAAE0R,MAAQ,CAAC,IAAIi6C,EAAE3rD,EAAEqtJ,UAAU1hG,GAAG3rD,EAAE6mK,YAAYl7G,EAAEk7G,YAAY7mK,EAAEwtJ,cAAc7hG,EAAE6hG,cAAcxtJ,EAAEsmK,eAAe36G,EAAE26G,iBAAiBtmK,EAAE6mK,YACvf,KAAK7mK,EAAEwtJ,cAAc,MAAM,IAAIzgI,EAAE,KAAe,EAAV2nG,GAAE/sG,SAAWtd,EAAEhB,EAAE,EAAE,CAAC,IAAIwhC,EAAE,GAAGA,EAAE,KAAKxgC,EAAEszB,IAAI,CAAC,IAAIk2B,EAAExpD,EAAEmjJ,cAAc,GAAG,OAAO35F,EAAEhpB,EAAE,OAAOgpB,EAAE45F,eAAqB,CAAC,IAAI34B,EAAGzqH,EAAEogK,cAAc5/H,OAAE,IAASiqF,EAAG13H,YAAY,IAAK03H,EAAGs6C,6BAA8BriJ,IAAS,GAAG8d,EAAE,CAAC,IAAI4pF,EAAEpqH,EAAEw8J,YAAY,GAAG,OAAOpyC,EAAE,CAAC,IAAItqH,EAAE,IAAIkc,IAAIlc,EAAEkN,IAAI2T,GAAG3gB,EAAEw8J,YAAY18J,OAAOsqH,EAAEp9G,IAAI2T,GAAG,GAAG,KAAY,EAAP3gB,EAAEqH,MAAQ,CAAoC,GAAnCrH,EAAEijJ,WAAW,GAAGttJ,EAAEstJ,YAAY,KAAQ,IAAIttJ,EAAE29B,IAAI,GAAG,OAAO39B,EAAEqtJ,UAAUrtJ,EAAE29B,IAAI,OAAO,CAAC,IAAIrT,EAAE68I,GAAG,WAAW,MAAM78I,EAAEqT,IAAI,EAAE0pI,GAAGrnK,EAAEsqB,GAAGtqB,EAAEsmK,eAAe,WAClf,MAAM9oK,EAAEqwD,OAAE,EAAO7tD,EAAEuM,EAAE,IAAIwjE,EAAE7vE,EAAEw1K,UAA+G,GAArG,OAAO3lG,GAAGA,EAAE7vE,EAAEw1K,UAAU,IAAIvD,GAAGtkH,EAAE,IAAIxnC,IAAI0pD,EAAEj2D,IAAIkR,EAAE6iC,SAAgB,KAAXA,EAAEkiB,EAAEp2D,IAAIqR,MAAgB6iC,EAAE,IAAIxnC,IAAI0pD,EAAEj2D,IAAIkR,EAAE6iC,KAASA,EAAEjnC,IAAI5mB,GAAG,CAAC6tD,EAAEx2C,IAAIrX,GAAG,IAAI6wD,EAAE8kH,GAAG78J,KAAK,KAAK5Y,EAAE8qB,EAAEhrB,GAAGgrB,EAAEtrB,KAAKmxD,EAAEA,GAAGxmD,EAAEijJ,WAAW,KAAKjjJ,EAAEi8J,eAAe/5J,EAAE,MAAM/O,EAAE6M,EAAEA,EAAEm/I,aAAa,OAAOn/I,GAAGwjD,EAAElwD,OAAOstE,GAAGjrE,EAAE4E,OAAO,qBAAqB,wLAAwLukJ,GAAGnpJ,IAhB/X,IAgBmYs0H,KACrfA,GAjBmG,GAiB7FzmE,EAAE6iH,GAAG7iH,EAAE7tD,GAAGqK,EAAEhB,EAAE,EAAE,CAAC,OAAOgB,EAAEszB,KAAK,KAAK,EAAE3S,EAAE6iC,EAAExjD,EAAEijJ,WAAW,KAAKjjJ,EAAEi8J,eAAe/5J,EAAkB+6J,GAAGj9J,EAAb+nK,GAAG/nK,EAAE2gB,EAAEze,IAAW,MAAM/O,EAAE,KAAK,EAAEwtB,EAAE6iC,EAAE,IAAIvxC,EAAEjS,EAAEzF,KAAKgxK,EAAGvrK,EAAE+7I,UAAU,GAAG,KAAiB,GAAZ/7I,EAAEijJ,aAAgB,oBAAoBhxI,EAAEsyJ,0BAA0B,OAAOgH,GAAI,oBAAoBA,EAAGpD,oBAAoB,OAAOC,KAAKA,GAAG7rJ,IAAIgvJ,KAAM,CAACvrK,EAAEijJ,WAAW,KAAKjjJ,EAAEi8J,eAAe/5J,EAAmB+6J,GAAGj9J,EAAbkoK,GAAGloK,EAAE2gB,EAAEze,IAAY,MAAM/O,GAAG6M,EAAEA,EAAEm/I,aAAa,OAAOn/I,GAAGkpH,GAAEsiD,GAAGtiD,IAAG,MAAMuiD,GAAIvpK,EAAEupK,EAAG,SAAS,OAC9b,SAASlB,KAAK,IAAIp3K,EAAEs1K,GAAGnrJ,QAAsB,OAAdmrJ,GAAGnrJ,QAAQgqD,GAAU,OAAOn0E,EAAEm0E,GAAGn0E,EAAE,SAASgqK,GAAGhqK,EAAE+O,GAAG/O,EAAEy1K,IAAI,EAAEz1K,IAAIy1K,GAAGz1K,GAAG,OAAO+O,GAAG/O,EAAE01K,IAAI,EAAE11K,IAAI01K,GAAG11K,EAAE21K,GAAG5mK,GAAG,SAASk7J,GAAGjqK,GAAGA,EAAE8yK,KAAKA,GAAG9yK,GAAG,SAAS+3K,KAAK,KAAK,OAAOhiD,IAAGA,GAAEwiD,GAAGxiD,IAAG,SAASshD,KAAK,KAAK,OAAOthD,KAAIoxC,MAAMpxC,GAAEwiD,GAAGxiD,IAAG,SAASwiD,GAAGv4K,GAAG,IAAI+O,EAAEomK,GAAGn1K,EAAE6vJ,UAAU7vJ,EAAEg3H,IAAsE,OAAnEh3H,EAAEitK,cAAcjtK,EAAEmwK,aAAa,OAAOphK,IAAIA,EAAEspK,GAAGr4K,IAAIu1K,GAAGprJ,QAAQ,KAAYpb,EACtW,SAASspK,GAAGr4K,GAAG+1H,GAAE/1H,EAAE,EAAE,CAAC,IAAI+O,EAAEgnH,GAAE85B,UAAqB,GAAX7vJ,EAAE+1H,GAAEi2B,OAAU,KAAiB,KAAZj2B,GAAE+5B,WAAgB,CAAa,GAAZ/gJ,EAAEwjK,GAAGxjK,EAAEgnH,GAAEiB,IAAM,IAAIA,IAAG,IAAIjB,GAAE4yC,oBAAoB,CAAC,IAAI,IAAIngI,EAAE,EAAEhc,EAAEupG,GAAExtF,MAAM,OAAO/b,GAAG,CAAC,IAAI9pB,EAAE8pB,EAAEs8I,eAAej9J,EAAE2gB,EAAEm8I,oBAAoBjmK,EAAE8lC,IAAIA,EAAE9lC,GAAGmJ,EAAE28B,IAAIA,EAAE38B,GAAG2gB,EAAEA,EAAE4jI,QAAQr6B,GAAE4yC,oBAAoBngI,EAAE,GAAG,OAAOz5B,EAAE,OAAOA,EAAE,OAAO/O,GAAG,KAAiB,KAAZA,EAAE8vJ,aAAkB,OAAO9vJ,EAAE8rK,cAAc9rK,EAAE8rK,YAAY/1C,GAAE+1C,aAAa,OAAO/1C,GAAE61C,aAAa,OAAO5rK,EAAE4rK,aAAa5rK,EAAE4rK,WAAWC,WAAW91C,GAAE+1C,aAAa9rK,EAAE4rK,WAAW71C,GAAE61C,YAAY,EAAE71C,GAAE+5B,YAAY,OACnf9vJ,EAAE4rK,WAAW5rK,EAAE4rK,WAAWC,WAAW91C,GAAE/1H,EAAE8rK,YAAY/1C,GAAE/1H,EAAE4rK,WAAW71C,SAAQ,CAAS,GAAG,QAAXhnH,EAAEkkK,GAAGl9C,KAAe,OAAOhnH,EAAE+gJ,WAAW,KAAK/gJ,EAAE,OAAO/O,IAAIA,EAAE8rK,YAAY9rK,EAAE4rK,WAAW,KAAK5rK,EAAE8vJ,WAAW,MAAkB,GAAG,QAAf/gJ,EAAEgnH,GAAEq6B,SAAoB,OAAOrhJ,EAAEgnH,GAAE/1H,QAAQ,OAAO+1H,IAAkB,OAAfe,KAAI67C,KAAK77C,GApBjI,GAoB8I,KAAK,SAAS4gD,GAAG13K,GAAG,IAAI+O,EAAE/O,EAAE8oK,eAAuC,OAAO/5J,GAA/B/O,EAAEA,EAAE2oK,qBAA+B55J,EAAE/O,EAAE,SAAS43K,GAAG53K,GAAG,IAAI+O,EAAE44J,KAA8B,OAAzBE,GAAG,GAAG2Q,GAAGl9J,KAAK,KAAKtb,EAAE+O,IAAW,KACjZ,SAASypK,GAAGx4K,EAAE+O,GAAG,GAAGmoK,WAAW,OAAOpB,IAAI,GArB8B,KAqBzB,GAADhgD,IAAe,MAAM31H,MAAM0zD,EAAE,MAAM,IAAIrrB,EAAExoC,EAAEu3K,aAAa/qJ,EAAExsB,EAAEw3K,uBAAuB,GAAG,OAAOhvI,EAAE,OAAO,KAAoD,GAA/CxoC,EAAEu3K,aAAa,KAAKv3K,EAAEw3K,uBAAuB,EAAKhvI,IAAIxoC,EAAEmqB,QAAQ,MAAMhqB,MAAM0zD,EAAE,MAAM7zD,EAAE+2K,aAAa,KAAK/2K,EAAE62K,uBAAuB,EAAE72K,EAAE82K,iBAAiB,GAAG92K,EAAE42K,sBAAsB,EAAE,IAAIl0K,EAAEg1K,GAAGlvI,GAClI,GADqIxoC,EAAE02K,iBAAiBh0K,EAAE8pB,GAAGxsB,EAAEy3K,kBAAkBz3K,EAAEy4K,mBAAmBz4K,EAAEy3K,kBAAkBz3K,EAAE42K,sBAAsB,EAAEpqJ,GAAGxsB,EAAEy4K,qBAAqBz4K,EAAEy4K,mBACnejsJ,EAAE,GAAGA,GAAGxsB,EAAE22K,iBAAiB32K,EAAE22K,eAAe,GAAGnqJ,GAAGxsB,EAAEw2K,kBAAkBx2K,EAAEw2K,gBAAgB,GAAGx2K,IAAI+3H,KAAIhC,GAAEgC,GAAE,KAAKf,GAAE,GAAG,EAAExuF,EAAEsnH,UAAU,OAAOtnH,EAAEojI,YAAYpjI,EAAEojI,WAAWC,WAAWrjI,EAAE9lC,EAAE8lC,EAAEsjI,aAAappK,EAAE8lC,EAAE9lC,EAAE8lC,EAAEsjI,YAAe,OAAOppK,EAAE,CAAC,IAAImJ,EAAEiqH,GAAEA,IAtBhJ,GAsBsJy/C,GAAGprJ,QAAQ,KAAKwsI,GAAGpC,GAAG,IAAI/xJ,EAAE8zJ,KAAK,GAAGG,GAAGj0J,GAAG,CAAC,GAAG,mBAAmBA,EAAE,IAAI6tD,EAAE,CAAC1pC,MAAMnkB,EAAEq9J,eAAeh1F,IAAIroE,EAAEs9J,mBAAmB9/J,EAAE,CAA8C,IAAIwtB,GAAjD6iC,GAAGA,EAAE7tD,EAAE4qJ,gBAAgB/8F,EAAE4uG,aAAa7+J,QAAe4/J,cAAc3vG,EAAE2vG,eAAe,GAAGxyI,GAAG,IAAIA,EAAEkrJ,WAAW,CAACroH,EAAE7iC,EAAEuyI,WAAW,IAAI5xG,EAAE3gC,EAAEyyI,aAC9e1wI,EAAE/B,EAAE0yI,UAAU1yI,EAAEA,EAAE2yI,YAAY,IAAI9vG,EAAEs+F,SAASp/H,EAAEo/H,SAAS,MAAMgqB,GAAItoH,EAAE,KAAK,MAAMrwD,EAAE,IAAI6M,EAAE,EAAEwgC,GAAG,EAAEgpB,GAAG,EAAEihE,EAAG,EAAEL,EAAE,EAAEtqH,EAAEnK,EAAEsqB,EAAE,KAAK/d,EAAE,OAAO,CAAC,IAAI,IAAIwjE,EAAK5lE,IAAI0jD,GAAG,IAAIlC,GAAG,IAAIxhD,EAAEgiJ,WAAWthH,EAAExgC,EAAEshD,GAAGxhD,IAAI4iB,GAAG,IAAI/B,GAAG,IAAI7gB,EAAEgiJ,WAAWt4F,EAAExpD,EAAE2gB,GAAG,IAAI7gB,EAAEgiJ,WAAW9hJ,GAAGF,EAAEiiJ,UAAUvyJ,QAAW,QAAQk2E,EAAE5lE,EAAE6hJ,aAAkB1hI,EAAEngB,EAAEA,EAAE4lE,EAAE,OAAO,CAAC,GAAG5lE,IAAInK,EAAE,MAAMuM,EAA+C,GAA7C+d,IAAIujC,KAAKinE,IAAKnpE,IAAI9gB,EAAExgC,GAAGigB,IAAIyC,KAAK0nG,IAAIzpG,IAAI6oC,EAAExpD,GAAM,QAAQ0lE,EAAE5lE,EAAEsoH,aAAa,MAAUnoG,GAAJngB,EAAEmgB,GAAM6oG,WAAWhpH,EAAE4lE,EAAEliB,GAAG,IAAIhjB,IAAI,IAAIgpB,EAAE,KAAK,CAAC1vC,MAAM0mB,EAAEw9B,IAAIxU,QAAQhG,EAAE,KAAKA,EAAEA,GAAG,CAAC1pC,MAAM,EAAEkkD,IAAI,QAAQxa,EACtf,KAAKumG,GAAG,CAACgiB,sBAAsB,KAAKC,YAAYr2K,EAAEs2K,eAAezoH,GAAGkkG,IAAG,EAAG78B,GAAEh1H,EAAE,GAAG,IAAIq2K,KAAK,MAAMJ,GAAI,GAAG,OAAOjhD,GAAE,MAAMv3H,MAAM0zD,EAAE,MAAMy/G,GAAG57C,GAAEihD,GAAIjhD,GAAEA,GAAEm0C,kBAAiB,OAAOn0C,IAAGA,GAAEh1H,EAAE,GAAG,IAAI,IAAIF,EAAExC,EAAEqwD,EAAEthD,EAAE,OAAO2oH,IAAG,CAAC,IAAIrkE,EAAEqkE,GAAEo4B,UAAmC,GAAvB,GAAFz8F,GAAMo7F,GAAG/2B,GAAEkxB,UAAU,IAAS,IAAFv1F,EAAM,CAAC,IAAI0jE,EAAEW,GAAEm4B,UAAU,GAAG,OAAO94B,EAAE,CAAC,IAAIj4G,EAAEi4G,EAAE9tH,IAAI,OAAO6V,IAAI,oBAAoBA,EAAEA,EAAE,MAAMA,EAAEqL,QAAQ,OAAO,OAAS,KAAFkpC,GAAQ,KAAK,EAAE8gH,GAAGz8C,IAAGA,GAAEo4B,YAAY,EAAE,MAAM,KAAK,EAAEqkB,GAAGz8C,IAAGA,GAAEo4B,YAAY,EAAEykB,GAAG78C,GAAEm4B,UAAUn4B,IAAG,MAAM,KAAK,KAAKA,GAAEo4B,YAAY,KAAK,MAAM,KAAK,KAAKp4B,GAAEo4B,YAC7f,KAAKykB,GAAG78C,GAAEm4B,UAAUn4B,IAAG,MAAM,KAAK,EAAE68C,GAAG78C,GAAEm4B,UAAUn4B,IAAG,MAAM,KAAK,EAAMs8C,GAAGxxK,EAAP2rD,EAAEupE,GAASrnE,GAAG4jH,GAAG9lH,GAAGupE,GAAEA,GAAEm0C,YAAY,MAAM8M,GAAI,GAAG,OAAOjhD,GAAE,MAAMv3H,MAAM0zD,EAAE,MAAMy/G,GAAG57C,GAAEihD,GAAIjhD,GAAEA,GAAEm0C,kBAAiB,OAAOn0C,IAAkD,GAA/C54G,EAAE83I,GAAG7/B,EAAEu/B,KAAKjjG,EAAEv0C,EAAE+5J,YAAYxoH,EAAEvxC,EAAEg6J,eAAkB/hD,IAAI1jE,GAAGA,GAAGA,EAAE+5F,eAhLxP,SAASt9D,EAAG9vF,EAAE+O,GAAG,SAAO/O,IAAG+O,KAAE/O,IAAI+O,KAAK/O,GAAG,IAAIA,EAAE2uJ,YAAY5/I,GAAG,IAAIA,EAAE4/I,SAAS7+D,EAAG9vF,EAAE+O,EAAE4mH,YAAY,aAAa31H,EAAEA,EAAEy7I,SAAS1sI,KAAG/O,EAAEg5K,4BAAwD,GAA7Bh5K,EAAEg5K,wBAAwBjqK,MAgLmF+gF,CAAGz8B,EAAE+5F,cAAczsB,gBAAgBttE,GAAG,CAAC,OAAOhD,GAAGomG,GAAGpjG,KAAK0jE,EAAE1mE,EAAE1pC,WAAc,KAAR7H,EAAEuxC,EAAEwa,OAAiB/rD,EAAEi4G,GAAG,mBAAmB1jE,GAAGA,EAAEwsG,eAAe9oC,EAAE1jE,EAAEysG,aAAan7J,KAAK6oD,IAAI1uC,EAAEu0C,EAAEr4D,MAAMqB,UAAUyiB,GAAGi4G,EAAE1jE,EAAE+5F,eAAe1tI,WAAWq3G,EAAEkoC,aAAa7+J,QAAS4/J,eACjflhJ,EAAEA,EAAEkhJ,eAAe7xG,EAAEkF,EAAEw6F,YAAYxxJ,OAAOmG,EAAEmC,KAAK6oD,IAAI6C,EAAE1pC,MAAMwnC,GAAGkC,OAAE,IAASA,EAAEwa,IAAIroE,EAAEmC,KAAK6oD,IAAI6C,EAAEwa,IAAI1c,IAAIrvC,EAAE06I,QAAQh3J,EAAE6tD,IAAIlC,EAAEkC,EAAEA,EAAE7tD,EAAEA,EAAE2rD,GAAGA,EAAEkoG,GAAGhjG,EAAE7wD,GAAG+sB,EAAE8mI,GAAGhjG,EAAEhD,GAAGlC,GAAG5+B,IAAI,IAAIzQ,EAAE45J,YAAY55J,EAAEihJ,aAAa5xG,EAAEpqD,MAAM+a,EAAEmhJ,eAAe9xG,EAAEkqB,QAAQv5D,EAAEohJ,YAAY3wI,EAAExrB,MAAM+a,EAAEqhJ,cAAc5wI,EAAE8oD,WAAU0+C,EAAEA,EAAEkiD,eAAgBC,SAAS/qH,EAAEpqD,KAAKoqD,EAAEkqB,QAAQv5D,EAAEq6J,kBAAkB32K,EAAE6tD,GAAGvxC,EAAEs6J,SAASriD,GAAGj4G,EAAE06I,OAAOjqI,EAAExrB,KAAKwrB,EAAE8oD,UAAU0+C,EAAEsiD,OAAO9pJ,EAAExrB,KAAKwrB,EAAE8oD,QAAQv5D,EAAEs6J,SAASriD,OAAQA,EAAE,GAAG,IAAIj4G,EAAEu0C,EAAEv0C,EAAEA,EAAE62G,YAAY,IAAI72G,EAAE6vI,UAAU53B,EAAEh7H,KAAK,CAACqe,QAAQ0E,EAAEvb,KAAKub,EAAEw6J,WACzfh2K,IAAIwb,EAAEgiH,YAAmD,IAAvC,oBAAoBztE,EAAE7rD,OAAO6rD,EAAE7rD,QAAY6rD,EAAE,EAAEA,EAAE0jE,EAAE16H,OAAOg3D,KAAIv0C,EAAEi4G,EAAE1jE,IAAKj5C,QAAQk/J,WAAWx6J,EAAEvb,KAAKub,EAAE1E,QAAQ0mH,UAAUhiH,EAAExb,IAAIixJ,KAAKoC,GAAGC,GAAGD,GAAG,KAAK32J,EAAEmqB,QAAQqe,EAAEkvF,GAAEh1H,EAAE,GAAG,IAAI,IAAI2wD,EAAErzD,EAAE,OAAO03H,IAAG,CAAC,IAAI0gD,EAAG1gD,GAAEo4B,UAAqC,GAAxB,GAAHsoB,GAAOzE,GAAGtgH,EAAEqkE,GAAEm4B,UAAUn4B,IAAS,IAAH0gD,EAAO,CAACrhD,OAAE,EAAO,IAAIwiD,EAAG7hD,GAAEzuH,IAAI,GAAG,OAAOswK,EAAG,CAAC,IAAIjB,EAAG5gD,GAAEkxB,UAAU,OAAOlxB,GAAEv3F,KAAK,KAAK,EAAE42F,EAAEuhD,EAAG,MAAM,QAAQvhD,EAAEuhD,EAAG,oBAAoBiB,EAAGA,EAAGxiD,GAAGwiD,EAAGpvJ,QAAQ4sG,GAAGW,GAAEA,GAAEm0C,YAAY,MAAM8M,GAAI,GAAG,OAAOjhD,GAAE,MAAMv3H,MAAM0zD,EAAE,MAAMy/G,GAAG57C,GAAEihD,GAAIjhD,GAAEA,GAAEm0C,kBAAiB,OAAOn0C,IAAGA,GACpf,KAAK2vC,KAAKvxC,GAAEjqH,OAAO7L,EAAEmqB,QAAQqe,EAAE,GAAGqtI,GAAGA,IAAG,EAAGC,GAAG91K,EAAE+1K,GAAGhnK,OAAO,IAAI2oH,GAAEh1H,EAAE,OAAOg1H,IAAG3oH,EAAE2oH,GAAEm0C,WAAWn0C,GAAEm0C,WAAW,KAAKn0C,GAAE3oH,EAAmI,GAA5G,KAArBA,EAAE/O,EAAE02K,oBAAyBzB,GAAG,MAAM,aAAalmK,EAAE/O,IAAIk2K,GAAGD,MAAMA,GAAG,EAAEC,GAAGl2K,GAAGi2K,GAAG,EAAE,oBAAoBuD,IAAIA,GAAGhxI,EAAEogH,UAAUp8H,GAAGypG,GAAEj2H,GAAM60K,GAAG,MAAMA,IAAG,EAAG70K,EAAE80K,GAAGA,GAAG,KAAK90K,EAAE,OA5B3M,KAAK,EA4B0M81H,KAAsBmyC,KAAL,KAAsB,SAAS8Q,KAAK,KAAK,OAAOrhD,IAAG,CAAC,IAAI13H,EAAE03H,GAAEo4B,UAAU,KAAO,IAAF9vJ,IAAQuzK,GAAG77C,GAAEm4B,UAAUn4B,IAAG,KAAO,IAAF13H,IAAQ61K,KAAKA,IAAG,EAAG/N,GAAG,IAAG,WAAgB,OAALoP,KAAY,SAAQx/C,GAAEA,GAAEm0C,YAC9c,SAASqL,KAAK,GAAG,KAAKnB,GAAG,CAAC,IAAI/1K,EAAE,GAAG+1K,GAAG,GAAGA,GAAS,OAANA,GAAG,GAAUlO,GAAG7nK,EAAEy5K,KAAK,SAASA,KAAK,GAAG,OAAO3D,GAAG,OAAM,EAAG,IAAI91K,EAAE81K,GAAW,GAARA,GAAG,KA7B3C,KA6BqD,GAADhgD,IAAe,MAAM31H,MAAM0zD,EAAE,MAAM,IAAI9kD,EAAE+mH,GAAQ,IAANA,IA7B/E,GA6ByF91H,EAAEA,EAAEmqB,QAAQ2hJ,YAAY,OAAO9rK,GAAG,CAAC,IAAI,IAAIwoC,EAAExoC,EAAE,GAAG,KAAiB,IAAZwoC,EAAEsnH,WAAe,OAAOtnH,EAAErI,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAGszI,GAAG,EAAEjrI,GAAGkrI,GAAG,EAAElrI,IAAI,MAAMhc,GAAG,GAAG,OAAOxsB,EAAE,MAAMG,MAAM0zD,EAAE,MAAMy/G,GAAGtzK,EAAEwsB,GAAGgc,EAAExoC,EAAE6rK,WAAW7rK,EAAE6rK,WAAW,KAAK7rK,EAAEwoC,EAAW,OAATstF,GAAE/mH,EAAEk5J,MAAW,EAC5Z,SAASyR,GAAG15K,EAAE+O,EAAEy5B,GAAkCqhI,GAAG7pK,EAAxB+O,EAAE6lK,GAAG50K,EAAf+O,EAAEmkK,GAAG1qI,EAAEz5B,GAAY,aAAuC,QAAnB/O,EAAEq2K,GAAGr2K,EAAE,cAAsBi2H,GAAEj2H,GAAG,SAASszK,GAAGtzK,EAAE+O,GAAG,GAAG,IAAI/O,EAAEmgC,IAAIu5I,GAAG15K,EAAEA,EAAE+O,QAAQ,IAAI,IAAIy5B,EAAExoC,EAAEgsJ,OAAO,OAAOxjH,GAAG,CAAC,GAAG,IAAIA,EAAErI,IAAI,CAACu5I,GAAGlxI,EAAExoC,EAAE+O,GAAG,MAAW,GAAG,IAAIy5B,EAAErI,IAAI,CAAC,IAAI3T,EAAEgc,EAAEogH,UAAU,GAAG,oBAAoBpgH,EAAEphC,KAAKgqK,0BAA0B,oBAAoB5kJ,EAAEwoJ,oBAAoB,OAAOC,KAAKA,GAAG7rJ,IAAIoD,IAAI,CAAgCq9I,GAAGrhI,EAAxBxoC,EAAE+0K,GAAGvsI,EAAfxoC,EAAEkzK,GAAGnkK,EAAE/O,GAAY,aAAuC,QAAnBwoC,EAAE6tI,GAAG7tI,EAAE,cAAsBytF,GAAEztF,GAAG,OAAOA,EAAEA,EAAEwjH,QACxb,SAASmsB,GAAGn4K,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAExsB,EAAEk4K,UAAU,OAAO1rJ,GAAGA,EAAEjD,OAAOxa,GAAGgpH,KAAI/3H,GAAGg3H,KAAIxuF,EAAEsuF,KAAI+7C,IAAI/7C,KAAI87C,IAAI,aAAa6C,IAAI/N,KAAK8M,GA/BqG,IA+B/F2C,GAAGn3K,EAAEg3H,IAAG4+C,IAAG,EAAGa,GAAGz2K,EAAEwoC,KAAwB,KAAnBz5B,EAAE/O,EAAE22K,iBAAsB5nK,EAAEy5B,IAAIxoC,EAAE22K,eAAenuI,EAAEytF,GAAEj2H,KAAK,SAAS00K,GAAG10K,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE4oJ,UAAU,OAAOpgH,GAAGA,EAAEjf,OAAOxa,GAAO,KAAJA,EAAE,KAAiBA,EAAE07J,GAAT17J,EAAEy7J,KAAYxqK,EAAE,OAAiB,QAAVA,EAAEq2K,GAAGr2K,EAAE+O,KAAaknH,GAAEj2H,GACxTm1K,GAAG,SAASn1K,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAEzd,EAAE+5J,eAAe,GAAG,OAAO9oK,EAAE,CAAC,IAAI0C,EAAEqM,EAAEohK,aAAa,GAAGnwK,EAAEitK,gBAAgBvqK,GAAGy0H,GAAEhtG,QAAQ4+I,IAAG,MAAO,CAAC,GAAGv8I,EAAEgc,EAAE,CAAO,OAANugI,IAAG,EAAUh6J,EAAEoxB,KAAK,KAAK,EAAEg5C,GAAGpqE,GAAGwhK,KAAK,MAAM,KAAK,EAAQ,GAANzD,GAAG/9J,GAAa,EAAPA,EAAEmF,MAAQ,IAAIs0B,GAAG9lC,EAAE89F,OAAO,OAAOzxF,EAAE+5J,eAAe/5J,EAAE45J,oBAAoB,EAAE,KAAK,MAAM,KAAK,EAAE/wG,GAAE7oD,EAAE3H,OAAOy+J,GAAG92J,GAAG,MAAM,KAAK,EAAEgkE,GAAGhkE,EAAEA,EAAE65I,UAAU8I,eAAe,MAAM,KAAK,GAAGllI,EAAEzd,EAAEk+J,cAAcjyK,MAAM0H,EAAEqM,EAAE3H,KAAK0/E,SAASzb,GAAE+8F,GAAG1lK,EAAE6jJ,eAAe7jJ,EAAE6jJ,cAAc/5H,EAAE,MAAM,KAAK,GAAG,GAAG,OAAOzd,EAAEihJ,cACjd,OAAG,KAD6dxjI,EAAEzd,EAAEw5B,MAAMogI,sBAChen8I,GAAGgc,EAASmpI,GAAG3xK,EAAE+O,EAAEy5B,IAAG6iC,GAAE6rD,GAAY,EAAVA,GAAE/sG,SAA8B,QAAnBpb,EAAE2hK,GAAG1wK,EAAE+O,EAAEy5B,IAAmBz5B,EAAEqhJ,QAAQ,MAAK/kF,GAAE6rD,GAAY,EAAVA,GAAE/sG,SAAW,MAAM,KAAK,GAA8B,GAA3BqC,EAAEzd,EAAE45J,qBAAqBngI,EAAK,KAAiB,GAAZxoC,EAAE8vJ,WAAc,CAAC,GAAGtjI,EAAE,OAAO6lJ,GAAGryK,EAAE+O,EAAEy5B,GAAGz5B,EAAE+gJ,WAAW,GAA6E,GAAxD,QAAlBptJ,EAAEqM,EAAEihJ,iBAAyBttJ,EAAEsvK,UAAU,KAAKtvK,EAAEwvK,KAAK,MAAM7mG,GAAE6rD,GAAEA,GAAE/sG,UAAaqC,EAAE,OAAO,KAAK,OAAOkkJ,GAAG1wK,EAAE+O,EAAEy5B,GAAGugI,IAAG,QAASA,IAAG,EAAsB,OAAnBh6J,EAAE+5J,eAAe,EAAS/5J,EAAEoxB,KAAK,KAAK,EAChW,GADkW3T,EAAEzd,EAAE3H,KAAK,OAAOpH,IAAIA,EAAE6vJ,UAAU,KAAK9gJ,EAAE8gJ,UAAU,KAAK9gJ,EAAE+gJ,WAAW,GAAG9vJ,EAAE+O,EAAEohK,aAAaztK,EAAE2iK,GAAGt2J,EAAEqoH,GAAEjtG,SAASy+I,GAAG75J,EAAEy5B,GAAG9lC,EAAEgrK,GAAG,KAClf3+J,EAAEyd,EAAExsB,EAAE0C,EAAE8lC,GAAGz5B,EAAE+gJ,WAAW,EAAK,kBAAkBptJ,GAAG,OAAOA,GAAG,oBAAoBA,EAAEw8H,aAAQ,IAASx8H,EAAE8kI,SAAS,CAAiD,GAAhDz4H,EAAEoxB,IAAI,EAAEpxB,EAAEihJ,cAAc,KAAKjhJ,EAAEs6J,YAAY,KAAQzxG,GAAEprC,GAAG,CAAC,IAAI3gB,GAAE,EAAGg6J,GAAG92J,QAAQlD,GAAE,EAAGkD,EAAEihJ,cAAc,OAAOttJ,EAAEkD,YAAO,IAASlD,EAAEkD,MAAMlD,EAAEkD,MAAM,KAAKwjK,GAAGr6J,GAAG,IAAIvM,EAAEgqB,EAAE0+I,yBAAyB,oBAAoB1oK,GAAG6nK,GAAGt7J,EAAEyd,EAAEhqB,EAAExC,GAAG0C,EAAEoiJ,QAAQwlB,GAAGv7J,EAAE65I,UAAUlmJ,EAAEA,EAAE6nK,oBAAoBx7J,EAAEk8J,GAAGl8J,EAAEyd,EAAExsB,EAAEwoC,GAAGz5B,EAAEoiK,GAAG,KAAKpiK,EAAEyd,GAAE,EAAG3gB,EAAE28B,QAAQz5B,EAAEoxB,IAAI,EAAEs2F,GAAE,KAAK1nH,EAAErM,EAAE8lC,GAAGz5B,EAAEA,EAAEw5B,MAAM,OAAOx5B,EAAE,KAAK,GAAG/O,EAAE,CACzZ,GAD0Z0C,EAAEqM,EAAEk9J,YAAY,OAAOjsK,IAAIA,EAAE6vJ,UACpf,KAAK9gJ,EAAE8gJ,UAAU,KAAK9gJ,EAAE+gJ,WAAW,GAAG9vJ,EAAE+O,EAAEohK,aAzOoP,SAAYnwK,GAAG,IAAI,IAAIA,EAAE6mF,QAAQ,CAAC7mF,EAAE6mF,QAAQ,EAAE,IAAI93E,EAAE/O,EAAE6mJ,MAAM93I,EAAEA,IAAI/O,EAAE8mJ,QAAQ/3I,EAAEA,EAAE7M,MAAK,SAAS6M,GAAG,IAAI/O,EAAE6mF,UAAU93E,EAAEA,EAAE5L,QAAQnD,EAAE6mF,QAAQ,EAAE7mF,EAAE8mJ,QAAQ/3I,MAAI,SAASA,GAAG,IAAI/O,EAAE6mF,UAAU7mF,EAAE6mF,QAAQ,EAAE7mF,EAAE8mJ,QAAQ/3I,OAyOhb4qK,CAAGj3K,GAAM,IAAIA,EAAEmkF,QAAQ,MAAMnkF,EAAEokJ,QAAqD,OAA7CpkJ,EAAEA,EAAEokJ,QAAQ/3I,EAAE3H,KAAK1E,EAAEmJ,EAAEkD,EAAEoxB,IAQzD,SAAYngC,GAAG,GAAG,oBAAoBA,EAAE,OAAO4wK,GAAG5wK,GAAG,EAAE,EAAE,QAAG,IAASA,GAAG,OAAOA,EAAE,CAAc,IAAbA,EAAEA,EAAEwnI,YAAgB2jB,GAAG,OAAO,GAAG,GAAGnrJ,IAAIsrJ,GAAG,OAAO,GAAG,OAAO,EARjFsuB,CAAGl3K,GAAG1C,EAAEmoK,GAAGzlK,EAAE1C,GAAU6L,GAAG,KAAK,EAAEkD,EAAE8hK,GAAG,KAAK9hK,EAAErM,EAAE1C,EAAEwoC,GAAG,MAAMxoC,EAAE,KAAK,EAAE+O,EAAEgiK,GAAG,KAAKhiK,EAAErM,EAAE1C,EAAEwoC,GAAG,MAAMxoC,EAAE,KAAK,GAAG+O,EAAE0hK,GAAG,KAAK1hK,EAAErM,EAAE1C,EAAEwoC,GAAG,MAAMxoC,EAAE,KAAK,GAAG+O,EAAE4hK,GAAG,KAAK5hK,EAAErM,EAAEylK,GAAGzlK,EAAE0E,KAAKpH,GAAGwsB,EAAEgc,GAAG,MAAMxoC,EAAE,MAAMG,MAAM0zD,EAAE,IAAInxD,EAAE,KAAM,OAAOqM,EAAE,KAAK,EAAE,OAAOyd,EAAEzd,EAAE3H,KAAK1E,EAAEqM,EAAEohK,aAA2CU,GAAG7wK,EAAE+O,EAAEyd,EAArC9pB,EAAEqM,EAAEk9J,cAAcz/I,EAAE9pB,EAAEylK,GAAG37I,EAAE9pB,GAAc8lC,GAAG,KAAK,EAAE,OAAOhc,EAAEzd,EAAE3H,KAAK1E,EAAEqM,EAAEohK,aAA2CY,GAAG/wK,EAAE+O,EAAEyd,EAArC9pB,EAAEqM,EAAEk9J,cAAcz/I,EAAE9pB,EAAEylK,GAAG37I,EAAE9pB,GAAc8lC,GACpf,KAAK,EAAwB,GAAtB2wC,GAAGpqE,GAAGyd,EAAEzd,EAAEs6J,YAAe,OAAOrpK,GAAG,OAAOwsB,EAAE,MAAMrsB,MAAM0zD,EAAE,MAAoH,GAA9GrnC,EAAEzd,EAAEohK,aAA+BztK,EAAE,QAApBA,EAAEqM,EAAEihJ,eAAyBttJ,EAAE0X,QAAQ,KAAKsvJ,GAAG1pK,EAAE+O,GAAGg7J,GAAGh7J,EAAEyd,EAAE,KAAKgc,IAAGhc,EAAEzd,EAAEihJ,cAAc51I,WAAe1X,EAAE6tK,KAAKxhK,EAAE2hK,GAAG1wK,EAAE+O,EAAEy5B,OAAO,CAAmF,IAA/E9lC,EAAEqM,EAAE65I,UAAUwK,WAAQ0c,GAAG9Y,GAAGjoJ,EAAE65I,UAAU8I,cAAclD,YAAYqhB,GAAG9gK,EAAErM,EAAEqtK,IAAG,GAAMrtK,EAAE,IAAI8lC,EAAE+jI,GAAGx9J,EAAE,KAAKyd,EAAEgc,GAAGz5B,EAAEw5B,MAAMC,EAAEA,GAAGA,EAAEsnH,WAAuB,EAAbtnH,EAAEsnH,UAAa,KAAKtnH,EAAEA,EAAE4nH,aAAa35B,GAAEz2H,EAAE+O,EAAEyd,EAAEgc,GAAG+nI,KAAKxhK,EAAEA,EAAEw5B,MAAM,OAAOx5B,EAAE,KAAK,EAAE,OAAO+9J,GAAG/9J,GAAG,OAAO/O,GAAGowK,GAAGrhK,GAAGyd,EAAEzd,EAAE3H,KAAK1E,EAAEqM,EAAEohK,aAAatkK,EAAE,OAAO7L,EAAEA,EAAEitK,cAC5e,KAAKzqK,EAAEE,EAAE/C,SAASm3J,GAAGtqI,EAAE9pB,GAAGF,EAAE,KAAK,OAAOqJ,GAAGirJ,GAAGtqI,EAAE3gB,KAAKkD,EAAE+gJ,WAAW,IAAIghB,GAAG9wK,EAAE+O,GAAU,EAAPA,EAAEmF,MAAQ,IAAIs0B,GAAG9lC,EAAE89F,QAAQzxF,EAAE+5J,eAAe/5J,EAAE45J,oBAAoB,EAAE55J,EAAE,OAAO0nH,GAAEz2H,EAAE+O,EAAEvM,EAAEgmC,GAAGz5B,EAAEA,EAAEw5B,OAAOx5B,EAAE,KAAK,EAAE,OAAO,OAAO/O,GAAGowK,GAAGrhK,GAAG,KAAK,KAAK,GAAG,OAAO4iK,GAAG3xK,EAAE+O,EAAEy5B,GAAG,KAAK,EAAE,OAAOuqC,GAAGhkE,EAAEA,EAAE65I,UAAU8I,eAAellI,EAAEzd,EAAEohK,aAAa,OAAOnwK,EAAE+O,EAAEw5B,MAAM+jI,GAAGv9J,EAAE,KAAKyd,EAAEgc,GAAGiuF,GAAEz2H,EAAE+O,EAAEyd,EAAEgc,GAAGz5B,EAAEw5B,MAAM,KAAK,GAAG,OAAO/b,EAAEzd,EAAE3H,KAAK1E,EAAEqM,EAAEohK,aAA2CM,GAAGzwK,EAAE+O,EAAEyd,EAArC9pB,EAAEqM,EAAEk9J,cAAcz/I,EAAE9pB,EAAEylK,GAAG37I,EAAE9pB,GAAc8lC,GAAG,KAAK,EAAE,OAAOiuF,GAAEz2H,EAAE+O,EAAEA,EAAEohK,aAAa3nI,GAAGz5B,EAAEw5B,MAAM,KAAK,EACpc,KAAK,GAAG,OAAOkuF,GAAEz2H,EAAE+O,EAAEA,EAAEohK,aAAaxwK,SAAS6oC,GAAGz5B,EAAEw5B,MAAM,KAAK,GAAGvoC,EAAE,CAACwsB,EAAEzd,EAAE3H,KAAK0/E,SAASpkF,EAAEqM,EAAEohK,aAAa3tK,EAAEuM,EAAEk+J,cAAcphK,EAAEnJ,EAAE1H,MAAM,IAAIq1D,EAAEthD,EAAE3H,KAAK0/E,SAAiD,GAAxCzb,GAAE+8F,GAAG/3G,EAAEk2F,eAAel2F,EAAEk2F,cAAc16I,EAAK,OAAOrJ,EAAE,GAAG6tD,EAAE7tD,EAAExH,MAA0G,KAApG6Q,EAAEszJ,GAAG9uG,EAAExkD,GAAG,EAAwF,GAArF,oBAAoB2gB,EAAE85H,sBAAsB95H,EAAE85H,sBAAsBj2F,EAAExkD,GAAG,cAAqB,GAAGrJ,EAAE7C,WAAW+C,EAAE/C,WAAWw3H,GAAEhtG,QAAQ,CAACpb,EAAE2hK,GAAG1wK,EAAE+O,EAAEy5B,GAAG,MAAMxoC,QAAQ,IAAc,QAAVqwD,EAAEthD,EAAEw5B,SAAiB8nB,EAAE27F,OAAOj9I,GAAG,OAAOshD,GAAG,CAAC,IAAI7iC,EAAE6iC,EAAElvD,aAAa,GAAG,OACnfqsB,EAAE,CAAChrB,EAAE6tD,EAAE9nB,MAAM,IAAI,IAAI4lB,EAAE3gC,EAAEq7I,aAAa,OAAO16G,GAAG,CAAC,GAAGA,EAAEj9C,UAAUsb,GAAG,KAAK2hC,EAAE86G,aAAap9J,GAAG,CAAC,IAAIwkD,EAAElwB,OAAMguB,EAAEw7G,GAAGnhI,EAAE,OAAQrI,IAAI,EAAE0pI,GAAGx5G,EAAElC,IAAIkC,EAAEy4G,eAAetgI,IAAI6nB,EAAEy4G,eAAetgI,GAAiB,QAAd2lB,EAAEkC,EAAEw/F,YAAoB1hG,EAAE26G,eAAetgI,IAAI2lB,EAAE26G,eAAetgI,GAAGkgI,GAAGr4G,EAAE27F,OAAOxjH,GAAGhb,EAAEs7I,eAAetgI,IAAIhb,EAAEs7I,eAAetgI,GAAG,MAAM2lB,EAAEA,EAAE5vD,WAAWiE,EAAE,KAAK6tD,EAAElwB,KAAIkwB,EAAEjpD,OAAO2H,EAAE3H,KAAK,KAAaipD,EAAE9nB,MAAM,GAAG,OAAO/lC,EAAEA,EAAEwpJ,OAAO37F,OAAO,IAAI7tD,EAAE6tD,EAAE,OAAO7tD,GAAG,CAAC,GAAGA,IAAIuM,EAAE,CAACvM,EAAE,KAAK,MAAkB,GAAG,QAAf6tD,EAAE7tD,EAAE4tJ,SAAoB,CAAC//F,EAAE27F,OAAOxpJ,EAAEwpJ,OAAOxpJ,EAAE6tD,EAAE,MAAM7tD,EAAEA,EAAEwpJ,OAAO37F,EACpf7tD,EAAEi0H,GAAEz2H,EAAE+O,EAAErM,EAAE/C,SAAS6oC,GAAGz5B,EAAEA,EAAEw5B,MAAM,OAAOx5B,EAAE,KAAK,EAAE,OAAOrM,EAAEqM,EAAE3H,KAAsBolB,GAAjB3gB,EAAEkD,EAAEohK,cAAiBxwK,SAASipK,GAAG75J,EAAEy5B,GAAmChc,EAAEA,EAAlC9pB,EAAEsmK,GAAGtmK,EAAEmJ,EAAEguK,wBAA8B9qK,EAAE+gJ,WAAW,EAAEr5B,GAAEz2H,EAAE+O,EAAEyd,EAAEgc,GAAGz5B,EAAEw5B,MAAM,KAAK,GAAG,OAAgB18B,EAAEs8J,GAAXzlK,EAAEqM,EAAE3H,KAAY2H,EAAEohK,cAA6BQ,GAAG3wK,EAAE+O,EAAErM,EAAtBmJ,EAAEs8J,GAAGzlK,EAAE0E,KAAKyE,GAAc2gB,EAAEgc,GAAG,KAAK,GAAG,OAAOgqC,GAAGxyE,EAAE+O,EAAEA,EAAE3H,KAAK2H,EAAEohK,aAAa3jJ,EAAEgc,GAAG,KAAK,GAAG,OAAOhc,EAAEzd,EAAE3H,KAAK1E,EAAEqM,EAAEohK,aAAaztK,EAAEqM,EAAEk9J,cAAcz/I,EAAE9pB,EAAEylK,GAAG37I,EAAE9pB,GAAG,OAAO1C,IAAIA,EAAE6vJ,UAAU,KAAK9gJ,EAAE8gJ,UAAU,KAAK9gJ,EAAE+gJ,WAAW,GAAG/gJ,EAAEoxB,IAAI,EAAEy3B,GAAEprC,IAAIxsB,GAAE,EAAG6lK,GAAG92J,IAAI/O,GAAE,EAAG4oK,GAAG75J,EAAEy5B,GAAGqiI,GAAG97J,EAAEyd,EAAE9pB,GAAGuoK,GAAGl8J,EAAEyd,EAAE9pB,EAAE8lC,GAAG2oI,GAAG,KAClfpiK,EAAEyd,GAAE,EAAGxsB,EAAEwoC,GAAG,KAAK,GAAG,OAAO6pI,GAAGryK,EAAE+O,EAAEy5B,GAAG,MAAMroC,MAAM0zD,EAAE,IAAI9kD,EAAEoxB,OAAQ,IAAIq5I,GAAG,KAAK3F,GAAG,KAChF,SAASiG,GAAG95K,EAAE+O,EAAEy5B,EAAEhc,GAAGlqB,KAAK69B,IAAIngC,EAAEsC,KAAKvH,IAAIytC,EAAElmC,KAAK8tJ,QAAQ9tJ,KAAKimC,MAAMjmC,KAAK0pJ,OAAO1pJ,KAAKsmJ,UAAUtmJ,KAAK8E,KAAK9E,KAAK2pK,YAAY,KAAK3pK,KAAK+X,MAAM,EAAE/X,KAAK2G,IAAI,KAAK3G,KAAK6tK,aAAaphK,EAAEzM,KAAKnB,aAAamB,KAAK0tJ,cAAc1tJ,KAAK+mK,YAAY/mK,KAAK2qK,cAAc,KAAK3qK,KAAK4R,KAAKsY,EAAElqB,KAAKwtJ,UAAU,EAAExtJ,KAAKspK,WAAWtpK,KAAKwpK,YAAYxpK,KAAKupK,WAAW,KAAKvpK,KAAKqmK,oBAAoBrmK,KAAKwmK,eAAe,EAAExmK,KAAKutJ,UAAU,KAAK,SAASogB,GAAGjwK,EAAE+O,EAAEy5B,EAAEhc,GAAG,OAAO,IAAIstJ,GAAG95K,EAAE+O,EAAEy5B,EAAEhc,GAC1b,SAASokJ,GAAG5wK,GAAiB,UAAdA,EAAEA,EAAE5C,aAAuB4C,EAAE+kJ,kBAC5C,SAASgnB,GAAG/rK,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE6vJ,UAC4E,OADlE,OAAOrnH,IAAGA,EAAEynI,GAAGjwK,EAAEmgC,IAAIpxB,EAAE/O,EAAEjF,IAAIiF,EAAEkU,OAAQ+3J,YAAYjsK,EAAEisK,YAAYzjI,EAAEphC,KAAKpH,EAAEoH,KAAKohC,EAAEogH,UAAU5oJ,EAAE4oJ,UAAUpgH,EAAEqnH,UAAU7vJ,EAAEA,EAAE6vJ,UAAUrnH,IAAIA,EAAE2nI,aAAaphK,EAAEy5B,EAAEsnH,UAAU,EAAEtnH,EAAEqjI,WAAW,KAAKrjI,EAAEsjI,YAAY,KAAKtjI,EAAEojI,WAAW,MAAMpjI,EAAEmgI,oBAAoB3oK,EAAE2oK,oBAAoBngI,EAAEsgI,eAAe9oK,EAAE8oK,eAAetgI,EAAED,MAAMvoC,EAAEuoC,MAAMC,EAAEykI,cAAcjtK,EAAEitK,cAAczkI,EAAEwnH,cAAchwJ,EAAEgwJ,cAAcxnH,EAAE6gI,YAAYrpK,EAAEqpK,YAAYt6J,EAAE/O,EAAEmB,aAAaqnC,EAAErnC,aAAa,OAAO4N,EAAE,KAAK,CAAC+5J,eAAe/5J,EAAE+5J,eACzfD,aAAa95J,EAAE85J,aAAaK,WAAWn6J,EAAEm6J,YAAY1gI,EAAE4nH,QAAQpwJ,EAAEowJ,QAAQ5nH,EAAEnuB,MAAMra,EAAEqa,MAAMmuB,EAAEv/B,IAAIjJ,EAAEiJ,IAAWu/B,EAC5G,SAAS0jI,GAAGlsK,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,EAAEmJ,GAAG,IAAIrJ,EAAE,EAAM,GAAJgqB,EAAExsB,EAAK,oBAAoBA,EAAE4wK,GAAG5wK,KAAKwC,EAAE,QAAQ,GAAG,kBAAkBxC,EAAEwC,EAAE,OAAOxC,EAAE,OAAOA,GAAG,KAAK8qJ,GAAG,OAAOuhB,GAAG7jI,EAAE7oC,SAAS+C,EAAEmJ,EAAEkD,GAAG,KAAKm8I,GAAG1oJ,EAAE,EAAEE,GAAG,EAAE,MAAM,KAAKqoJ,GAAGvoJ,EAAE,EAAEE,GAAG,EAAE,MAAM,KAAKxB,GAAG,OAAOlB,EAAEiwK,GAAG,GAAGznI,EAAEz5B,EAAI,EAAFrM,IAAOupK,YAAY/qK,GAAGlB,EAAEoH,KAAKlG,GAAGlB,EAAE8oK,eAAej9J,EAAE7L,EAAE,KAAKorJ,GAAG,OAAOprJ,EAAEiwK,GAAG,GAAGznI,EAAEz5B,EAAErM,IAAK0E,KAAKgkJ,GAAGprJ,EAAEisK,YAAY7gB,GAAGprJ,EAAE8oK,eAAej9J,EAAE7L,EAAE,KAAKqrJ,GAAG,OAAOrrJ,EAAEiwK,GAAG,GAAGznI,EAAEz5B,EAAErM,IAAKupK,YAAY5gB,GAAGrrJ,EAAE8oK,eAAej9J,EAAE7L,EAAE,QAAQ,GAAG,kBAAkBA,GAAG,OAAOA,EAAE,OAAOA,EAAEwnI,UAAU,KAAKwjB,GAAGxoJ,EACpf,GAAG,MAAMxC,EAAE,KAAKirJ,GAAGzoJ,EAAE,EAAE,MAAMxC,EAAE,KAAKmrJ,GAAG3oJ,EAAE,GAAG,MAAMxC,EAAE,KAAKsrJ,GAAG9oJ,EAAE,GAAG,MAAMxC,EAAE,KAAKurJ,GAAG/oJ,EAAE,GAAGgqB,EAAE,KAAK,MAAMxsB,EAAE,KAAKwrJ,GAAGhpJ,EAAE,GAAG,MAAMxC,EAAE,MAAMG,MAAM0zD,EAAE,IAAI,MAAM7zD,EAAEA,SAASA,EAAE,KAAgE,OAA1D+O,EAAEkhK,GAAGztK,EAAEgmC,EAAEz5B,EAAErM,IAAKupK,YAAYjsK,EAAE+O,EAAE3H,KAAKolB,EAAEzd,EAAE+5J,eAAej9J,EAASkD,EAAE,SAASs9J,GAAGrsK,EAAE+O,EAAEy5B,EAAEhc,GAAoC,OAAjCxsB,EAAEiwK,GAAG,EAAEjwK,EAAEwsB,EAAEzd,IAAK+5J,eAAetgI,EAASxoC,EAAE,SAASgsK,GAAGhsK,EAAE+O,EAAEy5B,GAAuC,OAApCxoC,EAAEiwK,GAAG,EAAEjwK,EAAE,KAAK+O,IAAK+5J,eAAetgI,EAASxoC,EACrW,SAASosK,GAAGpsK,EAAE+O,EAAEy5B,GAAuK,OAApKz5B,EAAEkhK,GAAG,EAAE,OAAOjwK,EAAEL,SAASK,EAAEL,SAAS,GAAGK,EAAEjF,IAAIgU,IAAK+5J,eAAetgI,EAAEz5B,EAAE65I,UAAU,CAAC8I,cAAc1xJ,EAAE0xJ,cAAcqoB,gBAAgB,KAAK5N,eAAensK,EAAEmsK,gBAAuBp9J,EAC9L,SAASirK,GAAGh6K,EAAE+O,EAAEy5B,GAAGlmC,KAAK69B,IAAIpxB,EAAEzM,KAAK6nB,QAAQ,KAAK7nB,KAAKovJ,cAAc1xJ,EAAEsC,KAAK41K,UAAU51K,KAAKy3K,gBAAgB,KAAKz3K,KAAKk1K,uBAAuB,EAAEl1K,KAAKi1K,aAAa,KAAKj1K,KAAKq1K,eAAe,EAAEr1K,KAAK+uK,eAAe/uK,KAAK4O,QAAQ,KAAK5O,KAAK8wJ,QAAQ5qH,EAAElmC,KAAKy0K,aAAa,KAAKz0K,KAAKw0K,iBAAiB,GAAGx0K,KAAKk0K,gBAAgBl0K,KAAKq0K,eAAer0K,KAAKs0K,sBAAsBt0K,KAAKm1K,kBAAkBn1K,KAAKm2K,mBAAmBn2K,KAAKo0K,iBAAiB,EACva,SAASD,GAAGz2K,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAEy4K,mBAAyC,OAAtBz4K,EAAEA,EAAEy3K,kBAAyB,IAAIjvI,GAAGA,GAAGz5B,GAAG/O,GAAG+O,EAAE,SAASgkK,GAAG/yK,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAEy4K,mBAAmBjsJ,EAAExsB,EAAEy3K,kBAAkBjvI,EAAEz5B,IAAI/O,EAAEy4K,mBAAmB1pK,IAAMyd,EAAEzd,GAAG,IAAIy5B,KAAExoC,EAAEy3K,kBAAkB1oK,GAAEA,GAAG/O,EAAE22K,iBAAiB32K,EAAE22K,eAAe,GAAG5nK,GAAG/O,EAAEw2K,kBAAkBx2K,EAAEw2K,gBAAgB,GAClT,SAASxD,GAAGhzK,EAAE+O,GAAGA,EAAE/O,EAAE02K,mBAAmB12K,EAAE02K,iBAAiB3nK,GAAG,IAAIy5B,EAAExoC,EAAEy4K,mBAAmB,IAAIjwI,IAAIz5B,GAAGy5B,EAAExoC,EAAEy4K,mBAAmBz4K,EAAEy3K,kBAAkBz3K,EAAE42K,sBAAsB,EAAE7nK,GAAG/O,EAAEy3K,oBAAoBz3K,EAAEy3K,kBAAkB1oK,EAAE,GAAGA,EAAE/O,EAAE42K,wBAAwB52K,EAAE42K,sBAAsB7nK,IAAI,SAASkoK,GAAGj3K,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAEw2K,iBAAmB,IAAIhuI,GAAGA,EAAEz5B,KAAE/O,EAAEw2K,gBAAgBznK,GAC5V,SAASkrK,GAAGj6K,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAI9pB,EAAEqM,EAAEob,QAAQte,EAAE2+J,KAAKhoK,EAAE2nK,GAAGzkB,SAAS75I,EAAE4+J,GAAG5+J,EAAEnJ,EAAEF,GAAGxC,EAAE,GAAGwoC,EAAE,CAAyBz5B,EAAE,CAAC,GAAG6gJ,GAA9BpnH,EAAEA,EAAE+hI,uBAAkC/hI,GAAG,IAAIA,EAAErI,IAAI,MAAMhgC,MAAM0zD,EAAE,MAAM,IAAIxD,EAAE7nB,EAAE,EAAE,CAAC,OAAO6nB,EAAElwB,KAAK,KAAK,EAAEkwB,EAAEA,EAAEu4F,UAAU13I,QAAQ,MAAMnC,EAAE,KAAK,EAAE,GAAG6oD,GAAEvH,EAAEjpD,MAAM,CAACipD,EAAEA,EAAEu4F,UAAUkd,0CAA0C,MAAM/2J,GAAGshD,EAAEA,EAAE27F,aAAa,OAAO37F,GAAG,MAAMlwD,MAAM0zD,EAAE,MAAO,GAAG,IAAIrrB,EAAErI,IAAI,CAAC,IAAI3S,EAAEgb,EAAEphC,KAAK,GAAGwwD,GAAEpqC,GAAG,CAACgb,EAAEm9H,GAAGn9H,EAAEhb,EAAE6iC,GAAG,MAAMrwD,GAAGwoC,EAAE6nB,OAAO7nB,EAAE28H,GAC3W,OAD8W,OAAOp2J,EAAEmC,QAAQnC,EAAEmC,QAAQs3B,EAAEz5B,EAAEsiK,eAAe7oI,GAAEz5B,EAAE46J,GAAG99J,EAAErJ,IAAKs0B,QAAQ,CAAC1c,QAAQpa,GACpe,QADuewsB,OAAE,IAClfA,EAAE,KAAKA,KAAazd,EAAE+K,SAAS0S,GAAGq9I,GAAGnnK,EAAEqM,GAAG27J,GAAGhoK,EAAEmJ,GAAUA,EAAE,SAASquK,GAAGl6K,GAAe,KAAZA,EAAEA,EAAEmqB,SAAcoe,MAAM,OAAO,KAAK,OAAOvoC,EAAEuoC,MAAMpI,KAAK,KAAK,EAA2B,QAAQ,OAAOngC,EAAEuoC,MAAMqgH,WAAW,SAASuxB,GAAGn6K,EAAE+O,GAAqB,QAAlB/O,EAAEA,EAAEgwJ,gBAAwB,OAAOhwJ,EAAEiwJ,YAAYjwJ,EAAE0xK,UAAU3iK,IAAI/O,EAAE0xK,UAAU3iK,GAAG,SAASqrK,GAAGp6K,EAAE+O,GAAGorK,GAAGn6K,EAAE+O,IAAI/O,EAAEA,EAAE6vJ,YAAYsqB,GAAGn6K,EAAE+O,GACpV,SAASsrK,GAAGr6K,EAAE+O,EAAEy5B,GAA6B,IAAIhc,EAAE,IAAIwtJ,GAAGh6K,EAAE+O,EAAzCy5B,EAAE,MAAMA,IAAG,IAAKA,EAAE4qH,SAA4B1wJ,EAAEutK,GAAG,EAAE,KAAK,KAAK,IAAIlhK,EAAE,EAAE,IAAIA,EAAE,EAAE,GAAGyd,EAAErC,QAAQznB,EAAEA,EAAEkmJ,UAAUp8H,EAAE48I,GAAG1mK,GAAG1C,EAAEs3J,IAAI9qI,EAAErC,QAAQqe,GAAG,IAAIz5B,GAhO5J,SAAY/O,EAAE+O,GAAG,IAAIy5B,EAAEmnH,GAAG5gJ,GAAG0jJ,GAAGl2J,SAAQ,SAASyD,GAAG4xJ,GAAG5xJ,EAAE+O,EAAEy5B,MAAKkqH,GAAGn2J,SAAQ,SAASyD,GAAG4xJ,GAAG5xJ,EAAE+O,EAAEy5B,MAgOiE8xI,CAAGt6K,EAAE,IAAIA,EAAE2uJ,SAAS3uJ,EAAEA,EAAEotJ,eAAe9qJ,KAAKi4K,cAAc/tJ,EACzN,SAASguJ,GAAGx6K,GAAG,SAASA,GAAG,IAAIA,EAAE2uJ,UAAU,IAAI3uJ,EAAE2uJ,UAAU,KAAK3uJ,EAAE2uJ,WAAW,IAAI3uJ,EAAE2uJ,UAAU,iCAAiC3uJ,EAAE4uJ,YAChI,SAAS6rB,GAAGz6K,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,IAAImJ,EAAE28B,EAAE6rI,oBAAoB,GAAGxoK,EAAE,CAAC,IAAIrJ,EAAEqJ,EAAE0uK,cAAc,GAAG,oBAAoB73K,EAAE,CAAC,IAAI2tD,EAAE3tD,EAAEA,EAAE,WAAW,IAAI1C,EAAEk6K,GAAG13K,GAAG6tD,EAAEjxD,KAAKY,IAAIi6K,GAAGlrK,EAAEvM,EAAExC,EAAE0C,OAAO,CAAmD,GAAlDmJ,EAAE28B,EAAE6rI,oBAD9B,SAAYr0K,EAAE+O,GAA0H,GAAvHA,IAA2DA,MAAvDA,EAAE/O,EAAE,IAAIA,EAAE2uJ,SAAS3uJ,EAAE2gI,gBAAgB3gI,EAAEwuJ,WAAW,OAAa,IAAIz/I,EAAE4/I,WAAW5/I,EAAE2rK,aAAa,qBAAwB3rK,EAAE,IAAI,IAAIy5B,EAAEA,EAAExoC,EAAE0uJ,WAAW1uJ,EAAE41H,YAAYptF,GAAG,OAAO,IAAI6xI,GAAGr6K,EAAE,EAAE+O,EAAE,CAACqkJ,SAAQ,QAAI,GACvKunB,CAAGnyI,EAAEhc,GAAGhqB,EAAEqJ,EAAE0uK,cAAiB,oBAAoB73K,EAAE,CAAC,IAAI8qB,EAAE9qB,EAAEA,EAAE,WAAW,IAAI1C,EAAEk6K,GAAG13K,GAAGgrB,EAAEpuB,KAAKY,IAAIi4K,IAAG,WAAWgC,GAAGlrK,EAAEvM,EAAExC,EAAE0C,MAAK,OAAOw3K,GAAG13K,GAAG,SAASo4K,GAAG56K,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAE,EAAEpwB,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,KAAK,MAAM,CAACorI,SAASqjB,GAAG9vJ,IAAI,MAAMyxB,EAAE,KAAK,GAAGA,EAAE7sB,SAASK,EAAE0xJ,cAAc3iJ,EAAEo9J,eAAe3jI,GAGpR,SAASqyI,GAAG76K,EAAE+O,GAAG,IAAIy5B,EAAE,EAAEpsC,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,KAAK,IAAIo+K,GAAGzrK,GAAG,MAAM5O,MAAM0zD,EAAE,MAAM,OAAO+mH,GAAG56K,EAAE+O,EAAE,KAAKy5B,GALpI6xI,GAAGj9K,UAAU8hI,OAAO,SAASl/H,GAAGi6K,GAAGj6K,EAAEsC,KAAKi4K,cAAc,KAAK,OAAOF,GAAGj9K,UAAU09K,QAAQ,WAAW,IAAI96K,EAAEsC,KAAKi4K,cAAcxrK,EAAE/O,EAAE0xJ,cAAcuoB,GAAG,KAAKj6K,EAAE,MAAK,WAAW+O,EAAEuoJ,IAAI,SAG1YxF,GAAG,SAAS9xJ,GAAG,GAAG,KAAKA,EAAEmgC,IAAI,CAAC,IAAIpxB,EAAEm5J,GAAGsC,KAAK,IAAI,KAAKE,GAAG1qK,EAAE+O,GAAGqrK,GAAGp6K,EAAE+O,KAAKgjJ,GAAG,SAAS/xJ,GAAG,KAAKA,EAAEmgC,MAAMuqI,GAAG1qK,EAAE,GAAGo6K,GAAGp6K,EAAE,KAAKgyJ,GAAG,SAAShyJ,GAAG,GAAG,KAAKA,EAAEmgC,IAAI,CAAC,IAAIpxB,EAAEy7J,KAAoBE,GAAG1qK,EAAlB+O,EAAE07J,GAAG17J,EAAE/O,EAAE,OAAco6K,GAAGp6K,EAAE+O,KAC1Ly5I,EAAG,SAASxoJ,EAAE+O,EAAEy5B,GAAG,OAAOz5B,GAAG,IAAK,QAAyB,GAAjBk+I,GAAGjtJ,EAAEwoC,GAAGz5B,EAAEy5B,EAAEjpC,KAAQ,UAAUipC,EAAEphC,MAAM,MAAM2H,EAAE,CAAC,IAAIy5B,EAAExoC,EAAEwoC,EAAEmtF,YAAYntF,EAAEA,EAAEmtF,WAAsF,IAA3EntF,EAAEA,EAAE2wF,iBAAiB,cAAc/rH,KAAKC,UAAU,GAAG0B,GAAG,mBAAuBA,EAAE,EAAEA,EAAEy5B,EAAEnsC,OAAO0S,IAAI,CAAC,IAAIyd,EAAEgc,EAAEz5B,GAAG,GAAGyd,IAAIxsB,GAAGwsB,EAAEs0H,OAAO9gJ,EAAE8gJ,KAAK,CAAC,IAAIp+I,EAAE80J,GAAGhrI,GAAG,IAAI9pB,EAAE,MAAMvC,MAAM0zD,EAAE,KAAK24F,GAAGhgI,GAAGygI,GAAGzgI,EAAE9pB,KAAK,MAAM,IAAK,WAAWirJ,GAAG3tJ,EAAEwoC,GAAG,MAAM,IAAK,SAAmB,OAAVz5B,EAAEy5B,EAAExtC,QAAeuyJ,GAAGvtJ,IAAIwoC,EAAEiqI,SAAS1jK,GAAE,KAAMg6I,EAAGivB,GAC9ZhvB,EAAG,SAAShpJ,EAAE+O,EAAEy5B,EAAEhc,EAAE9pB,GAAG,IAAImJ,EAAEiqH,GAAEA,IAAG,EAAE,IAAI,OAAO+xC,GAAG,GAAG7nK,EAAEsb,KAAK,KAAKvM,EAAEy5B,EAAEhc,EAAE9pB,IAAnC,QA3DoC,KA2DWozH,GAAEjqH,IAASo8J,OAAOhf,EAAG,WA3DhC,KA2D6C,GAADnzB,MAhD0R,WAAc,GAAG,OAAOkgD,GAAG,CAAC,IAAIh2K,EAAEg2K,GAAGA,GAAG,KAAKh2K,EAAEzD,SAAQ,SAASyD,EAAEwoC,GAAGyuI,GAAGzuI,EAAExoC,GAAGi2H,GAAEztF,MAAKy/H,MAgD3V8S,GAAK7D,OAAOhuB,EAAG,SAASlpJ,EAAE+O,GAAG,IAAIy5B,EAAEstF,GAAEA,IAAG,EAAE,IAAI,OAAO91H,EAAE+O,GAAb,QA3DzG,KA2DiI+mH,GAAEttF,IAASy/H,OAA8I,IAAI+S,GAAG,CAACljE,OAAO,CAACk7C,GAAGuE,GAAGC,GAAGlP,EAAGN,EAAGiQ,GAAG,SAASj4J,GAAGuwJ,GAAGvwJ,EAAEg4J,KAAKnP,EAAGC,EAAG9iJ,GAAG29D,GAAGuzG,GAAG,CAAC/sJ,SAAQ,MAClb,SAAUnqB,GAAG,IAAI+O,EAAE/O,EAAEi7K,yBAnBgE,SAAYj7K,GAAG,GAAG,qBAAqBrB,+BAA+B,OAAM,EAAG,IAAIoQ,EAAEpQ,+BAA+B,GAAGoQ,EAAEu7H,aAAav7H,EAAEmsK,cAAc,OAAM,EAAG,IAAI,IAAI1yI,EAAEz5B,EAAEosK,OAAOn7K,GAAGw5K,GAAG,SAASx5K,GAAG,IAAI+O,EAAEqsK,kBAAkB5yI,EAAExoC,OAAE,EAAO,MAA0B,GAApBA,EAAEmqB,QAAQ2lI,YAAe,MAAMptJ,MAAMmxK,GAAG,SAAS7zK,GAAG,IAAI+O,EAAEssK,qBAAqB7yI,EAAExoC,GAAG,MAAM0C,MAAM,MAAM8pB,MAmBpX8uJ,CAAGp8K,EAAE,GAAGc,EAAE,CAACu7K,kBAAkB,KAAKC,cAAc,KAAKC,mBAAmB,KAAKC,eAAe,KAAKC,qBAAqBvxB,EAAG5E,uBAAuBo2B,wBAAwB,SAAS57K,GAAW,OAAO,QAAfA,EAAEmwJ,GAAGnwJ,IAAmB,KAAKA,EAAE4oJ,WAAWqyB,wBAAwB,SAASj7K,GAAG,OAAO+O,EAAEA,EAAE/O,GAAG,MAAM67K,4BAA4B,KAAKC,gBAAgB,KAAKC,aAAa,KAAKC,kBAAkB,KAAKC,gBAAgB,QAAzb,CAAmc,CAAChB,wBAAwBtpB,GAAGuqB,WAAW,EAAEppK,QAAQ,UACpfqpK,oBAAoB,cAAcxhL,EAAQyrJ,mDAAmD40B,GAAGrgL,EAAQksI,aAAag0C,GAAGlgL,EAAQmzI,YAAY,SAAS9tI,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,GAAG,IAAIA,EAAE2uJ,SAAS,OAAO3uJ,EAAE,IAAI+O,EAAE/O,EAAEuqK,oBAAoB,QAAG,IAASx7J,EAAE,CAAC,GAAG,oBAAoB/O,EAAEk/H,OAAO,MAAM/+H,MAAM0zD,EAAE,MAAM,MAAM1zD,MAAM0zD,EAAE,IAAI54D,OAAOQ,KAAKuE,KAA0C,OAA5BA,EAAE,QAAVA,EAAEmwJ,GAAGphJ,IAAc,KAAK/O,EAAE4oJ,WACvWjuJ,EAAQyhL,UAAU,SAASp8K,EAAE+O,GAAG,GA9DwC,KA8DnC,GAAD+mH,IAAe,MAAM31H,MAAM0zD,EAAE,MAAM,IAAIrrB,EAAEstF,GAAEA,IAAG,EAAE,IAAI,OAAO+xC,GAAG,GAAG7nK,EAAEsb,KAAK,KAAKvM,IAA7B,QAAyC+mH,GAAEttF,EAAEy/H,OAAOttK,EAAQy4J,QAAQ,SAASpzJ,EAAE+O,EAAEy5B,GAAG,IAAIgyI,GAAGzrK,GAAG,MAAM5O,MAAM0zD,EAAE,MAAM,OAAO4mH,GAAG,KAAKz6K,EAAE+O,GAAE,EAAGy5B,IAAI7tC,EAAQukI,OAAO,SAASl/H,EAAE+O,EAAEy5B,GAAG,IAAIgyI,GAAGzrK,GAAG,MAAM5O,MAAM0zD,EAAE,MAAM,OAAO4mH,GAAG,KAAKz6K,EAAE+O,GAAE,EAAGy5B,IACnT7tC,EAAQ0hL,uBAAuB,SAASr8K,GAAG,IAAIw6K,GAAGx6K,GAAG,MAAMG,MAAM0zD,EAAE,KAAK,QAAO7zD,EAAEq0K,sBAAqB4D,IAAG,WAAWwC,GAAG,KAAK,KAAKz6K,GAAE,GAAG,WAAWA,EAAEq0K,oBAAoB,KAAKr0K,EAAEs3J,IAAI,YAAS,IAAQ38J,EAAQ2hL,wBAAwBtE,GAAGr9K,EAAQ4hL,sBAAsB,SAASv8K,EAAE+O,GAAG,OAAO8rK,GAAG76K,EAAE+O,EAAE,EAAE3S,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,OACvVzB,EAAQ6hL,oCAAoC,SAASx8K,EAAE+O,EAAEy5B,EAAEhc,GAAG,IAAIguJ,GAAGhyI,GAAG,MAAMroC,MAAM0zD,EAAE,MAAM,GAAG,MAAM7zD,QAAG,IAASA,EAAEuqK,oBAAoB,MAAMpqK,MAAM0zD,EAAE,KAAK,OAAO4mH,GAAGz6K,EAAE+O,EAAEy5B,GAAE,EAAGhc,IAAI7xB,EAAQmY,QAAQ,W,6BChS/LpY,EAAOC,QAAUC,EAAQ,K,6BCMd,IAAIiR,EAAErJ,EAAE6tD,EAAE7iC,EAAE2gC,EACzB,GAAG,qBAAqB/tD,QAAQ,oBAAoBq8K,eAAe,CAAC,IAAI5vK,EAAE,KAAKwmD,EAAE,KAAK1mD,EAAE,SAAFA,IAAa,GAAG,OAAOE,EAAE,IAAI,IAAI7M,EAAErF,EAAQ4rK,eAAe15J,GAAE,EAAG7M,GAAG6M,EAAE,KAAK,MAAMkC,GAAG,MAAMkL,WAAWtN,EAAE,GAAGoC,IAAK8kD,EAAE9lC,KAAKU,MAAM9zB,EAAQ4rK,aAAa,WAAW,OAAOx4I,KAAKU,MAAMolC,GAAGhoD,EAAE,SAAS7L,GAAG,OAAO6M,EAAEoN,WAAWpO,EAAE,EAAE7L,IAAI6M,EAAE7M,EAAEia,WAAWtN,EAAE,KAAKnK,EAAE,SAASxC,EAAE+O,GAAGskD,EAAEp5C,WAAWja,EAAE+O,IAAIshD,EAAE,WAAW1vC,aAAa0yC,IAAI7lC,EAAE,WAAW,OAAM,GAAI2gC,EAAExzD,EAAQ+hL,wBAAwB,iBAAiB,CAAC,IAAI59J,EAAE1e,OAAOq0B,YAAY4Y,EAAEjtC,OAAO2tB,KACnfjB,EAAE1sB,OAAO6Z,WAAWo8C,EAAEj2D,OAAOugB,aAAa,GAAG,qBAAqB9hB,QAAQ,CAAC,IAAI0zE,EAAEnyE,OAAOu8K,qBAAqB,oBAAoBv8K,OAAOghI,uBAAuBviI,QAAQC,MAAM,2IAA2I,oBAAoByzE,GAAG1zE,QAAQC,MAAM,0IAA0I,GAAG,kBACneggB,GAAG,oBAAoBA,EAAE2P,IAAI9zB,EAAQ4rK,aAAa,WAAW,OAAOznJ,EAAE2P,WAAW,CAAC,IAAIsoG,EAAE1pF,EAAE5e,MAAM9zB,EAAQ4rK,aAAa,WAAW,OAAOl5H,EAAE5e,MAAMsoG,GAAG,IAAItjD,GAAE,EAAGwjD,EAAE,KAAKU,GAAG,EAAEx2C,EAAE,EAAEk1C,EAAE,EAAE7oG,EAAE,WAAW,OAAO7yB,EAAQ4rK,gBAAgBlwC,GAAGloE,EAAE,aAAaxzD,EAAQ+hL,wBAAwB,SAAS18K,GAAG,EAAEA,GAAG,IAAIA,EAAEnB,QAAQC,MAAM,oHAAoHqiF,EAAE,EAAEnhF,EAAE2E,KAAKu4B,MAAM,IAAIl9B,GAAG,GAAG,IAAI62H,EAAE,IAAI4lD,eAAepxG,EAAEwrD,EAAE+lD,MAAM/lD,EAAEgmD,MAAMvkJ,UACnf,WAAW,GAAG,OAAO2+F,EAAE,CAAC,IAAIj3H,EAAErF,EAAQ4rK,eAAelwC,EAAEr2H,EAAEmhF,EAAE,IAAI81C,GAAE,EAAGj3H,GAAGqrE,EAAE9yC,YAAY,OAAOk7C,GAAE,EAAGwjD,EAAE,MAAM,MAAMloH,GAAG,MAAMs8D,EAAE9yC,YAAY,MAAMxpB,QAAS0kE,GAAE,GAAI5nE,EAAE,SAAS7L,GAAGi3H,EAAEj3H,EAAEyzE,IAAIA,GAAE,EAAGpI,EAAE9yC,YAAY,QAAQ/1B,EAAE,SAASxC,EAAE+O,GAAG4oH,EAAE7qG,GAAE,WAAW9sB,EAAErF,EAAQ4rK,kBAAiBx3J,IAAIshD,EAAE,WAAWgG,EAAEshE,GAAGA,GAAG,GAAG,SAASP,EAAEp3H,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE3D,OAAO2D,EAAEjE,KAAKgT,GAAG/O,EAAE,OAAO,CAAC,IAAIwsB,EAAEgc,EAAE,IAAI,EAAE9lC,EAAE1C,EAAEwsB,GAAG,UAAG,IAAS9pB,GAAG,EAAEy0H,EAAEz0H,EAAEqM,IAA0B,MAAM/O,EAA7BA,EAAEwsB,GAAGzd,EAAE/O,EAAEwoC,GAAG9lC,EAAE8lC,EAAEhc,GAAgB,SAASorC,EAAE53D,GAAU,YAAO,KAAdA,EAAEA,EAAE,IAAqB,KAAKA,EAC9c,SAASk3H,EAAEl3H,GAAG,IAAI+O,EAAE/O,EAAE,GAAG,QAAG,IAAS+O,EAAE,CAAC,IAAIy5B,EAAExoC,EAAEqtB,MAAM,GAAGmb,IAAIz5B,EAAE,CAAC/O,EAAE,GAAGwoC,EAAExoC,EAAE,IAAI,IAAIwsB,EAAE,EAAE9pB,EAAE1C,EAAE3D,OAAOmwB,EAAE9pB,GAAG,CAAC,IAAI6sB,EAAE,GAAG/C,EAAE,GAAG,EAAEttB,EAAEc,EAAEuvB,GAAGpgB,EAAEogB,EAAE,EAAE9jB,EAAEzL,EAAEmP,GAAG,QAAG,IAASjQ,GAAG,EAAEi4H,EAAEj4H,EAAEspC,QAAG,IAAS/8B,GAAG,EAAE0rH,EAAE1rH,EAAEvM,IAAIc,EAAEwsB,GAAG/gB,EAAEzL,EAAEmP,GAAGq5B,EAAEhc,EAAErd,IAAInP,EAAEwsB,GAAGttB,EAAEc,EAAEuvB,GAAGiZ,EAAEhc,EAAE+C,OAAQ,WAAG,IAAS9jB,GAAG,EAAE0rH,EAAE1rH,EAAE+8B,IAA0B,MAAMxoC,EAA7BA,EAAEwsB,GAAG/gB,EAAEzL,EAAEmP,GAAGq5B,EAAEhc,EAAErd,IAAgB,OAAOJ,EAAE,OAAO,KAAK,SAASooH,EAAEn3H,EAAE+O,GAAG,IAAIy5B,EAAExoC,EAAE88K,UAAU/tK,EAAE+tK,UAAU,OAAO,IAAIt0I,EAAEA,EAAExoC,EAAEgG,GAAG+I,EAAE/I,GAAG,IAAIqxH,EAAE,GAAGE,EAAE,GAAGztH,EAAE,EAAE+tH,EAAE,KAAKpB,EAAE,EAAEK,GAAE,EAAGiB,GAAE,EAAGf,GAAE,EACja,SAASsuB,EAAEtlJ,GAAG,IAAI,IAAI+O,EAAE6oD,EAAE2/D,GAAG,OAAOxoH,GAAG,CAAC,GAAG,OAAOA,EAAE+K,SAASo9G,EAAEK,OAAQ,MAAGxoH,EAAE4qB,WAAW35B,GAAgD,MAA9Ck3H,EAAEK,GAAGxoH,EAAE+tK,UAAU/tK,EAAE+5J,eAAe1xC,EAAEC,EAAEtoH,GAAcA,EAAE6oD,EAAE2/D,IAAI,SAASzB,EAAE91H,GAAa,GAAVg3H,GAAE,EAAGsuB,EAAEtlJ,IAAO+3H,EAAE,GAAG,OAAOngE,EAAEy/D,GAAGU,GAAE,EAAGlsH,EAAEkqH,OAAO,CAAC,IAAIhnH,EAAE6oD,EAAE2/D,GAAG,OAAOxoH,GAAGvM,EAAEszH,EAAE/mH,EAAE4qB,UAAU35B,IACtP,SAAS+1H,EAAE/1H,EAAE+O,GAAGgpH,GAAE,EAAGf,IAAIA,GAAE,EAAG3mE,KAAKymE,GAAE,EAAG,IAAItuF,EAAEiuF,EAAE,IAAS,IAAL6uB,EAAEv2I,GAAO8oH,EAAEjgE,EAAEy/D,GAAG,OAAOQ,MAAMA,EAAEixC,eAAe/5J,IAAI/O,IAAIwtB,MAAM,CAAC,IAAIhB,EAAEqrG,EAAE/9G,SAAS,GAAG,OAAO0S,EAAE,CAACqrG,EAAE/9G,SAAS,KAAK28G,EAAEoB,EAAEklD,cAAc,IAAIr6K,EAAE8pB,EAAEqrG,EAAEixC,gBAAgB/5J,GAAGA,EAAEpU,EAAQ4rK,eAAe,oBAAoB7jK,EAAEm1H,EAAE/9G,SAASpX,EAAEm1H,IAAIjgE,EAAEy/D,IAAIH,EAAEG,GAAGiuB,EAAEv2I,QAAQmoH,EAAEG,GAAGQ,EAAEjgE,EAAEy/D,GAAG,GAAG,OAAOQ,EAAE,IAAItoG,GAAE,MAAO,CAAC,IAAIrwB,EAAE04D,EAAE2/D,GAAG,OAAOr4H,GAAGsD,EAAEszH,EAAE52H,EAAEy6B,UAAU5qB,GAAGwgB,GAAE,EAAG,OAAOA,EAA7U,QAAuVsoG,EAAE,KAAKpB,EAAEjuF,EAAEsuF,GAAE,GACpZ,SAASY,EAAE13H,GAAG,OAAOA,GAAG,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,IAAI,KAAK,EAAE,OAAO,WAAW,KAAK,EAAE,OAAO,IAAI,QAAQ,OAAO,KAAK,IAAIi2H,EAAE9nE,EAAExzD,EAAQssK,sBAAsB,EAAEtsK,EAAQgsK,2BAA2B,EAAEhsK,EAAQosK,qBAAqB,EAAEpsK,EAAQg5J,wBAAwB,EAAEh5J,EAAQqiL,mBAAmB,KAAKriL,EAAQ05J,8BAA8B,EAAE15J,EAAQwrK,wBAAwB,SAASnmK,GAAGA,EAAE8Z,SAAS,MAAMnf,EAAQsiL,2BAA2B,WAAWllD,GAAGjB,IAAIiB,GAAE,EAAGlsH,EAAEkqH,KACxcp7H,EAAQ8rK,iCAAiC,WAAW,OAAOhwC,GAAG97H,EAAQuiL,8BAA8B,WAAW,OAAOtlH,EAAEy/D,IAAI18H,EAAQwiL,cAAc,SAASn9K,GAAG,OAAOy2H,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI1nH,EAAE,EAAE,MAAM,QAAQA,EAAE0nH,EAAE,IAAIjuF,EAAEiuF,EAAEA,EAAE1nH,EAAE,IAAI,OAAO/O,IAAX,QAAuBy2H,EAAEjuF,IAAI7tC,EAAQyiL,wBAAwB,aAAaziL,EAAQ0rK,sBAAsBpwC,EAAEt7H,EAAQu4J,yBAAyB,SAASlzJ,EAAE+O,GAAG,OAAO/O,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,QAAQA,EAAE,EAAE,IAAIwoC,EAAEiuF,EAAEA,EAAEz2H,EAAE,IAAI,OAAO+O,IAAX,QAAuB0nH,EAAEjuF,IAChe7tC,EAAQ+4J,0BAA0B,SAAS1zJ,EAAE+O,EAAEy5B,GAAG,IAAIhc,EAAE7xB,EAAQ4rK,eAAe,GAAG,kBAAkB/9H,GAAG,OAAOA,EAAE,CAAC,IAAI9lC,EAAE8lC,EAAErP,MAAMz2B,EAAE,kBAAkBA,GAAG,EAAEA,EAAE8pB,EAAE9pB,EAAE8pB,EAAEgc,EAAE,kBAAkBA,EAAE9nB,QAAQ8nB,EAAE9nB,QAAQg3G,EAAE13H,QAAQwoC,EAAEkvF,EAAE13H,GAAG0C,EAAE8pB,EAAyM,OAAjMxsB,EAAE,CAACgG,GAAG8D,IAAIgQ,SAAS/K,EAAEguK,cAAc/8K,EAAE25B,UAAUj3B,EAAEomK,eAAvDtgI,EAAE9lC,EAAE8lC,EAAoEs0I,WAAW,GAAGp6K,EAAE8pB,GAAGxsB,EAAE88K,UAAUp6K,EAAE00H,EAAEG,EAAEv3H,GAAG,OAAO43D,EAAEy/D,IAAIr3H,IAAI43D,EAAE2/D,KAAKP,EAAE3mE,IAAI2mE,GAAE,EAAGx0H,EAAEszH,EAAEpzH,EAAE8pB,MAAMxsB,EAAE88K,UAAUt0I,EAAE4uF,EAAEC,EAAEr3H,GAAG+3H,GAAGjB,IAAIiB,GAAE,EAAGlsH,EAAEkqH,KAAY/1H,GAC3arF,EAAQysK,qBAAqB,WAAW,IAAIpnK,EAAErF,EAAQ4rK,eAAejhB,EAAEtlJ,GAAG,IAAI+O,EAAE6oD,EAAEy/D,GAAG,OAAOtoH,IAAI8oH,GAAG,OAAOA,GAAG,OAAO9oH,GAAG,OAAOA,EAAE+K,UAAU/K,EAAE4qB,WAAW35B,GAAG+O,EAAE+5J,eAAejxC,EAAEixC,gBAAgBt7I,KAAK7yB,EAAQ0iL,sBAAsB,SAASr9K,GAAG,IAAI+O,EAAE0nH,EAAE,OAAO,WAAW,IAAIjuF,EAAEiuF,EAAEA,EAAE1nH,EAAE,IAAI,OAAO/O,EAAEhE,MAAMsG,KAAKlG,WAAxB,QAA2Cq6H,EAAEjuF,M,6BClB/T7tC,EAAQm7E,WAuCR,SAAqBwnG,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClD/iL,EAAQmkF,YAiDR,SAAsBw+F,GACpB,IAAIK,EAcAxhL,EAbAohL,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBjgL,EAAM,IAAIsgL,EAVhB,SAAsBN,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAS9BG,CAAYP,EAAKG,EAAUC,IAEzCI,EAAU,EAGVv8K,EAAMm8K,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKthL,EAAI,EAAGA,EAAIoF,EAAKpF,GAAK,EACxBwhL,EACGI,EAAUT,EAAIzkG,WAAW18E,KAAO,GAChC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,KAAO,GACpC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,KAAO,EACrC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,IAC/BmB,EAAIwgL,KAAcH,GAAO,GAAM,IAC/BrgL,EAAIwgL,KAAcH,GAAO,EAAK,IAC9BrgL,EAAIwgL,KAAmB,IAANH,EAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIzkG,WAAW18E,KAAO,EAChC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,KAAO,EACvCmB,EAAIwgL,KAAmB,IAANH,GAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIzkG,WAAW18E,KAAO,GAChC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,KAAO,EACpC4hL,EAAUT,EAAIzkG,WAAW18E,EAAI,KAAO,EACvCmB,EAAIwgL,KAAcH,GAAO,EAAK,IAC9BrgL,EAAIwgL,KAAmB,IAANH,GAGnB,OAAOrgL,GA3FT3C,EAAQ2+E,cAkHR,SAAwB0kG,GAQtB,IAPA,IAAIL,EACAp8K,EAAMy8K,EAAM3hL,OACZ4hL,EAAa18K,EAAM,EACnB28K,EAAQ,GAIH/hL,EAAI,EAAGgiL,EAAO58K,EAAM08K,EAAY9hL,EAAIgiL,EAAMhiL,GAH9B,MAInB+hL,EAAMniL,KAAKqiL,EAAYJ,EAAO7hL,EAAIA,EAJf,MAIqCgiL,EAAOA,EAAQhiL,EAJpD,QAQF,IAAf8hL,GACFN,EAAMK,EAAMz8K,EAAM,GAClB28K,EAAMniL,KACJuhC,EAAOqgJ,GAAO,GACdrgJ,EAAQqgJ,GAAO,EAAK,IACpB,OAEsB,IAAfM,IACTN,GAAOK,EAAMz8K,EAAM,IAAM,GAAKy8K,EAAMz8K,EAAM,GAC1C28K,EAAMniL,KACJuhC,EAAOqgJ,GAAO,IACdrgJ,EAAQqgJ,GAAO,EAAK,IACpBrgJ,EAAQqgJ,GAAO,EAAK,IACpB,MAIJ,OAAOO,EAAMxwK,KAAK,KAzIpB,IALA,IAAI4vB,EAAS,GACTygJ,EAAY,GACZH,EAA4B,qBAAfhgJ,WAA6BA,WAAargC,MAEvD61E,EAAO,mEACFj3E,EAAI,EAAGoF,EAAM6xE,EAAK/2E,OAAQF,EAAIoF,IAAOpF,EAC5CmhC,EAAOnhC,GAAKi3E,EAAKj3E,GACjB4hL,EAAU3qG,EAAKyF,WAAW18E,IAAMA,EAQlC,SAASqhL,EAASF,GAChB,IAAI/7K,EAAM+7K,EAAIjhL,OAEd,GAAIkF,EAAM,EAAI,EACZ,MAAM,IAAIpB,MAAM,kDAKlB,IAAIs9K,EAAWH,EAAI50K,QAAQ,KAO3B,OANkB,IAAd+0K,IAAiBA,EAAWl8K,GAMzB,CAACk8K,EAJcA,IAAal8K,EAC/B,EACA,EAAKk8K,EAAW,GAsEtB,SAASW,EAAaJ,EAAOr3J,EAAOkkD,GAGlC,IAFA,IAAI8yG,EARoBhtK,EASpB0tK,EAAS,GACJliL,EAAIwqB,EAAOxqB,EAAI0uE,EAAK1uE,GAAK,EAChCwhL,GACIK,EAAM7hL,IAAM,GAAM,WAClB6hL,EAAM7hL,EAAI,IAAM,EAAK,QACP,IAAf6hL,EAAM7hL,EAAI,IACbkiL,EAAOtiL,KAdFuhC,GADiB3sB,EAeMgtK,IAdT,GAAK,IACxBrgJ,EAAO3sB,GAAO,GAAK,IACnB2sB,EAAO3sB,GAAO,EAAI,IAClB2sB,EAAa,GAAN3sB,IAaT,OAAO0tK,EAAO3wK,KAAK,IAjGrBqwK,EAAU,IAAIllG,WAAW,IAAM,GAC/BklG,EAAU,IAAIllG,WAAW,IAAM,I,cClB/Bl+E,EAAQo9E,KAAO,SAAUtB,EAAQ4B,EAAQimG,EAAMC,EAAMC,GACnD,IAAI97K,EAAG6sB,EACHkvJ,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTziL,EAAImiL,EAAQE,EAAS,EAAK,EAC1BhyJ,EAAI8xJ,GAAQ,EAAI,EAChB1xK,EAAI6pE,EAAO4B,EAASl8E,GAOxB,IALAA,GAAKqwB,EAEL9pB,EAAIkK,GAAM,IAAOgyK,GAAU,EAC3BhyK,KAAQgyK,EACRA,GAASH,EACFG,EAAQ,EAAGl8K,EAAS,IAAJA,EAAW+zE,EAAO4B,EAASl8E,GAAIA,GAAKqwB,EAAGoyJ,GAAS,GAKvE,IAHArvJ,EAAI7sB,GAAM,IAAOk8K,GAAU,EAC3Bl8K,KAAQk8K,EACRA,GAASL,EACFK,EAAQ,EAAGrvJ,EAAS,IAAJA,EAAWknD,EAAO4B,EAASl8E,GAAIA,GAAKqwB,EAAGoyJ,GAAS,GAEvE,GAAU,IAANl8K,EACFA,EAAI,EAAIi8K,MACH,IAAIj8K,IAAMg8K,EACf,OAAOnvJ,EAAI+gC,IAAsBsuB,KAAdhyE,GAAK,EAAI,GAE5B2iB,GAAQ5qB,KAAKq5B,IAAI,EAAGugJ,GACpB77K,GAAQi8K,EAEV,OAAQ/xK,GAAK,EAAI,GAAK2iB,EAAI5qB,KAAKq5B,IAAI,EAAGt7B,EAAI67K,IAG5C5jL,EAAQy7E,MAAQ,SAAUK,EAAQz7E,EAAOq9E,EAAQimG,EAAMC,EAAMC,GAC3D,IAAI97K,EAAG6sB,EAAGiZ,EACNi2I,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBG,EAAe,KAATN,EAAc55K,KAAKq5B,IAAI,GAAI,IAAMr5B,KAAKq5B,IAAI,GAAI,IAAM,EAC1D7hC,EAAImiL,EAAO,EAAKE,EAAS,EACzBhyJ,EAAI8xJ,EAAO,GAAK,EAChB1xK,EAAI5R,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQ2J,KAAK8/D,IAAIzpE,GAEb69B,MAAM79B,IAAUA,IAAU4jF,KAC5BrvD,EAAIsJ,MAAM79B,GAAS,EAAI,EACvB0H,EAAIg8K,IAEJh8K,EAAIiC,KAAKu4B,MAAMv4B,KAAKslC,IAAIjvC,GAAS2J,KAAKm6K,KAClC9jL,GAASwtC,EAAI7jC,KAAKq5B,IAAI,GAAIt7B,IAAM,IAClCA,IACA8lC,GAAK,IAGLxtC,GADE0H,EAAIi8K,GAAS,EACNE,EAAKr2I,EAELq2I,EAAKl6K,KAAKq5B,IAAI,EAAG,EAAI2gJ,IAEpBn2I,GAAK,IACf9lC,IACA8lC,GAAK,GAGH9lC,EAAIi8K,GAASD,GACfnvJ,EAAI,EACJ7sB,EAAIg8K,GACKh8K,EAAIi8K,GAAS,GACtBpvJ,GAAMv0B,EAAQwtC,EAAK,GAAK7jC,KAAKq5B,IAAI,EAAGugJ,GACpC77K,GAAQi8K,IAERpvJ,EAAIv0B,EAAQ2J,KAAKq5B,IAAI,EAAG2gJ,EAAQ,GAAKh6K,KAAKq5B,IAAI,EAAGugJ,GACjD77K,EAAI,IAID67K,GAAQ,EAAG9nG,EAAO4B,EAASl8E,GAAS,IAAJozB,EAAUpzB,GAAKqwB,EAAG+C,GAAK,IAAKgvJ,GAAQ,GAI3E,IAFA77K,EAAKA,GAAK67K,EAAQhvJ,EAClBkvJ,GAAQF,EACDE,EAAO,EAAGhoG,EAAO4B,EAASl8E,GAAS,IAAJuG,EAAUvG,GAAKqwB,EAAG9pB,GAAK,IAAK+7K,GAAQ,GAE1EhoG,EAAO4B,EAASl8E,EAAIqwB,IAAU,IAAJ5f,I,cCnF5B,IAAIzN,EAAW,GAAGA,SAElBzE,EAAOC,QAAU4C,MAAMC,SAAW,SAAUF,GAC1C,MAA6B,kBAAtB6B,EAASC,KAAK9B,K,gBCIvB,IAAIyhL,EAAW,SAAUpkL,GACvB,aAEA,IAAIqkL,EAAK/jL,OAAOmC,UACZ6hL,EAASD,EAAGn8K,eAEZq8K,EAA4B,oBAAXvhL,OAAwBA,OAAS,GAClDwhL,EAAiBD,EAAQthL,UAAY,aACrCwhL,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQK,aAAe,gBAE/C,SAASC,EAAO1kL,EAAKC,EAAKC,GAOxB,OANAC,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAELP,EAAIC,GAEb,IAEEykL,EAAO,GAAI,IACX,MAAO/gL,GACP+gL,EAAS,SAAS1kL,EAAKC,EAAKC,GAC1B,OAAOF,EAAIC,GAAOC,GAItB,SAASykL,EAAKC,EAASC,EAASt9K,EAAMu9K,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQviL,qBAAqB0iL,EAAYH,EAAUG,EAC/E/1K,EAAY9O,OAAOmL,OAAOy5K,EAAeziL,WACzC8T,EAAU,IAAImwF,EAAQu+E,GAAe,IAMzC,OAFA71K,EAAUg2K,QAsMZ,SAA0BL,EAASr9K,EAAM6O,GACvC,IAAItL,EA/KuB,iBAiL3B,OAAO,SAAgBoc,EAAQjgB,GAC7B,GAhLoB,cAgLhB6D,EACF,MAAM,IAAIzF,MAAM,gCAGlB,GAnLoB,cAmLhByF,EAA6B,CAC/B,GAAe,UAAXoc,EACF,MAAMjgB,EAKR,OAAOi+K,IAMT,IAHA9uK,EAAQ8Q,OAASA,EACjB9Q,EAAQnP,IAAMA,IAED,CACX,IAAIk+K,EAAW/uK,EAAQ+uK,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAU/uK,GACnD,GAAIgvK,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBhvK,EAAQ8Q,OAGV9Q,EAAQ8b,KAAO9b,EAAQmvK,MAAQnvK,EAAQnP,SAElC,GAAuB,UAAnBmP,EAAQ8Q,OAAoB,CACrC,GAnNqB,mBAmNjBpc,EAEF,MADAA,EAjNc,YAkNRsL,EAAQnP,IAGhBmP,EAAQovK,kBAAkBpvK,EAAQnP,SAEN,WAAnBmP,EAAQ8Q,QACjB9Q,EAAQqvK,OAAO,SAAUrvK,EAAQnP,KAGnC6D,EA5NkB,YA8NlB,IAAI46K,EAASC,EAASf,EAASr9K,EAAM6O,GACrC,GAAoB,WAAhBsvK,EAAOp5K,KAAmB,CAO5B,GAJAxB,EAAQsL,EAAQ1S,KAjOA,YAFK,iBAuOjBgiL,EAAOz+K,MAAQq+K,EACjB,SAGF,MAAO,CACLplL,MAAOwlL,EAAOz+K,IACdvD,KAAM0S,EAAQ1S,MAGS,UAAhBgiL,EAAOp5K,OAChBxB,EA/OgB,YAkPhBsL,EAAQ8Q,OAAS,QACjB9Q,EAAQnP,IAAMy+K,EAAOz+K,OA9QP2+K,CAAiBhB,EAASr9K,EAAM6O,GAE7CnH,EAcT,SAAS02K,EAASr+K,EAAItH,EAAKiH,GACzB,IACE,MAAO,CAAEqF,KAAM,SAAUrF,IAAKK,EAAGhD,KAAKtE,EAAKiH,IAC3C,MAAOtD,GACP,MAAO,CAAE2I,KAAM,QAASrF,IAAKtD,IAhBjC9D,EAAQ8kL,KAAOA,EAoBf,IAOIW,EAAmB,GAMvB,SAASN,KACT,SAASa,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkB1B,GAAkB,WAClC,OAAO78K,MAGT,IAAIw+K,EAAW7lL,OAAOmK,eAClB27K,EAA0BD,GAAYA,EAASA,EAAS5yJ,EAAO,MAC/D6yJ,GACAA,IAA4B/B,GAC5BC,EAAO7/K,KAAK2hL,EAAyB5B,KAGvC0B,EAAoBE,GAGtB,IAAIC,EAAKJ,EAA2BxjL,UAClC0iL,EAAU1iL,UAAYnC,OAAOmL,OAAOy6K,GAWtC,SAASI,EAAsB7jL,GAC7B,CAAC,OAAQ,QAAS,UAAUb,SAAQ,SAASylB,GAC3Cw9J,EAAOpiL,EAAW4kB,GAAQ,SAASjgB,GACjC,OAAOO,KAAKy9K,QAAQ/9J,EAAQjgB,SAkClC,SAASm/K,EAAcn3K,EAAWo3K,GAgChC,IAAIC,EAgCJ9+K,KAAKy9K,QA9BL,SAAiB/9J,EAAQjgB,GACvB,SAASs/K,IACP,OAAO,IAAIF,GAAY,SAASx/K,EAASC,IAnC7C,SAAS6gB,EAAOT,EAAQjgB,EAAKJ,EAASC,GACpC,IAAI4+K,EAASC,EAAS12K,EAAUiY,GAASjY,EAAWhI,GACpD,GAAoB,UAAhBy+K,EAAOp5K,KAEJ,CACL,IAAIhG,EAASo/K,EAAOz+K,IAChB/G,EAAQoG,EAAOpG,MACnB,OAAIA,GACiB,kBAAVA,GACPikL,EAAO7/K,KAAKpE,EAAO,WACdmmL,EAAYx/K,QAAQ3G,EAAMsmL,SAASp/K,MAAK,SAASlH,GACtDynB,EAAO,OAAQznB,EAAO2G,EAASC,MAC9B,SAASnD,GACVgkB,EAAO,QAAShkB,EAAKkD,EAASC,MAI3Bu/K,EAAYx/K,QAAQ3G,GAAOkH,MAAK,SAASq/K,GAI9CngL,EAAOpG,MAAQumL,EACf5/K,EAAQP,MACP,SAAStC,GAGV,OAAO2jB,EAAO,QAAS3jB,EAAO6C,EAASC,MAvBzCA,EAAO4+K,EAAOz+K,KAiCZ0gB,CAAOT,EAAQjgB,EAAKJ,EAASC,MAIjC,OAAOw/K,EAaLA,EAAkBA,EAAgBl/K,KAChCm/K,EAGAA,GACEA,KAkHV,SAASlB,EAAoBF,EAAU/uK,GACrC,IAAI8Q,EAASi+J,EAASriL,SAASsT,EAAQ8Q,QACvC,QA1TE5jB,IA0TE4jB,EAAsB,CAKxB,GAFA9Q,EAAQ+uK,SAAW,KAEI,UAAnB/uK,EAAQ8Q,OAAoB,CAE9B,GAAIi+J,EAASriL,SAAT,SAGFsT,EAAQ8Q,OAAS,SACjB9Q,EAAQnP,SArUZ3D,EAsUI+hL,EAAoBF,EAAU/uK,GAEP,UAAnBA,EAAQ8Q,QAGV,OAAOo+J,EAIXlvK,EAAQ8Q,OAAS,QACjB9Q,EAAQnP,IAAM,IAAIlF,UAChB,kDAGJ,OAAOujL,EAGT,IAAII,EAASC,EAASz+J,EAAQi+J,EAASriL,SAAUsT,EAAQnP,KAEzD,GAAoB,UAAhBy+K,EAAOp5K,KAIT,OAHA8J,EAAQ8Q,OAAS,QACjB9Q,EAAQnP,IAAMy+K,EAAOz+K,IACrBmP,EAAQ+uK,SAAW,KACZG,EAGT,IAAIp+K,EAAOw+K,EAAOz+K,IAElB,OAAMC,EAOFA,EAAKxD,MAGP0S,EAAQ+uK,EAASuB,YAAcx/K,EAAKhH,MAGpCkW,EAAQ3S,KAAO0hL,EAASwB,QAQD,WAAnBvwK,EAAQ8Q,SACV9Q,EAAQ8Q,OAAS,OACjB9Q,EAAQnP,SAzXV3D,GAmYF8S,EAAQ+uK,SAAW,KACZG,GANEp+K,GA3BPkP,EAAQ8Q,OAAS,QACjB9Q,EAAQnP,IAAM,IAAIlF,UAAU,oCAC5BqU,EAAQ+uK,SAAW,KACZG,GAoDX,SAASsB,EAAaC,GACpB,IAAI1hJ,EAAQ,CAAE2hJ,OAAQD,EAAK,IAEvB,KAAKA,IACP1hJ,EAAM4hJ,SAAWF,EAAK,IAGpB,KAAKA,IACP1hJ,EAAM6hJ,WAAaH,EAAK,GACxB1hJ,EAAM8hJ,SAAWJ,EAAK,IAGxBr/K,KAAK0/K,WAAWjmL,KAAKkkC,GAGvB,SAASgiJ,EAAchiJ,GACrB,IAAIugJ,EAASvgJ,EAAMiiJ,YAAc,GACjC1B,EAAOp5K,KAAO,gBACPo5K,EAAOz+K,IACdk+B,EAAMiiJ,WAAa1B,EAGrB,SAASn/E,EAAQu+E,GAIft9K,KAAK0/K,WAAa,CAAC,CAAEJ,OAAQ,SAC7BhC,EAAYrjL,QAAQmlL,EAAcp/K,MAClCA,KAAKg6B,OAAM,GA8Bb,SAASpO,EAAOi0J,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAShD,GAC9B,GAAIiD,EACF,OAAOA,EAAehjL,KAAK+iL,GAG7B,GAA6B,oBAAlBA,EAAS5jL,KAClB,OAAO4jL,EAGT,IAAKtpJ,MAAMspJ,EAAS9lL,QAAS,CAC3B,IAAIF,GAAK,EAAGoC,EAAO,SAASA,IAC1B,OAASpC,EAAIgmL,EAAS9lL,QACpB,GAAI4iL,EAAO7/K,KAAK+iL,EAAUhmL,GAGxB,OAFAoC,EAAKvD,MAAQmnL,EAAShmL,GACtBoC,EAAKC,MAAO,EACLD,EAOX,OAHAA,EAAKvD,WAzeToD,EA0eIG,EAAKC,MAAO,EAELD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMyhL,GAIjB,SAASA,IACP,MAAO,CAAEhlL,WAzfPoD,EAyfyBI,MAAM,GA+MnC,OA5mBAmiL,EAAkBvjL,UAAY4jL,EAAG1hL,YAAcshL,EAC/CA,EAA2BthL,YAAcqhL,EACzCA,EAAkB3/K,YAAcw+K,EAC9BoB,EACAtB,EACA,qBAaF3kL,EAAQ0nL,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,oBAAXD,GAAyBA,EAAOhjL,YAClD,QAAOijL,IACHA,IAAS5B,GAG2B,uBAAnC4B,EAAKvhL,aAAeuhL,EAAKhjL,QAIhC5E,EAAQi/B,KAAO,SAAS0oJ,GAQtB,OAPIrnL,OAAOoL,eACTpL,OAAOoL,eAAei8K,EAAQ1B,IAE9B0B,EAAOn9K,UAAYy7K,EACnBpB,EAAO8C,EAAQhD,EAAmB,sBAEpCgD,EAAOllL,UAAYnC,OAAOmL,OAAO46K,GAC1BsB,GAOT3nL,EAAQ6nL,MAAQ,SAASzgL,GACvB,MAAO,CAAEu/K,QAASv/K,IAsEpBk/K,EAAsBC,EAAc9jL,WACpC8jL,EAAc9jL,UAAUgiL,GAAuB,WAC7C,OAAO98K,MAET3H,EAAQumL,cAAgBA,EAKxBvmL,EAAQ8nL,MAAQ,SAAS/C,EAASC,EAASt9K,EAAMu9K,EAAauB,QACxC,IAAhBA,IAAwBA,EAAcl/K,SAE1C,IAAIvE,EAAO,IAAIwjL,EACbzB,EAAKC,EAASC,EAASt9K,EAAMu9K,GAC7BuB,GAGF,OAAOxmL,EAAQ0nL,oBAAoB1C,GAC/BjiL,EACAA,EAAKa,OAAO2D,MAAK,SAASd,GACxB,OAAOA,EAAO5C,KAAO4C,EAAOpG,MAAQ0C,EAAKa,WAuKjD0iL,EAAsBD,GAEtBxB,EAAOwB,EAAI1B,EAAmB,aAO9B0B,EAAG7B,GAAkB,WACnB,OAAO78K,MAGT0+K,EAAG7hL,SAAW,WACZ,MAAO,sBAkCTxE,EAAQc,KAAO,SAASF,GACtB,IAAIE,EAAO,GACX,IAAK,IAAIV,KAAOQ,EACdE,EAAKM,KAAKhB,GAMZ,OAJAU,EAAKu8D,UAIE,SAASz5D,IACd,KAAO9C,EAAKY,QAAQ,CAClB,IAAItB,EAAMU,EAAK4xB,MACf,GAAItyB,KAAOQ,EAGT,OAFAgD,EAAKvD,MAAQD,EACbwD,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IAsCX5D,EAAQuzB,OAASA,EAMjBmzE,EAAQjkG,UAAY,CAClBkC,YAAa+hG,EAEb/kE,MAAO,SAASomJ,GAcd,GAbApgL,KAAK21C,KAAO,EACZ31C,KAAK/D,KAAO,EAGZ+D,KAAK0qB,KAAO1qB,KAAK+9K,WApgBjBjiL,EAqgBAkE,KAAK9D,MAAO,EACZ8D,KAAK29K,SAAW,KAEhB39K,KAAK0f,OAAS,OACd1f,KAAKP,SAzgBL3D,EA2gBAkE,KAAK0/K,WAAWzlL,QAAQ0lL,IAEnBS,EACH,IAAK,IAAInjL,KAAQ+C,KAEQ,MAAnB/C,EAAK8lE,OAAO,IACZ45G,EAAO7/K,KAAKkD,KAAM/C,KACjBs5B,OAAOt5B,EAAKF,MAAM,MACrBiD,KAAK/C,QAnhBXnB,IAyhBFooB,KAAM,WACJlkB,KAAK9D,MAAO,EAEZ,IACImkL,EADYrgL,KAAK0/K,WAAW,GACLE,WAC3B,GAAwB,UAApBS,EAAWv7K,KACb,MAAMu7K,EAAW5gL,IAGnB,OAAOO,KAAKsgL,MAGdtC,kBAAmB,SAASuC,GAC1B,GAAIvgL,KAAK9D,KACP,MAAMqkL,EAGR,IAAI3xK,EAAU5O,KACd,SAAS4jC,EAAO48I,EAAKC,GAYnB,OAXAvC,EAAOp5K,KAAO,QACdo5K,EAAOz+K,IAAM8gL,EACb3xK,EAAQ3S,KAAOukL,EAEXC,IAGF7xK,EAAQ8Q,OAAS,OACjB9Q,EAAQnP,SApjBZ3D,KAujBY2kL,EAGZ,IAAK,IAAI5mL,EAAImG,KAAK0/K,WAAW3lL,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI8jC,EAAQ39B,KAAK0/K,WAAW7lL,GACxBqkL,EAASvgJ,EAAMiiJ,WAEnB,GAAqB,SAAjBjiJ,EAAM2hJ,OAIR,OAAO17I,EAAO,OAGhB,GAAIjG,EAAM2hJ,QAAUt/K,KAAK21C,KAAM,CAC7B,IAAI+qI,EAAW/D,EAAO7/K,KAAK6gC,EAAO,YAC9BgjJ,EAAahE,EAAO7/K,KAAK6gC,EAAO,cAEpC,GAAI+iJ,GAAYC,EAAY,CAC1B,GAAI3gL,KAAK21C,KAAOhY,EAAM4hJ,SACpB,OAAO37I,EAAOjG,EAAM4hJ,UAAU,GACzB,GAAIv/K,KAAK21C,KAAOhY,EAAM6hJ,WAC3B,OAAO57I,EAAOjG,EAAM6hJ,iBAGjB,GAAIkB,GACT,GAAI1gL,KAAK21C,KAAOhY,EAAM4hJ,SACpB,OAAO37I,EAAOjG,EAAM4hJ,UAAU,OAG3B,KAAIoB,EAMT,MAAM,IAAI9iL,MAAM,0CALhB,GAAImC,KAAK21C,KAAOhY,EAAM6hJ,WACpB,OAAO57I,EAAOjG,EAAM6hJ,gBAU9BvB,OAAQ,SAASn5K,EAAMrF,GACrB,IAAK,IAAI5F,EAAImG,KAAK0/K,WAAW3lL,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI8jC,EAAQ39B,KAAK0/K,WAAW7lL,GAC5B,GAAI8jC,EAAM2hJ,QAAUt/K,KAAK21C,MACrBgnI,EAAO7/K,KAAK6gC,EAAO,eACnB39B,KAAK21C,KAAOhY,EAAM6hJ,WAAY,CAChC,IAAIoB,EAAejjJ,EACnB,OAIAijJ,IACU,UAAT97K,GACS,aAATA,IACD87K,EAAatB,QAAU7/K,GACvBA,GAAOmhL,EAAapB,aAGtBoB,EAAe,MAGjB,IAAI1C,EAAS0C,EAAeA,EAAahB,WAAa,GAItD,OAHA1B,EAAOp5K,KAAOA,EACdo5K,EAAOz+K,IAAMA,EAETmhL,GACF5gL,KAAK0f,OAAS,OACd1f,KAAK/D,KAAO2kL,EAAapB,WAClB1B,GAGF99K,KAAK6gL,SAAS3C,IAGvB2C,SAAU,SAAS3C,EAAQuB,GACzB,GAAoB,UAAhBvB,EAAOp5K,KACT,MAAMo5K,EAAOz+K,IAcf,MAXoB,UAAhBy+K,EAAOp5K,MACS,aAAhBo5K,EAAOp5K,KACT9E,KAAK/D,KAAOiiL,EAAOz+K,IACM,WAAhBy+K,EAAOp5K,MAChB9E,KAAKsgL,KAAOtgL,KAAKP,IAAMy+K,EAAOz+K,IAC9BO,KAAK0f,OAAS,SACd1f,KAAK/D,KAAO,OACa,WAAhBiiL,EAAOp5K,MAAqB26K,IACrCz/K,KAAK/D,KAAOwjL,GAGP3B,GAGTgD,OAAQ,SAAStB,GACf,IAAK,IAAI3lL,EAAImG,KAAK0/K,WAAW3lL,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI8jC,EAAQ39B,KAAK0/K,WAAW7lL,GAC5B,GAAI8jC,EAAM6hJ,aAAeA,EAGvB,OAFAx/K,KAAK6gL,SAASljJ,EAAMiiJ,WAAYjiJ,EAAM8hJ,UACtCE,EAAchiJ,GACPmgJ,IAKb,MAAS,SAASwB,GAChB,IAAK,IAAIzlL,EAAImG,KAAK0/K,WAAW3lL,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI8jC,EAAQ39B,KAAK0/K,WAAW7lL,GAC5B,GAAI8jC,EAAM2hJ,SAAWA,EAAQ,CAC3B,IAAIpB,EAASvgJ,EAAMiiJ,WACnB,GAAoB,UAAhB1B,EAAOp5K,KAAkB,CAC3B,IAAIi8K,EAAS7C,EAAOz+K,IACpBkgL,EAAchiJ,GAEhB,OAAOojJ,GAMX,MAAM,IAAIljL,MAAM,0BAGlBmjL,cAAe,SAASnB,EAAUX,EAAYC,GAa5C,OAZAn/K,KAAK29K,SAAW,CACdriL,SAAUswB,EAAOi0J,GACjBX,WAAYA,EACZC,QAASA,GAGS,SAAhBn/K,KAAK0f,SAGP1f,KAAKP,SA7rBP3D,GAgsBOgiL,IAQJzlL,EA7sBM,CAotBgBD,EAAOC,SAGtC,IACE4oL,mBAAqBxE,EACrB,MAAOyE,GAUP/gL,SAAS,IAAK,yBAAdA,CAAwCs8K,K,6BCxuB1CrkL,EAAOC,QAAU,WACf,MAAM,IAAIwF,MACR,2F,mCCJJ,IAAIsjL,EAA+B,EAAQ,IAqB3C/oL,EAAOC,QAnBP,SAAkC2B,EAAQ+jI,GACxC,GAAc,MAAV/jI,EAAgB,MAAO,GAC3B,IACIvB,EAAKoB,EADLD,EAASunL,EAA6BnnL,EAAQ+jI,GAGlD,GAAIplI,OAAOS,sBAAuB,CAChC,IAAI6kI,EAAmBtlI,OAAOS,sBAAsBY,GAEpD,IAAKH,EAAI,EAAGA,EAAIokI,EAAiBlkI,OAAQF,IACvCpB,EAAMwlI,EAAiBpkI,GACnBkkI,EAAS33H,QAAQ3N,IAAQ,GACxBE,OAAOmC,UAAU2Q,qBAAqB3O,KAAK9C,EAAQvB,KACxDmB,EAAOnB,GAAOuB,EAAOvB,IAIzB,OAAOmB,I,cCHTxB,EAAOC,QAfP,SAAuC2B,EAAQ+jI,GAC7C,GAAc,MAAV/jI,EAAgB,MAAO,GAC3B,IAEIvB,EAAKoB,EAFLD,EAAS,GACTokI,EAAarlI,OAAOQ,KAAKa,GAG7B,IAAKH,EAAI,EAAGA,EAAImkI,EAAWjkI,OAAQF,IACjCpB,EAAMulI,EAAWnkI,GACbkkI,EAAS33H,QAAQ3N,IAAQ,IAC7BmB,EAAOnB,GAAOuB,EAAOvB,IAGvB,OAAOmB,I,cCZT,SAASyG,IAeP,OAdAjI,EAAOC,QAAUgI,EAAW1H,OAAO2H,QAAU,SAAU1G,GACrD,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAIpB,KAAOuB,EACVrB,OAAOmC,UAAUyF,eAAezD,KAAK9C,EAAQvB,KAC/CmB,EAAOnB,GAAOuB,EAAOvB,IAK3B,OAAOmB,GAGFyG,EAAS3G,MAAMsG,KAAMlG,WAG9B1B,EAAOC,QAAUgI,G,gBClBjB,IAAI+gL,EAAiB,EAAQ,IAEzBC,EAAuB,EAAQ,IAE/B7lL,EAA6B,EAAQ,IAErC8lL,EAAkB,EAAQ,IAM9BlpL,EAAOC,QAJP,SAAwB2C,EAAKnB,GAC3B,OAAOunL,EAAepmL,IAAQqmL,EAAqBrmL,EAAKnB,IAAM2B,EAA2BR,EAAKnB,IAAMynL,M,cCLtGlpL,EAAOC,QAJP,SAAyB2C,GACvB,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,I,cC0BjC5C,EAAOC,QA3BP,SAA+B2C,EAAKnB,GAClC,GAAsB,qBAAXwB,QAA4BA,OAAOC,YAAY3C,OAAOqC,GAAjE,CACA,IAAIU,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAKhB,EAAIK,OAAOC,cAAmBK,GAAMI,EAAKC,EAAGC,QAAQC,QAChER,EAAKjC,KAAKsC,EAAGrD,QAETmB,GAAK6B,EAAK3B,SAAWF,GAH8C8B,GAAK,IAK9E,MAAOQ,GACPP,GAAK,EACLC,EAAKM,EACL,QACA,IACOR,GAAsB,MAAhBK,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIJ,EAAI,MAAMC,GAIlB,OAAOH,K,cCpBTtD,EAAOC,QAJP,WACE,MAAM,IAAIkC,UAAU,+I,gBCDtB,IAAIgnL,EAAoB,EAAQ,IAE5BC,EAAkB,EAAQ,IAE1BhmL,EAA6B,EAAQ,IAErCimL,EAAoB,EAAQ,IAMhCrpL,EAAOC,QAJP,SAA4B2C,GAC1B,OAAOumL,EAAkBvmL,IAAQwmL,EAAgBxmL,IAAQQ,EAA2BR,IAAQymL,M,gBCT9F,IAAItmL,EAAmB,EAAQ,IAM/B/C,EAAOC,QAJP,SAA4B2C,GAC1B,GAAIC,MAAMC,QAAQF,GAAM,OAAOG,EAAiBH,K,cCClD5C,EAAOC,QAJP,SAA0B+C,GACxB,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAY3C,OAAOyC,GAAO,OAAOH,MAAMM,KAAKH,K,cCG1FhD,EAAOC,QAJP,WACE,MAAM,IAAIkC,UAAU,0I,cCctBnC,EAAOC,QAfP,SAAyBG,EAAKC,EAAKC,GAYjC,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,I,cCJTJ,EAAOC,QARP,SAAgC0H,GAC9B,QAAa,IAATA,EACF,MAAM,IAAI4C,eAAe,6DAG3B,OAAO5C,I,cCCT3H,EAAOC,QANP,SAAwBuL,EAAUC,GAChCD,EAAS9I,UAAYnC,OAAOmL,OAAOD,EAAW/I,WAC9C8I,EAAS9I,UAAUkC,YAAc4G,EACjCA,EAASf,UAAYgB,I,cCHvB,SAASmtH,EAAQx4H,GAaf,MAVsB,oBAAX6C,QAAoD,kBAApBA,OAAOC,SAChDlD,EAAOC,QAAU24H,EAAU,SAAiBx4H,GAC1C,cAAcA,GAGhBJ,EAAOC,QAAU24H,EAAU,SAAiBx4H,GAC1C,OAAOA,GAAyB,oBAAX6C,QAAyB7C,EAAIwE,cAAgB3B,QAAU7C,IAAQ6C,OAAOP,UAAY,gBAAkBtC,GAItHw4H,EAAQx4H,GAGjBJ,EAAOC,QAAU24H,G,cCJjB54H,EAAOC,QAZP,SAAgC6jI,EAASC,GAKvC,OAJKA,IACHA,EAAMD,EAAQn/H,MAAM,IAGfpE,OAAOmR,OAAOnR,OAAOwB,iBAAiB+hI,EAAS,CACpDC,IAAK,CACHzjI,MAAOC,OAAOmR,OAAOqyH,S,6BCE3B,IAAIulD,EAAuBppL,EAAQ,IAEnC,SAASqpL,KACT,SAASC,KACTA,EAAuBC,kBAAoBF,EAE3CvpL,EAAOC,QAAU,WACf,SAASypL,EAAKrnL,EAAOsnL,EAAUC,EAAe3kK,EAAU4kK,EAAclhJ,GACpE,GAAIA,IAAW2gJ,EAAf,CAIA,IAAIvlL,EAAM,IAAI0B,MACZ,mLAKF,MADA1B,EAAIc,KAAO,sBACLd,GAGR,SAAS+lL,IACP,OAAOJ,EAFTA,EAAKK,WAAaL,EAMlB,IAAIM,EAAiB,CACnBz1K,MAAOm1K,EACP76K,KAAM66K,EACN56K,KAAM46K,EACN96K,OAAQ86K,EACR7oL,OAAQ6oL,EACRj7K,OAAQi7K,EACRO,OAAQP,EAERh7K,IAAKg7K,EACLQ,QAASJ,EACTpqK,QAASgqK,EACTnY,YAAamY,EACbS,WAAYL,EACZzgL,KAAMqgL,EACNU,SAAUN,EACV70K,MAAO60K,EACPn7K,UAAWm7K,EACXO,MAAOP,EACPQ,MAAOR,EAEPS,eAAgBf,EAChBC,kBAAmBF,GAKrB,OAFAS,EAAeQ,UAAYR,EAEpBA,I,6BCnDThqL,EAAOC,QAFoB","file":"static/js/2.b1e4fd5f.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import React, { createContext, memo } from 'react';\r\nimport { node, object } from 'prop-types';\r\nimport { Glue42Web } from '@glue42/web';\r\nimport { Glue42 } from '@glue42/desktop';\r\nimport { useGlueInit } from './useGlueInit';\r\nimport { GlueProviderProps } from '../react-hooks';\r\n\r\nexport const GlueContext = createContext<Glue42Web.API | Glue42.Glue>(null);\r\n\r\nexport const GlueProvider: React.FC<GlueProviderProps> = memo(\r\n    ({ children, fallback = null, settings = {} }) => {\r\n        \r\n        const glue = useGlueInit(settings);\r\n\r\n        return glue ? (\r\n            <GlueContext.Provider value={glue}>{children}</GlueContext.Provider>\r\n        ) : (\r\n            <>{fallback}</>\r\n        );\r\n    }\r\n);\r\n\r\nGlueProvider.propTypes = {\r\n    children: node,\r\n    settings: object,\r\n    fallback: node,\r\n};\r\n\r\nGlueProvider.displayName = 'GlueProvider';\r\n","import { useEffect, useState } from \"react\";\r\nimport { UseGlueInitFunc } from \"../react-hooks\";\r\n\r\nexport const useGlueInit: UseGlueInitFunc = (settings) => {\r\n    const [glue, setGlue] = useState(null);\r\n    useEffect(() => {\r\n        const initialize = async () => {\r\n            try {\r\n                if (settings.web && settings.webPlatform) {\r\n                    throw new Error(\"Cannot initialize, because the settings are over-specified: defined are both web and webPlatform. Please set one or the other\");\r\n                }\r\n\r\n                const isEnterprise = typeof (window as any).glue42gd !== \"undefined\";\r\n\r\n                if (isEnterprise) {\r\n                    const factory = settings.desktop?.factory || settings.web?.factory || settings.webPlatform?.factory || (window as any).Glue;\r\n                    const config = settings.desktop?.config || settings.web?.config || settings.webPlatform?.config;\r\n\r\n                    const factoryResult = await factory(config);\r\n\r\n                    setGlue(factoryResult.glue || factoryResult);\r\n                    return;\r\n                }\r\n\r\n                const config = settings.web?.config || settings.webPlatform?.config;\r\n                const factory = settings.web?.factory || settings.webPlatform?.factory || (window as any).GlueWeb || (window as any).GlueWebPlatform;\r\n\r\n                const factoryResult = await factory(config);\r\n\r\n                setGlue(factoryResult.glue || factoryResult);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        };\r\n        initialize();\r\n    }, []);\r\n    return glue;\r\n};\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { GlueContext } from \"./Glue\";\r\nimport { Glue42Web } from \"@glue42/web\";\r\nimport { Glue42 } from \"@glue42/desktop\";\r\n\r\nexport const useGlue = <K = Glue42Web.API | Glue42.Glue, T = void>(\r\n    cb: (glue: K, ...dependencies: any[]) => Promise<T> | T,\r\n    dependencies: any[] = []\r\n): T => {\r\n    const [result, setResult] = useState<T>();\r\n    const glue: any = useContext(GlueContext);\r\n    useEffect(() => {\r\n        const callback = async () => {\r\n            try {\r\n                const result = await cb(glue, ...dependencies);\r\n                typeof result !== \"undefined\" &&\r\n                    setResult(typeof result === \"function\" ? () => result : result);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        };\r\n        glue && callback();\r\n    }, [glue, ...dependencies]);\r\n    return result;\r\n};\r\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar sizerStyle = {\n\tposition: 'absolute',\n\ttop: 0,\n\tleft: 0,\n\tvisibility: 'hidden',\n\theight: 0,\n\toverflow: 'scroll',\n\twhiteSpace: 'pre'\n};\n\nvar INPUT_PROPS_BLACKLIST = ['extraWidth', 'injectStyles', 'inputClassName', 'inputRef', 'inputStyle', 'minWidth', 'onAutosize', 'placeholderIsMinWidth'];\n\nvar cleanInputProps = function cleanInputProps(inputProps) {\n\tINPUT_PROPS_BLACKLIST.forEach(function (field) {\n\t\treturn delete inputProps[field];\n\t});\n\treturn inputProps;\n};\n\nvar copyStyles = function copyStyles(styles, node) {\n\tnode.style.fontSize = styles.fontSize;\n\tnode.style.fontFamily = styles.fontFamily;\n\tnode.style.fontWeight = styles.fontWeight;\n\tnode.style.fontStyle = styles.fontStyle;\n\tnode.style.letterSpacing = styles.letterSpacing;\n\tnode.style.textTransform = styles.textTransform;\n};\n\nvar isIE = typeof window !== 'undefined' && window.navigator ? /MSIE |Trident\\/|Edge\\//.test(window.navigator.userAgent) : false;\n\nvar generateId = function generateId() {\n\t// we only need an auto-generated ID for stylesheet injection, which is only\n\t// used for IE. so if the browser is not IE, this should return undefined.\n\treturn isIE ? '_' + Math.random().toString(36).substr(2, 12) : undefined;\n};\n\nvar AutosizeInput = function (_Component) {\n\t_inherits(AutosizeInput, _Component);\n\n\t_createClass(AutosizeInput, null, [{\n\t\tkey: 'getDerivedStateFromProps',\n\t\tvalue: function getDerivedStateFromProps(props, state) {\n\t\t\tvar id = props.id;\n\n\t\t\treturn id !== state.prevId ? { inputId: id || generateId(), prevId: id } : null;\n\t\t}\n\t}]);\n\n\tfunction AutosizeInput(props) {\n\t\t_classCallCheck(this, AutosizeInput);\n\n\t\tvar _this = _possibleConstructorReturn(this, (AutosizeInput.__proto__ || Object.getPrototypeOf(AutosizeInput)).call(this, props));\n\n\t\t_this.inputRef = function (el) {\n\t\t\t_this.input = el;\n\t\t\tif (typeof _this.props.inputRef === 'function') {\n\t\t\t\t_this.props.inputRef(el);\n\t\t\t}\n\t\t};\n\n\t\t_this.placeHolderSizerRef = function (el) {\n\t\t\t_this.placeHolderSizer = el;\n\t\t};\n\n\t\t_this.sizerRef = function (el) {\n\t\t\t_this.sizer = el;\n\t\t};\n\n\t\t_this.state = {\n\t\t\tinputWidth: props.minWidth,\n\t\t\tinputId: props.id || generateId(),\n\t\t\tprevId: props.id\n\t\t};\n\t\treturn _this;\n\t}\n\n\t_createClass(AutosizeInput, [{\n\t\tkey: 'componentDidMount',\n\t\tvalue: function componentDidMount() {\n\t\t\tthis.mounted = true;\n\t\t\tthis.copyInputStyles();\n\t\t\tthis.updateInputWidth();\n\t\t}\n\t}, {\n\t\tkey: 'componentDidUpdate',\n\t\tvalue: function componentDidUpdate(prevProps, prevState) {\n\t\t\tif (prevState.inputWidth !== this.state.inputWidth) {\n\t\t\t\tif (typeof this.props.onAutosize === 'function') {\n\t\t\t\t\tthis.props.onAutosize(this.state.inputWidth);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.updateInputWidth();\n\t\t}\n\t}, {\n\t\tkey: 'componentWillUnmount',\n\t\tvalue: function componentWillUnmount() {\n\t\t\tthis.mounted = false;\n\t\t}\n\t}, {\n\t\tkey: 'copyInputStyles',\n\t\tvalue: function copyInputStyles() {\n\t\t\tif (!this.mounted || !window.getComputedStyle) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar inputStyles = this.input && window.getComputedStyle(this.input);\n\t\t\tif (!inputStyles) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcopyStyles(inputStyles, this.sizer);\n\t\t\tif (this.placeHolderSizer) {\n\t\t\t\tcopyStyles(inputStyles, this.placeHolderSizer);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'updateInputWidth',\n\t\tvalue: function updateInputWidth() {\n\t\t\tif (!this.mounted || !this.sizer || typeof this.sizer.scrollWidth === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar newInputWidth = void 0;\n\t\t\tif (this.props.placeholder && (!this.props.value || this.props.value && this.props.placeholderIsMinWidth)) {\n\t\t\t\tnewInputWidth = Math.max(this.sizer.scrollWidth, this.placeHolderSizer.scrollWidth) + 2;\n\t\t\t} else {\n\t\t\t\tnewInputWidth = this.sizer.scrollWidth + 2;\n\t\t\t}\n\t\t\t// add extraWidth to the detected width. for number types, this defaults to 16 to allow for the stepper UI\n\t\t\tvar extraWidth = this.props.type === 'number' && this.props.extraWidth === undefined ? 16 : parseInt(this.props.extraWidth) || 0;\n\t\t\tnewInputWidth += extraWidth;\n\t\t\tif (newInputWidth < this.props.minWidth) {\n\t\t\t\tnewInputWidth = this.props.minWidth;\n\t\t\t}\n\t\t\tif (newInputWidth !== this.state.inputWidth) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinputWidth: newInputWidth\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'getInput',\n\t\tvalue: function getInput() {\n\t\t\treturn this.input;\n\t\t}\n\t}, {\n\t\tkey: 'focus',\n\t\tvalue: function focus() {\n\t\t\tthis.input.focus();\n\t\t}\n\t}, {\n\t\tkey: 'blur',\n\t\tvalue: function blur() {\n\t\t\tthis.input.blur();\n\t\t}\n\t}, {\n\t\tkey: 'select',\n\t\tvalue: function select() {\n\t\t\tthis.input.select();\n\t\t}\n\t}, {\n\t\tkey: 'renderStyles',\n\t\tvalue: function renderStyles() {\n\t\t\t// this method injects styles to hide IE's clear indicator, which messes\n\t\t\t// with input size detection. the stylesheet is only injected when the\n\t\t\t// browser is IE, and can also be disabled by the `injectStyles` prop.\n\t\t\tvar injectStyles = this.props.injectStyles;\n\n\t\t\treturn isIE && injectStyles ? _react2.default.createElement('style', { dangerouslySetInnerHTML: {\n\t\t\t\t\t__html: 'input#' + this.state.inputId + '::-ms-clear {display: none;}'\n\t\t\t\t} }) : null;\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tvar sizerValue = [this.props.defaultValue, this.props.value, ''].reduce(function (previousValue, currentValue) {\n\t\t\t\tif (previousValue !== null && previousValue !== undefined) {\n\t\t\t\t\treturn previousValue;\n\t\t\t\t}\n\t\t\t\treturn currentValue;\n\t\t\t});\n\n\t\t\tvar wrapperStyle = _extends({}, this.props.style);\n\t\t\tif (!wrapperStyle.display) wrapperStyle.display = 'inline-block';\n\n\t\t\tvar inputStyle = _extends({\n\t\t\t\tboxSizing: 'content-box',\n\t\t\t\twidth: this.state.inputWidth + 'px'\n\t\t\t}, this.props.inputStyle);\n\n\t\t\tvar inputProps = _objectWithoutProperties(this.props, []);\n\n\t\t\tcleanInputProps(inputProps);\n\t\t\tinputProps.className = this.props.inputClassName;\n\t\t\tinputProps.id = this.state.inputId;\n\t\t\tinputProps.style = inputStyle;\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: this.props.className, style: wrapperStyle },\n\t\t\t\tthis.renderStyles(),\n\t\t\t\t_react2.default.createElement('input', _extends({}, inputProps, { ref: this.inputRef })),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ ref: this.sizerRef, style: sizerStyle },\n\t\t\t\t\tsizerValue\n\t\t\t\t),\n\t\t\t\tthis.props.placeholder ? _react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ ref: this.placeHolderSizerRef, style: sizerStyle },\n\t\t\t\t\tthis.props.placeholder\n\t\t\t\t) : null\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn AutosizeInput;\n}(_react.Component);\n\nAutosizeInput.propTypes = {\n\tclassName: _propTypes2.default.string, // className for the outer element\n\tdefaultValue: _propTypes2.default.any, // default field value\n\textraWidth: _propTypes2.default.oneOfType([// additional width for input element\n\t_propTypes2.default.number, _propTypes2.default.string]),\n\tid: _propTypes2.default.string, // id to use for the input, can be set for consistent snapshots\n\tinjectStyles: _propTypes2.default.bool, // inject the custom stylesheet to hide clear UI, defaults to true\n\tinputClassName: _propTypes2.default.string, // className for the input element\n\tinputRef: _propTypes2.default.func, // ref callback for the input element\n\tinputStyle: _propTypes2.default.object, // css styles for the input element\n\tminWidth: _propTypes2.default.oneOfType([// minimum width for input element\n\t_propTypes2.default.number, _propTypes2.default.string]),\n\tonAutosize: _propTypes2.default.func, // onAutosize handler: function(newWidth) {}\n\tonChange: _propTypes2.default.func, // onChange handler: function(event) {}\n\tplaceholder: _propTypes2.default.string, // placeholder text\n\tplaceholderIsMinWidth: _propTypes2.default.bool, // don't collapse size to less than the placeholder\n\tstyle: _propTypes2.default.object, // css styles for the outer element\n\tvalue: _propTypes2.default.any // field value\n};\nAutosizeInput.defaultProps = {\n\tminWidth: 1,\n\tinjectStyles: true\n};\n\nexports.default = AutosizeInput;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nconst defaultConfig = {\r\n    logger: \"info\",\r\n    gateway: { webPlatform: {} },\r\n    libraries: []\r\n};\r\nconst parseConfig = (config) => {\r\n    var _a;\r\n    const combined = Object.assign({}, defaultConfig, config);\r\n    if (combined.systemLogger) {\r\n        combined.logger = (_a = combined.systemLogger.level) !== null && _a !== void 0 ? _a : \"info\";\r\n    }\r\n    return combined;\r\n};\n\nconst checkSingleton = () => {\r\n    const glue42CoreNamespace = window.glue42core;\r\n    if (!glue42CoreNamespace) {\r\n        window.glue42core = { webStarted: true };\r\n        return;\r\n    }\r\n    if (glue42CoreNamespace.webStarted) {\r\n        throw new Error(\"The Glue42 Core Web has already been started for this application.\");\r\n    }\r\n    glue42CoreNamespace.webStarted = true;\r\n};\n\nconst enterprise = (config) => {\r\n    var _a, _b;\r\n    const enterpriseConfig = {\r\n        windows: true,\r\n        layouts: \"full\",\r\n        appManager: \"full\",\r\n        channels: true,\r\n        libraries: config.libraries,\r\n        logger: (_b = (_a = config === null || config === void 0 ? void 0 : config.systemLogger) === null || _a === void 0 ? void 0 : _a.level) !== null && _b !== void 0 ? _b : \"warn\"\r\n    };\r\n    return window.Glue(enterpriseConfig);\r\n};\n\n/**\r\n * Wraps values in an `Ok` type.\r\n *\r\n * Example: `ok(5) // => {ok: true, result: 5}`\r\n */\r\nvar ok = function (result) { return ({ ok: true, result: result }); };\r\n/**\r\n * Typeguard for `Ok`.\r\n */\r\nvar isOk = function (r) { return r.ok === true; };\r\n/**\r\n * Wraps errors in an `Err` type.\r\n *\r\n * Example: `err('on fire') // => {ok: false, error: 'on fire'}`\r\n */\r\nvar err = function (error) { return ({ ok: false, error: error }); };\r\n/**\r\n * Typeguard for `Err`.\r\n */\r\nvar isErr = function (r) { return r.ok === false; };\r\n/**\r\n * Create a `Promise` that either resolves with the result of `Ok` or rejects\r\n * with the error of `Err`.\r\n */\r\nvar asPromise = function (r) {\r\n    return r.ok === true ? Promise.resolve(r.result) : Promise.reject(r.error);\r\n};\r\n/**\r\n * Unwraps a `Result` and returns either the result of an `Ok`, or\r\n * `defaultValue`.\r\n *\r\n * Example:\r\n * ```\r\n * Result.withDefault(5, number().run(json))\r\n * ```\r\n *\r\n * It would be nice if `Decoder` had an instance method that mirrored this\r\n * function. Such a method would look something like this:\r\n * ```\r\n * class Decoder<A> {\r\n *   runWithDefault = (defaultValue: A, json: any): A =>\r\n *     Result.withDefault(defaultValue, this.run(json));\r\n * }\r\n *\r\n * number().runWithDefault(5, json)\r\n * ```\r\n * Unfortunately, the type of `defaultValue: A` on the method causes issues\r\n * with type inference on  the `object` decoder in some situations. While these\r\n * inference issues can be solved by providing the optional type argument for\r\n * `object`s, the extra trouble and confusion doesn't seem worth it.\r\n */\r\nvar withDefault = function (defaultValue, r) {\r\n    return r.ok === true ? r.result : defaultValue;\r\n};\r\n/**\r\n * Return the successful result, or throw an error.\r\n */\r\nvar withException = function (r) {\r\n    if (r.ok === true) {\r\n        return r.result;\r\n    }\r\n    else {\r\n        throw r.error;\r\n    }\r\n};\r\n/**\r\n * Given an array of `Result`s, return the successful values.\r\n */\r\nvar successes = function (results) {\r\n    return results.reduce(function (acc, r) { return (r.ok === true ? acc.concat(r.result) : acc); }, []);\r\n};\r\n/**\r\n * Apply `f` to the result of an `Ok`, or pass the error through.\r\n */\r\nvar map = function (f, r) {\r\n    return r.ok === true ? ok(f(r.result)) : r;\r\n};\r\n/**\r\n * Apply `f` to the result of two `Ok`s, or pass an error through. If both\r\n * `Result`s are errors then the first one is returned.\r\n */\r\nvar map2 = function (f, ar, br) {\r\n    return ar.ok === false ? ar :\r\n        br.ok === false ? br :\r\n            ok(f(ar.result, br.result));\r\n};\r\n/**\r\n * Apply `f` to the error of an `Err`, or pass the success through.\r\n */\r\nvar mapError = function (f, r) {\r\n    return r.ok === true ? r : err(f(r.error));\r\n};\r\n/**\r\n * Chain together a sequence of computations that may fail, similar to a\r\n * `Promise`. If the first computation fails then the error will propagate\r\n * through. If it succeeds, then `f` will be applied to the value, returning a\r\n * new `Result`.\r\n */\r\nvar andThen = function (f, r) {\r\n    return r.ok === true ? f(r.result) : r;\r\n};\r\n\r\n\r\nvar result = Object.freeze({\r\n\tok: ok,\r\n\tisOk: isOk,\r\n\terr: err,\r\n\tisErr: isErr,\r\n\tasPromise: asPromise,\r\n\twithDefault: withDefault,\r\n\twithException: withException,\r\n\tsuccesses: successes,\r\n\tmap: map,\r\n\tmap2: map2,\r\n\tmapError: mapError,\r\n\tandThen: andThen\r\n});\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction isEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (a === null && b === null) {\r\n        return true;\r\n    }\r\n    if (typeof (a) !== typeof (b)) {\r\n        return false;\r\n    }\r\n    if (typeof (a) === 'object') {\r\n        // Array\r\n        if (Array.isArray(a)) {\r\n            if (!Array.isArray(b)) {\r\n                return false;\r\n            }\r\n            if (a.length !== b.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < a.length; i++) {\r\n                if (!isEqual(a[i], b[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        // Hash table\r\n        var keys = Object.keys(a);\r\n        if (keys.length !== Object.keys(b).length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < keys.length; i++) {\r\n            if (!b.hasOwnProperty(keys[i])) {\r\n                return false;\r\n            }\r\n            if (!isEqual(a[keys[i]], b[keys[i]])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n/*\r\n * Helpers\r\n */\r\nvar isJsonArray = function (json) { return Array.isArray(json); };\r\nvar isJsonObject = function (json) {\r\n    return typeof json === 'object' && json !== null && !isJsonArray(json);\r\n};\r\nvar typeString = function (json) {\r\n    switch (typeof json) {\r\n        case 'string':\r\n            return 'a string';\r\n        case 'number':\r\n            return 'a number';\r\n        case 'boolean':\r\n            return 'a boolean';\r\n        case 'undefined':\r\n            return 'undefined';\r\n        case 'object':\r\n            if (json instanceof Array) {\r\n                return 'an array';\r\n            }\r\n            else if (json === null) {\r\n                return 'null';\r\n            }\r\n            else {\r\n                return 'an object';\r\n            }\r\n        default:\r\n            return JSON.stringify(json);\r\n    }\r\n};\r\nvar expectedGot = function (expected, got) {\r\n    return \"expected \" + expected + \", got \" + typeString(got);\r\n};\r\nvar printPath = function (paths) {\r\n    return paths.map(function (path) { return (typeof path === 'string' ? \".\" + path : \"[\" + path + \"]\"); }).join('');\r\n};\r\nvar prependAt = function (newAt, _a) {\r\n    var at = _a.at, rest = __rest(_a, [\"at\"]);\r\n    return (__assign({ at: newAt + (at || '') }, rest));\r\n};\r\n/**\r\n * Decoders transform json objects with unknown structure into known and\r\n * verified forms. You can create objects of type `Decoder<A>` with either the\r\n * primitive decoder functions, such as `boolean()` and `string()`, or by\r\n * applying higher-order decoders to the primitives, such as `array(boolean())`\r\n * or `dict(string())`.\r\n *\r\n * Each of the decoder functions are available both as a static method on\r\n * `Decoder` and as a function alias -- for example the string decoder is\r\n * defined at `Decoder.string()`, but is also aliased to `string()`. Using the\r\n * function aliases exported with the library is recommended.\r\n *\r\n * `Decoder` exposes a number of 'run' methods, which all decode json in the\r\n * same way, but communicate success and failure in different ways. The `map`\r\n * and `andThen` methods modify decoders without having to call a 'run' method.\r\n *\r\n * Alternatively, the main decoder `run()` method returns an object of type\r\n * `Result<A, DecoderError>`. This library provides a number of helper\r\n * functions for dealing with the `Result` type, so you can do all the same\r\n * things with a `Result` as with the decoder methods.\r\n */\r\nvar Decoder = /** @class */ (function () {\r\n    /**\r\n     * The Decoder class constructor is kept private to separate the internal\r\n     * `decode` function from the external `run` function. The distinction\r\n     * between the two functions is that `decode` returns a\r\n     * `Partial<DecoderError>` on failure, which contains an unfinished error\r\n     * report. When `run` is called on a decoder, the relevant series of `decode`\r\n     * calls is made, and then on failure the resulting `Partial<DecoderError>`\r\n     * is turned into a `DecoderError` by filling in the missing information.\r\n     *\r\n     * While hiding the constructor may seem restrictive, leveraging the\r\n     * provided decoder combinators and helper functions such as\r\n     * `andThen` and `map` should be enough to build specialized decoders as\r\n     * needed.\r\n     */\r\n    function Decoder(decode) {\r\n        var _this = this;\r\n        this.decode = decode;\r\n        /**\r\n         * Run the decoder and return a `Result` with either the decoded value or a\r\n         * `DecoderError` containing the json input, the location of the error, and\r\n         * the error message.\r\n         *\r\n         * Examples:\r\n         * ```\r\n         * number().run(12)\r\n         * // => {ok: true, result: 12}\r\n         *\r\n         * string().run(9001)\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {\r\n         * //     kind: 'DecoderError',\r\n         * //     input: 9001,\r\n         * //     at: 'input',\r\n         * //     message: 'expected a string, got 9001'\r\n         * //   }\r\n         * // }\r\n         * ```\r\n         */\r\n        this.run = function (json) {\r\n            return mapError(function (error) { return ({\r\n                kind: 'DecoderError',\r\n                input: json,\r\n                at: 'input' + (error.at || ''),\r\n                message: error.message || ''\r\n            }); }, _this.decode(json));\r\n        };\r\n        /**\r\n         * Run the decoder as a `Promise`.\r\n         */\r\n        this.runPromise = function (json) { return asPromise(_this.run(json)); };\r\n        /**\r\n         * Run the decoder and return the value on success, or throw an exception\r\n         * with a formatted error string.\r\n         */\r\n        this.runWithException = function (json) { return withException(_this.run(json)); };\r\n        /**\r\n         * Construct a new decoder that applies a transformation to the decoded\r\n         * result. If the decoder succeeds then `f` will be applied to the value. If\r\n         * it fails the error will propagated through.\r\n         *\r\n         * Example:\r\n         * ```\r\n         * number().map(x => x * 5).run(10)\r\n         * // => {ok: true, result: 50}\r\n         * ```\r\n         */\r\n        this.map = function (f) {\r\n            return new Decoder(function (json) { return map(f, _this.decode(json)); });\r\n        };\r\n        /**\r\n         * Chain together a sequence of decoders. The first decoder will run, and\r\n         * then the function will determine what decoder to run second. If the result\r\n         * of the first decoder succeeds then `f` will be applied to the decoded\r\n         * value. If it fails the error will propagate through.\r\n         *\r\n         * This is a very powerful method -- it can act as both the `map` and `where`\r\n         * methods, can improve error messages for edge cases, and can be used to\r\n         * make a decoder for custom types.\r\n         *\r\n         * Example of adding an error message:\r\n         * ```\r\n         * const versionDecoder = valueAt(['version'], number());\r\n         * const infoDecoder3 = object({a: boolean()});\r\n         *\r\n         * const decoder = versionDecoder.andThen(version => {\r\n         *   switch (version) {\r\n         *     case 3:\r\n         *       return infoDecoder3;\r\n         *     default:\r\n         *       return fail(`Unable to decode info, version ${version} is not supported.`);\r\n         *   }\r\n         * });\r\n         *\r\n         * decoder.run({version: 3, a: true})\r\n         * // => {ok: true, result: {a: true}}\r\n         *\r\n         * decoder.run({version: 5, x: 'abc'})\r\n         * // =>\r\n         * // {\r\n         * //   ok: false,\r\n         * //   error: {... message: 'Unable to decode info, version 5 is not supported.'}\r\n         * // }\r\n         * ```\r\n         *\r\n         * Example of decoding a custom type:\r\n         * ```\r\n         * // nominal type for arrays with a length of at least one\r\n         * type NonEmptyArray<T> = T[] & { __nonEmptyArrayBrand__: void };\r\n         *\r\n         * const nonEmptyArrayDecoder = <T>(values: Decoder<T>): Decoder<NonEmptyArray<T>> =>\r\n         *   array(values).andThen(arr =>\r\n         *     arr.length > 0\r\n         *       ? succeed(createNonEmptyArray(arr))\r\n         *       : fail(`expected a non-empty array, got an empty array`)\r\n         *   );\r\n         * ```\r\n         */\r\n        this.andThen = function (f) {\r\n            return new Decoder(function (json) {\r\n                return andThen(function (value) { return f(value).decode(json); }, _this.decode(json));\r\n            });\r\n        };\r\n        /**\r\n         * Add constraints to a decoder _without_ changing the resulting type. The\r\n         * `test` argument is a predicate function which returns true for valid\r\n         * inputs. When `test` fails on an input, the decoder fails with the given\r\n         * `errorMessage`.\r\n         *\r\n         * ```\r\n         * const chars = (length: number): Decoder<string> =>\r\n         *   string().where(\r\n         *     (s: string) => s.length === length,\r\n         *     `expected a string of length ${length}`\r\n         *   );\r\n         *\r\n         * chars(5).run('12345')\r\n         * // => {ok: true, result: '12345'}\r\n         *\r\n         * chars(2).run('HELLO')\r\n         * // => {ok: false, error: {... message: 'expected a string of length 2'}}\r\n         *\r\n         * chars(12).run(true)\r\n         * // => {ok: false, error: {... message: 'expected a string, got a boolean'}}\r\n         * ```\r\n         */\r\n        this.where = function (test, errorMessage) {\r\n            return _this.andThen(function (value) { return (test(value) ? Decoder.succeed(value) : Decoder.fail(errorMessage)); });\r\n        };\r\n    }\r\n    /**\r\n     * Decoder primitive that validates strings, and fails on all other input.\r\n     */\r\n    Decoder.string = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'string'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a string', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates numbers, and fails on all other input.\r\n     */\r\n    Decoder.number = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'number'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a number', json) });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder primitive that validates booleans, and fails on all other input.\r\n     */\r\n    Decoder.boolean = function () {\r\n        return new Decoder(function (json) {\r\n            return typeof json === 'boolean'\r\n                ? ok(json)\r\n                : err({ message: expectedGot('a boolean', json) });\r\n        });\r\n    };\r\n    Decoder.constant = function (value) {\r\n        return new Decoder(function (json) {\r\n            return isEqual(json, value)\r\n                ? ok(value)\r\n                : err({ message: \"expected \" + JSON.stringify(value) + \", got \" + JSON.stringify(json) });\r\n        });\r\n    };\r\n    Decoder.object = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json) && decoders) {\r\n                var obj = {};\r\n                for (var key in decoders) {\r\n                    if (decoders.hasOwnProperty(key)) {\r\n                        var r = decoders[key].decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            // tslint:disable-next-line:strict-type-predicates\r\n                            if (r.result !== undefined) {\r\n                                obj[key] = r.result;\r\n                            }\r\n                        }\r\n                        else if (json[key] === undefined) {\r\n                            return err({ message: \"the key '\" + key + \"' is required but was not present\" });\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else if (isJsonObject(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.array = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json) && decoder) {\r\n                var decodeValue_1 = function (v, i) {\r\n                    return mapError(function (err$$1) { return prependAt(\"[\" + i + \"]\", err$$1); }, decoder.decode(v));\r\n                };\r\n                return json.reduce(function (acc, v, i) {\r\n                    return map2(function (arr, result) { return arr.concat([result]); }, acc, decodeValue_1(v, i));\r\n                }, ok([]));\r\n            }\r\n            else if (isJsonArray(json)) {\r\n                return ok(json);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an array', json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.tuple = function (decoders) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonArray(json)) {\r\n                if (json.length !== decoders.length) {\r\n                    return err({\r\n                        message: \"expected a tuple of length \" + decoders.length + \", got one of length \" + json.length\r\n                    });\r\n                }\r\n                var result = [];\r\n                for (var i = 0; i < decoders.length; i++) {\r\n                    var nth = decoders[i].decode(json[i]);\r\n                    if (nth.ok) {\r\n                        result[i] = nth.result;\r\n                    }\r\n                    else {\r\n                        return err(prependAt(\"[\" + i + \"]\", nth.error));\r\n                    }\r\n                }\r\n                return ok(result);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot(\"a tuple of length \" + decoders.length, json) });\r\n            }\r\n        });\r\n    };\r\n    Decoder.union = function (ad, bd) {\r\n        var decoders = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            decoders[_i - 2] = arguments[_i];\r\n        }\r\n        return Decoder.oneOf.apply(Decoder, [ad, bd].concat(decoders));\r\n    };\r\n    Decoder.intersection = function (ad, bd) {\r\n        var ds = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            ds[_i - 2] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            return [ad, bd].concat(ds).reduce(function (acc, decoder) { return map2(Object.assign, acc, decoder.decode(json)); }, ok({}));\r\n        });\r\n    };\r\n    /**\r\n     * Escape hatch to bypass validation. Always succeeds and types the result as\r\n     * `any`. Useful for defining decoders incrementally, particularly for\r\n     * complex objects.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   name: string;\r\n     *   complexUserData: ComplexType;\r\n     * }\r\n     *\r\n     * const userDecoder: Decoder<User> = object({\r\n     *   name: string(),\r\n     *   complexUserData: anyJson()\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.anyJson = function () { return new Decoder(function (json) { return ok(json); }); };\r\n    /**\r\n     * Decoder identity function which always succeeds and types the result as\r\n     * `unknown`.\r\n     */\r\n    Decoder.unknownJson = function () {\r\n        return new Decoder(function (json) { return ok(json); });\r\n    };\r\n    /**\r\n     * Decoder for json objects where the keys are unknown strings, but the values\r\n     * should all be of the same type.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * dict(number()).run({chocolate: 12, vanilla: 10, mint: 37});\r\n     * // => {ok: true, result: {chocolate: 12, vanilla: 10, mint: 37}}\r\n     * ```\r\n     */\r\n    Decoder.dict = function (decoder) {\r\n        return new Decoder(function (json) {\r\n            if (isJsonObject(json)) {\r\n                var obj = {};\r\n                for (var key in json) {\r\n                    if (json.hasOwnProperty(key)) {\r\n                        var r = decoder.decode(json[key]);\r\n                        if (r.ok === true) {\r\n                            obj[key] = r.result;\r\n                        }\r\n                        else {\r\n                            return err(prependAt(\".\" + key, r.error));\r\n                        }\r\n                    }\r\n                }\r\n                return ok(obj);\r\n            }\r\n            else {\r\n                return err({ message: expectedGot('an object', json) });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Decoder for values that may be `undefined`. This is primarily helpful for\r\n     * decoding interfaces with optional fields.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface User {\r\n     *   id: number;\r\n     *   isOwner?: boolean;\r\n     * }\r\n     *\r\n     * const decoder: Decoder<User> = object({\r\n     *   id: number(),\r\n     *   isOwner: optional(boolean())\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.optional = function (decoder) {\r\n        return new Decoder(function (json) { return (json === undefined || json === null ? ok(undefined) : decoder.decode(json)); });\r\n    };\r\n    /**\r\n     * Decoder that attempts to run each decoder in `decoders` and either succeeds\r\n     * with the first successful decoder, or fails after all decoders have failed.\r\n     *\r\n     * Note that `oneOf` expects the decoders to all have the same return type,\r\n     * while `union` creates a decoder for the union type of all the input\r\n     * decoders.\r\n     *\r\n     * Examples:\r\n     * ```\r\n     * oneOf(string(), number().map(String))\r\n     * oneOf(constant('start'), constant('stop'), succeed('unknown'))\r\n     * ```\r\n     */\r\n    Decoder.oneOf = function () {\r\n        var decoders = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            decoders[_i] = arguments[_i];\r\n        }\r\n        return new Decoder(function (json) {\r\n            var errors = [];\r\n            for (var i = 0; i < decoders.length; i++) {\r\n                var r = decoders[i].decode(json);\r\n                if (r.ok === true) {\r\n                    return r;\r\n                }\r\n                else {\r\n                    errors[i] = r.error;\r\n                }\r\n            }\r\n            var errorsList = errors\r\n                .map(function (error) { return \"at error\" + (error.at || '') + \": \" + error.message; })\r\n                .join('\", \"');\r\n            return err({\r\n                message: \"expected a value matching one of the decoders, got the errors [\\\"\" + errorsList + \"\\\"]\"\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that always succeeds with either the decoded value, or a fallback\r\n     * default value.\r\n     */\r\n    Decoder.withDefault = function (defaultValue, decoder) {\r\n        return new Decoder(function (json) {\r\n            return ok(withDefault(defaultValue, decoder.decode(json)));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that pulls a specific field out of a json structure, instead of\r\n     * decoding and returning the full structure. The `paths` array describes the\r\n     * object keys and array indices to traverse, so that values can be pulled out\r\n     * of a nested structure.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const decoder = valueAt(['a', 'b', 0], string());\r\n     *\r\n     * decoder.run({a: {b: ['surprise!']}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * decoder.run({a: {x: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b[0]' message: 'path does not exist'}}\r\n     * ```\r\n     *\r\n     * Note that the `decoder` is ran on the value found at the last key in the\r\n     * path, even if the last key is not found. This allows the `optional`\r\n     * decoder to succeed when appropriate.\r\n     * ```\r\n     * const optionalDecoder = valueAt(['a', 'b', 'c'], optional(string()));\r\n     *\r\n     * optionalDecoder.run({a: {b: {c: 'surprise!'}}})\r\n     * // => {ok: true, result: 'surprise!'}\r\n     *\r\n     * optionalDecoder.run({a: {b: 'cats'}})\r\n     * // => {ok: false, error: {... at: 'input.a.b.c' message: 'expected an object, got \"cats\"'}\r\n     *\r\n     * optionalDecoder.run({a: {b: {z: 1}}})\r\n     * // => {ok: true, result: undefined}\r\n     * ```\r\n     */\r\n    Decoder.valueAt = function (paths, decoder) {\r\n        return new Decoder(function (json) {\r\n            var jsonAtPath = json;\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (jsonAtPath === undefined) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: 'path does not exist'\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'string' && !isJsonObject(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an object', jsonAtPath)\r\n                    });\r\n                }\r\n                else if (typeof paths[i] === 'number' && !isJsonArray(jsonAtPath)) {\r\n                    return err({\r\n                        at: printPath(paths.slice(0, i + 1)),\r\n                        message: expectedGot('an array', jsonAtPath)\r\n                    });\r\n                }\r\n                else {\r\n                    jsonAtPath = jsonAtPath[paths[i]];\r\n                }\r\n            }\r\n            return mapError(function (error) {\r\n                return jsonAtPath === undefined\r\n                    ? { at: printPath(paths), message: 'path does not exist' }\r\n                    : prependAt(printPath(paths), error);\r\n            }, decoder.decode(jsonAtPath));\r\n        });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always succeeds with `fixedValue`.\r\n     */\r\n    Decoder.succeed = function (fixedValue) {\r\n        return new Decoder(function (json) { return ok(fixedValue); });\r\n    };\r\n    /**\r\n     * Decoder that ignores the input json and always fails with `errorMessage`.\r\n     */\r\n    Decoder.fail = function (errorMessage) {\r\n        return new Decoder(function (json) { return err({ message: errorMessage }); });\r\n    };\r\n    /**\r\n     * Decoder that allows for validating recursive data structures. Unlike with\r\n     * functions, decoders assigned to variables can't reference themselves\r\n     * before they are fully defined. We can avoid prematurely referencing the\r\n     * decoder by wrapping it in a function that won't be called until use, at\r\n     * which point the decoder has been defined.\r\n     *\r\n     * Example:\r\n     * ```\r\n     * interface Comment {\r\n     *   msg: string;\r\n     *   replies: Comment[];\r\n     * }\r\n     *\r\n     * const decoder: Decoder<Comment> = object({\r\n     *   msg: string(),\r\n     *   replies: lazy(() => array(decoder))\r\n     * });\r\n     * ```\r\n     */\r\n    Decoder.lazy = function (mkDecoder) {\r\n        return new Decoder(function (json) { return mkDecoder().decode(json); });\r\n    };\r\n    return Decoder;\r\n}());\r\n\r\n/* tslint:disable:variable-name */\r\n/** See `Decoder.string` */\r\nvar string = Decoder.string;\r\n/** See `Decoder.number` */\r\nvar number = Decoder.number;\r\n/** See `Decoder.boolean` */\r\nvar boolean = Decoder.boolean;\r\n/** See `Decoder.anyJson` */\r\nvar anyJson = Decoder.anyJson;\r\n/** See `Decoder.constant` */\r\nvar constant = Decoder.constant;\r\n/** See `Decoder.object` */\r\nvar object = Decoder.object;\r\n/** See `Decoder.array` */\r\nvar array = Decoder.array;\r\n/** See `Decoder.optional` */\r\nvar optional = Decoder.optional;\r\n/** See `Decoder.oneOf` */\r\nvar oneOf = Decoder.oneOf;\r\n/** See `Decoder.lazy` */\r\nvar lazy = Decoder.lazy;\n\nconst nonEmptyStringDecoder = string().where((s) => s.length > 0, \"Expected a non-empty string\");\r\nconst nonNegativeNumberDecoder = number().where((num) => num >= 0, \"Expected a non-negative number\");\r\nconst libDomainDecoder = oneOf(constant(\"windows\"), constant(\"appManager\"), constant(\"layouts\"), constant(\"intents\"));\r\nconst windowOperationTypesDecoder = oneOf(constant(\"openWindow\"), constant(\"windowHello\"), constant(\"windowAdded\"), constant(\"windowRemoved\"), constant(\"getBounds\"), constant(\"getUrl\"), constant(\"moveResize\"), constant(\"focus\"), constant(\"close\"), constant(\"getTitle\"), constant(\"setTitle\"));\r\nconst appManagerOperationTypesDecoder = oneOf(constant(\"appHello\"), constant(\"applicationAdded\"), constant(\"applicationRemoved\"), constant(\"applicationChanged\"), constant(\"instanceStarted\"), constant(\"instanceStopped\"), constant(\"applicationStart\"), constant(\"instanceStop\"), constant(\"clear\"));\r\nconst layoutsOperationTypesDecoder = oneOf(constant(\"layoutAdded\"), constant(\"layoutChanged\"), constant(\"layoutRemoved\"), constant(\"get\"), constant(\"getAll\"), constant(\"export\"), constant(\"import\"), constant(\"remove\"));\r\nconst windowRelativeDirectionDecoder = oneOf(constant(\"top\"), constant(\"left\"), constant(\"right\"), constant(\"bottom\"));\r\nconst windowOpenSettingsDecoder = optional(object({\r\n    top: optional(number()),\r\n    left: optional(number()),\r\n    width: optional(nonNegativeNumberDecoder),\r\n    height: optional(nonNegativeNumberDecoder),\r\n    context: optional(anyJson()),\r\n    relativeTo: optional(nonEmptyStringDecoder),\r\n    relativeDirection: optional(windowRelativeDirectionDecoder),\r\n    windowId: optional(nonEmptyStringDecoder)\r\n}));\r\nconst openWindowConfigDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    url: nonEmptyStringDecoder,\r\n    options: windowOpenSettingsDecoder\r\n});\r\nconst windowHelloDecoder = object({\r\n    windowId: optional(nonEmptyStringDecoder)\r\n});\r\nconst coreWindowDataDecoder = object({\r\n    windowId: nonEmptyStringDecoder,\r\n    name: nonEmptyStringDecoder\r\n});\r\nconst simpleWindowDecoder = object({\r\n    windowId: nonEmptyStringDecoder\r\n});\r\nconst helloSuccessDecoder = object({\r\n    windows: array(coreWindowDataDecoder),\r\n    isWorkspaceFrame: boolean()\r\n});\r\nconst windowTitleConfigDecoder = object({\r\n    windowId: nonEmptyStringDecoder,\r\n    title: string()\r\n});\r\nconst windowMoveResizeConfigDecoder = object({\r\n    windowId: nonEmptyStringDecoder,\r\n    top: optional(number()),\r\n    left: optional(number()),\r\n    width: optional(nonNegativeNumberDecoder),\r\n    height: optional(nonNegativeNumberDecoder),\r\n    relative: optional(boolean())\r\n});\r\nconst windowBoundsResultDecoder = object({\r\n    windowId: nonEmptyStringDecoder,\r\n    bounds: object({\r\n        top: number(),\r\n        left: number(),\r\n        width: nonNegativeNumberDecoder,\r\n        height: nonNegativeNumberDecoder\r\n    })\r\n});\r\nconst windowUrlResultDecoder = object({\r\n    windowId: nonEmptyStringDecoder,\r\n    url: nonEmptyStringDecoder\r\n});\r\nconst anyDecoder = anyJson();\r\nconst boundsDecoder = object({\r\n    top: optional(number()),\r\n    left: optional(number()),\r\n    width: optional(nonNegativeNumberDecoder),\r\n    height: optional(nonNegativeNumberDecoder)\r\n});\r\nconst instanceDataDecoder = object({\r\n    id: nonEmptyStringDecoder,\r\n    applicationName: nonEmptyStringDecoder\r\n});\r\nconst applicationDetailsDecoder = object({\r\n    url: nonEmptyStringDecoder,\r\n    top: optional(number()),\r\n    left: optional(number()),\r\n    width: optional(nonNegativeNumberDecoder),\r\n    height: optional(nonNegativeNumberDecoder)\r\n});\r\nconst intentDefinitionDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    displayName: optional(string()),\r\n    contexts: optional(array(string())),\r\n    customConfig: optional(object())\r\n});\r\nconst fdc3AppDefinitionDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    title: optional(nonEmptyStringDecoder),\r\n    version: optional(nonEmptyStringDecoder),\r\n    appId: nonEmptyStringDecoder,\r\n    manifest: nonEmptyStringDecoder,\r\n    manifestType: nonEmptyStringDecoder,\r\n    tooltip: optional(nonEmptyStringDecoder),\r\n    description: optional(nonEmptyStringDecoder),\r\n    contactEmail: optional(nonEmptyStringDecoder),\r\n    supportEmail: optional(nonEmptyStringDecoder),\r\n    publisher: optional(nonEmptyStringDecoder),\r\n    images: optional(array(object({ url: optional(nonEmptyStringDecoder) }))),\r\n    icons: optional(array(object({ icon: optional(nonEmptyStringDecoder) }))),\r\n    customConfig: anyJson(),\r\n    intents: optional(array(intentDefinitionDecoder))\r\n});\r\nconst applicationDefinitionDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\r\n    title: optional(nonEmptyStringDecoder),\r\n    version: optional(nonEmptyStringDecoder),\r\n    customProperties: optional(anyJson()),\r\n    icon: optional(nonEmptyStringDecoder),\r\n    caption: optional(nonEmptyStringDecoder),\r\n    details: applicationDetailsDecoder,\r\n    intents: optional(array(intentDefinitionDecoder))\r\n});\r\nconst allApplicationDefinitionsDecoder = oneOf(applicationDefinitionDecoder, fdc3AppDefinitionDecoder);\r\nconst appsImportOperationDecoder = object({\r\n    definitions: array(allApplicationDefinitionsDecoder),\r\n    mode: oneOf(constant(\"replace\"), constant(\"merge\"))\r\n});\r\nconst appRemoveConfigDecoder = object({\r\n    name: nonEmptyStringDecoder\r\n});\r\nconst appsExportOperationDecoder = object({\r\n    definitions: array(applicationDefinitionDecoder)\r\n});\r\nconst applicationDataDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\r\n    instances: array(instanceDataDecoder),\r\n    userProperties: optional(anyJson()),\r\n    title: optional(nonEmptyStringDecoder),\r\n    version: optional(nonEmptyStringDecoder),\r\n    icon: optional(nonEmptyStringDecoder),\r\n    caption: optional(nonEmptyStringDecoder)\r\n});\r\nconst baseApplicationDataDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\r\n    userProperties: anyJson(),\r\n    title: optional(nonEmptyStringDecoder),\r\n    version: optional(nonEmptyStringDecoder),\r\n    icon: optional(nonEmptyStringDecoder),\r\n    caption: optional(nonEmptyStringDecoder)\r\n});\r\nconst appHelloSuccessDecoder = object({\r\n    apps: array(applicationDataDecoder)\r\n});\r\nconst basicInstanceDataDecoder = object({\r\n    id: nonEmptyStringDecoder\r\n});\r\nconst applicationStartConfigDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    waitForAGMReady: boolean(),\r\n    id: optional(nonEmptyStringDecoder),\r\n    context: optional(anyJson()),\r\n    top: optional(number()),\r\n    left: optional(number()),\r\n    width: optional(nonNegativeNumberDecoder),\r\n    height: optional(nonNegativeNumberDecoder),\r\n    relativeTo: optional(nonEmptyStringDecoder),\r\n    relativeDirection: optional(oneOf(constant(\"top\"), constant(\"left\"), constant(\"right\"), constant(\"bottom\")))\r\n});\r\nconst layoutTypeDecoder = oneOf(constant(\"Global\"), constant(\"Activity\"), constant(\"ApplicationDefault\"), constant(\"Swimlane\"), constant(\"Workspace\"));\r\nconst componentTypeDecoder = oneOf(constant(\"application\"), constant(\"activity\"));\r\nconst windowLayoutComponentDecoder = object({\r\n    type: nonEmptyStringDecoder.where((s) => s === \"window\", \"Expected a value of window\"),\r\n    componentType: optional(componentTypeDecoder),\r\n    state: object({\r\n        name: anyJson(),\r\n        context: anyJson(),\r\n        url: nonEmptyStringDecoder,\r\n        bounds: anyJson(),\r\n        id: nonEmptyStringDecoder,\r\n        parentId: optional(nonEmptyStringDecoder),\r\n        main: boolean()\r\n    })\r\n});\r\nconst windowLayoutItemDecoder = object({\r\n    type: constant(\"window\"),\r\n    config: object({\r\n        appName: nonEmptyStringDecoder,\r\n        url: optional(nonEmptyStringDecoder)\r\n    })\r\n});\r\nconst groupLayoutItemDecoder = object({\r\n    type: constant(\"group\"),\r\n    config: anyJson(),\r\n    children: array(oneOf(windowLayoutItemDecoder))\r\n});\r\nconst columnLayoutItemDecoder = object({\r\n    type: constant(\"column\"),\r\n    config: anyJson(),\r\n    children: array(oneOf(groupLayoutItemDecoder, windowLayoutItemDecoder, lazy(() => columnLayoutItemDecoder), lazy(() => rowLayoutItemDecoder)))\r\n});\r\nconst rowLayoutItemDecoder = object({\r\n    type: constant(\"row\"),\r\n    config: anyJson(),\r\n    children: array(oneOf(columnLayoutItemDecoder, groupLayoutItemDecoder, windowLayoutItemDecoder, lazy(() => rowLayoutItemDecoder)))\r\n});\r\nconst workspaceLayoutComponentDecoder = object({\r\n    type: constant(\"Workspace\"),\r\n    state: object({\r\n        config: anyJson(),\r\n        context: anyJson(),\r\n        children: array(oneOf(rowLayoutItemDecoder, columnLayoutItemDecoder, groupLayoutItemDecoder, windowLayoutItemDecoder))\r\n    })\r\n});\r\nconst glueLayoutDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: layoutTypeDecoder,\r\n    components: array(oneOf(windowLayoutComponentDecoder, workspaceLayoutComponentDecoder)),\r\n    version: optional(nonEmptyStringDecoder),\r\n    context: optional(anyJson()),\r\n    metadata: optional(anyJson())\r\n});\r\nconst newLayoutOptionsDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    context: optional(anyJson()),\r\n    metadata: optional(anyJson())\r\n});\r\nconst restoreOptionsDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    context: optional(anyJson()),\r\n    closeRunningInstance: optional(boolean())\r\n});\r\nconst layoutSummaryDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: layoutTypeDecoder,\r\n    context: optional(anyJson()),\r\n    metadata: optional(anyJson())\r\n});\r\nconst simpleLayoutConfigDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    type: layoutTypeDecoder\r\n});\r\nconst getAllLayoutsConfigDecoder = object({\r\n    type: layoutTypeDecoder\r\n});\r\nconst allLayoutsFullConfigDecoder = object({\r\n    layouts: array(glueLayoutDecoder)\r\n});\r\nconst importModeDecoder = oneOf(constant(\"replace\"), constant(\"merge\"));\r\nconst layoutsImportConfigDecoder = object({\r\n    layouts: array(glueLayoutDecoder),\r\n    mode: importModeDecoder\r\n});\r\nconst allLayoutsSummariesResultDecoder = object({\r\n    summaries: array(layoutSummaryDecoder)\r\n});\r\nconst simpleLayoutResult = object({\r\n    layout: glueLayoutDecoder\r\n});\r\nconst optionalSimpleLayoutResult = object({\r\n    layout: optional(glueLayoutDecoder)\r\n});\r\nconst intentsOperationTypesDecoder = oneOf(constant(\"findIntent\"), constant(\"getIntents\"), constant(\"raiseIntent\"));\r\nconst intentHandlerDecoder = object({\r\n    applicationName: nonEmptyStringDecoder,\r\n    applicationTitle: string(),\r\n    applicationDescription: optional(string()),\r\n    applicationIcon: optional(string()),\r\n    type: oneOf(constant(\"app\"), constant(\"instance\")),\r\n    displayName: optional(string()),\r\n    contextTypes: optional(array(nonEmptyStringDecoder)),\r\n    instanceId: optional(string()),\r\n    instanceTitle: optional(string())\r\n});\r\nconst intentDecoder = object({\r\n    name: nonEmptyStringDecoder,\r\n    handlers: array(intentHandlerDecoder)\r\n});\r\nconst intentTargetDecoder = oneOf(constant(\"startNew\"), constant(\"reuse\"), object({\r\n    app: optional(nonEmptyStringDecoder),\r\n    instance: optional(nonEmptyStringDecoder)\r\n}));\r\nconst intentContextDecoder = object({\r\n    type: optional(nonEmptyStringDecoder),\r\n    data: optional(object())\r\n});\r\nconst intentsDecoder = array(intentDecoder);\r\nconst wrappedIntentsDecoder = object({\r\n    intents: intentsDecoder\r\n});\r\nconst intentFilterDecoder = object({\r\n    name: optional(nonEmptyStringDecoder),\r\n    contextType: optional(nonEmptyStringDecoder)\r\n});\r\nconst findFilterDecoder = oneOf(nonEmptyStringDecoder, intentFilterDecoder);\r\nconst wrappedIntentFilterDecoder = object({\r\n    filter: optional(intentFilterDecoder)\r\n});\r\nconst intentRequestDecoder = object({\r\n    intent: nonEmptyStringDecoder,\r\n    target: optional(intentTargetDecoder),\r\n    context: optional(intentContextDecoder),\r\n    options: optional(windowOpenSettingsDecoder)\r\n});\r\nconst raiseRequestDecoder = oneOf(nonEmptyStringDecoder, intentRequestDecoder);\r\nconst intentResultDecoder = object({\r\n    request: intentRequestDecoder,\r\n    handler: intentHandlerDecoder,\r\n    result: anyJson()\r\n});\r\nconst addIntentListenerRequestDecoder = object({\r\n    intent: nonEmptyStringDecoder,\r\n    contextTypes: optional(array(nonEmptyStringDecoder)),\r\n    displayName: optional(string()),\r\n    icon: optional(string()),\r\n    description: optional(string())\r\n});\r\nconst addIntentListenerIntentDecoder = oneOf(nonEmptyStringDecoder, addIntentListenerRequestDecoder);\r\nconst channelNameDecoder = (channelNames) => {\r\n    return nonEmptyStringDecoder.where(s => channelNames.includes(s), \"Expected a valid channel name\");\r\n};\n\nconst operations = {\r\n    openWindow: { name: \"openWindow\", dataDecoder: openWindowConfigDecoder, resultDecoder: coreWindowDataDecoder },\r\n    windowHello: { name: \"windowHello\", dataDecoder: windowHelloDecoder, resultDecoder: helloSuccessDecoder },\r\n    windowAdded: { name: \"windowAdded\", dataDecoder: coreWindowDataDecoder },\r\n    windowRemoved: { name: \"windowRemoved\", dataDecoder: simpleWindowDecoder },\r\n    getBounds: { name: \"getBounds\", dataDecoder: simpleWindowDecoder, resultDecoder: windowBoundsResultDecoder },\r\n    getUrl: { name: \"getUrl\", dataDecoder: simpleWindowDecoder, resultDecoder: windowUrlResultDecoder },\r\n    moveResize: { name: \"moveResize\", dataDecoder: windowMoveResizeConfigDecoder },\r\n    focus: { name: \"focus\", dataDecoder: simpleWindowDecoder },\r\n    close: { name: \"close\", dataDecoder: simpleWindowDecoder },\r\n    getTitle: { name: \"getTitle\", dataDecoder: simpleWindowDecoder, resultDecoder: windowTitleConfigDecoder },\r\n    setTitle: { name: \"setTitle\", dataDecoder: windowTitleConfigDecoder }\r\n};\n\nfunction createRegistry(options) {\r\n    if (options && options.errorHandling\r\n        && typeof options.errorHandling !== \"function\"\r\n        && options.errorHandling !== \"log\"\r\n        && options.errorHandling !== \"silent\"\r\n        && options.errorHandling !== \"throw\") {\r\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\r\n    }\r\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\r\n    var callbacks = {};\r\n    function add(key, callback, replayArgumentsArr) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            callbacksForKey = [];\r\n            callbacks[key] = callbacksForKey;\r\n        }\r\n        callbacksForKey.push(callback);\r\n        if (replayArgumentsArr) {\r\n            setTimeout(function () {\r\n                replayArgumentsArr.forEach(function (replayArgument) {\r\n                    var _a;\r\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\r\n                        try {\r\n                            if (Array.isArray(replayArgument)) {\r\n                                callback.apply(undefined, replayArgument);\r\n                            }\r\n                            else {\r\n                                callback.apply(undefined, [replayArgument]);\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            _handleError(err, key);\r\n                        }\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n        return function () {\r\n            var allForKey = callbacks[key];\r\n            if (!allForKey) {\r\n                return;\r\n            }\r\n            allForKey = allForKey.reduce(function (acc, element, index) {\r\n                if (!(element === callback && acc.length === index)) {\r\n                    acc.push(element);\r\n                }\r\n                return acc;\r\n            }, []);\r\n            callbacks[key] = allForKey;\r\n        };\r\n    }\r\n    function execute(key) {\r\n        var argumentsArr = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            argumentsArr[_i - 1] = arguments[_i];\r\n        }\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey || callbacksForKey.length === 0) {\r\n            return [];\r\n        }\r\n        var results = [];\r\n        callbacksForKey.forEach(function (callback) {\r\n            try {\r\n                var result = callback.apply(undefined, argumentsArr);\r\n                results.push(result);\r\n            }\r\n            catch (err) {\r\n                results.push(undefined);\r\n                _handleError(err, key);\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    function _handleError(exceptionArtifact, key) {\r\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\r\n        if (_userErrorHandler) {\r\n            _userErrorHandler(errParam);\r\n            return;\r\n        }\r\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\r\n        if (options) {\r\n            switch (options.errorHandling) {\r\n                case \"log\":\r\n                    return console.error(msg);\r\n                case \"silent\":\r\n                    return;\r\n                case \"throw\":\r\n                    throw new Error(msg);\r\n            }\r\n        }\r\n        console.error(msg);\r\n    }\r\n    function clear() {\r\n        callbacks = {};\r\n    }\r\n    function clearKey(key) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            return;\r\n        }\r\n        delete callbacks[key];\r\n    }\r\n    return {\r\n        add: add,\r\n        execute: execute,\r\n        clear: clear,\r\n        clearKey: clearKey\r\n    };\r\n}\r\ncreateRegistry.default = createRegistry;\r\nvar lib = createRegistry;\n\nclass WebWindowModel {\r\n    constructor(_id, _name, _bridge) {\r\n        this._id = _id;\r\n        this._name = _name;\r\n        this._bridge = _bridge;\r\n        this.registry = lib();\r\n        this.myCtxKey = `___window___${this.id}`;\r\n    }\r\n    get id() {\r\n        return this._id.slice();\r\n    }\r\n    get name() {\r\n        return this._name.slice();\r\n    }\r\n    clean() {\r\n        if (this.ctxUnsubscribe) {\r\n            this.ctxUnsubscribe();\r\n        }\r\n    }\r\n    toApi() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.ctxUnsubscribe = yield this._bridge.contextLib.subscribe(this.myCtxKey, (data) => this.registry.execute(\"context-updated\", data));\r\n            const api = {\r\n                id: this.id,\r\n                name: this.name,\r\n                getURL: this.getURL.bind(this),\r\n                moveResize: this.moveResize.bind(this),\r\n                resizeTo: this.resizeTo.bind(this),\r\n                moveTo: this.moveTo.bind(this),\r\n                focus: this.focus.bind(this),\r\n                close: this.close.bind(this),\r\n                getTitle: this.getTitle.bind(this),\r\n                setTitle: this.setTitle.bind(this),\r\n                getBounds: this.getBounds.bind(this),\r\n                getContext: this.getContext.bind(this),\r\n                updateContext: this.updateContext.bind(this),\r\n                setContext: this.setContext.bind(this),\r\n                onContextUpdated: this.onContextUpdated.bind(this)\r\n            };\r\n            this.me = Object.freeze(api);\r\n            return this.me;\r\n        });\r\n    }\r\n    getURL() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this._bridge.send(\"windows\", operations.getUrl, { windowId: this.id });\r\n            return result.url;\r\n        });\r\n    }\r\n    moveResize(dimension) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const targetBounds = boundsDecoder.runWithException(dimension);\r\n            const commandArgs = Object.assign({}, targetBounds, { windowId: this.id, relative: false });\r\n            yield this._bridge.send(\"windows\", operations.moveResize, commandArgs);\r\n            return this.me;\r\n        });\r\n    }\r\n    resizeTo(width, height) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof width === \"undefined\" && typeof height === \"undefined\") {\r\n                return this.me;\r\n            }\r\n            if (typeof width !== \"undefined\") {\r\n                nonNegativeNumberDecoder.runWithException(width);\r\n            }\r\n            if (typeof height !== \"undefined\") {\r\n                nonNegativeNumberDecoder.runWithException(height);\r\n            }\r\n            const commandArgs = Object.assign({}, { width, height }, { windowId: this.id, relative: true });\r\n            yield this._bridge.send(\"windows\", operations.moveResize, commandArgs);\r\n            return this.me;\r\n        });\r\n    }\r\n    moveTo(top, left) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof top === \"undefined\" && typeof left === \"undefined\") {\r\n                return this.me;\r\n            }\r\n            if (typeof top !== \"undefined\") {\r\n                number().runWithException(top);\r\n            }\r\n            if (typeof left !== \"undefined\") {\r\n                number().runWithException(left);\r\n            }\r\n            const commandArgs = Object.assign({}, { top, left }, { windowId: this.id, relative: true });\r\n            yield this._bridge.send(\"windows\", operations.moveResize, commandArgs);\r\n            return this.me;\r\n        });\r\n    }\r\n    focus() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._bridge.send(\"windows\", operations.focus, { windowId: this.id });\r\n            return this.me;\r\n        });\r\n    }\r\n    close() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._bridge.send(\"windows\", operations.close, { windowId: this.id });\r\n            return this.me;\r\n        });\r\n    }\r\n    getTitle() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this._bridge.send(\"windows\", operations.getTitle, { windowId: this.id });\r\n            return result.title;\r\n        });\r\n    }\r\n    setTitle(title) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ttl = nonEmptyStringDecoder.runWithException(title);\r\n            yield this._bridge.send(\"windows\", operations.setTitle, { windowId: this.id, title: ttl });\r\n            return this.me;\r\n        });\r\n    }\r\n    getBounds() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this._bridge.send(\"windows\", operations.getBounds, { windowId: this.id });\r\n            return result.bounds;\r\n        });\r\n    }\r\n    getContext() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ctx = yield this._bridge.contextLib.get(this.myCtxKey);\r\n            return ctx;\r\n        });\r\n    }\r\n    updateContext(context) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ctx = anyDecoder.runWithException(context);\r\n            yield this._bridge.contextLib.update(this.myCtxKey, ctx);\r\n            return this.me;\r\n        });\r\n    }\r\n    setContext(context) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ctx = anyDecoder.runWithException(context);\r\n            yield this._bridge.contextLib.set(this.myCtxKey, ctx);\r\n            return this.me;\r\n        });\r\n    }\r\n    onContextUpdated(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Cannot subscribe to context changes, because the provided callback is not a function!\");\r\n        }\r\n        const wrappedCallback = (data) => {\r\n            callback(data, this.me);\r\n        };\r\n        return this.registry.add(\"context-updated\", wrappedCallback);\r\n    }\r\n}\n\nclass WindowsController {\r\n    constructor() {\r\n        this.registry = lib();\r\n        this.allWindowProjections = [];\r\n    }\r\n    start(coreGlue, ioc) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"windows.controller.web\");\r\n            this.logger.trace(\"starting the web windows controller\");\r\n            this.publicWindowId = coreGlue.connection.transport.publicWindowId;\r\n            this.actualWindowId = coreGlue.interop.instance.windowId;\r\n            this.addWindowOperationExecutors();\r\n            this.ioc = ioc;\r\n            this.bridge = ioc.bridge;\r\n            this.logger.trace(`set the public window id: ${this.publicWindowId} and actual window id: ${this.actualWindowId}, set the bridge operations and ioc, registering with the platform now`);\r\n            this.platformRegistration = this.registerWithPlatform();\r\n            yield this.platformRegistration;\r\n            this.logger.trace(\"registration with the platform successful, attaching the windows property to glue and returning\");\r\n            const api = this.toApi();\r\n            coreGlue.windows = api;\r\n        });\r\n    }\r\n    handleBridgeMessage(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.platformRegistration;\r\n            const operationName = windowOperationTypesDecoder.runWithException(args.operation);\r\n            const operation = operations[operationName];\r\n            if (!operation.execute) {\r\n                return;\r\n            }\r\n            let operationData = args.data;\r\n            if (operation.dataDecoder) {\r\n                operationData = operation.dataDecoder.runWithException(args.data);\r\n            }\r\n            return yield operation.execute(operationData);\r\n        });\r\n    }\r\n    open(name, url, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            nonEmptyStringDecoder.runWithException(name);\r\n            nonEmptyStringDecoder.runWithException(url);\r\n            const settings = windowOpenSettingsDecoder.runWithException(options);\r\n            const windowSuccess = yield this.bridge.send(\"windows\", operations.openWindow, { name, url, options: settings });\r\n            const projection = yield this.ioc.buildWebWindow(windowSuccess.windowId, windowSuccess.name);\r\n            return projection.api;\r\n        });\r\n    }\r\n    list() {\r\n        return this.allWindowProjections.map((projection) => projection.api);\r\n    }\r\n    findById(id) {\r\n        var _a;\r\n        nonEmptyStringDecoder.runWithException(id);\r\n        return (_a = this.allWindowProjections.find((projection) => projection.id === id)) === null || _a === void 0 ? void 0 : _a.api;\r\n    }\r\n    toApi() {\r\n        return {\r\n            open: this.open.bind(this),\r\n            my: this.my.bind(this),\r\n            list: this.list.bind(this),\r\n            findById: this.findById.bind(this),\r\n            onWindowAdded: this.onWindowAdded.bind(this),\r\n            onWindowRemoved: this.onWindowRemoved.bind(this)\r\n        };\r\n    }\r\n    addWindowOperationExecutors() {\r\n        operations.windowAdded.execute = this.handleWindowAdded.bind(this);\r\n        operations.windowRemoved.execute = this.handleWindowRemoved.bind(this);\r\n        operations.getBounds.execute = this.handleGetBounds.bind(this);\r\n        operations.getTitle.execute = this.handleGetTitle.bind(this);\r\n        operations.getUrl.execute = this.handleGetUrl.bind(this);\r\n        operations.moveResize.execute = this.handleMoveResize.bind(this);\r\n        operations.setTitle.execute = this.handleSetTitle.bind(this);\r\n    }\r\n    my() {\r\n        return Object.assign({}, this.me);\r\n    }\r\n    onWindowAdded(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Cannot subscribe to window added, because the provided callback is not a function!\");\r\n        }\r\n        return this.registry.add(\"window-added\", callback);\r\n    }\r\n    onWindowRemoved(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Cannot subscribe to window removed, because the provided callback is not a function!\");\r\n        }\r\n        return this.registry.add(\"window-removed\", callback);\r\n    }\r\n    sayHello() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const helloSuccess = yield this.bridge.send(\"windows\", operations.windowHello, { windowId: this.actualWindowId });\r\n            return helloSuccess;\r\n        });\r\n    }\r\n    registerWithPlatform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { windows, isWorkspaceFrame } = yield this.sayHello();\r\n            this.logger.trace(\"the platform responded to the hello message\");\r\n            if (!isWorkspaceFrame) {\r\n                this.logger.trace(\"i am not treated as a workspace frame, setting my window\");\r\n                const myWindow = windows.find((w) => w.windowId === this.publicWindowId);\r\n                if (!myWindow) {\r\n                    throw new Error(\"Cannot initialize the window library, because I received no information about me from the platform\");\r\n                }\r\n                this.me = (yield this.ioc.buildWebWindow(this.publicWindowId, myWindow.name)).api;\r\n            }\r\n            const currentWindows = yield Promise.all(windows.map((w) => this.ioc.buildWebWindow(w.windowId, w.name)));\r\n            this.logger.trace(\"all windows projections are completed, building the list collection\");\r\n            this.allWindowProjections.push(...currentWindows);\r\n        });\r\n    }\r\n    handleWindowAdded(data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.allWindowProjections.some((projection) => projection.id === data.windowId)) {\r\n                return;\r\n            }\r\n            const webWindowProjection = yield this.ioc.buildWebWindow(data.windowId, data.name);\r\n            this.allWindowProjections.push(webWindowProjection);\r\n            this.registry.execute(\"window-added\", webWindowProjection.api);\r\n        });\r\n    }\r\n    handleWindowRemoved(data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const removed = this.allWindowProjections.find((w) => w.id === data.windowId);\r\n            if (!removed) {\r\n                return;\r\n            }\r\n            this.allWindowProjections = this.allWindowProjections.filter((w) => w.id !== data.windowId);\r\n            removed.model.clean();\r\n            this.registry.execute(\"window-removed\", removed.api);\r\n        });\r\n    }\r\n    handleGetBounds() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                windowId: this.me.id,\r\n                bounds: {\r\n                    top: window.screenTop,\r\n                    left: window.screenLeft,\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight\r\n                }\r\n            };\r\n        });\r\n    }\r\n    handleGetTitle() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                windowId: this.me.id,\r\n                title: document.title\r\n            };\r\n        });\r\n    }\r\n    handleGetUrl() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return {\r\n                windowId: this.me.id,\r\n                url: window.location.href\r\n            };\r\n        });\r\n    }\r\n    handleMoveResize(config) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const targetTop = typeof config.top === \"number\" ? config.top :\r\n                config.relative ? 0 : window.screenTop;\r\n            const targetLeft = typeof config.left === \"number\" ? config.left :\r\n                config.relative ? 0 : window.screenLeft;\r\n            const targetHeight = typeof config.height === \"number\" ? config.height :\r\n                config.relative ? 0 : window.innerHeight;\r\n            const targetWidth = typeof config.width === \"number\" ? config.width :\r\n                config.relative ? 0 : window.innerWidth;\r\n            const moveMethod = config.relative ? window.moveBy : window.moveTo;\r\n            const resizeMethod = config.relative ? window.resizeBy : window.resizeTo;\r\n            moveMethod(targetLeft, targetTop);\r\n            resizeMethod(targetWidth, targetHeight);\r\n        });\r\n    }\r\n    handleSetTitle(config) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            document.title = config.title;\r\n        });\r\n    }\r\n}\n\nconst PromiseWrap = (promise, timeoutMilliseconds, timeoutMessage) => {\r\n    return new Promise((resolve, reject) => {\r\n        let promiseActive = true;\r\n        const timeout = setTimeout(() => {\r\n            if (!promiseActive) {\r\n                return;\r\n            }\r\n            promiseActive = false;\r\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\r\n            reject(message);\r\n        }, timeoutMilliseconds);\r\n        promise()\r\n            .then((result) => {\r\n            if (!promiseActive) {\r\n                return;\r\n            }\r\n            promiseActive = false;\r\n            clearTimeout(timeout);\r\n            resolve(result);\r\n        })\r\n            .catch((error) => {\r\n            if (!promiseActive) {\r\n                return;\r\n            }\r\n            promiseActive = false;\r\n            clearTimeout(timeout);\r\n            reject(error);\r\n        });\r\n    });\r\n};\r\nconst PromisePlus = (executor, timeoutMilliseconds, timeoutMessage) => {\r\n    return new Promise((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n            const message = timeoutMessage || `Promise timeout hit: ${timeoutMilliseconds}`;\r\n            reject(message);\r\n        }, timeoutMilliseconds);\r\n        const providedPromise = new Promise(executor);\r\n        providedPromise\r\n            .then((result) => {\r\n            clearTimeout(timeout);\r\n            resolve(result);\r\n        })\r\n            .catch((error) => {\r\n            clearTimeout(timeout);\r\n            reject(error);\r\n        });\r\n    });\r\n};\n\nconst GlueWebPlatformControlName = \"T42.Web.Platform.Control\";\r\nconst GlueWebPlatformStreamName = \"T42.Web.Platform.Stream\";\r\nconst GlueClientControlName = \"T42.Web.Client.Control\";\n\nclass GlueBridge {\r\n    constructor(coreGlue) {\r\n        this.coreGlue = coreGlue;\r\n        this.platformMethodTimeoutMs = 10000;\r\n    }\r\n    get contextLib() {\r\n        return this.coreGlue.contexts;\r\n    }\r\n    get interopInstance() {\r\n        return this.coreGlue.interop.instance.instance;\r\n    }\r\n    start(controllers) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.controllers = controllers;\r\n            yield Promise.all([\r\n                this.checkWaitMethod(GlueWebPlatformControlName),\r\n                this.checkWaitMethod(GlueWebPlatformStreamName)\r\n            ]);\r\n            const [sub] = yield Promise.all([\r\n                this.coreGlue.interop.subscribe(GlueWebPlatformStreamName),\r\n                this.coreGlue.interop.registerAsync(GlueClientControlName, (args, _, success, error) => this.passMessageController(args, success, error))\r\n            ]);\r\n            this.sub = sub;\r\n            this.sub.onData((pkg) => this.passMessageController(pkg.data));\r\n        });\r\n    }\r\n    getInteropInstance(windowId) {\r\n        const result = this.coreGlue.interop.servers().find((s) => s.windowId && s.windowId === windowId);\r\n        return {\r\n            application: result === null || result === void 0 ? void 0 : result.application,\r\n            applicationName: result === null || result === void 0 ? void 0 : result.applicationName,\r\n            peerId: result === null || result === void 0 ? void 0 : result.peerId,\r\n            instance: result === null || result === void 0 ? void 0 : result.instance,\r\n            windowId: result === null || result === void 0 ? void 0 : result.windowId\r\n        };\r\n    }\r\n    send(domain, operation, operationData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (operation.dataDecoder) {\r\n                try {\r\n                    operation.dataDecoder.runWithException(operationData);\r\n                }\r\n                catch (error) {\r\n                    throw new Error(`Unexpected internal outgoing validation error: ${error.message}, for operation: ${operation.name} and input: ${JSON.stringify(error.input)}`);\r\n                }\r\n            }\r\n            let operationResult;\r\n            try {\r\n                operationResult = yield this.transmitMessage(domain, operation, operationData);\r\n                if (operation.resultDecoder) {\r\n                    operationResult = operation.resultDecoder.runWithException(operationResult);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.kind) {\r\n                    throw new Error(`Unexpected internal incoming validation error: ${error.message}, for operation: ${operation.name} and input: ${JSON.stringify(error.input)}`);\r\n                }\r\n                throw new Error(error.message);\r\n            }\r\n            return operationResult;\r\n        });\r\n    }\r\n    checkWaitMethod(name) {\r\n        return PromisePlus((resolve) => {\r\n            const hasMethod = this.coreGlue.interop.methods().some((method) => method.name === name);\r\n            if (hasMethod) {\r\n                return resolve();\r\n            }\r\n            const unSub = this.coreGlue.interop.methodAdded((method) => {\r\n                if (method.name === name) {\r\n                    unSub();\r\n                    resolve();\r\n                }\r\n            });\r\n        }, this.platformMethodTimeoutMs, `Cannot initiate Glue Web, because a system method's discovery timed out: ${name}`);\r\n    }\r\n    passMessageController(args, success, error) {\r\n        const decodeResult = libDomainDecoder.run(args.domain);\r\n        if (!decodeResult.ok) {\r\n            if (error) {\r\n                error(`Cannot execute this client control, because of domain validation error: ${JSON.stringify(decodeResult.error)}`);\r\n            }\r\n            return;\r\n        }\r\n        const domain = decodeResult.result;\r\n        this.controllers[domain]\r\n            .handleBridgeMessage(args)\r\n            .then((resolutionData) => {\r\n            if (success) {\r\n                success(resolutionData);\r\n            }\r\n        })\r\n            .catch((err) => {\r\n            if (error) {\r\n                error(err);\r\n            }\r\n            console.warn(err);\r\n        });\r\n    }\r\n    transmitMessage(domain, operation, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const messageData = { domain, data, operation: operation.name };\r\n            let invocationResult;\r\n            const baseErrorMessage = `Internal Platform Communication Error. Attempted operation: ${JSON.stringify(operation.name)} with data: ${JSON.stringify(data)}. `;\r\n            try {\r\n                invocationResult = yield this.coreGlue.interop.invoke(GlueWebPlatformControlName, messageData);\r\n                if (!invocationResult) {\r\n                    throw new Error(\"Received unsupported result from the platform - empty result\");\r\n                }\r\n                if (!Array.isArray(invocationResult.all_return_values) || invocationResult.all_return_values.length === 0) {\r\n                    throw new Error(\"Received unsupported result from the platform - empty values collection\");\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error && error.all_errors && error.all_errors.length) {\r\n                    const invocationErrorMessage = error.all_errors[0].message;\r\n                    throw new Error(`${baseErrorMessage} -> Inner message: ${invocationErrorMessage}`);\r\n                }\r\n                throw new Error(`${baseErrorMessage} -> Inner message: ${error.message}`);\r\n            }\r\n            return invocationResult.all_return_values[0].returned;\r\n        });\r\n    }\r\n}\n\nconst operations$1 = {\r\n    appHello: { name: \"appHello\", dataDecoder: windowHelloDecoder, resultDecoder: appHelloSuccessDecoder },\r\n    applicationAdded: { name: \"applicationAdded\", dataDecoder: baseApplicationDataDecoder },\r\n    applicationRemoved: { name: \"applicationRemoved\", dataDecoder: baseApplicationDataDecoder },\r\n    applicationChanged: { name: \"applicationChanged\", dataDecoder: baseApplicationDataDecoder },\r\n    instanceStarted: { name: \"instanceStarted\", dataDecoder: instanceDataDecoder },\r\n    instanceStopped: { name: \"instanceStopped\", dataDecoder: instanceDataDecoder },\r\n    applicationStart: { name: \"applicationStart\", dataDecoder: applicationStartConfigDecoder, resultDecoder: instanceDataDecoder },\r\n    instanceStop: { name: \"instanceStop\", dataDecoder: basicInstanceDataDecoder },\r\n    import: { name: \"import\" },\r\n    remove: { name: \"remove\", dataDecoder: appRemoveConfigDecoder },\r\n    export: { name: \"export\", resultDecoder: appsExportOperationDecoder },\r\n    clear: { name: \"clear\" }\r\n};\n\nclass AppManagerController {\r\n    constructor() {\r\n        this.registry = lib();\r\n        this.applications = [];\r\n        this.instances = [];\r\n    }\r\n    start(coreGlue, ioc) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"appManger.controller.web\");\r\n            this.logger.trace(\"starting the web appManager controller\");\r\n            this.publicWindowId = coreGlue.connection.transport.publicWindowId;\r\n            this.actualWindowId = coreGlue.interop.instance.windowId;\r\n            this.addOperationsExecutors();\r\n            this.ioc = ioc;\r\n            this.bridge = ioc.bridge;\r\n            this.platformRegistration = this.registerWithPlatform();\r\n            yield this.platformRegistration;\r\n            this.logger.trace(\"registration with the platform successful, attaching the appManager property to glue and returning\");\r\n            const api = this.toApi();\r\n            coreGlue.appManager = api;\r\n        });\r\n    }\r\n    handleBridgeMessage(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.platformRegistration;\r\n            const operationName = appManagerOperationTypesDecoder.runWithException(args.operation);\r\n            const operation = operations$1[operationName];\r\n            if (!operation.execute) {\r\n                return;\r\n            }\r\n            let operationData = args.data;\r\n            if (operation.dataDecoder) {\r\n                operationData = operation.dataDecoder.runWithException(args.data);\r\n            }\r\n            return yield operation.execute(operationData);\r\n        });\r\n    }\r\n    onInstanceStarted(callback) {\r\n        return this.registry.add(\"instance-started\", callback, this.instances);\r\n    }\r\n    onInstanceStopped(callback) {\r\n        return this.registry.add(\"instance-stopped\", callback);\r\n    }\r\n    startApplication(appName, context, options) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const startOptions = {\r\n                name: appName,\r\n                waitForAGMReady: (_a = options === null || options === void 0 ? void 0 : options.waitForAGMReady) !== null && _a !== void 0 ? _a : true,\r\n                context,\r\n                top: options === null || options === void 0 ? void 0 : options.top,\r\n                left: options === null || options === void 0 ? void 0 : options.left,\r\n                width: options === null || options === void 0 ? void 0 : options.width,\r\n                height: options === null || options === void 0 ? void 0 : options.height,\r\n                relativeTo: options === null || options === void 0 ? void 0 : options.relativeTo,\r\n                relativeDirection: options === null || options === void 0 ? void 0 : options.relativeDirection,\r\n                id: (_b = options) === null || _b === void 0 ? void 0 : _b.reuseId\r\n            };\r\n            const openResult = yield this.bridge.send(\"appManager\", operations$1.applicationStart, startOptions);\r\n            const app = this.applications.find((a) => a.name === openResult.applicationName);\r\n            return this.ioc.buildInstance(openResult, app);\r\n        });\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            myInstance: this.me,\r\n            inMemory: {\r\n                import: this.import.bind(this),\r\n                remove: this.remove.bind(this),\r\n                export: this.export.bind(this),\r\n                clear: this.clear.bind(this)\r\n            },\r\n            application: this.getApplication.bind(this),\r\n            applications: this.getApplications.bind(this),\r\n            instances: this.getInstances.bind(this),\r\n            onAppAdded: this.onAppAdded.bind(this),\r\n            onAppChanged: this.onAppChanged.bind(this),\r\n            onAppRemoved: this.onAppRemoved.bind(this),\r\n            onInstanceStarted: this.onInstanceStarted.bind(this),\r\n            onInstanceStopped: this.onInstanceStopped.bind(this)\r\n        };\r\n        return Object.freeze(api);\r\n    }\r\n    addOperationsExecutors() {\r\n        operations$1.applicationAdded.execute = this.handleApplicationAddedMessage.bind(this);\r\n        operations$1.applicationRemoved.execute = this.handleApplicationRemovedMessage.bind(this);\r\n        operations$1.applicationChanged.execute = this.handleApplicationChangedMessage.bind(this);\r\n        operations$1.instanceStarted.execute = this.handleInstanceStartedMessage.bind(this);\r\n        operations$1.instanceStopped.execute = this.handleInstanceStoppedMessage.bind(this);\r\n    }\r\n    onAppAdded(callback) {\r\n        return this.registry.add(\"application-added\", callback, this.applications);\r\n    }\r\n    onAppRemoved(callback) {\r\n        return this.registry.add(\"application-removed\", callback);\r\n    }\r\n    onAppChanged(callback) {\r\n        return this.registry.add(\"application-changed\", callback);\r\n    }\r\n    handleApplicationAddedMessage(appData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.applications.some((app) => app.name === appData.name)) {\r\n                return;\r\n            }\r\n            const app = yield this.ioc.buildApplication(appData, []);\r\n            const instances = this.instances.filter((instance) => instance.application.name === app.name);\r\n            app.instances.push(...instances);\r\n            this.applications.push(app);\r\n            this.registry.execute(\"application-added\", app);\r\n        });\r\n    }\r\n    handleApplicationRemovedMessage(appData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const appIndex = this.applications.findIndex((app) => app.name === appData.name);\r\n            if (appIndex < 0) {\r\n                return;\r\n            }\r\n            const app = this.applications[appIndex];\r\n            this.applications.splice(appIndex, 1);\r\n            this.registry.execute(\"application-removed\", app);\r\n        });\r\n    }\r\n    handleApplicationChangedMessage(appData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const app = this.applications.find((app) => app.name === appData.name);\r\n            if (!app) {\r\n                return this.handleApplicationAddedMessage(appData);\r\n            }\r\n            app.title = appData.title;\r\n            app.version = appData.version;\r\n            app.icon = appData.icon;\r\n            app.caption = appData.caption;\r\n            app.userProperties = appData.userProperties;\r\n            this.registry.execute(\"application-changed\", app);\r\n        });\r\n    }\r\n    handleInstanceStartedMessage(instanceData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.instances.some((instance) => instance.id === instanceData.id)) {\r\n                return;\r\n            }\r\n            const application = this.applications.find((app) => app.name === instanceData.applicationName);\r\n            if (!application) {\r\n                throw new Error(`Cannot add instance: ${instanceData.id}, because there is no application definition associated with it`);\r\n            }\r\n            const instance = this.ioc.buildInstance(instanceData, application);\r\n            this.instances.push(instance);\r\n            application.instances.push(instance);\r\n            this.registry.execute(\"instance-started\", instance);\r\n        });\r\n    }\r\n    handleInstanceStoppedMessage(instanceData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const instance = this.instances.find((i) => i.id === instanceData.id);\r\n            if (instance) {\r\n                const instIdx = this.instances.findIndex((inst) => inst.id === instanceData.id);\r\n                this.instances.splice(instIdx, 1);\r\n            }\r\n            const application = this.applications.find((app) => app.instances.some((inst) => inst.id === instanceData.id));\r\n            if (application) {\r\n                const instIdxApps = application.instances.findIndex((inst) => inst.id === instanceData.id);\r\n                application.instances.splice(instIdxApps, 1);\r\n            }\r\n            if (!instance) {\r\n                return;\r\n            }\r\n            this.registry.execute(\"instance-stopped\", instance);\r\n        });\r\n    }\r\n    import(definitions, mode = \"replace\") {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            importModeDecoder.runWithException(mode);\r\n            if (!Array.isArray(definitions)) {\r\n                throw new Error(\"Import must be called with an array of definitions\");\r\n            }\r\n            const parseResult = definitions.reduce((soFar, definition) => {\r\n                const decodeResult = allApplicationDefinitionsDecoder.run(definition);\r\n                if (!decodeResult.ok) {\r\n                    soFar.invalid.push({ app: definition === null || definition === void 0 ? void 0 : definition.name, error: JSON.stringify(decodeResult.error) });\r\n                }\r\n                else {\r\n                    soFar.valid.push(definition);\r\n                }\r\n                return soFar;\r\n            }, { valid: [], invalid: [] });\r\n            yield this.bridge.send(\"appManager\", operations$1.import, { definitions: parseResult.valid, mode });\r\n            return {\r\n                imported: parseResult.valid.map((valid) => valid.name),\r\n                errors: parseResult.invalid\r\n            };\r\n        });\r\n    }\r\n    remove(name) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            nonEmptyStringDecoder.runWithException(name);\r\n            yield this.bridge.send(\"appManager\", operations$1.remove, { name });\r\n        });\r\n    }\r\n    clear() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.bridge.send(\"appManager\", operations$1.clear, undefined);\r\n        });\r\n    }\r\n    export() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield this.bridge.send(\"appManager\", operations$1.export, undefined);\r\n            return response.definitions;\r\n        });\r\n    }\r\n    getApplication(name) {\r\n        const verifiedName = nonEmptyStringDecoder.runWithException(name);\r\n        return this.applications.find((app) => app.name === verifiedName);\r\n    }\r\n    getApplications() {\r\n        return this.applications.slice();\r\n    }\r\n    getInstances() {\r\n        return this.instances.slice();\r\n    }\r\n    registerWithPlatform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this.bridge.send(\"appManager\", operations$1.appHello, { windowId: this.actualWindowId });\r\n            this.logger.trace(\"the platform responded to the hello message with a full list of apps\");\r\n            this.applications = yield Promise.all(result.apps.map((app) => this.ioc.buildApplication(app, app.instances)));\r\n            this.instances = this.applications.reduce((instancesSoFar, app) => {\r\n                instancesSoFar.push(...app.instances);\r\n                return instancesSoFar;\r\n            }, []);\r\n            this.me = this.findMyInstance();\r\n            this.logger.trace(`all applications were parsed and saved. I am ${this.me ? \"NOT a\" : \"a\"} valid instance`);\r\n        });\r\n    }\r\n    findMyInstance() {\r\n        for (const app of this.applications) {\r\n            const foundInstance = app.instances.find((instance) => instance.id === this.publicWindowId);\r\n            if (foundInstance) {\r\n                return foundInstance;\r\n            }\r\n        }\r\n    }\r\n}\n\nclass InstanceModel {\r\n    constructor(data, bridge, application) {\r\n        this.data = data;\r\n        this.bridge = bridge;\r\n        this.application = application;\r\n        this.myCtxKey = `___instance___${this.data.id}`;\r\n    }\r\n    toApi() {\r\n        const agm = this.bridge.getInteropInstance(this.data.id);\r\n        const api = {\r\n            id: this.data.id,\r\n            agm,\r\n            application: this.application,\r\n            stop: this.stop.bind(this),\r\n            getContext: this.getContext.bind(this)\r\n        };\r\n        this.me = Object.freeze(api);\r\n        return this.me;\r\n    }\r\n    getContext() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.bridge.contextLib.get(this.myCtxKey);\r\n        });\r\n    }\r\n    stop() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.bridge.send(\"appManager\", operations$1.instanceStop, { id: this.data.id });\r\n        });\r\n    }\r\n}\n\nclass ApplicationModel {\r\n    constructor(data, instances, controller) {\r\n        this.data = data;\r\n        this.instances = instances;\r\n        this.controller = controller;\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            name: this.data.name,\r\n            title: this.data.title,\r\n            version: this.data.version,\r\n            icon: this.data.icon,\r\n            caption: this.data.caption,\r\n            userProperties: this.data.userProperties,\r\n            instances: this.instances,\r\n            start: this.start.bind(this),\r\n            onInstanceStarted: this.onInstanceStarted.bind(this),\r\n            onInstanceStopped: this.onInstanceStopped.bind(this)\r\n        };\r\n        this.me = api;\r\n        return this.me;\r\n    }\r\n    onInstanceStarted(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"OnInstanceStarted requires a single argument of type function\");\r\n        }\r\n        this.controller.onInstanceStarted((instance) => {\r\n            if (instance.application.name === this.data.name) {\r\n                callback(instance);\r\n            }\r\n        });\r\n    }\r\n    onInstanceStopped(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"OnInstanceStarted requires a single argument of type function\");\r\n        }\r\n        this.controller.onInstanceStopped((instance) => {\r\n            if (instance.application.name === this.data.name) {\r\n                callback(instance);\r\n            }\r\n        });\r\n    }\r\n    start(context, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.controller.startApplication(this.data.name, context, options);\r\n        });\r\n    }\r\n}\n\nconst operations$2 = {\r\n    layoutAdded: { name: \"layoutAdded\", dataDecoder: glueLayoutDecoder },\r\n    layoutChanged: { name: \"layoutChanged\", dataDecoder: glueLayoutDecoder },\r\n    layoutRemoved: { name: \"layoutRemoved\", dataDecoder: glueLayoutDecoder },\r\n    get: { name: \"get\", dataDecoder: simpleLayoutConfigDecoder, resultDecoder: optionalSimpleLayoutResult },\r\n    getAll: { name: \"getAll\", dataDecoder: getAllLayoutsConfigDecoder, resultDecoder: allLayoutsSummariesResultDecoder },\r\n    export: { name: \"export\", dataDecoder: getAllLayoutsConfigDecoder, resultDecoder: allLayoutsFullConfigDecoder },\r\n    import: { name: \"import\", dataDecoder: layoutsImportConfigDecoder },\r\n    remove: { name: \"remove\", dataDecoder: simpleLayoutConfigDecoder }\r\n};\n\nclass LayoutsController {\r\n    constructor() {\r\n        this.registry = lib();\r\n    }\r\n    start(coreGlue, ioc) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"layouts.controller.web\");\r\n            this.logger.trace(\"starting the web layouts controller\");\r\n            this.bridge = ioc.bridge;\r\n            this.addOperationsExecutors();\r\n            const api = this.toApi();\r\n            this.logger.trace(\"no need for platform registration, attaching the layouts property to glue and returning\");\r\n            coreGlue.layouts = api;\r\n        });\r\n    }\r\n    handleBridgeMessage(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const operationName = layoutsOperationTypesDecoder.runWithException(args.operation);\r\n            const operation = operations$2[operationName];\r\n            if (!operation.execute) {\r\n                return;\r\n            }\r\n            let operationData = args.data;\r\n            if (operation.dataDecoder) {\r\n                operationData = operation.dataDecoder.runWithException(args.data);\r\n            }\r\n            return yield operation.execute(operationData);\r\n        });\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            get: this.get.bind(this),\r\n            getAll: this.getAll.bind(this),\r\n            export: this.export.bind(this),\r\n            import: this.import.bind(this),\r\n            save: this.save.bind(this),\r\n            restore: this.restore.bind(this),\r\n            remove: this.remove.bind(this),\r\n            onAdded: this.onAdded.bind(this),\r\n            onChanged: this.onChanged.bind(this),\r\n            onRemoved: this.onRemoved.bind(this)\r\n        };\r\n        return Object.freeze(api);\r\n    }\r\n    addOperationsExecutors() {\r\n        operations$2.layoutAdded.execute = this.handleOnAdded.bind(this);\r\n        operations$2.layoutChanged.execute = this.handleOnChanged.bind(this);\r\n        operations$2.layoutRemoved.execute = this.handleOnRemoved.bind(this);\r\n    }\r\n    get(name, type) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            nonEmptyStringDecoder.runWithException(name);\r\n            layoutTypeDecoder.runWithException(type);\r\n            const result = yield this.bridge.send(\"layouts\", operations$2.get, { name, type });\r\n            return result.layout;\r\n        });\r\n    }\r\n    getAll(type) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            layoutTypeDecoder.runWithException(type);\r\n            const result = yield this.bridge.send(\"layouts\", operations$2.getAll, { type });\r\n            return result.summaries;\r\n        });\r\n    }\r\n    export(type) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (type) {\r\n                layoutTypeDecoder.runWithException(type);\r\n            }\r\n            const result = yield this.bridge.send(\"layouts\", operations$2.export, { type: \"Workspace\" });\r\n            return result.layouts;\r\n        });\r\n    }\r\n    import(layouts, mode = \"replace\") {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            importModeDecoder.runWithException(mode);\r\n            if (!Array.isArray(layouts)) {\r\n                throw new Error(\"Import must be called with an array of layouts\");\r\n            }\r\n            const parseResult = layouts.reduce((soFar, layout) => {\r\n                const decodeResult = glueLayoutDecoder.run(layout);\r\n                if (decodeResult.ok) {\r\n                    soFar.valid.push(layout);\r\n                }\r\n                else {\r\n                    this.logger.warn(`A layout with name: ${layout.name} was not imported, because of error: ${JSON.stringify(decodeResult.error)}`);\r\n                }\r\n                return soFar;\r\n            }, { valid: [] });\r\n            yield this.bridge.send(\"layouts\", operations$2.import, { layouts: parseResult.valid, mode });\r\n        });\r\n    }\r\n    save(layout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            newLayoutOptionsDecoder.runWithException(layout);\r\n            throw new Error(\"Save is not supported in Core at the moment\");\r\n        });\r\n    }\r\n    restore(options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            restoreOptionsDecoder.runWithException(options);\r\n            throw new Error(\"Restore is not supported in Core at the moment\");\r\n        });\r\n    }\r\n    remove(type, name) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            layoutTypeDecoder.runWithException(type);\r\n            nonEmptyStringDecoder.runWithException(name);\r\n            yield this.bridge.send(\"layouts\", operations$2.remove, { type, name });\r\n        });\r\n    }\r\n    onAdded(callback) {\r\n        return this.registry.add(operations$2.layoutAdded.name, callback);\r\n    }\r\n    onChanged(callback) {\r\n        return this.registry.add(operations$2.layoutChanged.name, callback);\r\n    }\r\n    onRemoved(callback) {\r\n        return this.registry.add(operations$2.layoutRemoved.name, callback);\r\n    }\r\n    handleOnAdded(layout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.registry.execute(operations$2.layoutAdded.name, layout);\r\n        });\r\n    }\r\n    handleOnChanged(layout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.registry.execute(operations$2.layoutChanged.name, layout);\r\n        });\r\n    }\r\n    handleOnRemoved(layout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.registry.execute(operations$2.layoutRemoved.name, layout);\r\n        });\r\n    }\r\n}\n\nclass NotificationsController {\r\n    start(coreGlue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"notifications.controller.web\");\r\n            this.logger.trace(\"starting the web notifications controller\");\r\n            this.interop = coreGlue.interop;\r\n            const api = this.toApi();\r\n            coreGlue.notifications = api;\r\n            this.logger.trace(\"notifications are ready\");\r\n        });\r\n    }\r\n    handleBridgeMessage() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n        });\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            raise: this.raise.bind(this)\r\n        };\r\n        return Object.freeze(api);\r\n    }\r\n    raise(options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!(\"Notification\" in window)) {\r\n                throw new Error(\"this browser does not support desktop notification\");\r\n            }\r\n            let permissionPromise;\r\n            if (Notification.permission === \"granted\") {\r\n                permissionPromise = Promise.resolve(\"granted\");\r\n            }\r\n            else if (Notification.permission === \"denied\") {\r\n                permissionPromise = Promise.reject(\"no permissions from user\");\r\n            }\r\n            else {\r\n                permissionPromise = Notification.requestPermission();\r\n            }\r\n            yield permissionPromise;\r\n            const notification = this.raiseUsingWebApi(options);\r\n            if (options.clickInterop) {\r\n                const interopOptions = options.clickInterop;\r\n                notification.onclick = () => {\r\n                    var _a, _b;\r\n                    this.interop.invoke(interopOptions.method, (_a = interopOptions === null || interopOptions === void 0 ? void 0 : interopOptions.arguments) !== null && _a !== void 0 ? _a : {}, (_b = interopOptions === null || interopOptions === void 0 ? void 0 : interopOptions.target) !== null && _b !== void 0 ? _b : \"best\");\r\n                };\r\n            }\r\n            return notification;\r\n        });\r\n    }\r\n    raiseUsingWebApi(options) {\r\n        return new Notification(options.title);\r\n    }\r\n}\n\nconst operations$3 = {\r\n    getIntents: { name: \"getIntents\", resultDecoder: wrappedIntentsDecoder },\r\n    findIntent: { name: \"findIntent\", dataDecoder: wrappedIntentFilterDecoder, resultDecoder: wrappedIntentsDecoder },\r\n    raiseIntent: { name: \"raiseIntent\", dataDecoder: intentRequestDecoder, resultDecoder: intentResultDecoder }\r\n};\n\nclass IntentsController {\r\n    constructor() {\r\n        this.myIntents = new Set();\r\n        this.GlueWebIntentsPrefix = \"Tick42.FDC3.Intents.\";\r\n    }\r\n    start(coreGlue, ioc) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"intents.controller.web\");\r\n            this.logger.trace(\"starting the web intents controller\");\r\n            this.bridge = ioc.bridge;\r\n            this.interop = coreGlue.interop;\r\n            const api = this.toApi();\r\n            this.logger.trace(\"no need for platform registration, attaching the intents property to glue and returning\");\r\n            coreGlue.intents = api;\r\n        });\r\n    }\r\n    handleBridgeMessage(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const operationName = intentsOperationTypesDecoder.runWithException(args.operation);\r\n            const operation = operations$3[operationName];\r\n            if (!operation.execute) {\r\n                return;\r\n            }\r\n            let operationData = args.data;\r\n            if (operation.dataDecoder) {\r\n                operationData = operation.dataDecoder.runWithException(args.data);\r\n            }\r\n            return yield operation.execute(operationData);\r\n        });\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            raise: this.raise.bind(this),\r\n            all: this.all.bind(this),\r\n            addIntentListener: this.addIntentListener.bind(this),\r\n            find: this.find.bind(this)\r\n        };\r\n        return Object.freeze(api);\r\n    }\r\n    raise(request) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const requestObj = raiseRequestDecoder.runWithException(request);\r\n            let data;\r\n            if (typeof requestObj === \"string\") {\r\n                data = {\r\n                    intent: requestObj\r\n                };\r\n            }\r\n            else {\r\n                data = requestObj;\r\n            }\r\n            const result = yield this.bridge.send(\"intents\", operations$3.raiseIntent, data);\r\n            return result;\r\n        });\r\n    }\r\n    all() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this.bridge.send(\"intents\", operations$3.getIntents, undefined);\r\n            return result.intents;\r\n        });\r\n    }\r\n    addIntentListener(intent, handler) {\r\n        addIntentListenerIntentDecoder.runWithException(intent);\r\n        if (typeof handler !== \"function\") {\r\n            throw new Error(\"Cannot add intent listener, because the provided handler is not a function!\");\r\n        }\r\n        let subscribed = true;\r\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\r\n        const methodName = `${this.GlueWebIntentsPrefix}${intentName}`;\r\n        const alreadyRegistered = this.myIntents.has(intentName);\r\n        if (alreadyRegistered) {\r\n            throw new Error(`Intent listener for intent ${intentName} already registered!`);\r\n        }\r\n        this.myIntents.add(intentName);\r\n        const result = {\r\n            unsubscribe: () => {\r\n                subscribed = false;\r\n                try {\r\n                    this.interop.unregister(methodName);\r\n                    this.myIntents.delete(intentName);\r\n                }\r\n                catch (error) {\r\n                    this.logger.trace(`Unsubscribed intent listener, but ${methodName} unregistration failed!`);\r\n                }\r\n            }\r\n        };\r\n        const flags = typeof intent === \"string\" ? { intent } : intent;\r\n        this.interop.register({ name: methodName, flags }, (args) => {\r\n            if (subscribed) {\r\n                return handler(args);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    find(intentFilter) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let data = undefined;\r\n            if (typeof intentFilter !== \"undefined\") {\r\n                const intentFilterObj = findFilterDecoder.runWithException(intentFilter);\r\n                if (typeof intentFilterObj === \"string\") {\r\n                    data = {\r\n                        filter: {\r\n                            name: intentFilterObj\r\n                        }\r\n                    };\r\n                }\r\n                else if (typeof intentFilterObj === \"object\") {\r\n                    data = {\r\n                        filter: intentFilterObj\r\n                    };\r\n                }\r\n            }\r\n            const result = yield this.bridge.send(\"intents\", operations$3.findIntent, data);\r\n            return result.intents;\r\n        });\r\n    }\r\n}\n\nclass ChannelsController {\r\n    constructor() {\r\n        this.registry = lib();\r\n        this.GlueWebChannelsPrefix = \"___channel___\";\r\n        this.SubsKey = \"subs\";\r\n        this.ChangedKey = \"changed\";\r\n    }\r\n    start(coreGlue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.logger = coreGlue.logger.subLogger(\"channels.controller.web\");\r\n            this.logger.trace(\"starting the web channels controller\");\r\n            this.contexts = coreGlue.contexts;\r\n            this.logger.trace(\"no need for platform registration, attaching the channels property to glue and returning\");\r\n            const api = this.toApi();\r\n            coreGlue.channels = api;\r\n        });\r\n    }\r\n    handleBridgeMessage() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n        });\r\n    }\r\n    toApi() {\r\n        const api = {\r\n            subscribe: this.subscribe.bind(this),\r\n            subscribeFor: this.subscribeFor.bind(this),\r\n            publish: this.publish.bind(this),\r\n            all: this.all.bind(this),\r\n            list: this.list.bind(this),\r\n            get: this.get.bind(this),\r\n            join: this.join.bind(this),\r\n            leave: this.leave.bind(this),\r\n            current: this.current.bind(this),\r\n            my: this.my.bind(this),\r\n            changed: this.changed.bind(this),\r\n            onChanged: this.onChanged.bind(this),\r\n            add: this.add.bind(this)\r\n        };\r\n        return Object.freeze(api);\r\n    }\r\n    createContextName(channelName) {\r\n        return `${this.GlueWebChannelsPrefix}${channelName}`;\r\n    }\r\n    getAllChannelNames() {\r\n        const contextNames = this.contexts.all();\r\n        const channelContextNames = contextNames.filter((contextName) => contextName.startsWith(this.GlueWebChannelsPrefix));\r\n        const channelNames = channelContextNames.map((channelContextName) => channelContextName.replace(this.GlueWebChannelsPrefix, \"\"));\r\n        return channelNames;\r\n    }\r\n    unsubscribe() {\r\n        if (this.unsubscribeFunc) {\r\n            this.unsubscribeFunc();\r\n            this.unsubscribeFunc = undefined;\r\n        }\r\n    }\r\n    switchToChannel(name) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.unsubscribe();\r\n            this.currentChannelName = name;\r\n            if (typeof name !== \"undefined\") {\r\n                const contextName = this.createContextName(name);\r\n                this.unsubscribeFunc = yield this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\r\n                    this.registry.execute(this.SubsKey, context.data, context, extraData === null || extraData === void 0 ? void 0 : extraData.updaterId);\r\n                });\r\n            }\r\n            this.registry.execute(this.ChangedKey, name);\r\n        });\r\n    }\r\n    updateData(name, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const contextName = this.createContextName(name);\r\n            if (this.contexts.setPathSupported) {\r\n                const pathValues = Object.keys(data).map((key) => {\r\n                    return {\r\n                        path: `data.${key}`,\r\n                        value: data[key]\r\n                    };\r\n                });\r\n                yield this.contexts.setPaths(contextName, pathValues);\r\n            }\r\n            else {\r\n                yield this.contexts.update(contextName, { data });\r\n            }\r\n        });\r\n    }\r\n    subscribe(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Cannot subscribe to channels, because the provided callback is not a function!\");\r\n        }\r\n        return this.registry.add(this.SubsKey, callback);\r\n    }\r\n    subscribeFor(name, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const channelNames = this.getAllChannelNames();\r\n            channelNameDecoder(channelNames).runWithException(name);\r\n            if (typeof callback !== \"function\") {\r\n                throw new Error(`Cannot subscribe to channel ${name}, because the provided callback is not a function!`);\r\n            }\r\n            const contextName = this.createContextName(name);\r\n            return this.contexts.subscribe(contextName, (context, _, __, ___, extraData) => {\r\n                callback(context.data, context, extraData === null || extraData === void 0 ? void 0 : extraData.updaterId);\r\n            });\r\n        });\r\n    }\r\n    publish(data, name) {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Cannot publish to channel, because the provided data is not an object!\");\r\n        }\r\n        if (typeof name !== \"undefined\") {\r\n            const channelNames = this.getAllChannelNames();\r\n            channelNameDecoder(channelNames).runWithException(name);\r\n            return this.updateData(name, data);\r\n        }\r\n        if (typeof this.currentChannelName === \"undefined\") {\r\n            throw new Error(\"Cannot publish to channel, because not joined to a channel!\");\r\n        }\r\n        return this.updateData(this.currentChannelName, data);\r\n    }\r\n    all() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const channelNames = this.getAllChannelNames();\r\n            return channelNames;\r\n        });\r\n    }\r\n    list() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const channelNames = this.getAllChannelNames();\r\n            const channelContexts = yield Promise.all(channelNames.map((channelName) => this.get(channelName)));\r\n            return channelContexts;\r\n        });\r\n    }\r\n    get(name) {\r\n        const channelNames = this.getAllChannelNames();\r\n        channelNameDecoder(channelNames).runWithException(name);\r\n        const contextName = this.createContextName(name);\r\n        return this.contexts.get(contextName);\r\n    }\r\n    join(name) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const channelNames = this.getAllChannelNames();\r\n            channelNameDecoder(channelNames).runWithException(name);\r\n            yield this.switchToChannel(name);\r\n        });\r\n    }\r\n    leave() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.switchToChannel();\r\n        });\r\n    }\r\n    current() {\r\n        return this.currentChannelName;\r\n    }\r\n    my() {\r\n        return this.current();\r\n    }\r\n    changed(callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Cannot subscribe to channel changed, because the provided callback is not a function!\");\r\n        }\r\n        return this.registry.add(this.ChangedKey, callback);\r\n    }\r\n    onChanged(callback) {\r\n        return this.changed(callback);\r\n    }\r\n    add(info) {\r\n        throw new Error(\"Method `add()` isn't implemented.\");\r\n    }\r\n}\n\nclass IoC {\r\n    constructor(coreGlue) {\r\n        this.coreGlue = coreGlue;\r\n        this.controllers = {\r\n            windows: this.windowsController,\r\n            appManager: this.appManagerController,\r\n            layouts: this.layoutsController,\r\n            notifications: this.notificationsController,\r\n            intents: this.intentsController,\r\n            channels: this.channelsController\r\n        };\r\n    }\r\n    get windowsController() {\r\n        if (!this._windowsControllerInstance) {\r\n            this._windowsControllerInstance = new WindowsController();\r\n        }\r\n        return this._windowsControllerInstance;\r\n    }\r\n    get appManagerController() {\r\n        if (!this._appManagerControllerInstance) {\r\n            this._appManagerControllerInstance = new AppManagerController();\r\n        }\r\n        return this._appManagerControllerInstance;\r\n    }\r\n    get layoutsController() {\r\n        if (!this._layoutsControllerInstance) {\r\n            this._layoutsControllerInstance = new LayoutsController();\r\n        }\r\n        return this._layoutsControllerInstance;\r\n    }\r\n    get notificationsController() {\r\n        if (!this._notificationsControllerInstance) {\r\n            this._notificationsControllerInstance = new NotificationsController();\r\n        }\r\n        return this._notificationsControllerInstance;\r\n    }\r\n    get intentsController() {\r\n        if (!this._intentsControllerInstance) {\r\n            this._intentsControllerInstance = new IntentsController();\r\n        }\r\n        return this._intentsControllerInstance;\r\n    }\r\n    get channelsController() {\r\n        if (!this._channelsControllerInstance) {\r\n            this._channelsControllerInstance = new ChannelsController();\r\n        }\r\n        return this._channelsControllerInstance;\r\n    }\r\n    get bridge() {\r\n        if (!this._bridgeInstance) {\r\n            this._bridgeInstance = new GlueBridge(this.coreGlue);\r\n        }\r\n        return this._bridgeInstance;\r\n    }\r\n    buildWebWindow(id, name) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const model = new WebWindowModel(id, name, this.bridge);\r\n            const api = yield model.toApi();\r\n            return { id, model, api };\r\n        });\r\n    }\r\n    buildApplication(app, applicationInstances) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const application = (new ApplicationModel(app, [], this.appManagerController)).toApi();\r\n            const instances = applicationInstances.map((instanceData) => this.buildInstance(instanceData, application));\r\n            application.instances.push(...instances);\r\n            return application;\r\n        });\r\n    }\r\n    buildInstance(instanceData, app) {\r\n        return (new InstanceModel(instanceData, this.bridge, app)).toApi();\r\n    }\r\n}\n\nvar version = \"2.0.6\";\n\nconst createFactoryFunction = (coreFactoryFunction) => {\r\n    return (userConfig) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const config = parseConfig(userConfig);\r\n        if (window.glue42gd) {\r\n            return enterprise(config);\r\n        }\r\n        checkSingleton();\r\n        const glue = yield PromiseWrap(() => coreFactoryFunction(config, { version }), 30000, \"Glue Web initialization timed out, because core didn't resolve\");\r\n        const logger = glue.logger.subLogger(\"web.main.controller\");\r\n        const ioc = new IoC(glue);\r\n        yield ioc.bridge.start(ioc.controllers);\r\n        logger.trace(\"the bridge has been started, initializing all controllers\");\r\n        yield Promise.all(Object.values(ioc.controllers).map((controller) => controller.start(glue, ioc)));\r\n        logger.trace(\"all controllers reported started, starting all additional libraries\");\r\n        yield Promise.all(config.libraries.map((lib) => lib(glue, config)));\r\n        logger.trace(\"all libraries were started, glue is ready, returning it\");\r\n        return glue;\r\n    });\r\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign$1 = function() {\r\n    __assign$1 = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$1.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter$1(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar MetricTypes = {\r\n    STRING: 1,\r\n    NUMBER: 2,\r\n    TIMESTAMP: 3,\r\n    OBJECT: 4\r\n};\n\nfunction getMetricTypeByValue(metric) {\r\n    if (metric.type === MetricTypes.TIMESTAMP) {\r\n        return \"timestamp\";\r\n    }\r\n    else if (metric.type === MetricTypes.NUMBER) {\r\n        return \"number\";\r\n    }\r\n    else if (metric.type === MetricTypes.STRING) {\r\n        return \"string\";\r\n    }\r\n    else if (metric.type === MetricTypes.OBJECT) {\r\n        return \"object\";\r\n    }\r\n    return \"unknown\";\r\n}\r\nfunction getTypeByValue(value) {\r\n    if (value.constructor === Date) {\r\n        return \"timestamp\";\r\n    }\r\n    else if (typeof value === \"number\") {\r\n        return \"number\";\r\n    }\r\n    else if (typeof value === \"string\") {\r\n        return \"string\";\r\n    }\r\n    else if (typeof value === \"object\") {\r\n        return \"object\";\r\n    }\r\n    else {\r\n        return \"string\";\r\n    }\r\n}\r\nfunction serializeMetric(metric) {\r\n    var serializedMetrics = {};\r\n    var type = getMetricTypeByValue(metric);\r\n    if (type === \"object\") {\r\n        var values = Object.keys(metric.value).reduce(function (memo, key) {\r\n            var innerType = getTypeByValue(metric.value[key]);\r\n            if (innerType === \"object\") {\r\n                var composite = defineNestedComposite(metric.value[key]);\r\n                memo[key] = {\r\n                    type: \"object\",\r\n                    description: \"\",\r\n                    context: {},\r\n                    composite: composite,\r\n                };\r\n            }\r\n            else {\r\n                memo[key] = {\r\n                    type: innerType,\r\n                    description: \"\",\r\n                    context: {},\r\n                };\r\n            }\r\n            return memo;\r\n        }, {});\r\n        serializedMetrics.composite = values;\r\n    }\r\n    serializedMetrics.name = normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name);\r\n    serializedMetrics.type = type;\r\n    serializedMetrics.description = metric.description;\r\n    serializedMetrics.context = {};\r\n    return serializedMetrics;\r\n}\r\nfunction defineNestedComposite(values) {\r\n    return Object.keys(values).reduce(function (memo, key) {\r\n        var type = getTypeByValue(values[key]);\r\n        if (type === \"object\") {\r\n            memo[key] = {\r\n                type: \"object\",\r\n                description: \"\",\r\n                context: {},\r\n                composite: defineNestedComposite(values[key]),\r\n            };\r\n        }\r\n        else {\r\n            memo[key] = {\r\n                type: type,\r\n                description: \"\",\r\n                context: {},\r\n            };\r\n        }\r\n        return memo;\r\n    }, {});\r\n}\r\nfunction normalizeMetricName(name) {\r\n    if (typeof name !== \"undefined\" && name.length > 0 && name[0] !== \"/\") {\r\n        return \"/\" + name;\r\n    }\r\n    else {\r\n        return name;\r\n    }\r\n}\r\nfunction getMetricValueByType(metric) {\r\n    var type = getMetricTypeByValue(metric);\r\n    if (type === \"timestamp\") {\r\n        return Date.now();\r\n    }\r\n    else {\r\n        return publishNestedComposite(metric.value);\r\n    }\r\n}\r\nfunction publishNestedComposite(values) {\r\n    if (typeof values !== \"object\") {\r\n        return values;\r\n    }\r\n    return Object.keys(values).reduce(function (memo, key) {\r\n        var value = values[key];\r\n        if (typeof value === \"object\" && value.constructor !== Date) {\r\n            memo[key] = publishNestedComposite(value);\r\n        }\r\n        else if (value.constructor === Date) {\r\n            memo[key] = new Date(value).getTime();\r\n        }\r\n        else if (value.constructor === Boolean) {\r\n            memo[key] = value.toString();\r\n        }\r\n        else {\r\n            memo[key] = value;\r\n        }\r\n        return memo;\r\n    }, {});\r\n}\r\nfunction flatten(arr) {\r\n    return arr.reduce(function (flat, toFlatten) {\r\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\r\n    }, []);\r\n}\r\nfunction getHighestState(arr) {\r\n    return arr.sort(function (a, b) {\r\n        if (!a.state) {\r\n            return 1;\r\n        }\r\n        if (!b.state) {\r\n            return -1;\r\n        }\r\n        return b.state - a.state;\r\n    })[0];\r\n}\r\nfunction aggregateDescription(arr) {\r\n    var msg = \"\";\r\n    arr.forEach(function (m, idx, a) {\r\n        var path = m.path.join(\".\");\r\n        if (idx === a.length - 1) {\r\n            msg += path + \".\" + m.name + \": \" + m.description;\r\n        }\r\n        else {\r\n            msg += path + \".\" + m.name + \": \" + m.description + \",\";\r\n        }\r\n    });\r\n    if (msg.length > 100) {\r\n        return msg.slice(0, 100) + \"...\";\r\n    }\r\n    else {\r\n        return msg;\r\n    }\r\n}\r\nfunction composeMsgForRootStateMetric(system) {\r\n    var aggregatedState = system.root.getAggregateState();\r\n    var merged = flatten(aggregatedState);\r\n    var highestState = getHighestState(merged);\r\n    var aggregateDesc = aggregateDescription(merged);\r\n    return {\r\n        description: aggregateDesc,\r\n        value: highestState.state,\r\n    };\r\n}\n\nfunction gw3 (connection, config) {\r\n    var _this = this;\r\n    if (!connection || typeof connection !== \"object\") {\r\n        throw new Error(\"Connection is required parameter\");\r\n    }\r\n    var joinPromise;\r\n    var session;\r\n    var init = function (repo) {\r\n        var resolveReadyPromise;\r\n        joinPromise = new Promise(function (resolve) {\r\n            resolveReadyPromise = resolve;\r\n        });\r\n        session = connection.domain(\"metrics\");\r\n        session.onJoined(function (reconnect) {\r\n            if (!reconnect && resolveReadyPromise) {\r\n                resolveReadyPromise();\r\n                resolveReadyPromise = undefined;\r\n            }\r\n            var rootStateMetric = {\r\n                name: \"/State\",\r\n                type: \"object\",\r\n                composite: {\r\n                    Description: {\r\n                        type: \"string\",\r\n                        description: \"\",\r\n                    },\r\n                    Value: {\r\n                        type: \"number\",\r\n                        description: \"\",\r\n                    },\r\n                },\r\n                description: \"System state\",\r\n                context: {},\r\n            };\r\n            var defineRootMetricsMsg = {\r\n                type: \"define\",\r\n                metrics: [rootStateMetric],\r\n            };\r\n            session.send(defineRootMetricsMsg);\r\n            if (reconnect) {\r\n                replayRepo(repo);\r\n            }\r\n        });\r\n        session.join({\r\n            system: config.system,\r\n            service: config.service,\r\n            instance: config.instance\r\n        });\r\n    };\r\n    var replayRepo = function (repo) {\r\n        replaySystem(repo.root);\r\n    };\r\n    var replaySystem = function (system) {\r\n        createSystem(system);\r\n        system.metrics.forEach(function (m) {\r\n            createMetric(m);\r\n        });\r\n        system.subSystems.forEach(function (ss) {\r\n            replaySystem(ss);\r\n        });\r\n    };\r\n    var createSystem = function (system) { return __awaiter$1(_this, void 0, void 0, function () {\r\n        var metric, createMetricsMsg;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (system.parent === undefined) {\r\n                        return [2];\r\n                    }\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    metric = {\r\n                        name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                        type: \"object\",\r\n                        composite: {\r\n                            Description: {\r\n                                type: \"string\",\r\n                                description: \"\",\r\n                            },\r\n                            Value: {\r\n                                type: \"number\",\r\n                                description: \"\",\r\n                            },\r\n                        },\r\n                        description: \"System state\",\r\n                        context: {},\r\n                    };\r\n                    createMetricsMsg = {\r\n                        type: \"define\",\r\n                        metrics: [metric],\r\n                    };\r\n                    session.send(createMetricsMsg);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateSystem = function (system, state) { return __awaiter$1(_this, void 0, void 0, function () {\r\n        var shadowedUpdateMetric, stateObj, rootMetric;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    shadowedUpdateMetric = {\r\n                        type: \"publish\",\r\n                        values: [{\r\n                                name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                                value: {\r\n                                    Description: state.description,\r\n                                    Value: state.state,\r\n                                },\r\n                                timestamp: Date.now(),\r\n                            }],\r\n                    };\r\n                    session.send(shadowedUpdateMetric);\r\n                    stateObj = composeMsgForRootStateMetric(system);\r\n                    rootMetric = {\r\n                        type: \"publish\",\r\n                        peer_id: connection.peerId,\r\n                        values: [{\r\n                                name: \"/State\",\r\n                                value: {\r\n                                    Description: stateObj.description,\r\n                                    Value: stateObj.value,\r\n                                },\r\n                                timestamp: Date.now(),\r\n                            }],\r\n                    };\r\n                    session.send(rootMetric);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var createMetric = function (metric) { return __awaiter$1(_this, void 0, void 0, function () {\r\n        var metricClone, m, createMetricsMsg;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    metricClone = cloneMetric(metric);\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    m = serializeMetric(metricClone);\r\n                    createMetricsMsg = {\r\n                        type: \"define\",\r\n                        metrics: [m],\r\n                    };\r\n                    session.send(createMetricsMsg);\r\n                    if (typeof metricClone.value !== \"undefined\") {\r\n                        updateMetricCore(metricClone);\r\n                    }\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateMetric = function (metric) { return __awaiter$1(_this, void 0, void 0, function () {\r\n        var metricClone;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    metricClone = cloneMetric(metric);\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    updateMetricCore(metricClone);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateMetricCore = function (metric) {\r\n        if (canUpdate()) {\r\n            var value = getMetricValueByType(metric);\r\n            var publishMetricsMsg = {\r\n                type: \"publish\",\r\n                values: [{\r\n                        name: normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name),\r\n                        value: value,\r\n                        timestamp: Date.now(),\r\n                    }],\r\n            };\r\n            return session.sendFireAndForget(publishMetricsMsg);\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    var cloneMetric = function (metric) {\r\n        var metricClone = __assign$1({}, metric);\r\n        if (typeof metric.value === \"object\" && metric.value !== null) {\r\n            metricClone.value = __assign$1({}, metric.value);\r\n        }\r\n        return metricClone;\r\n    };\r\n    var canUpdate = function () {\r\n        var _a;\r\n        try {\r\n            var func = (_a = config.canUpdateMetric) !== null && _a !== void 0 ? _a : (function () { return true; });\r\n            return func();\r\n        }\r\n        catch (_b) {\r\n            return true;\r\n        }\r\n    };\r\n    return {\r\n        init: init,\r\n        createSystem: createSystem,\r\n        updateSystem: updateSystem,\r\n        createMetric: createMetric,\r\n        updateMetric: updateMetric,\r\n    };\r\n}\n\nvar Helpers = {\r\n    validate: function (definition, parent, transport) {\r\n        if (definition === null || typeof definition !== \"object\") {\r\n            throw new Error(\"Missing definition\");\r\n        }\r\n        if (parent === null || typeof parent !== \"object\") {\r\n            throw new Error(\"Missing parent\");\r\n        }\r\n        if (transport === null || typeof transport !== \"object\") {\r\n            throw new Error(\"Missing transport\");\r\n        }\r\n    },\r\n};\n\nvar BaseMetric = (function () {\r\n    function BaseMetric(definition, system, transport, value, type) {\r\n        this.definition = definition;\r\n        this.system = system;\r\n        this.transport = transport;\r\n        this.value = value;\r\n        this.type = type;\r\n        this.path = [];\r\n        Helpers.validate(definition, system, transport);\r\n        this.path = system.path.slice(0);\r\n        this.path.push(system.name);\r\n        this.name = definition.name;\r\n        this.description = definition.description;\r\n        transport.createMetric(this);\r\n    }\r\n    Object.defineProperty(BaseMetric.prototype, \"repo\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this.system) === null || _a === void 0 ? void 0 : _a.repo;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseMetric.prototype, \"id\", {\r\n        get: function () { return this.system.path + \"/\" + name; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BaseMetric.prototype.update = function (newValue) {\r\n        this.value = newValue;\r\n        return this.transport.updateMetric(this);\r\n    };\r\n    return BaseMetric;\r\n}());\n\nvar NumberMetric = (function (_super) {\r\n    __extends(NumberMetric, _super);\r\n    function NumberMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.NUMBER) || this;\r\n    }\r\n    NumberMetric.prototype.incrementBy = function (num) {\r\n        this.update(this.value + num);\r\n    };\r\n    NumberMetric.prototype.increment = function () {\r\n        this.incrementBy(1);\r\n    };\r\n    NumberMetric.prototype.decrement = function () {\r\n        this.incrementBy(-1);\r\n    };\r\n    NumberMetric.prototype.decrementBy = function (num) {\r\n        this.incrementBy(num * -1);\r\n    };\r\n    return NumberMetric;\r\n}(BaseMetric));\n\nvar ObjectMetric = (function (_super) {\r\n    __extends(ObjectMetric, _super);\r\n    function ObjectMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.OBJECT) || this;\r\n    }\r\n    ObjectMetric.prototype.update = function (newValue) {\r\n        this.mergeValues(newValue);\r\n        return this.transport.updateMetric(this);\r\n    };\r\n    ObjectMetric.prototype.mergeValues = function (values) {\r\n        var _this = this;\r\n        return Object.keys(this.value).forEach(function (k) {\r\n            if (typeof values[k] !== \"undefined\") {\r\n                _this.value[k] = values[k];\r\n            }\r\n        });\r\n    };\r\n    return ObjectMetric;\r\n}(BaseMetric));\n\nvar StringMetric = (function (_super) {\r\n    __extends(StringMetric, _super);\r\n    function StringMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.STRING) || this;\r\n    }\r\n    return StringMetric;\r\n}(BaseMetric));\n\nvar TimestampMetric = (function (_super) {\r\n    __extends(TimestampMetric, _super);\r\n    function TimestampMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.TIMESTAMP) || this;\r\n    }\r\n    TimestampMetric.prototype.now = function () {\r\n        this.update(new Date());\r\n    };\r\n    return TimestampMetric;\r\n}(BaseMetric));\n\nfunction system(name, repo, protocol, parent, description) {\r\n    if (!repo) {\r\n        throw new Error(\"Repository is required\");\r\n    }\r\n    if (!protocol) {\r\n        throw new Error(\"Transport is required\");\r\n    }\r\n    var _transport = protocol;\r\n    var _name = name;\r\n    var _description = description || \"\";\r\n    var _repo = repo;\r\n    var _parent = parent;\r\n    var _path = _buildPath(parent);\r\n    var _state = {};\r\n    var id = _arrayToString(_path, \"/\") + name;\r\n    var root = repo.root;\r\n    var _subSystems = [];\r\n    var _metrics = [];\r\n    function subSystem(nameSystem, descriptionSystem) {\r\n        if (!nameSystem || nameSystem.length === 0) {\r\n            throw new Error(\"name is required\");\r\n        }\r\n        var match = _subSystems.filter(function (s) { return s.name === nameSystem; });\r\n        if (match.length > 0) {\r\n            return match[0];\r\n        }\r\n        var _system = system(nameSystem, _repo, _transport, me, descriptionSystem);\r\n        _subSystems.push(_system);\r\n        return _system;\r\n    }\r\n    function setState(state, stateDescription) {\r\n        _state = { state: state, description: stateDescription };\r\n        _transport.updateSystem(me, _state);\r\n    }\r\n    function stringMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.STRING, value, function (metricDef) { return new StringMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function numberMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.NUMBER, value, function (metricDef) { return new NumberMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function objectMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.OBJECT, value, function (metricDef) { return new ObjectMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function timestampMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.TIMESTAMP, value, function (metricDef) { return new TimestampMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function _getOrCreateMetric(metricObject, expectedType, value, createMetric) {\r\n        var metricDef = { name: \"\" };\r\n        if (typeof metricObject === \"string\") {\r\n            metricDef = { name: metricObject };\r\n        }\r\n        else {\r\n            metricDef = metricObject;\r\n        }\r\n        var matching = _metrics.filter(function (shadowedMetric) { return shadowedMetric.name === metricDef.name; });\r\n        if (matching.length > 0) {\r\n            var existing = matching[0];\r\n            if (existing.type !== expectedType) {\r\n                throw new Error(\"A metric named \" + metricDef.name + \" is already defined with different type.\");\r\n            }\r\n            if (typeof value !== \"undefined\") {\r\n                existing\r\n                    .update(value)\r\n                    .catch(function () { });\r\n            }\r\n            return existing;\r\n        }\r\n        var metric = createMetric(metricDef);\r\n        _metrics.push(metric);\r\n        return metric;\r\n    }\r\n    function _buildPath(shadowedSystem) {\r\n        if (!shadowedSystem || !shadowedSystem.parent) {\r\n            return [];\r\n        }\r\n        var path = _buildPath(shadowedSystem.parent);\r\n        path.push(shadowedSystem.name);\r\n        return path;\r\n    }\r\n    function _arrayToString(path, separator) {\r\n        return ((path && path.length > 0) ? path.join(separator) : \"\");\r\n    }\r\n    function getAggregateState() {\r\n        var aggState = [];\r\n        if (Object.keys(_state).length > 0) {\r\n            aggState.push({\r\n                name: _name,\r\n                path: _path,\r\n                state: _state.state,\r\n                description: _state.description,\r\n            });\r\n        }\r\n        _subSystems.forEach(function (shadowedSubSystem) {\r\n            var result = shadowedSubSystem.getAggregateState();\r\n            if (result.length > 0) {\r\n                aggState.push.apply(aggState, result);\r\n            }\r\n        });\r\n        return aggState;\r\n    }\r\n    var me = {\r\n        get name() {\r\n            return _name;\r\n        },\r\n        get description() {\r\n            return _description;\r\n        },\r\n        get repo() {\r\n            return _repo;\r\n        },\r\n        get parent() {\r\n            return _parent;\r\n        },\r\n        path: _path,\r\n        id: id,\r\n        root: root,\r\n        get subSystems() {\r\n            return _subSystems;\r\n        },\r\n        get metrics() {\r\n            return _metrics;\r\n        },\r\n        subSystem: subSystem,\r\n        getState: function () {\r\n            return _state;\r\n        },\r\n        setState: setState,\r\n        stringMetric: stringMetric,\r\n        timestampMetric: timestampMetric,\r\n        objectMetric: objectMetric,\r\n        numberMetric: numberMetric,\r\n        getAggregateState: getAggregateState,\r\n    };\r\n    _transport.createSystem(me);\r\n    return me;\r\n}\n\nvar Repository = (function () {\r\n    function Repository(options, protocol) {\r\n        protocol.init(this);\r\n        this.root = system(\"\", this, protocol);\r\n        this.addSystemMetrics(this.root, options.clickStream || options.clickStream === undefined);\r\n    }\r\n    Repository.prototype.addSystemMetrics = function (rootSystem, useClickStream) {\r\n        if (typeof navigator !== \"undefined\") {\r\n            rootSystem.stringMetric(\"UserAgent\", navigator.userAgent);\r\n        }\r\n        if (useClickStream && typeof document !== \"undefined\") {\r\n            var clickStream_1 = rootSystem.subSystem(\"ClickStream\");\r\n            var documentClickHandler = function (e) {\r\n                if (!e.target) {\r\n                    return;\r\n                }\r\n                var target = e.target;\r\n                clickStream_1.objectMetric(\"LastBrowserEvent\", {\r\n                    type: \"click\",\r\n                    timestamp: new Date(),\r\n                    target: {\r\n                        className: e.target ? target.className : \"\",\r\n                        id: target.id,\r\n                        type: \"<\" + target.tagName.toLowerCase() + \">\",\r\n                        href: target.href || \"\",\r\n                    },\r\n                });\r\n            };\r\n            clickStream_1.objectMetric(\"Page\", {\r\n                title: document.title,\r\n                page: window.location.href,\r\n            });\r\n            if (document.addEventListener) {\r\n                document.addEventListener(\"click\", documentClickHandler);\r\n            }\r\n            else {\r\n                document.attachEvent(\"onclick\", documentClickHandler);\r\n            }\r\n        }\r\n        var startTime = rootSystem.stringMetric(\"StartTime\", (new Date()).toString());\r\n        var urlMetric = rootSystem.stringMetric(\"StartURL\", \"\");\r\n        var appNameMetric = rootSystem.stringMetric(\"AppName\", \"\");\r\n        if (typeof window !== \"undefined\") {\r\n            if (typeof window.location !== \"undefined\") {\r\n                var startUrl = window.location.href;\r\n                urlMetric.update(startUrl);\r\n            }\r\n            if (typeof window.glue42gd !== \"undefined\") {\r\n                appNameMetric.update(window.glue42gd.appName);\r\n            }\r\n        }\r\n    };\r\n    return Repository;\r\n}());\n\nvar NullProtocol = (function () {\r\n    function NullProtocol() {\r\n    }\r\n    NullProtocol.prototype.init = function (repo) {\r\n    };\r\n    NullProtocol.prototype.createSystem = function (system) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.updateSystem = function (metric, state) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.createMetric = function (metric) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.updateMetric = function (metric) {\r\n        return Promise.resolve();\r\n    };\r\n    return NullProtocol;\r\n}());\n\nvar PerfTracker = (function () {\r\n    function PerfTracker(api, initialPublishTimeout, publishInterval) {\r\n        this.api = api;\r\n        this.lastCount = 0;\r\n        this.initialPublishTimeout = 10 * 1000;\r\n        this.publishInterval = 60 * 1000;\r\n        this.initialPublishTimeout = initialPublishTimeout !== null && initialPublishTimeout !== void 0 ? initialPublishTimeout : this.initialPublishTimeout;\r\n        this.publishInterval = publishInterval !== null && publishInterval !== void 0 ? publishInterval : this.publishInterval;\r\n        this.scheduleCollection();\r\n        this.system = this.api.subSystem(\"performance\", \"Performance data published by the web application\");\r\n    }\r\n    PerfTracker.prototype.scheduleCollection = function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.collect();\r\n            setInterval(function () {\r\n                _this.collect();\r\n            }, _this.publishInterval);\r\n        }, this.initialPublishTimeout);\r\n    };\r\n    PerfTracker.prototype.collect = function () {\r\n        try {\r\n            this.collectMemory();\r\n            this.collectEntries();\r\n        }\r\n        catch (_a) {\r\n        }\r\n    };\r\n    PerfTracker.prototype.collectMemory = function () {\r\n        var memory = window.performance.memory;\r\n        this.system.stringMetric(\"memory\", JSON.stringify({\r\n            totalJSHeapSize: memory.totalJSHeapSize,\r\n            usedJSHeapSize: memory.usedJSHeapSize\r\n        }));\r\n    };\r\n    PerfTracker.prototype.collectEntries = function () {\r\n        var allEntries = window.performance.getEntries();\r\n        if (allEntries.length <= this.lastCount) {\r\n            return;\r\n        }\r\n        this.lastCount = allEntries.length;\r\n        this.system.stringMetric(\"entries\", JSON.stringify(allEntries));\r\n    };\r\n    return PerfTracker;\r\n}());\n\nvar metrics = (function (options) {\r\n    var protocol;\r\n    if (!options.connection || typeof options.connection !== \"object\") {\r\n        protocol = new NullProtocol();\r\n    }\r\n    else {\r\n        protocol = gw3(options.connection, options);\r\n    }\r\n    var repo = new Repository(options, protocol);\r\n    var rootSystem = repo.root;\r\n    if (!options.disableAutoAppSystem) {\r\n        rootSystem = rootSystem.subSystem(\"App\");\r\n    }\r\n    var api = addFAVSupport(rootSystem);\r\n    initPerf(api, options.pagePerformanceMetrics);\r\n    return api;\r\n});\r\nvar perf;\r\nfunction initPerf(api, config) {\r\n    var _a, _b;\r\n    if (typeof window === \"undefined\") {\r\n        return;\r\n    }\r\n    var perfConfig = (_b = (_a = window === null || window === void 0 ? void 0 : window.glue42gd) === null || _a === void 0 ? void 0 : _a.metrics) === null || _b === void 0 ? void 0 : _b.pagePerformanceMetrics;\r\n    if (perfConfig) {\r\n        config = perfConfig;\r\n    }\r\n    if (config === null || config === void 0 ? void 0 : config.enabled) {\r\n        perf = new PerfTracker(api, config.initialPublishTimeout, config.publishInterval);\r\n    }\r\n}\r\nfunction addFAVSupport(system) {\r\n    var reportingSystem = system.subSystem(\"reporting\");\r\n    var def = {\r\n        name: \"features\"\r\n    };\r\n    var featureMetric;\r\n    var featureMetricFunc = function (name, action, payload) {\r\n        if (typeof name === \"undefined\" || name === \"\") {\r\n            throw new Error(\"name is mandatory\");\r\n        }\r\n        else if (typeof action === \"undefined\" || action === \"\") {\r\n            throw new Error(\"action is mandatory\");\r\n        }\r\n        else if (typeof payload === \"undefined\" || payload === \"\") {\r\n            throw new Error(\"payload is mandatory\");\r\n        }\r\n        if (!featureMetric) {\r\n            featureMetric = reportingSystem.objectMetric(def, { name: name, action: action, payload: payload });\r\n        }\r\n        else {\r\n            featureMetric.update({\r\n                name: name,\r\n                action: action,\r\n                payload: payload\r\n            });\r\n        }\r\n    };\r\n    system.featureMetric = featureMetricFunc;\r\n    return system;\r\n}\n\nfunction createRegistry$1(options) {\r\n    if (options && options.errorHandling\r\n        && typeof options.errorHandling !== \"function\"\r\n        && options.errorHandling !== \"log\"\r\n        && options.errorHandling !== \"silent\"\r\n        && options.errorHandling !== \"throw\") {\r\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\r\n    }\r\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\r\n    var callbacks = {};\r\n    function add(key, callback, replayArgumentsArr) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            callbacksForKey = [];\r\n            callbacks[key] = callbacksForKey;\r\n        }\r\n        callbacksForKey.push(callback);\r\n        if (replayArgumentsArr) {\r\n            setTimeout(function () {\r\n                replayArgumentsArr.forEach(function (replayArgument) {\r\n                    var _a;\r\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\r\n                        try {\r\n                            if (Array.isArray(replayArgument)) {\r\n                                callback.apply(undefined, replayArgument);\r\n                            }\r\n                            else {\r\n                                callback.apply(undefined, [replayArgument]);\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            _handleError(err, key);\r\n                        }\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n        return function () {\r\n            var allForKey = callbacks[key];\r\n            if (!allForKey) {\r\n                return;\r\n            }\r\n            allForKey = allForKey.reduce(function (acc, element, index) {\r\n                if (!(element === callback && acc.length === index)) {\r\n                    acc.push(element);\r\n                }\r\n                return acc;\r\n            }, []);\r\n            if (allForKey.length === 0) {\r\n                delete callbacks[key];\r\n            }\r\n            else {\r\n                callbacks[key] = allForKey;\r\n            }\r\n        };\r\n    }\r\n    function execute(key) {\r\n        var argumentsArr = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            argumentsArr[_i - 1] = arguments[_i];\r\n        }\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey || callbacksForKey.length === 0) {\r\n            return [];\r\n        }\r\n        var results = [];\r\n        callbacksForKey.forEach(function (callback) {\r\n            try {\r\n                var result = callback.apply(undefined, argumentsArr);\r\n                results.push(result);\r\n            }\r\n            catch (err) {\r\n                results.push(undefined);\r\n                _handleError(err, key);\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    function _handleError(exceptionArtifact, key) {\r\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\r\n        if (_userErrorHandler) {\r\n            _userErrorHandler(errParam);\r\n            return;\r\n        }\r\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\r\n        if (options) {\r\n            switch (options.errorHandling) {\r\n                case \"log\":\r\n                    return console.error(msg);\r\n                case \"silent\":\r\n                    return;\r\n                case \"throw\":\r\n                    throw new Error(msg);\r\n            }\r\n        }\r\n        console.error(msg);\r\n    }\r\n    function clear() {\r\n        callbacks = {};\r\n    }\r\n    function clearKey(key) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            return;\r\n        }\r\n        delete callbacks[key];\r\n    }\r\n    return {\r\n        add: add,\r\n        execute: execute,\r\n        clear: clear,\r\n        clearKey: clearKey\r\n    };\r\n}\r\ncreateRegistry$1.default = createRegistry$1;\r\nvar lib$1 = createRegistry$1;\n\nvar InProcTransport = (function () {\r\n    function InProcTransport(settings, logger) {\r\n        var _this = this;\r\n        this.registry = lib$1();\r\n        this.gw = settings.facade;\r\n        this.gw.connect(function (_client, message) {\r\n            _this.messageHandler(message);\r\n        }).then(function (client) {\r\n            _this.client = client;\r\n        });\r\n    }\r\n    Object.defineProperty(InProcTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InProcTransport.prototype.sendObject = function (msg) {\r\n        if (this.client) {\r\n            this.client.send(msg);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        else {\r\n            return Promise.reject(\"not connected\");\r\n        }\r\n    };\r\n    InProcTransport.prototype.send = function (_msg) {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    InProcTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    InProcTransport.prototype.onConnectedChanged = function (callback) {\r\n        callback(true);\r\n    };\r\n    InProcTransport.prototype.close = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.open = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.name = function () {\r\n        return \"in-memory\";\r\n    };\r\n    InProcTransport.prototype.reconnect = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.messageHandler = function (msg) {\r\n        this.registry.execute(\"onMessage\", msg);\r\n    };\r\n    return InProcTransport;\r\n}());\n\nvar SharedWorkerTransport = (function () {\r\n    function SharedWorkerTransport(workerFile, logger) {\r\n        var _this = this;\r\n        this.logger = logger;\r\n        this.registry = lib$1();\r\n        this.worker = new SharedWorker(workerFile);\r\n        this.worker.port.onmessage = function (e) {\r\n            _this.messageHandler(e.data);\r\n        };\r\n    }\r\n    Object.defineProperty(SharedWorkerTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SharedWorkerTransport.prototype.sendObject = function (msg) {\r\n        this.worker.port.postMessage(msg);\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.send = function (_msg) {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    SharedWorkerTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    SharedWorkerTransport.prototype.onConnectedChanged = function (callback) {\r\n        callback(true);\r\n    };\r\n    SharedWorkerTransport.prototype.close = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.open = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.name = function () {\r\n        return \"shared-worker\";\r\n    };\r\n    SharedWorkerTransport.prototype.reconnect = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.messageHandler = function (msg) {\r\n        this.registry.execute(\"onMessage\", msg);\r\n    };\r\n    return SharedWorkerTransport;\r\n}());\n\nvar Utils = (function () {\r\n    function Utils() {\r\n    }\r\n    Utils.getGDMajorVersion = function () {\r\n        if (typeof window === \"undefined\") {\r\n            return undefined;\r\n        }\r\n        if (!window.glueDesktop) {\r\n            return undefined;\r\n        }\r\n        if (!window.glueDesktop.version) {\r\n            return undefined;\r\n        }\r\n        var ver = Number(window.glueDesktop.version.substr(0, 1));\r\n        return isNaN(ver) ? undefined : ver;\r\n    };\r\n    Utils.isNode = function () {\r\n        if (typeof Utils._isNode !== \"undefined\") {\r\n            return Utils._isNode;\r\n        }\r\n        if (typeof window !== \"undefined\") {\r\n            Utils._isNode = false;\r\n            return false;\r\n        }\r\n        try {\r\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\r\n        }\r\n        catch (e) {\r\n            Utils._isNode = false;\r\n        }\r\n        return Utils._isNode;\r\n    };\r\n    return Utils;\r\n}());\n\nvar PromiseWrapper = (function () {\r\n    function PromiseWrapper() {\r\n        var _this = this;\r\n        this.rejected = false;\r\n        this.resolved = false;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            _this.resolve = function (t) {\r\n                _this.resolved = true;\r\n                resolve(t);\r\n            };\r\n            _this.reject = function (err) {\r\n                _this.rejected = true;\r\n                reject(err);\r\n            };\r\n        });\r\n    }\r\n    PromiseWrapper.delay = function (time) {\r\n        return new Promise(function (resolve) { return setTimeout(resolve, time); });\r\n    };\r\n    Object.defineProperty(PromiseWrapper.prototype, \"ended\", {\r\n        get: function () {\r\n            return this.rejected || this.resolved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PromiseWrapper;\r\n}());\n\nvar timers = {};\r\nfunction getAllTimers() {\r\n    return timers;\r\n}\r\nfunction timer (timerName) {\r\n    var existing = timers[timerName];\r\n    if (existing) {\r\n        return existing;\r\n    }\r\n    var marks = [];\r\n    function now() {\r\n        return new Date().getTime();\r\n    }\r\n    var startTime = now();\r\n    mark(\"start\", startTime);\r\n    var endTime;\r\n    var period;\r\n    function stop() {\r\n        endTime = now();\r\n        mark(\"end\", endTime);\r\n        period = endTime - startTime;\r\n        return period;\r\n    }\r\n    function mark(name, time) {\r\n        var currentTime = time !== null && time !== void 0 ? time : now();\r\n        var diff = 0;\r\n        if (marks.length > 0) {\r\n            diff = currentTime - marks[marks.length - 1].time;\r\n        }\r\n        marks.push({ name: name, time: currentTime, diff: diff });\r\n    }\r\n    var timerObj = {\r\n        get startTime() {\r\n            return startTime;\r\n        },\r\n        get endTime() {\r\n            return endTime;\r\n        },\r\n        get period() {\r\n            return period;\r\n        },\r\n        stop: stop,\r\n        mark: mark,\r\n        marks: marks\r\n    };\r\n    timers[timerName] = timerObj;\r\n    return timerObj;\r\n}\n\nvar WebSocketConstructor = Utils.isNode() ? require(\"ws\") : window.WebSocket;\r\nvar WS = (function () {\r\n    function WS(settings, logger) {\r\n        this.startupTimer = timer(\"connection\");\r\n        this._running = true;\r\n        this._registry = lib$1();\r\n        this.wsRequests = [];\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        if (!this.settings.ws) {\r\n            throw new Error(\"ws is missing\");\r\n        }\r\n    }\r\n    WS.prototype.onMessage = function (callback) {\r\n        return this._registry.add(\"onMessage\", callback);\r\n    };\r\n    WS.prototype.send = function (msg, options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.waitForSocketConnection(function () {\r\n                var _a;\r\n                try {\r\n                    (_a = _this.ws) === null || _a === void 0 ? void 0 : _a.send(msg);\r\n                    resolve();\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, reject);\r\n        });\r\n    };\r\n    WS.prototype.open = function () {\r\n        var _this = this;\r\n        this.logger.info(\"opening ws...\");\r\n        this._running = true;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.waitForSocketConnection(resolve, reject);\r\n        });\r\n    };\r\n    WS.prototype.close = function () {\r\n        this._running = false;\r\n        if (this.ws) {\r\n            this.ws.close();\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    WS.prototype.onConnectedChanged = function (callback) {\r\n        return this._registry.add(\"onConnectedChanged\", callback);\r\n    };\r\n    WS.prototype.name = function () {\r\n        return \"ws \" + this.settings.ws;\r\n    };\r\n    WS.prototype.reconnect = function () {\r\n        var _a;\r\n        (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close();\r\n        var pw = new PromiseWrapper();\r\n        this.waitForSocketConnection(function () {\r\n            pw.resolve();\r\n        });\r\n        return pw.promise;\r\n    };\r\n    WS.prototype.waitForSocketConnection = function (callback, failed) {\r\n        var _a;\r\n        failed = failed !== null && failed !== void 0 ? failed : (function () { });\r\n        if (!this._running) {\r\n            failed(\"wait for socket on \" + this.settings.ws + \" failed - socket closed by user\");\r\n            return;\r\n        }\r\n        if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === 1) {\r\n            callback();\r\n            return;\r\n        }\r\n        this.wsRequests.push({ callback: callback, failed: failed });\r\n        if (this.wsRequests.length > 1) {\r\n            return;\r\n        }\r\n        this.openSocket();\r\n    };\r\n    WS.prototype.openSocket = function (retryInterval, retriesLeft) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.startupTimer.mark(\"opening-socket\");\r\n                        if (retryInterval === undefined) {\r\n                            retryInterval = this.settings.reconnectInterval;\r\n                        }\r\n                        if (retriesLeft !== undefined) {\r\n                            if (retriesLeft === 0) {\r\n                                this.notifyForSocketState(\"wait for socket on \" + this.settings.ws + \" failed - no more retries left\");\r\n                                return [2];\r\n                            }\r\n                            this.logger.debug(\"will retry \" + retriesLeft + \" more times (every \" + retryInterval + \" ms)\");\r\n                        }\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4, this.initiateSocket()];\r\n                    case 2:\r\n                        _b.sent();\r\n                        this.startupTimer.mark(\"socket-initiated\");\r\n                        this.notifyForSocketState();\r\n                        return [3, 4];\r\n                    case 3:\r\n                        _a = _b.sent();\r\n                        setTimeout(function () {\r\n                            var retries = retriesLeft === undefined ? undefined : retriesLeft - 1;\r\n                            _this.openSocket(retryInterval, retries);\r\n                        }, retryInterval);\r\n                        return [3, 4];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WS.prototype.initiateSocket = function () {\r\n        var _this = this;\r\n        var pw = new PromiseWrapper();\r\n        this.logger.debug(\"initiating ws to \" + this.settings.ws + \"...\");\r\n        this.ws = new WebSocketConstructor(this.settings.ws || \"\");\r\n        this.ws.onerror = function (err) {\r\n            var reason = \"\";\r\n            try {\r\n                reason = JSON.stringify(err);\r\n            }\r\n            catch (error) {\r\n                var seen_1 = new WeakSet();\r\n                var replacer = function (key, value) {\r\n                    if (typeof value === \"object\" && value !== null) {\r\n                        if (seen_1.has(value)) {\r\n                            return;\r\n                        }\r\n                        seen_1.add(value);\r\n                    }\r\n                    return value;\r\n                };\r\n                reason = JSON.stringify(err, replacer);\r\n            }\r\n            pw.reject(\"error\");\r\n            _this.notifyStatusChanged(false, reason);\r\n        };\r\n        this.ws.onclose = function (err) {\r\n            _this.logger.info(\"ws closed \" + err);\r\n            pw.reject(\"closed\");\r\n            _this.notifyStatusChanged(false);\r\n        };\r\n        this.ws.onopen = function () {\r\n            var _a;\r\n            _this.startupTimer.mark(\"ws-opened\");\r\n            _this.logger.info(\"ws opened \" + ((_a = _this.settings.identity) === null || _a === void 0 ? void 0 : _a.application));\r\n            pw.resolve();\r\n            _this.notifyStatusChanged(true);\r\n        };\r\n        this.ws.onmessage = function (message) {\r\n            _this._registry.execute(\"onMessage\", message.data);\r\n        };\r\n        return pw.promise;\r\n    };\r\n    WS.prototype.notifyForSocketState = function (error) {\r\n        this.wsRequests.forEach(function (wsRequest) {\r\n            if (error) {\r\n                if (wsRequest.failed) {\r\n                    wsRequest.failed(error);\r\n                }\r\n            }\r\n            else {\r\n                wsRequest.callback();\r\n            }\r\n        });\r\n        this.wsRequests = [];\r\n    };\r\n    WS.prototype.notifyStatusChanged = function (status, reason) {\r\n        this._registry.execute(\"onConnectedChanged\", status, reason);\r\n    };\r\n    return WS;\r\n}());\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nvar randomFromSeed = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed$1(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nvar alphabet_1 = {\n    characters: characters,\n    seed: setSeed$1,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nvar randomByteBrowser = randomByte;\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByteBrowser() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nvar encode_1 = encode;\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet_1.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nvar decode_1 = decode;\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet_1.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nvar isValid = isShortId;\n\nvar lib$1$1 = createCommonjsModule(function (module) {\n\n\n\n\n\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId =  0;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode_1(alphabet_1.lookup, version);\n    str = str + encode_1(alphabet_1.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode_1(alphabet_1.lookup, counter);\n    }\n    str = str + encode_1(alphabet_1.lookup, seconds);\n\n    return str;\n}\n\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet_1.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet_1.characters(newCharacters);\n    }\n\n    return alphabet_1.shuffled();\n}\n\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode_1;\nmodule.exports.isValid = isValid;\n});\nvar lib_1 = lib$1$1.generate;\nvar lib_2 = lib$1$1.seed;\nvar lib_3 = lib$1$1.worker;\nvar lib_4 = lib$1$1.characters;\nvar lib_5 = lib$1$1.decode;\nvar lib_6 = lib$1$1.isValid;\n\nvar shortid = lib$1$1;\n\nfunction domainSession (domain, connection, logger, successMessages, errorMessages) {\r\n    if (domain == null) {\r\n        domain = \"global\";\r\n    }\r\n    successMessages = successMessages || [\"success\"];\r\n    errorMessages = errorMessages || [\"error\"];\r\n    var isJoined = false;\r\n    var tryReconnecting = false;\r\n    var _latestOptions;\r\n    var _connectionOn = false;\r\n    var callbacks = lib$1();\r\n    connection.disconnected(handleConnectionDisconnected);\r\n    connection.loggedIn(handleConnectionLoggedIn);\r\n    connection.on(\"success\", function (msg) { return handleSuccessMessage(msg); });\r\n    connection.on(\"error\", function (msg) { return handleErrorMessage(msg); });\r\n    connection.on(\"result\", function (msg) { return handleSuccessMessage(msg); });\r\n    if (successMessages) {\r\n        successMessages.forEach(function (sm) {\r\n            connection.on(sm, function (msg) { return handleSuccessMessage(msg); });\r\n        });\r\n    }\r\n    if (errorMessages) {\r\n        errorMessages.forEach(function (sm) {\r\n            connection.on(sm, function (msg) { return handleErrorMessage(msg); });\r\n        });\r\n    }\r\n    var requestsMap = {};\r\n    function join(options) {\r\n        _latestOptions = options;\r\n        return new Promise(function (resolve, reject) {\r\n            if (isJoined) {\r\n                resolve();\r\n                return;\r\n            }\r\n            var joinPromise;\r\n            if (domain === \"global\") {\r\n                joinPromise = _connectionOn ? Promise.resolve({}) : Promise.reject(\"not connected to gateway\");\r\n            }\r\n            else {\r\n                logger.debug(\"joining domain \" + domain);\r\n                var joinMsg = {\r\n                    type: \"join\",\r\n                    destination: domain,\r\n                    domain: \"global\",\r\n                    options: options,\r\n                };\r\n                joinPromise = send(joinMsg);\r\n            }\r\n            joinPromise\r\n                .then(function () {\r\n                handleJoined();\r\n                resolve();\r\n            })\r\n                .catch(function (err) {\r\n                logger.debug(\"error joining \" + domain + \" domain: \" + JSON.stringify(err));\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n    function leave() {\r\n        if (domain === \"global\") {\r\n            return Promise.resolve();\r\n        }\r\n        logger.debug(\"stopping session \" + domain + \"...\");\r\n        var leaveMsg = {\r\n            type: \"leave\",\r\n            destination: domain,\r\n            domain: \"global\",\r\n        };\r\n        tryReconnecting = false;\r\n        return send(leaveMsg).then(function () {\r\n            isJoined = false;\r\n            callbacks.execute(\"onLeft\");\r\n        });\r\n    }\r\n    function handleJoined() {\r\n        logger.debug(\"did join \" + domain);\r\n        isJoined = true;\r\n        var wasReconnect = tryReconnecting;\r\n        tryReconnecting = false;\r\n        callbacks.execute(\"onJoined\", wasReconnect);\r\n    }\r\n    function handleConnectionDisconnected() {\r\n        _connectionOn = false;\r\n        logger.debug(\"connection is down\");\r\n        isJoined = false;\r\n        tryReconnecting = true;\r\n        callbacks.execute(\"onLeft\", { disconnected: true });\r\n    }\r\n    function handleConnectionLoggedIn() {\r\n        _connectionOn = true;\r\n        if (tryReconnecting) {\r\n            logger.debug(\"connection is now up - trying to reconnect...\");\r\n            join(_latestOptions);\r\n        }\r\n    }\r\n    function onJoined(callback) {\r\n        if (isJoined) {\r\n            callback(false);\r\n        }\r\n        return callbacks.add(\"onJoined\", callback);\r\n    }\r\n    function onLeft(callback) {\r\n        if (!isJoined) {\r\n            callback();\r\n        }\r\n        return callbacks.add(\"onLeft\", callback);\r\n    }\r\n    function handleErrorMessage(msg) {\r\n        if (domain !== msg.domain) {\r\n            return;\r\n        }\r\n        var requestId = msg.request_id;\r\n        if (!requestId) {\r\n            return;\r\n        }\r\n        var entry = requestsMap[requestId];\r\n        if (!entry) {\r\n            return;\r\n        }\r\n        entry.error(msg);\r\n    }\r\n    function handleSuccessMessage(msg) {\r\n        if (msg.domain !== domain) {\r\n            return;\r\n        }\r\n        var requestId = msg.request_id;\r\n        if (!requestId) {\r\n            return;\r\n        }\r\n        var entry = requestsMap[requestId];\r\n        if (!entry) {\r\n            return;\r\n        }\r\n        entry.success(msg);\r\n    }\r\n    function getNextRequestId() {\r\n        return shortid();\r\n    }\r\n    function send(msg, tag, options) {\r\n        options = options || {};\r\n        msg.request_id = msg.request_id || getNextRequestId();\r\n        msg.domain = msg.domain || domain;\r\n        if (!options.skipPeerId) {\r\n            msg.peer_id = connection.peerId;\r\n        }\r\n        var requestId = msg.request_id;\r\n        return new Promise(function (resolve, reject) {\r\n            requestsMap[requestId] = {\r\n                success: function (successMsg) {\r\n                    delete requestsMap[requestId];\r\n                    successMsg._tag = tag;\r\n                    resolve(successMsg);\r\n                },\r\n                error: function (errorMsg) {\r\n                    logger.warn(\"GW error - \" + JSON.stringify(errorMsg) + \" for request \" + JSON.stringify(msg));\r\n                    delete requestsMap[requestId];\r\n                    errorMsg._tag = tag;\r\n                    reject(errorMsg);\r\n                },\r\n            };\r\n            connection\r\n                .send(msg, options)\r\n                .catch(function (err) {\r\n                requestsMap[requestId].error({ err: err });\r\n            });\r\n        });\r\n    }\r\n    function sendFireAndForget(msg) {\r\n        msg.request_id = msg.request_id ? msg.request_id : getNextRequestId();\r\n        msg.domain = msg.domain || domain;\r\n        msg.peer_id = connection.peerId;\r\n        return connection.send(msg);\r\n    }\r\n    return {\r\n        join: join,\r\n        leave: leave,\r\n        onJoined: onJoined,\r\n        onLeft: onLeft,\r\n        send: send,\r\n        sendFireAndForget: sendFireAndForget,\r\n        on: function (type, callback) {\r\n            connection.on(type, function (msg) {\r\n                if (msg.domain !== domain) {\r\n                    return;\r\n                }\r\n                try {\r\n                    callback(msg);\r\n                }\r\n                catch (e) {\r\n                    logger.error(\"Callback  failed: \" + e + \" \\n \" + e.stack + \" \\n msg was: \" + JSON.stringify(msg), e);\r\n                }\r\n            });\r\n        },\r\n        loggedIn: function (callback) { return connection.loggedIn(callback); },\r\n        connected: function (callback) { return connection.connected(callback); },\r\n        disconnected: function (callback) { return connection.disconnected(callback); },\r\n        get peerId() {\r\n            return connection.peerId;\r\n        },\r\n        get domain() {\r\n            return domain;\r\n        },\r\n    };\r\n}\n\nvar GW3ProtocolImpl = (function () {\r\n    function GW3ProtocolImpl(connection, settings, logger) {\r\n        var _this = this;\r\n        this.connection = connection;\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.protocolVersion = 3;\r\n        this.datePrefix = \"#T42_DATE#\";\r\n        this.datePrefixLen = this.datePrefix.length;\r\n        this.dateMinLen = this.datePrefixLen + 1;\r\n        this.datePrefixFirstChar = this.datePrefix[0];\r\n        this.registry = lib$1();\r\n        this._isLoggedIn = false;\r\n        this.shouldTryLogin = true;\r\n        this.initialLogin = true;\r\n        this.initialLoginAttempts = 3;\r\n        this.sessions = [];\r\n        connection.disconnected(function () {\r\n            _this.handleDisconnected();\r\n        });\r\n        this.ping();\r\n    }\r\n    Object.defineProperty(GW3ProtocolImpl.prototype, \"isLoggedIn\", {\r\n        get: function () {\r\n            return this._isLoggedIn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GW3ProtocolImpl.prototype.processStringMessage = function (message) {\r\n        var _this = this;\r\n        var msg = JSON.parse(message, function (key, value) {\r\n            if (typeof value !== \"string\") {\r\n                return value;\r\n            }\r\n            if (value.length < _this.dateMinLen) {\r\n                return value;\r\n            }\r\n            if (value[0] !== _this.datePrefixFirstChar) {\r\n                return value;\r\n            }\r\n            if (value.substring(0, _this.datePrefixLen) !== _this.datePrefix) {\r\n                return value;\r\n            }\r\n            try {\r\n                var milliseconds = parseInt(value.substring(_this.datePrefixLen, value.length), 10);\r\n                if (isNaN(milliseconds)) {\r\n                    return value;\r\n                }\r\n                return new Date(milliseconds);\r\n            }\r\n            catch (ex) {\r\n                return value;\r\n            }\r\n        });\r\n        return {\r\n            msg: msg,\r\n            msgType: msg.type,\r\n        };\r\n    };\r\n    GW3ProtocolImpl.prototype.createStringMessage = function (message) {\r\n        var oldToJson = Date.prototype.toJSON;\r\n        try {\r\n            var datePrefix_1 = this.datePrefix;\r\n            Date.prototype.toJSON = function () {\r\n                return datePrefix_1 + this.getTime();\r\n            };\r\n            var result = JSON.stringify(message);\r\n            return result;\r\n        }\r\n        finally {\r\n            Date.prototype.toJSON = oldToJson;\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.processObjectMessage = function (message) {\r\n        if (!message.type) {\r\n            throw new Error(\"Object should have type property\");\r\n        }\r\n        return {\r\n            msg: message,\r\n            msgType: message.type,\r\n        };\r\n    };\r\n    GW3ProtocolImpl.prototype.createObjectMessage = function (message) {\r\n        return message;\r\n    };\r\n    GW3ProtocolImpl.prototype.login = function (config, reconnect) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var authentication, token, e_1, _a, helloMsg, sendOptions, welcomeMsg, msg, token, _b, err_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"logging in...\");\r\n                        this.loginConfig = config;\r\n                        if (!this.loginConfig) {\r\n                            this.loginConfig = { username: \"\", password: \"\" };\r\n                        }\r\n                        this.shouldTryLogin = true;\r\n                        authentication = {};\r\n                        this.connection.gatewayToken = config.gatewayToken;\r\n                        if (!config.gatewayToken) return [3, 5];\r\n                        if (!reconnect) return [3, 4];\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 3, , 4]);\r\n                        return [4, this.getNewGWToken()];\r\n                    case 2:\r\n                        token = _c.sent();\r\n                        config.gatewayToken = token;\r\n                        return [3, 4];\r\n                    case 3:\r\n                        e_1 = _c.sent();\r\n                        this.logger.warn(\"failed to get GW token when reconnecting \" + ((e_1 === null || e_1 === void 0 ? void 0 : e_1.message) || e_1));\r\n                        return [3, 4];\r\n                    case 4:\r\n                        authentication.method = \"gateway-token\";\r\n                        authentication.token = config.gatewayToken;\r\n                        this.connection.gatewayToken = config.gatewayToken;\r\n                        return [3, 10];\r\n                    case 5:\r\n                        if (!(config.flowName === \"sspi\")) return [3, 9];\r\n                        authentication.provider = \"win\";\r\n                        authentication.method = \"access-token\";\r\n                        if (!(config.flowCallback && config.sessionId)) return [3, 7];\r\n                        _a = authentication;\r\n                        return [4, config.flowCallback(config.sessionId, null)];\r\n                    case 6:\r\n                        _a.token =\r\n                            (_c.sent())\r\n                                .data\r\n                                .toString(\"base64\");\r\n                        return [3, 8];\r\n                    case 7: throw new Error(\"Invalid SSPI config\");\r\n                    case 8: return [3, 10];\r\n                    case 9:\r\n                        if (config.token) {\r\n                            authentication.method = \"access-token\";\r\n                            authentication.token = config.token;\r\n                        }\r\n                        else if (config.username) {\r\n                            authentication.method = \"secret\";\r\n                            authentication.login = config.username;\r\n                            authentication.secret = config.password;\r\n                        }\r\n                        else {\r\n                            throw new Error(\"invalid auth message\" + JSON.stringify(config));\r\n                        }\r\n                        _c.label = 10;\r\n                    case 10:\r\n                        helloMsg = {\r\n                            type: \"hello\",\r\n                            identity: this.settings.identity,\r\n                            authentication: authentication\r\n                        };\r\n                        if (config.sessionId) {\r\n                            helloMsg.request_id = config.sessionId;\r\n                        }\r\n                        this.globalDomain = domainSession(\"global\", this.connection, this.logger.subLogger(\"global-domain\"), [\r\n                            \"welcome\",\r\n                            \"token\",\r\n                            \"authentication-request\"\r\n                        ]);\r\n                        sendOptions = { skipPeerId: true };\r\n                        if (this.initialLogin) {\r\n                            sendOptions.retryInterval = this.settings.reconnectInterval;\r\n                            sendOptions.maxRetries = this.settings.reconnectAttempts;\r\n                        }\r\n                        _c.label = 11;\r\n                    case 11:\r\n                        _c.trys.push([11, 19, 20, 21]);\r\n                        welcomeMsg = void 0;\r\n                        _c.label = 12;\r\n                    case 12:\r\n                        return [4, this.globalDomain.send(helloMsg, undefined, sendOptions)];\r\n                    case 13:\r\n                        msg = _c.sent();\r\n                        if (!(msg.type === \"authentication-request\")) return [3, 16];\r\n                        token = Buffer.from(msg.authentication.token, \"base64\");\r\n                        if (!(config.flowCallback && config.sessionId)) return [3, 15];\r\n                        _b = helloMsg.authentication;\r\n                        return [4, config.flowCallback(config.sessionId, token)];\r\n                    case 14:\r\n                        _b.token =\r\n                            (_c.sent())\r\n                                .data\r\n                                .toString(\"base64\");\r\n                        _c.label = 15;\r\n                    case 15:\r\n                        helloMsg.request_id = config.sessionId;\r\n                        return [3, 12];\r\n                    case 16:\r\n                        if (msg.type === \"welcome\") {\r\n                            welcomeMsg = msg;\r\n                            return [3, 18];\r\n                        }\r\n                        else if (msg.type === \"error\") {\r\n                            throw new Error(\"Authentication failed: \" + msg.reason);\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Unexpected message type during authentication: \" + msg.type);\r\n                        }\r\n                    case 17: return [3, 12];\r\n                    case 18:\r\n                        this.initialLogin = false;\r\n                        this.logger.debug(\"login successful with peerId \" + welcomeMsg.peer_id);\r\n                        this.connection.peerId = welcomeMsg.peer_id;\r\n                        this.connection.resolvedIdentity = welcomeMsg.resolved_identity;\r\n                        this.connection.availableDomains = welcomeMsg.available_domains;\r\n                        if (welcomeMsg.options) {\r\n                            this.connection.token = welcomeMsg.options.access_token;\r\n                            this.connection.info = welcomeMsg.options.info;\r\n                        }\r\n                        this.setLoggedIn(true);\r\n                        return [2, welcomeMsg.resolved_identity];\r\n                    case 19:\r\n                        err_1 = _c.sent();\r\n                        this.logger.error(\"error sending hello message - \" + (err_1.message || err_1.msg || err_1.reason || err_1), err_1);\r\n                        throw err_1;\r\n                    case 20:\r\n                        if (config && config.flowCallback && config.sessionId) {\r\n                            config.flowCallback(config.sessionId, null);\r\n                        }\r\n                        return [7];\r\n                    case 21: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.logout = function () {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var promises;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"logging out...\");\r\n                        this.shouldTryLogin = false;\r\n                        if (this.pingTimer) {\r\n                            clearTimeout(this.pingTimer);\r\n                        }\r\n                        promises = this.sessions.map(function (session) {\r\n                            session.leave();\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.loggedIn = function (callback) {\r\n        if (this._isLoggedIn) {\r\n            callback();\r\n        }\r\n        return this.registry.add(\"onLoggedIn\", callback);\r\n    };\r\n    GW3ProtocolImpl.prototype.domain = function (domainName, domainLogger, successMessages, errorMessages) {\r\n        var session = this.sessions.filter(function (s) { return s.domain === domainName; })[0];\r\n        if (!session) {\r\n            session = domainSession(domainName, this.connection, domainLogger, successMessages, errorMessages);\r\n            this.sessions.push(session);\r\n        }\r\n        return session;\r\n    };\r\n    GW3ProtocolImpl.prototype.handleDisconnected = function () {\r\n        var _this = this;\r\n        this.setLoggedIn(false);\r\n        var tryToLogin = this.shouldTryLogin;\r\n        if (tryToLogin && this.initialLogin) {\r\n            if (this.initialLoginAttempts <= 0) {\r\n                return;\r\n            }\r\n            this.initialLoginAttempts--;\r\n        }\r\n        this.logger.debug(\"disconnected - will try new login?\" + this.shouldTryLogin);\r\n        if (this.shouldTryLogin) {\r\n            if (!this.loginConfig) {\r\n                throw new Error(\"no login info\");\r\n            }\r\n            this.connection.login(this.loginConfig, true)\r\n                .catch(function () {\r\n                setTimeout(_this.handleDisconnected.bind(_this), _this.settings.reconnectInterval || 1000);\r\n            });\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.setLoggedIn = function (value) {\r\n        this._isLoggedIn = value;\r\n        if (this._isLoggedIn) {\r\n            this.registry.execute(\"onLoggedIn\");\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.ping = function () {\r\n        var _this = this;\r\n        if (!this.shouldTryLogin) {\r\n            return;\r\n        }\r\n        if (this._isLoggedIn) {\r\n            this.connection.send({ type: \"ping\" });\r\n        }\r\n        this.pingTimer = setTimeout(function () {\r\n            _this.ping();\r\n        }, 30 * 1000);\r\n    };\r\n    GW3ProtocolImpl.prototype.authToken = function () {\r\n        var createTokenReq = {\r\n            type: \"create-token\"\r\n        };\r\n        if (!this.globalDomain) {\r\n            return Promise.reject(new Error(\"no global domain session\"));\r\n        }\r\n        return this.globalDomain.send(createTokenReq)\r\n            .then(function (res) {\r\n            return res.token;\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.getNewGWToken = function () {\r\n        if (typeof window !== undefined) {\r\n            var glue42gd = window.glue42gd;\r\n            if (glue42gd) {\r\n                return glue42gd.getGWToken();\r\n            }\r\n        }\r\n        return Promise.reject(new Error(\"not running in GD\"));\r\n    };\r\n    return GW3ProtocolImpl;\r\n}());\n\nvar MessageReplayerImpl = (function () {\r\n    function MessageReplayerImpl(specs) {\r\n        this.specsNames = [];\r\n        this.messages = {};\r\n        this.subs = {};\r\n        this.subsRefCount = {};\r\n        this.specs = {};\r\n        for (var _i = 0, specs_1 = specs; _i < specs_1.length; _i++) {\r\n            var spec = specs_1[_i];\r\n            this.specs[spec.name] = spec;\r\n            this.specsNames.push(spec.name);\r\n        }\r\n    }\r\n    MessageReplayerImpl.prototype.init = function (connection) {\r\n        var _this = this;\r\n        this.connection = connection;\r\n        for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n            var name_1 = _a[_i];\r\n            var _loop_1 = function (type) {\r\n                var refCount = this_1.subsRefCount[type];\r\n                if (!refCount) {\r\n                    refCount = 0;\r\n                }\r\n                refCount += 1;\r\n                this_1.subsRefCount[type] = refCount;\r\n                if (refCount > 1) {\r\n                    return \"continue\";\r\n                }\r\n                var sub = connection.on(type, function (msg) { return _this.processMessage(type, msg); });\r\n                this_1.subs[type] = sub;\r\n            };\r\n            var this_1 = this;\r\n            for (var _b = 0, _c = this.specs[name_1].types; _b < _c.length; _b++) {\r\n                var type = _c[_b];\r\n                _loop_1(type);\r\n            }\r\n        }\r\n    };\r\n    MessageReplayerImpl.prototype.processMessage = function (type, msg) {\r\n        if (this.isDone || !msg) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n            var name_2 = _a[_i];\r\n            if (this.specs[name_2].types.indexOf(type) !== -1) {\r\n                var messages = this.messages[name_2] || [];\r\n                this.messages[name_2] = messages;\r\n                messages.push(msg);\r\n            }\r\n        }\r\n    };\r\n    MessageReplayerImpl.prototype.drain = function (name, callback) {\r\n        var _a;\r\n        if (callback) {\r\n            (this.messages[name] || []).forEach(callback);\r\n        }\r\n        delete this.messages[name];\r\n        for (var _i = 0, _b = this.specs[name].types; _i < _b.length; _i++) {\r\n            var type = _b[_i];\r\n            this.subsRefCount[type] -= 1;\r\n            if (this.subsRefCount[type] <= 0) {\r\n                (_a = this.connection) === null || _a === void 0 ? void 0 : _a.off(this.subs[type]);\r\n                delete this.subs[type];\r\n                delete this.subsRefCount[type];\r\n            }\r\n        }\r\n        delete this.specs[name];\r\n        if (!this.specs.length) {\r\n            this.isDone = true;\r\n        }\r\n    };\r\n    return MessageReplayerImpl;\r\n}());\n\nvar PromisePlus$1 = function (executor, timeoutMilliseconds, timeoutMessage) {\r\n    return new Promise(function (resolve, reject) {\r\n        var timeout = setTimeout(function () {\r\n            var message = timeoutMessage || \"Promise timeout hit: \" + timeoutMilliseconds;\r\n            reject(message);\r\n        }, timeoutMilliseconds);\r\n        var providedPromise = new Promise(executor);\r\n        providedPromise\r\n            .then(function (result) {\r\n            clearTimeout(timeout);\r\n            resolve(result);\r\n        })\r\n            .catch(function (error) {\r\n            clearTimeout(timeout);\r\n            reject(error);\r\n        });\r\n    });\r\n};\n\nvar WebPlatformTransport = (function () {\r\n    function WebPlatformTransport(settings, logger, identity) {\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.identity = identity;\r\n        this.parentReady = false;\r\n        this.iAmConnected = false;\r\n        this.rejected = false;\r\n        this.children = [];\r\n        this.parentPingTimeout = 3000;\r\n        this.connectionRequestTimeout = 5000;\r\n        this.defaultTargetString = \"*\";\r\n        this.registry = lib$1();\r\n        this.messages = {\r\n            connectionAccepted: { name: \"connectionAccepted\", handle: this.handleConnectionAccepted.bind(this) },\r\n            connectionRejected: { name: \"connectionRejected\", handle: this.handleConnectionRejected.bind(this) },\r\n            connectionRequest: { name: \"connectionRequest\", handle: this.handleConnectionRequest.bind(this) },\r\n            parentReady: { name: \"parentReady\", handle: this.handleParentReady.bind(this) },\r\n            parentPing: { name: \"parentPing\", handle: this.handleParentPing.bind(this) },\r\n            platformPing: { name: \"platformPing\", handle: this.handlePlatformPing.bind(this) },\r\n            platformUnload: { name: \"platformUnload\", handle: this.handlePlatformUnload.bind(this) },\r\n            platformReady: { name: \"platformReady\", handle: this.handlePlatformReady.bind(this) },\r\n            clientUnload: { name: \"clientUnload\", handle: this.handleClientUnload.bind(this) }\r\n        };\r\n        this.setUpMessageListener();\r\n        this.setUpUnload();\r\n        if (!this.settings.port) {\r\n            this.parent = window.opener || window.top;\r\n            this.parentType = window.opener ? \"opener\" :\r\n                window.name.indexOf(\"#wsp\") !== -1 ? \"workspace\" : \"top\";\r\n        }\r\n    }\r\n    Object.defineProperty(WebPlatformTransport.prototype, \"transportWindowId\", {\r\n        get: function () {\r\n            return this.publicWindowId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebPlatformTransport.prototype.sendObject = function (msg) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this.port) {\r\n                    throw new Error(\"Cannot send message, because the port was not opened yet\");\r\n                }\r\n                this.port.postMessage(msg);\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(WebPlatformTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebPlatformTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    WebPlatformTransport.prototype.send = function () {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    WebPlatformTransport.prototype.onConnectedChanged = function (callback) {\r\n        return this.registry.add(\"onConnectedChanged\", callback);\r\n    };\r\n    WebPlatformTransport.prototype.open = function () {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"opening a connection to the web platform gateway.\");\r\n                        return [4, this.connect()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.notifyStatusChanged(true);\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.close = function () {\r\n        return Promise.resolve();\r\n    };\r\n    WebPlatformTransport.prototype.name = function () {\r\n        return \"web-platform\";\r\n    };\r\n    WebPlatformTransport.prototype.reconnect = function () {\r\n        return Promise.resolve();\r\n    };\r\n    WebPlatformTransport.prototype.connect = function () {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.parentReady) {\r\n                            this.logger.debug(\"cancelling connection attempt, because this client's parent has already given a ready signal\");\r\n                            return [2];\r\n                        }\r\n                        if (this.settings.port) {\r\n                            this.logger.debug(\"opening an internal web platform connection\");\r\n                            this.port = this.settings.port;\r\n                            this.publicWindowId = this.settings.windowId;\r\n                            if (this.identity) {\r\n                                this.identity.windowId = this.publicWindowId;\r\n                            }\r\n                            this.port.onmessage = function (event) { return _this.registry.execute(\"onMessage\", event.data); };\r\n                            this.logger.debug(\"internal web platform connection completed\");\r\n                            return [2];\r\n                        }\r\n                        if (!this.parentType || !this.parent) {\r\n                            throw new Error(\"Cannot initiate a connection, because there is no opener, no top and no port.\");\r\n                        }\r\n                        this.logger.debug(\"opening a \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client web platform connection\");\r\n                        return [4, this.waitParent(this.parent, this.parentType)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4, this.initiateRemoteConnection(this.parent, this.parentType)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.logger.debug(\"the \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client is connected\");\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.initiateRemoteConnection = function (target, parentType) {\r\n        var _this = this;\r\n        return PromisePlus$1(function (resolve, reject) {\r\n            _this.connectionResolve = resolve;\r\n            _this.connectionReject = reject;\r\n            _this.myClientId = shortid();\r\n            var bridgeInstanceId = _this.parentType === \"workspace\" ? window.name.substring(0, window.name.indexOf(\"#wsp\")) : window.name;\r\n            var request = {\r\n                glue42core: {\r\n                    type: _this.messages.connectionRequest.name,\r\n                    clientId: _this.myClientId,\r\n                    clientType: parentType === \"top\" || parentType === \"workspace\" ? \"grandChild\" : \"child\",\r\n                    bridgeInstanceId: bridgeInstanceId\r\n                }\r\n            };\r\n            _this.logger.debug(\"sending connection request to \" + parentType);\r\n            target.postMessage(request, _this.defaultTargetString);\r\n        }, this.connectionRequestTimeout, \"The connection to the opener/top window timed out\");\r\n    };\r\n    WebPlatformTransport.prototype.waitParent = function (target, parentType) {\r\n        var _this = this;\r\n        return PromisePlus$1(function (resolve) {\r\n            _this.parentPingResolve = resolve;\r\n            var message = {\r\n                glue42core: {\r\n                    type: parentType === \"opener\" ? _this.messages.platformPing.name : _this.messages.parentPing.name\r\n                }\r\n            };\r\n            _this.logger.debug(\"checking for \" + parentType + \" window availability\");\r\n            target.postMessage(message, _this.defaultTargetString);\r\n        }, this.parentPingTimeout, \"Cannot initiate glue, because this window was not opened or created by a glue client\");\r\n    };\r\n    WebPlatformTransport.prototype.setUpMessageListener = function () {\r\n        var _this = this;\r\n        if (this.settings.port) {\r\n            this.logger.debug(\"skipping generic message listener, because this is an internal client\");\r\n            return;\r\n        }\r\n        window.addEventListener(\"message\", function (event) {\r\n            var _a;\r\n            var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n            if (!data || _this.rejected) {\r\n                return;\r\n            }\r\n            if (!_this.checkMessageTypeValid(data.type)) {\r\n                _this.logger.error(\"cannot handle the incoming glue42 core message, because the type is invalid: \" + data.type);\r\n                return;\r\n            }\r\n            var messageType = data.type;\r\n            _this.logger.debug(\"received valid glue42core message of type: \" + messageType);\r\n            _this.messages[messageType].handle(event);\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.setUpUnload = function () {\r\n        var _this = this;\r\n        if (this.settings.port) {\r\n            this.logger.debug(\"skipping unload event listener, because this is an internal client\");\r\n            return;\r\n        }\r\n        window.addEventListener(\"beforeunload\", function () {\r\n            var _a, _b;\r\n            var message = {\r\n                glue42core: {\r\n                    type: _this.messages.clientUnload.name,\r\n                    data: {\r\n                        clientId: _this.myClientId,\r\n                        ownWindowId: (_a = _this.identity) === null || _a === void 0 ? void 0 : _a.windowId\r\n                    }\r\n                }\r\n            };\r\n            if (_this.parent) {\r\n                _this.parent.postMessage(message, _this.defaultTargetString);\r\n            }\r\n            (_b = _this.port) === null || _b === void 0 ? void 0 : _b.postMessage(message);\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.handleParentReady = function () {\r\n        this.logger.debug(\"handling the ready signal from the parent, by resoling the pending promise.\");\r\n        this.parentReady = true;\r\n        if (this.parentPingResolve) {\r\n            this.parentPingResolve();\r\n            delete this.parentPingResolve;\r\n            return;\r\n        }\r\n        this.logger.debug(\"silently handling the ready signal from the top parent, because there is no defined promise\");\r\n    };\r\n    WebPlatformTransport.prototype.handlePlatformReady = function () {\r\n        this.logger.debug(\"the web platform gave the ready signal\");\r\n        this.parentReady = true;\r\n        if (this.parentPingResolve) {\r\n            this.parentPingResolve();\r\n            delete this.parentPingResolve;\r\n            return;\r\n        }\r\n        this.logger.debug(\"silently handling the ready signal from the top parent, because there is no defined promise\");\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionAccepted = function (event) {\r\n        var _a;\r\n        var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n        if (this.myClientId === data.clientId) {\r\n            return this.handleAcceptanceOfMyRequest(data);\r\n        }\r\n        return this.handleAcceptanceOfGrandChildRequest(data, event);\r\n    };\r\n    WebPlatformTransport.prototype.handleAcceptanceOfMyRequest = function (data) {\r\n        var _this = this;\r\n        this.logger.debug(\"handling a connection accepted signal targeted at me.\");\r\n        if (!data.port) {\r\n            this.logger.error(\"cannot set up my connection, because I was not provided with a port\");\r\n            return;\r\n        }\r\n        this.publicWindowId = this.parentType === \"opener\" ? window.name :\r\n            this.parentType === \"top\" ? data.parentWindowId :\r\n                window.name.substring(0, window.name.indexOf(\"#wsp\"));\r\n        if (this.identity && this.parentType !== \"top\") {\r\n            this.identity.windowId = this.publicWindowId;\r\n        }\r\n        if (this.identity && data.appName) {\r\n            this.identity.application = data.appName;\r\n            this.identity.applicationName = data.appName;\r\n        }\r\n        this.port = data.port;\r\n        this.port.onmessage = function (e) { return _this.registry.execute(\"onMessage\", e.data); };\r\n        if (this.connectionResolve) {\r\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\r\n            this.connectionResolve();\r\n            delete this.connectionResolve;\r\n            return;\r\n        }\r\n        this.logger.error(\"unable to call the connection resolve, because no connection promise was found\");\r\n    };\r\n    WebPlatformTransport.prototype.handleAcceptanceOfGrandChildRequest = function (data, event) {\r\n        this.logger.debug(\"handling a connection accepted signal targeted at a grandchild: \" + data.clientId);\r\n        var child = this.children.find(function (c) { return c.grandChildId === data.clientId; });\r\n        if (!child) {\r\n            this.logger.error(\"cannot handle connection accepted for grandchild: \" + data.clientId + \", because there is no grandchild with this id\");\r\n            return;\r\n        }\r\n        child.connected = true;\r\n        this.logger.debug(\"the grandchild connection for \" + data.clientId + \" is set up, forwarding the success message and the gateway port\");\r\n        data.parentWindowId = this.publicWindowId;\r\n        child.source.postMessage(event.data, child.origin, [data.port]);\r\n        return;\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionRejected = function () {\r\n        this.logger.debug(\"handling a connection rejection. Most likely the reason is that this window was not created by a glue API call\");\r\n        if (this.connectionReject) {\r\n            this.connectionReject(\"The platform connection was rejected. Most likely because this window was not created by a glue API call\");\r\n            delete this.connectionReject;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionRequest = function (event) {\r\n        var source = event.source;\r\n        var data = event.data.glue42core;\r\n        if (!data.clientType || data.clientType !== \"grandChild\") {\r\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source was not opened by a glue API call\");\r\n        }\r\n        if (!data.clientId) {\r\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source did not provide a valid id\");\r\n        }\r\n        if (this.parentType !== \"opener\" || !this.parent) {\r\n            return this.rejectConnectionRequest(source, event.origin, \"Cannot forward the connection request, because no direct connection to the platform was found\");\r\n        }\r\n        this.logger.debug(\"handling a connection request for a grandchild: \" + data.clientId);\r\n        this.children.push({ grandChildId: data.clientId, source: source, connected: false, origin: event.origin });\r\n        this.logger.debug(\"grandchild: \" + data.clientId + \" is prepared, forwarding connection request to the platform\");\r\n        this.parent.postMessage(event.data, this.defaultTargetString);\r\n    };\r\n    WebPlatformTransport.prototype.handleParentPing = function (event) {\r\n        if (!this.parentReady) {\r\n            this.logger.debug(\"my parent is not ready, I am ignoring the parent ping\");\r\n            return;\r\n        }\r\n        if (!this.iAmConnected) {\r\n            this.logger.debug(\"i am not fully connected yet, I am ignoring the parent ping\");\r\n            return;\r\n        }\r\n        var message = {\r\n            glue42core: {\r\n                type: this.messages.parentReady.name\r\n            }\r\n        };\r\n        var source = event.source;\r\n        this.logger.debug(\"responding to a parent ping with a ready message\");\r\n        source.postMessage(message, event.origin);\r\n    };\r\n    WebPlatformTransport.prototype.handlePlatformUnload = function (event) {\r\n        this.logger.debug(\"detected a web platform unload\");\r\n        this.parentReady = false;\r\n        if (this.children.length) {\r\n            this.logger.debug(\"forwarding the platform unload to all known children and starting platform discovery polling\");\r\n            this.children.forEach(function (child) { return child.source.postMessage(event.data, child.origin); });\r\n        }\r\n        this.notifyStatusChanged(false, \"Gateway unloaded\");\r\n    };\r\n    WebPlatformTransport.prototype.handleClientUnload = function (event) {\r\n        var data = event.data.glue42core;\r\n        if (!data.clientId) {\r\n            this.logger.warn(\"cannot process grand child unload, because the provided id was not valid\");\r\n            return;\r\n        }\r\n        var foundChild = this.children.find(function (child) { return child.grandChildId === data.clientId; });\r\n        if (!foundChild) {\r\n            this.logger.warn(\"cannot process grand child unload, because this client is unaware of this grandchild\");\r\n            return;\r\n        }\r\n        this.logger.debug(\"handling grandchild unload for id: \" + data.clientId);\r\n        this.children = this.children.filter(function (child) { return child.grandChildId !== data.clientId; });\r\n    };\r\n    WebPlatformTransport.prototype.handlePlatformPing = function () {\r\n        this.logger.error(\"cannot handle platform ping, because this is not a platform calls handling component\");\r\n    };\r\n    WebPlatformTransport.prototype.notifyStatusChanged = function (status, reason) {\r\n        this.iAmConnected = status;\r\n        this.registry.execute(\"onConnectedChanged\", status, reason);\r\n    };\r\n    WebPlatformTransport.prototype.checkMessageTypeValid = function (typeToValidate) {\r\n        return typeof typeToValidate === \"string\" && !!this.messages[typeToValidate];\r\n    };\r\n    WebPlatformTransport.prototype.rejectConnectionRequest = function (source, origin, reason) {\r\n        this.rejected = true;\r\n        this.logger.error(reason);\r\n        var rejection = {\r\n            glue42core: {\r\n                type: this.messages.connectionRejected.name\r\n            }\r\n        };\r\n        source.postMessage(rejection, origin);\r\n    };\r\n    return WebPlatformTransport;\r\n}());\n\nvar Connection = (function () {\r\n    function Connection(settings, logger) {\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.messageHandlers = {};\r\n        this.ids = 1;\r\n        this.registry = lib$1();\r\n        this._connected = false;\r\n        this.isTrace = false;\r\n        settings = settings || {};\r\n        settings.reconnectAttempts = settings.reconnectAttempts || 10;\r\n        settings.reconnectInterval = settings.reconnectInterval || 1000;\r\n        if (settings.inproc) {\r\n            this.transport = new InProcTransport(settings.inproc, logger.subLogger(\"inMemory\"));\r\n        }\r\n        else if (settings.sharedWorker) {\r\n            this.transport = new SharedWorkerTransport(settings.sharedWorker, logger.subLogger(\"shared-worker\"));\r\n        }\r\n        else if (settings.webPlatform) {\r\n            this.transport = new WebPlatformTransport(settings.webPlatform, logger.subLogger(\"web-platform\"), settings.identity);\r\n        }\r\n        else if (settings.ws !== undefined) {\r\n            this.transport = new WS(settings, logger.subLogger(\"ws\"));\r\n        }\r\n        else {\r\n            throw new Error(\"No connection information specified\");\r\n        }\r\n        this.isTrace = logger.canPublish(\"trace\");\r\n        logger.debug(\"starting with \" + this.transport.name() + \" transport\");\r\n        this.protocol = new GW3ProtocolImpl(this, settings, logger.subLogger(\"protocol\"));\r\n        this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\r\n        this.transport.onMessage(this.handleTransportMessage.bind(this));\r\n        if (settings.replaySpecs && settings.replaySpecs.length) {\r\n            this.replayer = new MessageReplayerImpl(settings.replaySpecs);\r\n            this.replayer.init(this);\r\n        }\r\n    }\r\n    Object.defineProperty(Connection.prototype, \"protocolVersion\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this.protocol) === null || _a === void 0 ? void 0 : _a.protocolVersion;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Connection.prototype.send = function (message, options) {\r\n        if (this.transport.sendObject &&\r\n            this.transport.isObjectBasedTransport) {\r\n            var msg = this.protocol.createObjectMessage(message);\r\n            if (this.isTrace) {\r\n                this.logger.trace(\">> \" + JSON.stringify(msg));\r\n            }\r\n            return this.transport.sendObject(msg, options);\r\n        }\r\n        else {\r\n            var strMessage = this.protocol.createStringMessage(message);\r\n            if (this.isTrace) {\r\n                this.logger.trace(\">> \" + strMessage);\r\n            }\r\n            return this.transport.send(strMessage, options);\r\n        }\r\n    };\r\n    Connection.prototype.on = function (type, messageHandler) {\r\n        type = type.toLowerCase();\r\n        if (this.messageHandlers[type] === undefined) {\r\n            this.messageHandlers[type] = {};\r\n        }\r\n        var id = this.ids++;\r\n        this.messageHandlers[type][id] = messageHandler;\r\n        return {\r\n            type: type,\r\n            id: id,\r\n        };\r\n    };\r\n    Connection.prototype.off = function (info) {\r\n        delete this.messageHandlers[info.type.toLowerCase()][info.id];\r\n    };\r\n    Object.defineProperty(Connection.prototype, \"isConnected\", {\r\n        get: function () {\r\n            return this.protocol.isLoggedIn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Connection.prototype.connected = function (callback) {\r\n        var _this = this;\r\n        return this.protocol.loggedIn(function () {\r\n            callback(_this.settings.ws || _this.settings.sharedWorker || \"\");\r\n        });\r\n    };\r\n    Connection.prototype.disconnected = function (callback) {\r\n        return this.registry.add(\"disconnected\", callback);\r\n    };\r\n    Connection.prototype.login = function (authRequest, reconnect) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var identity;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.transport.open()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        timer(\"connection\").mark(\"transport-opened\");\r\n                        identity = this.protocol.login(authRequest, reconnect);\r\n                        timer(\"connection\").mark(\"protocol-logged-in\");\r\n                        return [2, identity];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Connection.prototype.logout = function () {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.protocol.logout()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4, this.transport.close()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Connection.prototype.loggedIn = function (callback) {\r\n        return this.protocol.loggedIn(callback);\r\n    };\r\n    Connection.prototype.domain = function (domain, successMessages, errorMessages) {\r\n        return this.protocol.domain(domain, this.logger.subLogger(\"domain=\" + domain), successMessages, errorMessages);\r\n    };\r\n    Connection.prototype.authToken = function () {\r\n        return this.protocol.authToken();\r\n    };\r\n    Connection.prototype.reconnect = function () {\r\n        return this.transport.reconnect();\r\n    };\r\n    Connection.prototype.distributeMessage = function (message, type) {\r\n        var _this = this;\r\n        var handlers = this.messageHandlers[type.toLowerCase()];\r\n        if (handlers !== undefined) {\r\n            Object.keys(handlers).forEach(function (handlerId) {\r\n                var handler = handlers[handlerId];\r\n                if (handler !== undefined) {\r\n                    try {\r\n                        handler(message);\r\n                    }\r\n                    catch (error) {\r\n                        try {\r\n                            _this.logger.error(\"Message handler failed with \" + error.stack, error);\r\n                        }\r\n                        catch (loggerError) {\r\n                            console.log(\"Message handler failed\", error);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Connection.prototype.handleConnectionChanged = function (connected) {\r\n        if (this._connected === connected) {\r\n            return;\r\n        }\r\n        this._connected = connected;\r\n        if (connected) {\r\n            this.registry.execute(\"connected\");\r\n        }\r\n        else {\r\n            this.registry.execute(\"disconnected\");\r\n        }\r\n    };\r\n    Connection.prototype.handleTransportMessage = function (msg) {\r\n        var msgObj;\r\n        if (typeof msg === \"string\") {\r\n            msgObj = this.protocol.processStringMessage(msg);\r\n        }\r\n        else {\r\n            msgObj = this.protocol.processObjectMessage(msg);\r\n        }\r\n        if (this.isTrace) {\r\n            this.logger.trace(\"<< \" + JSON.stringify(msgObj));\r\n        }\r\n        this.distributeMessage(msgObj.msg, msgObj.msgType);\r\n    };\r\n    return Connection;\r\n}());\n\nvar order = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"off\"];\r\nvar Logger = (function () {\r\n    function Logger(name, parent, logFn) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.subLoggers = [];\r\n        this.logFn = console;\r\n        this.customLogFn = false;\r\n        this.name = name;\r\n        if (parent) {\r\n            this.path = parent.path + \".\" + name;\r\n        }\r\n        else {\r\n            this.path = name;\r\n        }\r\n        this.loggerFullName = \"[\" + this.path + \"]\";\r\n        this.includeTimeAndLevel = !logFn;\r\n        if (logFn) {\r\n            this.logFn = logFn;\r\n            this.customLogFn = true;\r\n        }\r\n    }\r\n    Logger.prototype.subLogger = function (name) {\r\n        var existingSub = this.subLoggers.filter(function (subLogger) {\r\n            return subLogger.name === name;\r\n        })[0];\r\n        if (existingSub !== undefined) {\r\n            return existingSub;\r\n        }\r\n        Object.keys(this).forEach(function (key) {\r\n            if (key === name) {\r\n                throw new Error(\"This sub logger name is not allowed.\");\r\n            }\r\n        });\r\n        var sub = new Logger(name, this, this.customLogFn ? this.logFn : undefined);\r\n        this.subLoggers.push(sub);\r\n        return sub;\r\n    };\r\n    Logger.prototype.publishLevel = function (level) {\r\n        var _a;\r\n        if (level) {\r\n            this._publishLevel = level;\r\n        }\r\n        return this._publishLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.publishLevel());\r\n    };\r\n    Logger.prototype.consoleLevel = function (level) {\r\n        var _a;\r\n        if (level) {\r\n            this._consoleLevel = level;\r\n        }\r\n        return this._consoleLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.consoleLevel());\r\n    };\r\n    Logger.prototype.log = function (message, level, error) {\r\n        this.publishMessage(level || \"info\", message, error);\r\n    };\r\n    Logger.prototype.trace = function (message) {\r\n        this.log(message, \"trace\");\r\n    };\r\n    Logger.prototype.debug = function (message) {\r\n        this.log(message, \"debug\");\r\n    };\r\n    Logger.prototype.info = function (message) {\r\n        this.log(message, \"info\");\r\n    };\r\n    Logger.prototype.warn = function (message) {\r\n        this.log(message, \"warn\");\r\n    };\r\n    Logger.prototype.error = function (message, err) {\r\n        this.log(message, \"error\");\r\n    };\r\n    Logger.prototype.canPublish = function (level, compareWith) {\r\n        var levelIdx = order.indexOf(level);\r\n        var restrictionIdx = order.indexOf(compareWith || this.consoleLevel() || \"trace\");\r\n        return levelIdx >= restrictionIdx;\r\n    };\r\n    Logger.prototype.publishMessage = function (level, message, error) {\r\n        var loggerName = this.loggerFullName;\r\n        if (level === \"error\" && !error) {\r\n            var e = new Error();\r\n            if (e.stack) {\r\n                message =\r\n                    message +\r\n                        \"\\n\" +\r\n                        e.stack\r\n                            .split(\"\\n\")\r\n                            .slice(3)\r\n                            .join(\"\\n\");\r\n            }\r\n        }\r\n        if (this.canPublish(level, this.publishLevel())) {\r\n            var interop = Logger.Interop;\r\n            if (interop) {\r\n                try {\r\n                    if (interop.methods({ name: Logger.InteropMethodName }).length > 0) {\r\n                        interop.invoke(Logger.InteropMethodName, {\r\n                            msg: \"\" + message,\r\n                            logger: loggerName,\r\n                            level: level\r\n                        });\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                }\r\n            }\r\n        }\r\n        if (this.canPublish(level)) {\r\n            var prefix = \"\";\r\n            if (this.includeTimeAndLevel) {\r\n                var date = new Date();\r\n                var time = date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds() + \":\" + date.getMilliseconds();\r\n                prefix = \"[\" + time + \"] [\" + level + \"] \";\r\n            }\r\n            var toPrint = \"\" + prefix + loggerName + \": \" + message;\r\n            switch (level) {\r\n                case \"trace\":\r\n                    this.logFn.debug(toPrint);\r\n                    break;\r\n                case \"debug\":\r\n                    if (this.logFn.debug) {\r\n                        this.logFn.debug(toPrint);\r\n                    }\r\n                    else {\r\n                        this.logFn.log(toPrint);\r\n                    }\r\n                    break;\r\n                case \"info\":\r\n                    this.logFn.info(toPrint);\r\n                    break;\r\n                case \"warn\":\r\n                    this.logFn.warn(toPrint);\r\n                    break;\r\n                case \"error\":\r\n                    this.logFn.error(toPrint, error);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Logger.InteropMethodName = \"T42.AppLogger.Log\";\r\n    return Logger;\r\n}());\n\nvar GW_MESSAGE_CREATE_CONTEXT = \"create-context\";\r\nvar GW_MESSAGE_ACTIVITY_CREATED = \"created\";\r\nvar GW_MESSAGE_ACTIVITY_DESTROYED = \"destroyed\";\r\nvar GW_MESSAGE_CONTEXT_CREATED = \"context-created\";\r\nvar GW_MESSAGE_CONTEXT_ADDED = \"context-added\";\r\nvar GW_MESSAGE_SUBSCRIBE_CONTEXT = \"subscribe-context\";\r\nvar GW_MESSAGE_SUBSCRIBED_CONTEXT = \"subscribed-context\";\r\nvar GW_MESSAGE_UNSUBSCRIBE_CONTEXT = \"unsubscribe-context\";\r\nvar GW_MESSAGE_DESTROY_CONTEXT = \"destroy-context\";\r\nvar GW_MESSAGE_CONTEXT_DESTROYED = \"context-destroyed\";\r\nvar GW_MESSAGE_UPDATE_CONTEXT = \"update-context\";\r\nvar GW_MESSAGE_CONTEXT_UPDATED = \"context-updated\";\r\nvar GW_MESSAGE_JOINED_ACTIVITY = \"joined\";\n\nvar ContextMessageReplaySpec = {\r\n    get name() {\r\n        return \"context\";\r\n    },\r\n    get types() {\r\n        return [\r\n            GW_MESSAGE_CREATE_CONTEXT,\r\n            GW_MESSAGE_ACTIVITY_CREATED,\r\n            GW_MESSAGE_ACTIVITY_DESTROYED,\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_CONTEXT_ADDED,\r\n            GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n            GW_MESSAGE_DESTROY_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_UPDATE_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n            GW_MESSAGE_JOINED_ACTIVITY\r\n        ];\r\n    }\r\n};\n\nvar version$1 = \"5.4.0\";\n\nfunction prepareConfig (configuration, ext, glue42gd) {\r\n    var _a, _b, _c, _d, _e;\r\n    var nodeStartingContext;\r\n    if (Utils.isNode()) {\r\n        var startingContextString = process.env._GD_STARTING_CONTEXT_;\r\n        if (startingContextString) {\r\n            try {\r\n                nodeStartingContext = JSON.parse(startingContextString);\r\n            }\r\n            catch (_f) {\r\n            }\r\n        }\r\n    }\r\n    function getConnection() {\r\n        var _a, _b, _c, _d, _e;\r\n        var gwConfig = configuration.gateway;\r\n        var protocolVersion = (_a = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.protocolVersion) !== null && _a !== void 0 ? _a : 3;\r\n        var reconnectInterval = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectInterval;\r\n        var reconnectAttempts = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectAttempts;\r\n        var defaultWs = \"ws://localhost:8385\";\r\n        var ws = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.ws;\r\n        var sharedWorker = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.sharedWorker;\r\n        var inproc = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.inproc;\r\n        var webPlatform = (_b = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.webPlatform) !== null && _b !== void 0 ? _b : undefined;\r\n        if (glue42gd) {\r\n            ws = glue42gd.gwURL;\r\n        }\r\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwURL) {\r\n            ws = nodeStartingContext.gwURL;\r\n        }\r\n        if (!ws && !sharedWorker && !inproc) {\r\n            ws = defaultWs;\r\n        }\r\n        var instanceId;\r\n        var windowId;\r\n        var pid;\r\n        var environment;\r\n        var region;\r\n        var appName = getApplication();\r\n        var uniqueAppName = appName;\r\n        if (typeof glue42gd !== \"undefined\") {\r\n            windowId = glue42gd.windowId;\r\n            pid = glue42gd.pid;\r\n            if (glue42gd.env) {\r\n                environment = glue42gd.env.env;\r\n                region = glue42gd.env.region;\r\n            }\r\n            uniqueAppName = (_c = glue42gd.application) !== null && _c !== void 0 ? _c : \"glue-app\";\r\n            instanceId = glue42gd.appInstanceId;\r\n        }\r\n        else if (Utils.isNode()) {\r\n            pid = process.pid;\r\n            if (nodeStartingContext) {\r\n                environment = nodeStartingContext.env;\r\n                region = nodeStartingContext.region;\r\n                instanceId = nodeStartingContext.instanceId;\r\n            }\r\n        }\r\n        var replaySpecs = (_e = (_d = configuration.gateway) === null || _d === void 0 ? void 0 : _d.replaySpecs) !== null && _e !== void 0 ? _e : [];\r\n        replaySpecs.push(ContextMessageReplaySpec);\r\n        return {\r\n            identity: {\r\n                application: uniqueAppName,\r\n                applicationName: appName,\r\n                windowId: windowId,\r\n                instance: instanceId,\r\n                process: pid,\r\n                region: region,\r\n                environment: environment,\r\n                api: ext.version || version$1\r\n            },\r\n            reconnectInterval: reconnectInterval,\r\n            ws: ws,\r\n            sharedWorker: sharedWorker,\r\n            webPlatform: webPlatform,\r\n            inproc: inproc,\r\n            protocolVersion: protocolVersion,\r\n            reconnectAttempts: reconnectAttempts,\r\n            replaySpecs: replaySpecs,\r\n        };\r\n    }\r\n    function getApplication() {\r\n        if (configuration.application) {\r\n            return configuration.application;\r\n        }\r\n        if (glue42gd) {\r\n            return glue42gd.applicationName;\r\n        }\r\n        var uid = shortid();\r\n        if (Utils.isNode()) {\r\n            if (nodeStartingContext) {\r\n                return nodeStartingContext.applicationConfig.name;\r\n            }\r\n            return \"NodeJS\" + uid;\r\n        }\r\n        if (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\r\n            return document.title + (\" (\" + uid + \")\");\r\n        }\r\n        return uid;\r\n    }\r\n    function getAuth() {\r\n        var _a, _b, _c;\r\n        if (typeof configuration.auth === \"string\") {\r\n            return {\r\n                token: configuration.auth\r\n            };\r\n        }\r\n        if (configuration.auth) {\r\n            return configuration.auth;\r\n        }\r\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwToken) {\r\n            return {\r\n                gatewayToken: nodeStartingContext.gwToken\r\n            };\r\n        }\r\n        if (((_a = configuration.gateway) === null || _a === void 0 ? void 0 : _a.webPlatform) || ((_b = configuration.gateway) === null || _b === void 0 ? void 0 : _b.inproc) || ((_c = configuration.gateway) === null || _c === void 0 ? void 0 : _c.sharedWorker)) {\r\n            return {\r\n                username: \"glue42\", password: \"glue42\"\r\n            };\r\n        }\r\n    }\r\n    function getLogger() {\r\n        var _a, _b;\r\n        var config = configuration.logger;\r\n        var defaultLevel = \"warn\";\r\n        if (!config) {\r\n            config = defaultLevel;\r\n        }\r\n        var gdConsoleLevel;\r\n        if (glue42gd) {\r\n            gdConsoleLevel = glue42gd.consoleLogLevel;\r\n        }\r\n        if (typeof config === \"string\") {\r\n            return { console: gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config, publish: defaultLevel };\r\n        }\r\n        return {\r\n            console: (_a = gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config.console) !== null && _a !== void 0 ? _a : defaultLevel,\r\n            publish: (_b = config.publish) !== null && _b !== void 0 ? _b : defaultLevel\r\n        };\r\n    }\r\n    var connection = getConnection();\r\n    var application = getApplication();\r\n    if (typeof window !== \"undefined\") {\r\n        var windowAsAny = window;\r\n        var containerApplication = windowAsAny.htmlContainer ?\r\n            windowAsAny.htmlContainer.containerName + \".\" + windowAsAny.htmlContainer.application : (_a = windowAsAny === null || windowAsAny === void 0 ? void 0 : windowAsAny.glue42gd) === null || _a === void 0 ? void 0 : _a.application;\r\n        if (containerApplication) {\r\n            application = containerApplication;\r\n        }\r\n    }\r\n    return {\r\n        bus: (_b = configuration.bus) !== null && _b !== void 0 ? _b : false,\r\n        application: application,\r\n        auth: getAuth(),\r\n        logger: getLogger(),\r\n        connection: connection,\r\n        metrics: (_c = configuration.metrics) !== null && _c !== void 0 ? _c : true,\r\n        contexts: (_d = configuration.contexts) !== null && _d !== void 0 ? _d : true,\r\n        version: ext.version || version$1,\r\n        libs: (_e = ext.libs) !== null && _e !== void 0 ? _e : [],\r\n        customLogger: configuration.customLogger\r\n    };\r\n}\n\nvar GW3ContextData = (function () {\r\n    function GW3ContextData(contextId, name, isAnnounced, activityId) {\r\n        this.updateCallbacks = {};\r\n        this.contextId = contextId;\r\n        this.name = name;\r\n        this.isAnnounced = isAnnounced;\r\n        this.activityId = activityId;\r\n        this.context = {};\r\n    }\r\n    GW3ContextData.prototype.hasCallbacks = function () {\r\n        return Object.keys(this.updateCallbacks).length > 0;\r\n    };\r\n    GW3ContextData.prototype.getState = function () {\r\n        if (this.isAnnounced && this.hasCallbacks()) {\r\n            return 3;\r\n        }\r\n        if (this.isAnnounced) {\r\n            return 2;\r\n        }\r\n        if (this.hasCallbacks()) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    return GW3ContextData;\r\n}());\n\nfunction applyContextDelta(context, delta, logger) {\r\n    try {\r\n        if (logger === null || logger === void 0 ? void 0 : logger.canPublish(\"trace\")) {\r\n            logger === null || logger === void 0 ? void 0 : logger.trace(\"applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context));\r\n        }\r\n        if (!delta) {\r\n            return context;\r\n        }\r\n        if (delta.reset) {\r\n            context = __assign$1({}, delta.reset);\r\n            return context;\r\n        }\r\n        context = deepClone(context, undefined);\r\n        if (delta.commands) {\r\n            for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                var command = _a[_i];\r\n                if (command.type === \"remove\") {\r\n                    deletePath(context, command.path);\r\n                }\r\n                else if (command.type === \"set\") {\r\n                    setValueToPath(context, command.value, command.path);\r\n                }\r\n            }\r\n            return context;\r\n        }\r\n        var added_1 = delta.added;\r\n        var updated_1 = delta.updated;\r\n        var removed = delta.removed;\r\n        if (added_1) {\r\n            Object.keys(added_1).forEach(function (key) {\r\n                context[key] = added_1[key];\r\n            });\r\n        }\r\n        if (updated_1) {\r\n            Object.keys(updated_1).forEach(function (key) {\r\n                mergeObjectsProperties(key, context, updated_1);\r\n            });\r\n        }\r\n        if (removed) {\r\n            removed.forEach(function (key) {\r\n                delete context[key];\r\n            });\r\n        }\r\n        return context;\r\n    }\r\n    catch (e) {\r\n        logger === null || logger === void 0 ? void 0 : logger.error(\"error applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context), e);\r\n        return context;\r\n    }\r\n}\r\nfunction deepClone(obj, hash) {\r\n    hash = hash || new WeakMap();\r\n    if (Object(obj) !== obj) {\r\n        return obj;\r\n    }\r\n    if (obj instanceof Set) {\r\n        return new Set(obj);\r\n    }\r\n    if (hash.has(obj)) {\r\n        return hash.get(obj);\r\n    }\r\n    var result = obj instanceof Date ? new Date(obj)\r\n        : obj instanceof RegExp ? new RegExp(obj.source, obj.flags)\r\n            : obj.constructor ? new obj.constructor()\r\n                : Object.create(null);\r\n    hash.set(obj, result);\r\n    return Object.assign.apply(Object, __spreadArrays([result], Object.keys(obj).map(function (key) {\r\n        var _a;\r\n        return (_a = {}, _a[key] = deepClone(obj[key], hash), _a);\r\n    })));\r\n}\r\nvar mergeObjectsProperties = function (key, what, withWhat) {\r\n    var right = withWhat[key];\r\n    if (right === undefined) {\r\n        return what;\r\n    }\r\n    var left = what[key];\r\n    if (!left || !right) {\r\n        what[key] = right;\r\n        return what;\r\n    }\r\n    if (typeof left === \"string\" ||\r\n        typeof left === \"number\" ||\r\n        typeof left === \"boolean\" ||\r\n        typeof right === \"string\" ||\r\n        typeof right === \"number\" ||\r\n        typeof right === \"boolean\" ||\r\n        Array.isArray(left) ||\r\n        Array.isArray(right)) {\r\n        what[key] = right;\r\n        return what;\r\n    }\r\n    what[key] = Object.assign({}, left, right);\r\n    return what;\r\n};\r\nfunction deepEqual(x, y) {\r\n    if (x === y) {\r\n        return true;\r\n    }\r\n    if (!(x instanceof Object) || !(y instanceof Object)) {\r\n        return false;\r\n    }\r\n    if (x.constructor !== y.constructor) {\r\n        return false;\r\n    }\r\n    for (var p in x) {\r\n        if (!x.hasOwnProperty(p)) {\r\n            continue;\r\n        }\r\n        if (!y.hasOwnProperty(p)) {\r\n            return false;\r\n        }\r\n        if (x[p] === y[p]) {\r\n            continue;\r\n        }\r\n        if (typeof (x[p]) !== \"object\") {\r\n            return false;\r\n        }\r\n        if (!deepEqual(x[p], y[p])) {\r\n            return false;\r\n        }\r\n    }\r\n    for (var p in y) {\r\n        if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction setValueToPath(obj, value, path) {\r\n    var pathArr = path.split(\".\");\r\n    var i;\r\n    for (i = 0; i < pathArr.length - 1; i++) {\r\n        if (!obj[pathArr[i]]) {\r\n            obj[pathArr[i]] = {};\r\n        }\r\n        if (typeof obj[pathArr[i]] !== \"object\") {\r\n            obj[pathArr[i]] = {};\r\n        }\r\n        obj = obj[pathArr[i]];\r\n    }\r\n    obj[pathArr[i]] = value;\r\n}\r\nfunction isSubset(superObj, subObj) {\r\n    return Object.keys(subObj).every(function (ele) {\r\n        if (typeof subObj[ele] === \"object\") {\r\n            return isSubset((superObj === null || superObj === void 0 ? void 0 : superObj[ele]) || {}, subObj[ele] || {});\r\n        }\r\n        return subObj[ele] === (superObj === null || superObj === void 0 ? void 0 : superObj[ele]);\r\n    });\r\n}\r\nfunction deletePath(obj, path) {\r\n    var pathArr = path.split(\".\");\r\n    var i;\r\n    for (i = 0; i < pathArr.length - 1; i++) {\r\n        if (!obj[pathArr[i]]) {\r\n            return;\r\n        }\r\n        obj = obj[pathArr[i]];\r\n    }\r\n    delete obj[pathArr[i]];\r\n}\n\nvar GW3Bridge = (function () {\r\n    function GW3Bridge(config) {\r\n        var _this = this;\r\n        var _a;\r\n        this._contextNameToData = {};\r\n        this._gw3Subscriptions = [];\r\n        this._nextCallbackSubscriptionNumber = 0;\r\n        this._contextNameToId = {};\r\n        this._contextIdToName = {};\r\n        this._protocolVersion = undefined;\r\n        this._connection = config.connection;\r\n        this._logger = config.logger;\r\n        this._gw3Session = this._connection.domain(\"global\", [\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n        ]);\r\n        this.subscribeToContextCreatedMessages();\r\n        this.subscribeToContextUpdatedMessages();\r\n        this.subscribeToContextDestroyedMessages();\r\n        (_a = this._connection.replayer) === null || _a === void 0 ? void 0 : _a.drain(ContextMessageReplaySpec.name, function (message) {\r\n            var type = message.type;\r\n            if (!type) {\r\n                return;\r\n            }\r\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\r\n                type === GW_MESSAGE_CONTEXT_ADDED ||\r\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\r\n                _this.handleContextCreatedMessage(message);\r\n            }\r\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\r\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\r\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                _this.handleContextUpdatedMessage(message);\r\n            }\r\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\r\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n                _this.handleContextDestroyedMessage(message);\r\n            }\r\n        });\r\n    }\r\n    Object.defineProperty(GW3Bridge.prototype, \"protocolVersion\", {\r\n        get: function () {\r\n            var _a;\r\n            if (!this._protocolVersion) {\r\n                var contextsDomainInfo = this._connection.availableDomains.find(function (d) { return d.uri === \"context\"; });\r\n                this._protocolVersion = (_a = contextsDomainInfo === null || contextsDomainInfo === void 0 ? void 0 : contextsDomainInfo.version) !== null && _a !== void 0 ? _a : 1;\r\n            }\r\n            return this._protocolVersion;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GW3Bridge.prototype, \"setPathSupported\", {\r\n        get: function () {\r\n            return this.protocolVersion >= 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GW3Bridge.prototype.dispose = function () {\r\n        for (var _i = 0, _a = this._gw3Subscriptions; _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            this._connection.off(sub);\r\n        }\r\n        this._gw3Subscriptions.length = 0;\r\n        for (var contextName in this._contextNameToData) {\r\n            if (this._contextNameToId.hasOwnProperty(contextName)) {\r\n                delete this._contextNameToData[contextName];\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.createContext = function (name, data) {\r\n        var _this = this;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_CREATE_CONTEXT,\r\n            domain: \"global\",\r\n            name: name,\r\n            data: data,\r\n            lifetime: \"retained\",\r\n        })\r\n            .then(function (createContextMsg) {\r\n            _this._contextNameToId[name] = createContextMsg.context_id;\r\n            _this._contextIdToName[createContextMsg.context_id] = name;\r\n            var contextData = _this._contextNameToData[name] || new GW3ContextData(createContextMsg.context_id, name, true, undefined);\r\n            contextData.isAnnounced = true;\r\n            contextData.name = name;\r\n            contextData.contextId = createContextMsg.context_id;\r\n            contextData.context = data;\r\n            _this._contextNameToData[name] = contextData;\r\n            return createContextMsg.context_id;\r\n        });\r\n    };\r\n    GW3Bridge.prototype.all = function () {\r\n        var _this = this;\r\n        return Object.keys(this._contextNameToData)\r\n            .filter(function (name) { return _this._contextNameToData[name].isAnnounced; });\r\n    };\r\n    GW3Bridge.prototype.update = function (name, delta) {\r\n        var _a;\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var contextData, currentContext, calculatedDelta;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        contextData = this._contextNameToData[name];\r\n                        if (!contextData || !contextData.isAnnounced) {\r\n                            return [2, this.createContext(name, delta)];\r\n                        }\r\n                        currentContext = contextData.context;\r\n                        if (!!contextData.hasCallbacks()) return [3, 2];\r\n                        return [4, this.get(contextData.name)];\r\n                    case 1:\r\n                        currentContext = _b.sent();\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        calculatedDelta = this.protocolVersion === 2 ?\r\n                            this.calculateContextDeltaV2(currentContext, delta) :\r\n                            this.calculateContextDeltaV1(currentContext, delta);\r\n                        if (!Object.keys(calculatedDelta.added).length\r\n                            && !Object.keys(calculatedDelta.updated).length\r\n                            && !calculatedDelta.removed.length\r\n                            && !((_a = calculatedDelta.commands) === null || _a === void 0 ? void 0 : _a.length)) {\r\n                            return [2, Promise.resolve()];\r\n                        }\r\n                        return [2, this._gw3Session\r\n                                .send({\r\n                                type: GW_MESSAGE_UPDATE_CONTEXT,\r\n                                domain: \"global\",\r\n                                context_id: contextData.contextId,\r\n                                delta: calculatedDelta,\r\n                            }, {}, { skipPeerId: false })\r\n                                .then(function (gwResponse) {\r\n                                _this.handleUpdated(contextData, calculatedDelta, {\r\n                                    updaterId: gwResponse.peer_id\r\n                                });\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.set = function (name, data) {\r\n        var _this = this;\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            return this.createContext(name, data);\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UPDATE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n            delta: { reset: data },\r\n        }, {}, { skipPeerId: false })\r\n            .then(function (gwResponse) {\r\n            _this.handleUpdated(contextData, { reset: data, added: {}, removed: [], updated: {} }, { updaterId: gwResponse.peer_id });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.setPath = function (name, path, value) {\r\n        if (!this.setPathSupported) {\r\n            return Promise.reject(\"glue.contexts.setPath operation is not supported, use Glue42 3.10 or later\");\r\n        }\r\n        return this.setPaths(name, [{ path: path, value: value }]);\r\n    };\r\n    GW3Bridge.prototype.setPaths = function (name, pathValues) {\r\n        var _this = this;\r\n        if (!this.setPathSupported) {\r\n            return Promise.reject(\"glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later\");\r\n        }\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            var obj = {};\r\n            for (var _i = 0, pathValues_1 = pathValues; _i < pathValues_1.length; _i++) {\r\n                var pathValue = pathValues_1[_i];\r\n                setValueToPath(obj, pathValue.value, pathValue.path);\r\n            }\r\n            return this.createContext(name, obj);\r\n        }\r\n        var commands = [];\r\n        for (var _a = 0, pathValues_2 = pathValues; _a < pathValues_2.length; _a++) {\r\n            var pathValue = pathValues_2[_a];\r\n            if (pathValue.value === null) {\r\n                commands.push({ type: \"remove\", path: pathValue.path });\r\n            }\r\n            else {\r\n                commands.push({ type: \"set\", path: pathValue.path, value: pathValue.value });\r\n            }\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UPDATE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n            delta: { commands: commands }\r\n        }, {}, { skipPeerId: false })\r\n            .then(function (gwResponse) {\r\n            _this.handleUpdated(contextData, { added: {}, removed: [], updated: {}, commands: commands }, { updaterId: gwResponse.peer_id });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.get = function (name) {\r\n        var _this = this;\r\n        var _a;\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            return Promise.resolve({});\r\n        }\r\n        if (contextData && !contextData.hasCallbacks()) {\r\n            return new Promise(function (resolve, _) { return __awaiter$1(_this, void 0, void 0, function () {\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    this.subscribe(name, function (data, _d, _r, un) {\r\n                        _this.unsubscribe(un);\r\n                        resolve(data);\r\n                    });\r\n                    return [2];\r\n                });\r\n            }); });\r\n        }\r\n        var context = (_a = contextData === null || contextData === void 0 ? void 0 : contextData.context) !== null && _a !== void 0 ? _a : {};\r\n        return Promise.resolve(context);\r\n    };\r\n    GW3Bridge.prototype.subscribe = function (name, callback) {\r\n        var thisCallbackSubscriptionNumber = this._nextCallbackSubscriptionNumber;\r\n        this._nextCallbackSubscriptionNumber += 1;\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData ||\r\n            !contextData.isAnnounced) {\r\n            contextData = contextData || new GW3ContextData(undefined, name, false, undefined);\r\n            this._contextNameToData[name] = contextData;\r\n            contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n            return Promise.resolve(thisCallbackSubscriptionNumber);\r\n        }\r\n        var hadCallbacks = contextData.hasCallbacks();\r\n        contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n        if (!hadCallbacks) {\r\n            if (!contextData.joinedActivity) {\r\n                if (contextData.context && contextData.sentExplicitSubscription) {\r\n                    var clone = deepClone(contextData.context);\r\n                    callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                    return Promise.resolve(thisCallbackSubscriptionNumber);\r\n                }\r\n                return this.sendSubscribe(contextData)\r\n                    .then(function () { return thisCallbackSubscriptionNumber; });\r\n            }\r\n            else {\r\n                var clone = deepClone(contextData.context);\r\n                callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                return Promise.resolve(thisCallbackSubscriptionNumber);\r\n            }\r\n        }\r\n        else {\r\n            var clone = deepClone(contextData.context);\r\n            callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n            return Promise.resolve(thisCallbackSubscriptionNumber);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.unsubscribe = function (subscriptionKey) {\r\n        for (var _i = 0, _a = Object.keys(this._contextNameToData); _i < _a.length; _i++) {\r\n            var name_1 = _a[_i];\r\n            var contextId = this._contextNameToId[name_1];\r\n            var contextData = this._contextNameToData[name_1];\r\n            if (!contextData) {\r\n                return;\r\n            }\r\n            var hadCallbacks = contextData.hasCallbacks();\r\n            delete contextData.updateCallbacks[subscriptionKey];\r\n            if (contextData.isAnnounced &&\r\n                hadCallbacks &&\r\n                !contextData.hasCallbacks() &&\r\n                contextData.sentExplicitSubscription) {\r\n                this.sendUnsubscribe(contextData);\r\n            }\r\n            if (!contextData.isAnnounced &&\r\n                !contextData.hasCallbacks()) {\r\n                delete this._contextNameToData[name_1];\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.destroy = function (name) {\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData) {\r\n            return Promise.reject(\"context with \" + name + \" does not exist\");\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_DESTROY_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.handleUpdated = function (contextData, delta, extraData) {\r\n        var oldContext = contextData.context;\r\n        contextData.context = applyContextDelta(contextData.context, delta, this._logger);\r\n        if (this._contextNameToData[contextData.name] === contextData &&\r\n            !deepEqual(oldContext, contextData.context)) {\r\n            this.invokeUpdateCallbacks(contextData, delta, extraData);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextCreatedMessages = function () {\r\n        var createdMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_ADDED,\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_ACTIVITY_CREATED,\r\n        ];\r\n        for (var _i = 0, createdMessageTypes_1 = createdMessageTypes; _i < createdMessageTypes_1.length; _i++) {\r\n            var createdMessageType = createdMessageTypes_1[_i];\r\n            var sub = this._connection.on(createdMessageType, this.handleContextCreatedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextCreatedMessage = function (contextCreatedMsg) {\r\n        var createdMessageType = contextCreatedMsg.type;\r\n        if (createdMessageType === GW_MESSAGE_ACTIVITY_CREATED) {\r\n            this._contextNameToId[contextCreatedMsg.activity_id] = contextCreatedMsg.context_id;\r\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.activity_id;\r\n        }\r\n        else if (createdMessageType === GW_MESSAGE_CONTEXT_ADDED) {\r\n            this._contextNameToId[contextCreatedMsg.name] = contextCreatedMsg.context_id;\r\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.name;\r\n        }\r\n        var name = this._contextIdToName[contextCreatedMsg.context_id];\r\n        if (!name) {\r\n            throw new Error(\"Received created event for context with unknown name: \" + contextCreatedMsg.context_id);\r\n        }\r\n        if (!this._contextNameToId[name]) {\r\n            throw new Error(\"Received created event for context with unknown id: \" + contextCreatedMsg.context_id);\r\n        }\r\n        var contextData = this._contextNameToData[name];\r\n        if (contextData) {\r\n            if (contextData.isAnnounced) {\r\n                return;\r\n            }\r\n            else {\r\n                if (!contextData.hasCallbacks()) {\r\n                    throw new Error(\"Assertion failure: contextData.hasCallbacks()\");\r\n                }\r\n                contextData.isAnnounced = true;\r\n                contextData.contextId = contextCreatedMsg.context_id;\r\n                contextData.activityId = contextCreatedMsg.activity_id;\r\n                if (!contextData.sentExplicitSubscription) {\r\n                    this.sendSubscribe(contextData);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._contextNameToData[name] = contextData =\r\n                new GW3ContextData(contextCreatedMsg.context_id, name, true, contextCreatedMsg.activity_id);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextUpdatedMessages = function () {\r\n        var updatedMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_JOINED_ACTIVITY,\r\n        ];\r\n        for (var _i = 0, updatedMessageTypes_1 = updatedMessageTypes; _i < updatedMessageTypes_1.length; _i++) {\r\n            var updatedMessageType = updatedMessageTypes_1[_i];\r\n            var sub = this._connection.on(updatedMessageType, this.handleContextUpdatedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextUpdatedMessage = function (contextUpdatedMsg) {\r\n        var updatedMessageType = contextUpdatedMsg.type;\r\n        var contextId = contextUpdatedMsg.context_id;\r\n        var contextData = this._contextNameToData[this._contextIdToName[contextId]];\r\n        var justSeen = !contextData || !contextData.isAnnounced;\r\n        if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n            if (!contextData) {\r\n                contextData = new GW3ContextData(contextId, contextUpdatedMsg.activity_id, true, contextUpdatedMsg.activity_id);\r\n                this._contextNameToData[contextUpdatedMsg.activity_id] = contextData;\r\n                this._contextIdToName[contextId] = contextUpdatedMsg.activity_id;\r\n                this._contextNameToId[contextUpdatedMsg.activity_id] = contextId;\r\n            }\r\n            else {\r\n                contextData.contextId = contextId;\r\n                contextData.isAnnounced = true;\r\n                contextData.activityId = contextUpdatedMsg.activity_id;\r\n            }\r\n            contextData.joinedActivity = true;\r\n        }\r\n        else {\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n                    contextData = contextData || new GW3ContextData(contextId, contextUpdatedMsg.name, true, undefined);\r\n                    contextData.sentExplicitSubscription = true;\r\n                    this._contextNameToData[contextUpdatedMsg.name] = contextData;\r\n                    this._contextIdToName[contextId] = contextUpdatedMsg.name;\r\n                    this._contextNameToId[contextUpdatedMsg.name] = contextId;\r\n                }\r\n                else {\r\n                    this._logger.error(\"Received 'update' for unknown context: \" + contextId);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        var oldContext = contextData.context;\r\n        if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n            contextData.context = contextUpdatedMsg.data || {};\r\n        }\r\n        else if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n            contextData.context = contextUpdatedMsg.context_snapshot || {};\r\n        }\r\n        else if (updatedMessageType === GW_MESSAGE_CONTEXT_UPDATED) {\r\n            contextData.context = applyContextDelta(contextData.context, contextUpdatedMsg.delta, this._logger);\r\n        }\r\n        else {\r\n            throw new Error(\"Unrecognized context update message \" + updatedMessageType);\r\n        }\r\n        if (justSeen ||\r\n            !deepEqual(contextData.context, oldContext) ||\r\n            updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n            this.invokeUpdateCallbacks(contextData, contextUpdatedMsg.delta, { updaterId: contextUpdatedMsg.updater_id });\r\n        }\r\n    };\r\n    GW3Bridge.prototype.invokeUpdateCallbacks = function (contextData, delta, extraData) {\r\n        delta = delta || { added: {}, updated: {}, reset: {}, removed: [] };\r\n        if (delta.commands) {\r\n            delta.added = delta.updated = delta.reset = {};\r\n            delta.removed = [];\r\n            for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                var command = _a[_i];\r\n                if (command.type === \"remove\") {\r\n                    if (command.path.indexOf(\".\") === -1) {\r\n                        delta.removed.push(command.path);\r\n                    }\r\n                    setValueToPath(delta.updated, null, command.path);\r\n                }\r\n                else if (command.type === \"set\") {\r\n                    setValueToPath(delta.updated, command.value, command.path);\r\n                }\r\n            }\r\n        }\r\n        for (var updateCallbackIndex in contextData.updateCallbacks) {\r\n            if (contextData.updateCallbacks.hasOwnProperty(updateCallbackIndex)) {\r\n                try {\r\n                    var updateCallback = contextData.updateCallbacks[updateCallbackIndex];\r\n                    updateCallback(deepClone(contextData.context), Object.assign({}, delta.added || {}, delta.updated || {}, delta.reset || {}), delta.removed, parseInt(updateCallbackIndex, 10), extraData);\r\n                }\r\n                catch (err) {\r\n                    this._logger.debug(\"callback error: \" + JSON.stringify(err));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextDestroyedMessages = function () {\r\n        var destroyedMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_ACTIVITY_DESTROYED,\r\n        ];\r\n        for (var _i = 0, destroyedMessageTypes_1 = destroyedMessageTypes; _i < destroyedMessageTypes_1.length; _i++) {\r\n            var destroyedMessageType = destroyedMessageTypes_1[_i];\r\n            var sub = this._connection.on(destroyedMessageType, this.handleContextDestroyedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextDestroyedMessage = function (destroyedMsg) {\r\n        var destroyedMessageType = destroyedMsg.type;\r\n        var contextId;\r\n        var name;\r\n        if (destroyedMessageType === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n            name = destroyedMsg.activity_id;\r\n            contextId = this._contextNameToId[name];\r\n            if (!contextId) {\r\n                this._logger.error(\"Received 'destroyed' for unknown activity: \" + destroyedMsg.activity_id);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            contextId = destroyedMsg.context_id;\r\n            name = this._contextIdToName[contextId];\r\n            if (!name) {\r\n                this._logger.error(\"Received 'destroyed' for unknown context: \" + destroyedMsg.context_id);\r\n                return;\r\n            }\r\n        }\r\n        delete this._contextIdToName[contextId];\r\n        delete this._contextNameToId[name];\r\n        var contextData = this._contextNameToData[name];\r\n        delete this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            this._logger.error(\"Received 'destroyed' for unknown context: \" + contextId);\r\n            return;\r\n        }\r\n    };\r\n    GW3Bridge.prototype.sendSubscribe = function (contextData) {\r\n        contextData.sentExplicitSubscription = true;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.sendUnsubscribe = function (contextData) {\r\n        contextData.sentExplicitSubscription = false;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.calculateContextDeltaV1 = function (from, to) {\r\n        var delta = { added: {}, updated: {}, removed: [], reset: undefined };\r\n        if (from) {\r\n            for (var _i = 0, _a = Object.keys(from); _i < _a.length; _i++) {\r\n                var x = _a[_i];\r\n                if (Object.keys(to).indexOf(x) !== -1\r\n                    && to[x] !== null\r\n                    && !deepEqual(from[x], to[x])) {\r\n                    delta.updated[x] = to[x];\r\n                }\r\n            }\r\n        }\r\n        for (var _b = 0, _c = Object.keys(to); _b < _c.length; _b++) {\r\n            var x = _c[_b];\r\n            if (!from || (Object.keys(from).indexOf(x) === -1)) {\r\n                if (to[x] !== null) {\r\n                    delta.added[x] = to[x];\r\n                }\r\n            }\r\n            else if (to[x] === null) {\r\n                delta.removed.push(x);\r\n            }\r\n        }\r\n        return delta;\r\n    };\r\n    GW3Bridge.prototype.calculateContextDeltaV2 = function (from, to) {\r\n        var _a, _b;\r\n        var delta = { added: {}, updated: {}, removed: [], reset: undefined, commands: [] };\r\n        for (var _i = 0, _c = Object.keys(to); _i < _c.length; _i++) {\r\n            var x = _c[_i];\r\n            if (to[x] !== null) {\r\n                var fromX = from ? from[x] : null;\r\n                if (!deepEqual(fromX, to[x])) {\r\n                    (_a = delta.commands) === null || _a === void 0 ? void 0 : _a.push({ type: \"set\", path: x, value: to[x] });\r\n                }\r\n            }\r\n            else {\r\n                (_b = delta.commands) === null || _b === void 0 ? void 0 : _b.push({ type: \"remove\", path: x });\r\n            }\r\n        }\r\n        return delta;\r\n    };\r\n    return GW3Bridge;\r\n}());\n\nvar ContextsModule = (function () {\r\n    function ContextsModule(config) {\r\n        this._bridge = new GW3Bridge(config);\r\n    }\r\n    ContextsModule.prototype.all = function () {\r\n        return this._bridge.all();\r\n    };\r\n    ContextsModule.prototype.update = function (name, data) {\r\n        this.checkName(name);\r\n        this.checkData(data);\r\n        return this._bridge.update(name, data);\r\n    };\r\n    ContextsModule.prototype.set = function (name, data) {\r\n        this.checkName(name);\r\n        this.checkData(data);\r\n        return this._bridge.set(name, data);\r\n    };\r\n    ContextsModule.prototype.setPath = function (name, path, data) {\r\n        this.checkName(name);\r\n        this.checkPath(path);\r\n        var isTopLevelPath = path === \"\";\r\n        if (isTopLevelPath) {\r\n            this.checkData(data);\r\n            return this.set(name, data);\r\n        }\r\n        return this._bridge.setPath(name, path, data);\r\n    };\r\n    ContextsModule.prototype.setPaths = function (name, paths) {\r\n        this.checkName(name);\r\n        if (!Array.isArray(paths)) {\r\n            throw new Error(\"Please provide the paths as an array of PathValues!\");\r\n        }\r\n        for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\r\n            var _a = paths_1[_i], path = _a.path, value = _a.value;\r\n            this.checkPath(path);\r\n            var isTopLevelPath = path === \"\";\r\n            if (isTopLevelPath) {\r\n                this.checkData(value);\r\n            }\r\n        }\r\n        return this._bridge.setPaths(name, paths);\r\n    };\r\n    ContextsModule.prototype.subscribe = function (name, callback) {\r\n        var _this = this;\r\n        this.checkName(name);\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Please provide the callback as a function!\");\r\n        }\r\n        return this._bridge\r\n            .subscribe(name, function (data, delta, removed, key, extraData) { return callback(data, delta, removed, function () { return _this._bridge.unsubscribe(key); }, extraData); })\r\n            .then(function (key) {\r\n            return function () {\r\n                _this._bridge.unsubscribe(key);\r\n            };\r\n        });\r\n    };\r\n    ContextsModule.prototype.get = function (name) {\r\n        this.checkName(name);\r\n        return this._bridge.get(name);\r\n    };\r\n    ContextsModule.prototype.ready = function () {\r\n        return Promise.resolve(this);\r\n    };\r\n    ContextsModule.prototype.destroy = function (name) {\r\n        this.checkName(name);\r\n        return this._bridge.destroy(name);\r\n    };\r\n    Object.defineProperty(ContextsModule.prototype, \"setPathSupported\", {\r\n        get: function () {\r\n            return this._bridge.setPathSupported;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContextsModule.prototype.checkName = function (name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n            throw new Error(\"Please provide the name as a non-empty string!\");\r\n        }\r\n    };\r\n    ContextsModule.prototype.checkPath = function (path) {\r\n        if (typeof path !== \"string\") {\r\n            throw new Error(\"Please provide the path as a dot delimited string!\");\r\n        }\r\n    };\r\n    ContextsModule.prototype.checkData = function (data) {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Please provide the data as an object!\");\r\n        }\r\n    };\r\n    return ContextsModule;\r\n}());\n\nfunction promisify (promise, successCallback, errorCallback) {\r\n    if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\r\n        return promise;\r\n    }\r\n    if (typeof successCallback !== \"function\") {\r\n        successCallback = function () { };\r\n    }\r\n    else if (typeof errorCallback !== \"function\") {\r\n        errorCallback = function () { };\r\n    }\r\n    return promise.then(successCallback, errorCallback);\r\n}\n\nfunction rejectAfter(ms, promise, error) {\r\n    if (ms === void 0) { ms = 0; }\r\n    var timeout;\r\n    promise.finally(function () {\r\n        if (timeout) {\r\n            clearTimeout(timeout);\r\n        }\r\n    });\r\n    return new Promise(function (resolve, reject) {\r\n        timeout = setTimeout(function () { return reject(error); }, ms);\r\n    });\r\n}\n\nvar InvokeStatus;\r\n(function (InvokeStatus) {\r\n    InvokeStatus[InvokeStatus[\"Success\"] = 0] = \"Success\";\r\n    InvokeStatus[InvokeStatus[\"Error\"] = 1] = \"Error\";\r\n})(InvokeStatus || (InvokeStatus = {}));\r\nvar Client = (function () {\r\n    function Client(protocol, repo, instance, configuration) {\r\n        this.protocol = protocol;\r\n        this.repo = repo;\r\n        this.instance = instance;\r\n        this.configuration = configuration;\r\n    }\r\n    Client.prototype.subscribe = function (method, options, successCallback, errorCallback, existingSub) {\r\n        var _this = this;\r\n        var callProtocolSubscribe = function (targetServers, stream, successProxy, errorProxy) {\r\n            var _a;\r\n            options.methodResponseTimeout = (_a = options.methodResponseTimeout) !== null && _a !== void 0 ? _a : options.waitTimeoutMs;\r\n            _this.protocol.client.subscribe(stream, options, targetServers, successProxy, errorProxy, existingSub);\r\n        };\r\n        var promise = new Promise(function (resolve, reject) {\r\n            var successProxy = function (sub) {\r\n                resolve(sub);\r\n            };\r\n            var errorProxy = function (err) {\r\n                reject(err);\r\n            };\r\n            if (!method) {\r\n                reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                return;\r\n            }\r\n            var methodDef;\r\n            if (typeof method === \"string\") {\r\n                methodDef = { name: method };\r\n            }\r\n            else {\r\n                methodDef = method;\r\n            }\r\n            if (!methodDef.name) {\r\n                reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                return;\r\n            }\r\n            if (options === undefined) {\r\n                options = {};\r\n            }\r\n            var target = options.target;\r\n            if (target === undefined) {\r\n                target = \"best\";\r\n            }\r\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\") {\r\n                reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\", \\\"best\\\", or an instance.\"));\r\n                return;\r\n            }\r\n            if (options.methodResponseTimeout === undefined) {\r\n                options.methodResponseTimeout = options.method_response_timeout;\r\n                if (options.methodResponseTimeout === undefined) {\r\n                    options.methodResponseTimeout = _this.configuration.methodResponseTimeout;\r\n                }\r\n            }\r\n            if (options.waitTimeoutMs === undefined) {\r\n                options.waitTimeoutMs = options.wait_for_method_timeout;\r\n                if (options.waitTimeoutMs === undefined) {\r\n                    options.waitTimeoutMs = _this.configuration.waitTimeoutMs;\r\n                }\r\n            }\r\n            var delayStep = 500;\r\n            var delayTillNow = 0;\r\n            var currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n            if (currentServers.length > 0) {\r\n                callProtocolSubscribe(currentServers, currentServers[0].methods[0], successProxy, errorProxy);\r\n            }\r\n            else {\r\n                var retry_1 = function () {\r\n                    if (!target || !(options.waitTimeoutMs)) {\r\n                        return;\r\n                    }\r\n                    delayTillNow += delayStep;\r\n                    currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n                    if (currentServers.length > 0) {\r\n                        var streamInfo = currentServers[0].methods[0];\r\n                        callProtocolSubscribe(currentServers, streamInfo, successProxy, errorProxy);\r\n                    }\r\n                    else if (delayTillNow >= options.waitTimeoutMs) {\r\n                        var def = typeof method === \"string\" ? { name: method } : method;\r\n                        callProtocolSubscribe(currentServers, def, successProxy, errorProxy);\r\n                    }\r\n                    else {\r\n                        setTimeout(retry_1, delayStep);\r\n                    }\r\n                };\r\n                setTimeout(retry_1, delayStep);\r\n            }\r\n        });\r\n        return promisify(promise, successCallback, errorCallback);\r\n    };\r\n    Client.prototype.servers = function (methodFilter) {\r\n        var filterCopy = methodFilter === undefined\r\n            ? undefined\r\n            : __assign$1({}, methodFilter);\r\n        return this.getServers(filterCopy).map(function (serverMethodMap) {\r\n            return serverMethodMap.server.instance;\r\n        });\r\n    };\r\n    Client.prototype.methods = function (methodFilter) {\r\n        if (typeof methodFilter === \"string\") {\r\n            methodFilter = { name: methodFilter };\r\n        }\r\n        else {\r\n            methodFilter = __assign$1({}, methodFilter);\r\n        }\r\n        return this.getMethods(methodFilter);\r\n    };\r\n    Client.prototype.methodsForInstance = function (instance) {\r\n        return this.getMethodsForInstance(instance);\r\n    };\r\n    Client.prototype.methodAdded = function (callback) {\r\n        return this.repo.onMethodAdded(callback);\r\n    };\r\n    Client.prototype.methodRemoved = function (callback) {\r\n        return this.repo.onMethodRemoved(callback);\r\n    };\r\n    Client.prototype.serverAdded = function (callback) {\r\n        return this.repo.onServerAdded(callback);\r\n    };\r\n    Client.prototype.serverRemoved = function (callback) {\r\n        return this.repo.onServerRemoved(function (server, reason) {\r\n            callback(server, reason);\r\n        });\r\n    };\r\n    Client.prototype.serverMethodAdded = function (callback) {\r\n        return this.repo.onServerMethodAdded(function (server, method) {\r\n            callback({ server: server, method: method });\r\n        });\r\n    };\r\n    Client.prototype.serverMethodRemoved = function (callback) {\r\n        return this.repo.onServerMethodRemoved(function (server, method) {\r\n            callback({ server: server, method: method });\r\n        });\r\n    };\r\n    Client.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var getInvokePromise;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                getInvokePromise = function () { return __awaiter$1(_this, void 0, void 0, function () {\r\n                    var methodDefinition, serversMethodMap, err_1, method, errorObj, timeout, additionalOptionsCopy, invokePromises, invocationMessages, results, allRejected;\r\n                    var _this = this;\r\n                    var _a, _b, _c;\r\n                    return __generator(this, function (_d) {\r\n                        switch (_d.label) {\r\n                            case 0:\r\n                                if (typeof methodFilter === \"string\") {\r\n                                    methodDefinition = { name: methodFilter };\r\n                                }\r\n                                else {\r\n                                    methodDefinition = __assign$1({}, methodFilter);\r\n                                }\r\n                                if (!methodDefinition.name) {\r\n                                    return [2, Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\")];\r\n                                }\r\n                                if (!argumentObj) {\r\n                                    argumentObj = {};\r\n                                }\r\n                                if (!target) {\r\n                                    target = \"best\";\r\n                                }\r\n                                if (typeof target === \"string\" && target !== \"all\" && target !== \"best\" && target !== \"skipMine\") {\r\n                                    return [2, Promise.reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\" and \\\"best\\\".\"))];\r\n                                }\r\n                                if (!additionalOptions) {\r\n                                    additionalOptions = {};\r\n                                }\r\n                                if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                    additionalOptions.methodResponseTimeoutMs = additionalOptions.method_response_timeout;\r\n                                    if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                        additionalOptions.methodResponseTimeoutMs = this.configuration.methodResponseTimeout;\r\n                                    }\r\n                                }\r\n                                if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                    additionalOptions.waitTimeoutMs = additionalOptions.wait_for_method_timeout;\r\n                                    if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                        additionalOptions.waitTimeoutMs = this.configuration.waitTimeoutMs;\r\n                                    }\r\n                                }\r\n                                if (additionalOptions.waitTimeoutMs !== undefined && typeof additionalOptions.waitTimeoutMs !== \"number\") {\r\n                                    return [2, Promise.reject(new Error(\"\\\"\" + additionalOptions.waitTimeoutMs + \"\\\" is not a valid number for \\\"waitTimeoutMs\\\" \"))];\r\n                                }\r\n                                if (typeof argumentObj !== \"object\") {\r\n                                    return [2, Promise.reject(new Error(\"The method arguments must be an object. method: \" + methodDefinition.name))];\r\n                                }\r\n                                serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                                if (!(serversMethodMap.length === 0)) return [3, 4];\r\n                                _d.label = 1;\r\n                            case 1:\r\n                                _d.trys.push([1, 3, , 4]);\r\n                                return [4, this.tryToAwaitForMethods(methodDefinition, target, additionalOptions)];\r\n                            case 2:\r\n                                serversMethodMap = _d.sent();\r\n                                return [3, 4];\r\n                            case 3:\r\n                                err_1 = _d.sent();\r\n                                method = __assign$1(__assign$1({}, methodDefinition), { getServers: function () { return []; }, supportsStreaming: false, objectTypes: (_a = methodDefinition.objectTypes) !== null && _a !== void 0 ? _a : [], flags: (_c = (_b = methodDefinition.flags) === null || _b === void 0 ? void 0 : _b.metadata) !== null && _c !== void 0 ? _c : {} });\r\n                                errorObj = {\r\n                                    method: method,\r\n                                    called_with: argumentObj,\r\n                                    message: \"Can not find a method matching \" + JSON.stringify(methodFilter) + \" with server filter \" + JSON.stringify(target),\r\n                                    executed_by: undefined,\r\n                                    returned: undefined,\r\n                                    status: undefined,\r\n                                };\r\n                                return [2, Promise.reject(errorObj)];\r\n                            case 4:\r\n                                timeout = additionalOptions.methodResponseTimeoutMs;\r\n                                additionalOptionsCopy = additionalOptions;\r\n                                invokePromises = serversMethodMap.map(function (serversMethodPair) {\r\n                                    var invId = shortid();\r\n                                    var method = serversMethodPair.methods[0];\r\n                                    var server = serversMethodPair.server;\r\n                                    var invokePromise = _this.protocol.client.invoke(invId, method, argumentObj, server, additionalOptionsCopy);\r\n                                    return Promise.race([\r\n                                        invokePromise,\r\n                                        rejectAfter(timeout, invokePromise, {\r\n                                            invocationId: invId,\r\n                                            message: \"Invocation timeout (\" + timeout + \" ms) reached for method name: \" + (method === null || method === void 0 ? void 0 : method.name) + \", target instance: \" + JSON.stringify(server.instance) + \", options: \" + JSON.stringify(additionalOptionsCopy),\r\n                                            status: InvokeStatus.Error,\r\n                                        })\r\n                                    ]);\r\n                                });\r\n                                return [4, Promise.all(invokePromises)];\r\n                            case 5:\r\n                                invocationMessages = _d.sent();\r\n                                results = this.getInvocationResultObj(invocationMessages, methodDefinition, argumentObj);\r\n                                allRejected = invocationMessages.every(function (result) { return result.status === InvokeStatus.Error; });\r\n                                if (allRejected) {\r\n                                    return [2, Promise.reject(results)];\r\n                                }\r\n                                return [2, results];\r\n                        }\r\n                    });\r\n                }); };\r\n                return [2, promisify(getInvokePromise(), success, error)];\r\n            });\r\n        });\r\n    };\r\n    Client.prototype.getInvocationResultObj = function (invocationResults, method, calledWith) {\r\n        var all_return_values = invocationResults\r\n            .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Success; })\r\n            .reduce(function (allValues, currentValue) {\r\n            allValues = __spreadArrays(allValues, [\r\n                {\r\n                    executed_by: currentValue.instance,\r\n                    returned: currentValue.result,\r\n                    called_with: calledWith,\r\n                    method: method,\r\n                    message: currentValue.message,\r\n                    status: currentValue.status,\r\n                }\r\n            ]);\r\n            return allValues;\r\n        }, []);\r\n        var all_errors = invocationResults\r\n            .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Error; })\r\n            .reduce(function (allErrors, currError) {\r\n            allErrors = __spreadArrays(allErrors, [\r\n                {\r\n                    executed_by: currError.instance,\r\n                    called_with: calledWith,\r\n                    name: method.name,\r\n                    message: currError.message,\r\n                }\r\n            ]);\r\n            return allErrors;\r\n        }, []);\r\n        var invResult = invocationResults[0];\r\n        var result = {\r\n            method: method,\r\n            called_with: calledWith,\r\n            returned: invResult.result,\r\n            executed_by: invResult.instance,\r\n            all_return_values: all_return_values,\r\n            all_errors: all_errors,\r\n            message: invResult.message,\r\n            status: invResult.status\r\n        };\r\n        return result;\r\n    };\r\n    Client.prototype.tryToAwaitForMethods = function (methodDefinition, target, additionalOptions) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            if (additionalOptions.waitTimeoutMs === 0) {\r\n                reject();\r\n                return;\r\n            }\r\n            var delayStep = 500;\r\n            var delayTillNow = 0;\r\n            var retry = function () {\r\n                delayTillNow += delayStep;\r\n                var serversMethodMap = _this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                if (serversMethodMap.length > 0) {\r\n                    clearInterval(interval);\r\n                    resolve(serversMethodMap);\r\n                }\r\n                else if (delayTillNow >= (additionalOptions.waitTimeoutMs || 10000)) {\r\n                    clearInterval(interval);\r\n                    reject();\r\n                    return;\r\n                }\r\n            };\r\n            var interval = setInterval(retry, delayStep);\r\n        });\r\n    };\r\n    Client.prototype.filterByTarget = function (target, serverMethodMap) {\r\n        var _this = this;\r\n        if (typeof target === \"string\") {\r\n            if (target === \"all\") {\r\n                return __spreadArrays(serverMethodMap);\r\n            }\r\n            else if (target === \"best\") {\r\n                var localMachine = serverMethodMap\r\n                    .find(function (s) { return s.server.instance.isLocal; });\r\n                if (localMachine) {\r\n                    return [localMachine];\r\n                }\r\n                if (serverMethodMap[0] !== undefined) {\r\n                    return [serverMethodMap[0]];\r\n                }\r\n            }\r\n            else if (target === \"skipMine\") {\r\n                return serverMethodMap.filter(function (_a) {\r\n                    var server = _a.server;\r\n                    return server.instance.peerId !== _this.instance.peerId;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            var targetArray = void 0;\r\n            if (!Array.isArray(target)) {\r\n                targetArray = [target];\r\n            }\r\n            else {\r\n                targetArray = target;\r\n            }\r\n            var allServersMatching = targetArray.reduce(function (matches, filter) {\r\n                var myMatches = serverMethodMap.filter(function (serverMethodPair) {\r\n                    return _this.instanceMatch(filter, serverMethodPair.server.instance);\r\n                });\r\n                return matches.concat(myMatches);\r\n            }, []);\r\n            return allServersMatching;\r\n        }\r\n        return [];\r\n    };\r\n    Client.prototype.instanceMatch = function (instanceFilter, instanceDefinition) {\r\n        return this.containsProps(instanceFilter, instanceDefinition);\r\n    };\r\n    Client.prototype.methodMatch = function (methodFilter, methodDefinition) {\r\n        return this.containsProps(methodFilter, methodDefinition);\r\n    };\r\n    Client.prototype.containsProps = function (filter, repoMethod) {\r\n        var filterProps = Object.keys(filter)\r\n            .filter(function (prop) {\r\n            return filter[prop] !== undefined\r\n                && typeof filter[prop] !== \"function\"\r\n                && prop !== \"object_types\"\r\n                && prop !== \"display_name\"\r\n                && prop !== \"id\"\r\n                && prop !== \"gatewayId\"\r\n                && prop !== \"identifier\"\r\n                && prop[0] !== \"_\";\r\n        });\r\n        return filterProps.every(function (prop) {\r\n            var isMatch;\r\n            var filterValue = filter[prop];\r\n            var repoMethodValue = repoMethod[prop];\r\n            switch (prop) {\r\n                case \"objectTypes\":\r\n                    isMatch = (filterValue || []).every(function (filterValueEl) {\r\n                        return (repoMethodValue || []).includes(filterValueEl);\r\n                    });\r\n                    break;\r\n                case \"flags\":\r\n                    isMatch = isSubset(repoMethodValue || {}, filterValue || {});\r\n                    break;\r\n                default:\r\n                    isMatch = String(filterValue).toLowerCase() === String(repoMethodValue).toLowerCase();\r\n            }\r\n            return isMatch;\r\n        });\r\n    };\r\n    Client.prototype.getMethods = function (methodFilter) {\r\n        var _this = this;\r\n        if (methodFilter === undefined) {\r\n            return this.repo.getMethods();\r\n        }\r\n        var methods = this.repo.getMethods().filter(function (method) {\r\n            return _this.methodMatch(methodFilter, method);\r\n        });\r\n        return methods;\r\n    };\r\n    Client.prototype.getMethodsForInstance = function (instanceFilter) {\r\n        var _this = this;\r\n        var allServers = this.repo.getServers();\r\n        var matchingServers = allServers.filter(function (server) {\r\n            return _this.instanceMatch(instanceFilter, server.instance);\r\n        });\r\n        if (matchingServers.length === 0) {\r\n            return [];\r\n        }\r\n        var resultMethodsObject = {};\r\n        if (matchingServers.length === 1) {\r\n            resultMethodsObject = matchingServers[0].methods;\r\n        }\r\n        else {\r\n            matchingServers.forEach(function (server) {\r\n                Object.keys(server.methods).forEach(function (methodKey) {\r\n                    var method = server.methods[methodKey];\r\n                    resultMethodsObject[method.identifier] = method;\r\n                });\r\n            });\r\n        }\r\n        return Object.keys(resultMethodsObject)\r\n            .map(function (key) {\r\n            return resultMethodsObject[key];\r\n        });\r\n    };\r\n    Client.prototype.getServers = function (methodFilter) {\r\n        var _this = this;\r\n        var servers = this.repo.getServers();\r\n        if (methodFilter === undefined) {\r\n            return servers.map(function (server) {\r\n                return { server: server, methods: [] };\r\n            });\r\n        }\r\n        return servers.reduce(function (prev, current) {\r\n            var methodsForServer = Object.values(current.methods);\r\n            var matchingMethods = methodsForServer.filter(function (method) {\r\n                return _this.methodMatch(methodFilter, method);\r\n            });\r\n            if (matchingMethods.length > 0) {\r\n                prev.push({ server: current, methods: matchingMethods });\r\n            }\r\n            return prev;\r\n        }, []);\r\n    };\r\n    Client.prototype.getServerMethodsByFilterAndTarget = function (methodFilter, target) {\r\n        var serversMethodMap = this.getServers(methodFilter);\r\n        return this.filterByTarget(target, serversMethodMap);\r\n    };\r\n    return Client;\r\n}());\n\nvar ServerSubscription = (function () {\r\n    function ServerSubscription(protocol, repoMethod, subscription) {\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n        this.subscription = subscription;\r\n    }\r\n    Object.defineProperty(ServerSubscription.prototype, \"stream\", {\r\n        get: function () {\r\n            if (!this.repoMethod.stream) {\r\n                throw new Error(\"no stream\");\r\n            }\r\n            return this.repoMethod.stream;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"arguments\", {\r\n        get: function () { return this.subscription.arguments || {}; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"branchKey\", {\r\n        get: function () { return this.subscription.branchKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"instance\", {\r\n        get: function () {\r\n            if (!this.subscription.instance) {\r\n                throw new Error(\"no instance\");\r\n            }\r\n            return this.subscription.instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ServerSubscription.prototype.close = function () {\r\n        this.protocol.server.closeSingleSubscription(this.repoMethod, this.subscription);\r\n    };\r\n    ServerSubscription.prototype.push = function (data) {\r\n        this.protocol.server.pushDataToSingle(this.repoMethod, this.subscription, data);\r\n    };\r\n    return ServerSubscription;\r\n}());\n\nvar Request = (function () {\r\n    function Request(protocol, repoMethod, requestContext) {\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n        this.requestContext = requestContext;\r\n        this.arguments = requestContext.arguments;\r\n        this.instance = requestContext.instance;\r\n    }\r\n    Request.prototype.accept = function () {\r\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, \"\");\r\n    };\r\n    Request.prototype.acceptOnBranch = function (branch) {\r\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, branch);\r\n    };\r\n    Request.prototype.reject = function (reason) {\r\n        this.protocol.server.rejectRequest(this.requestContext, this.repoMethod, reason);\r\n    };\r\n    return Request;\r\n}());\n\nvar ServerStreaming = (function () {\r\n    function ServerStreaming(protocol, server) {\r\n        var _this = this;\r\n        this.protocol = protocol;\r\n        this.server = server;\r\n        protocol.server.onSubRequest(function (rc, rm) { return _this.handleSubRequest(rc, rm); });\r\n        protocol.server.onSubAdded(function (sub, rm) { return _this.handleSubAdded(sub, rm); });\r\n        protocol.server.onSubRemoved(function (sub, rm) { return _this.handleSubRemoved(sub, rm); });\r\n    }\r\n    ServerStreaming.prototype.handleSubRequest = function (requestContext, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionRequestHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var request = new Request(this.protocol, repoMethod, requestContext);\r\n        repoMethod.streamCallbacks.subscriptionRequestHandler(request);\r\n    };\r\n    ServerStreaming.prototype.handleSubAdded = function (subscription, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionAddedHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n        repoMethod.streamCallbacks.subscriptionAddedHandler(sub);\r\n    };\r\n    ServerStreaming.prototype.handleSubRemoved = function (subscription, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionRemovedHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n        repoMethod.streamCallbacks.subscriptionRemovedHandler(sub);\r\n    };\r\n    return ServerStreaming;\r\n}());\n\nvar ServerBranch = (function () {\r\n    function ServerBranch(key, protocol, repoMethod) {\r\n        this.key = key;\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n    }\r\n    ServerBranch.prototype.subscriptions = function () {\r\n        var _this = this;\r\n        var subList = this.protocol.server.getSubscriptionList(this.repoMethod, this.key);\r\n        return subList.map(function (sub) {\r\n            return new ServerSubscription(_this.protocol, _this.repoMethod, sub);\r\n        });\r\n    };\r\n    ServerBranch.prototype.close = function () {\r\n        this.protocol.server.closeAllSubscriptions(this.repoMethod, this.key);\r\n    };\r\n    ServerBranch.prototype.push = function (data) {\r\n        this.protocol.server.pushData(this.repoMethod, data, [this.key]);\r\n    };\r\n    return ServerBranch;\r\n}());\n\nvar ServerStream = (function () {\r\n    function ServerStream(_protocol, _repoMethod, _server) {\r\n        this._protocol = _protocol;\r\n        this._repoMethod = _repoMethod;\r\n        this._server = _server;\r\n        this.name = this._repoMethod.definition.name;\r\n    }\r\n    ServerStream.prototype.branches = function (key) {\r\n        var _this = this;\r\n        var bList = this._protocol.server.getBranchList(this._repoMethod);\r\n        if (key) {\r\n            if (bList.indexOf(key) > -1) {\r\n                return new ServerBranch(key, this._protocol, this._repoMethod);\r\n            }\r\n            return undefined;\r\n        }\r\n        else {\r\n            return bList.map(function (branchKey) {\r\n                return new ServerBranch(branchKey, _this._protocol, _this._repoMethod);\r\n            });\r\n        }\r\n    };\r\n    ServerStream.prototype.branch = function (key) {\r\n        return this.branches(key);\r\n    };\r\n    ServerStream.prototype.subscriptions = function () {\r\n        var _this = this;\r\n        var subList = this._protocol.server.getSubscriptionList(this._repoMethod);\r\n        return subList.map(function (sub) {\r\n            return new ServerSubscription(_this._protocol, _this._repoMethod, sub);\r\n        });\r\n    };\r\n    Object.defineProperty(ServerStream.prototype, \"definition\", {\r\n        get: function () {\r\n            var _a;\r\n            var def2 = this._repoMethod.definition;\r\n            return {\r\n                accepts: def2.accepts,\r\n                description: def2.description,\r\n                displayName: def2.displayName,\r\n                name: def2.name,\r\n                objectTypes: def2.objectTypes,\r\n                returns: def2.returns,\r\n                supportsStreaming: def2.supportsStreaming,\r\n                flags: (_a = def2.flags) === null || _a === void 0 ? void 0 : _a.metadata,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ServerStream.prototype.close = function () {\r\n        this._protocol.server.closeAllSubscriptions(this._repoMethod);\r\n        this._server.unregister(this._repoMethod.definition, true);\r\n    };\r\n    ServerStream.prototype.push = function (data, branches) {\r\n        if (typeof branches !== \"string\" && !Array.isArray(branches) && branches !== undefined) {\r\n            throw new Error(\"invalid branches should be string or string array\");\r\n        }\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        this._protocol.server.pushData(this._repoMethod, data, branches);\r\n    };\r\n    ServerStream.prototype.updateRepoMethod = function (repoMethod) {\r\n        this._repoMethod = repoMethod;\r\n    };\r\n    return ServerStream;\r\n}());\n\nvar Server = (function () {\r\n    function Server(protocol, serverRepository) {\r\n        this.protocol = protocol;\r\n        this.serverRepository = serverRepository;\r\n        this.invocations = 0;\r\n        this.currentlyUnregistering = {};\r\n        this.streaming = new ServerStreaming(protocol, this);\r\n        this.protocol.server.onInvoked(this.onMethodInvoked.bind(this));\r\n    }\r\n    Server.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback, existingStream) {\r\n        var _this = this;\r\n        var promise = new Promise(function (resolve, reject) {\r\n            if (!streamDef) {\r\n                reject(\"The stream name must be unique! Please, provide either a unique string for a stream name to \\u201Cglue.interop.createStream()\\u201D or a \\u201CmethodDefinition\\u201D object with a unique \\u201Cname\\u201D property for the stream.\");\r\n                return;\r\n            }\r\n            var streamMethodDefinition;\r\n            if (typeof streamDef === \"string\") {\r\n                streamMethodDefinition = { name: \"\" + streamDef };\r\n            }\r\n            else {\r\n                streamMethodDefinition = __assign$1({}, streamDef);\r\n            }\r\n            if (!streamMethodDefinition.name) {\r\n                return reject(\"The \\u201Cname\\u201D property is required for the \\u201CstreamDefinition\\u201D object and must be unique. Stream definition: \" + JSON.stringify(streamMethodDefinition));\r\n            }\r\n            var nameAlreadyExists = _this.serverRepository.getList()\r\n                .some(function (serverMethod) { return serverMethod.definition.name === streamMethodDefinition.name; });\r\n            if (nameAlreadyExists) {\r\n                return reject(\"A stream with the name \\\"\" + streamMethodDefinition.name + \"\\\" already exists! Please, provide a unique name for the stream.\");\r\n            }\r\n            streamMethodDefinition.supportsStreaming = true;\r\n            if (!callbacks) {\r\n                callbacks = {};\r\n            }\r\n            if (typeof callbacks.subscriptionRequestHandler !== \"function\") {\r\n                callbacks.subscriptionRequestHandler = function (request) {\r\n                    request.accept();\r\n                };\r\n            }\r\n            var repoMethod = _this.serverRepository.add({\r\n                definition: streamMethodDefinition,\r\n                streamCallbacks: callbacks,\r\n                protocolState: {},\r\n            });\r\n            _this.protocol.server.createStream(repoMethod)\r\n                .then(function () {\r\n                var streamUserObject;\r\n                if (existingStream) {\r\n                    streamUserObject = existingStream;\r\n                    existingStream.updateRepoMethod(repoMethod);\r\n                }\r\n                else {\r\n                    streamUserObject = new ServerStream(_this.protocol, repoMethod, _this);\r\n                }\r\n                repoMethod.stream = streamUserObject;\r\n                resolve(streamUserObject);\r\n            })\r\n                .catch(function (err) {\r\n                if (repoMethod.repoId) {\r\n                    _this.serverRepository.remove(repoMethod.repoId);\r\n                }\r\n                reject(err);\r\n            });\r\n        });\r\n        return promisify(promise, successCallback, errorCallback);\r\n    };\r\n    Server.prototype.register = function (methodDefinition, callback) {\r\n        var _this = this;\r\n        if (!methodDefinition) {\r\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n        }\r\n        if (typeof callback !== \"function\") {\r\n            return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n        }\r\n        var wrappedCallbackFunction = function (context, resultCallback) { return __awaiter$1(_this, void 0, void 0, function () {\r\n            var result, resultValue, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 4, , 5]);\r\n                        result = callback(context.args, context.instance);\r\n                        if (!(result && typeof result.then === \"function\")) return [3, 2];\r\n                        return [4, result];\r\n                    case 1:\r\n                        resultValue = _a.sent();\r\n                        resultCallback(undefined, resultValue);\r\n                        return [3, 3];\r\n                    case 2:\r\n                        resultCallback(undefined, result);\r\n                        _a.label = 3;\r\n                    case 3: return [3, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        if (!e_1) {\r\n                            e_1 = \"\";\r\n                        }\r\n                        resultCallback(e_1, e_1);\r\n                        return [3, 5];\r\n                    case 5: return [2];\r\n                }\r\n            });\r\n        }); };\r\n        wrappedCallbackFunction.userCallback = callback;\r\n        return this.registerCore(methodDefinition, wrappedCallbackFunction);\r\n    };\r\n    Server.prototype.registerAsync = function (methodDefinition, callback) {\r\n        if (!methodDefinition) {\r\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n        }\r\n        if (typeof callback !== \"function\") {\r\n            return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n        }\r\n        var wrappedCallback = function (context, resultCallback) {\r\n            try {\r\n                var resultCalled_1 = false;\r\n                var success = function (result) {\r\n                    if (!resultCalled_1) {\r\n                        resultCallback(undefined, result);\r\n                    }\r\n                    resultCalled_1 = true;\r\n                };\r\n                var error = function (e) {\r\n                    if (!resultCalled_1) {\r\n                        if (!e) {\r\n                            e = \"\";\r\n                        }\r\n                        resultCallback(e, e);\r\n                    }\r\n                    resultCalled_1 = true;\r\n                };\r\n                var methodResult = callback(context.args, context.instance, success, error);\r\n                if (methodResult && typeof methodResult.then === \"function\") {\r\n                    methodResult\r\n                        .then(success)\r\n                        .catch(error);\r\n                }\r\n            }\r\n            catch (e) {\r\n                resultCallback(e, undefined);\r\n            }\r\n        };\r\n        wrappedCallback.userCallbackAsync = callback;\r\n        return this.registerCore(methodDefinition, wrappedCallback);\r\n    };\r\n    Server.prototype.unregister = function (methodFilter, forStream) {\r\n        if (forStream === void 0) { forStream = false; }\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var methodDefinition, methodToBeRemoved;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (methodFilter === undefined) {\r\n                            return [2, Promise.reject(\"Please, provide either a unique string for a name or an object containing a \\u201Cname\\u201D property.\")];\r\n                        }\r\n                        if (!(typeof methodFilter === \"function\")) return [3, 2];\r\n                        return [4, this.unregisterWithPredicate(methodFilter, forStream)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                    case 2:\r\n                        if (typeof methodFilter === \"string\") {\r\n                            methodDefinition = { name: methodFilter };\r\n                        }\r\n                        else {\r\n                            methodDefinition = methodFilter;\r\n                        }\r\n                        if (methodDefinition.name === undefined) {\r\n                            return [2, Promise.reject(\"Method name is required. Cannot find a method if the method name is undefined!\")];\r\n                        }\r\n                        methodToBeRemoved = this.serverRepository.getList().find(function (serverMethod) {\r\n                            return serverMethod.definition.name === methodDefinition.name\r\n                                && (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                        });\r\n                        if (!methodToBeRemoved) {\r\n                            return [2, Promise.reject(\"Method with a name \\\"\" + methodDefinition.name + \"\\\" does not exist or is not registered by your application!\")];\r\n                        }\r\n                        return [4, this.removeMethodsOrStreams([methodToBeRemoved])];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.unregisterWithPredicate = function (filterPredicate, forStream) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var methodsOrStreamsToRemove;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        methodsOrStreamsToRemove = this.serverRepository.getList()\r\n                            .filter(function (sm) { return filterPredicate(sm.definition); })\r\n                            .filter(function (serverMethod) {\r\n                            return (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                        });\r\n                        if (!methodsOrStreamsToRemove || methodsOrStreamsToRemove.length === 0) {\r\n                            return [2, Promise.reject(\"Could not find a \" + (forStream ? \"stream\" : \"method\") + \" matching the specified condition!\")];\r\n                        }\r\n                        return [4, this.removeMethodsOrStreams(methodsOrStreamsToRemove)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.removeMethodsOrStreams = function (methodsToRemove) {\r\n        var _this = this;\r\n        var methodUnregPromises = [];\r\n        methodsToRemove.forEach(function (method) {\r\n            var promise = _this.protocol.server.unregister(method)\r\n                .then(function () {\r\n                if (method.repoId) {\r\n                    _this.serverRepository.remove(method.repoId);\r\n                }\r\n            });\r\n            methodUnregPromises.push(promise);\r\n            _this.addAsCurrentlyUnregistering(method.definition.name, promise);\r\n        });\r\n        return Promise.all(methodUnregPromises);\r\n    };\r\n    Server.prototype.addAsCurrentlyUnregistering = function (methodName, promise) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var timeout;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                timeout = new Promise(function (resolve) { return setTimeout(resolve, 5000); });\r\n                this.currentlyUnregistering[methodName] = Promise.race([promise, timeout]).then(function () {\r\n                    delete _this.currentlyUnregistering[methodName];\r\n                });\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.registerCore = function (method, theFunction) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var methodDefinition, unregisterInProgress, nameAlreadyExists, repoMethod;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof method === \"string\") {\r\n                            methodDefinition = { name: \"\" + method };\r\n                        }\r\n                        else {\r\n                            methodDefinition = __assign$1({}, method);\r\n                        }\r\n                        if (!methodDefinition.name) {\r\n                            return [2, Promise.reject(\"Please, provide a (unique) string value for the \\u201Cname\\u201D property in the \\u201CmethodDefinition\\u201D object: \" + JSON.stringify(method))];\r\n                        }\r\n                        unregisterInProgress = this.currentlyUnregistering[methodDefinition.name];\r\n                        if (!unregisterInProgress) return [3, 2];\r\n                        return [4, unregisterInProgress];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        nameAlreadyExists = this.serverRepository.getList()\r\n                            .some(function (serverMethod) { return serverMethod.definition.name === methodDefinition.name; });\r\n                        if (nameAlreadyExists) {\r\n                            return [2, Promise.reject(\"A method with the name \\\"\" + methodDefinition.name + \"\\\" already exists! Please, provide a unique name for the method.\")];\r\n                        }\r\n                        if (methodDefinition.supportsStreaming) {\r\n                            return [2, Promise.reject(\"When you create methods with \\u201Cglue.interop.register()\\u201D or \\u201Cglue.interop.registerAsync()\\u201D the property \\u201CsupportsStreaming\\u201D cannot be \\u201Ctrue\\u201D. If you want \\u201C\" + methodDefinition.name + \"\\u201D to be a stream, please use the \\u201Cglue.interop.createStream()\\u201D method.\")];\r\n                        }\r\n                        repoMethod = this.serverRepository.add({\r\n                            definition: methodDefinition,\r\n                            theFunction: theFunction,\r\n                            protocolState: {},\r\n                        });\r\n                        return [2, this.protocol.server.register(repoMethod)\r\n                                .catch(function (err) {\r\n                                if (repoMethod === null || repoMethod === void 0 ? void 0 : repoMethod.repoId) {\r\n                                    _this.serverRepository.remove(repoMethod.repoId);\r\n                                }\r\n                                throw err;\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.onMethodInvoked = function (methodToExecute, invocationId, invocationArgs) {\r\n        var _this = this;\r\n        if (!methodToExecute || !methodToExecute.theFunction) {\r\n            return;\r\n        }\r\n        methodToExecute.theFunction(invocationArgs, function (err, result) {\r\n            if (err !== undefined && err !== null) {\r\n                if (err.message && typeof err.message === \"string\") {\r\n                    err = err.message;\r\n                }\r\n                else if (typeof err !== \"string\") {\r\n                    try {\r\n                        err = JSON.stringify(err);\r\n                    }\r\n                    catch (unStrException) {\r\n                        err = \"un-stringifyable error in onMethodInvoked! Top level prop names: \" + Object.keys(err);\r\n                    }\r\n                }\r\n            }\r\n            if (!result) {\r\n                result = {};\r\n            }\r\n            else if (typeof result !== \"object\" || Array.isArray(result)) {\r\n                result = { _value: result };\r\n            }\r\n            _this.protocol.server.methodInvocationResult(methodToExecute, invocationId, err, result);\r\n        });\r\n    };\r\n    return Server;\r\n}());\n\nvar InstanceWrapper = (function () {\r\n    function InstanceWrapper(API, instance, connection) {\r\n        var _this = this;\r\n        this.wrapped = {};\r\n        this.wrapped.getMethods = function () {\r\n            return API.methodsForInstance(this);\r\n        };\r\n        this.wrapped.getStreams = function () {\r\n            return API.methodsForInstance(this).filter(function (m) { return m.supportsStreaming; });\r\n        };\r\n        if (instance) {\r\n            this.refreshWrappedObject(instance);\r\n        }\r\n        if (connection) {\r\n            connection.loggedIn(function () {\r\n                _this.refresh(connection);\r\n            });\r\n            this.refresh(connection);\r\n        }\r\n    }\r\n    InstanceWrapper.prototype.unwrap = function () {\r\n        return this.wrapped;\r\n    };\r\n    InstanceWrapper.prototype.refresh = function (connection) {\r\n        if (!connection) {\r\n            return;\r\n        }\r\n        var resolvedIdentity = connection === null || connection === void 0 ? void 0 : connection.resolvedIdentity;\r\n        var instance = Object.assign({}, resolvedIdentity !== null && resolvedIdentity !== void 0 ? resolvedIdentity : {}, { peerId: connection === null || connection === void 0 ? void 0 : connection.peerId });\r\n        this.refreshWrappedObject(instance);\r\n    };\r\n    InstanceWrapper.prototype.refreshWrappedObject = function (resolvedIdentity) {\r\n        var _a, _b, _c;\r\n        this.wrapped.user = resolvedIdentity.user;\r\n        this.wrapped.instance = resolvedIdentity.instance;\r\n        this.wrapped.application = (_a = resolvedIdentity.application) !== null && _a !== void 0 ? _a : shortid();\r\n        this.wrapped.applicationName = resolvedIdentity.applicationName;\r\n        this.wrapped.pid = (_c = (_b = resolvedIdentity.pid) !== null && _b !== void 0 ? _b : resolvedIdentity.process) !== null && _c !== void 0 ? _c : Math.floor(Math.random() * 10000000000);\r\n        this.wrapped.machine = resolvedIdentity.machine;\r\n        this.wrapped.environment = resolvedIdentity.environment;\r\n        this.wrapped.region = resolvedIdentity.region;\r\n        this.wrapped.windowId = resolvedIdentity.windowId;\r\n        this.wrapped.isLocal = true;\r\n        this.wrapped.api = resolvedIdentity.api;\r\n        this.wrapped.service = resolvedIdentity.service;\r\n        this.wrapped.peerId = resolvedIdentity.peerId;\r\n    };\r\n    return InstanceWrapper;\r\n}());\n\nvar hideMethodSystemFlags = function (method) {\r\n    return __assign$1(__assign$1({}, method), { flags: method.flags.metadata || {} });\r\n};\r\nvar ClientRepository = (function () {\r\n    function ClientRepository(logger, API) {\r\n        this.logger = logger;\r\n        this.API = API;\r\n        this.servers = {};\r\n        this.methodsCount = {};\r\n        this.callbacks = lib$1();\r\n        var peerId = this.API.instance.peerId;\r\n        this.myServer = {\r\n            id: peerId,\r\n            methods: {},\r\n            instance: this.API.instance,\r\n            wrapper: this.API.unwrappedInstance,\r\n        };\r\n        this.servers[peerId] = this.myServer;\r\n    }\r\n    ClientRepository.prototype.addServer = function (info, serverId) {\r\n        this.logger.debug(\"adding server \" + serverId);\r\n        var current = this.servers[serverId];\r\n        if (current) {\r\n            return current.id;\r\n        }\r\n        var wrapper = new InstanceWrapper(this.API, info);\r\n        var serverEntry = {\r\n            id: serverId,\r\n            methods: {},\r\n            instance: wrapper.unwrap(),\r\n            wrapper: wrapper,\r\n        };\r\n        this.servers[serverId] = serverEntry;\r\n        this.callbacks.execute(\"onServerAdded\", serverEntry.instance);\r\n        return serverId;\r\n    };\r\n    ClientRepository.prototype.removeServerById = function (id, reason) {\r\n        var _this = this;\r\n        var server = this.servers[id];\r\n        if (!server) {\r\n            this.logger.warn(\"not aware of server \" + id + \", my state \" + JSON.stringify(Object.keys(this.servers)));\r\n            return;\r\n        }\r\n        else {\r\n            this.logger.debug(\"removing server \" + id);\r\n        }\r\n        Object.keys(server.methods).forEach(function (methodId) {\r\n            _this.removeServerMethod(id, methodId);\r\n        });\r\n        delete this.servers[id];\r\n        this.callbacks.execute(\"onServerRemoved\", server.instance, reason);\r\n    };\r\n    ClientRepository.prototype.addServerMethod = function (serverId, method) {\r\n        var _a;\r\n        var server = this.servers[serverId];\r\n        if (!server) {\r\n            throw new Error(\"server does not exists\");\r\n        }\r\n        if (server.methods[method.id]) {\r\n            return;\r\n        }\r\n        var identifier = this.createMethodIdentifier(method);\r\n        var that = this;\r\n        var methodDefinition = {\r\n            identifier: identifier,\r\n            gatewayId: method.id,\r\n            name: method.name,\r\n            displayName: method.display_name,\r\n            description: method.description,\r\n            version: method.version,\r\n            objectTypes: method.object_types || [],\r\n            accepts: method.input_signature,\r\n            returns: method.result_signature,\r\n            supportsStreaming: typeof method.flags !== \"undefined\" ? method.flags.streaming : false,\r\n            flags: (_a = method.flags) !== null && _a !== void 0 ? _a : {},\r\n            getServers: function () {\r\n                return that.getServersByMethod(identifier);\r\n            }\r\n        };\r\n        methodDefinition.object_types = methodDefinition.objectTypes;\r\n        methodDefinition.display_name = methodDefinition.displayName;\r\n        methodDefinition.version = methodDefinition.version;\r\n        server.methods[method.id] = methodDefinition;\r\n        var clientMethodDefinition = hideMethodSystemFlags(methodDefinition);\r\n        if (!this.methodsCount[identifier]) {\r\n            this.methodsCount[identifier] = 0;\r\n            this.callbacks.execute(\"onMethodAdded\", clientMethodDefinition);\r\n        }\r\n        this.methodsCount[identifier] = this.methodsCount[identifier] + 1;\r\n        this.callbacks.execute(\"onServerMethodAdded\", server.instance, clientMethodDefinition);\r\n        return methodDefinition;\r\n    };\r\n    ClientRepository.prototype.removeServerMethod = function (serverId, methodId) {\r\n        var server = this.servers[serverId];\r\n        if (!server) {\r\n            throw new Error(\"server does not exists\");\r\n        }\r\n        var method = server.methods[methodId];\r\n        delete server.methods[methodId];\r\n        var clientMethodDefinition = hideMethodSystemFlags(method);\r\n        this.methodsCount[method.identifier] = this.methodsCount[method.identifier] - 1;\r\n        if (this.methodsCount[method.identifier] === 0) {\r\n            this.callbacks.execute(\"onMethodRemoved\", clientMethodDefinition);\r\n        }\r\n        this.callbacks.execute(\"onServerMethodRemoved\", server.instance, clientMethodDefinition);\r\n    };\r\n    ClientRepository.prototype.getMethods = function () {\r\n        return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags);\r\n    };\r\n    ClientRepository.prototype.getServers = function () {\r\n        return Object.values(this.servers).map(this.hideServerMethodSystemFlags);\r\n    };\r\n    ClientRepository.prototype.onServerAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerAdded\", callback);\r\n        var serversWithMethodsToReplay = this.getServers().map(function (s) { return s.instance; });\r\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, serversWithMethodsToReplay, callback);\r\n    };\r\n    ClientRepository.prototype.onMethodAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onMethodAdded\", callback);\r\n        var methodsToReplay = this.getMethods();\r\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, methodsToReplay, callback);\r\n    };\r\n    ClientRepository.prototype.onServerMethodAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerMethodAdded\", callback);\r\n        var unsubCalled = false;\r\n        var servers = this.getServers();\r\n        setTimeout(function () {\r\n            servers.forEach(function (server) {\r\n                var methods = server.methods;\r\n                Object.keys(methods).forEach(function (methodId) {\r\n                    if (!unsubCalled) {\r\n                        callback(server.instance, methods[methodId]);\r\n                    }\r\n                });\r\n            });\r\n        }, 0);\r\n        return function () {\r\n            unsubCalled = true;\r\n            unsubscribeFunc();\r\n        };\r\n    };\r\n    ClientRepository.prototype.onMethodRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onMethodRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.onServerRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.onServerMethodRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerMethodRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.getServerById = function (id) {\r\n        return this.hideServerMethodSystemFlags(this.servers[id]);\r\n    };\r\n    ClientRepository.prototype.reset = function () {\r\n        var _a;\r\n        var _this = this;\r\n        Object.keys(this.servers).forEach(function (key) {\r\n            _this.removeServerById(key, \"reset\");\r\n        });\r\n        this.servers = (_a = {},\r\n            _a[this.myServer.id] = this.myServer,\r\n            _a);\r\n        this.methodsCount = {};\r\n    };\r\n    ClientRepository.prototype.createMethodIdentifier = function (methodInfo) {\r\n        var accepts = methodInfo.input_signature !== undefined ? methodInfo.input_signature : \"\";\r\n        var returns = methodInfo.result_signature !== undefined ? methodInfo.result_signature : \"\";\r\n        return (methodInfo.name + accepts + returns).toLowerCase();\r\n    };\r\n    ClientRepository.prototype.getServersByMethod = function (identifier) {\r\n        var allServers = [];\r\n        Object.values(this.servers).forEach(function (server) {\r\n            Object.values(server.methods).forEach(function (method) {\r\n                if (method.identifier === identifier) {\r\n                    allServers.push(server.instance);\r\n                }\r\n            });\r\n        });\r\n        return allServers;\r\n    };\r\n    ClientRepository.prototype.returnUnsubWithDelayedReplay = function (unsubscribeFunc, collectionToReplay, callback) {\r\n        var unsubCalled = false;\r\n        setTimeout(function () {\r\n            collectionToReplay.forEach(function (item) {\r\n                if (!unsubCalled) {\r\n                    callback(item);\r\n                }\r\n            });\r\n        }, 0);\r\n        return function () {\r\n            unsubCalled = true;\r\n            unsubscribeFunc();\r\n        };\r\n    };\r\n    ClientRepository.prototype.hideServerMethodSystemFlags = function (server) {\r\n        var clientMethods = {};\r\n        Object.entries(server.methods).forEach(function (_a) {\r\n            var name = _a[0], method = _a[1];\r\n            clientMethods[name] = hideMethodSystemFlags(method);\r\n        });\r\n        return __assign$1(__assign$1({}, server), { methods: clientMethods });\r\n    };\r\n    ClientRepository.prototype.extractMethodsFromServers = function (servers) {\r\n        var methods = Object.values(servers).reduce(function (clientMethods, server) {\r\n            return __spreadArrays(clientMethods, Object.values(server.methods));\r\n        }, []);\r\n        return methods;\r\n    };\r\n    return ClientRepository;\r\n}());\n\nvar ServerRepository = (function () {\r\n    function ServerRepository() {\r\n        this.nextId = 0;\r\n        this.methods = [];\r\n    }\r\n    ServerRepository.prototype.add = function (method) {\r\n        method.repoId = String(this.nextId);\r\n        this.nextId += 1;\r\n        this.methods.push(method);\r\n        return method;\r\n    };\r\n    ServerRepository.prototype.remove = function (repoId) {\r\n        if (typeof repoId !== \"string\") {\r\n            return new TypeError(\"Expecting a string\");\r\n        }\r\n        this.methods = this.methods.filter(function (m) {\r\n            return m.repoId !== repoId;\r\n        });\r\n    };\r\n    ServerRepository.prototype.getById = function (id) {\r\n        if (typeof id !== \"string\") {\r\n            return undefined;\r\n        }\r\n        return this.methods.find(function (m) {\r\n            return m.repoId === id;\r\n        });\r\n    };\r\n    ServerRepository.prototype.getList = function () {\r\n        return this.methods.map(function (m) { return m; });\r\n    };\r\n    ServerRepository.prototype.length = function () {\r\n        return this.methods.length;\r\n    };\r\n    ServerRepository.prototype.reset = function () {\r\n        this.methods = [];\r\n    };\r\n    return ServerRepository;\r\n}());\n\nvar SUBSCRIPTION_REQUEST = \"onSubscriptionRequest\";\r\nvar SUBSCRIPTION_ADDED = \"onSubscriptionAdded\";\r\nvar SUBSCRIPTION_REMOVED = \"onSubscriptionRemoved\";\r\nvar ServerStreaming$1 = (function () {\r\n    function ServerStreaming(session, repository, serverRepository) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.serverRepository = serverRepository;\r\n        this.ERR_URI_SUBSCRIPTION_FAILED = \"com.tick42.agm.errors.subscription.failure\";\r\n        this.callbacks = lib$1();\r\n        this.nextStreamId = 0;\r\n        session.on(\"add-interest\", function (msg) {\r\n            _this.handleAddInterest(msg);\r\n        });\r\n        session.on(\"remove-interest\", function (msg) {\r\n            _this.handleRemoveInterest(msg);\r\n        });\r\n    }\r\n    ServerStreaming.prototype.acceptRequestOnBranch = function (requestContext, streamingMethod, branch) {\r\n        if (typeof branch !== \"string\") {\r\n            branch = \"\";\r\n        }\r\n        if (typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n            throw new TypeError(\"The streaming method is missing its subscriptions.\");\r\n        }\r\n        if (!Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n            throw new TypeError(\"The streaming method is missing its branches.\");\r\n        }\r\n        var streamId = this.getStreamId(streamingMethod, branch);\r\n        var key = requestContext.msg.subscription_id;\r\n        var subscription = {\r\n            id: key,\r\n            arguments: requestContext.arguments,\r\n            instance: requestContext.instance,\r\n            branchKey: branch,\r\n            streamId: streamId,\r\n            subscribeMsg: requestContext.msg,\r\n        };\r\n        streamingMethod.protocolState.subscriptionsMap[key] = subscription;\r\n        this.session.sendFireAndForget({\r\n            type: \"accepted\",\r\n            subscription_id: key,\r\n            stream_id: streamId,\r\n        });\r\n        this.callbacks.execute(SUBSCRIPTION_ADDED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.rejectRequest = function (requestContext, streamingMethod, reason) {\r\n        if (typeof reason !== \"string\") {\r\n            reason = \"\";\r\n        }\r\n        this.sendSubscriptionFailed(\"Subscription rejected by user. \" + reason, requestContext.msg.subscription_id);\r\n    };\r\n    ServerStreaming.prototype.pushData = function (streamingMethod, data, branches) {\r\n        var _this = this;\r\n        if (typeof streamingMethod !== \"object\" || !Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n            return;\r\n        }\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        if (typeof branches === \"string\") {\r\n            branches = [branches];\r\n        }\r\n        else if (!Array.isArray(branches) || branches.length <= 0) {\r\n            branches = [];\r\n        }\r\n        var streamIdList = streamingMethod.protocolState.branchKeyToStreamIdMap\r\n            .filter(function (br) {\r\n            if (!branches || branches.length === 0) {\r\n                return true;\r\n            }\r\n            return branches.indexOf(br.key) >= 0;\r\n        }).map(function (br) {\r\n            return br.streamId;\r\n        });\r\n        streamIdList.forEach(function (streamId) {\r\n            var publishMessage = {\r\n                type: \"publish\",\r\n                stream_id: streamId,\r\n                data: data,\r\n            };\r\n            _this.session.sendFireAndForget(publishMessage);\r\n        });\r\n    };\r\n    ServerStreaming.prototype.pushDataToSingle = function (method, subscription, data) {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        var postMessage = {\r\n            type: \"post\",\r\n            subscription_id: subscription.id,\r\n            data: data,\r\n        };\r\n        this.session.sendFireAndForget(postMessage);\r\n    };\r\n    ServerStreaming.prototype.closeSingleSubscription = function (streamingMethod, subscription) {\r\n        if (streamingMethod.protocolState.subscriptionsMap) {\r\n            delete streamingMethod.protocolState.subscriptionsMap[subscription.id];\r\n        }\r\n        var dropSubscriptionMessage = {\r\n            type: \"drop-subscription\",\r\n            subscription_id: subscription.id,\r\n            reason: \"Server dropping a single subscription\",\r\n        };\r\n        this.session.sendFireAndForget(dropSubscriptionMessage);\r\n        var subscriber = subscription.instance;\r\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.closeMultipleSubscriptions = function (streamingMethod, branchKey) {\r\n        var _this = this;\r\n        if (typeof streamingMethod !== \"object\" || typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n            return;\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return;\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var subscriptionsToClose = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        if (typeof branchKey === \"string\") {\r\n            subscriptionsToClose = subscriptionsToClose.filter(function (sub) {\r\n                return sub.branchKey === branchKey;\r\n            });\r\n        }\r\n        subscriptionsToClose.forEach(function (subscription) {\r\n            delete subscriptionsMap[subscription.id];\r\n            var drop = {\r\n                type: \"drop-subscription\",\r\n                subscription_id: subscription.id,\r\n                reason: \"Server dropping all subscriptions on stream_id: \" + subscription.streamId,\r\n            };\r\n            _this.session.sendFireAndForget(drop);\r\n        });\r\n    };\r\n    ServerStreaming.prototype.getSubscriptionList = function (streamingMethod, branchKey) {\r\n        if (typeof streamingMethod !== \"object\") {\r\n            return [];\r\n        }\r\n        var subscriptions = [];\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return [];\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var allSubscriptions = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        if (typeof branchKey !== \"string\") {\r\n            subscriptions = allSubscriptions;\r\n        }\r\n        else {\r\n            subscriptions = allSubscriptions.filter(function (sub) {\r\n                return sub.branchKey === branchKey;\r\n            });\r\n        }\r\n        return subscriptions;\r\n    };\r\n    ServerStreaming.prototype.getBranchList = function (streamingMethod) {\r\n        if (typeof streamingMethod !== \"object\") {\r\n            return [];\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return [];\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var allSubscriptions = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        var result = [];\r\n        allSubscriptions.forEach(function (sub) {\r\n            var branch = \"\";\r\n            if (typeof sub === \"object\" && typeof sub.branchKey === \"string\") {\r\n                branch = sub.branchKey;\r\n            }\r\n            if (result.indexOf(branch) === -1) {\r\n                result.push(branch);\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    ServerStreaming.prototype.onSubAdded = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED, callback);\r\n    };\r\n    ServerStreaming.prototype.onSubRequest = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST, callback);\r\n    };\r\n    ServerStreaming.prototype.onSubRemoved = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED, callback);\r\n    };\r\n    ServerStreaming.prototype.handleRemoveInterest = function (msg) {\r\n        var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n        if (typeof msg.subscription_id !== \"string\" ||\r\n            typeof streamingMethod !== \"object\") {\r\n            return;\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return;\r\n        }\r\n        if (typeof streamingMethod.protocolState.subscriptionsMap[msg.subscription_id] !== \"object\") {\r\n            return;\r\n        }\r\n        var subscription = streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n        delete streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.onSubscriptionLifetimeEvent = function (eventName, handlerFunc) {\r\n        this.callbacks.add(eventName, handlerFunc);\r\n    };\r\n    ServerStreaming.prototype.getNextStreamId = function () {\r\n        return this.nextStreamId++ + \"\";\r\n    };\r\n    ServerStreaming.prototype.handleAddInterest = function (msg) {\r\n        var caller = this.repository.getServerById(msg.caller_id);\r\n        var instance = caller.instance;\r\n        var requestContext = {\r\n            msg: msg,\r\n            arguments: msg.arguments_kv || {},\r\n            instance: instance,\r\n        };\r\n        var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n        if (streamingMethod === undefined) {\r\n            var errorMsg = \"No method with id \" + msg.method_id + \" on this server.\";\r\n            this.sendSubscriptionFailed(errorMsg, msg.subscription_id);\r\n            return;\r\n        }\r\n        if (streamingMethod.protocolState.subscriptionsMap &&\r\n            streamingMethod.protocolState.subscriptionsMap[msg.subscription_id]) {\r\n            this.sendSubscriptionFailed(\"A subscription with id \" + msg.subscription_id + \" already exists.\", msg.subscription_id);\r\n            return;\r\n        }\r\n        this.callbacks.execute(SUBSCRIPTION_REQUEST, requestContext, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.sendSubscriptionFailed = function (reason, subscriptionId) {\r\n        var errorMessage = {\r\n            type: \"error\",\r\n            reason_uri: this.ERR_URI_SUBSCRIPTION_FAILED,\r\n            reason: reason,\r\n            request_id: subscriptionId,\r\n        };\r\n        this.session.sendFireAndForget(errorMessage);\r\n    };\r\n    ServerStreaming.prototype.getStreamId = function (streamingMethod, branchKey) {\r\n        if (typeof branchKey !== \"string\") {\r\n            branchKey = \"\";\r\n        }\r\n        if (!streamingMethod.protocolState.branchKeyToStreamIdMap) {\r\n            throw new Error(\"streaming \" + streamingMethod.definition.name + \" method without protocol state\");\r\n        }\r\n        var needleBranch = streamingMethod.protocolState.branchKeyToStreamIdMap.filter(function (branch) {\r\n            return branch.key === branchKey;\r\n        })[0];\r\n        var streamId = (needleBranch ? needleBranch.streamId : undefined);\r\n        if (typeof streamId !== \"string\" || streamId === \"\") {\r\n            streamId = this.getNextStreamId();\r\n            streamingMethod.protocolState.branchKeyToStreamIdMap.push({ key: branchKey, streamId: streamId });\r\n        }\r\n        return streamId;\r\n    };\r\n    return ServerStreaming;\r\n}());\n\nvar ServerProtocol = (function () {\r\n    function ServerProtocol(session, clientRepository, serverRepository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.clientRepository = clientRepository;\r\n        this.serverRepository = serverRepository;\r\n        this.logger = logger;\r\n        this.callbacks = lib$1();\r\n        this.streaming = new ServerStreaming$1(session, clientRepository, serverRepository);\r\n        this.session.on(\"invoke\", function (msg) { return _this.handleInvokeMessage(msg); });\r\n    }\r\n    ServerProtocol.prototype.createStream = function (repoMethod) {\r\n        repoMethod.protocolState.subscriptionsMap = {};\r\n        repoMethod.protocolState.branchKeyToStreamIdMap = [];\r\n        return this.register(repoMethod, true);\r\n    };\r\n    ServerProtocol.prototype.register = function (repoMethod, isStreaming) {\r\n        var _this = this;\r\n        var _a;\r\n        var methodDef = repoMethod.definition;\r\n        var flags = Object.assign({}, { metadata: (_a = methodDef.flags) !== null && _a !== void 0 ? _a : {} }, { streaming: isStreaming || false });\r\n        var registerMsg = {\r\n            type: \"register\",\r\n            methods: [{\r\n                    id: repoMethod.repoId,\r\n                    name: methodDef.name,\r\n                    display_name: methodDef.displayName,\r\n                    description: methodDef.description,\r\n                    version: methodDef.version,\r\n                    flags: flags,\r\n                    object_types: methodDef.objectTypes || methodDef.object_types,\r\n                    input_signature: methodDef.accepts,\r\n                    result_signature: methodDef.returns,\r\n                    restrictions: undefined,\r\n                }],\r\n        };\r\n        return this.session.send(registerMsg, { methodId: repoMethod.repoId })\r\n            .then(function () {\r\n            _this.logger.debug(\"registered method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId);\r\n        })\r\n            .catch(function (msg) {\r\n            _this.logger.warn(\"failed to register method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId + \" - \" + JSON.stringify(msg));\r\n            throw msg;\r\n        });\r\n    };\r\n    ServerProtocol.prototype.onInvoked = function (callback) {\r\n        this.callbacks.add(\"onInvoked\", callback);\r\n    };\r\n    ServerProtocol.prototype.methodInvocationResult = function (method, invocationId, err, result) {\r\n        var msg;\r\n        if (err || err === \"\") {\r\n            msg = {\r\n                type: \"error\",\r\n                request_id: invocationId,\r\n                reason_uri: \"agm.errors.client_error\",\r\n                reason: err,\r\n                context: result,\r\n                peer_id: undefined,\r\n            };\r\n        }\r\n        else {\r\n            msg = {\r\n                type: \"yield\",\r\n                invocation_id: invocationId,\r\n                peer_id: this.session.peerId,\r\n                result: result,\r\n                request_id: undefined,\r\n            };\r\n        }\r\n        this.session.sendFireAndForget(msg);\r\n    };\r\n    ServerProtocol.prototype.unregister = function (method) {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var msg;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        msg = {\r\n                            type: \"unregister\",\r\n                            methods: [method.repoId],\r\n                        };\r\n                        return [4, this.session.send(msg)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ServerProtocol.prototype.getBranchList = function (method) {\r\n        return this.streaming.getBranchList(method);\r\n    };\r\n    ServerProtocol.prototype.getSubscriptionList = function (method, branchKey) {\r\n        return this.streaming.getSubscriptionList(method, branchKey);\r\n    };\r\n    ServerProtocol.prototype.closeAllSubscriptions = function (method, branchKey) {\r\n        this.streaming.closeMultipleSubscriptions(method, branchKey);\r\n    };\r\n    ServerProtocol.prototype.pushData = function (method, data, branches) {\r\n        this.streaming.pushData(method, data, branches);\r\n    };\r\n    ServerProtocol.prototype.pushDataToSingle = function (method, subscription, data) {\r\n        this.streaming.pushDataToSingle(method, subscription, data);\r\n    };\r\n    ServerProtocol.prototype.closeSingleSubscription = function (method, subscription) {\r\n        this.streaming.closeSingleSubscription(method, subscription);\r\n    };\r\n    ServerProtocol.prototype.acceptRequestOnBranch = function (requestContext, method, branch) {\r\n        this.streaming.acceptRequestOnBranch(requestContext, method, branch);\r\n    };\r\n    ServerProtocol.prototype.rejectRequest = function (requestContext, method, reason) {\r\n        this.streaming.rejectRequest(requestContext, method, reason);\r\n    };\r\n    ServerProtocol.prototype.onSubRequest = function (callback) {\r\n        this.streaming.onSubRequest(callback);\r\n    };\r\n    ServerProtocol.prototype.onSubAdded = function (callback) {\r\n        this.streaming.onSubAdded(callback);\r\n    };\r\n    ServerProtocol.prototype.onSubRemoved = function (callback) {\r\n        this.streaming.onSubRemoved(callback);\r\n    };\r\n    ServerProtocol.prototype.handleInvokeMessage = function (msg) {\r\n        var invocationId = msg.invocation_id;\r\n        var callerId = msg.caller_id;\r\n        var methodId = msg.method_id;\r\n        var args = msg.arguments_kv;\r\n        var methodList = this.serverRepository.getList();\r\n        var method = methodList.filter(function (m) {\r\n            return m.repoId === methodId;\r\n        })[0];\r\n        if (method === undefined) {\r\n            return;\r\n        }\r\n        var client = this.clientRepository.getServerById(callerId).instance;\r\n        var invocationArgs = { args: args, instance: client };\r\n        this.callbacks.execute(\"onInvoked\", method, invocationId, invocationArgs);\r\n    };\r\n    return ServerProtocol;\r\n}());\n\nvar UserSubscription = (function () {\r\n    function UserSubscription(repository, subscriptionData) {\r\n        this.repository = repository;\r\n        this.subscriptionData = subscriptionData;\r\n    }\r\n    Object.defineProperty(UserSubscription.prototype, \"requestArguments\", {\r\n        get: function () {\r\n            return this.subscriptionData.params.arguments || {};\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"servers\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this.subscriptionData.trackedServers\r\n                .filter(function (pair) { return pair.subscriptionId; })\r\n                .map(function (pair) { return _this.repository.getServerById(pair.serverId).instance; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"serverInstance\", {\r\n        get: function () {\r\n            return this.servers[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"stream\", {\r\n        get: function () {\r\n            return this.subscriptionData.method;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    UserSubscription.prototype.onData = function (dataCallback) {\r\n        if (typeof dataCallback !== \"function\") {\r\n            throw new TypeError(\"The data callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onData.push(dataCallback);\r\n        if (this.subscriptionData.handlers.onData.length === 1 && this.subscriptionData.queued.data.length > 0) {\r\n            this.subscriptionData.queued.data.forEach(function (dataItem) {\r\n                dataCallback(dataItem);\r\n            });\r\n        }\r\n    };\r\n    UserSubscription.prototype.onClosed = function (closedCallback) {\r\n        if (typeof closedCallback !== \"function\") {\r\n            throw new TypeError(\"The callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onClosed.push(closedCallback);\r\n    };\r\n    UserSubscription.prototype.onFailed = function (callback) {\r\n    };\r\n    UserSubscription.prototype.onConnected = function (callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new TypeError(\"The callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onConnected.push(callback);\r\n    };\r\n    UserSubscription.prototype.close = function () {\r\n        this.subscriptionData.close();\r\n    };\r\n    UserSubscription.prototype.setNewSubscription = function (newSub) {\r\n        this.subscriptionData = newSub;\r\n    };\r\n    return UserSubscription;\r\n}());\n\nvar STATUS_AWAITING_ACCEPT = \"awaitingAccept\";\r\nvar STATUS_SUBSCRIBED = \"subscribed\";\r\nvar ERR_MSG_SUB_FAILED = \"Subscription failed.\";\r\nvar ERR_MSG_SUB_REJECTED = \"Subscription rejected.\";\r\nvar ON_CLOSE_MSG_SERVER_INIT = \"ServerInitiated\";\r\nvar ON_CLOSE_MSG_CLIENT_INIT = \"ClientInitiated\";\r\nvar ClientStreaming = (function () {\r\n    function ClientStreaming(session, repository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.logger = logger;\r\n        this.subscriptionsList = {};\r\n        this.subscriptionIdToLocalKeyMap = {};\r\n        this.nextSubLocalKey = 0;\r\n        this.handleErrorSubscribing = function (errorResponse) {\r\n            var tag = errorResponse._tag;\r\n            var subLocalKey = tag.subLocalKey;\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (typeof pendingSub !== \"object\") {\r\n                return;\r\n            }\r\n            pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                return server.serverId !== tag.serverId;\r\n            });\r\n            if (pendingSub.trackedServers.length <= 0) {\r\n                clearTimeout(pendingSub.timeoutId);\r\n                if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                    var reason = (typeof errorResponse.reason === \"string\" && errorResponse.reason !== \"\") ?\r\n                        ' Publisher said \"' + errorResponse.reason + '\".' :\r\n                        \" No reason given.\";\r\n                    var callArgs = typeof pendingSub.params.arguments === \"object\" ?\r\n                        JSON.stringify(pendingSub.params.arguments) :\r\n                        \"{}\";\r\n                    pendingSub.error({\r\n                        message: ERR_MSG_SUB_REJECTED + reason + \" Called with:\" + callArgs,\r\n                        called_with: pendingSub.params.arguments,\r\n                        method: pendingSub.method,\r\n                    });\r\n                }\r\n                else if (pendingSub.status === STATUS_SUBSCRIBED) {\r\n                    _this.callOnClosedHandlers(pendingSub);\r\n                }\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n        };\r\n        this.handleSubscribed = function (msg) {\r\n            var subLocalKey = msg._tag.subLocalKey;\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (typeof pendingSub !== \"object\") {\r\n                return;\r\n            }\r\n            var serverId = msg._tag.serverId;\r\n            var acceptingServer = pendingSub.trackedServers\r\n                .filter(function (server) {\r\n                return server.serverId === serverId;\r\n            })[0];\r\n            if (typeof acceptingServer !== \"object\") {\r\n                return;\r\n            }\r\n            acceptingServer.subscriptionId = msg.subscription_id;\r\n            _this.subscriptionIdToLocalKeyMap[msg.subscription_id] = subLocalKey;\r\n            var isFirstResponse = (pendingSub.status === STATUS_AWAITING_ACCEPT);\r\n            pendingSub.status = STATUS_SUBSCRIBED;\r\n            if (isFirstResponse) {\r\n                var reconnect = false;\r\n                var sub = pendingSub.subscription;\r\n                if (sub) {\r\n                    sub.setNewSubscription(pendingSub);\r\n                    pendingSub.success(sub);\r\n                    reconnect = true;\r\n                }\r\n                else {\r\n                    sub = new UserSubscription(_this.repository, pendingSub);\r\n                    pendingSub.subscription = sub;\r\n                    pendingSub.success(sub);\r\n                }\r\n                for (var _i = 0, _a = pendingSub.handlers.onConnected; _i < _a.length; _i++) {\r\n                    var handler = _a[_i];\r\n                    try {\r\n                        handler(sub.serverInstance, reconnect);\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.handleEventData = function (msg) {\r\n            var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n            if (typeof subLocalKey === \"undefined\") {\r\n                return;\r\n            }\r\n            var subscription = _this.subscriptionsList[subLocalKey];\r\n            if (typeof subscription !== \"object\") {\r\n                return;\r\n            }\r\n            var trackedServersFound = subscription.trackedServers.filter(function (server) {\r\n                return server.subscriptionId === msg.subscription_id;\r\n            });\r\n            if (trackedServersFound.length !== 1) {\r\n                return;\r\n            }\r\n            var isPrivateData = msg.oob;\r\n            var sendingServerId = trackedServersFound[0].serverId;\r\n            var receivedStreamData = function () {\r\n                return {\r\n                    data: msg.data,\r\n                    server: _this.repository.getServerById(sendingServerId).instance,\r\n                    requestArguments: subscription.params.arguments,\r\n                    message: undefined,\r\n                    private: isPrivateData,\r\n                };\r\n            };\r\n            var onDataHandlers = subscription.handlers.onData;\r\n            var queuedData = subscription.queued.data;\r\n            if (onDataHandlers.length > 0) {\r\n                onDataHandlers.forEach(function (callback) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(receivedStreamData());\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                queuedData.push(receivedStreamData());\r\n            }\r\n        };\r\n        this.handleSubscriptionCancelled = function (msg) {\r\n            var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n            if (typeof subLocalKey === \"undefined\") {\r\n                return;\r\n            }\r\n            var subscription = _this.subscriptionsList[subLocalKey];\r\n            if (typeof subscription !== \"object\") {\r\n                return;\r\n            }\r\n            var expectedNewLength = subscription.trackedServers.length - 1;\r\n            subscription.trackedServers = subscription.trackedServers.filter(function (server) {\r\n                if (server.subscriptionId === msg.subscription_id) {\r\n                    subscription.queued.closers.push(server.serverId);\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n            if (subscription.trackedServers.length !== expectedNewLength) {\r\n                return;\r\n            }\r\n            if (subscription.trackedServers.length <= 0) {\r\n                clearTimeout(subscription.timeoutId);\r\n                _this.callOnClosedHandlers(subscription);\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n            delete _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n        };\r\n        session.on(\"subscribed\", this.handleSubscribed);\r\n        session.on(\"event\", this.handleEventData);\r\n        session.on(\"subscription-cancelled\", this.handleSubscriptionCancelled);\r\n    }\r\n    ClientStreaming.prototype.subscribe = function (streamingMethod, params, targetServers, success, error, existingSub) {\r\n        var _this = this;\r\n        if (targetServers.length === 0) {\r\n            error({\r\n                method: streamingMethod,\r\n                called_with: params.arguments,\r\n                message: ERR_MSG_SUB_FAILED + \" No available servers matched the target params.\",\r\n            });\r\n            return;\r\n        }\r\n        var subLocalKey = this.getNextSubscriptionLocalKey();\r\n        var pendingSub = this.registerSubscription(subLocalKey, streamingMethod, params, success, error, params.methodResponseTimeout || 10000, existingSub);\r\n        if (typeof pendingSub !== \"object\") {\r\n            error({\r\n                method: streamingMethod,\r\n                called_with: params.arguments,\r\n                message: ERR_MSG_SUB_FAILED + \" Unable to register the user callbacks.\",\r\n            });\r\n            return;\r\n        }\r\n        targetServers.forEach(function (target) {\r\n            var serverId = target.server.id;\r\n            var method = target.methods.find(function (m) { return m.name === streamingMethod.name; });\r\n            if (!method) {\r\n                _this.logger.error(\"can not find method \" + streamingMethod.name + \" for target \" + target.server.id);\r\n                return;\r\n            }\r\n            pendingSub.trackedServers.push({\r\n                serverId: serverId,\r\n                subscriptionId: undefined,\r\n            });\r\n            var msg = {\r\n                type: \"subscribe\",\r\n                server_id: serverId,\r\n                method_id: method.gatewayId,\r\n                arguments_kv: params.arguments,\r\n            };\r\n            _this.session.send(msg, { serverId: serverId, subLocalKey: subLocalKey })\r\n                .then(function (m) { return _this.handleSubscribed(m); })\r\n                .catch(function (err) { return _this.handleErrorSubscribing(err); });\r\n        });\r\n    };\r\n    ClientStreaming.prototype.drainSubscriptions = function () {\r\n        var existing = Object.values(this.subscriptionsList);\r\n        this.subscriptionsList = {};\r\n        this.subscriptionIdToLocalKeyMap = {};\r\n        return existing;\r\n    };\r\n    ClientStreaming.prototype.getNextSubscriptionLocalKey = function () {\r\n        var current = this.nextSubLocalKey;\r\n        this.nextSubLocalKey += 1;\r\n        return current;\r\n    };\r\n    ClientStreaming.prototype.registerSubscription = function (subLocalKey, method, params, success, error, timeout, existingSub) {\r\n        var _this = this;\r\n        var subsInfo = {\r\n            localKey: subLocalKey,\r\n            status: STATUS_AWAITING_ACCEPT,\r\n            method: method,\r\n            params: params,\r\n            success: success,\r\n            error: error,\r\n            trackedServers: [],\r\n            handlers: {\r\n                onData: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onData) || [],\r\n                onClosed: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onClosed) || [],\r\n                onConnected: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onConnected) || [],\r\n            },\r\n            queued: {\r\n                data: [],\r\n                closers: [],\r\n            },\r\n            timeoutId: undefined,\r\n            close: function () { return _this.closeSubscription(subLocalKey); },\r\n            subscription: existingSub === null || existingSub === void 0 ? void 0 : existingSub.subscription\r\n        };\r\n        if (!existingSub) {\r\n            if (params.onData) {\r\n                subsInfo.handlers.onData.push(params.onData);\r\n            }\r\n            if (params.onClosed) {\r\n                subsInfo.handlers.onClosed.push(params.onClosed);\r\n            }\r\n            if (params.onConnected) {\r\n                subsInfo.handlers.onConnected.push(params.onConnected);\r\n            }\r\n        }\r\n        this.subscriptionsList[subLocalKey] = subsInfo;\r\n        subsInfo.timeoutId = setTimeout(function () {\r\n            if (_this.subscriptionsList[subLocalKey] === undefined) {\r\n                return;\r\n            }\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                error({\r\n                    method: method,\r\n                    called_with: params.arguments,\r\n                    message: ERR_MSG_SUB_FAILED + \" Subscription attempt timed out after \" + timeout + \" ms.\",\r\n                });\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n            else if (pendingSub.status === STATUS_SUBSCRIBED && pendingSub.trackedServers.length > 0) {\r\n                pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                    return (typeof server.subscriptionId !== \"undefined\");\r\n                });\r\n                delete pendingSub.timeoutId;\r\n                if (pendingSub.trackedServers.length <= 0) {\r\n                    _this.callOnClosedHandlers(pendingSub);\r\n                    delete _this.subscriptionsList[subLocalKey];\r\n                }\r\n            }\r\n        }, timeout);\r\n        return subsInfo;\r\n    };\r\n    ClientStreaming.prototype.callOnClosedHandlers = function (subscription, reason) {\r\n        var closersCount = subscription.queued.closers.length;\r\n        var closingServerId = (closersCount > 0) ? subscription.queued.closers[closersCount - 1] : null;\r\n        var closingServer;\r\n        if (closingServerId !== undefined && typeof closingServerId === \"string\") {\r\n            closingServer = this.repository.getServerById(closingServerId).instance;\r\n        }\r\n        subscription.handlers.onClosed.forEach(function (callback) {\r\n            if (typeof callback !== \"function\") {\r\n                return;\r\n            }\r\n            callback({\r\n                message: reason || ON_CLOSE_MSG_SERVER_INIT,\r\n                requestArguments: subscription.params.arguments || {},\r\n                server: closingServer,\r\n                stream: subscription.method,\r\n            });\r\n        });\r\n    };\r\n    ClientStreaming.prototype.closeSubscription = function (subLocalKey) {\r\n        var _this = this;\r\n        var subscription = this.subscriptionsList[subLocalKey];\r\n        if (typeof subscription !== \"object\") {\r\n            return;\r\n        }\r\n        subscription.trackedServers.forEach(function (server) {\r\n            if (typeof server.subscriptionId === \"undefined\") {\r\n                return;\r\n            }\r\n            subscription.queued.closers.push(server.serverId);\r\n            _this.session.sendFireAndForget({\r\n                type: \"unsubscribe\",\r\n                subscription_id: server.subscriptionId,\r\n                reason_uri: \"\",\r\n                reason: ON_CLOSE_MSG_CLIENT_INIT,\r\n            });\r\n            delete _this.subscriptionIdToLocalKeyMap[server.subscriptionId];\r\n        });\r\n        subscription.trackedServers = [];\r\n        this.callOnClosedHandlers(subscription, ON_CLOSE_MSG_CLIENT_INIT);\r\n        delete this.subscriptionsList[subLocalKey];\r\n    };\r\n    return ClientStreaming;\r\n}());\n\nvar ClientProtocol = (function () {\r\n    function ClientProtocol(session, repository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.logger = logger;\r\n        session.on(\"peer-added\", function (msg) { return _this.handlePeerAdded(msg); });\r\n        session.on(\"peer-removed\", function (msg) { return _this.handlePeerRemoved(msg); });\r\n        session.on(\"methods-added\", function (msg) { return _this.handleMethodsAddedMessage(msg); });\r\n        session.on(\"methods-removed\", function (msg) { return _this.handleMethodsRemovedMessage(msg); });\r\n        this.streaming = new ClientStreaming(session, repository, logger);\r\n    }\r\n    ClientProtocol.prototype.subscribe = function (stream, options, targetServers, success, error, existingSub) {\r\n        this.streaming.subscribe(stream, options, targetServers, success, error, existingSub);\r\n    };\r\n    ClientProtocol.prototype.invoke = function (id, method, args, target) {\r\n        var _this = this;\r\n        var serverId = target.id;\r\n        var methodId = method.gatewayId;\r\n        var msg = {\r\n            type: \"call\",\r\n            server_id: serverId,\r\n            method_id: methodId,\r\n            arguments_kv: args,\r\n        };\r\n        return this.session.send(msg, { invocationId: id, serverId: serverId })\r\n            .then(function (m) { return _this.handleResultMessage(m); })\r\n            .catch(function (err) { return _this.handleInvocationError(err); });\r\n    };\r\n    ClientProtocol.prototype.drainSubscriptions = function () {\r\n        return this.streaming.drainSubscriptions();\r\n    };\r\n    ClientProtocol.prototype.handlePeerAdded = function (msg) {\r\n        var newPeerId = msg.new_peer_id;\r\n        var remoteId = msg.identity;\r\n        var isLocal = msg.meta ? msg.meta.local : true;\r\n        var pid = Number(remoteId.process);\r\n        var serverInfo = {\r\n            machine: remoteId.machine,\r\n            pid: isNaN(pid) ? remoteId.process : pid,\r\n            instance: remoteId.instance,\r\n            application: remoteId.application,\r\n            applicationName: remoteId.applicationName,\r\n            environment: remoteId.environment,\r\n            region: remoteId.region,\r\n            user: remoteId.user,\r\n            windowId: remoteId.windowId,\r\n            peerId: newPeerId,\r\n            api: remoteId.api,\r\n            isLocal: isLocal\r\n        };\r\n        this.repository.addServer(serverInfo, newPeerId);\r\n    };\r\n    ClientProtocol.prototype.handlePeerRemoved = function (msg) {\r\n        var removedPeerId = msg.removed_id;\r\n        var reason = msg.reason;\r\n        this.repository.removeServerById(removedPeerId, reason);\r\n    };\r\n    ClientProtocol.prototype.handleMethodsAddedMessage = function (msg) {\r\n        var _this = this;\r\n        var serverId = msg.server_id;\r\n        var methods = msg.methods;\r\n        methods.forEach(function (method) {\r\n            _this.repository.addServerMethod(serverId, method);\r\n        });\r\n    };\r\n    ClientProtocol.prototype.handleMethodsRemovedMessage = function (msg) {\r\n        var _this = this;\r\n        var serverId = msg.server_id;\r\n        var methodIdList = msg.methods;\r\n        var server = this.repository.getServerById(serverId);\r\n        var serverMethodKeys = Object.keys(server.methods);\r\n        serverMethodKeys.forEach(function (methodKey) {\r\n            var method = server.methods[methodKey];\r\n            if (methodIdList.indexOf(method.gatewayId) > -1) {\r\n                _this.repository.removeServerMethod(serverId, methodKey);\r\n            }\r\n        });\r\n    };\r\n    ClientProtocol.prototype.handleResultMessage = function (msg) {\r\n        var invocationId = msg._tag.invocationId;\r\n        var result = msg.result;\r\n        var serverId = msg._tag.serverId;\r\n        var server = this.repository.getServerById(serverId);\r\n        return {\r\n            invocationId: invocationId,\r\n            result: result,\r\n            instance: server.instance,\r\n            status: InvokeStatus.Success,\r\n            message: \"\"\r\n        };\r\n    };\r\n    ClientProtocol.prototype.handleInvocationError = function (msg) {\r\n        this.logger.debug(\"handle invocation error \" + JSON.stringify(msg));\r\n        if (\"_tag\" in msg) {\r\n            var invocationId = msg._tag.invocationId;\r\n            var serverId = msg._tag.serverId;\r\n            var server = this.repository.getServerById(serverId);\r\n            var message = msg.reason;\r\n            var context_1 = msg.context;\r\n            return {\r\n                invocationId: invocationId,\r\n                result: context_1,\r\n                instance: server.instance,\r\n                status: InvokeStatus.Error,\r\n                message: message\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                invocationId: \"\",\r\n                message: msg.message,\r\n                status: InvokeStatus.Error,\r\n                error: msg\r\n            };\r\n        }\r\n    };\r\n    return ClientProtocol;\r\n}());\n\nfunction gW3ProtocolFactory (instance, connection, clientRepository, serverRepository, libConfig, interop) {\r\n    var logger = libConfig.logger.subLogger(\"gw3-protocol\");\r\n    var resolveReadyPromise;\r\n    var readyPromise = new Promise(function (resolve) {\r\n        resolveReadyPromise = resolve;\r\n    });\r\n    var session = connection.domain(\"agm\", [\"subscribed\"]);\r\n    var server = new ServerProtocol(session, clientRepository, serverRepository, logger.subLogger(\"server\"));\r\n    var client = new ClientProtocol(session, clientRepository, logger.subLogger(\"client\"));\r\n    function handleReconnect() {\r\n        logger.info(\"reconnected - will replay registered methods and subscriptions\");\r\n        var existingSubscriptions = client.drainSubscriptions();\r\n        for (var _i = 0, existingSubscriptions_1 = existingSubscriptions; _i < existingSubscriptions_1.length; _i++) {\r\n            var sub = existingSubscriptions_1[_i];\r\n            var methodInfo = sub.method;\r\n            var params = Object.assign({}, sub.params);\r\n            logger.info(\"trying to re-subscribe to method \" + methodInfo.name);\r\n            interop.client.subscribe(methodInfo, params, undefined, undefined, sub);\r\n        }\r\n        var registeredMethods = serverRepository.getList();\r\n        serverRepository.reset();\r\n        for (var _a = 0, registeredMethods_1 = registeredMethods; _a < registeredMethods_1.length; _a++) {\r\n            var method = registeredMethods_1[_a];\r\n            var def = method.definition;\r\n            logger.info(\"re-publishing method \" + def.name);\r\n            if (method.stream) {\r\n                interop.server.createStream(def, method.streamCallbacks, undefined, undefined, method.stream);\r\n            }\r\n            else if (method.theFunction && method.theFunction.userCallback) {\r\n                interop.register(def, method.theFunction.userCallback);\r\n            }\r\n            else if (method.theFunction && method.theFunction.userCallbackAsync) {\r\n                interop.registerAsync(def, method.theFunction.userCallbackAsync);\r\n            }\r\n        }\r\n    }\r\n    function handleInitialJoin() {\r\n        if (resolveReadyPromise) {\r\n            resolveReadyPromise({\r\n                client: client,\r\n                server: server,\r\n            });\r\n            resolveReadyPromise = undefined;\r\n        }\r\n    }\r\n    session.onJoined(function (reconnect) {\r\n        clientRepository.addServer(instance, connection.peerId);\r\n        if (reconnect) {\r\n            handleReconnect();\r\n        }\r\n        else {\r\n            handleInitialJoin();\r\n        }\r\n    });\r\n    session.onLeft(function () {\r\n        clientRepository.reset();\r\n    });\r\n    session.join();\r\n    return readyPromise;\r\n}\n\nvar Interop = (function () {\r\n    function Interop(configuration) {\r\n        var _this = this;\r\n        if (typeof configuration === \"undefined\") {\r\n            throw new Error(\"configuration is required\");\r\n        }\r\n        if (typeof configuration.connection === \"undefined\") {\r\n            throw new Error(\"configuration.connections is required\");\r\n        }\r\n        var connection = configuration.connection;\r\n        if (typeof configuration.methodResponseTimeout !== \"number\") {\r\n            configuration.methodResponseTimeout = 30 * 1000;\r\n        }\r\n        if (typeof configuration.waitTimeoutMs !== \"number\") {\r\n            configuration.waitTimeoutMs = 30 * 1000;\r\n        }\r\n        this.unwrappedInstance = new InstanceWrapper(this, undefined, connection);\r\n        this.instance = this.unwrappedInstance.unwrap();\r\n        this.clientRepository = new ClientRepository(configuration.logger.subLogger(\"cRep\"), this);\r\n        this.serverRepository = new ServerRepository();\r\n        var protocolPromise;\r\n        if (connection.protocolVersion === 3) {\r\n            protocolPromise = gW3ProtocolFactory(this.instance, connection, this.clientRepository, this.serverRepository, configuration, this);\r\n        }\r\n        else {\r\n            throw new Error(\"protocol \" + connection.protocolVersion + \" not supported\");\r\n        }\r\n        this.readyPromise = protocolPromise.then(function (protocol) {\r\n            _this.protocol = protocol;\r\n            _this.client = new Client(_this.protocol, _this.clientRepository, _this.instance, configuration);\r\n            _this.server = new Server(_this.protocol, _this.serverRepository);\r\n            return _this;\r\n        });\r\n    }\r\n    Interop.prototype.ready = function () {\r\n        return this.readyPromise;\r\n    };\r\n    Interop.prototype.serverRemoved = function (callback) {\r\n        return this.client.serverRemoved(callback);\r\n    };\r\n    Interop.prototype.serverAdded = function (callback) {\r\n        return this.client.serverAdded(callback);\r\n    };\r\n    Interop.prototype.serverMethodRemoved = function (callback) {\r\n        return this.client.serverMethodRemoved(callback);\r\n    };\r\n    Interop.prototype.serverMethodAdded = function (callback) {\r\n        return this.client.serverMethodAdded(callback);\r\n    };\r\n    Interop.prototype.methodRemoved = function (callback) {\r\n        return this.client.methodRemoved(callback);\r\n    };\r\n    Interop.prototype.methodAdded = function (callback) {\r\n        return this.client.methodAdded(callback);\r\n    };\r\n    Interop.prototype.methodsForInstance = function (instance) {\r\n        return this.client.methodsForInstance(instance);\r\n    };\r\n    Interop.prototype.methods = function (methodFilter) {\r\n        return this.client.methods(methodFilter);\r\n    };\r\n    Interop.prototype.servers = function (methodFilter) {\r\n        return this.client.servers(methodFilter);\r\n    };\r\n    Interop.prototype.subscribe = function (method, options, successCallback, errorCallback) {\r\n        return this.client.subscribe(method, options, successCallback, errorCallback);\r\n    };\r\n    Interop.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback) {\r\n        return this.server.createStream(streamDef, callbacks, successCallback, errorCallback);\r\n    };\r\n    Interop.prototype.unregister = function (methodFilter) {\r\n        return this.server.unregister(methodFilter);\r\n    };\r\n    Interop.prototype.registerAsync = function (methodDefinition, callback) {\r\n        return this.server.registerAsync(methodDefinition, callback);\r\n    };\r\n    Interop.prototype.register = function (methodDefinition, callback) {\r\n        return this.server.register(methodDefinition, callback);\r\n    };\r\n    Interop.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n        return this.client.invoke(methodFilter, argumentObj, target, additionalOptions, success, error);\r\n    };\r\n    Interop.prototype.waitForMethod = function (name) {\r\n        var pw = new PromiseWrapper();\r\n        var unsubscribe = this.client.methodAdded(function (m) {\r\n            if (m.name === name) {\r\n                unsubscribe();\r\n                pw.resolve(m);\r\n            }\r\n        });\r\n        return pw.promise;\r\n    };\r\n    return Interop;\r\n}());\n\nvar successMessages = [\"subscribed\", \"success\"];\r\nvar MessageBus = (function () {\r\n    function MessageBus(connection, logger) {\r\n        var _this = this;\r\n        this.publish = function (topic, data, options) {\r\n            var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n            var args = _this.removeEmptyValues({\r\n                type: \"publish\",\r\n                topic: topic,\r\n                data: data,\r\n                peer_id: _this.peerId,\r\n                routing_key: routingKey,\r\n                target_identity: target\r\n            });\r\n            _this.session.send(args);\r\n        };\r\n        this.subscribe = function (topic, callback, options) {\r\n            return new Promise(function (resolve, reject) {\r\n                var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n                var args = _this.removeEmptyValues({\r\n                    type: \"subscribe\",\r\n                    topic: topic,\r\n                    peer_id: _this.peerId,\r\n                    routing_key: routingKey,\r\n                    source: target\r\n                });\r\n                _this.session.send(args)\r\n                    .then(function (response) {\r\n                    var subscription_id = response.subscription_id;\r\n                    _this.subscriptions.push({ subscription_id: subscription_id, topic: topic, callback: callback, source: target });\r\n                    resolve({\r\n                        unsubscribe: function () {\r\n                            _this.session.send({ type: \"unsubscribe\", subscription_id: subscription_id, peer_id: _this.peerId });\r\n                            _this.subscriptions = _this.subscriptions.filter(function (s) { return s.subscription_id !== subscription_id; });\r\n                            return Promise.resolve();\r\n                        }\r\n                    });\r\n                })\r\n                    .catch(function (error) { return reject(error); });\r\n            });\r\n        };\r\n        this.watchOnEvent = function () {\r\n            _this.session.on(\"event\", function (args) {\r\n                var data = args.data, subscription_id = args.subscription_id;\r\n                var source = args[\"publisher-identity\"];\r\n                var subscription = _this.subscriptions.find(function (s) { return s.subscription_id === subscription_id; });\r\n                if (subscription) {\r\n                    if (!subscription.source) {\r\n                        subscription.callback(data, subscription.topic, source);\r\n                    }\r\n                    else {\r\n                        if (_this.keysMatch(subscription.source, source)) {\r\n                            subscription.callback(data, subscription.topic, source);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        this.connection = connection;\r\n        this.logger = logger;\r\n        this.peerId = connection.peerId;\r\n        this.subscriptions = [];\r\n        this.session = connection.domain(\"bus\", successMessages);\r\n        this.readyPromise = this.session.join();\r\n        this.readyPromise.then(function () {\r\n            _this.watchOnEvent();\r\n        });\r\n    }\r\n    MessageBus.prototype.ready = function () {\r\n        return this.readyPromise;\r\n    };\r\n    MessageBus.prototype.removeEmptyValues = function (obj) {\r\n        var cleaned = {};\r\n        Object.keys(obj).forEach(function (key) {\r\n            if (obj[key] !== undefined && obj[key] !== null) {\r\n                cleaned[key] = obj[key];\r\n            }\r\n        });\r\n        return cleaned;\r\n    };\r\n    MessageBus.prototype.keysMatch = function (obj1, obj2) {\r\n        var keysObj1 = Object.keys(obj1);\r\n        var allMatch = true;\r\n        keysObj1.forEach(function (key) {\r\n            if (obj1[key] !== obj2[key]) {\r\n                allMatch = false;\r\n            }\r\n        });\r\n        return allMatch;\r\n    };\r\n    return MessageBus;\r\n}());\n\nvar GlueCore = function (userConfig, ext) {\r\n    var gdVersion = Utils.getGDMajorVersion();\r\n    var glue42gd;\r\n    var preloadPromise = Promise.resolve();\r\n    if (gdVersion) {\r\n        if (gdVersion < 3) {\r\n            throw new Error(\"GD v2 is not supported. Use v4 of the API to run in that context.\");\r\n        }\r\n        else if (gdVersion >= 3) {\r\n            glue42gd = window.glue42gd;\r\n            preloadPromise = window.gdPreloadPromise || preloadPromise;\r\n        }\r\n    }\r\n    var glueInitTimer = timer(\"glue\");\r\n    userConfig = userConfig || {};\r\n    ext = ext || {};\r\n    var internalConfig = prepareConfig(userConfig, ext, glue42gd);\r\n    var _connection;\r\n    var _interop;\r\n    var _logger;\r\n    var _metrics;\r\n    var _contexts;\r\n    var _bus;\r\n    var _allowTrace;\r\n    var libs = {};\r\n    function registerLib(name, inner, t) {\r\n        _allowTrace = _logger.canPublish(\"trace\");\r\n        if (_allowTrace) {\r\n            _logger.trace(\"registering \" + name + \" module\");\r\n        }\r\n        var done = function () {\r\n            inner.initTime = t.stop();\r\n            inner.initEndTime = t.endTime;\r\n            inner.marks = t.marks;\r\n            if (_allowTrace) {\r\n                _logger.trace(name + \" is ready - \" + (t.endTime - t.startTime));\r\n            }\r\n        };\r\n        inner.initStartTime = t.startTime;\r\n        if (inner.ready) {\r\n            inner.ready().then(function () {\r\n                done();\r\n            });\r\n        }\r\n        else {\r\n            done();\r\n        }\r\n        if (!Array.isArray(name)) {\r\n            name = [name];\r\n        }\r\n        name.forEach(function (n) {\r\n            libs[n] = inner;\r\n            GlueCore[n] = inner;\r\n        });\r\n    }\r\n    function setupConnection() {\r\n        var initTimer = timer(\"connection\");\r\n        _connection = new Connection(internalConfig.connection, _logger.subLogger(\"connection\"));\r\n        var authPromise = Promise.resolve(internalConfig.auth);\r\n        if (internalConfig.connection && !internalConfig.auth) {\r\n            if (glue42gd) {\r\n                authPromise = glue42gd.getGWToken()\r\n                    .then(function (token) {\r\n                    return {\r\n                        gatewayToken: token\r\n                    };\r\n                });\r\n            }\r\n            else {\r\n                authPromise = Promise.reject(\"You need to provide auth information\");\r\n            }\r\n        }\r\n        return authPromise\r\n            .then(function (authConfig) {\r\n            initTimer.mark(\"auth-promise-resolved\");\r\n            var authRequest;\r\n            if (Object.prototype.toString.call(authConfig) === \"[object Object]\") {\r\n                authRequest = authConfig;\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid auth object - \" + JSON.stringify(authConfig));\r\n            }\r\n            return _connection.login(authRequest);\r\n        })\r\n            .then(function () {\r\n            registerLib(\"connection\", _connection, initTimer);\r\n            return internalConfig;\r\n        })\r\n            .catch(function (e) {\r\n            if (_connection) {\r\n                _connection.logout();\r\n            }\r\n            throw e;\r\n        });\r\n    }\r\n    function setupLogger() {\r\n        var _a;\r\n        var initTimer = timer(\"logger\");\r\n        _logger = new Logger(\"\" + ((_a = internalConfig.connection.identity) === null || _a === void 0 ? void 0 : _a.application), undefined, internalConfig.customLogger);\r\n        _logger.consoleLevel(internalConfig.logger.console);\r\n        _logger.publishLevel(internalConfig.logger.publish);\r\n        if (_logger.canPublish(\"debug\")) {\r\n            _logger.debug(\"initializing glue...\");\r\n        }\r\n        registerLib(\"logger\", _logger, initTimer);\r\n        return Promise.resolve(undefined);\r\n    }\r\n    function setupMetrics() {\r\n        var _a, _b, _c, _d;\r\n        var initTimer = timer(\"metrics\");\r\n        var config = internalConfig.metrics;\r\n        var metricsPublishingEnabledFunc = glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.getMetricsPublishingEnabled;\r\n        var identity = internalConfig.connection.identity;\r\n        var canUpdateMetric = metricsPublishingEnabledFunc ? metricsPublishingEnabledFunc : function () { return true; };\r\n        var disableAutoAppSystem = (_a = (typeof config !== \"boolean\" && config.disableAutoAppSystem)) !== null && _a !== void 0 ? _a : false;\r\n        _metrics = metrics({\r\n            connection: config ? _connection : undefined,\r\n            logger: _logger.subLogger(\"metrics\"),\r\n            canUpdateMetric: canUpdateMetric,\r\n            system: \"Glue42\",\r\n            service: (_b = identity === null || identity === void 0 ? void 0 : identity.service) !== null && _b !== void 0 ? _b : \"metrics-service\",\r\n            instance: (_d = (_c = identity === null || identity === void 0 ? void 0 : identity.instance) !== null && _c !== void 0 ? _c : identity === null || identity === void 0 ? void 0 : identity.windowId) !== null && _d !== void 0 ? _d : shortid(),\r\n            disableAutoAppSystem: disableAutoAppSystem,\r\n            pagePerformanceMetrics: typeof config !== \"boolean\" ? config === null || config === void 0 ? void 0 : config.pagePerformanceMetrics : undefined\r\n        });\r\n        registerLib(\"metrics\", _metrics, initTimer);\r\n        return Promise.resolve();\r\n    }\r\n    function setupInterop() {\r\n        var initTimer = timer(\"interop\");\r\n        var agmConfig = {\r\n            connection: _connection,\r\n            logger: _logger.subLogger(\"interop\"),\r\n        };\r\n        _interop = new Interop(agmConfig);\r\n        Logger.Interop = _interop;\r\n        registerLib([\"interop\", \"agm\"], _interop, initTimer);\r\n        return Promise.resolve();\r\n    }\r\n    function setupContexts() {\r\n        var hasActivities = (internalConfig.activities && _connection.protocolVersion === 3);\r\n        var needsContexts = internalConfig.contexts || hasActivities;\r\n        if (needsContexts) {\r\n            var initTimer = timer(\"contexts\");\r\n            _contexts = new ContextsModule({\r\n                connection: _connection,\r\n                logger: _logger.subLogger(\"contexts\")\r\n            });\r\n            registerLib(\"contexts\", _contexts, initTimer);\r\n            return _contexts;\r\n        }\r\n        else {\r\n            var replayer = _connection.replayer;\r\n            if (replayer) {\r\n                replayer.drain(ContextMessageReplaySpec.name);\r\n            }\r\n        }\r\n    }\r\n    function setupBus() {\r\n        return __awaiter$1(this, void 0, void 0, function () {\r\n            var initTimer;\r\n            return __generator(this, function (_a) {\r\n                if (!internalConfig.bus) {\r\n                    return [2, Promise.resolve()];\r\n                }\r\n                initTimer = timer(\"bus\");\r\n                _bus = new MessageBus(_connection, _logger.subLogger(\"bus\"));\r\n                registerLib(\"bus\", _bus, initTimer);\r\n                return [2, Promise.resolve()];\r\n            });\r\n        });\r\n    }\r\n    function setupExternalLibs(externalLibs) {\r\n        try {\r\n            externalLibs.forEach(function (lib) {\r\n                setupExternalLib(lib.name, lib.create);\r\n            });\r\n            return Promise.resolve();\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    function setupExternalLib(name, createCallback) {\r\n        var initTimer = timer(name);\r\n        var lib = createCallback(libs);\r\n        if (lib) {\r\n            registerLib(name, lib, initTimer);\r\n        }\r\n    }\r\n    function waitForLibs() {\r\n        var libsReadyPromises = Object.keys(libs).map(function (key) {\r\n            var lib = libs[key];\r\n            return lib.ready ?\r\n                lib.ready() : Promise.resolve();\r\n        });\r\n        return Promise.all(libsReadyPromises);\r\n    }\r\n    function constructGlueObject() {\r\n        var feedbackFunc = function (feedbackInfo) {\r\n            if (!_interop) {\r\n                return;\r\n            }\r\n            _interop.invoke(\"T42.ACS.Feedback\", feedbackInfo, \"best\");\r\n        };\r\n        var info = {\r\n            coreVersion: version$1,\r\n            version: internalConfig.version\r\n        };\r\n        glueInitTimer.stop();\r\n        var glue = {\r\n            feedback: feedbackFunc,\r\n            info: info,\r\n            logger: _logger,\r\n            interop: _interop,\r\n            agm: _interop,\r\n            connection: _connection,\r\n            metrics: _metrics,\r\n            contexts: _contexts,\r\n            bus: _bus,\r\n            version: internalConfig.version,\r\n            userConfig: userConfig,\r\n            done: function () {\r\n                _logger === null || _logger === void 0 ? void 0 : _logger.info(\"done called by user...\");\r\n                return _connection.logout();\r\n            }\r\n        };\r\n        glue.performance = {\r\n            get glueVer() {\r\n                return internalConfig.version;\r\n            },\r\n            get glueConfig() {\r\n                return JSON.stringify(userConfig);\r\n            },\r\n            get browser() {\r\n                return window.performance.timing.toJSON();\r\n            },\r\n            get memory() {\r\n                return window.performance.memory;\r\n            },\r\n            get initTimes() {\r\n                var all = getAllTimers();\r\n                return Object.keys(all).map(function (key) {\r\n                    var t = all[key];\r\n                    return {\r\n                        name: key,\r\n                        duration: t.endTime - t.startTime,\r\n                        marks: t.marks\r\n                    };\r\n                });\r\n            }\r\n        };\r\n        Object.keys(libs).forEach(function (key) {\r\n            var lib = libs[key];\r\n            glue[key] = lib;\r\n        });\r\n        glue.config = {};\r\n        Object.keys(internalConfig).forEach(function (k) {\r\n            glue.config[k] = internalConfig[k];\r\n        });\r\n        if (ext && ext.extOptions) {\r\n            Object.keys(ext.extOptions).forEach(function (k) {\r\n                glue.config[k] = ext === null || ext === void 0 ? void 0 : ext.extOptions[k];\r\n            });\r\n        }\r\n        if (ext === null || ext === void 0 ? void 0 : ext.enrichGlue) {\r\n            ext.enrichGlue(glue);\r\n        }\r\n        if (glue42gd && glue42gd.updatePerfData) {\r\n            glue42gd.updatePerfData(glue.performance);\r\n        }\r\n        if (glue.agm) {\r\n            var deprecatedDecorator = function (fn, wrong, proper) {\r\n                return function () {\r\n                    glue.logger.warn(\"glue.js - 'glue.agm.\" + wrong + \"' method is deprecated, use 'glue.interop.\" + proper + \"' instead.\");\r\n                    return fn.apply(glue.agm, arguments);\r\n                };\r\n            };\r\n            var agmAny = glue.agm;\r\n            agmAny.method_added = deprecatedDecorator(glue.agm.methodAdded, \"method_added\", \"methodAdded\");\r\n            agmAny.method_removed = deprecatedDecorator(glue.agm.methodRemoved, \"method_removed\", \"methodRemoved\");\r\n            agmAny.server_added = deprecatedDecorator(glue.agm.serverAdded, \"server_added\", \"serverAdded\");\r\n            agmAny.server_method_aded = deprecatedDecorator(glue.agm.serverMethodAdded, \"server_method_aded\", \"serverMethodAdded\");\r\n            agmAny.server_method_removed = deprecatedDecorator(glue.agm.serverMethodRemoved, \"server_method_removed\", \"serverMethodRemoved\");\r\n        }\r\n        return glue;\r\n    }\r\n    return preloadPromise\r\n        .then(setupLogger)\r\n        .then(setupConnection)\r\n        .then(function () { return Promise.all([setupMetrics(), setupInterop(), setupContexts(), setupBus()]); })\r\n        .then(function () { return _interop.readyPromise; })\r\n        .then(function () {\r\n        return setupExternalLibs(internalConfig.libs || []);\r\n    })\r\n        .then(waitForLibs)\r\n        .then(constructGlueObject)\r\n        .catch(function (err) {\r\n        return Promise.reject({\r\n            err: err,\r\n            libs: libs\r\n        });\r\n    });\r\n};\r\nif (typeof window !== \"undefined\") {\r\n    window.GlueCore = GlueCore;\r\n}\r\nGlueCore.version = version$1;\r\nGlueCore.default = GlueCore;\n\nconst glueWebFactory = createFactoryFunction(GlueCore);\r\nif (typeof window !== \"undefined\") {\r\n    const windowAny = window;\r\n    windowAny.GlueWeb = glueWebFactory;\r\n    delete windowAny.GlueCore;\r\n}\r\nglueWebFactory.version = version;\n\nexport default glueWebFactory;\n//# sourceMappingURL=web.es.js.map\n","/**\n * chroma.js - JavaScript library for color conversions\n *\n * Copyright (c) 2011-2019, Gregor Aisch\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. The name Gregor Aisch may not be used to endorse or promote products\n * derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * -------------------------------------------------------\n *\n * chroma.js includes colors from colorbrewer2.org, which are released under\n * the following license:\n *\n * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,\n * and The Pennsylvania State University.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n *\n * ------------------------------------------------------\n *\n * Named colors are taken from X11 Color Names.\n * http://www.w3.org/TR/css3-color/#svg-color\n *\n * @preserve\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.chroma = factory());\n}(this, (function () { 'use strict';\n\n    var limit = function (x, min, max) {\n        if ( min === void 0 ) min=0;\n        if ( max === void 0 ) max=1;\n\n        return x < min ? min : x > max ? max : x;\n    };\n\n    var clip_rgb = function (rgb) {\n        rgb._clipped = false;\n        rgb._unclipped = rgb.slice(0);\n        for (var i=0; i<=3; i++) {\n            if (i < 3) {\n                if (rgb[i] < 0 || rgb[i] > 255) { rgb._clipped = true; }\n                rgb[i] = limit(rgb[i], 0, 255);\n            } else if (i === 3) {\n                rgb[i] = limit(rgb[i], 0, 1);\n            }\n        }\n        return rgb;\n    };\n\n    // ported from jQuery's $.type\n    var classToType = {};\n    for (var i = 0, list = ['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Undefined', 'Null']; i < list.length; i += 1) {\n        var name = list[i];\n\n        classToType[(\"[object \" + name + \"]\")] = name.toLowerCase();\n    }\n    var type = function(obj) {\n        return classToType[Object.prototype.toString.call(obj)] || \"object\";\n    };\n\n    var unpack = function (args, keyOrder) {\n        if ( keyOrder === void 0 ) keyOrder=null;\n\n    \t// if called with more than 3 arguments, we return the arguments\n        if (args.length >= 3) { return Array.prototype.slice.call(args); }\n        // with less than 3 args we check if first arg is object\n        // and use the keyOrder string to extract and sort properties\n    \tif (type(args[0]) == 'object' && keyOrder) {\n    \t\treturn keyOrder.split('')\n    \t\t\t.filter(function (k) { return args[0][k] !== undefined; })\n    \t\t\t.map(function (k) { return args[0][k]; });\n    \t}\n    \t// otherwise we just return the first argument\n    \t// (which we suppose is an array of args)\n        return args[0];\n    };\n\n    var last = function (args) {\n        if (args.length < 2) { return null; }\n        var l = args.length-1;\n        if (type(args[l]) == 'string') { return args[l].toLowerCase(); }\n        return null;\n    };\n\n    var PI = Math.PI;\n\n    var utils = {\n    \tclip_rgb: clip_rgb,\n    \tlimit: limit,\n    \ttype: type,\n    \tunpack: unpack,\n    \tlast: last,\n    \tPI: PI,\n    \tTWOPI: PI*2,\n    \tPITHIRD: PI/3,\n    \tDEG2RAD: PI / 180,\n    \tRAD2DEG: 180 / PI\n    };\n\n    var input = {\n    \tformat: {},\n    \tautodetect: []\n    };\n\n    var last$1 = utils.last;\n    var clip_rgb$1 = utils.clip_rgb;\n    var type$1 = utils.type;\n\n\n    var Color = function Color() {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var me = this;\n        if (type$1(args[0]) === 'object' &&\n            args[0].constructor &&\n            args[0].constructor === this.constructor) {\n            // the argument is already a Color instance\n            return args[0];\n        }\n\n        // last argument could be the mode\n        var mode = last$1(args);\n        var autodetect = false;\n\n        if (!mode) {\n            autodetect = true;\n            if (!input.sorted) {\n                input.autodetect = input.autodetect.sort(function (a,b) { return b.p - a.p; });\n                input.sorted = true;\n            }\n            // auto-detect format\n            for (var i = 0, list = input.autodetect; i < list.length; i += 1) {\n                var chk = list[i];\n\n                mode = chk.test.apply(chk, args);\n                if (mode) { break; }\n            }\n        }\n\n        if (input.format[mode]) {\n            var rgb = input.format[mode].apply(null, autodetect ? args : args.slice(0,-1));\n            me._rgb = clip_rgb$1(rgb);\n        } else {\n            throw new Error('unknown format: '+args);\n        }\n\n        // add alpha channel\n        if (me._rgb.length === 3) { me._rgb.push(1); }\n    };\n\n    Color.prototype.toString = function toString () {\n        if (type$1(this.hex) == 'function') { return this.hex(); }\n        return (\"[\" + (this._rgb.join(',')) + \"]\");\n    };\n\n    var Color_1 = Color;\n\n    var chroma = function () {\n    \tvar args = [], len = arguments.length;\n    \twhile ( len-- ) args[ len ] = arguments[ len ];\n\n    \treturn new (Function.prototype.bind.apply( chroma.Color, [ null ].concat( args) ));\n    };\n\n    chroma.Color = Color_1;\n    chroma.version = '2.1.0';\n\n    var chroma_1 = chroma;\n\n    var unpack$1 = utils.unpack;\n    var max = Math.max;\n\n    var rgb2cmyk = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$1(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var k = 1 - max(r,max(g,b));\n        var f = k < 1 ? 1 / (1-k) : 0;\n        var c = (1-r-k) * f;\n        var m = (1-g-k) * f;\n        var y = (1-b-k) * f;\n        return [c,m,y,k];\n    };\n\n    var rgb2cmyk_1 = rgb2cmyk;\n\n    var unpack$2 = utils.unpack;\n\n    var cmyk2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$2(args, 'cmyk');\n        var c = args[0];\n        var m = args[1];\n        var y = args[2];\n        var k = args[3];\n        var alpha = args.length > 4 ? args[4] : 1;\n        if (k === 1) { return [0,0,0,alpha]; }\n        return [\n            c >= 1 ? 0 : 255 * (1-c) * (1-k), // r\n            m >= 1 ? 0 : 255 * (1-m) * (1-k), // g\n            y >= 1 ? 0 : 255 * (1-y) * (1-k), // b\n            alpha\n        ];\n    };\n\n    var cmyk2rgb_1 = cmyk2rgb;\n\n    var unpack$3 = utils.unpack;\n    var type$2 = utils.type;\n\n\n\n    Color_1.prototype.cmyk = function() {\n        return rgb2cmyk_1(this._rgb);\n    };\n\n    chroma_1.cmyk = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['cmyk']) ));\n    };\n\n    input.format.cmyk = cmyk2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$3(args, 'cmyk');\n            if (type$2(args) === 'array' && args.length === 4) {\n                return 'cmyk';\n            }\n        }\n    });\n\n    var unpack$4 = utils.unpack;\n    var last$2 = utils.last;\n    var rnd = function (a) { return Math.round(a*100)/100; };\n\n    /*\n     * supported arguments:\n     * - hsl2css(h,s,l)\n     * - hsl2css(h,s,l,a)\n     * - hsl2css([h,s,l], mode)\n     * - hsl2css([h,s,l,a], mode)\n     * - hsl2css({h,s,l,a}, mode)\n     */\n    var hsl2css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var hsla = unpack$4(args, 'hsla');\n        var mode = last$2(args) || 'lsa';\n        hsla[0] = rnd(hsla[0] || 0);\n        hsla[1] = rnd(hsla[1]*100) + '%';\n        hsla[2] = rnd(hsla[2]*100) + '%';\n        if (mode === 'hsla' || (hsla.length > 3 && hsla[3]<1)) {\n            hsla[3] = hsla.length > 3 ? hsla[3] : 1;\n            mode = 'hsla';\n        } else {\n            hsla.length = 3;\n        }\n        return (mode + \"(\" + (hsla.join(',')) + \")\");\n    };\n\n    var hsl2css_1 = hsl2css;\n\n    var unpack$5 = utils.unpack;\n\n    /*\n     * supported arguments:\n     * - rgb2hsl(r,g,b)\n     * - rgb2hsl(r,g,b,a)\n     * - rgb2hsl([r,g,b])\n     * - rgb2hsl([r,g,b,a])\n     * - rgb2hsl({r,g,b,a})\n     */\n    var rgb2hsl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$5(args, 'rgba');\n        var r = args[0];\n        var g = args[1];\n        var b = args[2];\n\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n\n        var l = (max + min) / 2;\n        var s, h;\n\n        if (max === min){\n            s = 0;\n            h = Number.NaN;\n        } else {\n            s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n        }\n\n        if (r == max) { h = (g - b) / (max - min); }\n        else if (g == max) { h = 2 + (b - r) / (max - min); }\n        else if (b == max) { h = 4 + (r - g) / (max - min); }\n\n        h *= 60;\n        if (h < 0) { h += 360; }\n        if (args.length>3 && args[3]!==undefined) { return [h,s,l,args[3]]; }\n        return [h,s,l];\n    };\n\n    var rgb2hsl_1 = rgb2hsl;\n\n    var unpack$6 = utils.unpack;\n    var last$3 = utils.last;\n\n\n    var round = Math.round;\n\n    /*\n     * supported arguments:\n     * - rgb2css(r,g,b)\n     * - rgb2css(r,g,b,a)\n     * - rgb2css([r,g,b], mode)\n     * - rgb2css([r,g,b,a], mode)\n     * - rgb2css({r,g,b,a}, mode)\n     */\n    var rgb2css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgba = unpack$6(args, 'rgba');\n        var mode = last$3(args) || 'rgb';\n        if (mode.substr(0,3) == 'hsl') {\n            return hsl2css_1(rgb2hsl_1(rgba), mode);\n        }\n        rgba[0] = round(rgba[0]);\n        rgba[1] = round(rgba[1]);\n        rgba[2] = round(rgba[2]);\n        if (mode === 'rgba' || (rgba.length > 3 && rgba[3]<1)) {\n            rgba[3] = rgba.length > 3 ? rgba[3] : 1;\n            mode = 'rgba';\n        }\n        return (mode + \"(\" + (rgba.slice(0,mode==='rgb'?3:4).join(',')) + \")\");\n    };\n\n    var rgb2css_1 = rgb2css;\n\n    var unpack$7 = utils.unpack;\n    var round$1 = Math.round;\n\n    var hsl2rgb = function () {\n        var assign;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$7(args, 'hsl');\n        var h = args[0];\n        var s = args[1];\n        var l = args[2];\n        var r,g,b;\n        if (s === 0) {\n            r = g = b = l*255;\n        } else {\n            var t3 = [0,0,0];\n            var c = [0,0,0];\n            var t2 = l < 0.5 ? l * (1+s) : l+s-l*s;\n            var t1 = 2 * l - t2;\n            var h_ = h / 360;\n            t3[0] = h_ + 1/3;\n            t3[1] = h_;\n            t3[2] = h_ - 1/3;\n            for (var i=0; i<3; i++) {\n                if (t3[i] < 0) { t3[i] += 1; }\n                if (t3[i] > 1) { t3[i] -= 1; }\n                if (6 * t3[i] < 1)\n                    { c[i] = t1 + (t2 - t1) * 6 * t3[i]; }\n                else if (2 * t3[i] < 1)\n                    { c[i] = t2; }\n                else if (3 * t3[i] < 2)\n                    { c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6; }\n                else\n                    { c[i] = t1; }\n            }\n            (assign = [round$1(c[0]*255),round$1(c[1]*255),round$1(c[2]*255)], r = assign[0], g = assign[1], b = assign[2]);\n        }\n        if (args.length > 3) {\n            // keep alpha channel\n            return [r,g,b,args[3]];\n        }\n        return [r,g,b,1];\n    };\n\n    var hsl2rgb_1 = hsl2rgb;\n\n    var RE_RGB = /^rgb\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*\\)$/;\n    var RE_RGBA = /^rgba\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n    var RE_RGB_PCT = /^rgb\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n    var RE_RGBA_PCT = /^rgba\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n    var RE_HSL = /^hsl\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n    var RE_HSLA = /^hsla\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n\n    var round$2 = Math.round;\n\n    var css2rgb = function (css) {\n        css = css.toLowerCase().trim();\n        var m;\n\n        if (input.format.named) {\n            try {\n                return input.format.named(css);\n            } catch (e) {\n                // eslint-disable-next-line\n            }\n        }\n\n        // rgb(250,20,0)\n        if ((m = css.match(RE_RGB))) {\n            var rgb = m.slice(1,4);\n            for (var i=0; i<3; i++) {\n                rgb[i] = +rgb[i];\n            }\n            rgb[3] = 1;  // default alpha\n            return rgb;\n        }\n\n        // rgba(250,20,0,0.4)\n        if ((m = css.match(RE_RGBA))) {\n            var rgb$1 = m.slice(1,5);\n            for (var i$1=0; i$1<4; i$1++) {\n                rgb$1[i$1] = +rgb$1[i$1];\n            }\n            return rgb$1;\n        }\n\n        // rgb(100%,0%,0%)\n        if ((m = css.match(RE_RGB_PCT))) {\n            var rgb$2 = m.slice(1,4);\n            for (var i$2=0; i$2<3; i$2++) {\n                rgb$2[i$2] = round$2(rgb$2[i$2] * 2.55);\n            }\n            rgb$2[3] = 1;  // default alpha\n            return rgb$2;\n        }\n\n        // rgba(100%,0%,0%,0.4)\n        if ((m = css.match(RE_RGBA_PCT))) {\n            var rgb$3 = m.slice(1,5);\n            for (var i$3=0; i$3<3; i$3++) {\n                rgb$3[i$3] = round$2(rgb$3[i$3] * 2.55);\n            }\n            rgb$3[3] = +rgb$3[3];\n            return rgb$3;\n        }\n\n        // hsl(0,100%,50%)\n        if ((m = css.match(RE_HSL))) {\n            var hsl = m.slice(1,4);\n            hsl[1] *= 0.01;\n            hsl[2] *= 0.01;\n            var rgb$4 = hsl2rgb_1(hsl);\n            rgb$4[3] = 1;\n            return rgb$4;\n        }\n\n        // hsla(0,100%,50%,0.5)\n        if ((m = css.match(RE_HSLA))) {\n            var hsl$1 = m.slice(1,4);\n            hsl$1[1] *= 0.01;\n            hsl$1[2] *= 0.01;\n            var rgb$5 = hsl2rgb_1(hsl$1);\n            rgb$5[3] = +m[4];  // default alpha = 1\n            return rgb$5;\n        }\n    };\n\n    css2rgb.test = function (s) {\n        return RE_RGB.test(s) ||\n            RE_RGBA.test(s) ||\n            RE_RGB_PCT.test(s) ||\n            RE_RGBA_PCT.test(s) ||\n            RE_HSL.test(s) ||\n            RE_HSLA.test(s);\n    };\n\n    var css2rgb_1 = css2rgb;\n\n    var type$3 = utils.type;\n\n\n\n\n    Color_1.prototype.css = function(mode) {\n        return rgb2css_1(this._rgb, mode);\n    };\n\n    chroma_1.css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['css']) ));\n    };\n\n    input.format.css = css2rgb_1;\n\n    input.autodetect.push({\n        p: 5,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$3(h) === 'string' && css2rgb_1.test(h)) {\n                return 'css';\n            }\n        }\n    });\n\n    var unpack$8 = utils.unpack;\n\n    input.format.gl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgb = unpack$8(args, 'rgba');\n        rgb[0] *= 255;\n        rgb[1] *= 255;\n        rgb[2] *= 255;\n        return rgb;\n    };\n\n    chroma_1.gl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['gl']) ));\n    };\n\n    Color_1.prototype.gl = function() {\n        var rgb = this._rgb;\n        return [rgb[0]/255, rgb[1]/255, rgb[2]/255, rgb[3]];\n    };\n\n    var unpack$9 = utils.unpack;\n\n    var rgb2hcg = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$9(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var delta = max - min;\n        var c = delta * 100 / 255;\n        var _g = min / (255 - delta) * 100;\n        var h;\n        if (delta === 0) {\n            h = Number.NaN;\n        } else {\n            if (r === max) { h = (g - b) / delta; }\n            if (g === max) { h = 2+(b - r) / delta; }\n            if (b === max) { h = 4+(r - g) / delta; }\n            h *= 60;\n            if (h < 0) { h += 360; }\n        }\n        return [h, c, _g];\n    };\n\n    var rgb2hcg_1 = rgb2hcg;\n\n    var unpack$a = utils.unpack;\n    var floor = Math.floor;\n\n    /*\n     * this is basically just HSV with some minor tweaks\n     *\n     * hue.. [0..360]\n     * chroma .. [0..1]\n     * grayness .. [0..1]\n     */\n\n    var hcg2rgb = function () {\n        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$a(args, 'hcg');\n        var h = args[0];\n        var c = args[1];\n        var _g = args[2];\n        var r,g,b;\n        _g = _g * 255;\n        var _c = c * 255;\n        if (c === 0) {\n            r = g = b = _g;\n        } else {\n            if (h === 360) { h = 0; }\n            if (h > 360) { h -= 360; }\n            if (h < 0) { h += 360; }\n            h /= 60;\n            var i = floor(h);\n            var f = h - i;\n            var p = _g * (1 - c);\n            var q = p + _c * (1 - f);\n            var t = p + _c * f;\n            var v = p + _c;\n            switch (i) {\n                case 0: (assign = [v, t, p], r = assign[0], g = assign[1], b = assign[2]); break\n                case 1: (assign$1 = [q, v, p], r = assign$1[0], g = assign$1[1], b = assign$1[2]); break\n                case 2: (assign$2 = [p, v, t], r = assign$2[0], g = assign$2[1], b = assign$2[2]); break\n                case 3: (assign$3 = [p, q, v], r = assign$3[0], g = assign$3[1], b = assign$3[2]); break\n                case 4: (assign$4 = [t, p, v], r = assign$4[0], g = assign$4[1], b = assign$4[2]); break\n                case 5: (assign$5 = [v, p, q], r = assign$5[0], g = assign$5[1], b = assign$5[2]); break\n            }\n        }\n        return [r, g, b, args.length > 3 ? args[3] : 1];\n    };\n\n    var hcg2rgb_1 = hcg2rgb;\n\n    var unpack$b = utils.unpack;\n    var type$4 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hcg = function() {\n        return rgb2hcg_1(this._rgb);\n    };\n\n    chroma_1.hcg = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hcg']) ));\n    };\n\n    input.format.hcg = hcg2rgb_1;\n\n    input.autodetect.push({\n        p: 1,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$b(args, 'hcg');\n            if (type$4(args) === 'array' && args.length === 3) {\n                return 'hcg';\n            }\n        }\n    });\n\n    var unpack$c = utils.unpack;\n    var last$4 = utils.last;\n    var round$3 = Math.round;\n\n    var rgb2hex = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$c(args, 'rgba');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var a = ref[3];\n        var mode = last$4(args) || 'auto';\n        if (a === undefined) { a = 1; }\n        if (mode === 'auto') {\n            mode = a < 1 ? 'rgba' : 'rgb';\n        }\n        r = round$3(r);\n        g = round$3(g);\n        b = round$3(b);\n        var u = r << 16 | g << 8 | b;\n        var str = \"000000\" + u.toString(16); //#.toUpperCase();\n        str = str.substr(str.length - 6);\n        var hxa = '0' + round$3(a * 255).toString(16);\n        hxa = hxa.substr(hxa.length - 2);\n        switch (mode.toLowerCase()) {\n            case 'rgba': return (\"#\" + str + hxa);\n            case 'argb': return (\"#\" + hxa + str);\n            default: return (\"#\" + str);\n        }\n    };\n\n    var rgb2hex_1 = rgb2hex;\n\n    var RE_HEX = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n    var RE_HEXA = /^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;\n\n    var hex2rgb = function (hex) {\n        if (hex.match(RE_HEX)) {\n            // remove optional leading #\n            if (hex.length === 4 || hex.length === 7) {\n                hex = hex.substr(1);\n            }\n            // expand short-notation to full six-digit\n            if (hex.length === 3) {\n                hex = hex.split('');\n                hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];\n            }\n            var u = parseInt(hex, 16);\n            var r = u >> 16;\n            var g = u >> 8 & 0xFF;\n            var b = u & 0xFF;\n            return [r,g,b,1];\n        }\n\n        // match rgba hex format, eg #FF000077\n        if (hex.match(RE_HEXA)) {\n            if (hex.length === 5 || hex.length === 9) {\n                // remove optional leading #\n                hex = hex.substr(1);\n            }\n            // expand short-notation to full eight-digit\n            if (hex.length === 4) {\n                hex = hex.split('');\n                hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]+hex[3]+hex[3];\n            }\n            var u$1 = parseInt(hex, 16);\n            var r$1 = u$1 >> 24 & 0xFF;\n            var g$1 = u$1 >> 16 & 0xFF;\n            var b$1 = u$1 >> 8 & 0xFF;\n            var a = Math.round((u$1 & 0xFF) / 0xFF * 100) / 100;\n            return [r$1,g$1,b$1,a];\n        }\n\n        // we used to check for css colors here\n        // if _input.css? and rgb = _input.css hex\n        //     return rgb\n\n        throw new Error((\"unknown hex color: \" + hex));\n    };\n\n    var hex2rgb_1 = hex2rgb;\n\n    var type$5 = utils.type;\n\n\n\n\n    Color_1.prototype.hex = function(mode) {\n        return rgb2hex_1(this._rgb, mode);\n    };\n\n    chroma_1.hex = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hex']) ));\n    };\n\n    input.format.hex = hex2rgb_1;\n    input.autodetect.push({\n        p: 4,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$5(h) === 'string' && [3,4,5,6,7,8,9].indexOf(h.length) >= 0) {\n                return 'hex';\n            }\n        }\n    });\n\n    var unpack$d = utils.unpack;\n    var TWOPI = utils.TWOPI;\n    var min = Math.min;\n    var sqrt = Math.sqrt;\n    var acos = Math.acos;\n\n    var rgb2hsi = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        borrowed from here:\n        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n        */\n        var ref = unpack$d(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var h;\n        var min_ = min(r,g,b);\n        var i = (r+g+b) / 3;\n        var s = i > 0 ? 1 - min_/i : 0;\n        if (s === 0) {\n            h = NaN;\n        } else {\n            h = ((r-g)+(r-b)) / 2;\n            h /= sqrt((r-g)*(r-g) + (r-b)*(g-b));\n            h = acos(h);\n            if (b > g) {\n                h = TWOPI - h;\n            }\n            h /= TWOPI;\n        }\n        return [h*360,s,i];\n    };\n\n    var rgb2hsi_1 = rgb2hsi;\n\n    var unpack$e = utils.unpack;\n    var limit$1 = utils.limit;\n    var TWOPI$1 = utils.TWOPI;\n    var PITHIRD = utils.PITHIRD;\n    var cos = Math.cos;\n\n    /*\n     * hue [0..360]\n     * saturation [0..1]\n     * intensity [0..1]\n     */\n    var hsi2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        borrowed from here:\n        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n        */\n        args = unpack$e(args, 'hsi');\n        var h = args[0];\n        var s = args[1];\n        var i = args[2];\n        var r,g,b;\n\n        if (isNaN(h)) { h = 0; }\n        if (isNaN(s)) { s = 0; }\n        // normalize hue\n        if (h > 360) { h -= 360; }\n        if (h < 0) { h += 360; }\n        h /= 360;\n        if (h < 1/3) {\n            b = (1-s)/3;\n            r = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            g = 1 - (b+r);\n        } else if (h < 2/3) {\n            h -= 1/3;\n            r = (1-s)/3;\n            g = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            b = 1 - (r+g);\n        } else {\n            h -= 2/3;\n            g = (1-s)/3;\n            b = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            r = 1 - (g+b);\n        }\n        r = limit$1(i*r*3);\n        g = limit$1(i*g*3);\n        b = limit$1(i*b*3);\n        return [r*255, g*255, b*255, args.length > 3 ? args[3] : 1];\n    };\n\n    var hsi2rgb_1 = hsi2rgb;\n\n    var unpack$f = utils.unpack;\n    var type$6 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsi = function() {\n        return rgb2hsi_1(this._rgb);\n    };\n\n    chroma_1.hsi = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsi']) ));\n    };\n\n    input.format.hsi = hsi2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$f(args, 'hsi');\n            if (type$6(args) === 'array' && args.length === 3) {\n                return 'hsi';\n            }\n        }\n    });\n\n    var unpack$g = utils.unpack;\n    var type$7 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsl = function() {\n        return rgb2hsl_1(this._rgb);\n    };\n\n    chroma_1.hsl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsl']) ));\n    };\n\n    input.format.hsl = hsl2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$g(args, 'hsl');\n            if (type$7(args) === 'array' && args.length === 3) {\n                return 'hsl';\n            }\n        }\n    });\n\n    var unpack$h = utils.unpack;\n    var min$1 = Math.min;\n    var max$1 = Math.max;\n\n    /*\n     * supported arguments:\n     * - rgb2hsv(r,g,b)\n     * - rgb2hsv([r,g,b])\n     * - rgb2hsv({r,g,b})\n     */\n    var rgb2hsl$1 = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$h(args, 'rgb');\n        var r = args[0];\n        var g = args[1];\n        var b = args[2];\n        var min_ = min$1(r, g, b);\n        var max_ = max$1(r, g, b);\n        var delta = max_ - min_;\n        var h,s,v;\n        v = max_ / 255.0;\n        if (max_ === 0) {\n            h = Number.NaN;\n            s = 0;\n        } else {\n            s = delta / max_;\n            if (r === max_) { h = (g - b) / delta; }\n            if (g === max_) { h = 2+(b - r) / delta; }\n            if (b === max_) { h = 4+(r - g) / delta; }\n            h *= 60;\n            if (h < 0) { h += 360; }\n        }\n        return [h, s, v]\n    };\n\n    var rgb2hsv = rgb2hsl$1;\n\n    var unpack$i = utils.unpack;\n    var floor$1 = Math.floor;\n\n    var hsv2rgb = function () {\n        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$i(args, 'hsv');\n        var h = args[0];\n        var s = args[1];\n        var v = args[2];\n        var r,g,b;\n        v *= 255;\n        if (s === 0) {\n            r = g = b = v;\n        } else {\n            if (h === 360) { h = 0; }\n            if (h > 360) { h -= 360; }\n            if (h < 0) { h += 360; }\n            h /= 60;\n\n            var i = floor$1(h);\n            var f = h - i;\n            var p = v * (1 - s);\n            var q = v * (1 - s * f);\n            var t = v * (1 - s * (1 - f));\n\n            switch (i) {\n                case 0: (assign = [v, t, p], r = assign[0], g = assign[1], b = assign[2]); break\n                case 1: (assign$1 = [q, v, p], r = assign$1[0], g = assign$1[1], b = assign$1[2]); break\n                case 2: (assign$2 = [p, v, t], r = assign$2[0], g = assign$2[1], b = assign$2[2]); break\n                case 3: (assign$3 = [p, q, v], r = assign$3[0], g = assign$3[1], b = assign$3[2]); break\n                case 4: (assign$4 = [t, p, v], r = assign$4[0], g = assign$4[1], b = assign$4[2]); break\n                case 5: (assign$5 = [v, p, q], r = assign$5[0], g = assign$5[1], b = assign$5[2]); break\n            }\n        }\n        return [r,g,b,args.length > 3?args[3]:1];\n    };\n\n    var hsv2rgb_1 = hsv2rgb;\n\n    var unpack$j = utils.unpack;\n    var type$8 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsv = function() {\n        return rgb2hsv(this._rgb);\n    };\n\n    chroma_1.hsv = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsv']) ));\n    };\n\n    input.format.hsv = hsv2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$j(args, 'hsv');\n            if (type$8(args) === 'array' && args.length === 3) {\n                return 'hsv';\n            }\n        }\n    });\n\n    var labConstants = {\n        // Corresponds roughly to RGB brighter/darker\n        Kn: 18,\n\n        // D65 standard referent\n        Xn: 0.950470,\n        Yn: 1,\n        Zn: 1.088830,\n\n        t0: 0.137931034,  // 4 / 29\n        t1: 0.206896552,  // 6 / 29\n        t2: 0.12841855,   // 3 * t1 * t1\n        t3: 0.008856452,  // t1 * t1 * t1\n    };\n\n    var unpack$k = utils.unpack;\n    var pow = Math.pow;\n\n    var rgb2lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$k(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var ref$1 = rgb2xyz(r,g,b);\n        var x = ref$1[0];\n        var y = ref$1[1];\n        var z = ref$1[2];\n        var l = 116 * y - 16;\n        return [l < 0 ? 0 : l, 500 * (x - y), 200 * (y - z)];\n    };\n\n    var rgb_xyz = function (r) {\n        if ((r /= 255) <= 0.04045) { return r / 12.92; }\n        return pow((r + 0.055) / 1.055, 2.4);\n    };\n\n    var xyz_lab = function (t) {\n        if (t > labConstants.t3) { return pow(t, 1 / 3); }\n        return t / labConstants.t2 + labConstants.t0;\n    };\n\n    var rgb2xyz = function (r,g,b) {\n        r = rgb_xyz(r);\n        g = rgb_xyz(g);\n        b = rgb_xyz(b);\n        var x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / labConstants.Xn);\n        var y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / labConstants.Yn);\n        var z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / labConstants.Zn);\n        return [x,y,z];\n    };\n\n    var rgb2lab_1 = rgb2lab;\n\n    var unpack$l = utils.unpack;\n    var pow$1 = Math.pow;\n\n    /*\n     * L* [0..100]\n     * a [-100..100]\n     * b [-100..100]\n     */\n    var lab2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$l(args, 'lab');\n        var l = args[0];\n        var a = args[1];\n        var b = args[2];\n        var x,y,z, r,g,b_;\n\n        y = (l + 16) / 116;\n        x = isNaN(a) ? y : y + a / 500;\n        z = isNaN(b) ? y : y - b / 200;\n\n        y = labConstants.Yn * lab_xyz(y);\n        x = labConstants.Xn * lab_xyz(x);\n        z = labConstants.Zn * lab_xyz(z);\n\n        r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);  // D65 -> sRGB\n        g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n        b_ = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n\n        return [r,g,b_,args.length > 3 ? args[3] : 1];\n    };\n\n    var xyz_rgb = function (r) {\n        return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow$1(r, 1 / 2.4) - 0.055)\n    };\n\n    var lab_xyz = function (t) {\n        return t > labConstants.t1 ? t * t * t : labConstants.t2 * (t - labConstants.t0)\n    };\n\n    var lab2rgb_1 = lab2rgb;\n\n    var unpack$m = utils.unpack;\n    var type$9 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.lab = function() {\n        return rgb2lab_1(this._rgb);\n    };\n\n    chroma_1.lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['lab']) ));\n    };\n\n    input.format.lab = lab2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$m(args, 'lab');\n            if (type$9(args) === 'array' && args.length === 3) {\n                return 'lab';\n            }\n        }\n    });\n\n    var unpack$n = utils.unpack;\n    var RAD2DEG = utils.RAD2DEG;\n    var sqrt$1 = Math.sqrt;\n    var atan2 = Math.atan2;\n    var round$4 = Math.round;\n\n    var lab2lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$n(args, 'lab');\n        var l = ref[0];\n        var a = ref[1];\n        var b = ref[2];\n        var c = sqrt$1(a * a + b * b);\n        var h = (atan2(b, a) * RAD2DEG + 360) % 360;\n        if (round$4(c*10000) === 0) { h = Number.NaN; }\n        return [l, c, h];\n    };\n\n    var lab2lch_1 = lab2lch;\n\n    var unpack$o = utils.unpack;\n\n\n\n    var rgb2lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$o(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var ref$1 = rgb2lab_1(r,g,b);\n        var l = ref$1[0];\n        var a = ref$1[1];\n        var b_ = ref$1[2];\n        return lab2lch_1(l,a,b_);\n    };\n\n    var rgb2lch_1 = rgb2lch;\n\n    var unpack$p = utils.unpack;\n    var DEG2RAD = utils.DEG2RAD;\n    var sin = Math.sin;\n    var cos$1 = Math.cos;\n\n    var lch2lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n        These formulas were invented by David Dalrymple to obtain maximum contrast without going\n        out of gamut if the parameters are in the range 0-1.\n\n        A saturation multiplier was added by Gregor Aisch\n        */\n        var ref = unpack$p(args, 'lch');\n        var l = ref[0];\n        var c = ref[1];\n        var h = ref[2];\n        if (isNaN(h)) { h = 0; }\n        h = h * DEG2RAD;\n        return [l, cos$1(h) * c, sin(h) * c]\n    };\n\n    var lch2lab_1 = lch2lab;\n\n    var unpack$q = utils.unpack;\n\n\n\n    var lch2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$q(args, 'lch');\n        var l = args[0];\n        var c = args[1];\n        var h = args[2];\n        var ref = lch2lab_1 (l,c,h);\n        var L = ref[0];\n        var a = ref[1];\n        var b_ = ref[2];\n        var ref$1 = lab2rgb_1 (L,a,b_);\n        var r = ref$1[0];\n        var g = ref$1[1];\n        var b = ref$1[2];\n        return [r, g, b, args.length > 3 ? args[3] : 1];\n    };\n\n    var lch2rgb_1 = lch2rgb;\n\n    var unpack$r = utils.unpack;\n\n\n    var hcl2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var hcl = unpack$r(args, 'hcl').reverse();\n        return lch2rgb_1.apply(void 0, hcl);\n    };\n\n    var hcl2rgb_1 = hcl2rgb;\n\n    var unpack$s = utils.unpack;\n    var type$a = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.lch = function() { return rgb2lch_1(this._rgb); };\n    Color_1.prototype.hcl = function() { return rgb2lch_1(this._rgb).reverse(); };\n\n    chroma_1.lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['lch']) ));\n    };\n    chroma_1.hcl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hcl']) ));\n    };\n\n    input.format.lch = lch2rgb_1;\n    input.format.hcl = hcl2rgb_1;\n\n    ['lch','hcl'].forEach(function (m) { return input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$s(args, m);\n            if (type$a(args) === 'array' && args.length === 3) {\n                return m;\n            }\n        }\n    }); });\n\n    /**\n    \tX11 color names\n\n    \thttp://www.w3.org/TR/css3-color/#svg-color\n    */\n\n    var w3cx11 = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflower: '#6495ed',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        laserlemon: '#ffff54',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrod: '#fafad2',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        maroon2: '#7f0000',\n        maroon3: '#b03060',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        purple2: '#7f007f',\n        purple3: '#a020f0',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32'\n    };\n\n    var w3cx11_1 = w3cx11;\n\n    var type$b = utils.type;\n\n\n\n\n\n    Color_1.prototype.name = function() {\n        var hex = rgb2hex_1(this._rgb, 'rgb');\n        for (var i = 0, list = Object.keys(w3cx11_1); i < list.length; i += 1) {\n            var n = list[i];\n\n            if (w3cx11_1[n] === hex) { return n.toLowerCase(); }\n        }\n        return hex;\n    };\n\n    input.format.named = function (name) {\n        name = name.toLowerCase();\n        if (w3cx11_1[name]) { return hex2rgb_1(w3cx11_1[name]); }\n        throw new Error('unknown color name: '+name);\n    };\n\n    input.autodetect.push({\n        p: 5,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$b(h) === 'string' && w3cx11_1[h.toLowerCase()]) {\n                return 'named';\n            }\n        }\n    });\n\n    var unpack$t = utils.unpack;\n\n    var rgb2num = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$t(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        return (r << 16) + (g << 8) + b;\n    };\n\n    var rgb2num_1 = rgb2num;\n\n    var type$c = utils.type;\n\n    var num2rgb = function (num) {\n        if (type$c(num) == \"number\" && num >= 0 && num <= 0xFFFFFF) {\n            var r = num >> 16;\n            var g = (num >> 8) & 0xFF;\n            var b = num & 0xFF;\n            return [r,g,b,1];\n        }\n        throw new Error(\"unknown num color: \"+num);\n    };\n\n    var num2rgb_1 = num2rgb;\n\n    var type$d = utils.type;\n\n\n\n    Color_1.prototype.num = function() {\n        return rgb2num_1(this._rgb);\n    };\n\n    chroma_1.num = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['num']) ));\n    };\n\n    input.format.num = num2rgb_1;\n\n    input.autodetect.push({\n        p: 5,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            if (args.length === 1 && type$d(args[0]) === 'number' && args[0] >= 0 && args[0] <= 0xFFFFFF) {\n                return 'num';\n            }\n        }\n    });\n\n    var unpack$u = utils.unpack;\n    var type$e = utils.type;\n    var round$5 = Math.round;\n\n    Color_1.prototype.rgb = function(rnd) {\n        if ( rnd === void 0 ) rnd=true;\n\n        if (rnd === false) { return this._rgb.slice(0,3); }\n        return this._rgb.slice(0,3).map(round$5);\n    };\n\n    Color_1.prototype.rgba = function(rnd) {\n        if ( rnd === void 0 ) rnd=true;\n\n        return this._rgb.slice(0,4).map(function (v,i) {\n            return i<3 ? (rnd === false ? v : round$5(v)) : v;\n        });\n    };\n\n    chroma_1.rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['rgb']) ));\n    };\n\n    input.format.rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgba = unpack$u(args, 'rgba');\n        if (rgba[3] === undefined) { rgba[3] = 1; }\n        return rgba;\n    };\n\n    input.autodetect.push({\n        p: 3,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$u(args, 'rgba');\n            if (type$e(args) === 'array' && (args.length === 3 ||\n                args.length === 4 && type$e(args[3]) == 'number' && args[3] >= 0 && args[3] <= 1)) {\n                return 'rgb';\n            }\n        }\n    });\n\n    /*\n     * Based on implementation by Neil Bartlett\n     * https://github.com/neilbartlett/color-temperature\n     */\n\n    var log = Math.log;\n\n    var temperature2rgb = function (kelvin) {\n        var temp = kelvin / 100;\n        var r,g,b;\n        if (temp < 66) {\n            r = 255;\n            g = -155.25485562709179 - 0.44596950469579133 * (g = temp-2) + 104.49216199393888 * log(g);\n            b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp-10) + 115.67994401066147 * log(b);\n        } else {\n            r = 351.97690566805693 + 0.114206453784165 * (r = temp-55) - 40.25366309332127 * log(r);\n            g = 325.4494125711974 + 0.07943456536662342 * (g = temp-50) - 28.0852963507957 * log(g);\n            b = 255;\n        }\n        return [r,g,b,1];\n    };\n\n    var temperature2rgb_1 = temperature2rgb;\n\n    /*\n     * Based on implementation by Neil Bartlett\n     * https://github.com/neilbartlett/color-temperature\n     **/\n\n\n    var unpack$v = utils.unpack;\n    var round$6 = Math.round;\n\n    var rgb2temperature = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgb = unpack$v(args, 'rgb');\n        var r = rgb[0], b = rgb[2];\n        var minTemp = 1000;\n        var maxTemp = 40000;\n        var eps = 0.4;\n        var temp;\n        while (maxTemp - minTemp > eps) {\n            temp = (maxTemp + minTemp) * 0.5;\n            var rgb$1 = temperature2rgb_1(temp);\n            if ((rgb$1[2] / rgb$1[0]) >= (b / r)) {\n                maxTemp = temp;\n            } else {\n                minTemp = temp;\n            }\n        }\n        return round$6(temp);\n    };\n\n    var rgb2temperature_1 = rgb2temperature;\n\n    Color_1.prototype.temp =\n    Color_1.prototype.kelvin =\n    Color_1.prototype.temperature = function() {\n        return rgb2temperature_1(this._rgb);\n    };\n\n    chroma_1.temp =\n    chroma_1.kelvin =\n    chroma_1.temperature = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['temp']) ));\n    };\n\n    input.format.temp =\n    input.format.kelvin =\n    input.format.temperature = temperature2rgb_1;\n\n    var type$f = utils.type;\n\n    Color_1.prototype.alpha = function(a, mutate) {\n        if ( mutate === void 0 ) mutate=false;\n\n        if (a !== undefined && type$f(a) === 'number') {\n            if (mutate) {\n                this._rgb[3] = a;\n                return this;\n            }\n            return new Color_1([this._rgb[0], this._rgb[1], this._rgb[2], a], 'rgb');\n        }\n        return this._rgb[3];\n    };\n\n    Color_1.prototype.clipped = function() {\n        return this._rgb._clipped || false;\n    };\n\n    Color_1.prototype.darken = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \tvar me = this;\n    \tvar lab = me.lab();\n    \tlab[0] -= labConstants.Kn * amount;\n    \treturn new Color_1(lab, 'lab').alpha(me.alpha(), true);\n    };\n\n    Color_1.prototype.brighten = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \treturn this.darken(-amount);\n    };\n\n    Color_1.prototype.darker = Color_1.prototype.darken;\n    Color_1.prototype.brighter = Color_1.prototype.brighten;\n\n    Color_1.prototype.get = function(mc) {\n        var ref = mc.split('.');\n        var mode = ref[0];\n        var channel = ref[1];\n        var src = this[mode]();\n        if (channel) {\n            var i = mode.indexOf(channel);\n            if (i > -1) { return src[i]; }\n            throw new Error((\"unknown channel \" + channel + \" in mode \" + mode));\n        } else {\n            return src;\n        }\n    };\n\n    var type$g = utils.type;\n    var pow$2 = Math.pow;\n\n    var EPS = 1e-7;\n    var MAX_ITER = 20;\n\n    Color_1.prototype.luminance = function(lum) {\n        if (lum !== undefined && type$g(lum) === 'number') {\n            if (lum === 0) {\n                // return pure black\n                return new Color_1([0,0,0,this._rgb[3]], 'rgb');\n            }\n            if (lum === 1) {\n                // return pure white\n                return new Color_1([255,255,255,this._rgb[3]], 'rgb');\n            }\n            // compute new color using...\n            var cur_lum = this.luminance();\n            var mode = 'rgb';\n            var max_iter = MAX_ITER;\n\n            var test = function (low, high) {\n                var mid = low.interpolate(high, 0.5, mode);\n                var lm = mid.luminance();\n                if (Math.abs(lum - lm) < EPS || !max_iter--) {\n                    // close enough\n                    return mid;\n                }\n                return lm > lum ? test(low, mid) : test(mid, high);\n            };\n\n            var rgb = (cur_lum > lum ? test(new Color_1([0,0,0]), this) : test(this, new Color_1([255,255,255]))).rgb();\n            return new Color_1(rgb.concat( [this._rgb[3]]));\n        }\n        return rgb2luminance.apply(void 0, (this._rgb).slice(0,3));\n    };\n\n\n    var rgb2luminance = function (r,g,b) {\n        // relative luminance\n        // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        r = luminance_x(r);\n        g = luminance_x(g);\n        b = luminance_x(b);\n        return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n    };\n\n    var luminance_x = function (x) {\n        x /= 255;\n        return x <= 0.03928 ? x/12.92 : pow$2((x+0.055)/1.055, 2.4);\n    };\n\n    var interpolator = {};\n\n    var type$h = utils.type;\n\n\n    var mix = function (col1, col2, f) {\n        if ( f === void 0 ) f=0.5;\n        var rest = [], len = arguments.length - 3;\n        while ( len-- > 0 ) rest[ len ] = arguments[ len + 3 ];\n\n        var mode = rest[0] || 'lrgb';\n        if (!interpolator[mode] && !rest.length) {\n            // fall back to the first supported mode\n            mode = Object.keys(interpolator)[0];\n        }\n        if (!interpolator[mode]) {\n            throw new Error((\"interpolation mode \" + mode + \" is not defined\"));\n        }\n        if (type$h(col1) !== 'object') { col1 = new Color_1(col1); }\n        if (type$h(col2) !== 'object') { col2 = new Color_1(col2); }\n        return interpolator[mode](col1, col2, f)\n            .alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n    };\n\n    Color_1.prototype.mix =\n    Color_1.prototype.interpolate = function(col2, f) {\n    \tif ( f === void 0 ) f=0.5;\n    \tvar rest = [], len = arguments.length - 2;\n    \twhile ( len-- > 0 ) rest[ len ] = arguments[ len + 2 ];\n\n    \treturn mix.apply(void 0, [ this, col2, f ].concat( rest ));\n    };\n\n    Color_1.prototype.premultiply = function(mutate) {\n    \tif ( mutate === void 0 ) mutate=false;\n\n    \tvar rgb = this._rgb;\n    \tvar a = rgb[3];\n    \tif (mutate) {\n    \t\tthis._rgb = [rgb[0]*a, rgb[1]*a, rgb[2]*a, a];\n    \t\treturn this;\n    \t} else {\n    \t\treturn new Color_1([rgb[0]*a, rgb[1]*a, rgb[2]*a, a], 'rgb');\n    \t}\n    };\n\n    Color_1.prototype.saturate = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \tvar me = this;\n    \tvar lch = me.lch();\n    \tlch[1] += labConstants.Kn * amount;\n    \tif (lch[1] < 0) { lch[1] = 0; }\n    \treturn new Color_1(lch, 'lch').alpha(me.alpha(), true);\n    };\n\n    Color_1.prototype.desaturate = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \treturn this.saturate(-amount);\n    };\n\n    var type$i = utils.type;\n\n    Color_1.prototype.set = function(mc, value, mutate) {\n        if ( mutate === void 0 ) mutate=false;\n\n        var ref = mc.split('.');\n        var mode = ref[0];\n        var channel = ref[1];\n        var src = this[mode]();\n        if (channel) {\n            var i = mode.indexOf(channel);\n            if (i > -1) {\n                if (type$i(value) == 'string') {\n                    switch(value.charAt(0)) {\n                        case '+': src[i] += +value; break;\n                        case '-': src[i] += +value; break;\n                        case '*': src[i] *= +(value.substr(1)); break;\n                        case '/': src[i] /= +(value.substr(1)); break;\n                        default: src[i] = +value;\n                    }\n                } else if (type$i(value) === 'number') {\n                    src[i] = value;\n                } else {\n                    throw new Error(\"unsupported value for Color.set\");\n                }\n                var out = new Color_1(src, mode);\n                if (mutate) {\n                    this._rgb = out._rgb;\n                    return this;\n                }\n                return out;\n            }\n            throw new Error((\"unknown channel \" + channel + \" in mode \" + mode));\n        } else {\n            return src;\n        }\n    };\n\n    var rgb$1 = function (col1, col2, f) {\n        var xyz0 = col1._rgb;\n        var xyz1 = col2._rgb;\n        return new Color_1(\n            xyz0[0] + f * (xyz1[0]-xyz0[0]),\n            xyz0[1] + f * (xyz1[1]-xyz0[1]),\n            xyz0[2] + f * (xyz1[2]-xyz0[2]),\n            'rgb'\n        )\n    };\n\n    // register interpolator\n    interpolator.rgb = rgb$1;\n\n    var sqrt$2 = Math.sqrt;\n    var pow$3 = Math.pow;\n\n    var lrgb = function (col1, col2, f) {\n        var ref = col1._rgb;\n        var x1 = ref[0];\n        var y1 = ref[1];\n        var z1 = ref[2];\n        var ref$1 = col2._rgb;\n        var x2 = ref$1[0];\n        var y2 = ref$1[1];\n        var z2 = ref$1[2];\n        return new Color_1(\n            sqrt$2(pow$3(x1,2) * (1-f) + pow$3(x2,2) * f),\n            sqrt$2(pow$3(y1,2) * (1-f) + pow$3(y2,2) * f),\n            sqrt$2(pow$3(z1,2) * (1-f) + pow$3(z2,2) * f),\n            'rgb'\n        )\n    };\n\n    // register interpolator\n    interpolator.lrgb = lrgb;\n\n    var lab$1 = function (col1, col2, f) {\n        var xyz0 = col1.lab();\n        var xyz1 = col2.lab();\n        return new Color_1(\n            xyz0[0] + f * (xyz1[0]-xyz0[0]),\n            xyz0[1] + f * (xyz1[1]-xyz0[1]),\n            xyz0[2] + f * (xyz1[2]-xyz0[2]),\n            'lab'\n        )\n    };\n\n    // register interpolator\n    interpolator.lab = lab$1;\n\n    var _hsx = function (col1, col2, f, m) {\n        var assign, assign$1;\n\n        var xyz0, xyz1;\n        if (m === 'hsl') {\n            xyz0 = col1.hsl();\n            xyz1 = col2.hsl();\n        } else if (m === 'hsv') {\n            xyz0 = col1.hsv();\n            xyz1 = col2.hsv();\n        } else if (m === 'hcg') {\n            xyz0 = col1.hcg();\n            xyz1 = col2.hcg();\n        } else if (m === 'hsi') {\n            xyz0 = col1.hsi();\n            xyz1 = col2.hsi();\n        } else if (m === 'lch' || m === 'hcl') {\n            m = 'hcl';\n            xyz0 = col1.hcl();\n            xyz1 = col2.hcl();\n        }\n\n        var hue0, hue1, sat0, sat1, lbv0, lbv1;\n        if (m.substr(0, 1) === 'h') {\n            (assign = xyz0, hue0 = assign[0], sat0 = assign[1], lbv0 = assign[2]);\n            (assign$1 = xyz1, hue1 = assign$1[0], sat1 = assign$1[1], lbv1 = assign$1[2]);\n        }\n\n        var sat, hue, lbv, dh;\n\n        if (!isNaN(hue0) && !isNaN(hue1)) {\n            // both colors have hue\n            if (hue1 > hue0 && hue1 - hue0 > 180) {\n                dh = hue1-(hue0+360);\n            } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n                dh = hue1+360-hue0;\n            } else{\n                dh = hue1 - hue0;\n            }\n            hue = hue0 + f * dh;\n        } else if (!isNaN(hue0)) {\n            hue = hue0;\n            if ((lbv1 == 1 || lbv1 == 0) && m != 'hsv') { sat = sat0; }\n        } else if (!isNaN(hue1)) {\n            hue = hue1;\n            if ((lbv0 == 1 || lbv0 == 0) && m != 'hsv') { sat = sat1; }\n        } else {\n            hue = Number.NaN;\n        }\n\n        if (sat === undefined) { sat = sat0 + f * (sat1 - sat0); }\n        lbv = lbv0 + f * (lbv1-lbv0);\n        return new Color_1([hue, sat, lbv], m);\n    };\n\n    var lch$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'lch');\n    };\n\n    // register interpolator\n    interpolator.lch = lch$1;\n    interpolator.hcl = lch$1;\n\n    var num$1 = function (col1, col2, f) {\n        var c1 = col1.num();\n        var c2 = col2.num();\n        return new Color_1(c1 + f * (c2-c1), 'num')\n    };\n\n    // register interpolator\n    interpolator.num = num$1;\n\n    var hcg$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hcg');\n    };\n\n    // register interpolator\n    interpolator.hcg = hcg$1;\n\n    var hsi$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsi');\n    };\n\n    // register interpolator\n    interpolator.hsi = hsi$1;\n\n    var hsl$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsl');\n    };\n\n    // register interpolator\n    interpolator.hsl = hsl$1;\n\n    var hsv$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsv');\n    };\n\n    // register interpolator\n    interpolator.hsv = hsv$1;\n\n    var clip_rgb$2 = utils.clip_rgb;\n    var pow$4 = Math.pow;\n    var sqrt$3 = Math.sqrt;\n    var PI$1 = Math.PI;\n    var cos$2 = Math.cos;\n    var sin$1 = Math.sin;\n    var atan2$1 = Math.atan2;\n\n    var average = function (colors, mode, weights) {\n        if ( mode === void 0 ) mode='lrgb';\n        if ( weights === void 0 ) weights=null;\n\n        var l = colors.length;\n        if (!weights) { weights = Array.from(new Array(l)).map(function () { return 1; }); }\n        // normalize weights\n        var k = l / weights.reduce(function(a, b) { return a + b; });\n        weights.forEach(function (w,i) { weights[i] *= k; });\n        // convert colors to Color objects\n        colors = colors.map(function (c) { return new Color_1(c); });\n        if (mode === 'lrgb') {\n            return _average_lrgb(colors, weights)\n        }\n        var first = colors.shift();\n        var xyz = first.get(mode);\n        var cnt = [];\n        var dx = 0;\n        var dy = 0;\n        // initial color\n        for (var i=0; i<xyz.length; i++) {\n            xyz[i] = (xyz[i] || 0) * weights[0];\n            cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n            if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n                var A = xyz[i] / 180 * PI$1;\n                dx += cos$2(A) * weights[0];\n                dy += sin$1(A) * weights[0];\n            }\n        }\n\n        var alpha = first.alpha() * weights[0];\n        colors.forEach(function (c,ci) {\n            var xyz2 = c.get(mode);\n            alpha += c.alpha() * weights[ci+1];\n            for (var i=0; i<xyz.length; i++) {\n                if (!isNaN(xyz2[i])) {\n                    cnt[i] += weights[ci+1];\n                    if (mode.charAt(i) === 'h') {\n                        var A = xyz2[i] / 180 * PI$1;\n                        dx += cos$2(A) * weights[ci+1];\n                        dy += sin$1(A) * weights[ci+1];\n                    } else {\n                        xyz[i] += xyz2[i] * weights[ci+1];\n                    }\n                }\n            }\n        });\n\n        for (var i$1=0; i$1<xyz.length; i$1++) {\n            if (mode.charAt(i$1) === 'h') {\n                var A$1 = atan2$1(dy / cnt[i$1], dx / cnt[i$1]) / PI$1 * 180;\n                while (A$1 < 0) { A$1 += 360; }\n                while (A$1 >= 360) { A$1 -= 360; }\n                xyz[i$1] = A$1;\n            } else {\n                xyz[i$1] = xyz[i$1]/cnt[i$1];\n            }\n        }\n        alpha /= l;\n        return (new Color_1(xyz, mode)).alpha(alpha > 0.99999 ? 1 : alpha, true);\n    };\n\n\n    var _average_lrgb = function (colors, weights) {\n        var l = colors.length;\n        var xyz = [0,0,0,0];\n        for (var i=0; i < colors.length; i++) {\n            var col = colors[i];\n            var f = weights[i] / l;\n            var rgb = col._rgb;\n            xyz[0] += pow$4(rgb[0],2) * f;\n            xyz[1] += pow$4(rgb[1],2) * f;\n            xyz[2] += pow$4(rgb[2],2) * f;\n            xyz[3] += rgb[3] * f;\n        }\n        xyz[0] = sqrt$3(xyz[0]);\n        xyz[1] = sqrt$3(xyz[1]);\n        xyz[2] = sqrt$3(xyz[2]);\n        if (xyz[3] > 0.9999999) { xyz[3] = 1; }\n        return new Color_1(clip_rgb$2(xyz));\n    };\n\n    // minimal multi-purpose interface\n\n    // @requires utils color analyze\n\n\n    var type$j = utils.type;\n\n    var pow$5 = Math.pow;\n\n    var scale = function(colors) {\n\n        // constructor\n        var _mode = 'rgb';\n        var _nacol = chroma_1('#ccc');\n        var _spread = 0;\n        // const _fixed = false;\n        var _domain = [0, 1];\n        var _pos = [];\n        var _padding = [0,0];\n        var _classes = false;\n        var _colors = [];\n        var _out = false;\n        var _min = 0;\n        var _max = 1;\n        var _correctLightness = false;\n        var _colorCache = {};\n        var _useCache = true;\n        var _gamma = 1;\n\n        // private methods\n\n        var setColors = function(colors) {\n            colors = colors || ['#fff', '#000'];\n            if (colors && type$j(colors) === 'string' && chroma_1.brewer &&\n                chroma_1.brewer[colors.toLowerCase()]) {\n                colors = chroma_1.brewer[colors.toLowerCase()];\n            }\n            if (type$j(colors) === 'array') {\n                // handle single color\n                if (colors.length === 1) {\n                    colors = [colors[0], colors[0]];\n                }\n                // make a copy of the colors\n                colors = colors.slice(0);\n                // convert to chroma classes\n                for (var c=0; c<colors.length; c++) {\n                    colors[c] = chroma_1(colors[c]);\n                }\n                // auto-fill color position\n                _pos.length = 0;\n                for (var c$1=0; c$1<colors.length; c$1++) {\n                    _pos.push(c$1/(colors.length-1));\n                }\n            }\n            resetCache();\n            return _colors = colors;\n        };\n\n        var getClass = function(value) {\n            if (_classes != null) {\n                var n = _classes.length-1;\n                var i = 0;\n                while (i < n && value >= _classes[i]) {\n                    i++;\n                }\n                return i-1;\n            }\n            return 0;\n        };\n\n        var tMapLightness = function (t) { return t; };\n        var tMapDomain = function (t) { return t; };\n\n        // const classifyValue = function(value) {\n        //     let val = value;\n        //     if (_classes.length > 2) {\n        //         const n = _classes.length-1;\n        //         const i = getClass(value);\n        //         const minc = _classes[0] + ((_classes[1]-_classes[0]) * (0 + (_spread * 0.5)));  // center of 1st class\n        //         const maxc = _classes[n-1] + ((_classes[n]-_classes[n-1]) * (1 - (_spread * 0.5)));  // center of last class\n        //         val = _min + ((((_classes[i] + ((_classes[i+1] - _classes[i]) * 0.5)) - minc) / (maxc-minc)) * (_max - _min));\n        //     }\n        //     return val;\n        // };\n\n        var getColor = function(val, bypassMap) {\n            var col, t;\n            if (bypassMap == null) { bypassMap = false; }\n            if (isNaN(val) || (val === null)) { return _nacol; }\n            if (!bypassMap) {\n                if (_classes && (_classes.length > 2)) {\n                    // find the class\n                    var c = getClass(val);\n                    t = c / (_classes.length-2);\n                } else if (_max !== _min) {\n                    // just interpolate between min/max\n                    t = (val - _min) / (_max - _min);\n                } else {\n                    t = 1;\n                }\n            } else {\n                t = val;\n            }\n\n            // domain map\n            t = tMapDomain(t);\n\n            if (!bypassMap) {\n                t = tMapLightness(t);  // lightness correction\n            }\n\n            if (_gamma !== 1) { t = pow$5(t, _gamma); }\n\n            t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n\n            t = Math.min(1, Math.max(0, t));\n\n            var k = Math.floor(t * 10000);\n\n            if (_useCache && _colorCache[k]) {\n                col = _colorCache[k];\n            } else {\n                if (type$j(_colors) === 'array') {\n                    //for i in [0.._pos.length-1]\n                    for (var i=0; i<_pos.length; i++) {\n                        var p = _pos[i];\n                        if (t <= p) {\n                            col = _colors[i];\n                            break;\n                        }\n                        if ((t >= p) && (i === (_pos.length-1))) {\n                            col = _colors[i];\n                            break;\n                        }\n                        if (t > p && t < _pos[i+1]) {\n                            t = (t-p)/(_pos[i+1]-p);\n                            col = chroma_1.interpolate(_colors[i], _colors[i+1], t, _mode);\n                            break;\n                        }\n                    }\n                } else if (type$j(_colors) === 'function') {\n                    col = _colors(t);\n                }\n                if (_useCache) { _colorCache[k] = col; }\n            }\n            return col;\n        };\n\n        var resetCache = function () { return _colorCache = {}; };\n\n        setColors(colors);\n\n        // public interface\n\n        var f = function(v) {\n            var c = chroma_1(getColor(v));\n            if (_out && c[_out]) { return c[_out](); } else { return c; }\n        };\n\n        f.classes = function(classes) {\n            if (classes != null) {\n                if (type$j(classes) === 'array') {\n                    _classes = classes;\n                    _domain = [classes[0], classes[classes.length-1]];\n                } else {\n                    var d = chroma_1.analyze(_domain);\n                    if (classes === 0) {\n                        _classes = [d.min, d.max];\n                    } else {\n                        _classes = chroma_1.limits(d, 'e', classes);\n                    }\n                }\n                return f;\n            }\n            return _classes;\n        };\n\n\n        f.domain = function(domain) {\n            if (!arguments.length) {\n                return _domain;\n            }\n            _min = domain[0];\n            _max = domain[domain.length-1];\n            _pos = [];\n            var k = _colors.length;\n            if ((domain.length === k) && (_min !== _max)) {\n                // update positions\n                for (var i = 0, list = Array.from(domain); i < list.length; i += 1) {\n                    var d = list[i];\n\n                  _pos.push((d-_min) / (_max-_min));\n                }\n            } else {\n                for (var c=0; c<k; c++) {\n                    _pos.push(c/(k-1));\n                }\n                if (domain.length > 2) {\n                    // set domain map\n                    var tOut = domain.map(function (d,i) { return i/(domain.length-1); });\n                    var tBreaks = domain.map(function (d) { return (d - _min) / (_max - _min); });\n                    if (!tBreaks.every(function (val, i) { return tOut[i] === val; })) {\n                        tMapDomain = function (t) {\n                            if (t <= 0 || t >= 1) { return t; }\n                            var i = 0;\n                            while (t >= tBreaks[i+1]) { i++; }\n                            var f = (t - tBreaks[i]) / (tBreaks[i+1] - tBreaks[i]);\n                            var out = tOut[i] + f * (tOut[i+1] - tOut[i]);\n                            return out;\n                        };\n                    }\n\n                }\n            }\n            _domain = [_min, _max];\n            return f;\n        };\n\n        f.mode = function(_m) {\n            if (!arguments.length) {\n                return _mode;\n            }\n            _mode = _m;\n            resetCache();\n            return f;\n        };\n\n        f.range = function(colors, _pos) {\n            setColors(colors, _pos);\n            return f;\n        };\n\n        f.out = function(_o) {\n            _out = _o;\n            return f;\n        };\n\n        f.spread = function(val) {\n            if (!arguments.length) {\n                return _spread;\n            }\n            _spread = val;\n            return f;\n        };\n\n        f.correctLightness = function(v) {\n            if (v == null) { v = true; }\n            _correctLightness = v;\n            resetCache();\n            if (_correctLightness) {\n                tMapLightness = function(t) {\n                    var L0 = getColor(0, true).lab()[0];\n                    var L1 = getColor(1, true).lab()[0];\n                    var pol = L0 > L1;\n                    var L_actual = getColor(t, true).lab()[0];\n                    var L_ideal = L0 + ((L1 - L0) * t);\n                    var L_diff = L_actual - L_ideal;\n                    var t0 = 0;\n                    var t1 = 1;\n                    var max_iter = 20;\n                    while ((Math.abs(L_diff) > 1e-2) && (max_iter-- > 0)) {\n                        (function() {\n                            if (pol) { L_diff *= -1; }\n                            if (L_diff < 0) {\n                                t0 = t;\n                                t += (t1 - t) * 0.5;\n                            } else {\n                                t1 = t;\n                                t += (t0 - t) * 0.5;\n                            }\n                            L_actual = getColor(t, true).lab()[0];\n                            return L_diff = L_actual - L_ideal;\n                        })();\n                    }\n                    return t;\n                };\n            } else {\n                tMapLightness = function (t) { return t; };\n            }\n            return f;\n        };\n\n        f.padding = function(p) {\n            if (p != null) {\n                if (type$j(p) === 'number') {\n                    p = [p,p];\n                }\n                _padding = p;\n                return f;\n            } else {\n                return _padding;\n            }\n        };\n\n        f.colors = function(numColors, out) {\n            // If no arguments are given, return the original colors that were provided\n            if (arguments.length < 2) { out = 'hex'; }\n            var result = [];\n\n            if (arguments.length === 0) {\n                result = _colors.slice(0);\n\n            } else if (numColors === 1) {\n                result = [f(0.5)];\n\n            } else if (numColors > 1) {\n                var dm = _domain[0];\n                var dd = _domain[1] - dm;\n                result = __range__(0, numColors, false).map(function (i) { return f( dm + ((i/(numColors-1)) * dd) ); });\n\n            } else { // returns all colors based on the defined classes\n                colors = [];\n                var samples = [];\n                if (_classes && (_classes.length > 2)) {\n                    for (var i = 1, end = _classes.length, asc = 1 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                        samples.push((_classes[i-1]+_classes[i])*0.5);\n                    }\n                } else {\n                    samples = _domain;\n                }\n                result = samples.map(function (v) { return f(v); });\n            }\n\n            if (chroma_1[out]) {\n                result = result.map(function (c) { return c[out](); });\n            }\n            return result;\n        };\n\n        f.cache = function(c) {\n            if (c != null) {\n                _useCache = c;\n                return f;\n            } else {\n                return _useCache;\n            }\n        };\n\n        f.gamma = function(g) {\n            if (g != null) {\n                _gamma = g;\n                return f;\n            } else {\n                return _gamma;\n            }\n        };\n\n        f.nodata = function(d) {\n            if (d != null) {\n                _nacol = chroma_1(d);\n                return f;\n            } else {\n                return _nacol;\n            }\n        };\n\n        return f;\n    };\n\n    function __range__(left, right, inclusive) {\n      var range = [];\n      var ascending = left < right;\n      var end = !inclusive ? right : ascending ? right + 1 : right - 1;\n      for (var i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n        range.push(i);\n      }\n      return range;\n    }\n\n    //\n    // interpolates between a set of colors uzing a bezier spline\n    //\n\n    // @requires utils lab\n\n\n\n\n    var bezier = function(colors) {\n        var assign, assign$1, assign$2;\n\n        var I, lab0, lab1, lab2;\n        colors = colors.map(function (c) { return new Color_1(c); });\n        if (colors.length === 2) {\n            // linear interpolation\n            (assign = colors.map(function (c) { return c.lab(); }), lab0 = assign[0], lab1 = assign[1]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return lab0[i] + (t * (lab1[i] - lab0[i])); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 3) {\n            // quadratic bezier interpolation\n            (assign$1 = colors.map(function (c) { return c.lab(); }), lab0 = assign$1[0], lab1 = assign$1[1], lab2 = assign$1[2]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return ((1-t)*(1-t) * lab0[i]) + (2 * (1-t) * t * lab1[i]) + (t * t * lab2[i]); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 4) {\n            // cubic bezier interpolation\n            var lab3;\n            (assign$2 = colors.map(function (c) { return c.lab(); }), lab0 = assign$2[0], lab1 = assign$2[1], lab2 = assign$2[2], lab3 = assign$2[3]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return ((1-t)*(1-t)*(1-t) * lab0[i]) + (3 * (1-t) * (1-t) * t * lab1[i]) + (3 * (1-t) * t * t * lab2[i]) + (t*t*t * lab3[i]); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 5) {\n            var I0 = bezier(colors.slice(0, 3));\n            var I1 = bezier(colors.slice(2, 5));\n            I = function(t) {\n                if (t < 0.5) {\n                    return I0(t*2);\n                } else {\n                    return I1((t-0.5)*2);\n                }\n            };\n        }\n        return I;\n    };\n\n    var bezier_1 = function (colors) {\n        var f = bezier(colors);\n        f.scale = function () { return scale(f); };\n        return f;\n    };\n\n    /*\n     * interpolates between a set of colors uzing a bezier spline\n     * blend mode formulas taken from http://www.venture-ware.com/kevin/coding/lets-learn-math-photoshop-blend-modes/\n     */\n\n\n\n\n    var blend = function (bottom, top, mode) {\n        if (!blend[mode]) {\n            throw new Error('unknown blend mode ' + mode);\n        }\n        return blend[mode](bottom, top);\n    };\n\n    var blend_f = function (f) { return function (bottom,top) {\n            var c0 = chroma_1(top).rgb();\n            var c1 = chroma_1(bottom).rgb();\n            return chroma_1.rgb(f(c0, c1));\n        }; };\n\n    var each = function (f) { return function (c0, c1) {\n            var out = [];\n            out[0] = f(c0[0], c1[0]);\n            out[1] = f(c0[1], c1[1]);\n            out[2] = f(c0[2], c1[2]);\n            return out;\n        }; };\n\n    var normal = function (a) { return a; };\n    var multiply = function (a,b) { return a * b / 255; };\n    var darken$1 = function (a,b) { return a > b ? b : a; };\n    var lighten = function (a,b) { return a > b ? a : b; };\n    var screen = function (a,b) { return 255 * (1 - (1-a/255) * (1-b/255)); };\n    var overlay = function (a,b) { return b < 128 ? 2 * a * b / 255 : 255 * (1 - 2 * (1 - a / 255 ) * ( 1 - b / 255 )); };\n    var burn = function (a,b) { return 255 * (1 - (1 - b / 255) / (a/255)); };\n    var dodge = function (a,b) {\n        if (a === 255) { return 255; }\n        a = 255 * (b / 255) / (1 - a / 255);\n        return a > 255 ? 255 : a\n    };\n\n    // # add = (a,b) ->\n    // #     if (a + b > 255) then 255 else a + b\n\n    blend.normal = blend_f(each(normal));\n    blend.multiply = blend_f(each(multiply));\n    blend.screen = blend_f(each(screen));\n    blend.overlay = blend_f(each(overlay));\n    blend.darken = blend_f(each(darken$1));\n    blend.lighten = blend_f(each(lighten));\n    blend.dodge = blend_f(each(dodge));\n    blend.burn = blend_f(each(burn));\n    // blend.add = blend_f(each(add));\n\n    var blend_1 = blend;\n\n    // cubehelix interpolation\n    // based on D.A. Green \"A colour scheme for the display of astronomical intensity images\"\n    // http://astron-soc.in/bulletin/11June/289392011.pdf\n\n    var type$k = utils.type;\n    var clip_rgb$3 = utils.clip_rgb;\n    var TWOPI$2 = utils.TWOPI;\n    var pow$6 = Math.pow;\n    var sin$2 = Math.sin;\n    var cos$3 = Math.cos;\n\n\n    var cubehelix = function(start, rotations, hue, gamma, lightness) {\n        if ( start === void 0 ) start=300;\n        if ( rotations === void 0 ) rotations=-1.5;\n        if ( hue === void 0 ) hue=1;\n        if ( gamma === void 0 ) gamma=1;\n        if ( lightness === void 0 ) lightness=[0,1];\n\n        var dh = 0, dl;\n        if (type$k(lightness) === 'array') {\n            dl = lightness[1] - lightness[0];\n        } else {\n            dl = 0;\n            lightness = [lightness, lightness];\n        }\n\n        var f = function(fract) {\n            var a = TWOPI$2 * (((start+120)/360) + (rotations * fract));\n            var l = pow$6(lightness[0] + (dl * fract), gamma);\n            var h = dh !== 0 ? hue[0] + (fract * dh) : hue;\n            var amp = (h * l * (1-l)) / 2;\n            var cos_a = cos$3(a);\n            var sin_a = sin$2(a);\n            var r = l + (amp * ((-0.14861 * cos_a) + (1.78277* sin_a)));\n            var g = l + (amp * ((-0.29227 * cos_a) - (0.90649* sin_a)));\n            var b = l + (amp * (+1.97294 * cos_a));\n            return chroma_1(clip_rgb$3([r*255,g*255,b*255,1]));\n        };\n\n        f.start = function(s) {\n            if ((s == null)) { return start; }\n            start = s;\n            return f;\n        };\n\n        f.rotations = function(r) {\n            if ((r == null)) { return rotations; }\n            rotations = r;\n            return f;\n        };\n\n        f.gamma = function(g) {\n            if ((g == null)) { return gamma; }\n            gamma = g;\n            return f;\n        };\n\n        f.hue = function(h) {\n            if ((h == null)) { return hue; }\n            hue = h;\n            if (type$k(hue) === 'array') {\n                dh = hue[1] - hue[0];\n                if (dh === 0) { hue = hue[1]; }\n            } else {\n                dh = 0;\n            }\n            return f;\n        };\n\n        f.lightness = function(h) {\n            if ((h == null)) { return lightness; }\n            if (type$k(h) === 'array') {\n                lightness = h;\n                dl = h[1] - h[0];\n            } else {\n                lightness = [h,h];\n                dl = 0;\n            }\n            return f;\n        };\n\n        f.scale = function () { return chroma_1.scale(f); };\n\n        f.hue(hue);\n\n        return f;\n    };\n\n    var digits = '0123456789abcdef';\n\n    var floor$2 = Math.floor;\n    var random = Math.random;\n\n    var random_1 = function () {\n        var code = '#';\n        for (var i=0; i<6; i++) {\n            code += digits.charAt(floor$2(random() * 16));\n        }\n        return new Color_1(code, 'hex');\n    };\n\n    var log$1 = Math.log;\n    var pow$7 = Math.pow;\n    var floor$3 = Math.floor;\n    var abs = Math.abs;\n\n\n    var analyze = function (data, key) {\n        if ( key === void 0 ) key=null;\n\n        var r = {\n            min: Number.MAX_VALUE,\n            max: Number.MAX_VALUE*-1,\n            sum: 0,\n            values: [],\n            count: 0\n        };\n        if (type(data) === 'object') {\n            data = Object.values(data);\n        }\n        data.forEach(function (val) {\n            if (key && type(val) === 'object') { val = val[key]; }\n            if (val !== undefined && val !== null && !isNaN(val)) {\n                r.values.push(val);\n                r.sum += val;\n                if (val < r.min) { r.min = val; }\n                if (val > r.max) { r.max = val; }\n                r.count += 1;\n            }\n        });\n\n        r.domain = [r.min, r.max];\n\n        r.limits = function (mode, num) { return limits(r, mode, num); };\n\n        return r;\n    };\n\n\n    var limits = function (data, mode, num) {\n        if ( mode === void 0 ) mode='equal';\n        if ( num === void 0 ) num=7;\n\n        if (type(data) == 'array') {\n            data = analyze(data);\n        }\n        var min = data.min;\n        var max = data.max;\n        var values = data.values.sort(function (a,b) { return a-b; });\n\n        if (num === 1) { return [min,max]; }\n\n        var limits = [];\n\n        if (mode.substr(0,1) === 'c') { // continuous\n            limits.push(min);\n            limits.push(max);\n        }\n\n        if (mode.substr(0,1) === 'e') { // equal interval\n            limits.push(min);\n            for (var i=1; i<num; i++) {\n                limits.push(min+((i/num)*(max-min)));\n            }\n            limits.push(max);\n        }\n\n        else if (mode.substr(0,1) === 'l') { // log scale\n            if (min <= 0) {\n                throw new Error('Logarithmic scales are only possible for values > 0');\n            }\n            var min_log = Math.LOG10E * log$1(min);\n            var max_log = Math.LOG10E * log$1(max);\n            limits.push(min);\n            for (var i$1=1; i$1<num; i$1++) {\n                limits.push(pow$7(10, min_log + ((i$1/num) * (max_log - min_log))));\n            }\n            limits.push(max);\n        }\n\n        else if (mode.substr(0,1) === 'q') { // quantile scale\n            limits.push(min);\n            for (var i$2=1; i$2<num; i$2++) {\n                var p = ((values.length-1) * i$2)/num;\n                var pb = floor$3(p);\n                if (pb === p) {\n                    limits.push(values[pb]);\n                } else { // p > pb\n                    var pr = p - pb;\n                    limits.push((values[pb]*(1-pr)) + (values[pb+1]*pr));\n                }\n            }\n            limits.push(max);\n\n        }\n\n        else if (mode.substr(0,1) === 'k') { // k-means clustering\n            /*\n            implementation based on\n            http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n            simplified for 1-d input values\n            */\n            var cluster;\n            var n = values.length;\n            var assignments = new Array(n);\n            var clusterSizes = new Array(num);\n            var repeat = true;\n            var nb_iters = 0;\n            var centroids = null;\n\n            // get seed values\n            centroids = [];\n            centroids.push(min);\n            for (var i$3=1; i$3<num; i$3++) {\n                centroids.push(min + ((i$3/num) * (max-min)));\n            }\n            centroids.push(max);\n\n            while (repeat) {\n                // assignment step\n                for (var j=0; j<num; j++) {\n                    clusterSizes[j] = 0;\n                }\n                for (var i$4=0; i$4<n; i$4++) {\n                    var value = values[i$4];\n                    var mindist = Number.MAX_VALUE;\n                    var best = (void 0);\n                    for (var j$1=0; j$1<num; j$1++) {\n                        var dist = abs(centroids[j$1]-value);\n                        if (dist < mindist) {\n                            mindist = dist;\n                            best = j$1;\n                        }\n                        clusterSizes[best]++;\n                        assignments[i$4] = best;\n                    }\n                }\n\n                // update centroids step\n                var newCentroids = new Array(num);\n                for (var j$2=0; j$2<num; j$2++) {\n                    newCentroids[j$2] = null;\n                }\n                for (var i$5=0; i$5<n; i$5++) {\n                    cluster = assignments[i$5];\n                    if (newCentroids[cluster] === null) {\n                        newCentroids[cluster] = values[i$5];\n                    } else {\n                        newCentroids[cluster] += values[i$5];\n                    }\n                }\n                for (var j$3=0; j$3<num; j$3++) {\n                    newCentroids[j$3] *= 1/clusterSizes[j$3];\n                }\n\n                // check convergence\n                repeat = false;\n                for (var j$4=0; j$4<num; j$4++) {\n                    if (newCentroids[j$4] !== centroids[j$4]) {\n                        repeat = true;\n                        break;\n                    }\n                }\n\n                centroids = newCentroids;\n                nb_iters++;\n\n                if (nb_iters > 200) {\n                    repeat = false;\n                }\n            }\n\n            // finished k-means clustering\n            // the next part is borrowed from gabrielflor.it\n            var kClusters = {};\n            for (var j$5=0; j$5<num; j$5++) {\n                kClusters[j$5] = [];\n            }\n            for (var i$6=0; i$6<n; i$6++) {\n                cluster = assignments[i$6];\n                kClusters[cluster].push(values[i$6]);\n            }\n            var tmpKMeansBreaks = [];\n            for (var j$6=0; j$6<num; j$6++) {\n                tmpKMeansBreaks.push(kClusters[j$6][0]);\n                tmpKMeansBreaks.push(kClusters[j$6][kClusters[j$6].length-1]);\n            }\n            tmpKMeansBreaks = tmpKMeansBreaks.sort(function (a,b){ return a-b; });\n            limits.push(tmpKMeansBreaks[0]);\n            for (var i$7=1; i$7 < tmpKMeansBreaks.length; i$7+= 2) {\n                var v = tmpKMeansBreaks[i$7];\n                if (!isNaN(v) && (limits.indexOf(v) === -1)) {\n                    limits.push(v);\n                }\n            }\n        }\n        return limits;\n    };\n\n    var analyze_1 = {analyze: analyze, limits: limits};\n\n    var contrast = function (a, b) {\n        // WCAG contrast ratio\n        // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var l1 = a.luminance();\n        var l2 = b.luminance();\n        return l1 > l2 ? (l1 + 0.05) / (l2 + 0.05) : (l2 + 0.05) / (l1 + 0.05);\n    };\n\n    var sqrt$4 = Math.sqrt;\n    var atan2$2 = Math.atan2;\n    var abs$1 = Math.abs;\n    var cos$4 = Math.cos;\n    var PI$2 = Math.PI;\n\n    var deltaE = function(a, b, L, C) {\n        if ( L === void 0 ) L=1;\n        if ( C === void 0 ) C=1;\n\n        // Delta E (CMC)\n        // see http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CMC.html\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var ref = Array.from(a.lab());\n        var L1 = ref[0];\n        var a1 = ref[1];\n        var b1 = ref[2];\n        var ref$1 = Array.from(b.lab());\n        var L2 = ref$1[0];\n        var a2 = ref$1[1];\n        var b2 = ref$1[2];\n        var c1 = sqrt$4((a1 * a1) + (b1 * b1));\n        var c2 = sqrt$4((a2 * a2) + (b2 * b2));\n        var sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + (0.01765 * L1));\n        var sc = ((0.0638 * c1) / (1.0 + (0.0131 * c1))) + 0.638;\n        var h1 = c1 < 0.000001 ? 0.0 : (atan2$2(b1, a1) * 180.0) / PI$2;\n        while (h1 < 0) { h1 += 360; }\n        while (h1 >= 360) { h1 -= 360; }\n        var t = (h1 >= 164.0) && (h1 <= 345.0) ? (0.56 + abs$1(0.2 * cos$4((PI$2 * (h1 + 168.0)) / 180.0))) : (0.36 + abs$1(0.4 * cos$4((PI$2 * (h1 + 35.0)) / 180.0)));\n        var c4 = c1 * c1 * c1 * c1;\n        var f = sqrt$4(c4 / (c4 + 1900.0));\n        var sh = sc * (((f * t) + 1.0) - f);\n        var delL = L1 - L2;\n        var delC = c1 - c2;\n        var delA = a1 - a2;\n        var delB = b1 - b2;\n        var dH2 = ((delA * delA) + (delB * delB)) - (delC * delC);\n        var v1 = delL / (L * sl);\n        var v2 = delC / (C * sc);\n        var v3 = sh;\n        return sqrt$4((v1 * v1) + (v2 * v2) + (dH2 / (v3 * v3)));\n    };\n\n    // simple Euclidean distance\n    var distance = function(a, b, mode) {\n        if ( mode === void 0 ) mode='lab';\n\n        // Delta E (CIE 1976)\n        // see http://www.brucelindbloom.com/index.html?Equations.html\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var l1 = a.get(mode);\n        var l2 = b.get(mode);\n        var sum_sq = 0;\n        for (var i in l1) {\n            var d = (l1[i] || 0) - (l2[i] || 0);\n            sum_sq += d*d;\n        }\n        return Math.sqrt(sum_sq);\n    };\n\n    var valid = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        try {\n            new (Function.prototype.bind.apply( Color_1, [ null ].concat( args) ));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    };\n\n    // some pre-defined color scales:\n\n\n\n\n    var scales = {\n    \tcool: function cool() { return scale([chroma_1.hsl(180,1,.9), chroma_1.hsl(250,.7,.4)]) },\n    \thot: function hot() { return scale(['#000','#f00','#ff0','#fff'], [0,.25,.75,1]).mode('rgb') }\n    };\n\n    /**\n        ColorBrewer colors for chroma.js\n\n        Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The\n        Pennsylvania State University.\n\n        Licensed under the Apache License, Version 2.0 (the \"License\");\n        you may not use this file except in compliance with the License.\n        You may obtain a copy of the License at\n        http://www.apache.org/licenses/LICENSE-2.0\n\n        Unless required by applicable law or agreed to in writing, software distributed\n        under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n        CONDITIONS OF ANY KIND, either express or implied. See the License for the\n        specific language governing permissions and limitations under the License.\n    */\n\n    var colorbrewer = {\n        // sequential\n        OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n        PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n        BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n        Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n        BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n        YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n        YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n        Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n        RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n        Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n        YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n        Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n        GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n        Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n        YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n        PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n        Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n        PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n        Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n\n        // diverging\n\n        Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n        RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n        RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n        PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n        PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n        RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n        BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n        RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n        PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n\n        // qualitative\n\n        Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n        Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n        Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n        Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n        Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n        Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n        Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n        Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2'],\n    };\n\n    // add lowercase aliases for case-insensitive matches\n    for (var i$1 = 0, list$1 = Object.keys(colorbrewer); i$1 < list$1.length; i$1 += 1) {\n        var key = list$1[i$1];\n\n        colorbrewer[key.toLowerCase()] = colorbrewer[key];\n    }\n\n    var colorbrewer_1 = colorbrewer;\n\n    // feel free to comment out anything to rollup\n    // a smaller chroma.js built\n\n    // io --> convert colors\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    // operators --> modify existing Colors\n\n\n\n\n\n\n\n\n\n\n    // interpolators\n\n\n\n\n\n\n\n\n\n\n    // generators -- > create new colors\n    chroma_1.average = average;\n    chroma_1.bezier = bezier_1;\n    chroma_1.blend = blend_1;\n    chroma_1.cubehelix = cubehelix;\n    chroma_1.mix = chroma_1.interpolate = mix;\n    chroma_1.random = random_1;\n    chroma_1.scale = scale;\n\n    // other utility methods\n    chroma_1.analyze = analyze_1.analyze;\n    chroma_1.contrast = contrast;\n    chroma_1.deltaE = deltaE;\n    chroma_1.distance = distance;\n    chroma_1.limits = analyze_1.limits;\n    chroma_1.valid = valid;\n\n    // scale\n    chroma_1.scales = scales;\n\n    // colors\n    chroma_1.colors = w3cx11_1;\n    chroma_1.brewer = colorbrewer_1;\n\n    var chroma_js = chroma_1;\n\n    return chroma_js;\n\n})));\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.desktop = global.desktop || {}, global.desktop.browser = factory()));\n}(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics$1 = function(d, b) {\r\n        extendStatics$1 = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics$1(d, b);\r\n    };\r\n\r\n    function __extends$1(d, b) {\r\n        extendStatics$1(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign$1 = function() {\r\n        __assign$1 = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign$1.apply(this, arguments);\r\n    };\r\n\r\n    function __awaiter$1(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator$1(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    }\n\n    var MetricTypes = {\r\n        STRING: 1,\r\n        NUMBER: 2,\r\n        TIMESTAMP: 3,\r\n        OBJECT: 4\r\n    };\n\n    function getMetricTypeByValue(metric) {\r\n        if (metric.type === MetricTypes.TIMESTAMP) {\r\n            return \"timestamp\";\r\n        }\r\n        else if (metric.type === MetricTypes.NUMBER) {\r\n            return \"number\";\r\n        }\r\n        else if (metric.type === MetricTypes.STRING) {\r\n            return \"string\";\r\n        }\r\n        else if (metric.type === MetricTypes.OBJECT) {\r\n            return \"object\";\r\n        }\r\n        return \"unknown\";\r\n    }\r\n    function getTypeByValue(value) {\r\n        if (value.constructor === Date) {\r\n            return \"timestamp\";\r\n        }\r\n        else if (typeof value === \"number\") {\r\n            return \"number\";\r\n        }\r\n        else if (typeof value === \"string\") {\r\n            return \"string\";\r\n        }\r\n        else if (typeof value === \"object\") {\r\n            return \"object\";\r\n        }\r\n        else {\r\n            return \"string\";\r\n        }\r\n    }\r\n    function serializeMetric(metric) {\r\n        var serializedMetrics = {};\r\n        var type = getMetricTypeByValue(metric);\r\n        if (type === \"object\") {\r\n            var values = Object.keys(metric.value).reduce(function (memo, key) {\r\n                var innerType = getTypeByValue(metric.value[key]);\r\n                if (innerType === \"object\") {\r\n                    var composite = defineNestedComposite(metric.value[key]);\r\n                    memo[key] = {\r\n                        type: \"object\",\r\n                        description: \"\",\r\n                        context: {},\r\n                        composite: composite,\r\n                    };\r\n                }\r\n                else {\r\n                    memo[key] = {\r\n                        type: innerType,\r\n                        description: \"\",\r\n                        context: {},\r\n                    };\r\n                }\r\n                return memo;\r\n            }, {});\r\n            serializedMetrics.composite = values;\r\n        }\r\n        serializedMetrics.name = normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name);\r\n        serializedMetrics.type = type;\r\n        serializedMetrics.description = metric.description;\r\n        serializedMetrics.context = {};\r\n        return serializedMetrics;\r\n    }\r\n    function defineNestedComposite(values) {\r\n        return Object.keys(values).reduce(function (memo, key) {\r\n            var type = getTypeByValue(values[key]);\r\n            if (type === \"object\") {\r\n                memo[key] = {\r\n                    type: \"object\",\r\n                    description: \"\",\r\n                    context: {},\r\n                    composite: defineNestedComposite(values[key]),\r\n                };\r\n            }\r\n            else {\r\n                memo[key] = {\r\n                    type: type,\r\n                    description: \"\",\r\n                    context: {},\r\n                };\r\n            }\r\n            return memo;\r\n        }, {});\r\n    }\r\n    function normalizeMetricName(name) {\r\n        if (typeof name !== \"undefined\" && name.length > 0 && name[0] !== \"/\") {\r\n            return \"/\" + name;\r\n        }\r\n        else {\r\n            return name;\r\n        }\r\n    }\r\n    function getMetricValueByType(metric) {\r\n        var type = getMetricTypeByValue(metric);\r\n        if (type === \"timestamp\") {\r\n            return Date.now();\r\n        }\r\n        else {\r\n            return publishNestedComposite(metric.value);\r\n        }\r\n    }\r\n    function publishNestedComposite(values) {\r\n        if (typeof values !== \"object\") {\r\n            return values;\r\n        }\r\n        return Object.keys(values).reduce(function (memo, key) {\r\n            var value = values[key];\r\n            if (typeof value === \"object\" && value.constructor !== Date) {\r\n                memo[key] = publishNestedComposite(value);\r\n            }\r\n            else if (value.constructor === Date) {\r\n                memo[key] = new Date(value).getTime();\r\n            }\r\n            else if (value.constructor === Boolean) {\r\n                memo[key] = value.toString();\r\n            }\r\n            else {\r\n                memo[key] = value;\r\n            }\r\n            return memo;\r\n        }, {});\r\n    }\r\n    function flatten(arr) {\r\n        return arr.reduce(function (flat, toFlatten) {\r\n            return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\r\n        }, []);\r\n    }\r\n    function getHighestState(arr) {\r\n        return arr.sort(function (a, b) {\r\n            if (!a.state) {\r\n                return 1;\r\n            }\r\n            if (!b.state) {\r\n                return -1;\r\n            }\r\n            return b.state - a.state;\r\n        })[0];\r\n    }\r\n    function aggregateDescription(arr) {\r\n        var msg = \"\";\r\n        arr.forEach(function (m, idx, a) {\r\n            var path = m.path.join(\".\");\r\n            if (idx === a.length - 1) {\r\n                msg += path + \".\" + m.name + \": \" + m.description;\r\n            }\r\n            else {\r\n                msg += path + \".\" + m.name + \": \" + m.description + \",\";\r\n            }\r\n        });\r\n        if (msg.length > 100) {\r\n            return msg.slice(0, 100) + \"...\";\r\n        }\r\n        else {\r\n            return msg;\r\n        }\r\n    }\r\n    function composeMsgForRootStateMetric(system) {\r\n        var aggregatedState = system.root.getAggregateState();\r\n        var merged = flatten(aggregatedState);\r\n        var highestState = getHighestState(merged);\r\n        var aggregateDesc = aggregateDescription(merged);\r\n        return {\r\n            description: aggregateDesc,\r\n            value: highestState.state,\r\n        };\r\n    }\n\n    function gw3 (connection, config) {\r\n        var _this = this;\r\n        if (!connection || typeof connection !== \"object\") {\r\n            throw new Error(\"Connection is required parameter\");\r\n        }\r\n        var joinPromise;\r\n        var session;\r\n        var init = function (repo) {\r\n            var resolveReadyPromise;\r\n            joinPromise = new Promise(function (resolve) {\r\n                resolveReadyPromise = resolve;\r\n            });\r\n            session = connection.domain(\"metrics\");\r\n            session.onJoined(function (reconnect) {\r\n                if (!reconnect && resolveReadyPromise) {\r\n                    resolveReadyPromise();\r\n                    resolveReadyPromise = undefined;\r\n                }\r\n                var rootStateMetric = {\r\n                    name: \"/State\",\r\n                    type: \"object\",\r\n                    composite: {\r\n                        Description: {\r\n                            type: \"string\",\r\n                            description: \"\",\r\n                        },\r\n                        Value: {\r\n                            type: \"number\",\r\n                            description: \"\",\r\n                        },\r\n                    },\r\n                    description: \"System state\",\r\n                    context: {},\r\n                };\r\n                var defineRootMetricsMsg = {\r\n                    type: \"define\",\r\n                    metrics: [rootStateMetric],\r\n                };\r\n                session.send(defineRootMetricsMsg);\r\n                if (reconnect) {\r\n                    replayRepo(repo);\r\n                }\r\n            });\r\n            session.join({\r\n                system: config.system,\r\n                service: config.service,\r\n                instance: config.instance\r\n            });\r\n        };\r\n        var replayRepo = function (repo) {\r\n            replaySystem(repo.root);\r\n        };\r\n        var replaySystem = function (system) {\r\n            createSystem(system);\r\n            system.metrics.forEach(function (m) {\r\n                createMetric(m);\r\n            });\r\n            system.subSystems.forEach(function (ss) {\r\n                replaySystem(ss);\r\n            });\r\n        };\r\n        var createSystem = function (system) { return __awaiter$1(_this, void 0, void 0, function () {\r\n            var metric, createMetricsMsg;\r\n            return __generator$1(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (system.parent === undefined) {\r\n                            return [2];\r\n                        }\r\n                        return [4, joinPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        metric = {\r\n                            name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                            type: \"object\",\r\n                            composite: {\r\n                                Description: {\r\n                                    type: \"string\",\r\n                                    description: \"\",\r\n                                },\r\n                                Value: {\r\n                                    type: \"number\",\r\n                                    description: \"\",\r\n                                },\r\n                            },\r\n                            description: \"System state\",\r\n                            context: {},\r\n                        };\r\n                        createMetricsMsg = {\r\n                            type: \"define\",\r\n                            metrics: [metric],\r\n                        };\r\n                        session.send(createMetricsMsg);\r\n                        return [2];\r\n                }\r\n            });\r\n        }); };\r\n        var updateSystem = function (system, state) { return __awaiter$1(_this, void 0, void 0, function () {\r\n            var shadowedUpdateMetric, stateObj, rootMetric;\r\n            return __generator$1(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, joinPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        shadowedUpdateMetric = {\r\n                            type: \"publish\",\r\n                            values: [{\r\n                                    name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                                    value: {\r\n                                        Description: state.description,\r\n                                        Value: state.state,\r\n                                    },\r\n                                    timestamp: Date.now(),\r\n                                }],\r\n                        };\r\n                        session.send(shadowedUpdateMetric);\r\n                        stateObj = composeMsgForRootStateMetric(system);\r\n                        rootMetric = {\r\n                            type: \"publish\",\r\n                            peer_id: connection.peerId,\r\n                            values: [{\r\n                                    name: \"/State\",\r\n                                    value: {\r\n                                        Description: stateObj.description,\r\n                                        Value: stateObj.value,\r\n                                    },\r\n                                    timestamp: Date.now(),\r\n                                }],\r\n                        };\r\n                        session.send(rootMetric);\r\n                        return [2];\r\n                }\r\n            });\r\n        }); };\r\n        var createMetric = function (metric) { return __awaiter$1(_this, void 0, void 0, function () {\r\n            var metricClone, m, createMetricsMsg;\r\n            return __generator$1(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        metricClone = cloneMetric(metric);\r\n                        return [4, joinPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        m = serializeMetric(metricClone);\r\n                        createMetricsMsg = {\r\n                            type: \"define\",\r\n                            metrics: [m],\r\n                        };\r\n                        session.send(createMetricsMsg);\r\n                        if (typeof metricClone.value !== \"undefined\") {\r\n                            updateMetricCore(metricClone);\r\n                        }\r\n                        return [2];\r\n                }\r\n            });\r\n        }); };\r\n        var updateMetric = function (metric) { return __awaiter$1(_this, void 0, void 0, function () {\r\n            var metricClone;\r\n            return __generator$1(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        metricClone = cloneMetric(metric);\r\n                        return [4, joinPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        updateMetricCore(metricClone);\r\n                        return [2];\r\n                }\r\n            });\r\n        }); };\r\n        var updateMetricCore = function (metric) {\r\n            if (canUpdate()) {\r\n                var value = getMetricValueByType(metric);\r\n                var publishMetricsMsg = {\r\n                    type: \"publish\",\r\n                    values: [{\r\n                            name: normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name),\r\n                            value: value,\r\n                            timestamp: Date.now(),\r\n                        }],\r\n                };\r\n                return session.sendFireAndForget(publishMetricsMsg);\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        var cloneMetric = function (metric) {\r\n            var metricClone = __assign$1({}, metric);\r\n            if (typeof metric.value === \"object\" && metric.value !== null) {\r\n                metricClone.value = __assign$1({}, metric.value);\r\n            }\r\n            return metricClone;\r\n        };\r\n        var canUpdate = function () {\r\n            var _a;\r\n            try {\r\n                var func = (_a = config.canUpdateMetric) !== null && _a !== void 0 ? _a : (function () { return true; });\r\n                return func();\r\n            }\r\n            catch (_b) {\r\n                return true;\r\n            }\r\n        };\r\n        return {\r\n            init: init,\r\n            createSystem: createSystem,\r\n            updateSystem: updateSystem,\r\n            createMetric: createMetric,\r\n            updateMetric: updateMetric,\r\n        };\r\n    }\n\n    var Helpers = {\r\n        validate: function (definition, parent, transport) {\r\n            if (definition === null || typeof definition !== \"object\") {\r\n                throw new Error(\"Missing definition\");\r\n            }\r\n            if (parent === null || typeof parent !== \"object\") {\r\n                throw new Error(\"Missing parent\");\r\n            }\r\n            if (transport === null || typeof transport !== \"object\") {\r\n                throw new Error(\"Missing transport\");\r\n            }\r\n        },\r\n    };\n\n    var BaseMetric = (function () {\r\n        function BaseMetric(definition, system, transport, value, type) {\r\n            this.definition = definition;\r\n            this.system = system;\r\n            this.transport = transport;\r\n            this.value = value;\r\n            this.type = type;\r\n            this.path = [];\r\n            Helpers.validate(definition, system, transport);\r\n            this.path = system.path.slice(0);\r\n            this.path.push(system.name);\r\n            this.name = definition.name;\r\n            this.description = definition.description;\r\n            transport.createMetric(this);\r\n        }\r\n        Object.defineProperty(BaseMetric.prototype, \"repo\", {\r\n            get: function () {\r\n                var _a;\r\n                return (_a = this.system) === null || _a === void 0 ? void 0 : _a.repo;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BaseMetric.prototype, \"id\", {\r\n            get: function () { return this.system.path + \"/\" + name; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        BaseMetric.prototype.update = function (newValue) {\r\n            this.value = newValue;\r\n            return this.transport.updateMetric(this);\r\n        };\r\n        return BaseMetric;\r\n    }());\n\n    var NumberMetric = (function (_super) {\r\n        __extends$1(NumberMetric, _super);\r\n        function NumberMetric(definition, system, transport, value) {\r\n            return _super.call(this, definition, system, transport, value, MetricTypes.NUMBER) || this;\r\n        }\r\n        NumberMetric.prototype.incrementBy = function (num) {\r\n            this.update(this.value + num);\r\n        };\r\n        NumberMetric.prototype.increment = function () {\r\n            this.incrementBy(1);\r\n        };\r\n        NumberMetric.prototype.decrement = function () {\r\n            this.incrementBy(-1);\r\n        };\r\n        NumberMetric.prototype.decrementBy = function (num) {\r\n            this.incrementBy(num * -1);\r\n        };\r\n        return NumberMetric;\r\n    }(BaseMetric));\n\n    var ObjectMetric = (function (_super) {\r\n        __extends$1(ObjectMetric, _super);\r\n        function ObjectMetric(definition, system, transport, value) {\r\n            return _super.call(this, definition, system, transport, value, MetricTypes.OBJECT) || this;\r\n        }\r\n        ObjectMetric.prototype.update = function (newValue) {\r\n            this.mergeValues(newValue);\r\n            return this.transport.updateMetric(this);\r\n        };\r\n        ObjectMetric.prototype.mergeValues = function (values) {\r\n            var _this = this;\r\n            return Object.keys(this.value).forEach(function (k) {\r\n                if (typeof values[k] !== \"undefined\") {\r\n                    _this.value[k] = values[k];\r\n                }\r\n            });\r\n        };\r\n        return ObjectMetric;\r\n    }(BaseMetric));\n\n    var StringMetric = (function (_super) {\r\n        __extends$1(StringMetric, _super);\r\n        function StringMetric(definition, system, transport, value) {\r\n            return _super.call(this, definition, system, transport, value, MetricTypes.STRING) || this;\r\n        }\r\n        return StringMetric;\r\n    }(BaseMetric));\n\n    var TimestampMetric = (function (_super) {\r\n        __extends$1(TimestampMetric, _super);\r\n        function TimestampMetric(definition, system, transport, value) {\r\n            return _super.call(this, definition, system, transport, value, MetricTypes.TIMESTAMP) || this;\r\n        }\r\n        TimestampMetric.prototype.now = function () {\r\n            this.update(new Date());\r\n        };\r\n        return TimestampMetric;\r\n    }(BaseMetric));\n\n    function system(name, repo, protocol, parent, description) {\r\n        if (!repo) {\r\n            throw new Error(\"Repository is required\");\r\n        }\r\n        if (!protocol) {\r\n            throw new Error(\"Transport is required\");\r\n        }\r\n        var _transport = protocol;\r\n        var _name = name;\r\n        var _description = description || \"\";\r\n        var _repo = repo;\r\n        var _parent = parent;\r\n        var _path = _buildPath(parent);\r\n        var _state = {};\r\n        var id = _arrayToString(_path, \"/\") + name;\r\n        var root = repo.root;\r\n        var _subSystems = [];\r\n        var _metrics = [];\r\n        function subSystem(nameSystem, descriptionSystem) {\r\n            if (!nameSystem || nameSystem.length === 0) {\r\n                throw new Error(\"name is required\");\r\n            }\r\n            var match = _subSystems.filter(function (s) { return s.name === nameSystem; });\r\n            if (match.length > 0) {\r\n                return match[0];\r\n            }\r\n            var _system = system(nameSystem, _repo, _transport, me, descriptionSystem);\r\n            _subSystems.push(_system);\r\n            return _system;\r\n        }\r\n        function setState(state, stateDescription) {\r\n            _state = { state: state, description: stateDescription };\r\n            _transport.updateSystem(me, _state);\r\n        }\r\n        function stringMetric(definition, value) {\r\n            return _getOrCreateMetric(definition, MetricTypes.STRING, value, function (metricDef) { return new StringMetric(metricDef, me, _transport, value); });\r\n        }\r\n        function numberMetric(definition, value) {\r\n            return _getOrCreateMetric(definition, MetricTypes.NUMBER, value, function (metricDef) { return new NumberMetric(metricDef, me, _transport, value); });\r\n        }\r\n        function objectMetric(definition, value) {\r\n            return _getOrCreateMetric(definition, MetricTypes.OBJECT, value, function (metricDef) { return new ObjectMetric(metricDef, me, _transport, value); });\r\n        }\r\n        function timestampMetric(definition, value) {\r\n            return _getOrCreateMetric(definition, MetricTypes.TIMESTAMP, value, function (metricDef) { return new TimestampMetric(metricDef, me, _transport, value); });\r\n        }\r\n        function _getOrCreateMetric(metricObject, expectedType, value, createMetric) {\r\n            var metricDef = { name: \"\" };\r\n            if (typeof metricObject === \"string\") {\r\n                metricDef = { name: metricObject };\r\n            }\r\n            else {\r\n                metricDef = metricObject;\r\n            }\r\n            var matching = _metrics.filter(function (shadowedMetric) { return shadowedMetric.name === metricDef.name; });\r\n            if (matching.length > 0) {\r\n                var existing = matching[0];\r\n                if (existing.type !== expectedType) {\r\n                    throw new Error(\"A metric named \" + metricDef.name + \" is already defined with different type.\");\r\n                }\r\n                if (typeof value !== \"undefined\") {\r\n                    existing\r\n                        .update(value)\r\n                        .catch(function () { });\r\n                }\r\n                return existing;\r\n            }\r\n            var metric = createMetric(metricDef);\r\n            _metrics.push(metric);\r\n            return metric;\r\n        }\r\n        function _buildPath(shadowedSystem) {\r\n            if (!shadowedSystem || !shadowedSystem.parent) {\r\n                return [];\r\n            }\r\n            var path = _buildPath(shadowedSystem.parent);\r\n            path.push(shadowedSystem.name);\r\n            return path;\r\n        }\r\n        function _arrayToString(path, separator) {\r\n            return ((path && path.length > 0) ? path.join(separator) : \"\");\r\n        }\r\n        function getAggregateState() {\r\n            var aggState = [];\r\n            if (Object.keys(_state).length > 0) {\r\n                aggState.push({\r\n                    name: _name,\r\n                    path: _path,\r\n                    state: _state.state,\r\n                    description: _state.description,\r\n                });\r\n            }\r\n            _subSystems.forEach(function (shadowedSubSystem) {\r\n                var result = shadowedSubSystem.getAggregateState();\r\n                if (result.length > 0) {\r\n                    aggState.push.apply(aggState, result);\r\n                }\r\n            });\r\n            return aggState;\r\n        }\r\n        var me = {\r\n            get name() {\r\n                return _name;\r\n            },\r\n            get description() {\r\n                return _description;\r\n            },\r\n            get repo() {\r\n                return _repo;\r\n            },\r\n            get parent() {\r\n                return _parent;\r\n            },\r\n            path: _path,\r\n            id: id,\r\n            root: root,\r\n            get subSystems() {\r\n                return _subSystems;\r\n            },\r\n            get metrics() {\r\n                return _metrics;\r\n            },\r\n            subSystem: subSystem,\r\n            getState: function () {\r\n                return _state;\r\n            },\r\n            setState: setState,\r\n            stringMetric: stringMetric,\r\n            timestampMetric: timestampMetric,\r\n            objectMetric: objectMetric,\r\n            numberMetric: numberMetric,\r\n            getAggregateState: getAggregateState,\r\n        };\r\n        _transport.createSystem(me);\r\n        return me;\r\n    }\n\n    var Repository = (function () {\r\n        function Repository(options, protocol) {\r\n            protocol.init(this);\r\n            this.root = system(\"\", this, protocol);\r\n            this.addSystemMetrics(this.root, options.clickStream || options.clickStream === undefined);\r\n        }\r\n        Repository.prototype.addSystemMetrics = function (rootSystem, useClickStream) {\r\n            if (typeof navigator !== \"undefined\") {\r\n                rootSystem.stringMetric(\"UserAgent\", navigator.userAgent);\r\n            }\r\n            if (useClickStream && typeof document !== \"undefined\") {\r\n                var clickStream_1 = rootSystem.subSystem(\"ClickStream\");\r\n                var documentClickHandler = function (e) {\r\n                    if (!e.target) {\r\n                        return;\r\n                    }\r\n                    var target = e.target;\r\n                    clickStream_1.objectMetric(\"LastBrowserEvent\", {\r\n                        type: \"click\",\r\n                        timestamp: new Date(),\r\n                        target: {\r\n                            className: e.target ? target.className : \"\",\r\n                            id: target.id,\r\n                            type: \"<\" + target.tagName.toLowerCase() + \">\",\r\n                            href: target.href || \"\",\r\n                        },\r\n                    });\r\n                };\r\n                clickStream_1.objectMetric(\"Page\", {\r\n                    title: document.title,\r\n                    page: window.location.href,\r\n                });\r\n                if (document.addEventListener) {\r\n                    document.addEventListener(\"click\", documentClickHandler);\r\n                }\r\n                else {\r\n                    document.attachEvent(\"onclick\", documentClickHandler);\r\n                }\r\n            }\r\n            var startTime = rootSystem.stringMetric(\"StartTime\", (new Date()).toString());\r\n            var urlMetric = rootSystem.stringMetric(\"StartURL\", \"\");\r\n            var appNameMetric = rootSystem.stringMetric(\"AppName\", \"\");\r\n            if (typeof window !== \"undefined\") {\r\n                if (typeof window.location !== \"undefined\") {\r\n                    var startUrl = window.location.href;\r\n                    urlMetric.update(startUrl);\r\n                }\r\n                if (typeof window.glue42gd !== \"undefined\") {\r\n                    appNameMetric.update(window.glue42gd.appName);\r\n                }\r\n            }\r\n        };\r\n        return Repository;\r\n    }());\n\n    var NullProtocol = (function () {\r\n        function NullProtocol() {\r\n        }\r\n        NullProtocol.prototype.init = function (repo) {\r\n        };\r\n        NullProtocol.prototype.createSystem = function (system) {\r\n            return Promise.resolve();\r\n        };\r\n        NullProtocol.prototype.updateSystem = function (metric, state) {\r\n            return Promise.resolve();\r\n        };\r\n        NullProtocol.prototype.createMetric = function (metric) {\r\n            return Promise.resolve();\r\n        };\r\n        NullProtocol.prototype.updateMetric = function (metric) {\r\n            return Promise.resolve();\r\n        };\r\n        return NullProtocol;\r\n    }());\n\n    var PerfTracker = (function () {\r\n        function PerfTracker(api, initialPublishTimeout, publishInterval) {\r\n            this.api = api;\r\n            this.lastCount = 0;\r\n            this.initialPublishTimeout = 10 * 1000;\r\n            this.publishInterval = 60 * 1000;\r\n            this.initialPublishTimeout = initialPublishTimeout !== null && initialPublishTimeout !== void 0 ? initialPublishTimeout : this.initialPublishTimeout;\r\n            this.publishInterval = publishInterval !== null && publishInterval !== void 0 ? publishInterval : this.publishInterval;\r\n            this.scheduleCollection();\r\n            this.system = this.api.subSystem(\"performance\", \"Performance data published by the web application\");\r\n        }\r\n        PerfTracker.prototype.scheduleCollection = function () {\r\n            var _this = this;\r\n            setTimeout(function () {\r\n                _this.collect();\r\n                setInterval(function () {\r\n                    _this.collect();\r\n                }, _this.publishInterval);\r\n            }, this.initialPublishTimeout);\r\n        };\r\n        PerfTracker.prototype.collect = function () {\r\n            try {\r\n                this.collectMemory();\r\n                this.collectEntries();\r\n            }\r\n            catch (_a) {\r\n            }\r\n        };\r\n        PerfTracker.prototype.collectMemory = function () {\r\n            var memory = window.performance.memory;\r\n            this.system.stringMetric(\"memory\", JSON.stringify({\r\n                totalJSHeapSize: memory.totalJSHeapSize,\r\n                usedJSHeapSize: memory.usedJSHeapSize\r\n            }));\r\n        };\r\n        PerfTracker.prototype.collectEntries = function () {\r\n            var allEntries = window.performance.getEntries();\r\n            if (allEntries.length <= this.lastCount) {\r\n                return;\r\n            }\r\n            this.lastCount = allEntries.length;\r\n            this.system.stringMetric(\"entries\", JSON.stringify(allEntries));\r\n        };\r\n        return PerfTracker;\r\n    }());\n\n    var metrics = (function (options) {\r\n        var protocol;\r\n        if (!options.connection || typeof options.connection !== \"object\") {\r\n            protocol = new NullProtocol();\r\n        }\r\n        else {\r\n            protocol = gw3(options.connection, options);\r\n        }\r\n        var repo = new Repository(options, protocol);\r\n        var rootSystem = repo.root;\r\n        if (!options.disableAutoAppSystem) {\r\n            rootSystem = rootSystem.subSystem(\"App\");\r\n        }\r\n        var api = addFAVSupport(rootSystem);\r\n        initPerf(api, options.pagePerformanceMetrics);\r\n        return api;\r\n    });\r\n    var perf;\r\n    function initPerf(api, config) {\r\n        var _a, _b;\r\n        if (typeof window === \"undefined\") {\r\n            return;\r\n        }\r\n        var perfConfig = (_b = (_a = window === null || window === void 0 ? void 0 : window.glue42gd) === null || _a === void 0 ? void 0 : _a.metrics) === null || _b === void 0 ? void 0 : _b.pagePerformanceMetrics;\r\n        if (perfConfig) {\r\n            config = perfConfig;\r\n        }\r\n        if (config === null || config === void 0 ? void 0 : config.enabled) {\r\n            perf = new PerfTracker(api, config.initialPublishTimeout, config.publishInterval);\r\n        }\r\n    }\r\n    function addFAVSupport(system) {\r\n        var reportingSystem = system.subSystem(\"reporting\");\r\n        var def = {\r\n            name: \"features\"\r\n        };\r\n        var featureMetric;\r\n        var featureMetricFunc = function (name, action, payload) {\r\n            if (typeof name === \"undefined\" || name === \"\") {\r\n                throw new Error(\"name is mandatory\");\r\n            }\r\n            else if (typeof action === \"undefined\" || action === \"\") {\r\n                throw new Error(\"action is mandatory\");\r\n            }\r\n            else if (typeof payload === \"undefined\" || payload === \"\") {\r\n                throw new Error(\"payload is mandatory\");\r\n            }\r\n            if (!featureMetric) {\r\n                featureMetric = reportingSystem.objectMetric(def, { name: name, action: action, payload: payload });\r\n            }\r\n            else {\r\n                featureMetric.update({\r\n                    name: name,\r\n                    action: action,\r\n                    payload: payload\r\n                });\r\n            }\r\n        };\r\n        system.featureMetric = featureMetricFunc;\r\n        return system;\r\n    }\n\n    function createRegistry(options) {\r\n        if (options && options.errorHandling\r\n            && typeof options.errorHandling !== \"function\"\r\n            && options.errorHandling !== \"log\"\r\n            && options.errorHandling !== \"silent\"\r\n            && options.errorHandling !== \"throw\") {\r\n            throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\r\n        }\r\n        var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\r\n        var callbacks = {};\r\n        function add(key, callback, replayArgumentsArr) {\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey) {\r\n                callbacksForKey = [];\r\n                callbacks[key] = callbacksForKey;\r\n            }\r\n            callbacksForKey.push(callback);\r\n            if (replayArgumentsArr) {\r\n                setTimeout(function () {\r\n                    replayArgumentsArr.forEach(function (replayArgument) {\r\n                        var _a;\r\n                        if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\r\n                            try {\r\n                                if (Array.isArray(replayArgument)) {\r\n                                    callback.apply(undefined, replayArgument);\r\n                                }\r\n                                else {\r\n                                    callback.apply(undefined, [replayArgument]);\r\n                                }\r\n                            }\r\n                            catch (err) {\r\n                                _handleError(err, key);\r\n                            }\r\n                        }\r\n                    });\r\n                }, 0);\r\n            }\r\n            return function () {\r\n                var allForKey = callbacks[key];\r\n                if (!allForKey) {\r\n                    return;\r\n                }\r\n                allForKey = allForKey.reduce(function (acc, element, index) {\r\n                    if (!(element === callback && acc.length === index)) {\r\n                        acc.push(element);\r\n                    }\r\n                    return acc;\r\n                }, []);\r\n                if (allForKey.length === 0) {\r\n                    delete callbacks[key];\r\n                }\r\n                else {\r\n                    callbacks[key] = allForKey;\r\n                }\r\n            };\r\n        }\r\n        function execute(key) {\r\n            var argumentsArr = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                argumentsArr[_i - 1] = arguments[_i];\r\n            }\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey || callbacksForKey.length === 0) {\r\n                return [];\r\n            }\r\n            var results = [];\r\n            callbacksForKey.forEach(function (callback) {\r\n                try {\r\n                    var result = callback.apply(undefined, argumentsArr);\r\n                    results.push(result);\r\n                }\r\n                catch (err) {\r\n                    results.push(undefined);\r\n                    _handleError(err, key);\r\n                }\r\n            });\r\n            return results;\r\n        }\r\n        function _handleError(exceptionArtifact, key) {\r\n            var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\r\n            if (_userErrorHandler) {\r\n                _userErrorHandler(errParam);\r\n                return;\r\n            }\r\n            var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\r\n            if (options) {\r\n                switch (options.errorHandling) {\r\n                    case \"log\":\r\n                        return console.error(msg);\r\n                    case \"silent\":\r\n                        return;\r\n                    case \"throw\":\r\n                        throw new Error(msg);\r\n                }\r\n            }\r\n            console.error(msg);\r\n        }\r\n        function clear() {\r\n            callbacks = {};\r\n        }\r\n        function clearKey(key) {\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey) {\r\n                return;\r\n            }\r\n            delete callbacks[key];\r\n        }\r\n        return {\r\n            add: add,\r\n            execute: execute,\r\n            clear: clear,\r\n            clearKey: clearKey\r\n        };\r\n    }\r\n    createRegistry.default = createRegistry;\r\n    var lib = createRegistry;\n\n    var InProcTransport = (function () {\r\n        function InProcTransport(settings, logger) {\r\n            var _this = this;\r\n            this.registry = lib();\r\n            this.gw = settings.facade;\r\n            this.gw.connect(function (_client, message) {\r\n                _this.messageHandler(message);\r\n            }).then(function (client) {\r\n                _this.client = client;\r\n            });\r\n        }\r\n        Object.defineProperty(InProcTransport.prototype, \"isObjectBasedTransport\", {\r\n            get: function () {\r\n                return true;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InProcTransport.prototype.sendObject = function (msg) {\r\n            if (this.client) {\r\n                this.client.send(msg);\r\n                return Promise.resolve(undefined);\r\n            }\r\n            else {\r\n                return Promise.reject(\"not connected\");\r\n            }\r\n        };\r\n        InProcTransport.prototype.send = function (_msg) {\r\n            return Promise.reject(\"not supported\");\r\n        };\r\n        InProcTransport.prototype.onMessage = function (callback) {\r\n            return this.registry.add(\"onMessage\", callback);\r\n        };\r\n        InProcTransport.prototype.onConnectedChanged = function (callback) {\r\n            callback(true);\r\n        };\r\n        InProcTransport.prototype.close = function () {\r\n            return Promise.resolve();\r\n        };\r\n        InProcTransport.prototype.open = function () {\r\n            return Promise.resolve();\r\n        };\r\n        InProcTransport.prototype.name = function () {\r\n            return \"in-memory\";\r\n        };\r\n        InProcTransport.prototype.reconnect = function () {\r\n            return Promise.resolve();\r\n        };\r\n        InProcTransport.prototype.messageHandler = function (msg) {\r\n            this.registry.execute(\"onMessage\", msg);\r\n        };\r\n        return InProcTransport;\r\n    }());\n\n    var SharedWorkerTransport = (function () {\r\n        function SharedWorkerTransport(workerFile, logger) {\r\n            var _this = this;\r\n            this.logger = logger;\r\n            this.registry = lib();\r\n            this.worker = new SharedWorker(workerFile);\r\n            this.worker.port.onmessage = function (e) {\r\n                _this.messageHandler(e.data);\r\n            };\r\n        }\r\n        Object.defineProperty(SharedWorkerTransport.prototype, \"isObjectBasedTransport\", {\r\n            get: function () {\r\n                return true;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        SharedWorkerTransport.prototype.sendObject = function (msg) {\r\n            this.worker.port.postMessage(msg);\r\n            return Promise.resolve();\r\n        };\r\n        SharedWorkerTransport.prototype.send = function (_msg) {\r\n            return Promise.reject(\"not supported\");\r\n        };\r\n        SharedWorkerTransport.prototype.onMessage = function (callback) {\r\n            return this.registry.add(\"onMessage\", callback);\r\n        };\r\n        SharedWorkerTransport.prototype.onConnectedChanged = function (callback) {\r\n            callback(true);\r\n        };\r\n        SharedWorkerTransport.prototype.close = function () {\r\n            return Promise.resolve();\r\n        };\r\n        SharedWorkerTransport.prototype.open = function () {\r\n            return Promise.resolve();\r\n        };\r\n        SharedWorkerTransport.prototype.name = function () {\r\n            return \"shared-worker\";\r\n        };\r\n        SharedWorkerTransport.prototype.reconnect = function () {\r\n            return Promise.resolve();\r\n        };\r\n        SharedWorkerTransport.prototype.messageHandler = function (msg) {\r\n            this.registry.execute(\"onMessage\", msg);\r\n        };\r\n        return SharedWorkerTransport;\r\n    }());\n\n    var Utils = (function () {\r\n        function Utils() {\r\n        }\r\n        Utils.getGDMajorVersion = function () {\r\n            if (typeof window === \"undefined\") {\r\n                return undefined;\r\n            }\r\n            if (!window.glueDesktop) {\r\n                return undefined;\r\n            }\r\n            if (!window.glueDesktop.version) {\r\n                return undefined;\r\n            }\r\n            var ver = Number(window.glueDesktop.version.substr(0, 1));\r\n            return isNaN(ver) ? undefined : ver;\r\n        };\r\n        Utils.isNode = function () {\r\n            if (typeof Utils._isNode !== \"undefined\") {\r\n                return Utils._isNode;\r\n            }\r\n            if (typeof window !== \"undefined\") {\r\n                Utils._isNode = false;\r\n                return false;\r\n            }\r\n            try {\r\n                Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\r\n            }\r\n            catch (e) {\r\n                Utils._isNode = false;\r\n            }\r\n            return Utils._isNode;\r\n        };\r\n        return Utils;\r\n    }());\n\n    var PromiseWrapper = (function () {\r\n        function PromiseWrapper() {\r\n            var _this = this;\r\n            this.rejected = false;\r\n            this.resolved = false;\r\n            this.promise = new Promise(function (resolve, reject) {\r\n                _this.resolve = function (t) {\r\n                    _this.resolved = true;\r\n                    resolve(t);\r\n                };\r\n                _this.reject = function (err) {\r\n                    _this.rejected = true;\r\n                    reject(err);\r\n                };\r\n            });\r\n        }\r\n        PromiseWrapper.delay = function (time) {\r\n            return new Promise(function (resolve) { return setTimeout(resolve, time); });\r\n        };\r\n        Object.defineProperty(PromiseWrapper.prototype, \"ended\", {\r\n            get: function () {\r\n                return this.rejected || this.resolved;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return PromiseWrapper;\r\n    }());\n\n    var timers = {};\r\n    function getAllTimers() {\r\n        return timers;\r\n    }\r\n    function timer (timerName) {\r\n        var existing = timers[timerName];\r\n        if (existing) {\r\n            return existing;\r\n        }\r\n        var marks = [];\r\n        function now() {\r\n            return new Date().getTime();\r\n        }\r\n        var startTime = now();\r\n        mark(\"start\", startTime);\r\n        var endTime;\r\n        var period;\r\n        function stop() {\r\n            endTime = now();\r\n            mark(\"end\", endTime);\r\n            period = endTime - startTime;\r\n            return period;\r\n        }\r\n        function mark(name, time) {\r\n            var currentTime = time !== null && time !== void 0 ? time : now();\r\n            var diff = 0;\r\n            if (marks.length > 0) {\r\n                diff = currentTime - marks[marks.length - 1].time;\r\n            }\r\n            marks.push({ name: name, time: currentTime, diff: diff });\r\n        }\r\n        var timerObj = {\r\n            get startTime() {\r\n                return startTime;\r\n            },\r\n            get endTime() {\r\n                return endTime;\r\n            },\r\n            get period() {\r\n                return period;\r\n            },\r\n            stop: stop,\r\n            mark: mark,\r\n            marks: marks\r\n        };\r\n        timers[timerName] = timerObj;\r\n        return timerObj;\r\n    }\n\n    var WebSocketConstructor = Utils.isNode() ? null : window.WebSocket;\r\n    var WS = (function () {\r\n        function WS(settings, logger) {\r\n            this.startupTimer = timer(\"connection\");\r\n            this._running = true;\r\n            this._registry = lib();\r\n            this.wsRequests = [];\r\n            this.settings = settings;\r\n            this.logger = logger;\r\n            if (!this.settings.ws) {\r\n                throw new Error(\"ws is missing\");\r\n            }\r\n        }\r\n        WS.prototype.onMessage = function (callback) {\r\n            return this._registry.add(\"onMessage\", callback);\r\n        };\r\n        WS.prototype.send = function (msg, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.waitForSocketConnection(function () {\r\n                    var _a;\r\n                    try {\r\n                        (_a = _this.ws) === null || _a === void 0 ? void 0 : _a.send(msg);\r\n                        resolve();\r\n                    }\r\n                    catch (e) {\r\n                        reject(e);\r\n                    }\r\n                }, reject);\r\n            });\r\n        };\r\n        WS.prototype.open = function () {\r\n            var _this = this;\r\n            this.logger.info(\"opening ws...\");\r\n            this._running = true;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.waitForSocketConnection(resolve, reject);\r\n            });\r\n        };\r\n        WS.prototype.close = function () {\r\n            this._running = false;\r\n            if (this.ws) {\r\n                this.ws.close();\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        WS.prototype.onConnectedChanged = function (callback) {\r\n            return this._registry.add(\"onConnectedChanged\", callback);\r\n        };\r\n        WS.prototype.name = function () {\r\n            return \"ws \" + this.settings.ws;\r\n        };\r\n        WS.prototype.reconnect = function () {\r\n            var _a;\r\n            (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close();\r\n            var pw = new PromiseWrapper();\r\n            this.waitForSocketConnection(function () {\r\n                pw.resolve();\r\n            });\r\n            return pw.promise;\r\n        };\r\n        WS.prototype.waitForSocketConnection = function (callback, failed) {\r\n            var _a;\r\n            failed = failed !== null && failed !== void 0 ? failed : (function () { });\r\n            if (!this._running) {\r\n                failed(\"wait for socket on \" + this.settings.ws + \" failed - socket closed by user\");\r\n                return;\r\n            }\r\n            if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === 1) {\r\n                callback();\r\n                return;\r\n            }\r\n            this.wsRequests.push({ callback: callback, failed: failed });\r\n            if (this.wsRequests.length > 1) {\r\n                return;\r\n            }\r\n            this.openSocket();\r\n        };\r\n        WS.prototype.openSocket = function (retryInterval, retriesLeft) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var _a;\r\n                var _this = this;\r\n                return __generator$1(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            this.startupTimer.mark(\"opening-socket\");\r\n                            if (retryInterval === undefined) {\r\n                                retryInterval = this.settings.reconnectInterval;\r\n                            }\r\n                            if (retriesLeft !== undefined) {\r\n                                if (retriesLeft === 0) {\r\n                                    this.notifyForSocketState(\"wait for socket on \" + this.settings.ws + \" failed - no more retries left\");\r\n                                    return [2];\r\n                                }\r\n                                this.logger.debug(\"will retry \" + retriesLeft + \" more times (every \" + retryInterval + \" ms)\");\r\n                            }\r\n                            _b.label = 1;\r\n                        case 1:\r\n                            _b.trys.push([1, 3, , 4]);\r\n                            return [4, this.initiateSocket()];\r\n                        case 2:\r\n                            _b.sent();\r\n                            this.startupTimer.mark(\"socket-initiated\");\r\n                            this.notifyForSocketState();\r\n                            return [3, 4];\r\n                        case 3:\r\n                            _a = _b.sent();\r\n                            setTimeout(function () {\r\n                                var retries = retriesLeft === undefined ? undefined : retriesLeft - 1;\r\n                                _this.openSocket(retryInterval, retries);\r\n                            }, retryInterval);\r\n                            return [3, 4];\r\n                        case 4: return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        WS.prototype.initiateSocket = function () {\r\n            var _this = this;\r\n            var pw = new PromiseWrapper();\r\n            this.logger.debug(\"initiating ws to \" + this.settings.ws + \"...\");\r\n            this.ws = new WebSocketConstructor(this.settings.ws || \"\");\r\n            this.ws.onerror = function (err) {\r\n                var reason = \"\";\r\n                try {\r\n                    reason = JSON.stringify(err);\r\n                }\r\n                catch (error) {\r\n                    var seen_1 = new WeakSet();\r\n                    var replacer = function (key, value) {\r\n                        if (typeof value === \"object\" && value !== null) {\r\n                            if (seen_1.has(value)) {\r\n                                return;\r\n                            }\r\n                            seen_1.add(value);\r\n                        }\r\n                        return value;\r\n                    };\r\n                    reason = JSON.stringify(err, replacer);\r\n                }\r\n                pw.reject(\"error\");\r\n                _this.notifyStatusChanged(false, reason);\r\n            };\r\n            this.ws.onclose = function (err) {\r\n                _this.logger.info(\"ws closed \" + err);\r\n                pw.reject(\"closed\");\r\n                _this.notifyStatusChanged(false);\r\n            };\r\n            this.ws.onopen = function () {\r\n                var _a;\r\n                _this.startupTimer.mark(\"ws-opened\");\r\n                _this.logger.info(\"ws opened \" + ((_a = _this.settings.identity) === null || _a === void 0 ? void 0 : _a.application));\r\n                pw.resolve();\r\n                _this.notifyStatusChanged(true);\r\n            };\r\n            this.ws.onmessage = function (message) {\r\n                _this._registry.execute(\"onMessage\", message.data);\r\n            };\r\n            return pw.promise;\r\n        };\r\n        WS.prototype.notifyForSocketState = function (error) {\r\n            this.wsRequests.forEach(function (wsRequest) {\r\n                if (error) {\r\n                    if (wsRequest.failed) {\r\n                        wsRequest.failed(error);\r\n                    }\r\n                }\r\n                else {\r\n                    wsRequest.callback();\r\n                }\r\n            });\r\n            this.wsRequests = [];\r\n        };\r\n        WS.prototype.notifyStatusChanged = function (status, reason) {\r\n            this._registry.execute(\"onConnectedChanged\", status, reason);\r\n        };\r\n        return WS;\r\n    }());\n\n    function createCommonjsModule(fn, module) {\n    \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n    }\n\n    // Found this seed-based random generator somewhere\n    // Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\n    var seed = 1;\n\n    /**\n     * return a random number based on a seed\n     * @param seed\n     * @returns {number}\n     */\n    function getNextValue() {\n        seed = (seed * 9301 + 49297) % 233280;\n        return seed/(233280.0);\n    }\n\n    function setSeed(_seed_) {\n        seed = _seed_;\n    }\n\n    var randomFromSeed = {\n        nextValue: getNextValue,\n        seed: setSeed\n    };\n\n    var ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\n    var alphabet;\n    var previousSeed;\n\n    var shuffled;\n\n    function reset() {\n        shuffled = false;\n    }\n\n    function setCharacters(_alphabet_) {\n        if (!_alphabet_) {\n            if (alphabet !== ORIGINAL) {\n                alphabet = ORIGINAL;\n                reset();\n            }\n            return;\n        }\n\n        if (_alphabet_ === alphabet) {\n            return;\n        }\n\n        if (_alphabet_.length !== ORIGINAL.length) {\n            throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n        }\n\n        var unique = _alphabet_.split('').filter(function(item, ind, arr){\n           return ind !== arr.lastIndexOf(item);\n        });\n\n        if (unique.length) {\n            throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n        }\n\n        alphabet = _alphabet_;\n        reset();\n    }\n\n    function characters(_alphabet_) {\n        setCharacters(_alphabet_);\n        return alphabet;\n    }\n\n    function setSeed$1(seed) {\n        randomFromSeed.seed(seed);\n        if (previousSeed !== seed) {\n            reset();\n            previousSeed = seed;\n        }\n    }\n\n    function shuffle() {\n        if (!alphabet) {\n            setCharacters(ORIGINAL);\n        }\n\n        var sourceArray = alphabet.split('');\n        var targetArray = [];\n        var r = randomFromSeed.nextValue();\n        var characterIndex;\n\n        while (sourceArray.length > 0) {\n            r = randomFromSeed.nextValue();\n            characterIndex = Math.floor(r * sourceArray.length);\n            targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n        }\n        return targetArray.join('');\n    }\n\n    function getShuffled() {\n        if (shuffled) {\n            return shuffled;\n        }\n        shuffled = shuffle();\n        return shuffled;\n    }\n\n    /**\n     * lookup shuffled letter\n     * @param index\n     * @returns {string}\n     */\n    function lookup(index) {\n        var alphabetShuffled = getShuffled();\n        return alphabetShuffled[index];\n    }\n\n    var alphabet_1 = {\n        characters: characters,\n        seed: setSeed$1,\n        lookup: lookup,\n        shuffled: getShuffled\n    };\n\n    var crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\n    function randomByte() {\n        if (!crypto || !crypto.getRandomValues) {\n            return Math.floor(Math.random() * 256) & 0x30;\n        }\n        var dest = new Uint8Array(1);\n        crypto.getRandomValues(dest);\n        return dest[0] & 0x30;\n    }\n\n    var randomByteBrowser = randomByte;\n\n    function encode(lookup, number) {\n        var loopCounter = 0;\n        var done;\n\n        var str = '';\n\n        while (!done) {\n            str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByteBrowser() );\n            done = number < (Math.pow(16, loopCounter + 1 ) );\n            loopCounter++;\n        }\n        return str;\n    }\n\n    var encode_1 = encode;\n\n    /**\n     * Decode the id to get the version and worker\n     * Mainly for debugging and testing.\n     * @param id - the shortid-generated id.\n     */\n    function decode(id) {\n        var characters = alphabet_1.shuffled();\n        return {\n            version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n            worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n        };\n    }\n\n    var decode_1 = decode;\n\n    function isShortId(id) {\n        if (!id || typeof id !== 'string' || id.length < 6 ) {\n            return false;\n        }\n\n        var characters = alphabet_1.characters();\n        var len = id.length;\n        for(var i = 0; i < len;i++) {\n            if (characters.indexOf(id[i]) === -1) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var isValid = isShortId;\n\n    var lib$1 = createCommonjsModule(function (module) {\n\n\n\n\n\n\n    // Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n    // This number should be updated every year or so to keep the generated id short.\n    // To regenerate `new Date() - 0` and bump the version. Always bump the version!\n    var REDUCE_TIME = 1459707606518;\n\n    // don't change unless we change the algos or REDUCE_TIME\n    // must be an integer and less than 16\n    var version = 6;\n\n    // if you are using cluster or multiple servers use this to make each instance\n    // has a unique value for worker\n    // Note: I don't know if this is automatically set when using third\n    // party cluster solutions such as pm2.\n    var clusterWorkerId =  0;\n\n    // Counter is used when shortid is called multiple times in one second.\n    var counter;\n\n    // Remember the last time shortid was called in case counter is needed.\n    var previousSeconds;\n\n    /**\n     * Generate unique id\n     * Returns string id\n     */\n    function generate() {\n\n        var str = '';\n\n        var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n        if (seconds === previousSeconds) {\n            counter++;\n        } else {\n            counter = 0;\n            previousSeconds = seconds;\n        }\n\n        str = str + encode_1(alphabet_1.lookup, version);\n        str = str + encode_1(alphabet_1.lookup, clusterWorkerId);\n        if (counter > 0) {\n            str = str + encode_1(alphabet_1.lookup, counter);\n        }\n        str = str + encode_1(alphabet_1.lookup, seconds);\n\n        return str;\n    }\n\n\n    /**\n     * Set the seed.\n     * Highly recommended if you don't want people to try to figure out your id schema.\n     * exposed as shortid.seed(int)\n     * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n     */\n    function seed(seedValue) {\n        alphabet_1.seed(seedValue);\n        return module.exports;\n    }\n\n    /**\n     * Set the cluster worker or machine id\n     * exposed as shortid.worker(int)\n     * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n     * returns shortid module so it can be chained.\n     */\n    function worker(workerId) {\n        clusterWorkerId = workerId;\n        return module.exports;\n    }\n\n    /**\n     *\n     * sets new characters to use in the alphabet\n     * returns the shuffled alphabet\n     */\n    function characters(newCharacters) {\n        if (newCharacters !== undefined) {\n            alphabet_1.characters(newCharacters);\n        }\n\n        return alphabet_1.shuffled();\n    }\n\n\n    // Export all other functions as properties of the generate function\n    module.exports = generate;\n    module.exports.generate = generate;\n    module.exports.seed = seed;\n    module.exports.worker = worker;\n    module.exports.characters = characters;\n    module.exports.decode = decode_1;\n    module.exports.isValid = isValid;\n    });\n    var lib_1 = lib$1.generate;\n    var lib_2 = lib$1.seed;\n    var lib_3 = lib$1.worker;\n    var lib_4 = lib$1.characters;\n    var lib_5 = lib$1.decode;\n    var lib_6 = lib$1.isValid;\n\n    var shortid = lib$1;\n\n    function domainSession (domain, connection, logger, successMessages, errorMessages) {\r\n        if (domain == null) {\r\n            domain = \"global\";\r\n        }\r\n        successMessages = successMessages || [\"success\"];\r\n        errorMessages = errorMessages || [\"error\"];\r\n        var isJoined = false;\r\n        var tryReconnecting = false;\r\n        var _latestOptions;\r\n        var _connectionOn = false;\r\n        var callbacks = lib();\r\n        connection.disconnected(handleConnectionDisconnected);\r\n        connection.loggedIn(handleConnectionLoggedIn);\r\n        connection.on(\"success\", function (msg) { return handleSuccessMessage(msg); });\r\n        connection.on(\"error\", function (msg) { return handleErrorMessage(msg); });\r\n        connection.on(\"result\", function (msg) { return handleSuccessMessage(msg); });\r\n        if (successMessages) {\r\n            successMessages.forEach(function (sm) {\r\n                connection.on(sm, function (msg) { return handleSuccessMessage(msg); });\r\n            });\r\n        }\r\n        if (errorMessages) {\r\n            errorMessages.forEach(function (sm) {\r\n                connection.on(sm, function (msg) { return handleErrorMessage(msg); });\r\n            });\r\n        }\r\n        var requestsMap = {};\r\n        function join(options) {\r\n            _latestOptions = options;\r\n            return new Promise(function (resolve, reject) {\r\n                if (isJoined) {\r\n                    resolve();\r\n                    return;\r\n                }\r\n                var joinPromise;\r\n                if (domain === \"global\") {\r\n                    joinPromise = _connectionOn ? Promise.resolve({}) : Promise.reject(\"not connected to gateway\");\r\n                }\r\n                else {\r\n                    logger.debug(\"joining domain \" + domain);\r\n                    var joinMsg = {\r\n                        type: \"join\",\r\n                        destination: domain,\r\n                        domain: \"global\",\r\n                        options: options,\r\n                    };\r\n                    joinPromise = send(joinMsg);\r\n                }\r\n                joinPromise\r\n                    .then(function () {\r\n                    handleJoined();\r\n                    resolve();\r\n                })\r\n                    .catch(function (err) {\r\n                    logger.debug(\"error joining \" + domain + \" domain: \" + JSON.stringify(err));\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n        function leave() {\r\n            if (domain === \"global\") {\r\n                return Promise.resolve();\r\n            }\r\n            logger.debug(\"stopping session \" + domain + \"...\");\r\n            var leaveMsg = {\r\n                type: \"leave\",\r\n                destination: domain,\r\n                domain: \"global\",\r\n            };\r\n            tryReconnecting = false;\r\n            return send(leaveMsg).then(function () {\r\n                isJoined = false;\r\n                callbacks.execute(\"onLeft\");\r\n            });\r\n        }\r\n        function handleJoined() {\r\n            logger.debug(\"did join \" + domain);\r\n            isJoined = true;\r\n            var wasReconnect = tryReconnecting;\r\n            tryReconnecting = false;\r\n            callbacks.execute(\"onJoined\", wasReconnect);\r\n        }\r\n        function handleConnectionDisconnected() {\r\n            _connectionOn = false;\r\n            logger.debug(\"connection is down\");\r\n            isJoined = false;\r\n            tryReconnecting = true;\r\n            callbacks.execute(\"onLeft\", { disconnected: true });\r\n        }\r\n        function handleConnectionLoggedIn() {\r\n            _connectionOn = true;\r\n            if (tryReconnecting) {\r\n                logger.debug(\"connection is now up - trying to reconnect...\");\r\n                join(_latestOptions);\r\n            }\r\n        }\r\n        function onJoined(callback) {\r\n            if (isJoined) {\r\n                callback(false);\r\n            }\r\n            return callbacks.add(\"onJoined\", callback);\r\n        }\r\n        function onLeft(callback) {\r\n            if (!isJoined) {\r\n                callback();\r\n            }\r\n            return callbacks.add(\"onLeft\", callback);\r\n        }\r\n        function handleErrorMessage(msg) {\r\n            if (domain !== msg.domain) {\r\n                return;\r\n            }\r\n            var requestId = msg.request_id;\r\n            if (!requestId) {\r\n                return;\r\n            }\r\n            var entry = requestsMap[requestId];\r\n            if (!entry) {\r\n                return;\r\n            }\r\n            entry.error(msg);\r\n        }\r\n        function handleSuccessMessage(msg) {\r\n            if (msg.domain !== domain) {\r\n                return;\r\n            }\r\n            var requestId = msg.request_id;\r\n            if (!requestId) {\r\n                return;\r\n            }\r\n            var entry = requestsMap[requestId];\r\n            if (!entry) {\r\n                return;\r\n            }\r\n            entry.success(msg);\r\n        }\r\n        function getNextRequestId() {\r\n            return shortid();\r\n        }\r\n        function send(msg, tag, options) {\r\n            options = options || {};\r\n            msg.request_id = msg.request_id || getNextRequestId();\r\n            msg.domain = msg.domain || domain;\r\n            if (!options.skipPeerId) {\r\n                msg.peer_id = connection.peerId;\r\n            }\r\n            var requestId = msg.request_id;\r\n            return new Promise(function (resolve, reject) {\r\n                requestsMap[requestId] = {\r\n                    success: function (successMsg) {\r\n                        delete requestsMap[requestId];\r\n                        successMsg._tag = tag;\r\n                        resolve(successMsg);\r\n                    },\r\n                    error: function (errorMsg) {\r\n                        logger.warn(\"GW error - \" + JSON.stringify(errorMsg) + \" for request \" + JSON.stringify(msg));\r\n                        delete requestsMap[requestId];\r\n                        errorMsg._tag = tag;\r\n                        reject(errorMsg);\r\n                    },\r\n                };\r\n                connection\r\n                    .send(msg, options)\r\n                    .catch(function (err) {\r\n                    requestsMap[requestId].error({ err: err });\r\n                });\r\n            });\r\n        }\r\n        function sendFireAndForget(msg) {\r\n            msg.request_id = msg.request_id ? msg.request_id : getNextRequestId();\r\n            msg.domain = msg.domain || domain;\r\n            msg.peer_id = connection.peerId;\r\n            return connection.send(msg);\r\n        }\r\n        return {\r\n            join: join,\r\n            leave: leave,\r\n            onJoined: onJoined,\r\n            onLeft: onLeft,\r\n            send: send,\r\n            sendFireAndForget: sendFireAndForget,\r\n            on: function (type, callback) {\r\n                connection.on(type, function (msg) {\r\n                    if (msg.domain !== domain) {\r\n                        return;\r\n                    }\r\n                    try {\r\n                        callback(msg);\r\n                    }\r\n                    catch (e) {\r\n                        logger.error(\"Callback  failed: \" + e + \" \\n \" + e.stack + \" \\n msg was: \" + JSON.stringify(msg), e);\r\n                    }\r\n                });\r\n            },\r\n            loggedIn: function (callback) { return connection.loggedIn(callback); },\r\n            connected: function (callback) { return connection.connected(callback); },\r\n            disconnected: function (callback) { return connection.disconnected(callback); },\r\n            get peerId() {\r\n                return connection.peerId;\r\n            },\r\n            get domain() {\r\n                return domain;\r\n            },\r\n        };\r\n    }\n\n    var GW3ProtocolImpl = (function () {\r\n        function GW3ProtocolImpl(connection, settings, logger) {\r\n            var _this = this;\r\n            this.connection = connection;\r\n            this.settings = settings;\r\n            this.logger = logger;\r\n            this.protocolVersion = 3;\r\n            this.datePrefix = \"#T42_DATE#\";\r\n            this.datePrefixLen = this.datePrefix.length;\r\n            this.dateMinLen = this.datePrefixLen + 1;\r\n            this.datePrefixFirstChar = this.datePrefix[0];\r\n            this.registry = lib();\r\n            this._isLoggedIn = false;\r\n            this.shouldTryLogin = true;\r\n            this.initialLogin = true;\r\n            this.initialLoginAttempts = 3;\r\n            this.sessions = [];\r\n            connection.disconnected(function () {\r\n                _this.handleDisconnected();\r\n            });\r\n            this.ping();\r\n        }\r\n        Object.defineProperty(GW3ProtocolImpl.prototype, \"isLoggedIn\", {\r\n            get: function () {\r\n                return this._isLoggedIn;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GW3ProtocolImpl.prototype.processStringMessage = function (message) {\r\n            var _this = this;\r\n            var msg = JSON.parse(message, function (key, value) {\r\n                if (typeof value !== \"string\") {\r\n                    return value;\r\n                }\r\n                if (value.length < _this.dateMinLen) {\r\n                    return value;\r\n                }\r\n                if (value[0] !== _this.datePrefixFirstChar) {\r\n                    return value;\r\n                }\r\n                if (value.substring(0, _this.datePrefixLen) !== _this.datePrefix) {\r\n                    return value;\r\n                }\r\n                try {\r\n                    var milliseconds = parseInt(value.substring(_this.datePrefixLen, value.length), 10);\r\n                    if (isNaN(milliseconds)) {\r\n                        return value;\r\n                    }\r\n                    return new Date(milliseconds);\r\n                }\r\n                catch (ex) {\r\n                    return value;\r\n                }\r\n            });\r\n            return {\r\n                msg: msg,\r\n                msgType: msg.type,\r\n            };\r\n        };\r\n        GW3ProtocolImpl.prototype.createStringMessage = function (message) {\r\n            var oldToJson = Date.prototype.toJSON;\r\n            try {\r\n                var datePrefix_1 = this.datePrefix;\r\n                Date.prototype.toJSON = function () {\r\n                    return datePrefix_1 + this.getTime();\r\n                };\r\n                var result = JSON.stringify(message);\r\n                return result;\r\n            }\r\n            finally {\r\n                Date.prototype.toJSON = oldToJson;\r\n            }\r\n        };\r\n        GW3ProtocolImpl.prototype.processObjectMessage = function (message) {\r\n            if (!message.type) {\r\n                throw new Error(\"Object should have type property\");\r\n            }\r\n            return {\r\n                msg: message,\r\n                msgType: message.type,\r\n            };\r\n        };\r\n        GW3ProtocolImpl.prototype.createObjectMessage = function (message) {\r\n            return message;\r\n        };\r\n        GW3ProtocolImpl.prototype.login = function (config, reconnect) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var authentication, token, e_1, _a, helloMsg, sendOptions, welcomeMsg, msg, token, _b, err_1;\r\n                return __generator$1(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            this.logger.debug(\"logging in...\");\r\n                            this.loginConfig = config;\r\n                            if (!this.loginConfig) {\r\n                                this.loginConfig = { username: \"\", password: \"\" };\r\n                            }\r\n                            this.shouldTryLogin = true;\r\n                            authentication = {};\r\n                            this.connection.gatewayToken = config.gatewayToken;\r\n                            if (!config.gatewayToken) return [3, 5];\r\n                            if (!reconnect) return [3, 4];\r\n                            _c.label = 1;\r\n                        case 1:\r\n                            _c.trys.push([1, 3, , 4]);\r\n                            return [4, this.getNewGWToken()];\r\n                        case 2:\r\n                            token = _c.sent();\r\n                            config.gatewayToken = token;\r\n                            return [3, 4];\r\n                        case 3:\r\n                            e_1 = _c.sent();\r\n                            this.logger.warn(\"failed to get GW token when reconnecting \" + ((e_1 === null || e_1 === void 0 ? void 0 : e_1.message) || e_1));\r\n                            return [3, 4];\r\n                        case 4:\r\n                            authentication.method = \"gateway-token\";\r\n                            authentication.token = config.gatewayToken;\r\n                            this.connection.gatewayToken = config.gatewayToken;\r\n                            return [3, 10];\r\n                        case 5:\r\n                            if (!(config.flowName === \"sspi\")) return [3, 9];\r\n                            authentication.provider = \"win\";\r\n                            authentication.method = \"access-token\";\r\n                            if (!(config.flowCallback && config.sessionId)) return [3, 7];\r\n                            _a = authentication;\r\n                            return [4, config.flowCallback(config.sessionId, null)];\r\n                        case 6:\r\n                            _a.token =\r\n                                (_c.sent())\r\n                                    .data\r\n                                    .toString(\"base64\");\r\n                            return [3, 8];\r\n                        case 7: throw new Error(\"Invalid SSPI config\");\r\n                        case 8: return [3, 10];\r\n                        case 9:\r\n                            if (config.token) {\r\n                                authentication.method = \"access-token\";\r\n                                authentication.token = config.token;\r\n                            }\r\n                            else if (config.username) {\r\n                                authentication.method = \"secret\";\r\n                                authentication.login = config.username;\r\n                                authentication.secret = config.password;\r\n                            }\r\n                            else {\r\n                                throw new Error(\"invalid auth message\" + JSON.stringify(config));\r\n                            }\r\n                            _c.label = 10;\r\n                        case 10:\r\n                            helloMsg = {\r\n                                type: \"hello\",\r\n                                identity: this.settings.identity,\r\n                                authentication: authentication\r\n                            };\r\n                            if (config.sessionId) {\r\n                                helloMsg.request_id = config.sessionId;\r\n                            }\r\n                            this.globalDomain = domainSession(\"global\", this.connection, this.logger.subLogger(\"global-domain\"), [\r\n                                \"welcome\",\r\n                                \"token\",\r\n                                \"authentication-request\"\r\n                            ]);\r\n                            sendOptions = { skipPeerId: true };\r\n                            if (this.initialLogin) {\r\n                                sendOptions.retryInterval = this.settings.reconnectInterval;\r\n                                sendOptions.maxRetries = this.settings.reconnectAttempts;\r\n                            }\r\n                            _c.label = 11;\r\n                        case 11:\r\n                            _c.trys.push([11, 19, 20, 21]);\r\n                            welcomeMsg = void 0;\r\n                            _c.label = 12;\r\n                        case 12:\r\n                            return [4, this.globalDomain.send(helloMsg, undefined, sendOptions)];\r\n                        case 13:\r\n                            msg = _c.sent();\r\n                            if (!(msg.type === \"authentication-request\")) return [3, 16];\r\n                            token = Buffer.from(msg.authentication.token, \"base64\");\r\n                            if (!(config.flowCallback && config.sessionId)) return [3, 15];\r\n                            _b = helloMsg.authentication;\r\n                            return [4, config.flowCallback(config.sessionId, token)];\r\n                        case 14:\r\n                            _b.token =\r\n                                (_c.sent())\r\n                                    .data\r\n                                    .toString(\"base64\");\r\n                            _c.label = 15;\r\n                        case 15:\r\n                            helloMsg.request_id = config.sessionId;\r\n                            return [3, 12];\r\n                        case 16:\r\n                            if (msg.type === \"welcome\") {\r\n                                welcomeMsg = msg;\r\n                                return [3, 18];\r\n                            }\r\n                            else if (msg.type === \"error\") {\r\n                                throw new Error(\"Authentication failed: \" + msg.reason);\r\n                            }\r\n                            else {\r\n                                throw new Error(\"Unexpected message type during authentication: \" + msg.type);\r\n                            }\r\n                        case 17: return [3, 12];\r\n                        case 18:\r\n                            this.initialLogin = false;\r\n                            this.logger.debug(\"login successful with peerId \" + welcomeMsg.peer_id);\r\n                            this.connection.peerId = welcomeMsg.peer_id;\r\n                            this.connection.resolvedIdentity = welcomeMsg.resolved_identity;\r\n                            this.connection.availableDomains = welcomeMsg.available_domains;\r\n                            if (welcomeMsg.options) {\r\n                                this.connection.token = welcomeMsg.options.access_token;\r\n                                this.connection.info = welcomeMsg.options.info;\r\n                            }\r\n                            this.setLoggedIn(true);\r\n                            return [2, welcomeMsg.resolved_identity];\r\n                        case 19:\r\n                            err_1 = _c.sent();\r\n                            this.logger.error(\"error sending hello message - \" + (err_1.message || err_1.msg || err_1.reason || err_1), err_1);\r\n                            throw err_1;\r\n                        case 20:\r\n                            if (config && config.flowCallback && config.sessionId) {\r\n                                config.flowCallback(config.sessionId, null);\r\n                            }\r\n                            return [7];\r\n                        case 21: return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GW3ProtocolImpl.prototype.logout = function () {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var promises;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            this.logger.debug(\"logging out...\");\r\n                            this.shouldTryLogin = false;\r\n                            if (this.pingTimer) {\r\n                                clearTimeout(this.pingTimer);\r\n                            }\r\n                            promises = this.sessions.map(function (session) {\r\n                                session.leave();\r\n                            });\r\n                            return [4, Promise.all(promises)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GW3ProtocolImpl.prototype.loggedIn = function (callback) {\r\n            if (this._isLoggedIn) {\r\n                callback();\r\n            }\r\n            return this.registry.add(\"onLoggedIn\", callback);\r\n        };\r\n        GW3ProtocolImpl.prototype.domain = function (domainName, domainLogger, successMessages, errorMessages) {\r\n            var session = this.sessions.filter(function (s) { return s.domain === domainName; })[0];\r\n            if (!session) {\r\n                session = domainSession(domainName, this.connection, domainLogger, successMessages, errorMessages);\r\n                this.sessions.push(session);\r\n            }\r\n            return session;\r\n        };\r\n        GW3ProtocolImpl.prototype.handleDisconnected = function () {\r\n            var _this = this;\r\n            this.setLoggedIn(false);\r\n            var tryToLogin = this.shouldTryLogin;\r\n            if (tryToLogin && this.initialLogin) {\r\n                if (this.initialLoginAttempts <= 0) {\r\n                    return;\r\n                }\r\n                this.initialLoginAttempts--;\r\n            }\r\n            this.logger.debug(\"disconnected - will try new login?\" + this.shouldTryLogin);\r\n            if (this.shouldTryLogin) {\r\n                if (!this.loginConfig) {\r\n                    throw new Error(\"no login info\");\r\n                }\r\n                this.connection.login(this.loginConfig, true)\r\n                    .catch(function () {\r\n                    setTimeout(_this.handleDisconnected.bind(_this), _this.settings.reconnectInterval || 1000);\r\n                });\r\n            }\r\n        };\r\n        GW3ProtocolImpl.prototype.setLoggedIn = function (value) {\r\n            this._isLoggedIn = value;\r\n            if (this._isLoggedIn) {\r\n                this.registry.execute(\"onLoggedIn\");\r\n            }\r\n        };\r\n        GW3ProtocolImpl.prototype.ping = function () {\r\n            var _this = this;\r\n            if (!this.shouldTryLogin) {\r\n                return;\r\n            }\r\n            if (this._isLoggedIn) {\r\n                this.connection.send({ type: \"ping\" });\r\n            }\r\n            this.pingTimer = setTimeout(function () {\r\n                _this.ping();\r\n            }, 30 * 1000);\r\n        };\r\n        GW3ProtocolImpl.prototype.authToken = function () {\r\n            var createTokenReq = {\r\n                type: \"create-token\"\r\n            };\r\n            if (!this.globalDomain) {\r\n                return Promise.reject(new Error(\"no global domain session\"));\r\n            }\r\n            return this.globalDomain.send(createTokenReq)\r\n                .then(function (res) {\r\n                return res.token;\r\n            });\r\n        };\r\n        GW3ProtocolImpl.prototype.getNewGWToken = function () {\r\n            if (typeof window !== undefined) {\r\n                var glue42gd = window.glue42gd;\r\n                if (glue42gd) {\r\n                    return glue42gd.getGWToken();\r\n                }\r\n            }\r\n            return Promise.reject(new Error(\"not running in GD\"));\r\n        };\r\n        return GW3ProtocolImpl;\r\n    }());\n\n    var MessageReplayerImpl = (function () {\r\n        function MessageReplayerImpl(specs) {\r\n            this.specsNames = [];\r\n            this.messages = {};\r\n            this.subs = {};\r\n            this.subsRefCount = {};\r\n            this.specs = {};\r\n            for (var _i = 0, specs_1 = specs; _i < specs_1.length; _i++) {\r\n                var spec = specs_1[_i];\r\n                this.specs[spec.name] = spec;\r\n                this.specsNames.push(spec.name);\r\n            }\r\n        }\r\n        MessageReplayerImpl.prototype.init = function (connection) {\r\n            var _this = this;\r\n            this.connection = connection;\r\n            for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n                var name_1 = _a[_i];\r\n                var _loop_1 = function (type) {\r\n                    var refCount = this_1.subsRefCount[type];\r\n                    if (!refCount) {\r\n                        refCount = 0;\r\n                    }\r\n                    refCount += 1;\r\n                    this_1.subsRefCount[type] = refCount;\r\n                    if (refCount > 1) {\r\n                        return \"continue\";\r\n                    }\r\n                    var sub = connection.on(type, function (msg) { return _this.processMessage(type, msg); });\r\n                    this_1.subs[type] = sub;\r\n                };\r\n                var this_1 = this;\r\n                for (var _b = 0, _c = this.specs[name_1].types; _b < _c.length; _b++) {\r\n                    var type = _c[_b];\r\n                    _loop_1(type);\r\n                }\r\n            }\r\n        };\r\n        MessageReplayerImpl.prototype.processMessage = function (type, msg) {\r\n            if (this.isDone || !msg) {\r\n                return;\r\n            }\r\n            for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n                var name_2 = _a[_i];\r\n                if (this.specs[name_2].types.indexOf(type) !== -1) {\r\n                    var messages = this.messages[name_2] || [];\r\n                    this.messages[name_2] = messages;\r\n                    messages.push(msg);\r\n                }\r\n            }\r\n        };\r\n        MessageReplayerImpl.prototype.drain = function (name, callback) {\r\n            var _a;\r\n            if (callback) {\r\n                (this.messages[name] || []).forEach(callback);\r\n            }\r\n            delete this.messages[name];\r\n            for (var _i = 0, _b = this.specs[name].types; _i < _b.length; _i++) {\r\n                var type = _b[_i];\r\n                this.subsRefCount[type] -= 1;\r\n                if (this.subsRefCount[type] <= 0) {\r\n                    (_a = this.connection) === null || _a === void 0 ? void 0 : _a.off(this.subs[type]);\r\n                    delete this.subs[type];\r\n                    delete this.subsRefCount[type];\r\n                }\r\n            }\r\n            delete this.specs[name];\r\n            if (!this.specs.length) {\r\n                this.isDone = true;\r\n            }\r\n        };\r\n        return MessageReplayerImpl;\r\n    }());\n\n    var PromisePlus = function (executor, timeoutMilliseconds, timeoutMessage) {\r\n        return new Promise(function (resolve, reject) {\r\n            var timeout = setTimeout(function () {\r\n                var message = timeoutMessage || \"Promise timeout hit: \" + timeoutMilliseconds;\r\n                reject(message);\r\n            }, timeoutMilliseconds);\r\n            var providedPromise = new Promise(executor);\r\n            providedPromise\r\n                .then(function (result) {\r\n                clearTimeout(timeout);\r\n                resolve(result);\r\n            })\r\n                .catch(function (error) {\r\n                clearTimeout(timeout);\r\n                reject(error);\r\n            });\r\n        });\r\n    };\n\n    var WebPlatformTransport = (function () {\r\n        function WebPlatformTransport(settings, logger, identity) {\r\n            this.settings = settings;\r\n            this.logger = logger;\r\n            this.identity = identity;\r\n            this.parentReady = false;\r\n            this.iAmConnected = false;\r\n            this.rejected = false;\r\n            this.children = [];\r\n            this.parentPingTimeout = 3000;\r\n            this.connectionRequestTimeout = 5000;\r\n            this.defaultTargetString = \"*\";\r\n            this.registry = lib();\r\n            this.messages = {\r\n                connectionAccepted: { name: \"connectionAccepted\", handle: this.handleConnectionAccepted.bind(this) },\r\n                connectionRejected: { name: \"connectionRejected\", handle: this.handleConnectionRejected.bind(this) },\r\n                connectionRequest: { name: \"connectionRequest\", handle: this.handleConnectionRequest.bind(this) },\r\n                parentReady: { name: \"parentReady\", handle: this.handleParentReady.bind(this) },\r\n                parentPing: { name: \"parentPing\", handle: this.handleParentPing.bind(this) },\r\n                platformPing: { name: \"platformPing\", handle: this.handlePlatformPing.bind(this) },\r\n                platformUnload: { name: \"platformUnload\", handle: this.handlePlatformUnload.bind(this) },\r\n                platformReady: { name: \"platformReady\", handle: this.handlePlatformReady.bind(this) },\r\n                clientUnload: { name: \"clientUnload\", handle: this.handleClientUnload.bind(this) }\r\n            };\r\n            this.setUpMessageListener();\r\n            this.setUpUnload();\r\n            if (!this.settings.port) {\r\n                this.parent = window.opener || window.top;\r\n                this.parentType = window.opener ? \"opener\" :\r\n                    window.name.indexOf(\"#wsp\") !== -1 ? \"workspace\" : \"top\";\r\n            }\r\n        }\r\n        Object.defineProperty(WebPlatformTransport.prototype, \"transportWindowId\", {\r\n            get: function () {\r\n                return this.publicWindowId;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WebPlatformTransport.prototype.sendObject = function (msg) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                return __generator$1(this, function (_a) {\r\n                    if (!this.port) {\r\n                        throw new Error(\"Cannot send message, because the port was not opened yet\");\r\n                    }\r\n                    this.port.postMessage(msg);\r\n                    return [2];\r\n                });\r\n            });\r\n        };\r\n        Object.defineProperty(WebPlatformTransport.prototype, \"isObjectBasedTransport\", {\r\n            get: function () {\r\n                return true;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WebPlatformTransport.prototype.onMessage = function (callback) {\r\n            return this.registry.add(\"onMessage\", callback);\r\n        };\r\n        WebPlatformTransport.prototype.send = function () {\r\n            return Promise.reject(\"not supported\");\r\n        };\r\n        WebPlatformTransport.prototype.onConnectedChanged = function (callback) {\r\n            return this.registry.add(\"onConnectedChanged\", callback);\r\n        };\r\n        WebPlatformTransport.prototype.open = function () {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            this.logger.debug(\"opening a connection to the web platform gateway.\");\r\n                            return [4, this.connect()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this.notifyStatusChanged(true);\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        WebPlatformTransport.prototype.close = function () {\r\n            return Promise.resolve();\r\n        };\r\n        WebPlatformTransport.prototype.name = function () {\r\n            return \"web-platform\";\r\n        };\r\n        WebPlatformTransport.prototype.reconnect = function () {\r\n            return Promise.resolve();\r\n        };\r\n        WebPlatformTransport.prototype.connect = function () {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var _this = this;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (this.parentReady) {\r\n                                this.logger.debug(\"cancelling connection attempt, because this client's parent has already given a ready signal\");\r\n                                return [2];\r\n                            }\r\n                            if (this.settings.port) {\r\n                                this.logger.debug(\"opening an internal web platform connection\");\r\n                                this.port = this.settings.port;\r\n                                this.publicWindowId = this.settings.windowId;\r\n                                if (this.identity) {\r\n                                    this.identity.windowId = this.publicWindowId;\r\n                                }\r\n                                this.port.onmessage = function (event) { return _this.registry.execute(\"onMessage\", event.data); };\r\n                                this.logger.debug(\"internal web platform connection completed\");\r\n                                return [2];\r\n                            }\r\n                            if (!this.parentType || !this.parent) {\r\n                                throw new Error(\"Cannot initiate a connection, because there is no opener, no top and no port.\");\r\n                            }\r\n                            this.logger.debug(\"opening a \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client web platform connection\");\r\n                            return [4, this.waitParent(this.parent, this.parentType)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [4, this.initiateRemoteConnection(this.parent, this.parentType)];\r\n                        case 2:\r\n                            _a.sent();\r\n                            this.logger.debug(\"the \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client is connected\");\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        WebPlatformTransport.prototype.initiateRemoteConnection = function (target, parentType) {\r\n            var _this = this;\r\n            return PromisePlus(function (resolve, reject) {\r\n                _this.connectionResolve = resolve;\r\n                _this.connectionReject = reject;\r\n                _this.myClientId = shortid();\r\n                var bridgeInstanceId = _this.parentType === \"workspace\" ? window.name.substring(0, window.name.indexOf(\"#wsp\")) : window.name;\r\n                var request = {\r\n                    glue42core: {\r\n                        type: _this.messages.connectionRequest.name,\r\n                        clientId: _this.myClientId,\r\n                        clientType: parentType === \"top\" || parentType === \"workspace\" ? \"grandChild\" : \"child\",\r\n                        bridgeInstanceId: bridgeInstanceId\r\n                    }\r\n                };\r\n                _this.logger.debug(\"sending connection request to \" + parentType);\r\n                target.postMessage(request, _this.defaultTargetString);\r\n            }, this.connectionRequestTimeout, \"The connection to the opener/top window timed out\");\r\n        };\r\n        WebPlatformTransport.prototype.waitParent = function (target, parentType) {\r\n            var _this = this;\r\n            return PromisePlus(function (resolve) {\r\n                _this.parentPingResolve = resolve;\r\n                var message = {\r\n                    glue42core: {\r\n                        type: parentType === \"opener\" ? _this.messages.platformPing.name : _this.messages.parentPing.name\r\n                    }\r\n                };\r\n                _this.logger.debug(\"checking for \" + parentType + \" window availability\");\r\n                target.postMessage(message, _this.defaultTargetString);\r\n            }, this.parentPingTimeout, \"Cannot initiate glue, because this window was not opened or created by a glue client\");\r\n        };\r\n        WebPlatformTransport.prototype.setUpMessageListener = function () {\r\n            var _this = this;\r\n            if (this.settings.port) {\r\n                this.logger.debug(\"skipping generic message listener, because this is an internal client\");\r\n                return;\r\n            }\r\n            window.addEventListener(\"message\", function (event) {\r\n                var _a;\r\n                var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n                if (!data || _this.rejected) {\r\n                    return;\r\n                }\r\n                if (!_this.checkMessageTypeValid(data.type)) {\r\n                    _this.logger.error(\"cannot handle the incoming glue42 core message, because the type is invalid: \" + data.type);\r\n                    return;\r\n                }\r\n                var messageType = data.type;\r\n                _this.logger.debug(\"received valid glue42core message of type: \" + messageType);\r\n                _this.messages[messageType].handle(event);\r\n            });\r\n        };\r\n        WebPlatformTransport.prototype.setUpUnload = function () {\r\n            var _this = this;\r\n            if (this.settings.port) {\r\n                this.logger.debug(\"skipping unload event listener, because this is an internal client\");\r\n                return;\r\n            }\r\n            window.addEventListener(\"beforeunload\", function () {\r\n                var _a, _b;\r\n                var message = {\r\n                    glue42core: {\r\n                        type: _this.messages.clientUnload.name,\r\n                        data: {\r\n                            clientId: _this.myClientId,\r\n                            ownWindowId: (_a = _this.identity) === null || _a === void 0 ? void 0 : _a.windowId\r\n                        }\r\n                    }\r\n                };\r\n                if (_this.parent) {\r\n                    _this.parent.postMessage(message, _this.defaultTargetString);\r\n                }\r\n                (_b = _this.port) === null || _b === void 0 ? void 0 : _b.postMessage(message);\r\n            });\r\n        };\r\n        WebPlatformTransport.prototype.handleParentReady = function () {\r\n            this.logger.debug(\"handling the ready signal from the parent, by resoling the pending promise.\");\r\n            this.parentReady = true;\r\n            if (this.parentPingResolve) {\r\n                this.parentPingResolve();\r\n                delete this.parentPingResolve;\r\n                return;\r\n            }\r\n            this.logger.debug(\"silently handling the ready signal from the top parent, because there is no defined promise\");\r\n        };\r\n        WebPlatformTransport.prototype.handlePlatformReady = function () {\r\n            this.logger.debug(\"the web platform gave the ready signal\");\r\n            this.parentReady = true;\r\n            if (this.parentPingResolve) {\r\n                this.parentPingResolve();\r\n                delete this.parentPingResolve;\r\n                return;\r\n            }\r\n            this.logger.debug(\"silently handling the ready signal from the top parent, because there is no defined promise\");\r\n        };\r\n        WebPlatformTransport.prototype.handleConnectionAccepted = function (event) {\r\n            var _a;\r\n            var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n            if (this.myClientId === data.clientId) {\r\n                return this.handleAcceptanceOfMyRequest(data);\r\n            }\r\n            return this.handleAcceptanceOfGrandChildRequest(data, event);\r\n        };\r\n        WebPlatformTransport.prototype.handleAcceptanceOfMyRequest = function (data) {\r\n            var _this = this;\r\n            this.logger.debug(\"handling a connection accepted signal targeted at me.\");\r\n            if (!data.port) {\r\n                this.logger.error(\"cannot set up my connection, because I was not provided with a port\");\r\n                return;\r\n            }\r\n            this.publicWindowId = this.parentType === \"opener\" ? window.name :\r\n                this.parentType === \"top\" ? data.parentWindowId :\r\n                    window.name.substring(0, window.name.indexOf(\"#wsp\"));\r\n            if (this.identity && this.parentType !== \"top\") {\r\n                this.identity.windowId = this.publicWindowId;\r\n            }\r\n            if (this.identity && data.appName) {\r\n                this.identity.application = data.appName;\r\n                this.identity.applicationName = data.appName;\r\n            }\r\n            this.port = data.port;\r\n            this.port.onmessage = function (e) { return _this.registry.execute(\"onMessage\", e.data); };\r\n            if (this.connectionResolve) {\r\n                this.logger.debug(\"my connection is set up, calling the connection resolve.\");\r\n                this.connectionResolve();\r\n                delete this.connectionResolve;\r\n                return;\r\n            }\r\n            this.logger.error(\"unable to call the connection resolve, because no connection promise was found\");\r\n        };\r\n        WebPlatformTransport.prototype.handleAcceptanceOfGrandChildRequest = function (data, event) {\r\n            this.logger.debug(\"handling a connection accepted signal targeted at a grandchild: \" + data.clientId);\r\n            var child = this.children.find(function (c) { return c.grandChildId === data.clientId; });\r\n            if (!child) {\r\n                this.logger.error(\"cannot handle connection accepted for grandchild: \" + data.clientId + \", because there is no grandchild with this id\");\r\n                return;\r\n            }\r\n            child.connected = true;\r\n            this.logger.debug(\"the grandchild connection for \" + data.clientId + \" is set up, forwarding the success message and the gateway port\");\r\n            data.parentWindowId = this.publicWindowId;\r\n            child.source.postMessage(event.data, child.origin, [data.port]);\r\n            return;\r\n        };\r\n        WebPlatformTransport.prototype.handleConnectionRejected = function () {\r\n            this.logger.debug(\"handling a connection rejection. Most likely the reason is that this window was not created by a glue API call\");\r\n            if (this.connectionReject) {\r\n                this.connectionReject(\"The platform connection was rejected. Most likely because this window was not created by a glue API call\");\r\n                delete this.connectionReject;\r\n            }\r\n        };\r\n        WebPlatformTransport.prototype.handleConnectionRequest = function (event) {\r\n            var source = event.source;\r\n            var data = event.data.glue42core;\r\n            if (!data.clientType || data.clientType !== \"grandChild\") {\r\n                return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source was not opened by a glue API call\");\r\n            }\r\n            if (!data.clientId) {\r\n                return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source did not provide a valid id\");\r\n            }\r\n            if (this.parentType !== \"opener\" || !this.parent) {\r\n                return this.rejectConnectionRequest(source, event.origin, \"Cannot forward the connection request, because no direct connection to the platform was found\");\r\n            }\r\n            this.logger.debug(\"handling a connection request for a grandchild: \" + data.clientId);\r\n            this.children.push({ grandChildId: data.clientId, source: source, connected: false, origin: event.origin });\r\n            this.logger.debug(\"grandchild: \" + data.clientId + \" is prepared, forwarding connection request to the platform\");\r\n            this.parent.postMessage(event.data, this.defaultTargetString);\r\n        };\r\n        WebPlatformTransport.prototype.handleParentPing = function (event) {\r\n            if (!this.parentReady) {\r\n                this.logger.debug(\"my parent is not ready, I am ignoring the parent ping\");\r\n                return;\r\n            }\r\n            if (!this.iAmConnected) {\r\n                this.logger.debug(\"i am not fully connected yet, I am ignoring the parent ping\");\r\n                return;\r\n            }\r\n            var message = {\r\n                glue42core: {\r\n                    type: this.messages.parentReady.name\r\n                }\r\n            };\r\n            var source = event.source;\r\n            this.logger.debug(\"responding to a parent ping with a ready message\");\r\n            source.postMessage(message, event.origin);\r\n        };\r\n        WebPlatformTransport.prototype.handlePlatformUnload = function (event) {\r\n            this.logger.debug(\"detected a web platform unload\");\r\n            this.parentReady = false;\r\n            if (this.children.length) {\r\n                this.logger.debug(\"forwarding the platform unload to all known children and starting platform discovery polling\");\r\n                this.children.forEach(function (child) { return child.source.postMessage(event.data, child.origin); });\r\n            }\r\n            this.notifyStatusChanged(false, \"Gateway unloaded\");\r\n        };\r\n        WebPlatformTransport.prototype.handleClientUnload = function (event) {\r\n            var data = event.data.glue42core;\r\n            if (!data.clientId) {\r\n                this.logger.warn(\"cannot process grand child unload, because the provided id was not valid\");\r\n                return;\r\n            }\r\n            var foundChild = this.children.find(function (child) { return child.grandChildId === data.clientId; });\r\n            if (!foundChild) {\r\n                this.logger.warn(\"cannot process grand child unload, because this client is unaware of this grandchild\");\r\n                return;\r\n            }\r\n            this.logger.debug(\"handling grandchild unload for id: \" + data.clientId);\r\n            this.children = this.children.filter(function (child) { return child.grandChildId !== data.clientId; });\r\n        };\r\n        WebPlatformTransport.prototype.handlePlatformPing = function () {\r\n            this.logger.error(\"cannot handle platform ping, because this is not a platform calls handling component\");\r\n        };\r\n        WebPlatformTransport.prototype.notifyStatusChanged = function (status, reason) {\r\n            this.iAmConnected = status;\r\n            this.registry.execute(\"onConnectedChanged\", status, reason);\r\n        };\r\n        WebPlatformTransport.prototype.checkMessageTypeValid = function (typeToValidate) {\r\n            return typeof typeToValidate === \"string\" && !!this.messages[typeToValidate];\r\n        };\r\n        WebPlatformTransport.prototype.rejectConnectionRequest = function (source, origin, reason) {\r\n            this.rejected = true;\r\n            this.logger.error(reason);\r\n            var rejection = {\r\n                glue42core: {\r\n                    type: this.messages.connectionRejected.name\r\n                }\r\n            };\r\n            source.postMessage(rejection, origin);\r\n        };\r\n        return WebPlatformTransport;\r\n    }());\n\n    var Connection = (function () {\r\n        function Connection(settings, logger) {\r\n            this.settings = settings;\r\n            this.logger = logger;\r\n            this.messageHandlers = {};\r\n            this.ids = 1;\r\n            this.registry = lib();\r\n            this._connected = false;\r\n            this.isTrace = false;\r\n            settings = settings || {};\r\n            settings.reconnectAttempts = settings.reconnectAttempts || 10;\r\n            settings.reconnectInterval = settings.reconnectInterval || 1000;\r\n            if (settings.inproc) {\r\n                this.transport = new InProcTransport(settings.inproc, logger.subLogger(\"inMemory\"));\r\n            }\r\n            else if (settings.sharedWorker) {\r\n                this.transport = new SharedWorkerTransport(settings.sharedWorker, logger.subLogger(\"shared-worker\"));\r\n            }\r\n            else if (settings.webPlatform) {\r\n                this.transport = new WebPlatformTransport(settings.webPlatform, logger.subLogger(\"web-platform\"), settings.identity);\r\n            }\r\n            else if (settings.ws !== undefined) {\r\n                this.transport = new WS(settings, logger.subLogger(\"ws\"));\r\n            }\r\n            else {\r\n                throw new Error(\"No connection information specified\");\r\n            }\r\n            this.isTrace = logger.canPublish(\"trace\");\r\n            logger.debug(\"starting with \" + this.transport.name() + \" transport\");\r\n            this.protocol = new GW3ProtocolImpl(this, settings, logger.subLogger(\"protocol\"));\r\n            this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\r\n            this.transport.onMessage(this.handleTransportMessage.bind(this));\r\n            if (settings.replaySpecs && settings.replaySpecs.length) {\r\n                this.replayer = new MessageReplayerImpl(settings.replaySpecs);\r\n                this.replayer.init(this);\r\n            }\r\n        }\r\n        Object.defineProperty(Connection.prototype, \"protocolVersion\", {\r\n            get: function () {\r\n                var _a;\r\n                return (_a = this.protocol) === null || _a === void 0 ? void 0 : _a.protocolVersion;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Connection.prototype.send = function (message, options) {\r\n            if (this.transport.sendObject &&\r\n                this.transport.isObjectBasedTransport) {\r\n                var msg = this.protocol.createObjectMessage(message);\r\n                if (this.isTrace) {\r\n                    this.logger.trace(\">> \" + JSON.stringify(msg));\r\n                }\r\n                return this.transport.sendObject(msg, options);\r\n            }\r\n            else {\r\n                var strMessage = this.protocol.createStringMessage(message);\r\n                if (this.isTrace) {\r\n                    this.logger.trace(\">> \" + strMessage);\r\n                }\r\n                return this.transport.send(strMessage, options);\r\n            }\r\n        };\r\n        Connection.prototype.on = function (type, messageHandler) {\r\n            type = type.toLowerCase();\r\n            if (this.messageHandlers[type] === undefined) {\r\n                this.messageHandlers[type] = {};\r\n            }\r\n            var id = this.ids++;\r\n            this.messageHandlers[type][id] = messageHandler;\r\n            return {\r\n                type: type,\r\n                id: id,\r\n            };\r\n        };\r\n        Connection.prototype.off = function (info) {\r\n            delete this.messageHandlers[info.type.toLowerCase()][info.id];\r\n        };\r\n        Object.defineProperty(Connection.prototype, \"isConnected\", {\r\n            get: function () {\r\n                return this.protocol.isLoggedIn;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Connection.prototype.connected = function (callback) {\r\n            var _this = this;\r\n            return this.protocol.loggedIn(function () {\r\n                callback(_this.settings.ws || _this.settings.sharedWorker || \"\");\r\n            });\r\n        };\r\n        Connection.prototype.disconnected = function (callback) {\r\n            return this.registry.add(\"disconnected\", callback);\r\n        };\r\n        Connection.prototype.login = function (authRequest, reconnect) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var identity;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.transport.open()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            timer(\"connection\").mark(\"transport-opened\");\r\n                            identity = this.protocol.login(authRequest, reconnect);\r\n                            timer(\"connection\").mark(\"protocol-logged-in\");\r\n                            return [2, identity];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Connection.prototype.logout = function () {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.protocol.logout()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [4, this.transport.close()];\r\n                        case 2:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Connection.prototype.loggedIn = function (callback) {\r\n            return this.protocol.loggedIn(callback);\r\n        };\r\n        Connection.prototype.domain = function (domain, successMessages, errorMessages) {\r\n            return this.protocol.domain(domain, this.logger.subLogger(\"domain=\" + domain), successMessages, errorMessages);\r\n        };\r\n        Connection.prototype.authToken = function () {\r\n            return this.protocol.authToken();\r\n        };\r\n        Connection.prototype.reconnect = function () {\r\n            return this.transport.reconnect();\r\n        };\r\n        Connection.prototype.distributeMessage = function (message, type) {\r\n            var _this = this;\r\n            var handlers = this.messageHandlers[type.toLowerCase()];\r\n            if (handlers !== undefined) {\r\n                Object.keys(handlers).forEach(function (handlerId) {\r\n                    var handler = handlers[handlerId];\r\n                    if (handler !== undefined) {\r\n                        try {\r\n                            handler(message);\r\n                        }\r\n                        catch (error) {\r\n                            try {\r\n                                _this.logger.error(\"Message handler failed with \" + error.stack, error);\r\n                            }\r\n                            catch (loggerError) {\r\n                                console.log(\"Message handler failed\", error);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        Connection.prototype.handleConnectionChanged = function (connected) {\r\n            if (this._connected === connected) {\r\n                return;\r\n            }\r\n            this._connected = connected;\r\n            if (connected) {\r\n                this.registry.execute(\"connected\");\r\n            }\r\n            else {\r\n                this.registry.execute(\"disconnected\");\r\n            }\r\n        };\r\n        Connection.prototype.handleTransportMessage = function (msg) {\r\n            var msgObj;\r\n            if (typeof msg === \"string\") {\r\n                msgObj = this.protocol.processStringMessage(msg);\r\n            }\r\n            else {\r\n                msgObj = this.protocol.processObjectMessage(msg);\r\n            }\r\n            if (this.isTrace) {\r\n                this.logger.trace(\"<< \" + JSON.stringify(msgObj));\r\n            }\r\n            this.distributeMessage(msgObj.msg, msgObj.msgType);\r\n        };\r\n        return Connection;\r\n    }());\n\n    var order = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"off\"];\r\n    var Logger = (function () {\r\n        function Logger(name, parent, logFn) {\r\n            this.name = name;\r\n            this.parent = parent;\r\n            this.subLoggers = [];\r\n            this.logFn = console;\r\n            this.customLogFn = false;\r\n            this.name = name;\r\n            if (parent) {\r\n                this.path = parent.path + \".\" + name;\r\n            }\r\n            else {\r\n                this.path = name;\r\n            }\r\n            this.loggerFullName = \"[\" + this.path + \"]\";\r\n            this.includeTimeAndLevel = !logFn;\r\n            if (logFn) {\r\n                this.logFn = logFn;\r\n                this.customLogFn = true;\r\n            }\r\n        }\r\n        Logger.prototype.subLogger = function (name) {\r\n            var existingSub = this.subLoggers.filter(function (subLogger) {\r\n                return subLogger.name === name;\r\n            })[0];\r\n            if (existingSub !== undefined) {\r\n                return existingSub;\r\n            }\r\n            Object.keys(this).forEach(function (key) {\r\n                if (key === name) {\r\n                    throw new Error(\"This sub logger name is not allowed.\");\r\n                }\r\n            });\r\n            var sub = new Logger(name, this, this.customLogFn ? this.logFn : undefined);\r\n            this.subLoggers.push(sub);\r\n            return sub;\r\n        };\r\n        Logger.prototype.publishLevel = function (level) {\r\n            var _a;\r\n            if (level) {\r\n                this._publishLevel = level;\r\n            }\r\n            return this._publishLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.publishLevel());\r\n        };\r\n        Logger.prototype.consoleLevel = function (level) {\r\n            var _a;\r\n            if (level) {\r\n                this._consoleLevel = level;\r\n            }\r\n            return this._consoleLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.consoleLevel());\r\n        };\r\n        Logger.prototype.log = function (message, level, error) {\r\n            this.publishMessage(level || \"info\", message, error);\r\n        };\r\n        Logger.prototype.trace = function (message) {\r\n            this.log(message, \"trace\");\r\n        };\r\n        Logger.prototype.debug = function (message) {\r\n            this.log(message, \"debug\");\r\n        };\r\n        Logger.prototype.info = function (message) {\r\n            this.log(message, \"info\");\r\n        };\r\n        Logger.prototype.warn = function (message) {\r\n            this.log(message, \"warn\");\r\n        };\r\n        Logger.prototype.error = function (message, err) {\r\n            this.log(message, \"error\");\r\n        };\r\n        Logger.prototype.canPublish = function (level, compareWith) {\r\n            var levelIdx = order.indexOf(level);\r\n            var restrictionIdx = order.indexOf(compareWith || this.consoleLevel() || \"trace\");\r\n            return levelIdx >= restrictionIdx;\r\n        };\r\n        Logger.prototype.publishMessage = function (level, message, error) {\r\n            var loggerName = this.loggerFullName;\r\n            if (level === \"error\" && !error) {\r\n                var e = new Error();\r\n                if (e.stack) {\r\n                    message =\r\n                        message +\r\n                            \"\\n\" +\r\n                            e.stack\r\n                                .split(\"\\n\")\r\n                                .slice(3)\r\n                                .join(\"\\n\");\r\n                }\r\n            }\r\n            if (this.canPublish(level, this.publishLevel())) {\r\n                var interop = Logger.Interop;\r\n                if (interop) {\r\n                    try {\r\n                        if (interop.methods({ name: Logger.InteropMethodName }).length > 0) {\r\n                            interop.invoke(Logger.InteropMethodName, {\r\n                                msg: \"\" + message,\r\n                                logger: loggerName,\r\n                                level: level\r\n                            });\r\n                        }\r\n                    }\r\n                    catch (_a) {\r\n                    }\r\n                }\r\n            }\r\n            if (this.canPublish(level)) {\r\n                var prefix = \"\";\r\n                if (this.includeTimeAndLevel) {\r\n                    var date = new Date();\r\n                    var time = date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds() + \":\" + date.getMilliseconds();\r\n                    prefix = \"[\" + time + \"] [\" + level + \"] \";\r\n                }\r\n                var toPrint = \"\" + prefix + loggerName + \": \" + message;\r\n                switch (level) {\r\n                    case \"trace\":\r\n                        this.logFn.debug(toPrint);\r\n                        break;\r\n                    case \"debug\":\r\n                        if (this.logFn.debug) {\r\n                            this.logFn.debug(toPrint);\r\n                        }\r\n                        else {\r\n                            this.logFn.log(toPrint);\r\n                        }\r\n                        break;\r\n                    case \"info\":\r\n                        this.logFn.info(toPrint);\r\n                        break;\r\n                    case \"warn\":\r\n                        this.logFn.warn(toPrint);\r\n                        break;\r\n                    case \"error\":\r\n                        this.logFn.error(toPrint, error);\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        Logger.InteropMethodName = \"T42.AppLogger.Log\";\r\n        return Logger;\r\n    }());\n\n    var GW_MESSAGE_CREATE_CONTEXT = \"create-context\";\r\n    var GW_MESSAGE_ACTIVITY_CREATED = \"created\";\r\n    var GW_MESSAGE_ACTIVITY_DESTROYED = \"destroyed\";\r\n    var GW_MESSAGE_CONTEXT_CREATED = \"context-created\";\r\n    var GW_MESSAGE_CONTEXT_ADDED = \"context-added\";\r\n    var GW_MESSAGE_SUBSCRIBE_CONTEXT = \"subscribe-context\";\r\n    var GW_MESSAGE_SUBSCRIBED_CONTEXT = \"subscribed-context\";\r\n    var GW_MESSAGE_UNSUBSCRIBE_CONTEXT = \"unsubscribe-context\";\r\n    var GW_MESSAGE_DESTROY_CONTEXT = \"destroy-context\";\r\n    var GW_MESSAGE_CONTEXT_DESTROYED = \"context-destroyed\";\r\n    var GW_MESSAGE_UPDATE_CONTEXT = \"update-context\";\r\n    var GW_MESSAGE_CONTEXT_UPDATED = \"context-updated\";\r\n    var GW_MESSAGE_JOINED_ACTIVITY = \"joined\";\n\n    var ContextMessageReplaySpec = {\r\n        get name() {\r\n            return \"context\";\r\n        },\r\n        get types() {\r\n            return [\r\n                GW_MESSAGE_CREATE_CONTEXT,\r\n                GW_MESSAGE_ACTIVITY_CREATED,\r\n                GW_MESSAGE_ACTIVITY_DESTROYED,\r\n                GW_MESSAGE_CONTEXT_CREATED,\r\n                GW_MESSAGE_CONTEXT_ADDED,\r\n                GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n                GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n                GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n                GW_MESSAGE_DESTROY_CONTEXT,\r\n                GW_MESSAGE_CONTEXT_DESTROYED,\r\n                GW_MESSAGE_UPDATE_CONTEXT,\r\n                GW_MESSAGE_CONTEXT_UPDATED,\r\n                GW_MESSAGE_JOINED_ACTIVITY\r\n            ];\r\n        }\r\n    };\n\n    var version = \"5.4.0\";\n\n    function prepareConfig (configuration, ext, glue42gd) {\r\n        var _a, _b, _c, _d, _e;\r\n        var nodeStartingContext;\r\n        if (Utils.isNode()) {\r\n            var startingContextString = process.env._GD_STARTING_CONTEXT_;\r\n            if (startingContextString) {\r\n                try {\r\n                    nodeStartingContext = JSON.parse(startingContextString);\r\n                }\r\n                catch (_f) {\r\n                }\r\n            }\r\n        }\r\n        function getConnection() {\r\n            var _a, _b, _c, _d, _e;\r\n            var gwConfig = configuration.gateway;\r\n            var protocolVersion = (_a = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.protocolVersion) !== null && _a !== void 0 ? _a : 3;\r\n            var reconnectInterval = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectInterval;\r\n            var reconnectAttempts = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectAttempts;\r\n            var defaultWs = \"ws://localhost:8385\";\r\n            var ws = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.ws;\r\n            var sharedWorker = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.sharedWorker;\r\n            var inproc = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.inproc;\r\n            var webPlatform = (_b = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.webPlatform) !== null && _b !== void 0 ? _b : undefined;\r\n            if (glue42gd) {\r\n                ws = glue42gd.gwURL;\r\n            }\r\n            if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwURL) {\r\n                ws = nodeStartingContext.gwURL;\r\n            }\r\n            if (!ws && !sharedWorker && !inproc) {\r\n                ws = defaultWs;\r\n            }\r\n            var instanceId;\r\n            var windowId;\r\n            var pid;\r\n            var environment;\r\n            var region;\r\n            var appName = getApplication();\r\n            var uniqueAppName = appName;\r\n            if (typeof glue42gd !== \"undefined\") {\r\n                windowId = glue42gd.windowId;\r\n                pid = glue42gd.pid;\r\n                if (glue42gd.env) {\r\n                    environment = glue42gd.env.env;\r\n                    region = glue42gd.env.region;\r\n                }\r\n                uniqueAppName = (_c = glue42gd.application) !== null && _c !== void 0 ? _c : \"glue-app\";\r\n                instanceId = glue42gd.appInstanceId;\r\n            }\r\n            else if (Utils.isNode()) {\r\n                pid = process.pid;\r\n                if (nodeStartingContext) {\r\n                    environment = nodeStartingContext.env;\r\n                    region = nodeStartingContext.region;\r\n                    instanceId = nodeStartingContext.instanceId;\r\n                }\r\n            }\r\n            else ;\r\n            var replaySpecs = (_e = (_d = configuration.gateway) === null || _d === void 0 ? void 0 : _d.replaySpecs) !== null && _e !== void 0 ? _e : [];\r\n            replaySpecs.push(ContextMessageReplaySpec);\r\n            return {\r\n                identity: {\r\n                    application: uniqueAppName,\r\n                    applicationName: appName,\r\n                    windowId: windowId,\r\n                    instance: instanceId,\r\n                    process: pid,\r\n                    region: region,\r\n                    environment: environment,\r\n                    api: ext.version || version\r\n                },\r\n                reconnectInterval: reconnectInterval,\r\n                ws: ws,\r\n                sharedWorker: sharedWorker,\r\n                webPlatform: webPlatform,\r\n                inproc: inproc,\r\n                protocolVersion: protocolVersion,\r\n                reconnectAttempts: reconnectAttempts,\r\n                replaySpecs: replaySpecs,\r\n            };\r\n        }\r\n        function getApplication() {\r\n            if (configuration.application) {\r\n                return configuration.application;\r\n            }\r\n            if (glue42gd) {\r\n                return glue42gd.applicationName;\r\n            }\r\n            var uid = shortid();\r\n            if (Utils.isNode()) {\r\n                if (nodeStartingContext) {\r\n                    return nodeStartingContext.applicationConfig.name;\r\n                }\r\n                return \"NodeJS\" + uid;\r\n            }\r\n            if (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\r\n                return document.title + (\" (\" + uid + \")\");\r\n            }\r\n            return uid;\r\n        }\r\n        function getAuth() {\r\n            var _a, _b, _c;\r\n            if (typeof configuration.auth === \"string\") {\r\n                return {\r\n                    token: configuration.auth\r\n                };\r\n            }\r\n            if (configuration.auth) {\r\n                return configuration.auth;\r\n            }\r\n            if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwToken) {\r\n                return {\r\n                    gatewayToken: nodeStartingContext.gwToken\r\n                };\r\n            }\r\n            if (((_a = configuration.gateway) === null || _a === void 0 ? void 0 : _a.webPlatform) || ((_b = configuration.gateway) === null || _b === void 0 ? void 0 : _b.inproc) || ((_c = configuration.gateway) === null || _c === void 0 ? void 0 : _c.sharedWorker)) {\r\n                return {\r\n                    username: \"glue42\", password: \"glue42\"\r\n                };\r\n            }\r\n        }\r\n        function getLogger() {\r\n            var _a, _b;\r\n            var config = configuration.logger;\r\n            var defaultLevel = \"warn\";\r\n            if (!config) {\r\n                config = defaultLevel;\r\n            }\r\n            var gdConsoleLevel;\r\n            if (glue42gd) {\r\n                gdConsoleLevel = glue42gd.consoleLogLevel;\r\n            }\r\n            if (typeof config === \"string\") {\r\n                return { console: gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config, publish: defaultLevel };\r\n            }\r\n            return {\r\n                console: (_a = gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config.console) !== null && _a !== void 0 ? _a : defaultLevel,\r\n                publish: (_b = config.publish) !== null && _b !== void 0 ? _b : defaultLevel\r\n            };\r\n        }\r\n        var connection = getConnection();\r\n        var application = getApplication();\r\n        if (typeof window !== \"undefined\") {\r\n            var windowAsAny = window;\r\n            var containerApplication = windowAsAny.htmlContainer ?\r\n                windowAsAny.htmlContainer.containerName + \".\" + windowAsAny.htmlContainer.application : (_a = windowAsAny === null || windowAsAny === void 0 ? void 0 : windowAsAny.glue42gd) === null || _a === void 0 ? void 0 : _a.application;\r\n            if (containerApplication) {\r\n                application = containerApplication;\r\n            }\r\n        }\r\n        return {\r\n            bus: (_b = configuration.bus) !== null && _b !== void 0 ? _b : false,\r\n            application: application,\r\n            auth: getAuth(),\r\n            logger: getLogger(),\r\n            connection: connection,\r\n            metrics: (_c = configuration.metrics) !== null && _c !== void 0 ? _c : true,\r\n            contexts: (_d = configuration.contexts) !== null && _d !== void 0 ? _d : true,\r\n            version: ext.version || version,\r\n            libs: (_e = ext.libs) !== null && _e !== void 0 ? _e : [],\r\n            customLogger: configuration.customLogger\r\n        };\r\n    }\n\n    var GW3ContextData = (function () {\r\n        function GW3ContextData(contextId, name, isAnnounced, activityId) {\r\n            this.updateCallbacks = {};\r\n            this.contextId = contextId;\r\n            this.name = name;\r\n            this.isAnnounced = isAnnounced;\r\n            this.activityId = activityId;\r\n            this.context = {};\r\n        }\r\n        GW3ContextData.prototype.hasCallbacks = function () {\r\n            return Object.keys(this.updateCallbacks).length > 0;\r\n        };\r\n        GW3ContextData.prototype.getState = function () {\r\n            if (this.isAnnounced && this.hasCallbacks()) {\r\n                return 3;\r\n            }\r\n            if (this.isAnnounced) {\r\n                return 2;\r\n            }\r\n            if (this.hasCallbacks()) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        };\r\n        return GW3ContextData;\r\n    }());\n\n    function applyContextDelta(context, delta, logger) {\r\n        try {\r\n            if (logger === null || logger === void 0 ? void 0 : logger.canPublish(\"trace\")) {\r\n                logger === null || logger === void 0 ? void 0 : logger.trace(\"applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context));\r\n            }\r\n            if (!delta) {\r\n                return context;\r\n            }\r\n            if (delta.reset) {\r\n                context = __assign$1({}, delta.reset);\r\n                return context;\r\n            }\r\n            context = deepClone(context, undefined);\r\n            if (delta.commands) {\r\n                for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                    var command = _a[_i];\r\n                    if (command.type === \"remove\") {\r\n                        deletePath(context, command.path);\r\n                    }\r\n                    else if (command.type === \"set\") {\r\n                        setValueToPath(context, command.value, command.path);\r\n                    }\r\n                }\r\n                return context;\r\n            }\r\n            var added_1 = delta.added;\r\n            var updated_1 = delta.updated;\r\n            var removed = delta.removed;\r\n            if (added_1) {\r\n                Object.keys(added_1).forEach(function (key) {\r\n                    context[key] = added_1[key];\r\n                });\r\n            }\r\n            if (updated_1) {\r\n                Object.keys(updated_1).forEach(function (key) {\r\n                    mergeObjectsProperties(key, context, updated_1);\r\n                });\r\n            }\r\n            if (removed) {\r\n                removed.forEach(function (key) {\r\n                    delete context[key];\r\n                });\r\n            }\r\n            return context;\r\n        }\r\n        catch (e) {\r\n            logger === null || logger === void 0 ? void 0 : logger.error(\"error applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context), e);\r\n            return context;\r\n        }\r\n    }\r\n    function deepClone(obj, hash) {\r\n        hash = hash || new WeakMap();\r\n        if (Object(obj) !== obj) {\r\n            return obj;\r\n        }\r\n        if (obj instanceof Set) {\r\n            return new Set(obj);\r\n        }\r\n        if (hash.has(obj)) {\r\n            return hash.get(obj);\r\n        }\r\n        var result = obj instanceof Date ? new Date(obj)\r\n            : obj instanceof RegExp ? new RegExp(obj.source, obj.flags)\r\n                : obj.constructor ? new obj.constructor()\r\n                    : Object.create(null);\r\n        hash.set(obj, result);\r\n        if (obj instanceof Map) {\r\n            Array.from(obj, function (_a) {\r\n                var key = _a[0], val = _a[1];\r\n                return result.set(key, deepClone(val, hash));\r\n            });\r\n        }\r\n        return Object.assign.apply(Object, __spreadArrays([result], Object.keys(obj).map(function (key) {\r\n            var _a;\r\n            return (_a = {}, _a[key] = deepClone(obj[key], hash), _a);\r\n        })));\r\n    }\r\n    var mergeObjectsProperties = function (key, what, withWhat) {\r\n        var right = withWhat[key];\r\n        if (right === undefined) {\r\n            return what;\r\n        }\r\n        var left = what[key];\r\n        if (!left || !right) {\r\n            what[key] = right;\r\n            return what;\r\n        }\r\n        if (typeof left === \"string\" ||\r\n            typeof left === \"number\" ||\r\n            typeof left === \"boolean\" ||\r\n            typeof right === \"string\" ||\r\n            typeof right === \"number\" ||\r\n            typeof right === \"boolean\" ||\r\n            Array.isArray(left) ||\r\n            Array.isArray(right)) {\r\n            what[key] = right;\r\n            return what;\r\n        }\r\n        what[key] = Object.assign({}, left, right);\r\n        return what;\r\n    };\r\n    function deepEqual(x, y) {\r\n        if (x === y) {\r\n            return true;\r\n        }\r\n        if (!(x instanceof Object) || !(y instanceof Object)) {\r\n            return false;\r\n        }\r\n        if (x.constructor !== y.constructor) {\r\n            return false;\r\n        }\r\n        for (var p in x) {\r\n            if (!x.hasOwnProperty(p)) {\r\n                continue;\r\n            }\r\n            if (!y.hasOwnProperty(p)) {\r\n                return false;\r\n            }\r\n            if (x[p] === y[p]) {\r\n                continue;\r\n            }\r\n            if (typeof (x[p]) !== \"object\") {\r\n                return false;\r\n            }\r\n            if (!deepEqual(x[p], y[p])) {\r\n                return false;\r\n            }\r\n        }\r\n        for (var p in y) {\r\n            if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function setValueToPath(obj, value, path) {\r\n        var pathArr = path.split(\".\");\r\n        var i;\r\n        for (i = 0; i < pathArr.length - 1; i++) {\r\n            if (!obj[pathArr[i]]) {\r\n                obj[pathArr[i]] = {};\r\n            }\r\n            if (typeof obj[pathArr[i]] !== \"object\") {\r\n                obj[pathArr[i]] = {};\r\n            }\r\n            obj = obj[pathArr[i]];\r\n        }\r\n        obj[pathArr[i]] = value;\r\n    }\r\n    function isSubset(superObj, subObj) {\r\n        return Object.keys(subObj).every(function (ele) {\r\n            if (typeof subObj[ele] === \"object\") {\r\n                return isSubset((superObj === null || superObj === void 0 ? void 0 : superObj[ele]) || {}, subObj[ele] || {});\r\n            }\r\n            return subObj[ele] === (superObj === null || superObj === void 0 ? void 0 : superObj[ele]);\r\n        });\r\n    }\r\n    function deletePath(obj, path) {\r\n        var pathArr = path.split(\".\");\r\n        var i;\r\n        for (i = 0; i < pathArr.length - 1; i++) {\r\n            if (!obj[pathArr[i]]) {\r\n                return;\r\n            }\r\n            obj = obj[pathArr[i]];\r\n        }\r\n        delete obj[pathArr[i]];\r\n    }\n\n    var GW3Bridge = (function () {\r\n        function GW3Bridge(config) {\r\n            var _this = this;\r\n            var _a;\r\n            this._contextNameToData = {};\r\n            this._gw3Subscriptions = [];\r\n            this._nextCallbackSubscriptionNumber = 0;\r\n            this._contextNameToId = {};\r\n            this._contextIdToName = {};\r\n            this._protocolVersion = undefined;\r\n            this._connection = config.connection;\r\n            this._logger = config.logger;\r\n            this._gw3Session = this._connection.domain(\"global\", [\r\n                GW_MESSAGE_CONTEXT_CREATED,\r\n                GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n                GW_MESSAGE_CONTEXT_DESTROYED,\r\n                GW_MESSAGE_CONTEXT_UPDATED,\r\n            ]);\r\n            this.subscribeToContextCreatedMessages();\r\n            this.subscribeToContextUpdatedMessages();\r\n            this.subscribeToContextDestroyedMessages();\r\n            (_a = this._connection.replayer) === null || _a === void 0 ? void 0 : _a.drain(ContextMessageReplaySpec.name, function (message) {\r\n                var type = message.type;\r\n                if (!type) {\r\n                    return;\r\n                }\r\n                if (type === GW_MESSAGE_CONTEXT_CREATED ||\r\n                    type === GW_MESSAGE_CONTEXT_ADDED ||\r\n                    type === GW_MESSAGE_ACTIVITY_CREATED) {\r\n                    _this.handleContextCreatedMessage(message);\r\n                }\r\n                else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\r\n                    type === GW_MESSAGE_CONTEXT_UPDATED ||\r\n                    type === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                    _this.handleContextUpdatedMessage(message);\r\n                }\r\n                else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\r\n                    type === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n                    _this.handleContextDestroyedMessage(message);\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(GW3Bridge.prototype, \"protocolVersion\", {\r\n            get: function () {\r\n                var _a;\r\n                if (!this._protocolVersion) {\r\n                    var contextsDomainInfo = this._connection.availableDomains.find(function (d) { return d.uri === \"context\"; });\r\n                    this._protocolVersion = (_a = contextsDomainInfo === null || contextsDomainInfo === void 0 ? void 0 : contextsDomainInfo.version) !== null && _a !== void 0 ? _a : 1;\r\n                }\r\n                return this._protocolVersion;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GW3Bridge.prototype, \"setPathSupported\", {\r\n            get: function () {\r\n                return this.protocolVersion >= 2;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GW3Bridge.prototype.dispose = function () {\r\n            for (var _i = 0, _a = this._gw3Subscriptions; _i < _a.length; _i++) {\r\n                var sub = _a[_i];\r\n                this._connection.off(sub);\r\n            }\r\n            this._gw3Subscriptions.length = 0;\r\n            for (var contextName in this._contextNameToData) {\r\n                if (this._contextNameToId.hasOwnProperty(contextName)) {\r\n                    delete this._contextNameToData[contextName];\r\n                }\r\n            }\r\n        };\r\n        GW3Bridge.prototype.createContext = function (name, data) {\r\n            var _this = this;\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_CREATE_CONTEXT,\r\n                domain: \"global\",\r\n                name: name,\r\n                data: data,\r\n                lifetime: \"retained\",\r\n            })\r\n                .then(function (createContextMsg) {\r\n                _this._contextNameToId[name] = createContextMsg.context_id;\r\n                _this._contextIdToName[createContextMsg.context_id] = name;\r\n                var contextData = _this._contextNameToData[name] || new GW3ContextData(createContextMsg.context_id, name, true, undefined);\r\n                contextData.isAnnounced = true;\r\n                contextData.name = name;\r\n                contextData.contextId = createContextMsg.context_id;\r\n                contextData.context = data;\r\n                _this._contextNameToData[name] = contextData;\r\n                return createContextMsg.context_id;\r\n            });\r\n        };\r\n        GW3Bridge.prototype.all = function () {\r\n            var _this = this;\r\n            return Object.keys(this._contextNameToData)\r\n                .filter(function (name) { return _this._contextNameToData[name].isAnnounced; });\r\n        };\r\n        GW3Bridge.prototype.update = function (name, delta) {\r\n            var _a;\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var contextData, currentContext, calculatedDelta;\r\n                var _this = this;\r\n                return __generator$1(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            contextData = this._contextNameToData[name];\r\n                            if (!contextData || !contextData.isAnnounced) {\r\n                                return [2, this.createContext(name, delta)];\r\n                            }\r\n                            currentContext = contextData.context;\r\n                            if (!!contextData.hasCallbacks()) return [3, 2];\r\n                            return [4, this.get(contextData.name)];\r\n                        case 1:\r\n                            currentContext = _b.sent();\r\n                            _b.label = 2;\r\n                        case 2:\r\n                            calculatedDelta = this.protocolVersion === 2 ?\r\n                                this.calculateContextDeltaV2(currentContext, delta) :\r\n                                this.calculateContextDeltaV1(currentContext, delta);\r\n                            if (!Object.keys(calculatedDelta.added).length\r\n                                && !Object.keys(calculatedDelta.updated).length\r\n                                && !calculatedDelta.removed.length\r\n                                && !((_a = calculatedDelta.commands) === null || _a === void 0 ? void 0 : _a.length)) {\r\n                                return [2, Promise.resolve()];\r\n                            }\r\n                            return [2, this._gw3Session\r\n                                    .send({\r\n                                    type: GW_MESSAGE_UPDATE_CONTEXT,\r\n                                    domain: \"global\",\r\n                                    context_id: contextData.contextId,\r\n                                    delta: calculatedDelta,\r\n                                }, {}, { skipPeerId: false })\r\n                                    .then(function (gwResponse) {\r\n                                    _this.handleUpdated(contextData, calculatedDelta, {\r\n                                        updaterId: gwResponse.peer_id\r\n                                    });\r\n                                })];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.set = function (name, data) {\r\n            var _this = this;\r\n            var contextData = this._contextNameToData[name];\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                return this.createContext(name, data);\r\n            }\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_UPDATE_CONTEXT,\r\n                domain: \"global\",\r\n                context_id: contextData.contextId,\r\n                delta: { reset: data },\r\n            }, {}, { skipPeerId: false })\r\n                .then(function (gwResponse) {\r\n                _this.handleUpdated(contextData, { reset: data, added: {}, removed: [], updated: {} }, { updaterId: gwResponse.peer_id });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.setPath = function (name, path, value) {\r\n            if (!this.setPathSupported) {\r\n                return Promise.reject(\"glue.contexts.setPath operation is not supported, use Glue42 3.10 or later\");\r\n            }\r\n            return this.setPaths(name, [{ path: path, value: value }]);\r\n        };\r\n        GW3Bridge.prototype.setPaths = function (name, pathValues) {\r\n            var _this = this;\r\n            if (!this.setPathSupported) {\r\n                return Promise.reject(\"glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later\");\r\n            }\r\n            var contextData = this._contextNameToData[name];\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                var obj = {};\r\n                for (var _i = 0, pathValues_1 = pathValues; _i < pathValues_1.length; _i++) {\r\n                    var pathValue = pathValues_1[_i];\r\n                    setValueToPath(obj, pathValue.value, pathValue.path);\r\n                }\r\n                return this.createContext(name, obj);\r\n            }\r\n            var commands = [];\r\n            for (var _a = 0, pathValues_2 = pathValues; _a < pathValues_2.length; _a++) {\r\n                var pathValue = pathValues_2[_a];\r\n                if (pathValue.value === null) {\r\n                    commands.push({ type: \"remove\", path: pathValue.path });\r\n                }\r\n                else {\r\n                    commands.push({ type: \"set\", path: pathValue.path, value: pathValue.value });\r\n                }\r\n            }\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_UPDATE_CONTEXT,\r\n                domain: \"global\",\r\n                context_id: contextData.contextId,\r\n                delta: { commands: commands }\r\n            }, {}, { skipPeerId: false })\r\n                .then(function (gwResponse) {\r\n                _this.handleUpdated(contextData, { added: {}, removed: [], updated: {}, commands: commands }, { updaterId: gwResponse.peer_id });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.get = function (name) {\r\n            var _this = this;\r\n            var _a;\r\n            var contextData = this._contextNameToData[name];\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                return Promise.resolve({});\r\n            }\r\n            if (contextData && !contextData.hasCallbacks()) {\r\n                return new Promise(function (resolve, _) { return __awaiter$1(_this, void 0, void 0, function () {\r\n                    var _this = this;\r\n                    return __generator$1(this, function (_a) {\r\n                        this.subscribe(name, function (data, _d, _r, un) {\r\n                            _this.unsubscribe(un);\r\n                            resolve(data);\r\n                        });\r\n                        return [2];\r\n                    });\r\n                }); });\r\n            }\r\n            var context = (_a = contextData === null || contextData === void 0 ? void 0 : contextData.context) !== null && _a !== void 0 ? _a : {};\r\n            return Promise.resolve(context);\r\n        };\r\n        GW3Bridge.prototype.subscribe = function (name, callback) {\r\n            var thisCallbackSubscriptionNumber = this._nextCallbackSubscriptionNumber;\r\n            this._nextCallbackSubscriptionNumber += 1;\r\n            var contextData = this._contextNameToData[name];\r\n            if (!contextData ||\r\n                !contextData.isAnnounced) {\r\n                contextData = contextData || new GW3ContextData(undefined, name, false, undefined);\r\n                this._contextNameToData[name] = contextData;\r\n                contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n                return Promise.resolve(thisCallbackSubscriptionNumber);\r\n            }\r\n            var hadCallbacks = contextData.hasCallbacks();\r\n            contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n            if (!hadCallbacks) {\r\n                if (!contextData.joinedActivity) {\r\n                    if (contextData.context && contextData.sentExplicitSubscription) {\r\n                        var clone = deepClone(contextData.context);\r\n                        callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                        return Promise.resolve(thisCallbackSubscriptionNumber);\r\n                    }\r\n                    return this.sendSubscribe(contextData)\r\n                        .then(function () { return thisCallbackSubscriptionNumber; });\r\n                }\r\n                else {\r\n                    var clone = deepClone(contextData.context);\r\n                    callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                    return Promise.resolve(thisCallbackSubscriptionNumber);\r\n                }\r\n            }\r\n            else {\r\n                var clone = deepClone(contextData.context);\r\n                callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                return Promise.resolve(thisCallbackSubscriptionNumber);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.unsubscribe = function (subscriptionKey) {\r\n            for (var _i = 0, _a = Object.keys(this._contextNameToData); _i < _a.length; _i++) {\r\n                var name_1 = _a[_i];\r\n                var contextId = this._contextNameToId[name_1];\r\n                var contextData = this._contextNameToData[name_1];\r\n                if (!contextData) {\r\n                    return;\r\n                }\r\n                var hadCallbacks = contextData.hasCallbacks();\r\n                delete contextData.updateCallbacks[subscriptionKey];\r\n                if (contextData.isAnnounced &&\r\n                    hadCallbacks &&\r\n                    !contextData.hasCallbacks() &&\r\n                    contextData.sentExplicitSubscription) {\r\n                    this.sendUnsubscribe(contextData);\r\n                }\r\n                if (!contextData.isAnnounced &&\r\n                    !contextData.hasCallbacks()) {\r\n                    delete this._contextNameToData[name_1];\r\n                }\r\n            }\r\n        };\r\n        GW3Bridge.prototype.destroy = function (name) {\r\n            var contextData = this._contextNameToData[name];\r\n            if (!contextData) {\r\n                return Promise.reject(\"context with \" + name + \" does not exist\");\r\n            }\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_DESTROY_CONTEXT,\r\n                domain: \"global\",\r\n                context_id: contextData.contextId,\r\n            }).then(function (_) { return undefined; });\r\n        };\r\n        GW3Bridge.prototype.handleUpdated = function (contextData, delta, extraData) {\r\n            var oldContext = contextData.context;\r\n            contextData.context = applyContextDelta(contextData.context, delta, this._logger);\r\n            if (this._contextNameToData[contextData.name] === contextData &&\r\n                !deepEqual(oldContext, contextData.context)) {\r\n                this.invokeUpdateCallbacks(contextData, delta, extraData);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.subscribeToContextCreatedMessages = function () {\r\n            var createdMessageTypes = [\r\n                GW_MESSAGE_CONTEXT_ADDED,\r\n                GW_MESSAGE_CONTEXT_CREATED,\r\n                GW_MESSAGE_ACTIVITY_CREATED,\r\n            ];\r\n            for (var _i = 0, createdMessageTypes_1 = createdMessageTypes; _i < createdMessageTypes_1.length; _i++) {\r\n                var createdMessageType = createdMessageTypes_1[_i];\r\n                var sub = this._connection.on(createdMessageType, this.handleContextCreatedMessage.bind(this));\r\n                this._gw3Subscriptions.push(sub);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.handleContextCreatedMessage = function (contextCreatedMsg) {\r\n            var createdMessageType = contextCreatedMsg.type;\r\n            if (createdMessageType === GW_MESSAGE_ACTIVITY_CREATED) {\r\n                this._contextNameToId[contextCreatedMsg.activity_id] = contextCreatedMsg.context_id;\r\n                this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.activity_id;\r\n            }\r\n            else if (createdMessageType === GW_MESSAGE_CONTEXT_ADDED) {\r\n                this._contextNameToId[contextCreatedMsg.name] = contextCreatedMsg.context_id;\r\n                this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.name;\r\n            }\r\n            else ;\r\n            var name = this._contextIdToName[contextCreatedMsg.context_id];\r\n            if (!name) {\r\n                throw new Error(\"Received created event for context with unknown name: \" + contextCreatedMsg.context_id);\r\n            }\r\n            if (!this._contextNameToId[name]) {\r\n                throw new Error(\"Received created event for context with unknown id: \" + contextCreatedMsg.context_id);\r\n            }\r\n            var contextData = this._contextNameToData[name];\r\n            if (contextData) {\r\n                if (contextData.isAnnounced) {\r\n                    return;\r\n                }\r\n                else {\r\n                    if (!contextData.hasCallbacks()) {\r\n                        throw new Error(\"Assertion failure: contextData.hasCallbacks()\");\r\n                    }\r\n                    contextData.isAnnounced = true;\r\n                    contextData.contextId = contextCreatedMsg.context_id;\r\n                    contextData.activityId = contextCreatedMsg.activity_id;\r\n                    if (!contextData.sentExplicitSubscription) {\r\n                        this.sendSubscribe(contextData);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this._contextNameToData[name] = contextData =\r\n                    new GW3ContextData(contextCreatedMsg.context_id, name, true, contextCreatedMsg.activity_id);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.subscribeToContextUpdatedMessages = function () {\r\n            var updatedMessageTypes = [\r\n                GW_MESSAGE_CONTEXT_UPDATED,\r\n                GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n                GW_MESSAGE_JOINED_ACTIVITY,\r\n            ];\r\n            for (var _i = 0, updatedMessageTypes_1 = updatedMessageTypes; _i < updatedMessageTypes_1.length; _i++) {\r\n                var updatedMessageType = updatedMessageTypes_1[_i];\r\n                var sub = this._connection.on(updatedMessageType, this.handleContextUpdatedMessage.bind(this));\r\n                this._gw3Subscriptions.push(sub);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.handleContextUpdatedMessage = function (contextUpdatedMsg) {\r\n            var updatedMessageType = contextUpdatedMsg.type;\r\n            var contextId = contextUpdatedMsg.context_id;\r\n            var contextData = this._contextNameToData[this._contextIdToName[contextId]];\r\n            var justSeen = !contextData || !contextData.isAnnounced;\r\n            if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                if (!contextData) {\r\n                    contextData = new GW3ContextData(contextId, contextUpdatedMsg.activity_id, true, contextUpdatedMsg.activity_id);\r\n                    this._contextNameToData[contextUpdatedMsg.activity_id] = contextData;\r\n                    this._contextIdToName[contextId] = contextUpdatedMsg.activity_id;\r\n                    this._contextNameToId[contextUpdatedMsg.activity_id] = contextId;\r\n                }\r\n                else {\r\n                    contextData.contextId = contextId;\r\n                    contextData.isAnnounced = true;\r\n                    contextData.activityId = contextUpdatedMsg.activity_id;\r\n                }\r\n                contextData.joinedActivity = true;\r\n            }\r\n            else {\r\n                if (!contextData || !contextData.isAnnounced) {\r\n                    if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n                        contextData = contextData || new GW3ContextData(contextId, contextUpdatedMsg.name, true, undefined);\r\n                        contextData.sentExplicitSubscription = true;\r\n                        this._contextNameToData[contextUpdatedMsg.name] = contextData;\r\n                        this._contextIdToName[contextId] = contextUpdatedMsg.name;\r\n                        this._contextNameToId[contextUpdatedMsg.name] = contextId;\r\n                    }\r\n                    else {\r\n                        this._logger.error(\"Received 'update' for unknown context: \" + contextId);\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n            var oldContext = contextData.context;\r\n            if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n                contextData.context = contextUpdatedMsg.data || {};\r\n            }\r\n            else if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                contextData.context = contextUpdatedMsg.context_snapshot || {};\r\n            }\r\n            else if (updatedMessageType === GW_MESSAGE_CONTEXT_UPDATED) {\r\n                contextData.context = applyContextDelta(contextData.context, contextUpdatedMsg.delta, this._logger);\r\n            }\r\n            else {\r\n                throw new Error(\"Unrecognized context update message \" + updatedMessageType);\r\n            }\r\n            if (justSeen ||\r\n                !deepEqual(contextData.context, oldContext) ||\r\n                updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n                this.invokeUpdateCallbacks(contextData, contextUpdatedMsg.delta, { updaterId: contextUpdatedMsg.updater_id });\r\n            }\r\n        };\r\n        GW3Bridge.prototype.invokeUpdateCallbacks = function (contextData, delta, extraData) {\r\n            delta = delta || { added: {}, updated: {}, reset: {}, removed: [] };\r\n            if (delta.commands) {\r\n                delta.added = delta.updated = delta.reset = {};\r\n                delta.removed = [];\r\n                for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                    var command = _a[_i];\r\n                    if (command.type === \"remove\") {\r\n                        if (command.path.indexOf(\".\") === -1) {\r\n                            delta.removed.push(command.path);\r\n                        }\r\n                        setValueToPath(delta.updated, null, command.path);\r\n                    }\r\n                    else if (command.type === \"set\") {\r\n                        setValueToPath(delta.updated, command.value, command.path);\r\n                    }\r\n                }\r\n            }\r\n            for (var updateCallbackIndex in contextData.updateCallbacks) {\r\n                if (contextData.updateCallbacks.hasOwnProperty(updateCallbackIndex)) {\r\n                    try {\r\n                        var updateCallback = contextData.updateCallbacks[updateCallbackIndex];\r\n                        updateCallback(deepClone(contextData.context), Object.assign({}, delta.added || {}, delta.updated || {}, delta.reset || {}), delta.removed, parseInt(updateCallbackIndex, 10), extraData);\r\n                    }\r\n                    catch (err) {\r\n                        this._logger.debug(\"callback error: \" + JSON.stringify(err));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        GW3Bridge.prototype.subscribeToContextDestroyedMessages = function () {\r\n            var destroyedMessageTypes = [\r\n                GW_MESSAGE_CONTEXT_DESTROYED,\r\n                GW_MESSAGE_ACTIVITY_DESTROYED,\r\n            ];\r\n            for (var _i = 0, destroyedMessageTypes_1 = destroyedMessageTypes; _i < destroyedMessageTypes_1.length; _i++) {\r\n                var destroyedMessageType = destroyedMessageTypes_1[_i];\r\n                var sub = this._connection.on(destroyedMessageType, this.handleContextDestroyedMessage.bind(this));\r\n                this._gw3Subscriptions.push(sub);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.handleContextDestroyedMessage = function (destroyedMsg) {\r\n            var destroyedMessageType = destroyedMsg.type;\r\n            var contextId;\r\n            var name;\r\n            if (destroyedMessageType === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n                name = destroyedMsg.activity_id;\r\n                contextId = this._contextNameToId[name];\r\n                if (!contextId) {\r\n                    this._logger.error(\"Received 'destroyed' for unknown activity: \" + destroyedMsg.activity_id);\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                contextId = destroyedMsg.context_id;\r\n                name = this._contextIdToName[contextId];\r\n                if (!name) {\r\n                    this._logger.error(\"Received 'destroyed' for unknown context: \" + destroyedMsg.context_id);\r\n                    return;\r\n                }\r\n            }\r\n            delete this._contextIdToName[contextId];\r\n            delete this._contextNameToId[name];\r\n            var contextData = this._contextNameToData[name];\r\n            delete this._contextNameToData[name];\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                this._logger.error(\"Received 'destroyed' for unknown context: \" + contextId);\r\n                return;\r\n            }\r\n        };\r\n        GW3Bridge.prototype.sendSubscribe = function (contextData) {\r\n            contextData.sentExplicitSubscription = true;\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n                domain: \"global\",\r\n                context_id: contextData.contextId,\r\n            }).then(function (_) { return undefined; });\r\n        };\r\n        GW3Bridge.prototype.sendUnsubscribe = function (contextData) {\r\n            contextData.sentExplicitSubscription = false;\r\n            return this._gw3Session\r\n                .send({\r\n                type: GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n                domain: \"global\",\r\n                context_id: contextData.contextId,\r\n            }).then(function (_) { return undefined; });\r\n        };\r\n        GW3Bridge.prototype.calculateContextDeltaV1 = function (from, to) {\r\n            var delta = { added: {}, updated: {}, removed: [], reset: undefined };\r\n            if (from) {\r\n                for (var _i = 0, _a = Object.keys(from); _i < _a.length; _i++) {\r\n                    var x = _a[_i];\r\n                    if (Object.keys(to).indexOf(x) !== -1\r\n                        && to[x] !== null\r\n                        && !deepEqual(from[x], to[x])) {\r\n                        delta.updated[x] = to[x];\r\n                    }\r\n                }\r\n            }\r\n            for (var _b = 0, _c = Object.keys(to); _b < _c.length; _b++) {\r\n                var x = _c[_b];\r\n                if (!from || (Object.keys(from).indexOf(x) === -1)) {\r\n                    if (to[x] !== null) {\r\n                        delta.added[x] = to[x];\r\n                    }\r\n                }\r\n                else if (to[x] === null) {\r\n                    delta.removed.push(x);\r\n                }\r\n            }\r\n            return delta;\r\n        };\r\n        GW3Bridge.prototype.calculateContextDeltaV2 = function (from, to) {\r\n            var _a, _b;\r\n            var delta = { added: {}, updated: {}, removed: [], reset: undefined, commands: [] };\r\n            for (var _i = 0, _c = Object.keys(to); _i < _c.length; _i++) {\r\n                var x = _c[_i];\r\n                if (to[x] !== null) {\r\n                    var fromX = from ? from[x] : null;\r\n                    if (!deepEqual(fromX, to[x])) {\r\n                        (_a = delta.commands) === null || _a === void 0 ? void 0 : _a.push({ type: \"set\", path: x, value: to[x] });\r\n                    }\r\n                }\r\n                else {\r\n                    (_b = delta.commands) === null || _b === void 0 ? void 0 : _b.push({ type: \"remove\", path: x });\r\n                }\r\n            }\r\n            return delta;\r\n        };\r\n        return GW3Bridge;\r\n    }());\n\n    var ContextsModule = (function () {\r\n        function ContextsModule(config) {\r\n            this._bridge = new GW3Bridge(config);\r\n        }\r\n        ContextsModule.prototype.all = function () {\r\n            return this._bridge.all();\r\n        };\r\n        ContextsModule.prototype.update = function (name, data) {\r\n            this.checkName(name);\r\n            this.checkData(data);\r\n            return this._bridge.update(name, data);\r\n        };\r\n        ContextsModule.prototype.set = function (name, data) {\r\n            this.checkName(name);\r\n            this.checkData(data);\r\n            return this._bridge.set(name, data);\r\n        };\r\n        ContextsModule.prototype.setPath = function (name, path, data) {\r\n            this.checkName(name);\r\n            this.checkPath(path);\r\n            var isTopLevelPath = path === \"\";\r\n            if (isTopLevelPath) {\r\n                this.checkData(data);\r\n                return this.set(name, data);\r\n            }\r\n            return this._bridge.setPath(name, path, data);\r\n        };\r\n        ContextsModule.prototype.setPaths = function (name, paths) {\r\n            this.checkName(name);\r\n            if (!Array.isArray(paths)) {\r\n                throw new Error(\"Please provide the paths as an array of PathValues!\");\r\n            }\r\n            for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\r\n                var _a = paths_1[_i], path = _a.path, value = _a.value;\r\n                this.checkPath(path);\r\n                var isTopLevelPath = path === \"\";\r\n                if (isTopLevelPath) {\r\n                    this.checkData(value);\r\n                }\r\n            }\r\n            return this._bridge.setPaths(name, paths);\r\n        };\r\n        ContextsModule.prototype.subscribe = function (name, callback) {\r\n            var _this = this;\r\n            this.checkName(name);\r\n            if (typeof callback !== \"function\") {\r\n                throw new Error(\"Please provide the callback as a function!\");\r\n            }\r\n            return this._bridge\r\n                .subscribe(name, function (data, delta, removed, key, extraData) { return callback(data, delta, removed, function () { return _this._bridge.unsubscribe(key); }, extraData); })\r\n                .then(function (key) {\r\n                return function () {\r\n                    _this._bridge.unsubscribe(key);\r\n                };\r\n            });\r\n        };\r\n        ContextsModule.prototype.get = function (name) {\r\n            this.checkName(name);\r\n            return this._bridge.get(name);\r\n        };\r\n        ContextsModule.prototype.ready = function () {\r\n            return Promise.resolve(this);\r\n        };\r\n        ContextsModule.prototype.destroy = function (name) {\r\n            this.checkName(name);\r\n            return this._bridge.destroy(name);\r\n        };\r\n        Object.defineProperty(ContextsModule.prototype, \"setPathSupported\", {\r\n            get: function () {\r\n                return this._bridge.setPathSupported;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ContextsModule.prototype.checkName = function (name) {\r\n            if (typeof name !== \"string\" || name === \"\") {\r\n                throw new Error(\"Please provide the name as a non-empty string!\");\r\n            }\r\n        };\r\n        ContextsModule.prototype.checkPath = function (path) {\r\n            if (typeof path !== \"string\") {\r\n                throw new Error(\"Please provide the path as a dot delimited string!\");\r\n            }\r\n        };\r\n        ContextsModule.prototype.checkData = function (data) {\r\n            if (typeof data !== \"object\") {\r\n                throw new Error(\"Please provide the data as an object!\");\r\n            }\r\n        };\r\n        return ContextsModule;\r\n    }());\n\n    function promisify (promise, successCallback, errorCallback) {\r\n        if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\r\n            return promise;\r\n        }\r\n        if (typeof successCallback !== \"function\") {\r\n            successCallback = function () { };\r\n        }\r\n        else if (typeof errorCallback !== \"function\") {\r\n            errorCallback = function () { };\r\n        }\r\n        return promise.then(successCallback, errorCallback);\r\n    }\n\n    function rejectAfter(ms, promise, error) {\r\n        if (ms === void 0) { ms = 0; }\r\n        var timeout;\r\n        promise.finally(function () {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n            }\r\n        });\r\n        return new Promise(function (resolve, reject) {\r\n            timeout = setTimeout(function () { return reject(error); }, ms);\r\n        });\r\n    }\n\n    var InvokeStatus;\r\n    (function (InvokeStatus) {\r\n        InvokeStatus[InvokeStatus[\"Success\"] = 0] = \"Success\";\r\n        InvokeStatus[InvokeStatus[\"Error\"] = 1] = \"Error\";\r\n    })(InvokeStatus || (InvokeStatus = {}));\r\n    var Client = (function () {\r\n        function Client(protocol, repo, instance, configuration) {\r\n            this.protocol = protocol;\r\n            this.repo = repo;\r\n            this.instance = instance;\r\n            this.configuration = configuration;\r\n        }\r\n        Client.prototype.subscribe = function (method, options, successCallback, errorCallback, existingSub) {\r\n            var _this = this;\r\n            var callProtocolSubscribe = function (targetServers, stream, successProxy, errorProxy) {\r\n                var _a;\r\n                options.methodResponseTimeout = (_a = options.methodResponseTimeout) !== null && _a !== void 0 ? _a : options.waitTimeoutMs;\r\n                _this.protocol.client.subscribe(stream, options, targetServers, successProxy, errorProxy, existingSub);\r\n            };\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var successProxy = function (sub) {\r\n                    resolve(sub);\r\n                };\r\n                var errorProxy = function (err) {\r\n                    reject(err);\r\n                };\r\n                if (!method) {\r\n                    reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                    return;\r\n                }\r\n                var methodDef;\r\n                if (typeof method === \"string\") {\r\n                    methodDef = { name: method };\r\n                }\r\n                else {\r\n                    methodDef = method;\r\n                }\r\n                if (!methodDef.name) {\r\n                    reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                    return;\r\n                }\r\n                if (options === undefined) {\r\n                    options = {};\r\n                }\r\n                var target = options.target;\r\n                if (target === undefined) {\r\n                    target = \"best\";\r\n                }\r\n                if (typeof target === \"string\" && target !== \"all\" && target !== \"best\") {\r\n                    reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\", \\\"best\\\", or an instance.\"));\r\n                    return;\r\n                }\r\n                if (options.methodResponseTimeout === undefined) {\r\n                    options.methodResponseTimeout = options.method_response_timeout;\r\n                    if (options.methodResponseTimeout === undefined) {\r\n                        options.methodResponseTimeout = _this.configuration.methodResponseTimeout;\r\n                    }\r\n                }\r\n                if (options.waitTimeoutMs === undefined) {\r\n                    options.waitTimeoutMs = options.wait_for_method_timeout;\r\n                    if (options.waitTimeoutMs === undefined) {\r\n                        options.waitTimeoutMs = _this.configuration.waitTimeoutMs;\r\n                    }\r\n                }\r\n                var delayStep = 500;\r\n                var delayTillNow = 0;\r\n                var currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n                if (currentServers.length > 0) {\r\n                    callProtocolSubscribe(currentServers, currentServers[0].methods[0], successProxy, errorProxy);\r\n                }\r\n                else {\r\n                    var retry_1 = function () {\r\n                        if (!target || !(options.waitTimeoutMs)) {\r\n                            return;\r\n                        }\r\n                        delayTillNow += delayStep;\r\n                        currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n                        if (currentServers.length > 0) {\r\n                            var streamInfo = currentServers[0].methods[0];\r\n                            callProtocolSubscribe(currentServers, streamInfo, successProxy, errorProxy);\r\n                        }\r\n                        else if (delayTillNow >= options.waitTimeoutMs) {\r\n                            var def = typeof method === \"string\" ? { name: method } : method;\r\n                            callProtocolSubscribe(currentServers, def, successProxy, errorProxy);\r\n                        }\r\n                        else {\r\n                            setTimeout(retry_1, delayStep);\r\n                        }\r\n                    };\r\n                    setTimeout(retry_1, delayStep);\r\n                }\r\n            });\r\n            return promisify(promise, successCallback, errorCallback);\r\n        };\r\n        Client.prototype.servers = function (methodFilter) {\r\n            var filterCopy = methodFilter === undefined\r\n                ? undefined\r\n                : __assign$1({}, methodFilter);\r\n            return this.getServers(filterCopy).map(function (serverMethodMap) {\r\n                return serverMethodMap.server.instance;\r\n            });\r\n        };\r\n        Client.prototype.methods = function (methodFilter) {\r\n            if (typeof methodFilter === \"string\") {\r\n                methodFilter = { name: methodFilter };\r\n            }\r\n            else {\r\n                methodFilter = __assign$1({}, methodFilter);\r\n            }\r\n            return this.getMethods(methodFilter);\r\n        };\r\n        Client.prototype.methodsForInstance = function (instance) {\r\n            return this.getMethodsForInstance(instance);\r\n        };\r\n        Client.prototype.methodAdded = function (callback) {\r\n            return this.repo.onMethodAdded(callback);\r\n        };\r\n        Client.prototype.methodRemoved = function (callback) {\r\n            return this.repo.onMethodRemoved(callback);\r\n        };\r\n        Client.prototype.serverAdded = function (callback) {\r\n            return this.repo.onServerAdded(callback);\r\n        };\r\n        Client.prototype.serverRemoved = function (callback) {\r\n            return this.repo.onServerRemoved(function (server, reason) {\r\n                callback(server, reason);\r\n            });\r\n        };\r\n        Client.prototype.serverMethodAdded = function (callback) {\r\n            return this.repo.onServerMethodAdded(function (server, method) {\r\n                callback({ server: server, method: method });\r\n            });\r\n        };\r\n        Client.prototype.serverMethodRemoved = function (callback) {\r\n            return this.repo.onServerMethodRemoved(function (server, method) {\r\n                callback({ server: server, method: method });\r\n            });\r\n        };\r\n        Client.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var getInvokePromise;\r\n                var _this = this;\r\n                return __generator$1(this, function (_a) {\r\n                    getInvokePromise = function () { return __awaiter$1(_this, void 0, void 0, function () {\r\n                        var methodDefinition, serversMethodMap, err_1, method, errorObj, timeout, additionalOptionsCopy, invokePromises, invocationMessages, results, allRejected;\r\n                        var _this = this;\r\n                        var _a, _b, _c;\r\n                        return __generator$1(this, function (_d) {\r\n                            switch (_d.label) {\r\n                                case 0:\r\n                                    if (typeof methodFilter === \"string\") {\r\n                                        methodDefinition = { name: methodFilter };\r\n                                    }\r\n                                    else {\r\n                                        methodDefinition = __assign$1({}, methodFilter);\r\n                                    }\r\n                                    if (!methodDefinition.name) {\r\n                                        return [2, Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\")];\r\n                                    }\r\n                                    if (!argumentObj) {\r\n                                        argumentObj = {};\r\n                                    }\r\n                                    if (!target) {\r\n                                        target = \"best\";\r\n                                    }\r\n                                    if (typeof target === \"string\" && target !== \"all\" && target !== \"best\" && target !== \"skipMine\") {\r\n                                        return [2, Promise.reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\" and \\\"best\\\".\"))];\r\n                                    }\r\n                                    if (!additionalOptions) {\r\n                                        additionalOptions = {};\r\n                                    }\r\n                                    if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                        additionalOptions.methodResponseTimeoutMs = additionalOptions.method_response_timeout;\r\n                                        if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                            additionalOptions.methodResponseTimeoutMs = this.configuration.methodResponseTimeout;\r\n                                        }\r\n                                    }\r\n                                    if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                        additionalOptions.waitTimeoutMs = additionalOptions.wait_for_method_timeout;\r\n                                        if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                            additionalOptions.waitTimeoutMs = this.configuration.waitTimeoutMs;\r\n                                        }\r\n                                    }\r\n                                    if (additionalOptions.waitTimeoutMs !== undefined && typeof additionalOptions.waitTimeoutMs !== \"number\") {\r\n                                        return [2, Promise.reject(new Error(\"\\\"\" + additionalOptions.waitTimeoutMs + \"\\\" is not a valid number for \\\"waitTimeoutMs\\\" \"))];\r\n                                    }\r\n                                    if (typeof argumentObj !== \"object\") {\r\n                                        return [2, Promise.reject(new Error(\"The method arguments must be an object. method: \" + methodDefinition.name))];\r\n                                    }\r\n                                    serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                                    if (!(serversMethodMap.length === 0)) return [3, 4];\r\n                                    _d.label = 1;\r\n                                case 1:\r\n                                    _d.trys.push([1, 3, , 4]);\r\n                                    return [4, this.tryToAwaitForMethods(methodDefinition, target, additionalOptions)];\r\n                                case 2:\r\n                                    serversMethodMap = _d.sent();\r\n                                    return [3, 4];\r\n                                case 3:\r\n                                    err_1 = _d.sent();\r\n                                    method = __assign$1(__assign$1({}, methodDefinition), { getServers: function () { return []; }, supportsStreaming: false, objectTypes: (_a = methodDefinition.objectTypes) !== null && _a !== void 0 ? _a : [], flags: (_c = (_b = methodDefinition.flags) === null || _b === void 0 ? void 0 : _b.metadata) !== null && _c !== void 0 ? _c : {} });\r\n                                    errorObj = {\r\n                                        method: method,\r\n                                        called_with: argumentObj,\r\n                                        message: \"Can not find a method matching \" + JSON.stringify(methodFilter) + \" with server filter \" + JSON.stringify(target),\r\n                                        executed_by: undefined,\r\n                                        returned: undefined,\r\n                                        status: undefined,\r\n                                    };\r\n                                    return [2, Promise.reject(errorObj)];\r\n                                case 4:\r\n                                    timeout = additionalOptions.methodResponseTimeoutMs;\r\n                                    additionalOptionsCopy = additionalOptions;\r\n                                    invokePromises = serversMethodMap.map(function (serversMethodPair) {\r\n                                        var invId = shortid();\r\n                                        var method = serversMethodPair.methods[0];\r\n                                        var server = serversMethodPair.server;\r\n                                        var invokePromise = _this.protocol.client.invoke(invId, method, argumentObj, server, additionalOptionsCopy);\r\n                                        return Promise.race([\r\n                                            invokePromise,\r\n                                            rejectAfter(timeout, invokePromise, {\r\n                                                invocationId: invId,\r\n                                                message: \"Invocation timeout (\" + timeout + \" ms) reached for method name: \" + (method === null || method === void 0 ? void 0 : method.name) + \", target instance: \" + JSON.stringify(server.instance) + \", options: \" + JSON.stringify(additionalOptionsCopy),\r\n                                                status: InvokeStatus.Error,\r\n                                            })\r\n                                        ]);\r\n                                    });\r\n                                    return [4, Promise.all(invokePromises)];\r\n                                case 5:\r\n                                    invocationMessages = _d.sent();\r\n                                    results = this.getInvocationResultObj(invocationMessages, methodDefinition, argumentObj);\r\n                                    allRejected = invocationMessages.every(function (result) { return result.status === InvokeStatus.Error; });\r\n                                    if (allRejected) {\r\n                                        return [2, Promise.reject(results)];\r\n                                    }\r\n                                    return [2, results];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    return [2, promisify(getInvokePromise(), success, error)];\r\n                });\r\n            });\r\n        };\r\n        Client.prototype.getInvocationResultObj = function (invocationResults, method, calledWith) {\r\n            var all_return_values = invocationResults\r\n                .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Success; })\r\n                .reduce(function (allValues, currentValue) {\r\n                allValues = __spreadArrays(allValues, [\r\n                    {\r\n                        executed_by: currentValue.instance,\r\n                        returned: currentValue.result,\r\n                        called_with: calledWith,\r\n                        method: method,\r\n                        message: currentValue.message,\r\n                        status: currentValue.status,\r\n                    }\r\n                ]);\r\n                return allValues;\r\n            }, []);\r\n            var all_errors = invocationResults\r\n                .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Error; })\r\n                .reduce(function (allErrors, currError) {\r\n                allErrors = __spreadArrays(allErrors, [\r\n                    {\r\n                        executed_by: currError.instance,\r\n                        called_with: calledWith,\r\n                        name: method.name,\r\n                        message: currError.message,\r\n                    }\r\n                ]);\r\n                return allErrors;\r\n            }, []);\r\n            var invResult = invocationResults[0];\r\n            var result = {\r\n                method: method,\r\n                called_with: calledWith,\r\n                returned: invResult.result,\r\n                executed_by: invResult.instance,\r\n                all_return_values: all_return_values,\r\n                all_errors: all_errors,\r\n                message: invResult.message,\r\n                status: invResult.status\r\n            };\r\n            return result;\r\n        };\r\n        Client.prototype.tryToAwaitForMethods = function (methodDefinition, target, additionalOptions) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (additionalOptions.waitTimeoutMs === 0) {\r\n                    reject();\r\n                    return;\r\n                }\r\n                var delayStep = 500;\r\n                var delayTillNow = 0;\r\n                var retry = function () {\r\n                    delayTillNow += delayStep;\r\n                    var serversMethodMap = _this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                    if (serversMethodMap.length > 0) {\r\n                        clearInterval(interval);\r\n                        resolve(serversMethodMap);\r\n                    }\r\n                    else if (delayTillNow >= (additionalOptions.waitTimeoutMs || 10000)) {\r\n                        clearInterval(interval);\r\n                        reject();\r\n                        return;\r\n                    }\r\n                };\r\n                var interval = setInterval(retry, delayStep);\r\n            });\r\n        };\r\n        Client.prototype.filterByTarget = function (target, serverMethodMap) {\r\n            var _this = this;\r\n            if (typeof target === \"string\") {\r\n                if (target === \"all\") {\r\n                    return __spreadArrays(serverMethodMap);\r\n                }\r\n                else if (target === \"best\") {\r\n                    var localMachine = serverMethodMap\r\n                        .find(function (s) { return s.server.instance.isLocal; });\r\n                    if (localMachine) {\r\n                        return [localMachine];\r\n                    }\r\n                    if (serverMethodMap[0] !== undefined) {\r\n                        return [serverMethodMap[0]];\r\n                    }\r\n                }\r\n                else if (target === \"skipMine\") {\r\n                    return serverMethodMap.filter(function (_a) {\r\n                        var server = _a.server;\r\n                        return server.instance.peerId !== _this.instance.peerId;\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                var targetArray = void 0;\r\n                if (!Array.isArray(target)) {\r\n                    targetArray = [target];\r\n                }\r\n                else {\r\n                    targetArray = target;\r\n                }\r\n                var allServersMatching = targetArray.reduce(function (matches, filter) {\r\n                    var myMatches = serverMethodMap.filter(function (serverMethodPair) {\r\n                        return _this.instanceMatch(filter, serverMethodPair.server.instance);\r\n                    });\r\n                    return matches.concat(myMatches);\r\n                }, []);\r\n                return allServersMatching;\r\n            }\r\n            return [];\r\n        };\r\n        Client.prototype.instanceMatch = function (instanceFilter, instanceDefinition) {\r\n            return this.containsProps(instanceFilter, instanceDefinition);\r\n        };\r\n        Client.prototype.methodMatch = function (methodFilter, methodDefinition) {\r\n            return this.containsProps(methodFilter, methodDefinition);\r\n        };\r\n        Client.prototype.containsProps = function (filter, repoMethod) {\r\n            var filterProps = Object.keys(filter)\r\n                .filter(function (prop) {\r\n                return filter[prop] !== undefined\r\n                    && typeof filter[prop] !== \"function\"\r\n                    && prop !== \"object_types\"\r\n                    && prop !== \"display_name\"\r\n                    && prop !== \"id\"\r\n                    && prop !== \"gatewayId\"\r\n                    && prop !== \"identifier\"\r\n                    && prop[0] !== \"_\";\r\n            });\r\n            return filterProps.every(function (prop) {\r\n                var isMatch;\r\n                var filterValue = filter[prop];\r\n                var repoMethodValue = repoMethod[prop];\r\n                switch (prop) {\r\n                    case \"objectTypes\":\r\n                        isMatch = (filterValue || []).every(function (filterValueEl) {\r\n                            return (repoMethodValue || []).includes(filterValueEl);\r\n                        });\r\n                        break;\r\n                    case \"flags\":\r\n                        isMatch = isSubset(repoMethodValue || {}, filterValue || {});\r\n                        break;\r\n                    default:\r\n                        isMatch = String(filterValue).toLowerCase() === String(repoMethodValue).toLowerCase();\r\n                }\r\n                return isMatch;\r\n            });\r\n        };\r\n        Client.prototype.getMethods = function (methodFilter) {\r\n            var _this = this;\r\n            if (methodFilter === undefined) {\r\n                return this.repo.getMethods();\r\n            }\r\n            var methods = this.repo.getMethods().filter(function (method) {\r\n                return _this.methodMatch(methodFilter, method);\r\n            });\r\n            return methods;\r\n        };\r\n        Client.prototype.getMethodsForInstance = function (instanceFilter) {\r\n            var _this = this;\r\n            var allServers = this.repo.getServers();\r\n            var matchingServers = allServers.filter(function (server) {\r\n                return _this.instanceMatch(instanceFilter, server.instance);\r\n            });\r\n            if (matchingServers.length === 0) {\r\n                return [];\r\n            }\r\n            var resultMethodsObject = {};\r\n            if (matchingServers.length === 1) {\r\n                resultMethodsObject = matchingServers[0].methods;\r\n            }\r\n            else {\r\n                matchingServers.forEach(function (server) {\r\n                    Object.keys(server.methods).forEach(function (methodKey) {\r\n                        var method = server.methods[methodKey];\r\n                        resultMethodsObject[method.identifier] = method;\r\n                    });\r\n                });\r\n            }\r\n            return Object.keys(resultMethodsObject)\r\n                .map(function (key) {\r\n                return resultMethodsObject[key];\r\n            });\r\n        };\r\n        Client.prototype.getServers = function (methodFilter) {\r\n            var _this = this;\r\n            var servers = this.repo.getServers();\r\n            if (methodFilter === undefined) {\r\n                return servers.map(function (server) {\r\n                    return { server: server, methods: [] };\r\n                });\r\n            }\r\n            return servers.reduce(function (prev, current) {\r\n                var methodsForServer = Object.values(current.methods);\r\n                var matchingMethods = methodsForServer.filter(function (method) {\r\n                    return _this.methodMatch(methodFilter, method);\r\n                });\r\n                if (matchingMethods.length > 0) {\r\n                    prev.push({ server: current, methods: matchingMethods });\r\n                }\r\n                return prev;\r\n            }, []);\r\n        };\r\n        Client.prototype.getServerMethodsByFilterAndTarget = function (methodFilter, target) {\r\n            var serversMethodMap = this.getServers(methodFilter);\r\n            return this.filterByTarget(target, serversMethodMap);\r\n        };\r\n        return Client;\r\n    }());\n\n    var ServerSubscription = (function () {\r\n        function ServerSubscription(protocol, repoMethod, subscription) {\r\n            this.protocol = protocol;\r\n            this.repoMethod = repoMethod;\r\n            this.subscription = subscription;\r\n        }\r\n        Object.defineProperty(ServerSubscription.prototype, \"stream\", {\r\n            get: function () {\r\n                if (!this.repoMethod.stream) {\r\n                    throw new Error(\"no stream\");\r\n                }\r\n                return this.repoMethod.stream;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ServerSubscription.prototype, \"arguments\", {\r\n            get: function () { return this.subscription.arguments || {}; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ServerSubscription.prototype, \"branchKey\", {\r\n            get: function () { return this.subscription.branchKey; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ServerSubscription.prototype, \"instance\", {\r\n            get: function () {\r\n                if (!this.subscription.instance) {\r\n                    throw new Error(\"no instance\");\r\n                }\r\n                return this.subscription.instance;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ServerSubscription.prototype.close = function () {\r\n            this.protocol.server.closeSingleSubscription(this.repoMethod, this.subscription);\r\n        };\r\n        ServerSubscription.prototype.push = function (data) {\r\n            this.protocol.server.pushDataToSingle(this.repoMethod, this.subscription, data);\r\n        };\r\n        return ServerSubscription;\r\n    }());\n\n    var Request = (function () {\r\n        function Request(protocol, repoMethod, requestContext) {\r\n            this.protocol = protocol;\r\n            this.repoMethod = repoMethod;\r\n            this.requestContext = requestContext;\r\n            this.arguments = requestContext.arguments;\r\n            this.instance = requestContext.instance;\r\n        }\r\n        Request.prototype.accept = function () {\r\n            this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, \"\");\r\n        };\r\n        Request.prototype.acceptOnBranch = function (branch) {\r\n            this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, branch);\r\n        };\r\n        Request.prototype.reject = function (reason) {\r\n            this.protocol.server.rejectRequest(this.requestContext, this.repoMethod, reason);\r\n        };\r\n        return Request;\r\n    }());\n\n    var ServerStreaming = (function () {\r\n        function ServerStreaming(protocol, server) {\r\n            var _this = this;\r\n            this.protocol = protocol;\r\n            this.server = server;\r\n            protocol.server.onSubRequest(function (rc, rm) { return _this.handleSubRequest(rc, rm); });\r\n            protocol.server.onSubAdded(function (sub, rm) { return _this.handleSubAdded(sub, rm); });\r\n            protocol.server.onSubRemoved(function (sub, rm) { return _this.handleSubRemoved(sub, rm); });\r\n        }\r\n        ServerStreaming.prototype.handleSubRequest = function (requestContext, repoMethod) {\r\n            if (!(repoMethod &&\r\n                repoMethod.streamCallbacks &&\r\n                typeof repoMethod.streamCallbacks.subscriptionRequestHandler === \"function\")) {\r\n                return;\r\n            }\r\n            var request = new Request(this.protocol, repoMethod, requestContext);\r\n            repoMethod.streamCallbacks.subscriptionRequestHandler(request);\r\n        };\r\n        ServerStreaming.prototype.handleSubAdded = function (subscription, repoMethod) {\r\n            if (!(repoMethod &&\r\n                repoMethod.streamCallbacks &&\r\n                typeof repoMethod.streamCallbacks.subscriptionAddedHandler === \"function\")) {\r\n                return;\r\n            }\r\n            var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n            repoMethod.streamCallbacks.subscriptionAddedHandler(sub);\r\n        };\r\n        ServerStreaming.prototype.handleSubRemoved = function (subscription, repoMethod) {\r\n            if (!(repoMethod &&\r\n                repoMethod.streamCallbacks &&\r\n                typeof repoMethod.streamCallbacks.subscriptionRemovedHandler === \"function\")) {\r\n                return;\r\n            }\r\n            var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n            repoMethod.streamCallbacks.subscriptionRemovedHandler(sub);\r\n        };\r\n        return ServerStreaming;\r\n    }());\n\n    var ServerBranch = (function () {\r\n        function ServerBranch(key, protocol, repoMethod) {\r\n            this.key = key;\r\n            this.protocol = protocol;\r\n            this.repoMethod = repoMethod;\r\n        }\r\n        ServerBranch.prototype.subscriptions = function () {\r\n            var _this = this;\r\n            var subList = this.protocol.server.getSubscriptionList(this.repoMethod, this.key);\r\n            return subList.map(function (sub) {\r\n                return new ServerSubscription(_this.protocol, _this.repoMethod, sub);\r\n            });\r\n        };\r\n        ServerBranch.prototype.close = function () {\r\n            this.protocol.server.closeAllSubscriptions(this.repoMethod, this.key);\r\n        };\r\n        ServerBranch.prototype.push = function (data) {\r\n            this.protocol.server.pushData(this.repoMethod, data, [this.key]);\r\n        };\r\n        return ServerBranch;\r\n    }());\n\n    var ServerStream = (function () {\r\n        function ServerStream(_protocol, _repoMethod, _server) {\r\n            this._protocol = _protocol;\r\n            this._repoMethod = _repoMethod;\r\n            this._server = _server;\r\n            this.name = this._repoMethod.definition.name;\r\n        }\r\n        ServerStream.prototype.branches = function (key) {\r\n            var _this = this;\r\n            var bList = this._protocol.server.getBranchList(this._repoMethod);\r\n            if (key) {\r\n                if (bList.indexOf(key) > -1) {\r\n                    return new ServerBranch(key, this._protocol, this._repoMethod);\r\n                }\r\n                return undefined;\r\n            }\r\n            else {\r\n                return bList.map(function (branchKey) {\r\n                    return new ServerBranch(branchKey, _this._protocol, _this._repoMethod);\r\n                });\r\n            }\r\n        };\r\n        ServerStream.prototype.branch = function (key) {\r\n            return this.branches(key);\r\n        };\r\n        ServerStream.prototype.subscriptions = function () {\r\n            var _this = this;\r\n            var subList = this._protocol.server.getSubscriptionList(this._repoMethod);\r\n            return subList.map(function (sub) {\r\n                return new ServerSubscription(_this._protocol, _this._repoMethod, sub);\r\n            });\r\n        };\r\n        Object.defineProperty(ServerStream.prototype, \"definition\", {\r\n            get: function () {\r\n                var _a;\r\n                var def2 = this._repoMethod.definition;\r\n                return {\r\n                    accepts: def2.accepts,\r\n                    description: def2.description,\r\n                    displayName: def2.displayName,\r\n                    name: def2.name,\r\n                    objectTypes: def2.objectTypes,\r\n                    returns: def2.returns,\r\n                    supportsStreaming: def2.supportsStreaming,\r\n                    flags: (_a = def2.flags) === null || _a === void 0 ? void 0 : _a.metadata,\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ServerStream.prototype.close = function () {\r\n            this._protocol.server.closeAllSubscriptions(this._repoMethod);\r\n            this._server.unregister(this._repoMethod.definition, true);\r\n        };\r\n        ServerStream.prototype.push = function (data, branches) {\r\n            if (typeof branches !== \"string\" && !Array.isArray(branches) && branches !== undefined) {\r\n                throw new Error(\"invalid branches should be string or string array\");\r\n            }\r\n            if (typeof data !== \"object\") {\r\n                throw new Error(\"Invalid arguments. Data must be an object.\");\r\n            }\r\n            this._protocol.server.pushData(this._repoMethod, data, branches);\r\n        };\r\n        ServerStream.prototype.updateRepoMethod = function (repoMethod) {\r\n            this._repoMethod = repoMethod;\r\n        };\r\n        return ServerStream;\r\n    }());\n\n    var Server = (function () {\r\n        function Server(protocol, serverRepository) {\r\n            this.protocol = protocol;\r\n            this.serverRepository = serverRepository;\r\n            this.invocations = 0;\r\n            this.currentlyUnregistering = {};\r\n            this.streaming = new ServerStreaming(protocol, this);\r\n            this.protocol.server.onInvoked(this.onMethodInvoked.bind(this));\r\n        }\r\n        Server.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback, existingStream) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (!streamDef) {\r\n                    reject(\"The stream name must be unique! Please, provide either a unique string for a stream name to \\u201Cglue.interop.createStream()\\u201D or a \\u201CmethodDefinition\\u201D object with a unique \\u201Cname\\u201D property for the stream.\");\r\n                    return;\r\n                }\r\n                var streamMethodDefinition;\r\n                if (typeof streamDef === \"string\") {\r\n                    streamMethodDefinition = { name: \"\" + streamDef };\r\n                }\r\n                else {\r\n                    streamMethodDefinition = __assign$1({}, streamDef);\r\n                }\r\n                if (!streamMethodDefinition.name) {\r\n                    return reject(\"The \\u201Cname\\u201D property is required for the \\u201CstreamDefinition\\u201D object and must be unique. Stream definition: \" + JSON.stringify(streamMethodDefinition));\r\n                }\r\n                var nameAlreadyExists = _this.serverRepository.getList()\r\n                    .some(function (serverMethod) { return serverMethod.definition.name === streamMethodDefinition.name; });\r\n                if (nameAlreadyExists) {\r\n                    return reject(\"A stream with the name \\\"\" + streamMethodDefinition.name + \"\\\" already exists! Please, provide a unique name for the stream.\");\r\n                }\r\n                streamMethodDefinition.supportsStreaming = true;\r\n                if (!callbacks) {\r\n                    callbacks = {};\r\n                }\r\n                if (typeof callbacks.subscriptionRequestHandler !== \"function\") {\r\n                    callbacks.subscriptionRequestHandler = function (request) {\r\n                        request.accept();\r\n                    };\r\n                }\r\n                var repoMethod = _this.serverRepository.add({\r\n                    definition: streamMethodDefinition,\r\n                    streamCallbacks: callbacks,\r\n                    protocolState: {},\r\n                });\r\n                _this.protocol.server.createStream(repoMethod)\r\n                    .then(function () {\r\n                    var streamUserObject;\r\n                    if (existingStream) {\r\n                        streamUserObject = existingStream;\r\n                        existingStream.updateRepoMethod(repoMethod);\r\n                    }\r\n                    else {\r\n                        streamUserObject = new ServerStream(_this.protocol, repoMethod, _this);\r\n                    }\r\n                    repoMethod.stream = streamUserObject;\r\n                    resolve(streamUserObject);\r\n                })\r\n                    .catch(function (err) {\r\n                    if (repoMethod.repoId) {\r\n                        _this.serverRepository.remove(repoMethod.repoId);\r\n                    }\r\n                    reject(err);\r\n                });\r\n            });\r\n            return promisify(promise, successCallback, errorCallback);\r\n        };\r\n        Server.prototype.register = function (methodDefinition, callback) {\r\n            var _this = this;\r\n            if (!methodDefinition) {\r\n                return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n            }\r\n            if (typeof callback !== \"function\") {\r\n                return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n            }\r\n            var wrappedCallbackFunction = function (context, resultCallback) { return __awaiter$1(_this, void 0, void 0, function () {\r\n                var result, resultValue, e_1;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            _a.trys.push([0, 4, , 5]);\r\n                            result = callback(context.args, context.instance);\r\n                            if (!(result && typeof result.then === \"function\")) return [3, 2];\r\n                            return [4, result];\r\n                        case 1:\r\n                            resultValue = _a.sent();\r\n                            resultCallback(undefined, resultValue);\r\n                            return [3, 3];\r\n                        case 2:\r\n                            resultCallback(undefined, result);\r\n                            _a.label = 3;\r\n                        case 3: return [3, 5];\r\n                        case 4:\r\n                            e_1 = _a.sent();\r\n                            if (!e_1) {\r\n                                e_1 = \"\";\r\n                            }\r\n                            resultCallback(e_1, e_1);\r\n                            return [3, 5];\r\n                        case 5: return [2];\r\n                    }\r\n                });\r\n            }); };\r\n            wrappedCallbackFunction.userCallback = callback;\r\n            return this.registerCore(methodDefinition, wrappedCallbackFunction);\r\n        };\r\n        Server.prototype.registerAsync = function (methodDefinition, callback) {\r\n            if (!methodDefinition) {\r\n                return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n            }\r\n            if (typeof callback !== \"function\") {\r\n                return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n            }\r\n            var wrappedCallback = function (context, resultCallback) {\r\n                try {\r\n                    var resultCalled_1 = false;\r\n                    var success = function (result) {\r\n                        if (!resultCalled_1) {\r\n                            resultCallback(undefined, result);\r\n                        }\r\n                        resultCalled_1 = true;\r\n                    };\r\n                    var error = function (e) {\r\n                        if (!resultCalled_1) {\r\n                            if (!e) {\r\n                                e = \"\";\r\n                            }\r\n                            resultCallback(e, e);\r\n                        }\r\n                        resultCalled_1 = true;\r\n                    };\r\n                    var methodResult = callback(context.args, context.instance, success, error);\r\n                    if (methodResult && typeof methodResult.then === \"function\") {\r\n                        methodResult\r\n                            .then(success)\r\n                            .catch(error);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    resultCallback(e, undefined);\r\n                }\r\n            };\r\n            wrappedCallback.userCallbackAsync = callback;\r\n            return this.registerCore(methodDefinition, wrappedCallback);\r\n        };\r\n        Server.prototype.unregister = function (methodFilter, forStream) {\r\n            if (forStream === void 0) { forStream = false; }\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var methodDefinition, methodToBeRemoved;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (methodFilter === undefined) {\r\n                                return [2, Promise.reject(\"Please, provide either a unique string for a name or an object containing a \\u201Cname\\u201D property.\")];\r\n                            }\r\n                            if (!(typeof methodFilter === \"function\")) return [3, 2];\r\n                            return [4, this.unregisterWithPredicate(methodFilter, forStream)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                        case 2:\r\n                            if (typeof methodFilter === \"string\") {\r\n                                methodDefinition = { name: methodFilter };\r\n                            }\r\n                            else {\r\n                                methodDefinition = methodFilter;\r\n                            }\r\n                            if (methodDefinition.name === undefined) {\r\n                                return [2, Promise.reject(\"Method name is required. Cannot find a method if the method name is undefined!\")];\r\n                            }\r\n                            methodToBeRemoved = this.serverRepository.getList().find(function (serverMethod) {\r\n                                return serverMethod.definition.name === methodDefinition.name\r\n                                    && (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                            });\r\n                            if (!methodToBeRemoved) {\r\n                                return [2, Promise.reject(\"Method with a name \\\"\" + methodDefinition.name + \"\\\" does not exist or is not registered by your application!\")];\r\n                            }\r\n                            return [4, this.removeMethodsOrStreams([methodToBeRemoved])];\r\n                        case 3:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Server.prototype.unregisterWithPredicate = function (filterPredicate, forStream) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var methodsOrStreamsToRemove;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            methodsOrStreamsToRemove = this.serverRepository.getList()\r\n                                .filter(function (sm) { return filterPredicate(sm.definition); })\r\n                                .filter(function (serverMethod) {\r\n                                return (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                            });\r\n                            if (!methodsOrStreamsToRemove || methodsOrStreamsToRemove.length === 0) {\r\n                                return [2, Promise.reject(\"Could not find a \" + (forStream ? \"stream\" : \"method\") + \" matching the specified condition!\")];\r\n                            }\r\n                            return [4, this.removeMethodsOrStreams(methodsOrStreamsToRemove)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Server.prototype.removeMethodsOrStreams = function (methodsToRemove) {\r\n            var _this = this;\r\n            var methodUnregPromises = [];\r\n            methodsToRemove.forEach(function (method) {\r\n                var promise = _this.protocol.server.unregister(method)\r\n                    .then(function () {\r\n                    if (method.repoId) {\r\n                        _this.serverRepository.remove(method.repoId);\r\n                    }\r\n                });\r\n                methodUnregPromises.push(promise);\r\n                _this.addAsCurrentlyUnregistering(method.definition.name, promise);\r\n            });\r\n            return Promise.all(methodUnregPromises);\r\n        };\r\n        Server.prototype.addAsCurrentlyUnregistering = function (methodName, promise) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var timeout;\r\n                var _this = this;\r\n                return __generator$1(this, function (_a) {\r\n                    timeout = new Promise(function (resolve) { return setTimeout(resolve, 5000); });\r\n                    this.currentlyUnregistering[methodName] = Promise.race([promise, timeout]).then(function () {\r\n                        delete _this.currentlyUnregistering[methodName];\r\n                    });\r\n                    return [2];\r\n                });\r\n            });\r\n        };\r\n        Server.prototype.registerCore = function (method, theFunction) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var methodDefinition, unregisterInProgress, nameAlreadyExists, repoMethod;\r\n                var _this = this;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof method === \"string\") {\r\n                                methodDefinition = { name: \"\" + method };\r\n                            }\r\n                            else {\r\n                                methodDefinition = __assign$1({}, method);\r\n                            }\r\n                            if (!methodDefinition.name) {\r\n                                return [2, Promise.reject(\"Please, provide a (unique) string value for the \\u201Cname\\u201D property in the \\u201CmethodDefinition\\u201D object: \" + JSON.stringify(method))];\r\n                            }\r\n                            unregisterInProgress = this.currentlyUnregistering[methodDefinition.name];\r\n                            if (!unregisterInProgress) return [3, 2];\r\n                            return [4, unregisterInProgress];\r\n                        case 1:\r\n                            _a.sent();\r\n                            _a.label = 2;\r\n                        case 2:\r\n                            nameAlreadyExists = this.serverRepository.getList()\r\n                                .some(function (serverMethod) { return serverMethod.definition.name === methodDefinition.name; });\r\n                            if (nameAlreadyExists) {\r\n                                return [2, Promise.reject(\"A method with the name \\\"\" + methodDefinition.name + \"\\\" already exists! Please, provide a unique name for the method.\")];\r\n                            }\r\n                            if (methodDefinition.supportsStreaming) {\r\n                                return [2, Promise.reject(\"When you create methods with \\u201Cglue.interop.register()\\u201D or \\u201Cglue.interop.registerAsync()\\u201D the property \\u201CsupportsStreaming\\u201D cannot be \\u201Ctrue\\u201D. If you want \\u201C\" + methodDefinition.name + \"\\u201D to be a stream, please use the \\u201Cglue.interop.createStream()\\u201D method.\")];\r\n                            }\r\n                            repoMethod = this.serverRepository.add({\r\n                                definition: methodDefinition,\r\n                                theFunction: theFunction,\r\n                                protocolState: {},\r\n                            });\r\n                            return [2, this.protocol.server.register(repoMethod)\r\n                                    .catch(function (err) {\r\n                                    if (repoMethod === null || repoMethod === void 0 ? void 0 : repoMethod.repoId) {\r\n                                        _this.serverRepository.remove(repoMethod.repoId);\r\n                                    }\r\n                                    throw err;\r\n                                })];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Server.prototype.onMethodInvoked = function (methodToExecute, invocationId, invocationArgs) {\r\n            var _this = this;\r\n            if (!methodToExecute || !methodToExecute.theFunction) {\r\n                return;\r\n            }\r\n            methodToExecute.theFunction(invocationArgs, function (err, result) {\r\n                if (err !== undefined && err !== null) {\r\n                    if (err.message && typeof err.message === \"string\") {\r\n                        err = err.message;\r\n                    }\r\n                    else if (typeof err !== \"string\") {\r\n                        try {\r\n                            err = JSON.stringify(err);\r\n                        }\r\n                        catch (unStrException) {\r\n                            err = \"un-stringifyable error in onMethodInvoked! Top level prop names: \" + Object.keys(err);\r\n                        }\r\n                    }\r\n                }\r\n                if (!result) {\r\n                    result = {};\r\n                }\r\n                else if (typeof result !== \"object\" || Array.isArray(result)) {\r\n                    result = { _value: result };\r\n                }\r\n                _this.protocol.server.methodInvocationResult(methodToExecute, invocationId, err, result);\r\n            });\r\n        };\r\n        return Server;\r\n    }());\n\n    var InstanceWrapper = (function () {\r\n        function InstanceWrapper(API, instance, connection) {\r\n            var _this = this;\r\n            this.wrapped = {};\r\n            this.wrapped.getMethods = function () {\r\n                return API.methodsForInstance(this);\r\n            };\r\n            this.wrapped.getStreams = function () {\r\n                return API.methodsForInstance(this).filter(function (m) { return m.supportsStreaming; });\r\n            };\r\n            if (instance) {\r\n                this.refreshWrappedObject(instance);\r\n            }\r\n            if (connection) {\r\n                connection.loggedIn(function () {\r\n                    _this.refresh(connection);\r\n                });\r\n                this.refresh(connection);\r\n            }\r\n        }\r\n        InstanceWrapper.prototype.unwrap = function () {\r\n            return this.wrapped;\r\n        };\r\n        InstanceWrapper.prototype.refresh = function (connection) {\r\n            if (!connection) {\r\n                return;\r\n            }\r\n            var resolvedIdentity = connection === null || connection === void 0 ? void 0 : connection.resolvedIdentity;\r\n            var instance = Object.assign({}, resolvedIdentity !== null && resolvedIdentity !== void 0 ? resolvedIdentity : {}, { peerId: connection === null || connection === void 0 ? void 0 : connection.peerId });\r\n            this.refreshWrappedObject(instance);\r\n        };\r\n        InstanceWrapper.prototype.refreshWrappedObject = function (resolvedIdentity) {\r\n            var _a, _b, _c;\r\n            this.wrapped.user = resolvedIdentity.user;\r\n            this.wrapped.instance = resolvedIdentity.instance;\r\n            this.wrapped.application = (_a = resolvedIdentity.application) !== null && _a !== void 0 ? _a : shortid();\r\n            this.wrapped.applicationName = resolvedIdentity.applicationName;\r\n            this.wrapped.pid = (_c = (_b = resolvedIdentity.pid) !== null && _b !== void 0 ? _b : resolvedIdentity.process) !== null && _c !== void 0 ? _c : Math.floor(Math.random() * 10000000000);\r\n            this.wrapped.machine = resolvedIdentity.machine;\r\n            this.wrapped.environment = resolvedIdentity.environment;\r\n            this.wrapped.region = resolvedIdentity.region;\r\n            this.wrapped.windowId = resolvedIdentity.windowId;\r\n            this.wrapped.isLocal = true;\r\n            this.wrapped.api = resolvedIdentity.api;\r\n            this.wrapped.service = resolvedIdentity.service;\r\n            this.wrapped.peerId = resolvedIdentity.peerId;\r\n        };\r\n        return InstanceWrapper;\r\n    }());\n\n    var hideMethodSystemFlags = function (method) {\r\n        return __assign$1(__assign$1({}, method), { flags: method.flags.metadata || {} });\r\n    };\r\n    var ClientRepository = (function () {\r\n        function ClientRepository(logger, API) {\r\n            this.logger = logger;\r\n            this.API = API;\r\n            this.servers = {};\r\n            this.methodsCount = {};\r\n            this.callbacks = lib();\r\n            var peerId = this.API.instance.peerId;\r\n            this.myServer = {\r\n                id: peerId,\r\n                methods: {},\r\n                instance: this.API.instance,\r\n                wrapper: this.API.unwrappedInstance,\r\n            };\r\n            this.servers[peerId] = this.myServer;\r\n        }\r\n        ClientRepository.prototype.addServer = function (info, serverId) {\r\n            this.logger.debug(\"adding server \" + serverId);\r\n            var current = this.servers[serverId];\r\n            if (current) {\r\n                return current.id;\r\n            }\r\n            var wrapper = new InstanceWrapper(this.API, info);\r\n            var serverEntry = {\r\n                id: serverId,\r\n                methods: {},\r\n                instance: wrapper.unwrap(),\r\n                wrapper: wrapper,\r\n            };\r\n            this.servers[serverId] = serverEntry;\r\n            this.callbacks.execute(\"onServerAdded\", serverEntry.instance);\r\n            return serverId;\r\n        };\r\n        ClientRepository.prototype.removeServerById = function (id, reason) {\r\n            var _this = this;\r\n            var server = this.servers[id];\r\n            if (!server) {\r\n                this.logger.warn(\"not aware of server \" + id + \", my state \" + JSON.stringify(Object.keys(this.servers)));\r\n                return;\r\n            }\r\n            else {\r\n                this.logger.debug(\"removing server \" + id);\r\n            }\r\n            Object.keys(server.methods).forEach(function (methodId) {\r\n                _this.removeServerMethod(id, methodId);\r\n            });\r\n            delete this.servers[id];\r\n            this.callbacks.execute(\"onServerRemoved\", server.instance, reason);\r\n        };\r\n        ClientRepository.prototype.addServerMethod = function (serverId, method) {\r\n            var _a;\r\n            var server = this.servers[serverId];\r\n            if (!server) {\r\n                throw new Error(\"server does not exists\");\r\n            }\r\n            if (server.methods[method.id]) {\r\n                return;\r\n            }\r\n            var identifier = this.createMethodIdentifier(method);\r\n            var that = this;\r\n            var methodDefinition = {\r\n                identifier: identifier,\r\n                gatewayId: method.id,\r\n                name: method.name,\r\n                displayName: method.display_name,\r\n                description: method.description,\r\n                version: method.version,\r\n                objectTypes: method.object_types || [],\r\n                accepts: method.input_signature,\r\n                returns: method.result_signature,\r\n                supportsStreaming: typeof method.flags !== \"undefined\" ? method.flags.streaming : false,\r\n                flags: (_a = method.flags) !== null && _a !== void 0 ? _a : {},\r\n                getServers: function () {\r\n                    return that.getServersByMethod(identifier);\r\n                }\r\n            };\r\n            methodDefinition.object_types = methodDefinition.objectTypes;\r\n            methodDefinition.display_name = methodDefinition.displayName;\r\n            methodDefinition.version = methodDefinition.version;\r\n            server.methods[method.id] = methodDefinition;\r\n            var clientMethodDefinition = hideMethodSystemFlags(methodDefinition);\r\n            if (!this.methodsCount[identifier]) {\r\n                this.methodsCount[identifier] = 0;\r\n                this.callbacks.execute(\"onMethodAdded\", clientMethodDefinition);\r\n            }\r\n            this.methodsCount[identifier] = this.methodsCount[identifier] + 1;\r\n            this.callbacks.execute(\"onServerMethodAdded\", server.instance, clientMethodDefinition);\r\n            return methodDefinition;\r\n        };\r\n        ClientRepository.prototype.removeServerMethod = function (serverId, methodId) {\r\n            var server = this.servers[serverId];\r\n            if (!server) {\r\n                throw new Error(\"server does not exists\");\r\n            }\r\n            var method = server.methods[methodId];\r\n            delete server.methods[methodId];\r\n            var clientMethodDefinition = hideMethodSystemFlags(method);\r\n            this.methodsCount[method.identifier] = this.methodsCount[method.identifier] - 1;\r\n            if (this.methodsCount[method.identifier] === 0) {\r\n                this.callbacks.execute(\"onMethodRemoved\", clientMethodDefinition);\r\n            }\r\n            this.callbacks.execute(\"onServerMethodRemoved\", server.instance, clientMethodDefinition);\r\n        };\r\n        ClientRepository.prototype.getMethods = function () {\r\n            return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags);\r\n        };\r\n        ClientRepository.prototype.getServers = function () {\r\n            return Object.values(this.servers).map(this.hideServerMethodSystemFlags);\r\n        };\r\n        ClientRepository.prototype.onServerAdded = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onServerAdded\", callback);\r\n            var serversWithMethodsToReplay = this.getServers().map(function (s) { return s.instance; });\r\n            return this.returnUnsubWithDelayedReplay(unsubscribeFunc, serversWithMethodsToReplay, callback);\r\n        };\r\n        ClientRepository.prototype.onMethodAdded = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onMethodAdded\", callback);\r\n            var methodsToReplay = this.getMethods();\r\n            return this.returnUnsubWithDelayedReplay(unsubscribeFunc, methodsToReplay, callback);\r\n        };\r\n        ClientRepository.prototype.onServerMethodAdded = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onServerMethodAdded\", callback);\r\n            var unsubCalled = false;\r\n            var servers = this.getServers();\r\n            setTimeout(function () {\r\n                servers.forEach(function (server) {\r\n                    var methods = server.methods;\r\n                    Object.keys(methods).forEach(function (methodId) {\r\n                        if (!unsubCalled) {\r\n                            callback(server.instance, methods[methodId]);\r\n                        }\r\n                    });\r\n                });\r\n            }, 0);\r\n            return function () {\r\n                unsubCalled = true;\r\n                unsubscribeFunc();\r\n            };\r\n        };\r\n        ClientRepository.prototype.onMethodRemoved = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onMethodRemoved\", callback);\r\n            return unsubscribeFunc;\r\n        };\r\n        ClientRepository.prototype.onServerRemoved = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onServerRemoved\", callback);\r\n            return unsubscribeFunc;\r\n        };\r\n        ClientRepository.prototype.onServerMethodRemoved = function (callback) {\r\n            var unsubscribeFunc = this.callbacks.add(\"onServerMethodRemoved\", callback);\r\n            return unsubscribeFunc;\r\n        };\r\n        ClientRepository.prototype.getServerById = function (id) {\r\n            return this.hideServerMethodSystemFlags(this.servers[id]);\r\n        };\r\n        ClientRepository.prototype.reset = function () {\r\n            var _a;\r\n            var _this = this;\r\n            Object.keys(this.servers).forEach(function (key) {\r\n                _this.removeServerById(key, \"reset\");\r\n            });\r\n            this.servers = (_a = {},\r\n                _a[this.myServer.id] = this.myServer,\r\n                _a);\r\n            this.methodsCount = {};\r\n        };\r\n        ClientRepository.prototype.createMethodIdentifier = function (methodInfo) {\r\n            var accepts = methodInfo.input_signature !== undefined ? methodInfo.input_signature : \"\";\r\n            var returns = methodInfo.result_signature !== undefined ? methodInfo.result_signature : \"\";\r\n            return (methodInfo.name + accepts + returns).toLowerCase();\r\n        };\r\n        ClientRepository.prototype.getServersByMethod = function (identifier) {\r\n            var allServers = [];\r\n            Object.values(this.servers).forEach(function (server) {\r\n                Object.values(server.methods).forEach(function (method) {\r\n                    if (method.identifier === identifier) {\r\n                        allServers.push(server.instance);\r\n                    }\r\n                });\r\n            });\r\n            return allServers;\r\n        };\r\n        ClientRepository.prototype.returnUnsubWithDelayedReplay = function (unsubscribeFunc, collectionToReplay, callback) {\r\n            var unsubCalled = false;\r\n            setTimeout(function () {\r\n                collectionToReplay.forEach(function (item) {\r\n                    if (!unsubCalled) {\r\n                        callback(item);\r\n                    }\r\n                });\r\n            }, 0);\r\n            return function () {\r\n                unsubCalled = true;\r\n                unsubscribeFunc();\r\n            };\r\n        };\r\n        ClientRepository.prototype.hideServerMethodSystemFlags = function (server) {\r\n            var clientMethods = {};\r\n            Object.entries(server.methods).forEach(function (_a) {\r\n                var name = _a[0], method = _a[1];\r\n                clientMethods[name] = hideMethodSystemFlags(method);\r\n            });\r\n            return __assign$1(__assign$1({}, server), { methods: clientMethods });\r\n        };\r\n        ClientRepository.prototype.extractMethodsFromServers = function (servers) {\r\n            var methods = Object.values(servers).reduce(function (clientMethods, server) {\r\n                return __spreadArrays(clientMethods, Object.values(server.methods));\r\n            }, []);\r\n            return methods;\r\n        };\r\n        return ClientRepository;\r\n    }());\n\n    var ServerRepository = (function () {\r\n        function ServerRepository() {\r\n            this.nextId = 0;\r\n            this.methods = [];\r\n        }\r\n        ServerRepository.prototype.add = function (method) {\r\n            method.repoId = String(this.nextId);\r\n            this.nextId += 1;\r\n            this.methods.push(method);\r\n            return method;\r\n        };\r\n        ServerRepository.prototype.remove = function (repoId) {\r\n            if (typeof repoId !== \"string\") {\r\n                return new TypeError(\"Expecting a string\");\r\n            }\r\n            this.methods = this.methods.filter(function (m) {\r\n                return m.repoId !== repoId;\r\n            });\r\n        };\r\n        ServerRepository.prototype.getById = function (id) {\r\n            if (typeof id !== \"string\") {\r\n                return undefined;\r\n            }\r\n            return this.methods.find(function (m) {\r\n                return m.repoId === id;\r\n            });\r\n        };\r\n        ServerRepository.prototype.getList = function () {\r\n            return this.methods.map(function (m) { return m; });\r\n        };\r\n        ServerRepository.prototype.length = function () {\r\n            return this.methods.length;\r\n        };\r\n        ServerRepository.prototype.reset = function () {\r\n            this.methods = [];\r\n        };\r\n        return ServerRepository;\r\n    }());\n\n    var SUBSCRIPTION_REQUEST = \"onSubscriptionRequest\";\r\n    var SUBSCRIPTION_ADDED = \"onSubscriptionAdded\";\r\n    var SUBSCRIPTION_REMOVED = \"onSubscriptionRemoved\";\r\n    var ServerStreaming$1 = (function () {\r\n        function ServerStreaming(session, repository, serverRepository) {\r\n            var _this = this;\r\n            this.session = session;\r\n            this.repository = repository;\r\n            this.serverRepository = serverRepository;\r\n            this.ERR_URI_SUBSCRIPTION_FAILED = \"com.tick42.agm.errors.subscription.failure\";\r\n            this.callbacks = lib();\r\n            this.nextStreamId = 0;\r\n            session.on(\"add-interest\", function (msg) {\r\n                _this.handleAddInterest(msg);\r\n            });\r\n            session.on(\"remove-interest\", function (msg) {\r\n                _this.handleRemoveInterest(msg);\r\n            });\r\n        }\r\n        ServerStreaming.prototype.acceptRequestOnBranch = function (requestContext, streamingMethod, branch) {\r\n            if (typeof branch !== \"string\") {\r\n                branch = \"\";\r\n            }\r\n            if (typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n                throw new TypeError(\"The streaming method is missing its subscriptions.\");\r\n            }\r\n            if (!Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n                throw new TypeError(\"The streaming method is missing its branches.\");\r\n            }\r\n            var streamId = this.getStreamId(streamingMethod, branch);\r\n            var key = requestContext.msg.subscription_id;\r\n            var subscription = {\r\n                id: key,\r\n                arguments: requestContext.arguments,\r\n                instance: requestContext.instance,\r\n                branchKey: branch,\r\n                streamId: streamId,\r\n                subscribeMsg: requestContext.msg,\r\n            };\r\n            streamingMethod.protocolState.subscriptionsMap[key] = subscription;\r\n            this.session.sendFireAndForget({\r\n                type: \"accepted\",\r\n                subscription_id: key,\r\n                stream_id: streamId,\r\n            });\r\n            this.callbacks.execute(SUBSCRIPTION_ADDED, subscription, streamingMethod);\r\n        };\r\n        ServerStreaming.prototype.rejectRequest = function (requestContext, streamingMethod, reason) {\r\n            if (typeof reason !== \"string\") {\r\n                reason = \"\";\r\n            }\r\n            this.sendSubscriptionFailed(\"Subscription rejected by user. \" + reason, requestContext.msg.subscription_id);\r\n        };\r\n        ServerStreaming.prototype.pushData = function (streamingMethod, data, branches) {\r\n            var _this = this;\r\n            if (typeof streamingMethod !== \"object\" || !Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n                return;\r\n            }\r\n            if (typeof data !== \"object\") {\r\n                throw new Error(\"Invalid arguments. Data must be an object.\");\r\n            }\r\n            if (typeof branches === \"string\") {\r\n                branches = [branches];\r\n            }\r\n            else if (!Array.isArray(branches) || branches.length <= 0) {\r\n                branches = [];\r\n            }\r\n            var streamIdList = streamingMethod.protocolState.branchKeyToStreamIdMap\r\n                .filter(function (br) {\r\n                if (!branches || branches.length === 0) {\r\n                    return true;\r\n                }\r\n                return branches.indexOf(br.key) >= 0;\r\n            }).map(function (br) {\r\n                return br.streamId;\r\n            });\r\n            streamIdList.forEach(function (streamId) {\r\n                var publishMessage = {\r\n                    type: \"publish\",\r\n                    stream_id: streamId,\r\n                    data: data,\r\n                };\r\n                _this.session.sendFireAndForget(publishMessage);\r\n            });\r\n        };\r\n        ServerStreaming.prototype.pushDataToSingle = function (method, subscription, data) {\r\n            if (typeof data !== \"object\") {\r\n                throw new Error(\"Invalid arguments. Data must be an object.\");\r\n            }\r\n            var postMessage = {\r\n                type: \"post\",\r\n                subscription_id: subscription.id,\r\n                data: data,\r\n            };\r\n            this.session.sendFireAndForget(postMessage);\r\n        };\r\n        ServerStreaming.prototype.closeSingleSubscription = function (streamingMethod, subscription) {\r\n            if (streamingMethod.protocolState.subscriptionsMap) {\r\n                delete streamingMethod.protocolState.subscriptionsMap[subscription.id];\r\n            }\r\n            var dropSubscriptionMessage = {\r\n                type: \"drop-subscription\",\r\n                subscription_id: subscription.id,\r\n                reason: \"Server dropping a single subscription\",\r\n            };\r\n            this.session.sendFireAndForget(dropSubscriptionMessage);\r\n            var subscriber = subscription.instance;\r\n            this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n        };\r\n        ServerStreaming.prototype.closeMultipleSubscriptions = function (streamingMethod, branchKey) {\r\n            var _this = this;\r\n            if (typeof streamingMethod !== \"object\" || typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n                return;\r\n            }\r\n            if (!streamingMethod.protocolState.subscriptionsMap) {\r\n                return;\r\n            }\r\n            var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n            var subscriptionsToClose = Object.keys(subscriptionsMap)\r\n                .map(function (key) {\r\n                return subscriptionsMap[key];\r\n            });\r\n            if (typeof branchKey === \"string\") {\r\n                subscriptionsToClose = subscriptionsToClose.filter(function (sub) {\r\n                    return sub.branchKey === branchKey;\r\n                });\r\n            }\r\n            subscriptionsToClose.forEach(function (subscription) {\r\n                delete subscriptionsMap[subscription.id];\r\n                var drop = {\r\n                    type: \"drop-subscription\",\r\n                    subscription_id: subscription.id,\r\n                    reason: \"Server dropping all subscriptions on stream_id: \" + subscription.streamId,\r\n                };\r\n                _this.session.sendFireAndForget(drop);\r\n            });\r\n        };\r\n        ServerStreaming.prototype.getSubscriptionList = function (streamingMethod, branchKey) {\r\n            if (typeof streamingMethod !== \"object\") {\r\n                return [];\r\n            }\r\n            var subscriptions = [];\r\n            if (!streamingMethod.protocolState.subscriptionsMap) {\r\n                return [];\r\n            }\r\n            var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n            var allSubscriptions = Object.keys(subscriptionsMap)\r\n                .map(function (key) {\r\n                return subscriptionsMap[key];\r\n            });\r\n            if (typeof branchKey !== \"string\") {\r\n                subscriptions = allSubscriptions;\r\n            }\r\n            else {\r\n                subscriptions = allSubscriptions.filter(function (sub) {\r\n                    return sub.branchKey === branchKey;\r\n                });\r\n            }\r\n            return subscriptions;\r\n        };\r\n        ServerStreaming.prototype.getBranchList = function (streamingMethod) {\r\n            if (typeof streamingMethod !== \"object\") {\r\n                return [];\r\n            }\r\n            if (!streamingMethod.protocolState.subscriptionsMap) {\r\n                return [];\r\n            }\r\n            var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n            var allSubscriptions = Object.keys(subscriptionsMap)\r\n                .map(function (key) {\r\n                return subscriptionsMap[key];\r\n            });\r\n            var result = [];\r\n            allSubscriptions.forEach(function (sub) {\r\n                var branch = \"\";\r\n                if (typeof sub === \"object\" && typeof sub.branchKey === \"string\") {\r\n                    branch = sub.branchKey;\r\n                }\r\n                if (result.indexOf(branch) === -1) {\r\n                    result.push(branch);\r\n                }\r\n            });\r\n            return result;\r\n        };\r\n        ServerStreaming.prototype.onSubAdded = function (callback) {\r\n            this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED, callback);\r\n        };\r\n        ServerStreaming.prototype.onSubRequest = function (callback) {\r\n            this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST, callback);\r\n        };\r\n        ServerStreaming.prototype.onSubRemoved = function (callback) {\r\n            this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED, callback);\r\n        };\r\n        ServerStreaming.prototype.handleRemoveInterest = function (msg) {\r\n            var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n            if (typeof msg.subscription_id !== \"string\" ||\r\n                typeof streamingMethod !== \"object\") {\r\n                return;\r\n            }\r\n            if (!streamingMethod.protocolState.subscriptionsMap) {\r\n                return;\r\n            }\r\n            if (typeof streamingMethod.protocolState.subscriptionsMap[msg.subscription_id] !== \"object\") {\r\n                return;\r\n            }\r\n            var subscription = streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n            delete streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n            this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n        };\r\n        ServerStreaming.prototype.onSubscriptionLifetimeEvent = function (eventName, handlerFunc) {\r\n            this.callbacks.add(eventName, handlerFunc);\r\n        };\r\n        ServerStreaming.prototype.getNextStreamId = function () {\r\n            return this.nextStreamId++ + \"\";\r\n        };\r\n        ServerStreaming.prototype.handleAddInterest = function (msg) {\r\n            var caller = this.repository.getServerById(msg.caller_id);\r\n            var instance = caller.instance;\r\n            var requestContext = {\r\n                msg: msg,\r\n                arguments: msg.arguments_kv || {},\r\n                instance: instance,\r\n            };\r\n            var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n            if (streamingMethod === undefined) {\r\n                var errorMsg = \"No method with id \" + msg.method_id + \" on this server.\";\r\n                this.sendSubscriptionFailed(errorMsg, msg.subscription_id);\r\n                return;\r\n            }\r\n            if (streamingMethod.protocolState.subscriptionsMap &&\r\n                streamingMethod.protocolState.subscriptionsMap[msg.subscription_id]) {\r\n                this.sendSubscriptionFailed(\"A subscription with id \" + msg.subscription_id + \" already exists.\", msg.subscription_id);\r\n                return;\r\n            }\r\n            this.callbacks.execute(SUBSCRIPTION_REQUEST, requestContext, streamingMethod);\r\n        };\r\n        ServerStreaming.prototype.sendSubscriptionFailed = function (reason, subscriptionId) {\r\n            var errorMessage = {\r\n                type: \"error\",\r\n                reason_uri: this.ERR_URI_SUBSCRIPTION_FAILED,\r\n                reason: reason,\r\n                request_id: subscriptionId,\r\n            };\r\n            this.session.sendFireAndForget(errorMessage);\r\n        };\r\n        ServerStreaming.prototype.getStreamId = function (streamingMethod, branchKey) {\r\n            if (typeof branchKey !== \"string\") {\r\n                branchKey = \"\";\r\n            }\r\n            if (!streamingMethod.protocolState.branchKeyToStreamIdMap) {\r\n                throw new Error(\"streaming \" + streamingMethod.definition.name + \" method without protocol state\");\r\n            }\r\n            var needleBranch = streamingMethod.protocolState.branchKeyToStreamIdMap.filter(function (branch) {\r\n                return branch.key === branchKey;\r\n            })[0];\r\n            var streamId = (needleBranch ? needleBranch.streamId : undefined);\r\n            if (typeof streamId !== \"string\" || streamId === \"\") {\r\n                streamId = this.getNextStreamId();\r\n                streamingMethod.protocolState.branchKeyToStreamIdMap.push({ key: branchKey, streamId: streamId });\r\n            }\r\n            return streamId;\r\n        };\r\n        return ServerStreaming;\r\n    }());\n\n    var ServerProtocol = (function () {\r\n        function ServerProtocol(session, clientRepository, serverRepository, logger) {\r\n            var _this = this;\r\n            this.session = session;\r\n            this.clientRepository = clientRepository;\r\n            this.serverRepository = serverRepository;\r\n            this.logger = logger;\r\n            this.callbacks = lib();\r\n            this.streaming = new ServerStreaming$1(session, clientRepository, serverRepository);\r\n            this.session.on(\"invoke\", function (msg) { return _this.handleInvokeMessage(msg); });\r\n        }\r\n        ServerProtocol.prototype.createStream = function (repoMethod) {\r\n            repoMethod.protocolState.subscriptionsMap = {};\r\n            repoMethod.protocolState.branchKeyToStreamIdMap = [];\r\n            return this.register(repoMethod, true);\r\n        };\r\n        ServerProtocol.prototype.register = function (repoMethod, isStreaming) {\r\n            var _this = this;\r\n            var _a;\r\n            var methodDef = repoMethod.definition;\r\n            var flags = Object.assign({}, { metadata: (_a = methodDef.flags) !== null && _a !== void 0 ? _a : {} }, { streaming: isStreaming || false });\r\n            var registerMsg = {\r\n                type: \"register\",\r\n                methods: [{\r\n                        id: repoMethod.repoId,\r\n                        name: methodDef.name,\r\n                        display_name: methodDef.displayName,\r\n                        description: methodDef.description,\r\n                        version: methodDef.version,\r\n                        flags: flags,\r\n                        object_types: methodDef.objectTypes || methodDef.object_types,\r\n                        input_signature: methodDef.accepts,\r\n                        result_signature: methodDef.returns,\r\n                        restrictions: undefined,\r\n                    }],\r\n            };\r\n            return this.session.send(registerMsg, { methodId: repoMethod.repoId })\r\n                .then(function () {\r\n                _this.logger.debug(\"registered method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId);\r\n            })\r\n                .catch(function (msg) {\r\n                _this.logger.warn(\"failed to register method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId + \" - \" + JSON.stringify(msg));\r\n                throw msg;\r\n            });\r\n        };\r\n        ServerProtocol.prototype.onInvoked = function (callback) {\r\n            this.callbacks.add(\"onInvoked\", callback);\r\n        };\r\n        ServerProtocol.prototype.methodInvocationResult = function (method, invocationId, err, result) {\r\n            var msg;\r\n            if (err || err === \"\") {\r\n                msg = {\r\n                    type: \"error\",\r\n                    request_id: invocationId,\r\n                    reason_uri: \"agm.errors.client_error\",\r\n                    reason: err,\r\n                    context: result,\r\n                    peer_id: undefined,\r\n                };\r\n            }\r\n            else {\r\n                msg = {\r\n                    type: \"yield\",\r\n                    invocation_id: invocationId,\r\n                    peer_id: this.session.peerId,\r\n                    result: result,\r\n                    request_id: undefined,\r\n                };\r\n            }\r\n            this.session.sendFireAndForget(msg);\r\n        };\r\n        ServerProtocol.prototype.unregister = function (method) {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var msg;\r\n                return __generator$1(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            msg = {\r\n                                type: \"unregister\",\r\n                                methods: [method.repoId],\r\n                            };\r\n                            return [4, this.session.send(msg)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ServerProtocol.prototype.getBranchList = function (method) {\r\n            return this.streaming.getBranchList(method);\r\n        };\r\n        ServerProtocol.prototype.getSubscriptionList = function (method, branchKey) {\r\n            return this.streaming.getSubscriptionList(method, branchKey);\r\n        };\r\n        ServerProtocol.prototype.closeAllSubscriptions = function (method, branchKey) {\r\n            this.streaming.closeMultipleSubscriptions(method, branchKey);\r\n        };\r\n        ServerProtocol.prototype.pushData = function (method, data, branches) {\r\n            this.streaming.pushData(method, data, branches);\r\n        };\r\n        ServerProtocol.prototype.pushDataToSingle = function (method, subscription, data) {\r\n            this.streaming.pushDataToSingle(method, subscription, data);\r\n        };\r\n        ServerProtocol.prototype.closeSingleSubscription = function (method, subscription) {\r\n            this.streaming.closeSingleSubscription(method, subscription);\r\n        };\r\n        ServerProtocol.prototype.acceptRequestOnBranch = function (requestContext, method, branch) {\r\n            this.streaming.acceptRequestOnBranch(requestContext, method, branch);\r\n        };\r\n        ServerProtocol.prototype.rejectRequest = function (requestContext, method, reason) {\r\n            this.streaming.rejectRequest(requestContext, method, reason);\r\n        };\r\n        ServerProtocol.prototype.onSubRequest = function (callback) {\r\n            this.streaming.onSubRequest(callback);\r\n        };\r\n        ServerProtocol.prototype.onSubAdded = function (callback) {\r\n            this.streaming.onSubAdded(callback);\r\n        };\r\n        ServerProtocol.prototype.onSubRemoved = function (callback) {\r\n            this.streaming.onSubRemoved(callback);\r\n        };\r\n        ServerProtocol.prototype.handleInvokeMessage = function (msg) {\r\n            var invocationId = msg.invocation_id;\r\n            var callerId = msg.caller_id;\r\n            var methodId = msg.method_id;\r\n            var args = msg.arguments_kv;\r\n            var methodList = this.serverRepository.getList();\r\n            var method = methodList.filter(function (m) {\r\n                return m.repoId === methodId;\r\n            })[0];\r\n            if (method === undefined) {\r\n                return;\r\n            }\r\n            var client = this.clientRepository.getServerById(callerId).instance;\r\n            var invocationArgs = { args: args, instance: client };\r\n            this.callbacks.execute(\"onInvoked\", method, invocationId, invocationArgs);\r\n        };\r\n        return ServerProtocol;\r\n    }());\n\n    var UserSubscription = (function () {\r\n        function UserSubscription(repository, subscriptionData) {\r\n            this.repository = repository;\r\n            this.subscriptionData = subscriptionData;\r\n        }\r\n        Object.defineProperty(UserSubscription.prototype, \"requestArguments\", {\r\n            get: function () {\r\n                return this.subscriptionData.params.arguments || {};\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(UserSubscription.prototype, \"servers\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return this.subscriptionData.trackedServers\r\n                    .filter(function (pair) { return pair.subscriptionId; })\r\n                    .map(function (pair) { return _this.repository.getServerById(pair.serverId).instance; });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(UserSubscription.prototype, \"serverInstance\", {\r\n            get: function () {\r\n                return this.servers[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(UserSubscription.prototype, \"stream\", {\r\n            get: function () {\r\n                return this.subscriptionData.method;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        UserSubscription.prototype.onData = function (dataCallback) {\r\n            if (typeof dataCallback !== \"function\") {\r\n                throw new TypeError(\"The data callback must be a function.\");\r\n            }\r\n            this.subscriptionData.handlers.onData.push(dataCallback);\r\n            if (this.subscriptionData.handlers.onData.length === 1 && this.subscriptionData.queued.data.length > 0) {\r\n                this.subscriptionData.queued.data.forEach(function (dataItem) {\r\n                    dataCallback(dataItem);\r\n                });\r\n            }\r\n        };\r\n        UserSubscription.prototype.onClosed = function (closedCallback) {\r\n            if (typeof closedCallback !== \"function\") {\r\n                throw new TypeError(\"The callback must be a function.\");\r\n            }\r\n            this.subscriptionData.handlers.onClosed.push(closedCallback);\r\n        };\r\n        UserSubscription.prototype.onFailed = function (callback) {\r\n        };\r\n        UserSubscription.prototype.onConnected = function (callback) {\r\n            if (typeof callback !== \"function\") {\r\n                throw new TypeError(\"The callback must be a function.\");\r\n            }\r\n            this.subscriptionData.handlers.onConnected.push(callback);\r\n        };\r\n        UserSubscription.prototype.close = function () {\r\n            this.subscriptionData.close();\r\n        };\r\n        UserSubscription.prototype.setNewSubscription = function (newSub) {\r\n            this.subscriptionData = newSub;\r\n        };\r\n        return UserSubscription;\r\n    }());\n\n    var STATUS_AWAITING_ACCEPT = \"awaitingAccept\";\r\n    var STATUS_SUBSCRIBED = \"subscribed\";\r\n    var ERR_MSG_SUB_FAILED = \"Subscription failed.\";\r\n    var ERR_MSG_SUB_REJECTED = \"Subscription rejected.\";\r\n    var ON_CLOSE_MSG_SERVER_INIT = \"ServerInitiated\";\r\n    var ON_CLOSE_MSG_CLIENT_INIT = \"ClientInitiated\";\r\n    var ClientStreaming = (function () {\r\n        function ClientStreaming(session, repository, logger) {\r\n            var _this = this;\r\n            this.session = session;\r\n            this.repository = repository;\r\n            this.logger = logger;\r\n            this.subscriptionsList = {};\r\n            this.subscriptionIdToLocalKeyMap = {};\r\n            this.nextSubLocalKey = 0;\r\n            this.handleErrorSubscribing = function (errorResponse) {\r\n                var tag = errorResponse._tag;\r\n                var subLocalKey = tag.subLocalKey;\r\n                var pendingSub = _this.subscriptionsList[subLocalKey];\r\n                if (typeof pendingSub !== \"object\") {\r\n                    return;\r\n                }\r\n                pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                    return server.serverId !== tag.serverId;\r\n                });\r\n                if (pendingSub.trackedServers.length <= 0) {\r\n                    clearTimeout(pendingSub.timeoutId);\r\n                    if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                        var reason = (typeof errorResponse.reason === \"string\" && errorResponse.reason !== \"\") ?\r\n                            ' Publisher said \"' + errorResponse.reason + '\".' :\r\n                            \" No reason given.\";\r\n                        var callArgs = typeof pendingSub.params.arguments === \"object\" ?\r\n                            JSON.stringify(pendingSub.params.arguments) :\r\n                            \"{}\";\r\n                        pendingSub.error({\r\n                            message: ERR_MSG_SUB_REJECTED + reason + \" Called with:\" + callArgs,\r\n                            called_with: pendingSub.params.arguments,\r\n                            method: pendingSub.method,\r\n                        });\r\n                    }\r\n                    else if (pendingSub.status === STATUS_SUBSCRIBED) {\r\n                        _this.callOnClosedHandlers(pendingSub);\r\n                    }\r\n                    delete _this.subscriptionsList[subLocalKey];\r\n                }\r\n            };\r\n            this.handleSubscribed = function (msg) {\r\n                var subLocalKey = msg._tag.subLocalKey;\r\n                var pendingSub = _this.subscriptionsList[subLocalKey];\r\n                if (typeof pendingSub !== \"object\") {\r\n                    return;\r\n                }\r\n                var serverId = msg._tag.serverId;\r\n                var acceptingServer = pendingSub.trackedServers\r\n                    .filter(function (server) {\r\n                    return server.serverId === serverId;\r\n                })[0];\r\n                if (typeof acceptingServer !== \"object\") {\r\n                    return;\r\n                }\r\n                acceptingServer.subscriptionId = msg.subscription_id;\r\n                _this.subscriptionIdToLocalKeyMap[msg.subscription_id] = subLocalKey;\r\n                var isFirstResponse = (pendingSub.status === STATUS_AWAITING_ACCEPT);\r\n                pendingSub.status = STATUS_SUBSCRIBED;\r\n                if (isFirstResponse) {\r\n                    var reconnect = false;\r\n                    var sub = pendingSub.subscription;\r\n                    if (sub) {\r\n                        sub.setNewSubscription(pendingSub);\r\n                        pendingSub.success(sub);\r\n                        reconnect = true;\r\n                    }\r\n                    else {\r\n                        sub = new UserSubscription(_this.repository, pendingSub);\r\n                        pendingSub.subscription = sub;\r\n                        pendingSub.success(sub);\r\n                    }\r\n                    for (var _i = 0, _a = pendingSub.handlers.onConnected; _i < _a.length; _i++) {\r\n                        var handler = _a[_i];\r\n                        try {\r\n                            handler(sub.serverInstance, reconnect);\r\n                        }\r\n                        catch (e) {\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            this.handleEventData = function (msg) {\r\n                var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n                if (typeof subLocalKey === \"undefined\") {\r\n                    return;\r\n                }\r\n                var subscription = _this.subscriptionsList[subLocalKey];\r\n                if (typeof subscription !== \"object\") {\r\n                    return;\r\n                }\r\n                var trackedServersFound = subscription.trackedServers.filter(function (server) {\r\n                    return server.subscriptionId === msg.subscription_id;\r\n                });\r\n                if (trackedServersFound.length !== 1) {\r\n                    return;\r\n                }\r\n                var isPrivateData = msg.oob;\r\n                var sendingServerId = trackedServersFound[0].serverId;\r\n                var receivedStreamData = function () {\r\n                    return {\r\n                        data: msg.data,\r\n                        server: _this.repository.getServerById(sendingServerId).instance,\r\n                        requestArguments: subscription.params.arguments,\r\n                        message: undefined,\r\n                        private: isPrivateData,\r\n                    };\r\n                };\r\n                var onDataHandlers = subscription.handlers.onData;\r\n                var queuedData = subscription.queued.data;\r\n                if (onDataHandlers.length > 0) {\r\n                    onDataHandlers.forEach(function (callback) {\r\n                        if (typeof callback === \"function\") {\r\n                            callback(receivedStreamData());\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    queuedData.push(receivedStreamData());\r\n                }\r\n            };\r\n            this.handleSubscriptionCancelled = function (msg) {\r\n                var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n                if (typeof subLocalKey === \"undefined\") {\r\n                    return;\r\n                }\r\n                var subscription = _this.subscriptionsList[subLocalKey];\r\n                if (typeof subscription !== \"object\") {\r\n                    return;\r\n                }\r\n                var expectedNewLength = subscription.trackedServers.length - 1;\r\n                subscription.trackedServers = subscription.trackedServers.filter(function (server) {\r\n                    if (server.subscriptionId === msg.subscription_id) {\r\n                        subscription.queued.closers.push(server.serverId);\r\n                        return false;\r\n                    }\r\n                    else {\r\n                        return true;\r\n                    }\r\n                });\r\n                if (subscription.trackedServers.length !== expectedNewLength) {\r\n                    return;\r\n                }\r\n                if (subscription.trackedServers.length <= 0) {\r\n                    clearTimeout(subscription.timeoutId);\r\n                    _this.callOnClosedHandlers(subscription);\r\n                    delete _this.subscriptionsList[subLocalKey];\r\n                }\r\n                delete _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n            };\r\n            session.on(\"subscribed\", this.handleSubscribed);\r\n            session.on(\"event\", this.handleEventData);\r\n            session.on(\"subscription-cancelled\", this.handleSubscriptionCancelled);\r\n        }\r\n        ClientStreaming.prototype.subscribe = function (streamingMethod, params, targetServers, success, error, existingSub) {\r\n            var _this = this;\r\n            if (targetServers.length === 0) {\r\n                error({\r\n                    method: streamingMethod,\r\n                    called_with: params.arguments,\r\n                    message: ERR_MSG_SUB_FAILED + \" No available servers matched the target params.\",\r\n                });\r\n                return;\r\n            }\r\n            var subLocalKey = this.getNextSubscriptionLocalKey();\r\n            var pendingSub = this.registerSubscription(subLocalKey, streamingMethod, params, success, error, params.methodResponseTimeout || 10000, existingSub);\r\n            if (typeof pendingSub !== \"object\") {\r\n                error({\r\n                    method: streamingMethod,\r\n                    called_with: params.arguments,\r\n                    message: ERR_MSG_SUB_FAILED + \" Unable to register the user callbacks.\",\r\n                });\r\n                return;\r\n            }\r\n            targetServers.forEach(function (target) {\r\n                var serverId = target.server.id;\r\n                var method = target.methods.find(function (m) { return m.name === streamingMethod.name; });\r\n                if (!method) {\r\n                    _this.logger.error(\"can not find method \" + streamingMethod.name + \" for target \" + target.server.id);\r\n                    return;\r\n                }\r\n                pendingSub.trackedServers.push({\r\n                    serverId: serverId,\r\n                    subscriptionId: undefined,\r\n                });\r\n                var msg = {\r\n                    type: \"subscribe\",\r\n                    server_id: serverId,\r\n                    method_id: method.gatewayId,\r\n                    arguments_kv: params.arguments,\r\n                };\r\n                _this.session.send(msg, { serverId: serverId, subLocalKey: subLocalKey })\r\n                    .then(function (m) { return _this.handleSubscribed(m); })\r\n                    .catch(function (err) { return _this.handleErrorSubscribing(err); });\r\n            });\r\n        };\r\n        ClientStreaming.prototype.drainSubscriptions = function () {\r\n            var existing = Object.values(this.subscriptionsList);\r\n            this.subscriptionsList = {};\r\n            this.subscriptionIdToLocalKeyMap = {};\r\n            return existing;\r\n        };\r\n        ClientStreaming.prototype.getNextSubscriptionLocalKey = function () {\r\n            var current = this.nextSubLocalKey;\r\n            this.nextSubLocalKey += 1;\r\n            return current;\r\n        };\r\n        ClientStreaming.prototype.registerSubscription = function (subLocalKey, method, params, success, error, timeout, existingSub) {\r\n            var _this = this;\r\n            var subsInfo = {\r\n                localKey: subLocalKey,\r\n                status: STATUS_AWAITING_ACCEPT,\r\n                method: method,\r\n                params: params,\r\n                success: success,\r\n                error: error,\r\n                trackedServers: [],\r\n                handlers: {\r\n                    onData: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onData) || [],\r\n                    onClosed: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onClosed) || [],\r\n                    onConnected: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onConnected) || [],\r\n                },\r\n                queued: {\r\n                    data: [],\r\n                    closers: [],\r\n                },\r\n                timeoutId: undefined,\r\n                close: function () { return _this.closeSubscription(subLocalKey); },\r\n                subscription: existingSub === null || existingSub === void 0 ? void 0 : existingSub.subscription\r\n            };\r\n            if (!existingSub) {\r\n                if (params.onData) {\r\n                    subsInfo.handlers.onData.push(params.onData);\r\n                }\r\n                if (params.onClosed) {\r\n                    subsInfo.handlers.onClosed.push(params.onClosed);\r\n                }\r\n                if (params.onConnected) {\r\n                    subsInfo.handlers.onConnected.push(params.onConnected);\r\n                }\r\n            }\r\n            this.subscriptionsList[subLocalKey] = subsInfo;\r\n            subsInfo.timeoutId = setTimeout(function () {\r\n                if (_this.subscriptionsList[subLocalKey] === undefined) {\r\n                    return;\r\n                }\r\n                var pendingSub = _this.subscriptionsList[subLocalKey];\r\n                if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                    error({\r\n                        method: method,\r\n                        called_with: params.arguments,\r\n                        message: ERR_MSG_SUB_FAILED + \" Subscription attempt timed out after \" + timeout + \" ms.\",\r\n                    });\r\n                    delete _this.subscriptionsList[subLocalKey];\r\n                }\r\n                else if (pendingSub.status === STATUS_SUBSCRIBED && pendingSub.trackedServers.length > 0) {\r\n                    pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                        return (typeof server.subscriptionId !== \"undefined\");\r\n                    });\r\n                    delete pendingSub.timeoutId;\r\n                    if (pendingSub.trackedServers.length <= 0) {\r\n                        _this.callOnClosedHandlers(pendingSub);\r\n                        delete _this.subscriptionsList[subLocalKey];\r\n                    }\r\n                }\r\n            }, timeout);\r\n            return subsInfo;\r\n        };\r\n        ClientStreaming.prototype.callOnClosedHandlers = function (subscription, reason) {\r\n            var closersCount = subscription.queued.closers.length;\r\n            var closingServerId = (closersCount > 0) ? subscription.queued.closers[closersCount - 1] : null;\r\n            var closingServer;\r\n            if (closingServerId !== undefined && typeof closingServerId === \"string\") {\r\n                closingServer = this.repository.getServerById(closingServerId).instance;\r\n            }\r\n            subscription.handlers.onClosed.forEach(function (callback) {\r\n                if (typeof callback !== \"function\") {\r\n                    return;\r\n                }\r\n                callback({\r\n                    message: reason || ON_CLOSE_MSG_SERVER_INIT,\r\n                    requestArguments: subscription.params.arguments || {},\r\n                    server: closingServer,\r\n                    stream: subscription.method,\r\n                });\r\n            });\r\n        };\r\n        ClientStreaming.prototype.closeSubscription = function (subLocalKey) {\r\n            var _this = this;\r\n            var subscription = this.subscriptionsList[subLocalKey];\r\n            if (typeof subscription !== \"object\") {\r\n                return;\r\n            }\r\n            subscription.trackedServers.forEach(function (server) {\r\n                if (typeof server.subscriptionId === \"undefined\") {\r\n                    return;\r\n                }\r\n                subscription.queued.closers.push(server.serverId);\r\n                _this.session.sendFireAndForget({\r\n                    type: \"unsubscribe\",\r\n                    subscription_id: server.subscriptionId,\r\n                    reason_uri: \"\",\r\n                    reason: ON_CLOSE_MSG_CLIENT_INIT,\r\n                });\r\n                delete _this.subscriptionIdToLocalKeyMap[server.subscriptionId];\r\n            });\r\n            subscription.trackedServers = [];\r\n            this.callOnClosedHandlers(subscription, ON_CLOSE_MSG_CLIENT_INIT);\r\n            delete this.subscriptionsList[subLocalKey];\r\n        };\r\n        return ClientStreaming;\r\n    }());\n\n    var ClientProtocol = (function () {\r\n        function ClientProtocol(session, repository, logger) {\r\n            var _this = this;\r\n            this.session = session;\r\n            this.repository = repository;\r\n            this.logger = logger;\r\n            session.on(\"peer-added\", function (msg) { return _this.handlePeerAdded(msg); });\r\n            session.on(\"peer-removed\", function (msg) { return _this.handlePeerRemoved(msg); });\r\n            session.on(\"methods-added\", function (msg) { return _this.handleMethodsAddedMessage(msg); });\r\n            session.on(\"methods-removed\", function (msg) { return _this.handleMethodsRemovedMessage(msg); });\r\n            this.streaming = new ClientStreaming(session, repository, logger);\r\n        }\r\n        ClientProtocol.prototype.subscribe = function (stream, options, targetServers, success, error, existingSub) {\r\n            this.streaming.subscribe(stream, options, targetServers, success, error, existingSub);\r\n        };\r\n        ClientProtocol.prototype.invoke = function (id, method, args, target) {\r\n            var _this = this;\r\n            var serverId = target.id;\r\n            var methodId = method.gatewayId;\r\n            var msg = {\r\n                type: \"call\",\r\n                server_id: serverId,\r\n                method_id: methodId,\r\n                arguments_kv: args,\r\n            };\r\n            return this.session.send(msg, { invocationId: id, serverId: serverId })\r\n                .then(function (m) { return _this.handleResultMessage(m); })\r\n                .catch(function (err) { return _this.handleInvocationError(err); });\r\n        };\r\n        ClientProtocol.prototype.drainSubscriptions = function () {\r\n            return this.streaming.drainSubscriptions();\r\n        };\r\n        ClientProtocol.prototype.handlePeerAdded = function (msg) {\r\n            var newPeerId = msg.new_peer_id;\r\n            var remoteId = msg.identity;\r\n            var isLocal = msg.meta ? msg.meta.local : true;\r\n            var pid = Number(remoteId.process);\r\n            var serverInfo = {\r\n                machine: remoteId.machine,\r\n                pid: isNaN(pid) ? remoteId.process : pid,\r\n                instance: remoteId.instance,\r\n                application: remoteId.application,\r\n                applicationName: remoteId.applicationName,\r\n                environment: remoteId.environment,\r\n                region: remoteId.region,\r\n                user: remoteId.user,\r\n                windowId: remoteId.windowId,\r\n                peerId: newPeerId,\r\n                api: remoteId.api,\r\n                isLocal: isLocal\r\n            };\r\n            this.repository.addServer(serverInfo, newPeerId);\r\n        };\r\n        ClientProtocol.prototype.handlePeerRemoved = function (msg) {\r\n            var removedPeerId = msg.removed_id;\r\n            var reason = msg.reason;\r\n            this.repository.removeServerById(removedPeerId, reason);\r\n        };\r\n        ClientProtocol.prototype.handleMethodsAddedMessage = function (msg) {\r\n            var _this = this;\r\n            var serverId = msg.server_id;\r\n            var methods = msg.methods;\r\n            methods.forEach(function (method) {\r\n                _this.repository.addServerMethod(serverId, method);\r\n            });\r\n        };\r\n        ClientProtocol.prototype.handleMethodsRemovedMessage = function (msg) {\r\n            var _this = this;\r\n            var serverId = msg.server_id;\r\n            var methodIdList = msg.methods;\r\n            var server = this.repository.getServerById(serverId);\r\n            var serverMethodKeys = Object.keys(server.methods);\r\n            serverMethodKeys.forEach(function (methodKey) {\r\n                var method = server.methods[methodKey];\r\n                if (methodIdList.indexOf(method.gatewayId) > -1) {\r\n                    _this.repository.removeServerMethod(serverId, methodKey);\r\n                }\r\n            });\r\n        };\r\n        ClientProtocol.prototype.handleResultMessage = function (msg) {\r\n            var invocationId = msg._tag.invocationId;\r\n            var result = msg.result;\r\n            var serverId = msg._tag.serverId;\r\n            var server = this.repository.getServerById(serverId);\r\n            return {\r\n                invocationId: invocationId,\r\n                result: result,\r\n                instance: server.instance,\r\n                status: InvokeStatus.Success,\r\n                message: \"\"\r\n            };\r\n        };\r\n        ClientProtocol.prototype.handleInvocationError = function (msg) {\r\n            this.logger.debug(\"handle invocation error \" + JSON.stringify(msg));\r\n            if (\"_tag\" in msg) {\r\n                var invocationId = msg._tag.invocationId;\r\n                var serverId = msg._tag.serverId;\r\n                var server = this.repository.getServerById(serverId);\r\n                var message = msg.reason;\r\n                var context_1 = msg.context;\r\n                return {\r\n                    invocationId: invocationId,\r\n                    result: context_1,\r\n                    instance: server.instance,\r\n                    status: InvokeStatus.Error,\r\n                    message: message\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    invocationId: \"\",\r\n                    message: msg.message,\r\n                    status: InvokeStatus.Error,\r\n                    error: msg\r\n                };\r\n            }\r\n        };\r\n        return ClientProtocol;\r\n    }());\n\n    function gW3ProtocolFactory (instance, connection, clientRepository, serverRepository, libConfig, interop) {\r\n        var logger = libConfig.logger.subLogger(\"gw3-protocol\");\r\n        var resolveReadyPromise;\r\n        var readyPromise = new Promise(function (resolve) {\r\n            resolveReadyPromise = resolve;\r\n        });\r\n        var session = connection.domain(\"agm\", [\"subscribed\"]);\r\n        var server = new ServerProtocol(session, clientRepository, serverRepository, logger.subLogger(\"server\"));\r\n        var client = new ClientProtocol(session, clientRepository, logger.subLogger(\"client\"));\r\n        function handleReconnect() {\r\n            logger.info(\"reconnected - will replay registered methods and subscriptions\");\r\n            var existingSubscriptions = client.drainSubscriptions();\r\n            for (var _i = 0, existingSubscriptions_1 = existingSubscriptions; _i < existingSubscriptions_1.length; _i++) {\r\n                var sub = existingSubscriptions_1[_i];\r\n                var methodInfo = sub.method;\r\n                var params = Object.assign({}, sub.params);\r\n                logger.info(\"trying to re-subscribe to method \" + methodInfo.name);\r\n                interop.client.subscribe(methodInfo, params, undefined, undefined, sub);\r\n            }\r\n            var registeredMethods = serverRepository.getList();\r\n            serverRepository.reset();\r\n            for (var _a = 0, registeredMethods_1 = registeredMethods; _a < registeredMethods_1.length; _a++) {\r\n                var method = registeredMethods_1[_a];\r\n                var def = method.definition;\r\n                logger.info(\"re-publishing method \" + def.name);\r\n                if (method.stream) {\r\n                    interop.server.createStream(def, method.streamCallbacks, undefined, undefined, method.stream);\r\n                }\r\n                else if (method.theFunction && method.theFunction.userCallback) {\r\n                    interop.register(def, method.theFunction.userCallback);\r\n                }\r\n                else if (method.theFunction && method.theFunction.userCallbackAsync) {\r\n                    interop.registerAsync(def, method.theFunction.userCallbackAsync);\r\n                }\r\n            }\r\n        }\r\n        function handleInitialJoin() {\r\n            if (resolveReadyPromise) {\r\n                resolveReadyPromise({\r\n                    client: client,\r\n                    server: server,\r\n                });\r\n                resolveReadyPromise = undefined;\r\n            }\r\n        }\r\n        session.onJoined(function (reconnect) {\r\n            clientRepository.addServer(instance, connection.peerId);\r\n            if (reconnect) {\r\n                handleReconnect();\r\n            }\r\n            else {\r\n                handleInitialJoin();\r\n            }\r\n        });\r\n        session.onLeft(function () {\r\n            clientRepository.reset();\r\n        });\r\n        session.join();\r\n        return readyPromise;\r\n    }\n\n    var Interop = (function () {\r\n        function Interop(configuration) {\r\n            var _this = this;\r\n            if (typeof configuration === \"undefined\") {\r\n                throw new Error(\"configuration is required\");\r\n            }\r\n            if (typeof configuration.connection === \"undefined\") {\r\n                throw new Error(\"configuration.connections is required\");\r\n            }\r\n            var connection = configuration.connection;\r\n            if (typeof configuration.methodResponseTimeout !== \"number\") {\r\n                configuration.methodResponseTimeout = 30 * 1000;\r\n            }\r\n            if (typeof configuration.waitTimeoutMs !== \"number\") {\r\n                configuration.waitTimeoutMs = 30 * 1000;\r\n            }\r\n            this.unwrappedInstance = new InstanceWrapper(this, undefined, connection);\r\n            this.instance = this.unwrappedInstance.unwrap();\r\n            this.clientRepository = new ClientRepository(configuration.logger.subLogger(\"cRep\"), this);\r\n            this.serverRepository = new ServerRepository();\r\n            var protocolPromise;\r\n            if (connection.protocolVersion === 3) {\r\n                protocolPromise = gW3ProtocolFactory(this.instance, connection, this.clientRepository, this.serverRepository, configuration, this);\r\n            }\r\n            else {\r\n                throw new Error(\"protocol \" + connection.protocolVersion + \" not supported\");\r\n            }\r\n            this.readyPromise = protocolPromise.then(function (protocol) {\r\n                _this.protocol = protocol;\r\n                _this.client = new Client(_this.protocol, _this.clientRepository, _this.instance, configuration);\r\n                _this.server = new Server(_this.protocol, _this.serverRepository);\r\n                return _this;\r\n            });\r\n        }\r\n        Interop.prototype.ready = function () {\r\n            return this.readyPromise;\r\n        };\r\n        Interop.prototype.serverRemoved = function (callback) {\r\n            return this.client.serverRemoved(callback);\r\n        };\r\n        Interop.prototype.serverAdded = function (callback) {\r\n            return this.client.serverAdded(callback);\r\n        };\r\n        Interop.prototype.serverMethodRemoved = function (callback) {\r\n            return this.client.serverMethodRemoved(callback);\r\n        };\r\n        Interop.prototype.serverMethodAdded = function (callback) {\r\n            return this.client.serverMethodAdded(callback);\r\n        };\r\n        Interop.prototype.methodRemoved = function (callback) {\r\n            return this.client.methodRemoved(callback);\r\n        };\r\n        Interop.prototype.methodAdded = function (callback) {\r\n            return this.client.methodAdded(callback);\r\n        };\r\n        Interop.prototype.methodsForInstance = function (instance) {\r\n            return this.client.methodsForInstance(instance);\r\n        };\r\n        Interop.prototype.methods = function (methodFilter) {\r\n            return this.client.methods(methodFilter);\r\n        };\r\n        Interop.prototype.servers = function (methodFilter) {\r\n            return this.client.servers(methodFilter);\r\n        };\r\n        Interop.prototype.subscribe = function (method, options, successCallback, errorCallback) {\r\n            return this.client.subscribe(method, options, successCallback, errorCallback);\r\n        };\r\n        Interop.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback) {\r\n            return this.server.createStream(streamDef, callbacks, successCallback, errorCallback);\r\n        };\r\n        Interop.prototype.unregister = function (methodFilter) {\r\n            return this.server.unregister(methodFilter);\r\n        };\r\n        Interop.prototype.registerAsync = function (methodDefinition, callback) {\r\n            return this.server.registerAsync(methodDefinition, callback);\r\n        };\r\n        Interop.prototype.register = function (methodDefinition, callback) {\r\n            return this.server.register(methodDefinition, callback);\r\n        };\r\n        Interop.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n            return this.client.invoke(methodFilter, argumentObj, target, additionalOptions, success, error);\r\n        };\r\n        Interop.prototype.waitForMethod = function (name) {\r\n            var pw = new PromiseWrapper();\r\n            var unsubscribe = this.client.methodAdded(function (m) {\r\n                if (m.name === name) {\r\n                    unsubscribe();\r\n                    pw.resolve(m);\r\n                }\r\n            });\r\n            return pw.promise;\r\n        };\r\n        return Interop;\r\n    }());\n\n    var successMessages = [\"subscribed\", \"success\"];\r\n    var MessageBus = (function () {\r\n        function MessageBus(connection, logger) {\r\n            var _this = this;\r\n            this.publish = function (topic, data, options) {\r\n                var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n                var args = _this.removeEmptyValues({\r\n                    type: \"publish\",\r\n                    topic: topic,\r\n                    data: data,\r\n                    peer_id: _this.peerId,\r\n                    routing_key: routingKey,\r\n                    target_identity: target\r\n                });\r\n                _this.session.send(args);\r\n            };\r\n            this.subscribe = function (topic, callback, options) {\r\n                return new Promise(function (resolve, reject) {\r\n                    var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n                    var args = _this.removeEmptyValues({\r\n                        type: \"subscribe\",\r\n                        topic: topic,\r\n                        peer_id: _this.peerId,\r\n                        routing_key: routingKey,\r\n                        source: target\r\n                    });\r\n                    _this.session.send(args)\r\n                        .then(function (response) {\r\n                        var subscription_id = response.subscription_id;\r\n                        _this.subscriptions.push({ subscription_id: subscription_id, topic: topic, callback: callback, source: target });\r\n                        resolve({\r\n                            unsubscribe: function () {\r\n                                _this.session.send({ type: \"unsubscribe\", subscription_id: subscription_id, peer_id: _this.peerId });\r\n                                _this.subscriptions = _this.subscriptions.filter(function (s) { return s.subscription_id !== subscription_id; });\r\n                                return Promise.resolve();\r\n                            }\r\n                        });\r\n                    })\r\n                        .catch(function (error) { return reject(error); });\r\n                });\r\n            };\r\n            this.watchOnEvent = function () {\r\n                _this.session.on(\"event\", function (args) {\r\n                    var data = args.data, subscription_id = args.subscription_id;\r\n                    var source = args[\"publisher-identity\"];\r\n                    var subscription = _this.subscriptions.find(function (s) { return s.subscription_id === subscription_id; });\r\n                    if (subscription) {\r\n                        if (!subscription.source) {\r\n                            subscription.callback(data, subscription.topic, source);\r\n                        }\r\n                        else {\r\n                            if (_this.keysMatch(subscription.source, source)) {\r\n                                subscription.callback(data, subscription.topic, source);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            this.connection = connection;\r\n            this.logger = logger;\r\n            this.peerId = connection.peerId;\r\n            this.subscriptions = [];\r\n            this.session = connection.domain(\"bus\", successMessages);\r\n            this.readyPromise = this.session.join();\r\n            this.readyPromise.then(function () {\r\n                _this.watchOnEvent();\r\n            });\r\n        }\r\n        MessageBus.prototype.ready = function () {\r\n            return this.readyPromise;\r\n        };\r\n        MessageBus.prototype.removeEmptyValues = function (obj) {\r\n            var cleaned = {};\r\n            Object.keys(obj).forEach(function (key) {\r\n                if (obj[key] !== undefined && obj[key] !== null) {\r\n                    cleaned[key] = obj[key];\r\n                }\r\n            });\r\n            return cleaned;\r\n        };\r\n        MessageBus.prototype.keysMatch = function (obj1, obj2) {\r\n            var keysObj1 = Object.keys(obj1);\r\n            var allMatch = true;\r\n            keysObj1.forEach(function (key) {\r\n                if (obj1[key] !== obj2[key]) {\r\n                    allMatch = false;\r\n                }\r\n            });\r\n            return allMatch;\r\n        };\r\n        return MessageBus;\r\n    }());\n\n    var GlueCore = function (userConfig, ext) {\r\n        var gdVersion = Utils.getGDMajorVersion();\r\n        var glue42gd;\r\n        var preloadPromise = Promise.resolve();\r\n        if (gdVersion) {\r\n            if (gdVersion < 3) {\r\n                throw new Error(\"GD v2 is not supported. Use v4 of the API to run in that context.\");\r\n            }\r\n            else if (gdVersion >= 3) {\r\n                glue42gd = window.glue42gd;\r\n                preloadPromise = window.gdPreloadPromise || preloadPromise;\r\n            }\r\n        }\r\n        var glueInitTimer = timer(\"glue\");\r\n        userConfig = userConfig || {};\r\n        ext = ext || {};\r\n        var internalConfig = prepareConfig(userConfig, ext, glue42gd);\r\n        var _connection;\r\n        var _interop;\r\n        var _logger;\r\n        var _metrics;\r\n        var _contexts;\r\n        var _bus;\r\n        var _allowTrace;\r\n        var libs = {};\r\n        function registerLib(name, inner, t) {\r\n            _allowTrace = _logger.canPublish(\"trace\");\r\n            if (_allowTrace) {\r\n                _logger.trace(\"registering \" + name + \" module\");\r\n            }\r\n            var done = function () {\r\n                inner.initTime = t.stop();\r\n                inner.initEndTime = t.endTime;\r\n                inner.marks = t.marks;\r\n                if (_allowTrace) {\r\n                    _logger.trace(name + \" is ready - \" + (t.endTime - t.startTime));\r\n                }\r\n            };\r\n            inner.initStartTime = t.startTime;\r\n            if (inner.ready) {\r\n                inner.ready().then(function () {\r\n                    done();\r\n                });\r\n            }\r\n            else {\r\n                done();\r\n            }\r\n            if (!Array.isArray(name)) {\r\n                name = [name];\r\n            }\r\n            name.forEach(function (n) {\r\n                libs[n] = inner;\r\n                GlueCore[n] = inner;\r\n            });\r\n        }\r\n        function setupConnection() {\r\n            var initTimer = timer(\"connection\");\r\n            _connection = new Connection(internalConfig.connection, _logger.subLogger(\"connection\"));\r\n            var authPromise = Promise.resolve(internalConfig.auth);\r\n            if (internalConfig.connection && !internalConfig.auth) {\r\n                if (glue42gd) {\r\n                    authPromise = glue42gd.getGWToken()\r\n                        .then(function (token) {\r\n                        return {\r\n                            gatewayToken: token\r\n                        };\r\n                    });\r\n                }\r\n                else {\r\n                    authPromise = Promise.reject(\"You need to provide auth information\");\r\n                }\r\n            }\r\n            return authPromise\r\n                .then(function (authConfig) {\r\n                initTimer.mark(\"auth-promise-resolved\");\r\n                var authRequest;\r\n                if (Object.prototype.toString.call(authConfig) === \"[object Object]\") {\r\n                    authRequest = authConfig;\r\n                }\r\n                else {\r\n                    throw new Error(\"Invalid auth object - \" + JSON.stringify(authConfig));\r\n                }\r\n                return _connection.login(authRequest);\r\n            })\r\n                .then(function () {\r\n                registerLib(\"connection\", _connection, initTimer);\r\n                return internalConfig;\r\n            })\r\n                .catch(function (e) {\r\n                if (_connection) {\r\n                    _connection.logout();\r\n                }\r\n                throw e;\r\n            });\r\n        }\r\n        function setupLogger() {\r\n            var _a;\r\n            var initTimer = timer(\"logger\");\r\n            _logger = new Logger(\"\" + ((_a = internalConfig.connection.identity) === null || _a === void 0 ? void 0 : _a.application), undefined, internalConfig.customLogger);\r\n            _logger.consoleLevel(internalConfig.logger.console);\r\n            _logger.publishLevel(internalConfig.logger.publish);\r\n            if (_logger.canPublish(\"debug\")) {\r\n                _logger.debug(\"initializing glue...\");\r\n            }\r\n            registerLib(\"logger\", _logger, initTimer);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        function setupMetrics() {\r\n            var _a, _b, _c, _d;\r\n            var initTimer = timer(\"metrics\");\r\n            var config = internalConfig.metrics;\r\n            var metricsPublishingEnabledFunc = glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.getMetricsPublishingEnabled;\r\n            var identity = internalConfig.connection.identity;\r\n            var canUpdateMetric = metricsPublishingEnabledFunc ? metricsPublishingEnabledFunc : function () { return true; };\r\n            var disableAutoAppSystem = (_a = (typeof config !== \"boolean\" && config.disableAutoAppSystem)) !== null && _a !== void 0 ? _a : false;\r\n            _metrics = metrics({\r\n                connection: config ? _connection : undefined,\r\n                logger: _logger.subLogger(\"metrics\"),\r\n                canUpdateMetric: canUpdateMetric,\r\n                system: \"Glue42\",\r\n                service: (_b = identity === null || identity === void 0 ? void 0 : identity.service) !== null && _b !== void 0 ? _b : \"metrics-service\",\r\n                instance: (_d = (_c = identity === null || identity === void 0 ? void 0 : identity.instance) !== null && _c !== void 0 ? _c : identity === null || identity === void 0 ? void 0 : identity.windowId) !== null && _d !== void 0 ? _d : shortid(),\r\n                disableAutoAppSystem: disableAutoAppSystem,\r\n                pagePerformanceMetrics: typeof config !== \"boolean\" ? config === null || config === void 0 ? void 0 : config.pagePerformanceMetrics : undefined\r\n            });\r\n            registerLib(\"metrics\", _metrics, initTimer);\r\n            return Promise.resolve();\r\n        }\r\n        function setupInterop() {\r\n            var initTimer = timer(\"interop\");\r\n            var agmConfig = {\r\n                connection: _connection,\r\n                logger: _logger.subLogger(\"interop\"),\r\n            };\r\n            _interop = new Interop(agmConfig);\r\n            Logger.Interop = _interop;\r\n            registerLib([\"interop\", \"agm\"], _interop, initTimer);\r\n            return Promise.resolve();\r\n        }\r\n        function setupContexts() {\r\n            var hasActivities = (internalConfig.activities && _connection.protocolVersion === 3);\r\n            var needsContexts = internalConfig.contexts || hasActivities;\r\n            if (needsContexts) {\r\n                var initTimer = timer(\"contexts\");\r\n                _contexts = new ContextsModule({\r\n                    connection: _connection,\r\n                    logger: _logger.subLogger(\"contexts\")\r\n                });\r\n                registerLib(\"contexts\", _contexts, initTimer);\r\n                return _contexts;\r\n            }\r\n            else {\r\n                var replayer = _connection.replayer;\r\n                if (replayer) {\r\n                    replayer.drain(ContextMessageReplaySpec.name);\r\n                }\r\n            }\r\n        }\r\n        function setupBus() {\r\n            return __awaiter$1(this, void 0, void 0, function () {\r\n                var initTimer;\r\n                return __generator$1(this, function (_a) {\r\n                    if (!internalConfig.bus) {\r\n                        return [2, Promise.resolve()];\r\n                    }\r\n                    initTimer = timer(\"bus\");\r\n                    _bus = new MessageBus(_connection, _logger.subLogger(\"bus\"));\r\n                    registerLib(\"bus\", _bus, initTimer);\r\n                    return [2, Promise.resolve()];\r\n                });\r\n            });\r\n        }\r\n        function setupExternalLibs(externalLibs) {\r\n            try {\r\n                externalLibs.forEach(function (lib) {\r\n                    setupExternalLib(lib.name, lib.create);\r\n                });\r\n                return Promise.resolve();\r\n            }\r\n            catch (e) {\r\n                return Promise.reject(e);\r\n            }\r\n        }\r\n        function setupExternalLib(name, createCallback) {\r\n            var initTimer = timer(name);\r\n            var lib = createCallback(libs);\r\n            if (lib) {\r\n                registerLib(name, lib, initTimer);\r\n            }\r\n        }\r\n        function waitForLibs() {\r\n            var libsReadyPromises = Object.keys(libs).map(function (key) {\r\n                var lib = libs[key];\r\n                return lib.ready ?\r\n                    lib.ready() : Promise.resolve();\r\n            });\r\n            return Promise.all(libsReadyPromises);\r\n        }\r\n        function constructGlueObject() {\r\n            var feedbackFunc = function (feedbackInfo) {\r\n                if (!_interop) {\r\n                    return;\r\n                }\r\n                _interop.invoke(\"T42.ACS.Feedback\", feedbackInfo, \"best\");\r\n            };\r\n            var info = {\r\n                coreVersion: version,\r\n                version: internalConfig.version\r\n            };\r\n            glueInitTimer.stop();\r\n            var glue = {\r\n                feedback: feedbackFunc,\r\n                info: info,\r\n                logger: _logger,\r\n                interop: _interop,\r\n                agm: _interop,\r\n                connection: _connection,\r\n                metrics: _metrics,\r\n                contexts: _contexts,\r\n                bus: _bus,\r\n                version: internalConfig.version,\r\n                userConfig: userConfig,\r\n                done: function () {\r\n                    _logger === null || _logger === void 0 ? void 0 : _logger.info(\"done called by user...\");\r\n                    return _connection.logout();\r\n                }\r\n            };\r\n            glue.performance = {\r\n                get glueVer() {\r\n                    return internalConfig.version;\r\n                },\r\n                get glueConfig() {\r\n                    return JSON.stringify(userConfig);\r\n                },\r\n                get browser() {\r\n                    return window.performance.timing.toJSON();\r\n                },\r\n                get memory() {\r\n                    return window.performance.memory;\r\n                },\r\n                get initTimes() {\r\n                    var all = getAllTimers();\r\n                    return Object.keys(all).map(function (key) {\r\n                        var t = all[key];\r\n                        return {\r\n                            name: key,\r\n                            duration: t.endTime - t.startTime,\r\n                            marks: t.marks\r\n                        };\r\n                    });\r\n                }\r\n            };\r\n            Object.keys(libs).forEach(function (key) {\r\n                var lib = libs[key];\r\n                glue[key] = lib;\r\n            });\r\n            glue.config = {};\r\n            Object.keys(internalConfig).forEach(function (k) {\r\n                glue.config[k] = internalConfig[k];\r\n            });\r\n            if (ext && ext.extOptions) {\r\n                Object.keys(ext.extOptions).forEach(function (k) {\r\n                    glue.config[k] = ext === null || ext === void 0 ? void 0 : ext.extOptions[k];\r\n                });\r\n            }\r\n            if (ext === null || ext === void 0 ? void 0 : ext.enrichGlue) {\r\n                ext.enrichGlue(glue);\r\n            }\r\n            if (glue42gd && glue42gd.updatePerfData) {\r\n                glue42gd.updatePerfData(glue.performance);\r\n            }\r\n            if (glue.agm) {\r\n                var deprecatedDecorator = function (fn, wrong, proper) {\r\n                    return function () {\r\n                        glue.logger.warn(\"glue.js - 'glue.agm.\" + wrong + \"' method is deprecated, use 'glue.interop.\" + proper + \"' instead.\");\r\n                        return fn.apply(glue.agm, arguments);\r\n                    };\r\n                };\r\n                var agmAny = glue.agm;\r\n                agmAny.method_added = deprecatedDecorator(glue.agm.methodAdded, \"method_added\", \"methodAdded\");\r\n                agmAny.method_removed = deprecatedDecorator(glue.agm.methodRemoved, \"method_removed\", \"methodRemoved\");\r\n                agmAny.server_added = deprecatedDecorator(glue.agm.serverAdded, \"server_added\", \"serverAdded\");\r\n                agmAny.server_method_aded = deprecatedDecorator(glue.agm.serverMethodAdded, \"server_method_aded\", \"serverMethodAdded\");\r\n                agmAny.server_method_removed = deprecatedDecorator(glue.agm.serverMethodRemoved, \"server_method_removed\", \"serverMethodRemoved\");\r\n            }\r\n            return glue;\r\n        }\r\n        return preloadPromise\r\n            .then(setupLogger)\r\n            .then(setupConnection)\r\n            .then(function () { return Promise.all([setupMetrics(), setupInterop(), setupContexts(), setupBus()]); })\r\n            .then(function () { return _interop.readyPromise; })\r\n            .then(function () {\r\n            return setupExternalLibs(internalConfig.libs || []);\r\n        })\r\n            .then(waitForLibs)\r\n            .then(constructGlueObject)\r\n            .catch(function (err) {\r\n            return Promise.reject({\r\n                err: err,\r\n                libs: libs\r\n            });\r\n        });\r\n    };\r\n    if (typeof window !== \"undefined\") {\r\n        window.GlueCore = GlueCore;\r\n    }\r\n    GlueCore.version = version;\r\n    GlueCore.default = GlueCore;\n\n    var ActivityEntity = (function () {\r\n        function ActivityEntity(id) {\r\n            this._id = id;\r\n        }\r\n        Object.defineProperty(ActivityEntity.prototype, \"id\", {\r\n            get: function () {\r\n                return this._id;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityEntity.prototype._update = function (other) {\r\n            if (other._id !== this._id) {\r\n                throw Error(\"Can not update from entity with different id.\");\r\n            }\r\n            this._updateCore(other);\r\n        };\r\n        ActivityEntity.prototype._updateCore = function (other) {\r\n            return;\r\n        };\r\n        ActivityEntity.prototype._beforeDelete = function (other) {\r\n            return;\r\n        };\r\n        return ActivityEntity;\r\n    }());\n\n    function isNumber(arg) {\r\n        return typeof arg === \"number\";\r\n    }\r\n    function isString(arg) {\r\n        return typeof arg === \"string\";\r\n    }\r\n    function isObject(arg) {\r\n        return typeof arg === \"object\" && arg !== null;\r\n    }\r\n    function isArray(arg) {\r\n        if (Array.isArray) {\r\n            return Array.isArray(arg);\r\n        }\r\n        return toString.call(arg) === \"[object Array]\";\r\n    }\r\n    function isUndefined(arg) {\r\n        return typeof arg === \"undefined\";\r\n    }\r\n    function isUndefinedOrNull(arg) {\r\n        return !arg || typeof arg === \"undefined\";\r\n    }\r\n    function isFunction(arg) {\r\n        return !!(arg && arg.constructor && arg.call && arg.apply);\r\n    }\r\n    function some(array, predicate) {\r\n        for (var index = 0; index < array.length; index++) {\r\n            if (predicate(array[index], index)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function ifNotUndefined(what, doWithIt) {\r\n        if (typeof what !== \"undefined\") {\r\n            doWithIt(what);\r\n        }\r\n    }\r\n    function promisify$1(promise, successCallback, errorCallback) {\r\n        if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\r\n            return promise;\r\n        }\r\n        if (typeof successCallback !== \"function\") {\r\n            successCallback = function () { return; };\r\n        }\r\n        else if (typeof errorCallback !== \"function\") {\r\n            errorCallback = function () { return; };\r\n        }\r\n        promise.then(successCallback, errorCallback);\r\n    }\n\n    var ActivityType = (function (_super) {\r\n        __extends(ActivityType, _super);\r\n        function ActivityType(name, ownerWindow, helperWindows, description) {\r\n            var _this = _super.call(this, name) || this;\r\n            _this._name = name;\r\n            _this._description = description;\r\n            _this._ownerWindow = ownerWindow;\r\n            _this._helperWindows = helperWindows || [];\r\n            return _this;\r\n        }\r\n        Object.defineProperty(ActivityType.prototype, \"name\", {\r\n            get: function () {\r\n                return this._name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityType.prototype, \"description\", {\r\n            get: function () {\r\n                return this._description;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityType.prototype, \"helperWindows\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return this._helperWindows.map(function (hw) { return _this.covertToWindowDef(hw); });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityType.prototype, \"ownerWindow\", {\r\n            get: function () {\r\n                return this.covertToWindowDef(this._ownerWindow);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityType.prototype.initiate = function (context, callback, configuration) {\r\n            return this._manager.initiate(this._name, context, callback, configuration);\r\n        };\r\n        ActivityType.prototype._updateCore = function (other) {\r\n            var _this = this;\r\n            _super.prototype._updateCore.call(this, other);\r\n            ifNotUndefined(other._description, function (x) { return _this._description = x; });\r\n            ifNotUndefined(other._ownerWindow, function (x) { return _this._ownerWindow = x; });\r\n            ifNotUndefined(other._helperWindows, function (x) { return _this._helperWindows = x; });\r\n        };\r\n        ActivityType.prototype.covertToWindowDef = function (windowType) {\r\n            var _a, _b, _c, _d;\r\n            return {\r\n                type: (_b = (_a = windowType) === null || _a === void 0 ? void 0 : _a.id) === null || _b === void 0 ? void 0 : _b.type,\r\n                name: (_d = (_c = windowType) === null || _c === void 0 ? void 0 : _c.id) === null || _d === void 0 ? void 0 : _d.name\r\n            };\r\n        };\r\n        return ActivityType;\r\n    }(ActivityEntity));\n\n    var WindowType = (function (_super) {\r\n        __extends(WindowType, _super);\r\n        function WindowType(name, appByWindowTypeGetter) {\r\n            var _this = _super.call(this, name) || this;\r\n            _this._name = name;\r\n            _this._appByWindowTypeGetter = appByWindowTypeGetter;\r\n            return _this;\r\n        }\r\n        Object.defineProperty(WindowType.prototype, \"name\", {\r\n            get: function () {\r\n                return this._name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(WindowType.prototype, \"config\", {\r\n            get: function () {\r\n                return this._appByWindowTypeGetter(this._name);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(WindowType.prototype, \"windows\", {\r\n            get: function () {\r\n                return this._manager.getWindows({ type: this._name });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WindowType.prototype.create = function (activity, configuration) {\r\n            var definition = Object.assign({ type: this.name, name: this.name, isIndependent: false }, configuration);\r\n            return this._manager.createWindow(activity, definition);\r\n        };\r\n        return WindowType;\r\n    }(ActivityEntity));\n\n    var EntityEvent = (function () {\r\n        function EntityEvent(entitiy, context) {\r\n            this.entity = entitiy;\r\n            this.context = context;\r\n        }\r\n        return EntityEvent;\r\n    }());\r\n    var EntityEventContext = (function () {\r\n        function EntityEventContext(eventType) {\r\n            this.type = eventType;\r\n        }\r\n        return EntityEventContext;\r\n    }());\r\n    var ActivityStatusChangeEventContext = (function (_super) {\r\n        __extends(ActivityStatusChangeEventContext, _super);\r\n        function ActivityStatusChangeEventContext(newStatus, oldStatus) {\r\n            var _this = _super.call(this, EntityEventType.StatusChange) || this;\r\n            _this.newStatus = newStatus;\r\n            _this.oldStatus = oldStatus;\r\n            return _this;\r\n        }\r\n        return ActivityStatusChangeEventContext;\r\n    }(EntityEventContext));\r\n    var ActivityContextChangedEventContext = (function (_super) {\r\n        __extends(ActivityContextChangedEventContext, _super);\r\n        function ActivityContextChangedEventContext(context, updated, removed) {\r\n            var _this = _super.call(this, EntityEventType.ActivityContextChange) || this;\r\n            _this.context = typeof context === \"string\" ? JSON.parse(context) : context;\r\n            _this.updated = updated;\r\n            _this.removed = removed;\r\n            return _this;\r\n        }\r\n        return ActivityContextChangedEventContext;\r\n    }(EntityEventContext));\r\n    var EntityEventType = (function () {\r\n        function EntityEventType() {\r\n        }\r\n        EntityEventType.Added = \"added\";\r\n        EntityEventType.Removed = \"removed\";\r\n        EntityEventType.Updated = \"updated\";\r\n        EntityEventType.Closed = \"closed\";\r\n        EntityEventType.StatusChange = \"statusChange\";\r\n        EntityEventType.ActivityContextChange = \"activityContextUpdate\";\r\n        EntityEventType.ActivityWindowEvent = \"activityWindowEvent\";\r\n        EntityEventType.ActivityWindowJoinedActivity = \"joined\";\r\n        EntityEventType.ActivityWindowLeftActivity = \"left\";\r\n        return EntityEventType;\r\n    }());\r\n    var ActivityState = (function () {\r\n        function ActivityState() {\r\n        }\r\n        ActivityState.Created = \"created\";\r\n        ActivityState.Started = \"started\";\r\n        ActivityState.Destroyed = \"destroyed\";\r\n        return ActivityState;\r\n    }());\n\n    var ActivityAGM = (function () {\r\n        function ActivityAGM(activity) {\r\n            this._activity = activity;\r\n        }\r\n        ActivityAGM.prototype.register = function (definition, handler) {\r\n            this._ensureHasAgm();\r\n            ActivityAGM.AGM.register(definition, handler);\r\n        };\r\n        ActivityAGM.prototype.servers = function () {\r\n            this._ensureHasAgm();\r\n            if (isUndefinedOrNull(this._activity)) {\r\n                return [];\r\n            }\r\n            return this._activity.windows.map(function (w) {\r\n                return w.instance;\r\n            });\r\n        };\r\n        ActivityAGM.prototype.methods = function () {\r\n            var _this = this;\r\n            this._ensureHasAgm();\r\n            if (isUndefinedOrNull(this._activity)) {\r\n                return [];\r\n            }\r\n            var windows = this._activity.windows;\r\n            var methodNames = [];\r\n            var methods = [];\r\n            windows.forEach(function (window) {\r\n                var windowMethods = _this.methodsForWindow(window);\r\n                windowMethods.forEach(function (currentWindowMethod) {\r\n                    if (methodNames.indexOf(currentWindowMethod.name) === -1) {\r\n                        methodNames.push(currentWindowMethod.name);\r\n                        methods.push(currentWindowMethod);\r\n                    }\r\n                });\r\n            });\r\n            return methods;\r\n        };\r\n        ActivityAGM.prototype.methodsForWindow = function (window) {\r\n            this._ensureHasAgm();\r\n            if (!window.instance) {\r\n                return [];\r\n            }\r\n            return ActivityAGM.AGM.methodsForInstance(window.instance);\r\n        };\r\n        ActivityAGM.prototype.invoke = function (methodName, arg, target, options, success, error) {\r\n            this._ensureHasAgm();\r\n            var activityServers = this.servers();\r\n            var serversToInvokeAgainst = [];\r\n            if (isUndefinedOrNull(target)) {\r\n                target = \"activity.all\";\r\n            }\r\n            if (isString(target)) {\r\n                if (target === \"activity.all\") {\r\n                    serversToInvokeAgainst = activityServers;\r\n                }\r\n                else if (target === \"activity.best\") {\r\n                    var potentialTargets = activityServers.filter(function (server) {\r\n                        var methods = ActivityAGM.AGM.methodsForInstance(server);\r\n                        return methods.filter(function (m) {\r\n                            return m.name === methodName;\r\n                        }).length > 0;\r\n                    });\r\n                    if (potentialTargets.length > 0) {\r\n                        serversToInvokeAgainst = [potentialTargets[0]];\r\n                    }\r\n                }\r\n                else if (target === \"all\" || target === \"best\") {\r\n                    return promisify$1(ActivityAGM.AGM.invoke(methodName, arg, target, options), success, error);\r\n                }\r\n                else {\r\n                    throw new Error(\"Invalid invoke target \" + target);\r\n                }\r\n            }\r\n            else if (isArray(target)) {\r\n                if (target.length >= 0) {\r\n                    var firstElem = target[0];\r\n                    if (this._isInstance(firstElem)) {\r\n                        serversToInvokeAgainst = target.map(function (instance) { return instance; });\r\n                    }\r\n                    else if (this._isActivityWindow(firstElem)) {\r\n                        serversToInvokeAgainst = target.map(function (win) { return win.instance; });\r\n                    }\r\n                    else {\r\n                        throw new Error(\"Unknown target object\");\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (this._isInstance(target)) {\r\n                    serversToInvokeAgainst = [target];\r\n                }\r\n                else if (this._isActivityWindow(target)) {\r\n                    serversToInvokeAgainst = [target.instance];\r\n                }\r\n                else {\r\n                    throw new Error(\"Unknown target object\");\r\n                }\r\n            }\r\n            throw new Error(\"Not implemented\");\r\n        };\r\n        ActivityAGM.prototype.unregister = function (definition) {\r\n            this._ensureHasAgm();\r\n            return ActivityAGM.AGM.unregister(definition);\r\n        };\r\n        ActivityAGM.prototype.createStream = function (methodDefinition, subscriptionAddedHandler, subscriptionRemovedHandler) {\r\n            this._ensureHasAgm();\r\n            ActivityAGM.AGM.createStream(methodDefinition, {\r\n                subscriptionAddedHandler: subscriptionAddedHandler,\r\n                subscriptionRemovedHandler: subscriptionRemovedHandler,\r\n                subscriptionRequestHandler: undefined\r\n            });\r\n        };\r\n        ActivityAGM.prototype.subscribe = function (methodDefinition, parameters, target) {\r\n            this._ensureHasAgm();\r\n            return ActivityAGM.AGM.subscribe(methodDefinition, parameters);\r\n        };\r\n        ActivityAGM.prototype._ensureHasAgm = function () {\r\n            if (isUndefinedOrNull(ActivityAGM.AGM)) {\r\n                throw new Error(\"Agm should be configured to be used in activity\");\r\n            }\r\n        };\r\n        ActivityAGM.prototype._isInstance = function (obj) {\r\n            return obj.application !== undefined;\r\n        };\r\n        ActivityAGM.prototype._isActivityWindow = function (obj) {\r\n            return obj.instance !== undefined;\r\n        };\r\n        return ActivityAGM;\r\n    }());\n\n    var AttachedActivityDescriptor = (function () {\r\n        function AttachedActivityDescriptor(manager, ownerActivityId, state) {\r\n            this._manager = manager;\r\n            this._ownerActivityId = ownerActivityId;\r\n            this._state = state;\r\n        }\r\n        Object.defineProperty(AttachedActivityDescriptor.prototype, \"ownerId\", {\r\n            get: function () {\r\n                return this._state.ownerId;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AttachedActivityDescriptor.prototype, \"windowIds\", {\r\n            get: function () {\r\n                return this._state.windowIds;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AttachedActivityDescriptor.prototype, \"frameColor\", {\r\n            get: function () {\r\n                return this._state.frameColor;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AttachedActivityDescriptor.prototype, \"context\", {\r\n            get: function () {\r\n                return this._state.context;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AttachedActivityDescriptor.prototype, \"tag\", {\r\n            get: function () {\r\n                return this._state.tag;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AttachedActivityDescriptor.prototype.detach = function (descriptor) {\r\n            var _this = this;\r\n            descriptor = descriptor || {};\r\n            var merged = {};\r\n            Object.keys(this._state).forEach(function (prop) {\r\n                merged[prop] = _this._state[prop];\r\n            });\r\n            merged.context = descriptor.context || merged.context;\r\n            merged.frameColor = descriptor.frameColor || merged.frameColor;\r\n            return this._manager.detachActivities(this._ownerActivityId, merged);\r\n        };\r\n        return AttachedActivityDescriptor;\r\n    }());\n\n    var nextTick = function (cb) {\r\n        setTimeout(cb, 0);\r\n    };\r\n    function nodeify(promise, callback) {\r\n        if (!isFunction(callback)) {\r\n            return promise;\r\n        }\r\n        promise.then(function (resp) {\r\n            nextTick(function () {\r\n                callback(null, resp);\r\n            });\r\n        }, function (err) {\r\n            nextTick(function () {\r\n                callback(err, null);\r\n            });\r\n        });\r\n    }\n\n    var Activity = (function (_super) {\r\n        __extends(Activity, _super);\r\n        function Activity(id, actType, status, context, ownerId) {\r\n            var _this = _super.call(this, id) || this;\r\n            _this._id = id;\r\n            _this._actType = actType;\r\n            _this._status = status;\r\n            _this._context = context;\r\n            _this._ownerId = ownerId;\r\n            _this._agm = new ActivityAGM(_this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Activity.prototype, \"type\", {\r\n            get: function () {\r\n                if (this._manager) {\r\n                    return this._manager.getActivityType(this._actType);\r\n                }\r\n                return undefined;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Activity.prototype, \"context\", {\r\n            get: function () {\r\n                return this._context;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Activity.prototype, \"status\", {\r\n            get: function () {\r\n                return this._status;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Activity.prototype, \"owner\", {\r\n            get: function () {\r\n                if (!this._ownerId) {\r\n                    return null;\r\n                }\r\n                return this._manager.getWindows({ id: this._ownerId })[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Activity.prototype, \"windows\", {\r\n            get: function () {\r\n                return this._manager.getWindows({ activityId: this._id });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Activity.prototype, \"agm\", {\r\n            get: function () {\r\n                return this._agm;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Activity.prototype.addWindow = function (window, callback) {\r\n            return this._manager.addWindowToActivity(this, window, callback);\r\n        };\r\n        Activity.prototype.createWindow = function (windowType, callback) {\r\n            return this._manager.createWindow(this, windowType, callback);\r\n        };\r\n        Activity.prototype.createStackedWindows = function (windowTypes, timeout, callback) {\r\n            return this._manager.createStackedWindows(this, windowTypes, timeout, callback);\r\n        };\r\n        Activity.prototype.leave = function (window, callback) {\r\n            return this._manager.leaveWindowFromActivity(this, window, callback);\r\n        };\r\n        Activity.prototype.getWindowsByType = function (windowType) {\r\n            var filter = { activityId: this._id, type: windowType };\r\n            return this._manager.getWindows(filter);\r\n        };\r\n        Activity.prototype.setContext = function (context, callback) {\r\n            return this._manager.setActivityContext(this, context, callback);\r\n        };\r\n        Activity.prototype.updateContext = function (context, callback) {\r\n            return this._manager.updateActivityContext(this, context, callback);\r\n        };\r\n        Activity.prototype.onStatusChange = function (handler) {\r\n            var _this = this;\r\n            return this._manager.subscribeActivityEvents(function (a, ns, os) {\r\n                if (a.id === _this.id) {\r\n                    handler(a, ns, os);\r\n                }\r\n            });\r\n        };\r\n        Activity.prototype.onWindowEvent = function (handler) {\r\n            var _this = this;\r\n            return this._manager.subscribeWindowEvents(function (a, w, e) {\r\n                if (a.id === _this.id) {\r\n                    handler(a, w, e);\r\n                }\r\n            });\r\n        };\r\n        Activity.prototype.onContextChanged = function (handler) {\r\n            var _this = this;\r\n            this._manager.subscribeActivityContextChanged(function (act, context, updated, removed) {\r\n                if (act.id === _this.id) {\r\n                    handler(context, updated, removed, act);\r\n                }\r\n            });\r\n            try {\r\n                handler(this.context, this.context, [], this);\r\n            }\r\n            catch (e) {\r\n                return;\r\n            }\r\n        };\r\n        Activity.prototype.stop = function () {\r\n            this._manager.stopActivity(this);\r\n        };\r\n        Activity.prototype.clone = function (options) {\r\n            return this._manager.clone(this, options);\r\n        };\r\n        Activity.prototype.attach = function (activity, tag) {\r\n            var activityId;\r\n            if (typeof activity === \"string\") {\r\n                activityId = activity;\r\n            }\r\n            else {\r\n                activityId = activity.id;\r\n            }\r\n            return this._manager.attachActivities(activityId, this.id, tag);\r\n        };\r\n        Activity.prototype.onActivityAttached = function (callback) {\r\n            var _this = this;\r\n            this._manager.subscribeActivitiesAttached(function (newActId, oldActId, descriptor) {\r\n                if (newActId !== _this._id) {\r\n                    return;\r\n                }\r\n                callback(descriptor);\r\n            });\r\n        };\r\n        Activity.prototype.onDetached = function (callback) {\r\n            var _this = this;\r\n            this._manager.subscribeActivitiesDetached(function (newAct, originalActivity, state) {\r\n                if (originalActivity.id !== _this._id) {\r\n                    return;\r\n                }\r\n                callback(newAct, state);\r\n            });\r\n        };\r\n        Activity.prototype._updateCore = function (other) {\r\n            var _this = this;\r\n            _super.prototype._updateCore.call(this, other);\r\n            ifNotUndefined(other._actType, function (x) { return _this._actType = x; });\r\n            ifNotUndefined(other._context, function (x) { return _this._context = x; });\r\n            ifNotUndefined(other._ownerId, function (x) { return _this._ownerId = x; });\r\n            if (other._status && (!this._status || (this._status.state !== other._status.state))) {\r\n                this._status = other._status;\r\n            }\r\n        };\r\n        Activity.prototype._updateDescriptors = function (allStates) {\r\n            var _this = this;\r\n            this._attached = allStates.map(function (s) {\r\n                return new AttachedActivityDescriptor(_this._manager, _this._id, s);\r\n            });\r\n        };\r\n        Object.defineProperty(Activity.prototype, \"attached\", {\r\n            get: function () {\r\n                return this._attached;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Activity.prototype.setFrameColor = function (color, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var callbacksToWait = _this.windows.length;\r\n                if (callbacksToWait === 0) {\r\n                    resolve(_this);\r\n                }\r\n                _this.windows.forEach(function (w) {\r\n                    w.underlyingWindow.setFrameColor(color, function () {\r\n                        callbacksToWait--;\r\n                        if (callbacksToWait <= 0) {\r\n                            resolve(_this);\r\n                        }\r\n                    });\r\n                });\r\n                setTimeout(function () {\r\n                    if (callbacksToWait > 0) {\r\n                        reject(_this.id + \" - timed out waiting for setFrameColor with\" + color);\r\n                    }\r\n                }, 5000);\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        Activity.prototype.getFrameColor = function () {\r\n            if (!this.windows || this.windows.length === 0) {\r\n                return \"\";\r\n            }\r\n            return this.windows[0].underlyingWindow.frameColor;\r\n        };\r\n        return Activity;\r\n    }(ActivityEntity));\n\n    var LogLevel = (function () {\r\n        function LogLevel() {\r\n        }\r\n        LogLevel.Trace = \"trace\";\r\n        LogLevel.Debug = \"debug\";\r\n        LogLevel.Info = \"info\";\r\n        LogLevel.Warn = \"warn\";\r\n        LogLevel.Error = \"error\";\r\n        return LogLevel;\r\n    }());\r\n    var Logger$1 = (function () {\r\n        function Logger(name) {\r\n            this._name = name;\r\n            if (!isUndefinedOrNull(Logger.GlueLogger)) {\r\n                this._glueLogger = Logger.GlueLogger.subLogger(name);\r\n            }\r\n        }\r\n        Logger.GetNamed = function (name) {\r\n            return new Logger(name);\r\n        };\r\n        Logger.Get = function (owner) {\r\n            return new Logger(Logger.GetTypeName(owner));\r\n        };\r\n        Logger.prototype.trace = function (message) {\r\n            if (!isUndefinedOrNull(this._glueLogger)) {\r\n                this._glueLogger.trace(message);\r\n            }\r\n            else {\r\n                if (Logger.Level === LogLevel.Trace) {\r\n                    console.info(this._getMessage(message, LogLevel.Trace));\r\n                }\r\n            }\r\n        };\r\n        Logger.prototype.debug = function (message) {\r\n            if (!isUndefinedOrNull(this._glueLogger)) {\r\n                this._glueLogger.debug(message);\r\n            }\r\n            else {\r\n                if (Logger.Level === LogLevel.Debug ||\r\n                    Logger.Level === LogLevel.Trace) {\r\n                    console.info(this._getMessage(message, LogLevel.Debug));\r\n                }\r\n            }\r\n        };\r\n        Logger.prototype.info = function (message) {\r\n            if (!isUndefinedOrNull(this._glueLogger)) {\r\n                this._glueLogger.info(message);\r\n            }\r\n            else {\r\n                if (Logger.Level === LogLevel.Debug ||\r\n                    Logger.Level === LogLevel.Trace ||\r\n                    Logger.Level === LogLevel.Info) {\r\n                    console.info(this._getMessage(message, LogLevel.Info));\r\n                }\r\n            }\r\n        };\r\n        Logger.prototype.warn = function (message) {\r\n            if (!isUndefinedOrNull(this._glueLogger)) {\r\n                this._glueLogger.warn(message);\r\n            }\r\n            else {\r\n                if (Logger.Level === LogLevel.Debug ||\r\n                    Logger.Level === LogLevel.Trace ||\r\n                    Logger.Level === LogLevel.Info ||\r\n                    Logger.Level === LogLevel.Warn) {\r\n                    console.info(this._getMessage(message, LogLevel.Info));\r\n                }\r\n            }\r\n        };\r\n        Logger.prototype.error = function (message) {\r\n            if (!isUndefinedOrNull(this._glueLogger)) {\r\n                this._glueLogger.error(message);\r\n            }\r\n            else {\r\n                console.error(this._getMessage(message, LogLevel.Error));\r\n                console.trace();\r\n            }\r\n        };\r\n        Logger.prototype._getMessage = function (message, level) {\r\n            return \"[\" + level + \"] \" + this._name + \" - \" + message;\r\n        };\r\n        Logger.GetTypeName = function (object) {\r\n            var funcNameRegex = /function (.{1,})\\(/;\r\n            var results = (funcNameRegex).exec(object.constructor.toString());\r\n            return (results && results.length > 1) ? results[1] : \"\";\r\n        };\r\n        Logger.Level = LogLevel.Info;\r\n        return Logger;\r\n    }());\n\n    var ActivityWindow = (function (_super) {\r\n        __extends(ActivityWindow, _super);\r\n        function ActivityWindow(id, name, type, activityId, instance, isIndependent, windowGetter, hcWindowId) {\r\n            var _this = _super.call(this, id) || this;\r\n            _this._logger = Logger$1.Get(\"window\");\r\n            _this._type = type;\r\n            _this._activityId = activityId;\r\n            _this._name = name;\r\n            _this._instance = instance;\r\n            _this._isIndependent = isIndependent;\r\n            _this._windowGetter = windowGetter;\r\n            _this._hcWindowId = hcWindowId;\r\n            return _this;\r\n        }\r\n        ActivityWindow.prototype.getBounds = function () {\r\n            return this._manager.getWindowBounds(this.id);\r\n        };\r\n        Object.defineProperty(ActivityWindow.prototype, \"name\", {\r\n            get: function () {\r\n                return this._name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityWindow.prototype, \"isIndependent\", {\r\n            get: function () {\r\n                return this._isIndependent;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityWindow.prototype, \"type\", {\r\n            get: function () {\r\n                if (this._manager) {\r\n                    return this._manager.getWindowType(this._type);\r\n                }\r\n                return undefined;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityWindow.prototype, \"activity\", {\r\n            get: function () {\r\n                if (isUndefined(this._activityId)) {\r\n                    return undefined;\r\n                }\r\n                return this._manager.getActivityById(this._activityId);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityWindow.prototype, \"isOwner\", {\r\n            get: function () {\r\n                var act = this.activity;\r\n                if (isUndefined(act)) {\r\n                    return false;\r\n                }\r\n                return act.owner.id === this.id;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityWindow.prototype.setVisible = function (isVisible, callback) {\r\n            return this._manager.setWindowVisibility(this.id, isVisible);\r\n        };\r\n        ActivityWindow.prototype.activate = function (focus) {\r\n            return this._manager.activateWindow(this.id, focus);\r\n        };\r\n        ActivityWindow.prototype.setBounds = function (bounds, callback) {\r\n            return this._manager.setWindowBounds(this.id, bounds, callback);\r\n        };\r\n        ActivityWindow.prototype.close = function () {\r\n            return this._manager.closeWindow(this.id);\r\n        };\r\n        Object.defineProperty(ActivityWindow.prototype, \"instance\", {\r\n            get: function () {\r\n                return this._instance;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityWindow.prototype, \"underlyingWindow\", {\r\n            get: function () {\r\n                var window = this._windowGetter();\r\n                if (!window) {\r\n                    return {\r\n                        id: this._hcWindowId\r\n                    };\r\n                }\r\n                return window;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityWindow.prototype.onActivityJoined = function (callback) {\r\n            this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowJoinedActivity, callback);\r\n        };\r\n        ActivityWindow.prototype.onActivityRemoved = function (callback) {\r\n            this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowLeftActivity, callback);\r\n        };\r\n        ActivityWindow.prototype._updateCore = function (other) {\r\n            var _this = this;\r\n            ifNotUndefined(other._activityId, function (x) { return _this._activityId = x; });\r\n            ifNotUndefined(other._isIndependent, function (x) { return _this._isIndependent = x; });\r\n            ifNotUndefined(other._hcWindowId, function (x) { return _this._hcWindowId = x; });\r\n            ifNotUndefined(other._type, function (x) { return _this._type = x; });\r\n            ifNotUndefined(other._name, function (x) { return _this._name = x; });\r\n            if (!isUndefinedOrNull(other._instance)) {\r\n                this._instance = other._instance;\r\n            }\r\n        };\r\n        ActivityWindow.prototype._subscribeForActivityWindowEvent = function (eventName, callback) {\r\n            var _this = this;\r\n            this._manager.subscribeWindowEvents(function (activity, window, event) {\r\n                if (window.id !== _this.id) {\r\n                    return;\r\n                }\r\n                if (event === eventName) {\r\n                    callback(activity);\r\n                }\r\n            });\r\n        };\r\n        ActivityWindow.prototype._beforeDelete = function (other) {\r\n            this._hcWindowId = other._hcWindowId;\r\n        };\r\n        return ActivityWindow;\r\n    }(ActivityEntity));\n\n    var ActivityStatus = (function () {\r\n        function ActivityStatus(state, message, time) {\r\n            this.state = state;\r\n            this.message = message;\r\n            this.time = time;\r\n        }\r\n        ActivityStatus.prototype.getState = function () {\r\n            return this.state;\r\n        };\r\n        ActivityStatus.prototype.getMessage = function () {\r\n            return this.message;\r\n        };\r\n        ActivityStatus.prototype.getTime = function () {\r\n            return this.time;\r\n        };\r\n        return ActivityStatus;\r\n    }());\n\n    var gwMmessageError = \"error\";\r\n    var gwMessageAddActivityTypes = \"add-types\";\r\n    var gwMmessageActivityTypesAdded = \"types-added\";\r\n    var gwMessageRemoveActivityTypes = \"remove-types\";\r\n    var gwMessageActivityTypesRemoved = \"types-removed\";\r\n    var gwMessageActivityCreated = \"created\";\r\n    var gwMessageActivityDestroyed = \"destroyed\";\r\n    var gwMessageActivityInitiated = \"initiated\";\r\n    var gwMmessageJoinActivity = \"join-activity\";\r\n    var gwMessageJoinedActivity = \"joined\";\r\n    var gwMessageActivityJoined = \"activity-joined\";\r\n    var gwMessageLeaveActivity = \"leave-activity\";\r\n    var gwMessageActivityLeft = \"left\";\r\n    var gwNmessageMergeActivities = \"merge\";\r\n    var gwMessageSplitActivities = \"split\";\r\n    var gwMessageOwnerChanged = \"owner-changed\";\r\n    var gwMessageAddPeerFactories = \"add-peer-factories\";\r\n    var gwMessagePeerFactoriesAdded = \"peer-factories-added\";\r\n    var gwMessageRemovePeerFactories = \"remove-peer-factories\";\r\n    var gwMessagePeerFactoriesRemoved = \"peer-factories-removed\";\r\n    var gwMessageCreateActivity = \"create\";\r\n    var gwMessageCreatePeer = \"create-peer\";\r\n    var gwMessagePeerRequested = \"peer-requested\";\r\n    var gwMessageReady = \"ready\";\r\n    var gwMessagePeerCreated = \"peer-created\";\r\n    var gwMessageDestroyActivity = \"destroy\";\r\n    var gwMessageDisposePeer = \"dispose-peer\";\r\n    var gwMessageDestroyPeer = \"destroy-peer\";\r\n    var GW3Bridge$1 = (function () {\r\n        function GW3Bridge(config) {\r\n            var _this = this;\r\n            this._activityChangeCallbacks = [];\r\n            this._activityTypeStatusChangeCallbacks = [];\r\n            this._activityWindowChangeCallbacks = [];\r\n            this._windowTypeStatusChangeCallbacks = [];\r\n            this._peerIdAndFactoryIdToPeerType = {};\r\n            this._peerFactoriesRegisteredByUs = {};\r\n            this._gw3Subscriptions = [];\r\n            this._contextSubscriptions = {};\r\n            this._activityTypesInitiatedFromMe = {};\r\n            this._config = config;\r\n            this._connection = config.connection;\r\n            this._logger = config.logger;\r\n            this._contexts = config.contexts;\r\n            this._windows = config.windows;\r\n            this._sessionJoinedPromise = new Promise(function (resolve) {\r\n                _this._sessionJoinedPromiseResolve = resolve;\r\n            });\r\n            this._activityJoinedPromise = new Promise(function (resolve) {\r\n                _this._activityJoinedPromiseResolve = resolve;\r\n            });\r\n            if (!this._config.activityId) {\r\n                this._activityJoinedPromiseResolve({});\r\n            }\r\n            this._gw3Session = this._connection.domain(\"activity\", [\"joined\", \"initiated\", \"peer-created\", \"token\"]);\r\n            if (typeof window !== \"undefined\") {\r\n                var glue42gd_1 = window.glue42gd;\r\n                if (glue42gd_1 && typeof glue42gd_1.addRefreshHandler === \"function\") {\r\n                    glue42gd_1.addRefreshHandler(function (success, error) {\r\n                        _this._gw3Session\r\n                            .send({\r\n                            type: \"reload\"\r\n                        })\r\n                            .then(function (msg) {\r\n                            if (!msg.token) {\r\n                                error(\"Expected gateway token for refreshing.\");\r\n                                return;\r\n                            }\r\n                            try {\r\n                                glue42gd_1.setGWToken(msg.token);\r\n                            }\r\n                            catch (e) {\r\n                                error(e.message || e);\r\n                                return;\r\n                            }\r\n                            success();\r\n                        }, error);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        GW3Bridge.activityTypeGwMessageEntityToActivityType = function (entity, description) {\r\n            var nameToWindowType = function (windowName) {\r\n                return new WindowType(windowName, undefined);\r\n            };\r\n            return new ActivityType(entity.name, entity.owner_type && nameToWindowType(entity.owner_type), entity.helper_types && entity.helper_types.map(nameToWindowType), description);\r\n        };\r\n        GW3Bridge.peerFactoryGwMessageEntityToWindowType = function (entity) {\r\n            return new WindowType(entity.peer_type, function (_) { return undefined; });\r\n        };\r\n        GW3Bridge.activityGwMessageToActivity = function (msg, status) {\r\n            var ownerId = msg.owner !== undefined ? msg.owner.peer_id : msg.owner_id;\r\n            return new Activity(msg.activity_id, msg.activity_type, status, msg.context_snapshot, ownerId);\r\n        };\r\n        GW3Bridge.activityToActivityStatusChangeEvent = function (act) {\r\n            return new EntityEvent(act, new ActivityStatusChangeEventContext(act.status, undefined));\r\n        };\r\n        Object.defineProperty(GW3Bridge.prototype, \"bridgeType\", {\r\n            get: function () {\r\n                return \"GW3\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GW3Bridge.prototype.init = function () {\r\n            var _this = this;\r\n            this.forwardActivityTypeMessagesToStatusEventHandlers();\r\n            this.subscribe(gwMessageActivityCreated, this.handleActivityCreatedMessage);\r\n            this.subscribe(gwMessageActivityDestroyed, this.handleActivityDestroyedMessage);\r\n            this.forwardActivityMessagesToStatusEventHandlers();\r\n            this.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers();\r\n            this.forwardPeerFactoryMessagesToStatusEventHandlers();\r\n            this.forwardPeerFactoryMessagesToPeerFactoryRequests();\r\n            this.subscribe(gwMessagePeerFactoriesAdded, this.handlePeerFactoriesAdded);\r\n            this.subscribe(gwMessagePeerFactoriesRemoved, this.handlePeerFactoriesRemoved);\r\n            this.forwardActivityWindowMessagesToEventHandlers();\r\n            this.subscribe(gwMessageDisposePeer, function () {\r\n                if (_this._config.disposeRequestHandling === \"dispose\") {\r\n                    _this.dispose();\r\n                    return;\r\n                }\r\n                if (_this._config.disposeRequestHandling === \"exit\") {\r\n                    if (_this._windows && typeof _this._windows.my() !== \"undefined\") {\r\n                        _this._windows.my().close();\r\n                        return;\r\n                    }\r\n                    if (typeof window !== \"undefined\" && typeof window.close === \"function\") {\r\n                        window.close();\r\n                        return;\r\n                    }\r\n                    if (typeof process !== \"undefined\" && typeof process.exit === \"function\") {\r\n                        process.exit();\r\n                        return;\r\n                    }\r\n                }\r\n            });\r\n            this._gw3Session.onJoined(function () {\r\n                if (_this._config.mode === \"trackMyOnly\" ||\r\n                    _this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\r\n                    _this._sessionJoinedPromiseResolve(_this);\r\n                }\r\n                else {\r\n                    _this._gw3Session\r\n                        .send({\r\n                        type: \"subscribe\",\r\n                        activity_types: (_this._config.mode === \"trackAll\" ? [] :\r\n                            _this._config.mode === \"trackTypes\" ? _this._config.typesToTrack : [])\r\n                    })\r\n                        .then(function () {\r\n                        _this._sessionJoinedPromiseResolve(_this);\r\n                    });\r\n                }\r\n            });\r\n            this._gw3Session.join();\r\n        };\r\n        GW3Bridge.prototype.dispose = function () {\r\n            var _this = this;\r\n            this._gw3Subscriptions.forEach(function (sub) { return sub && _this._connection.off(sub); });\r\n            this._gw3Subscriptions.length = 0;\r\n        };\r\n        GW3Bridge.prototype.ready = function () {\r\n            return Promise.all([this._sessionJoinedPromise, this._activityJoinedPromise]);\r\n        };\r\n        GW3Bridge.prototype.initReady = function () {\r\n            return this._sessionJoinedPromise;\r\n        };\r\n        GW3Bridge.prototype.onActivityTypeStatusChange = function (callback) {\r\n            this._activityTypeStatusChangeCallbacks.push(callback);\r\n        };\r\n        GW3Bridge.prototype.registerActivityType = function (activityTypeName, ownerWindow, helperWindows, config, description) {\r\n            var _this = this;\r\n            var entity = {};\r\n            entity.name = activityTypeName;\r\n            var toActivityPeerConfig = function (windowDefinition) { return ({ type: windowDefinition.type, name: windowDefinition.name, configuration: windowDefinition }); };\r\n            entity.owner_type = toActivityPeerConfig(ownerWindow);\r\n            entity.helper_types = helperWindows.map(toActivityPeerConfig);\r\n            return this._gw3Session\r\n                .send({\r\n                type: gwMessageAddActivityTypes,\r\n                types: [entity]\r\n            })\r\n                .then(function () {\r\n                var activityType = GW3Bridge.activityTypeGwMessageEntityToActivityType(entity, description);\r\n                _this.invokeCallbacks(_this._activityTypeStatusChangeCallbacks, new EntityEvent(activityType, new EntityEventContext(EntityEventType.Added)), gwMessageAddActivityTypes);\r\n                return activityType;\r\n            });\r\n        };\r\n        GW3Bridge.prototype.unregisterActivityType = function (activityTypeName) {\r\n            var _this = this;\r\n            return this._gw3Session\r\n                .send({\r\n                type: gwMessageRemoveActivityTypes,\r\n                types: [activityTypeName]\r\n            })\r\n                .then(function () {\r\n                var activityType = new ActivityType(activityTypeName, undefined, undefined, undefined);\r\n                _this.invokeCallbacks(_this._activityTypeStatusChangeCallbacks, new EntityEvent(activityType, new EntityEventContext(EntityEventType.Removed)), gwMessageAddActivityTypes);\r\n            });\r\n        };\r\n        GW3Bridge.prototype.onWindowTypeStatusChange = function (callback) {\r\n            this._windowTypeStatusChangeCallbacks.push(callback);\r\n        };\r\n        GW3Bridge.prototype.registerWindowFactory = function (windowType, factory, parameters) {\r\n            var _this = this;\r\n            if (this._peerFactoriesRegisteredByUs[windowType]) {\r\n                return Promise.reject(new Error(\"Factory for windowType \" + windowType + \" already registered.\"));\r\n            }\r\n            this._peerFactoriesRegisteredByUs[windowType] = factory;\r\n            var entity = {\r\n                id: windowType,\r\n                peer_type: windowType,\r\n                configuration: parameters\r\n            };\r\n            return this._gw3Session.send({\r\n                type: gwMessageAddPeerFactories,\r\n                factories: [entity]\r\n            })\r\n                .then(function () {\r\n                _this.invokeCallbacks(_this._windowTypeStatusChangeCallbacks, new EntityEvent(GW3Bridge.peerFactoryGwMessageEntityToWindowType(entity), new EntityEventContext(EntityEventType.Added)), gwMessageAddPeerFactories);\r\n            })\r\n                .catch(function () {\r\n                delete _this._peerFactoriesRegisteredByUs[windowType];\r\n            });\r\n        };\r\n        GW3Bridge.prototype.unregisterWindowFactory = function (windowType) {\r\n            var _this = this;\r\n            var factory = this._peerFactoriesRegisteredByUs[windowType];\r\n            if (!factory) {\r\n                return Promise.reject(new Error(\"Factory for windowType \" + windowType + \" not registered.\"));\r\n            }\r\n            delete this._peerFactoriesRegisteredByUs[windowType];\r\n            return this._gw3Session.send({\r\n                type: gwMessageRemovePeerFactories,\r\n                factory_ids: [windowType]\r\n            }).then(function () {\r\n                _this.invokeCallbacks(_this._windowTypeStatusChangeCallbacks, new EntityEvent(new WindowType(windowType, undefined), new EntityEventContext(EntityEventType.Removed)), gwMessageAddPeerFactories);\r\n            });\r\n        };\r\n        GW3Bridge.prototype.onActivityStatusChange = function (callback) {\r\n            this._activityChangeCallbacks.push(callback);\r\n        };\r\n        GW3Bridge.prototype.initiateActivity = function (activityType, context, configuration) {\r\n            var _this = this;\r\n            var initiateMsg = {\r\n                type: gwMessageCreateActivity,\r\n                activity_type: activityType,\r\n                initial_context: context,\r\n            };\r\n            if (this.isOverrideTypeDefinition(configuration)) {\r\n                initiateMsg.types_override = {\r\n                    owner_type: { type: configuration.owner.type, name: configuration.owner.name, configuration: configuration.owner },\r\n                    helper_types: configuration.helpers && configuration.helpers.map(function (wd) { return ({ type: wd.type, name: wd.name, configuration: wd }); })\r\n                };\r\n            }\r\n            else {\r\n                initiateMsg.configuration = configuration && configuration.map(function (wd) { return ({ type: wd.type, name: wd.name, configuration: wd }); });\r\n            }\r\n            return this.sendCreateAndMapResultingMessagesToPromise(initiateMsg, gwMessageActivityInitiated, function (msg, requestId) { return msg.request_id === requestId; }, gwMessageActivityCreated, function (msg, requestId, initMsg) { return msg.activity_id === initMsg.activity_id; }, gwMessageActivityDestroyed, function (msg, requestId, initMsg) { return msg.activity_id === initMsg.activity_id; }, function (msg) { return msg.activity_id; }).then(function (id) {\r\n                if (_this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\r\n                    if (!_this._activityTypesInitiatedFromMe[activityType]) {\r\n                        _this._activityTypesInitiatedFromMe[activityType] = true;\r\n                        return _this._gw3Session\r\n                            .send({\r\n                            type: \"subscribe\",\r\n                            activity_types: [activityType]\r\n                        })\r\n                            .then(function () {\r\n                            return id;\r\n                        });\r\n                    }\r\n                }\r\n                return id;\r\n            });\r\n        };\r\n        GW3Bridge.prototype.stopActivity = function (activity) {\r\n            return this._gw3Session.send({\r\n                type: gwMessageDestroyActivity,\r\n                activity_id: activity.id,\r\n                reason_uri: \"com.tick42.glue.activity.constants.destroyReason.general\",\r\n                reason: \"Destroying activity\"\r\n            }).then(function (_) { return true; });\r\n        };\r\n        GW3Bridge.prototype.updateActivityContext = function (activity, context, fullReplace, removedKeys) {\r\n            if (fullReplace) {\r\n                return this._contexts.set(activity.id, context);\r\n            }\r\n            else {\r\n                removedKeys = removedKeys || [];\r\n                for (var _i = 0, removedKeys_1 = removedKeys; _i < removedKeys_1.length; _i++) {\r\n                    var x = removedKeys_1[_i];\r\n                    context[x] = null;\r\n                }\r\n                return this._contexts.update(activity.id, context);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.announceWindow = function (windowType, activityWindowId) {\r\n            throw new Error(\"Invalid operation 'announceWindow' for GW3 protocol\");\r\n        };\r\n        GW3Bridge.prototype.registerWindow = function (type, name, independent) {\r\n            var shouldSendReady = typeof this._connection.gatewayToken !== \"undefined\";\r\n            var peerId = this._connection.peerId;\r\n            if (typeof window !== \"undefined\") {\r\n                var glue42gd = window.glue42gd;\r\n                if (glue42gd) {\r\n                    shouldSendReady = typeof glue42gd.activityInfo !== \"undefined\";\r\n                }\r\n            }\r\n            if (shouldSendReady) {\r\n                this._gw3Session.send({\r\n                    type: gwMessageReady,\r\n                });\r\n            }\r\n            this.invokeCallbacks(this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(peerId, name, type, undefined, this.getAgmInstance(peerId), independent, this.generateWindowGetter(peerId), undefined), new EntityEventContext(EntityEventType.Added)), \"register window\");\r\n            return Promise.resolve(peerId);\r\n        };\r\n        GW3Bridge.prototype.onActivityWindowChange = function (callback) {\r\n            this._activityWindowChangeCallbacks.push(callback);\r\n        };\r\n        GW3Bridge.prototype.createWindow = function (activityId, windowDefinition) {\r\n            var _this = this;\r\n            if (!windowDefinition.layout) {\r\n                if (windowDefinition.left || windowDefinition.width || windowDefinition.height || windowDefinition.top) {\r\n                    windowDefinition.layout = {\r\n                        mode: \"pixels\",\r\n                        cellSize: 1,\r\n                    };\r\n                }\r\n            }\r\n            return this.sendCreateAndMapResultingMessagesToPromise({\r\n                type: gwMessageCreatePeer,\r\n                peer_type: windowDefinition.type,\r\n                peer_name: windowDefinition.name || windowDefinition.type,\r\n                configuration: windowDefinition,\r\n                activity_id: activityId,\r\n            }, undefined, undefined, gwMessagePeerCreated, function (msg, requestId) { return msg.request_id === requestId; }, undefined, undefined, function (msg) { return msg.created_id; })\r\n                .then(function (id) {\r\n                if (!activityId) {\r\n                    return;\r\n                }\r\n                return _this.joinActivity(activityId, id, windowDefinition.name)\r\n                    .then(function () {\r\n                    return id;\r\n                });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.closeWindow = function (id) {\r\n            return this._gw3Session.send({\r\n                type: gwMessageDestroyPeer,\r\n                destroy_peer_id: id\r\n            }).then(function (_) { return undefined; });\r\n        };\r\n        GW3Bridge.prototype.getAnnouncementInfo = function () {\r\n            var activityId = this._config.activityId || (this._config.announcementInfo && this._config.announcementInfo.activityId);\r\n            var activityWindowType = (this._config.announcementInfo && this._config.announcementInfo.activityWindowType);\r\n            var activityWindowIndependent = (this._config.announcementInfo && this._config.announcementInfo.activityWindowIndependent);\r\n            var activityWindowName = (this._config.announcementInfo && this._config.announcementInfo.activityWindowName);\r\n            if (typeof window !== \"undefined\" &&\r\n                typeof window.location !== \"undefined\" &&\r\n                window.location.search &&\r\n                typeof URLSearchParams === \"function\") {\r\n                var searchParams = new URLSearchParams(location.search.slice(1));\r\n                activityWindowType = activityWindowType || searchParams.get(\"t42PeerType\");\r\n                activityWindowType = activityWindowType || searchParams.get(\"t42ActivityWindowType\");\r\n                if (typeof activityWindowIndependent === \"undefined\") {\r\n                    activityWindowIndependent = searchParams.get(\"t42ActivityWindowIndependent\");\r\n                }\r\n                activityWindowName = activityWindowName || searchParams.get(\"t42ActivityWindowName\");\r\n                activityId = activityId || searchParams.get(\"t42ActivityId\");\r\n            }\r\n            activityWindowType = activityWindowType || \"unknown\";\r\n            activityWindowIndependent = activityWindowIndependent || false;\r\n            activityWindowName = activityWindowName || this._connection.peerId;\r\n            return {\r\n                activityWindowId: undefined,\r\n                activityId: activityId,\r\n                activityWindowType: activityWindowType,\r\n                activityWindowIndependent: activityWindowIndependent,\r\n                activityWindowName: activityWindowName,\r\n            };\r\n        };\r\n        GW3Bridge.prototype.joinActivity = function (activityId, windowId, name) {\r\n            var _this = this;\r\n            var maybeName = (name && { name: name }) || {};\r\n            return this._gw3Session.send(__assign({ type: gwMmessageJoinActivity, target_id: windowId, activity_id: activityId }, maybeName)).then(function () {\r\n                _this.invokeCallbacks(_this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(windowId, undefined, undefined, activityId, _this.getAgmInstance(windowId), undefined, _this.generateWindowGetter(windowId), undefined), new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)), \"activity joined - ActivityWindow\");\r\n                _this.invokeCallbacks(_this._activityChangeCallbacks, new EntityEvent(new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined), new EntityEventContext(EntityEventType.Updated)), \"activity joined - Activity\");\r\n            });\r\n        };\r\n        GW3Bridge.prototype.leaveActivity = function (activityId, windowId) {\r\n            var _this = this;\r\n            return this._gw3Session.send({\r\n                type: gwMessageLeaveActivity,\r\n                target_id: windowId,\r\n                activity_id: activityId\r\n            }).then(function () {\r\n                _this.invokeCallbacks(_this._activityWindowChangeCallbacks, new EntityEvent(new ActivityWindow(windowId, undefined, undefined, null, _this.getAgmInstance(windowId), undefined, _this.generateWindowGetter(windowId), undefined), new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)), \"activity left - ActivityWindow\");\r\n                _this.invokeCallbacks(_this._activityChangeCallbacks, new EntityEvent(new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined), new EntityEventContext(EntityEventType.Updated)), \"activity left - Activity\");\r\n            });\r\n        };\r\n        GW3Bridge.prototype.getActivityTypes = function () {\r\n            return Promise.resolve([]);\r\n        };\r\n        GW3Bridge.prototype.getWindowTypes = function () {\r\n            return Promise.resolve([]);\r\n        };\r\n        GW3Bridge.prototype.getActivities = function () {\r\n            return Promise.resolve([]);\r\n        };\r\n        GW3Bridge.prototype.getActivityWindows = function () {\r\n            return Promise.resolve([]);\r\n        };\r\n        GW3Bridge.prototype.createStackedWindows = function (id, windowDefinitions, timeout) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.getWindowBounds = function (id) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.setWindowBounds = function (id, bounds) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.activateWindow = function (id, focus) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.setWindowVisibility = function (id, visible) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.cloneActivity = function (id, cloneOptions) {\r\n            return undefined;\r\n        };\r\n        GW3Bridge.prototype.attachActivities = function (from, to, tag) {\r\n            return this._gw3Session.send({\r\n                type: gwNmessageMergeActivities,\r\n                into: to,\r\n                merge: from\r\n            });\r\n        };\r\n        GW3Bridge.prototype.detachActivities = function (activityId, newActivityInfo) {\r\n            return this._gw3Session.send({\r\n                type: gwMessageSplitActivities,\r\n                from: activityId,\r\n            }).then(function () { return \"\"; });\r\n        };\r\n        GW3Bridge.prototype.onActivitiesAttached = function (callback) {\r\n        };\r\n        GW3Bridge.prototype.onActivitiesDetached = function (callback) {\r\n        };\r\n        GW3Bridge.prototype.onActivityAttachedDescriptorsRefreshed = function (callback) {\r\n        };\r\n        GW3Bridge.prototype.getAttachedDescriptors = function () {\r\n            return Promise.resolve([]);\r\n        };\r\n        GW3Bridge.prototype.getRandomRequestId = function () {\r\n            return this._connection.peerId + \":\" + Math.floor(Math.random() * 1e9) + \"\";\r\n        };\r\n        GW3Bridge.prototype.forwardAddedAndRemovedMessagesToEventHandler = function (addedMessageType, removedMessageType, mapper, handlers) {\r\n            var getGetEntityEvent = function (isAdded) { return function (entity) { return new EntityEvent(entity, new EntityEventContext(isAdded ?\r\n                EntityEventType.Added :\r\n                EntityEventType.Removed)); }; };\r\n            var sub1;\r\n            var sub2;\r\n            sub1 = addedMessageType && this.forwardMessageToEventHandler(addedMessageType, function (msg) { return mapper(msg, true); }, getGetEntityEvent(true), handlers);\r\n            sub2 = removedMessageType && this.forwardMessageToEventHandler(removedMessageType, function (msg) { return mapper(msg, false); }, getGetEntityEvent(false), handlers);\r\n            return [sub1, sub2].filter(function (x) { return x; });\r\n        };\r\n        GW3Bridge.prototype.forwardMessageToEventHandler = function (messageType, mapper, getEntityEvent, handler) {\r\n            return this.subscribe(messageType, function (msg) {\r\n                mapper(msg)\r\n                    .forEach(function (ent) {\r\n                    return handler.forEach(function (h) { return h(getEntityEvent(ent, msg)); });\r\n                });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.sendCreateAndMapResultingMessagesToPromise = function (msg, initiatedMessageType, initiatedMessageFilter, createdMessageType, createdMessageFilter, cancelledMessageType, cancelledMessageFilter, createdMessageToPromiseResolution) {\r\n            var _this = this;\r\n            var reqId = this.getRandomRequestId();\r\n            var resolveCreatedPromise;\r\n            var rejectCreatedPromise;\r\n            var createdPromise = new Promise(function (resolve, reject) {\r\n                resolveCreatedPromise = resolve;\r\n                rejectCreatedPromise = reject;\r\n            });\r\n            var initiatedMessageAck = null;\r\n            var initiatedSubscription;\r\n            var createdSubscription;\r\n            var cancelledSubscription;\r\n            var errorSubscription;\r\n            var dropSubscriptions = function () {\r\n                _this.dropSubscription(initiatedSubscription);\r\n                _this.dropSubscription(createdSubscription);\r\n                _this.dropSubscription(cancelledSubscription);\r\n                _this.dropSubscription(errorSubscription);\r\n            };\r\n            initiatedSubscription = initiatedMessageType &&\r\n                this.subscribe(initiatedMessageType, function (msg4) {\r\n                    if (!initiatedMessageFilter(msg4, reqId)) {\r\n                        return;\r\n                    }\r\n                    initiatedMessageAck = msg4;\r\n                    _this.dropSubscription(initiatedSubscription);\r\n                });\r\n            createdSubscription =\r\n                this.subscribe(createdMessageType, function (msg1) {\r\n                    if (!createdMessageFilter(msg1, reqId, initiatedMessageAck)) {\r\n                        return;\r\n                    }\r\n                    resolveCreatedPromise(createdMessageToPromiseResolution(msg1));\r\n                });\r\n            cancelledSubscription = cancelledMessageType &&\r\n                this.subscribe(cancelledMessageType, function (msg2) {\r\n                    if (!cancelledMessageFilter(msg2, reqId, initiatedMessageAck)) {\r\n                        return;\r\n                    }\r\n                    rejectCreatedPromise(msg2);\r\n                });\r\n            errorSubscription = cancelledMessageType &&\r\n                this.subscribe(gwMmessageError, function (msg3) {\r\n                    if (msg3.request_id !== reqId) {\r\n                        return;\r\n                    }\r\n                    rejectCreatedPromise(msg3);\r\n                });\r\n            msg.request_id = reqId;\r\n            var toReturn = this._gw3Session\r\n                .send(msg)\r\n                .then(function () {\r\n                return createdPromise;\r\n            });\r\n            toReturn.then(dropSubscriptions, dropSubscriptions);\r\n            return toReturn;\r\n        };\r\n        GW3Bridge.prototype.peerFactoryIdAndOwnerIdToWindowType = function (factoryId, ownerId) {\r\n            var peerType = this._peerIdAndFactoryIdToPeerType[ownerId + \":\" + factoryId];\r\n            if (!peerType) {\r\n                return null;\r\n            }\r\n            else {\r\n                return new WindowType(peerType, undefined);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.subscribe = function (messageType, handler) {\r\n            var _this = this;\r\n            var sub = this._connection.on(messageType, function (msg) { return handler.bind(_this)(msg); });\r\n            this._gw3Subscriptions.push(sub);\r\n            return sub;\r\n        };\r\n        GW3Bridge.prototype.dropSubscription = function (subscription) {\r\n            if (subscription) {\r\n                this._connection.off(subscription);\r\n                delete this._gw3Subscriptions[this._gw3Subscriptions.indexOf(subscription)];\r\n            }\r\n        };\r\n        GW3Bridge.prototype.invokeCallbacks = function (callbacks, event, description) {\r\n            var _this = this;\r\n            callbacks.forEach(function (cb) {\r\n                try {\r\n                    cb(event);\r\n                }\r\n                catch (err) {\r\n                    _this._logger.error(\"Error in \" + (description || event.context.type) + \" callback: \" + JSON.stringify(err));\r\n                }\r\n            });\r\n        };\r\n        GW3Bridge.prototype.handleActivityCreatedMessage = function (msg) {\r\n            if (!msg.context_id) {\r\n                this._logger.error(\"Activity created with unknown context_id: \" + msg.activity_id);\r\n            }\r\n            else {\r\n                if (!this._contextSubscriptions[msg.activity_id]) {\r\n                    this.subscribeToContext(msg);\r\n                }\r\n            }\r\n        };\r\n        GW3Bridge.prototype.subscribeToContext = function (msg) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var activityId, _a, _b;\r\n                var _this = this;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            activityId = msg.activity_id;\r\n                            _a = this._contextSubscriptions;\r\n                            _b = activityId;\r\n                            return [4, this._contexts.subscribe(activityId, function (data, updated, removed) {\r\n                                    var event = new EntityEvent(new Activity(activityId, undefined, undefined, data, undefined), new ActivityContextChangedEventContext(data, updated, removed));\r\n                                    _this.invokeCallbacks(_this._activityChangeCallbacks, event, \"context updated\");\r\n                                })];\r\n                        case 1:\r\n                            _a[_b] =\r\n                                _c.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GW3Bridge.prototype.handleActivityDestroyedMessage = function (msg) {\r\n            var unsubscribeContext = this._contextSubscriptions[msg.activity_id];\r\n            if (typeof unsubscribeContext === \"function\") {\r\n                unsubscribeContext();\r\n            }\r\n            delete this._contextSubscriptions[msg.activity_id];\r\n        };\r\n        GW3Bridge.prototype.handlePeerFactoriesAdded = function (msg) {\r\n            var _this = this;\r\n            msg.factories.forEach(function (entity) {\r\n                _this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + entity.id] = entity.peer_type;\r\n            });\r\n        };\r\n        GW3Bridge.prototype.handlePeerFactoriesRemoved = function (msg) {\r\n            var _this = this;\r\n            msg.factory_ids.forEach(function (factoryId) {\r\n                delete _this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + factoryId];\r\n            });\r\n        };\r\n        GW3Bridge.prototype.forwardActivityTypeMessagesToStatusEventHandlers = function () {\r\n            this.forwardAddedAndRemovedMessagesToEventHandler(gwMmessageActivityTypesAdded, gwMessageActivityTypesRemoved, function (msg, isAdded) { return isAdded\r\n                ? msg.types.map(function (t) { return GW3Bridge.activityTypeGwMessageEntityToActivityType(t, undefined); })\r\n                : msg.types.map(function (t) { return new ActivityType(t.name, undefined, undefined, undefined); }); }, this._activityTypeStatusChangeCallbacks);\r\n        };\r\n        GW3Bridge.prototype.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers = function () {\r\n            var _this = this;\r\n            for (var _i = 0, _a = [gwMessageActivityCreated, gwMessageJoinedActivity, gwMessageOwnerChanged]; _i < _a.length; _i++) {\r\n                var activityCreatedMessage = _a[_i];\r\n                this.forwardMessageToEventHandler(activityCreatedMessage, function (msg) {\r\n                    return ([msg.owner || __assign(__assign({}, msg), { type: msg.peer_type, name: msg.peer_name, peer_id: msg.owner_id })])\r\n                        .concat(msg.participants || [])\r\n                        .map(function (info) { return new ActivityWindow(info.peer_id, info.name, info.type, msg.activity_id, _this.getAgmInstance(info.peer_id), undefined, _this.generateWindowGetter(info.peer_id), undefined); });\r\n                }, function (ent, msg) { return new EntityEvent(ent, new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)); }, this._activityWindowChangeCallbacks);\r\n            }\r\n        };\r\n        GW3Bridge.prototype.forwardActivityMessagesToStatusEventHandlers = function () {\r\n            for (var _i = 0, _a = [gwMessageActivityCreated, gwMessageJoinedActivity]; _i < _a.length; _i++) {\r\n                var createdMessage = _a[_i];\r\n                this.forwardMessageToEventHandler(createdMessage, function (msg) { return [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"started\", \"\", new Date()))]; }, function (ent, msg) { return GW3Bridge.activityToActivityStatusChangeEvent(ent); }, this._activityChangeCallbacks);\r\n            }\r\n            this.forwardMessageToEventHandler(gwMessageActivityDestroyed, function (msg) { return [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"destroyed\", msg.reason, new Date()))]; }, function (ent, msg) { return GW3Bridge.activityToActivityStatusChangeEvent(ent); }, this._activityChangeCallbacks);\r\n            this.forwardMessageToEventHandler(gwMessageActivityInitiated, function (msg) { return [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))]; }, function (ent, msg) { return GW3Bridge.activityToActivityStatusChangeEvent(ent); }, this._activityChangeCallbacks);\r\n            this.forwardMessageToEventHandler(gwMessageOwnerChanged, function (msg) { return [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))]; }, function (ent, msg) { return GW3Bridge.activityToActivityStatusChangeEvent(ent); }, this._activityChangeCallbacks);\r\n        };\r\n        GW3Bridge.prototype.forwardPeerFactoryMessagesToStatusEventHandlers = function () {\r\n            var _this = this;\r\n            this.forwardAddedAndRemovedMessagesToEventHandler(gwMessagePeerFactoriesAdded, gwMessagePeerFactoriesRemoved, function (msg, isAdded) { return isAdded\r\n                ? msg.factories.map(GW3Bridge.peerFactoryGwMessageEntityToWindowType)\r\n                : msg.factory_ids.map(function (id) { return _this.peerFactoryIdAndOwnerIdToWindowType(id, msg.owner_id); }).filter(function (x) { return x != null; }); }, this._windowTypeStatusChangeCallbacks);\r\n        };\r\n        GW3Bridge.prototype.forwardPeerFactoryMessagesToPeerFactoryRequests = function () {\r\n            var _this = this;\r\n            this.subscribe(gwMessagePeerRequested, function (msg) {\r\n                var factory = _this._peerFactoriesRegisteredByUs[msg.peer_factory];\r\n                if (!factory) {\r\n                    _this._gw3Session.send({\r\n                        type: gwMmessageError,\r\n                        request_id: msg.request_id,\r\n                        reason: \"Unknown peer factory \" + msg.peer_factory\r\n                    });\r\n                    return;\r\n                }\r\n                try {\r\n                    var configuration = msg.configuration || {};\r\n                    configuration.gateway_token = configuration.gateway_token || msg.gateway_token;\r\n                    configuration.peer_factory = configuration.peer_factory || msg.peer_factory;\r\n                    var promise = factory({\r\n                        activityId: msg.activity && msg.activity.id,\r\n                        activityType: msg.activity && msg.activity.type,\r\n                        type: msg.configuration && msg.configuration.type,\r\n                        gwToken: configuration.gateway_token,\r\n                        configuration: configuration\r\n                    });\r\n                    if (promise && promise.then && promise.catch) {\r\n                        promise.catch(function (err) { return _this._gw3Session.send({\r\n                            type: gwMmessageError,\r\n                            request_id: msg.request_id,\r\n                            reason: err && (err.message || JSON.stringify(err))\r\n                        }); });\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    _this._gw3Session.send({\r\n                        type: gwMmessageError,\r\n                        request_id: msg.request_id,\r\n                        reason: err && (err.message || JSON.stringify(err))\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        GW3Bridge.prototype.forwardActivityWindowMessagesToEventHandlers = function () {\r\n            var _this = this;\r\n            var _loop_1 = function (joinedMessage) {\r\n                this_1.subscribe(joinedMessage, function (msg) {\r\n                    var joinedId = (joinedMessage === gwMessageActivityJoined) ? msg.joined_id : msg.peer_id;\r\n                    var joinedType = (joinedMessage === gwMessageActivityJoined) ? msg.joined_type : msg.peer_type;\r\n                    var joinedName = (joinedMessage === gwMessageActivityJoined) ? msg.joined_name : msg.peer_name;\r\n                    var entity = new ActivityWindow(joinedId, joinedName, joinedType, msg.activity_id, _this.getAgmInstance(joinedId), undefined, _this.generateWindowGetter(joinedId), undefined);\r\n                    if (!_this._contextSubscriptions[msg.activity_id]) {\r\n                        _this.subscribeToContext(msg).then(function () {\r\n                            if (joinedMessage === gwMessageJoinedActivity) {\r\n                                _this._activityJoinedPromiseResolve({});\r\n                            }\r\n                        });\r\n                    }\r\n                    else if (joinedMessage === gwMessageJoinedActivity) {\r\n                        _this._activityJoinedPromiseResolve({});\r\n                    }\r\n                    _this.invokeCallbacks(_this._activityWindowChangeCallbacks, new EntityEvent(entity, new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)), joinedMessage);\r\n                });\r\n            };\r\n            var this_1 = this;\r\n            for (var _i = 0, _a = [gwMessageActivityJoined, gwMessageJoinedActivity]; _i < _a.length; _i++) {\r\n                var joinedMessage = _a[_i];\r\n                _loop_1(joinedMessage);\r\n            }\r\n            this.subscribe(gwMessageActivityLeft, function (msg) {\r\n                var entity = new ActivityWindow(msg.left_id, undefined, undefined, null, _this.getAgmInstance(msg.left_id), undefined, _this.generateWindowGetter(msg.left_id), undefined);\r\n                _this.invokeCallbacks(_this._activityWindowChangeCallbacks, new EntityEvent(entity, new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)), gwMessageActivityLeft);\r\n            });\r\n            this.forwardAddedAndRemovedMessagesToEventHandler(gwMessagePeerCreated, undefined, function (msg) { return [\r\n                new ActivityWindow(msg.created_id, undefined, undefined, undefined, undefined, undefined, _this.generateWindowGetter(msg.created_id), undefined)\r\n            ]; }, this._activityWindowChangeCallbacks);\r\n        };\r\n        GW3Bridge.prototype.getAgmInstance = function (id) {\r\n            return this._config.agm.servers().find(function (s) { return s.peerId === id || s.windowId === id; });\r\n        };\r\n        GW3Bridge.prototype.generateWindowGetter = function (peerId) {\r\n            var _this = this;\r\n            return function () {\r\n                var server = _this.getAgmInstance(peerId);\r\n                if (!server) {\r\n                    return;\r\n                }\r\n                var windowId = server.windowId;\r\n                return _this._config.windows.list().filter(function (w) { return w.id === windowId; })[0];\r\n            };\r\n        };\r\n        GW3Bridge.prototype.isOverrideTypeDefinition = function (value) {\r\n            if (typeof value === \"undefined\") {\r\n                return false;\r\n            }\r\n            if (value.owner) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        return GW3Bridge;\r\n    }());\n\n    var ActivityMy = (function () {\r\n        function ActivityMy(manager, windows) {\r\n            var _this = this;\r\n            this._myAttached = [];\r\n            this._myDetached = [];\r\n            this._myAttachedTo = [];\r\n            this._myDetachedFrom = [];\r\n            this._myActivityFrameColorChanged = [];\r\n            this._myActivityJoinedCallbacks = [];\r\n            this._myActivityRemovedCallbacks = [];\r\n            this._myContextUpdateCallbacks = [];\r\n            this._logger = Logger$1.Get(this);\r\n            this._m = manager;\r\n            manager.ready()\r\n                .then(function (am) {\r\n                am.subscribeActivityContextChanged(_this._subscribeMyContextChanged.bind(_this));\r\n                am.subscribeWindowEvents(_this._subscribeMyWindowEvent.bind(_this));\r\n                am.subscribeActivitiesAttached(_this._subscribeActivitiesAttached.bind(_this));\r\n                am.subscribeActivitiesDetached(_this._subscribeActivitiesDetached.bind(_this));\r\n                if (windows) {\r\n                    windows.onWindowFrameColorChanged(_this._subscribeWindowFrameColorChanged.bind(_this));\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(ActivityMy.prototype, \"window\", {\r\n            get: function () {\r\n                if (isUndefinedOrNull(this._w)) {\r\n                    var announcedWindows = this._m.announcedWindows;\r\n                    if (announcedWindows.length > 0) {\r\n                        this._w = announcedWindows[0];\r\n                    }\r\n                }\r\n                return this._w;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityMy.prototype, \"activity\", {\r\n            get: function () {\r\n                var myWin = this.window;\r\n                if (isUndefinedOrNull(myWin)) {\r\n                    return undefined;\r\n                }\r\n                return myWin.activity;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityMy.prototype.createWindow = function (windowType) {\r\n            return this._m.createWindow(this.activity, windowType);\r\n        };\r\n        ActivityMy.prototype.createStackedWindows = function (windowTypes, timeout) {\r\n            return this._m.createStackedWindows(this.activity, windowTypes, timeout);\r\n        };\r\n        Object.defineProperty(ActivityMy.prototype, \"context\", {\r\n            get: function () {\r\n                var activity = this.activity;\r\n                if (isUndefined(activity)) {\r\n                    return {};\r\n                }\r\n                return activity.context;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityMy.prototype.updateContext = function (context, callback) {\r\n            var activity = this.activity;\r\n            if (isUndefined(activity)) {\r\n                return new Promise(function (resolve, reject) {\r\n                    reject(\"Not in activity\");\r\n                });\r\n            }\r\n            return activity.updateContext(context, callback);\r\n        };\r\n        ActivityMy.prototype.setContext = function (context, callback) {\r\n            var activity = this.activity;\r\n            if (isUndefined(activity)) {\r\n                return new Promise(function (resolve, reject) {\r\n                    reject(\"Not in activity\");\r\n                });\r\n            }\r\n            return activity.setContext(context, callback);\r\n        };\r\n        ActivityMy.prototype.onActivityJoined = function (callback) {\r\n            this._myActivityJoinedCallbacks.push(callback);\r\n            var myWin = this.window;\r\n            if (!isUndefinedOrNull(myWin) && !isUndefinedOrNull(myWin.activity)) {\r\n                callback(myWin.activity);\r\n            }\r\n        };\r\n        ActivityMy.prototype.onActivityLeft = function (callback) {\r\n            this._myActivityRemovedCallbacks.push(callback);\r\n        };\r\n        ActivityMy.prototype.onContextChanged = function (callback) {\r\n            this._myContextUpdateCallbacks.push(callback);\r\n            var myWin = this.window;\r\n            if (isUndefinedOrNull(myWin)) {\r\n                return;\r\n            }\r\n            var activity = myWin.activity;\r\n            if (isUndefinedOrNull(activity)) {\r\n                return;\r\n            }\r\n            callback(activity.context, activity.context, [], activity);\r\n        };\r\n        ActivityMy.prototype.clone = function (options, callback) {\r\n            var act = this.activity;\r\n            return this._m.clone(act, options, callback);\r\n        };\r\n        ActivityMy.prototype.attach = function (activity, tag) {\r\n            var activityId;\r\n            if (typeof activity === \"string\") {\r\n                activityId = activity;\r\n            }\r\n            else {\r\n                activityId = activity.id;\r\n            }\r\n            return this._m.attachActivities(activityId, this.activity.id, tag);\r\n        };\r\n        ActivityMy.prototype.onActivityAttached = function (callback) {\r\n            this._myAttached.push(callback);\r\n        };\r\n        ActivityMy.prototype.onActivityDetached = function (callback) {\r\n            this._myDetached.push(callback);\r\n        };\r\n        ActivityMy.prototype.onAttachedToActivity = function (callback) {\r\n            this._myAttachedTo.push(callback);\r\n        };\r\n        ActivityMy.prototype.onDetachedFromActivity = function (callback) {\r\n            this._myDetachedFrom.push(callback);\r\n        };\r\n        Object.defineProperty(ActivityMy.prototype, \"attached\", {\r\n            get: function () {\r\n                if (!this.activity) {\r\n                    return [];\r\n                }\r\n                return this.activity.attached;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityMy.prototype.setFrameColor = function (color, callback) {\r\n            if (this.activity) {\r\n                return this.activity.setFrameColor(color, callback);\r\n            }\r\n            else {\r\n                return Promise.resolve(null);\r\n            }\r\n        };\r\n        ActivityMy.prototype.getFrameColor = function () {\r\n            if (this.activity) {\r\n                return this.activity.getFrameColor();\r\n            }\r\n            return \"\";\r\n        };\r\n        ActivityMy.prototype.onFrameColorChanged = function (callback) {\r\n            this._myActivityFrameColorChanged.push(callback);\r\n        };\r\n        ActivityMy.prototype._subscribeMyContextChanged = function (activity, context, delta, removed) {\r\n            var myWin = this.window;\r\n            if (isUndefinedOrNull(myWin)) {\r\n                return;\r\n            }\r\n            var myActivity = myWin.activity;\r\n            if (isUndefinedOrNull(myActivity)) {\r\n                return;\r\n            }\r\n            if (activity.id !== myActivity.id) {\r\n                return;\r\n            }\r\n            this._notifyMyContextChanged(activity, context, delta, removed);\r\n        };\r\n        ActivityMy.prototype._subscribeMyWindowEvent = function (activity, window, event) {\r\n            if (isUndefinedOrNull(this.window)) {\r\n                return;\r\n            }\r\n            if (this.window.id !== window.id) {\r\n                return;\r\n            }\r\n            if (event === EntityEventType.ActivityWindowJoinedActivity) {\r\n                this._notifyMyWindowEvent(activity, this._myActivityJoinedCallbacks);\r\n                this._notifyMyContextChanged(activity, activity.context, null, null);\r\n            }\r\n            else if (event === EntityEventType.ActivityWindowLeftActivity) {\r\n                this._notifyMyWindowEvent(activity, this._myActivityRemovedCallbacks);\r\n            }\r\n        };\r\n        ActivityMy.prototype._notifyMyWindowEvent = function (activity, callbackStore) {\r\n            var _this = this;\r\n            callbackStore.forEach(function (element) {\r\n                try {\r\n                    element(activity, event);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._notifyMyContextChanged = function (activity, context, delta, removed) {\r\n            var _this = this;\r\n            delta = delta || {};\r\n            removed = removed || [];\r\n            this._myContextUpdateCallbacks.forEach(function (element) {\r\n                try {\r\n                    element(context, delta, removed, activity);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._notifyAttached = function (state) {\r\n            var _this = this;\r\n            this._myAttached.forEach(function (cb) {\r\n                try {\r\n                    cb(state);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._notifyDetached = function (state) {\r\n            var _this = this;\r\n            this._myDetached.forEach(function (cb) {\r\n                try {\r\n                    cb(state);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._notifyAttachedTo = function (state) {\r\n            var _this = this;\r\n            this._myAttachedTo.forEach(function (cb) {\r\n                try {\r\n                    cb(_this.activity, state);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._notifyDetachedFrom = function (detached, existing, state) {\r\n            var _this = this;\r\n            this._myDetachedFrom.forEach(function (cb) {\r\n                try {\r\n                    cb(detached, existing, state);\r\n                }\r\n                catch (e) {\r\n                    _this._logger.warn(\"error in user callback \" + e);\r\n                }\r\n            });\r\n        };\r\n        ActivityMy.prototype._subscribeActivitiesAttached = function (newAct, state) {\r\n            var myWin = this.window;\r\n            if (isUndefinedOrNull(myWin)) {\r\n                return;\r\n            }\r\n            var myActivity = myWin.activity;\r\n            if (isUndefinedOrNull(myActivity)) {\r\n                return;\r\n            }\r\n            if (newAct.id !== myActivity.id) {\r\n                return;\r\n            }\r\n            if (state.windowIds.indexOf(myWin.id) >= 0) {\r\n                this._notifyAttachedTo(state);\r\n                return;\r\n            }\r\n            this._notifyAttached(state);\r\n        };\r\n        ActivityMy.prototype._subscribeActivitiesDetached = function (newAct, oldAct, state) {\r\n            var myWin = this.window;\r\n            if (isUndefinedOrNull(myWin)) {\r\n                return;\r\n            }\r\n            var myActivity = myWin.activity;\r\n            if (isUndefinedOrNull(myActivity)) {\r\n                return;\r\n            }\r\n            if (oldAct.id === myActivity.id) {\r\n                this._notifyDetached(state);\r\n            }\r\n            if (newAct.id === myActivity.id) {\r\n                this._notifyDetachedFrom(newAct, oldAct, state);\r\n            }\r\n        };\r\n        ActivityMy.prototype._subscribeWindowFrameColorChanged = function (window) {\r\n            var act = this.activity;\r\n            if (!act) {\r\n                return;\r\n            }\r\n            if (!act.owner) {\r\n                return;\r\n            }\r\n            if (act.owner.underlyingWindow.id === window.id) {\r\n                this._myActivityFrameColorChanged.forEach(function (callback) {\r\n                    callback(window.frameColor);\r\n                });\r\n            }\r\n        };\r\n        return ActivityMy;\r\n    }());\n\n    var ReadyMarker = (function () {\r\n        function ReadyMarker(name, signalsToWait) {\r\n            this._logger = Logger$1.Get(\"ReadyMarker [\" + name + \"]\");\r\n            this._logger.debug(\"Initializing ready marker for '\" + name + \"' with \" + signalsToWait + \" signals to wait\");\r\n            if (signalsToWait <= 0) {\r\n                throw new Error(\"Invalid signal number. Should be > 0\");\r\n            }\r\n            this._signals = signalsToWait;\r\n            this._callbacks = [];\r\n            this._name = name;\r\n        }\r\n        ReadyMarker.prototype.setCallback = function (callback) {\r\n            if (this.isSet()) {\r\n                callback(undefined);\r\n                return;\r\n            }\r\n            else if (this.isError()) {\r\n                callback(this._error);\r\n                return;\r\n            }\r\n            this._callbacks.push(callback);\r\n        };\r\n        ReadyMarker.prototype.signal = function (message) {\r\n            this._logger.debug(\"Signaled - \" + message + \" - signals left \" + (this._signals - 1));\r\n            this._signals--;\r\n            if (this._signals < 0) {\r\n                throw new Error(\"Error in ready marker '\" + this._name + \" - signals are \" + this._signals);\r\n            }\r\n            if (this.isSet()) {\r\n                this._callbacks.forEach(function (callback) {\r\n                    callback(undefined);\r\n                });\r\n            }\r\n        };\r\n        ReadyMarker.prototype.error = function (error) {\r\n            this._error = error;\r\n            this._callbacks.forEach(function (errorCallback) {\r\n                errorCallback(error);\r\n            });\r\n        };\r\n        ReadyMarker.prototype.isSet = function () {\r\n            if (this.isError()) {\r\n                return false;\r\n            }\r\n            return this._signals === 0;\r\n        };\r\n        ReadyMarker.prototype.isError = function () {\r\n            return !isUndefined(this._error);\r\n        };\r\n        ReadyMarker.prototype.getError = function () {\r\n            return this._error;\r\n        };\r\n        return ReadyMarker;\r\n    }());\n\n    var EntityObservableCollection = (function () {\r\n        function EntityObservableCollection(processNew) {\r\n            this._items = {};\r\n            this._listeners = [];\r\n            this._processNew = processNew;\r\n        }\r\n        EntityObservableCollection.prototype.addOne = function (item) {\r\n            this.add([item]);\r\n        };\r\n        EntityObservableCollection.prototype.add = function (items) {\r\n            var _this = this;\r\n            items.forEach(function (element) {\r\n                _this.process(new EntityEvent(element, new EntityEventContext(EntityEventType.Added)));\r\n            });\r\n        };\r\n        EntityObservableCollection.prototype.process = function (event) {\r\n            var context = event.context;\r\n            var type = context.type;\r\n            var entity = event.entity;\r\n            if (type === EntityEventType.StatusChange &&\r\n                !context.oldStatus) {\r\n                var act = this._items[entity.id];\r\n                if (act) {\r\n                    context.oldStatus = act.status;\r\n                }\r\n            }\r\n            if (type === EntityEventType.StatusChange &&\r\n                context.oldStatus &&\r\n                context.newStatus &&\r\n                context.oldStatus.state ===\r\n                    context.newStatus.state) {\r\n                context.type = EntityEventType.Updated;\r\n            }\r\n            if (typeof htmlContainer === \"undefined\") {\r\n                if (type === EntityEventType.ActivityWindowJoinedActivity &&\r\n                    this._items[entity.id] &&\r\n                    this._items[entity.id].activity) {\r\n                    context.type = EntityEventType.Updated;\r\n                }\r\n                if (type === EntityEventType.ActivityWindowLeftActivity &&\r\n                    this._items[entity.id] &&\r\n                    !this._items[entity.id].activity) {\r\n                    context.type = EntityEventType.Updated;\r\n                }\r\n            }\r\n            var internalEntity = this._updateInternalCollections(entity, type, context);\r\n            this._notifyListeners(internalEntity, context);\r\n            return internalEntity;\r\n        };\r\n        EntityObservableCollection.prototype.get = function () {\r\n            var result = [];\r\n            for (var key in this._items) {\r\n                if (this._items.hasOwnProperty(key)) {\r\n                    var element = this._items[key];\r\n                    result.push(element);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        EntityObservableCollection.prototype.getByName = function (name) {\r\n            for (var key in this._items) {\r\n                if (key === name) {\r\n                    return this._items[key];\r\n                }\r\n            }\r\n            return undefined;\r\n        };\r\n        EntityObservableCollection.prototype.getOrWait = function (name) {\r\n            var _this = this;\r\n            return new Promise(function (resolve) {\r\n                var entityAddedHandler = function (entity) {\r\n                    if (entity.id !== name) {\r\n                        return;\r\n                    }\r\n                    resolve(entity);\r\n                    _this.unsubscribe(entityAddedHandler);\r\n                };\r\n                _this.subscribe(entityAddedHandler);\r\n                var window = _this.getByName(name);\r\n                if (window) {\r\n                    _this.unsubscribe(entityAddedHandler);\r\n                    resolve(window);\r\n                    return;\r\n                }\r\n            });\r\n        };\r\n        EntityObservableCollection.prototype.subscribe = function (handler) {\r\n            var _this = this;\r\n            this._listeners.push(handler);\r\n            Object.keys(this._items).forEach(function (key) {\r\n                var element = _this._items[key];\r\n                handler(element, new EntityEventContext(EntityEventType.Added.toString()));\r\n            });\r\n            return function () {\r\n                _this.unsubscribe(handler);\r\n            };\r\n        };\r\n        EntityObservableCollection.prototype.unsubscribe = function (handler) {\r\n            var index = this._listeners.indexOf(handler);\r\n            if (index !== -1) {\r\n                this._listeners.splice(index, 1);\r\n            }\r\n        };\r\n        EntityObservableCollection.prototype._notifyListeners = function (entity, context) {\r\n            this._listeners.forEach(function (listener) {\r\n                try {\r\n                    listener(entity, context);\r\n                }\r\n                catch (e) {\r\n                    return;\r\n                }\r\n            });\r\n        };\r\n        EntityObservableCollection.prototype._updateInternalCollections = function (entity, type, context) {\r\n            var entityAsAny = entity;\r\n            var isActivityDestroy = (type === EntityEventType.StatusChange &&\r\n                entityAsAny.status &&\r\n                entityAsAny.status.state === ActivityState.Destroyed) ||\r\n                (type === EntityEventType.StatusChange &&\r\n                    context &&\r\n                    context.newStatus &&\r\n                    context.newStatus.state === ActivityState.Destroyed);\r\n            var isWindowClose = type === EntityEventType.Closed;\r\n            var isTypeRemove = type === EntityEventType.Removed && typeof entityAsAny.isIndependent === \"undefined\";\r\n            if (isTypeRemove || isWindowClose || isActivityDestroy) {\r\n                var oldEntity = this._items[entity.id];\r\n                delete this._items[entity.id];\r\n                this._processNew(entity);\r\n                if (oldEntity) {\r\n                    entity._beforeDelete(oldEntity);\r\n                }\r\n                return entity;\r\n            }\r\n            else {\r\n                var key = entity.id;\r\n                if (!this._items.hasOwnProperty(key)) {\r\n                    this._processNew(entity);\r\n                    this._items[entity.id] = entity;\r\n                }\r\n                else {\r\n                    this._items[entity.id]._update(entity);\r\n                }\r\n            }\r\n            return this._items[entity.id];\r\n        };\r\n        return EntityObservableCollection;\r\n    }());\n\n    var ActivityManager = (function () {\r\n        function ActivityManager(bridge, autoAnnounce, windows) {\r\n            var _this = this;\r\n            this._logger = Logger$1.Get(\"activityManager\");\r\n            this._announcedWindows = [];\r\n            this._attachedCallbacks = [];\r\n            this._detachedCallbacks = [];\r\n            this._frameColorChangesCallbacks = [];\r\n            this._windowHandlers = [];\r\n            this._bridge = bridge;\r\n            this._activityTypes = new EntityObservableCollection(function (e) { return _this._grabEntity(e); });\r\n            this._windowTypes = new EntityObservableCollection(function (e) { return _this._grabEntity(e); });\r\n            this._activities = new EntityObservableCollection(function (e) { return _this._grabEntity(e); });\r\n            this._windows = new EntityObservableCollection(function (e) { return _this._grabEntity(e); });\r\n            this._dataReadyMarker = new ReadyMarker(\"Activity Manager Data\", [\"GetActivityTypes\", \"GetWindowTypes\", \"GetActivities\", \"GetWindows\"].length);\r\n            this._descriptorsMarker = new ReadyMarker(\"Attached Activities Descriptors\", [\"GetDescriptors\"].length);\r\n            if (autoAnnounce) {\r\n                this._readyMarker = new ReadyMarker(\"Activity Manager Announce\", [\"Announcement\"].length);\r\n                this._dataReadyMarker.setCallback(function (dataErr) {\r\n                    if (dataErr) {\r\n                        _this._readyMarker.error(dataErr);\r\n                    }\r\n                    _this._descriptorsMarker.setCallback(function (err) {\r\n                        if (err) {\r\n                            _this._readyMarker.error(err);\r\n                        }\r\n                        _this._logger.debug(\"Auto announcing window\");\r\n                        _this.announceWindow()\r\n                            .then(function (w) {\r\n                            _this._announcedWindows.push(w);\r\n                            _this._readyMarker.signal(\"Successfully announced window with id '\" + w.id + \"'\");\r\n                        })\r\n                            .catch(function (errCatch) {\r\n                            _this._logger.debug(\"Will not announce window - \" + errCatch);\r\n                            _this._readyMarker.signal();\r\n                        });\r\n                    });\r\n                    _this.refreshDescriptors();\r\n                });\r\n            }\r\n            else {\r\n                this._readyMarker = this._dataReadyMarker;\r\n            }\r\n            this._bridge.onActivitiesAttached(function (e) {\r\n                _this._handleActivitiesAttached(e);\r\n            });\r\n            this._bridge.onActivitiesDetached(function (e) {\r\n                _this._handleActivitiesDetached(e);\r\n            });\r\n            this._bridge.onActivityAttachedDescriptorsRefreshed(function (e) {\r\n                _this._handleActivityDescriptorsRefreshed(e);\r\n            });\r\n            if (windows) {\r\n                windows.onWindowFrameColorChanged(this._handleWindowFrameColorChanged.bind(this));\r\n            }\r\n            this._bridge.init();\r\n            this._subscribeForData();\r\n            this._bridge\r\n                .initReady()\r\n                .then(function (aw) {\r\n                _this._getInitialData();\r\n            })\r\n                .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n        }\r\n        Object.defineProperty(ActivityManager.prototype, \"usingHc\", {\r\n            get: function () {\r\n                return this._bridge.bridgeType === \"HC\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityManager.prototype, \"announcedWindows\", {\r\n            get: function () {\r\n                return this._announcedWindows;\r\n            },\r\n            set: function (v) {\r\n                throw new Error(\"not allowed\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityManager.prototype.ready = function (callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                _this._readyMarker.setCallback(function (err) {\r\n                    if (!err) {\r\n                        resolve(_this);\r\n                    }\r\n                    else {\r\n                        reject(_this._readyMarker.getError());\r\n                    }\r\n                });\r\n            });\r\n            return nodeify(Promise.all([this._bridge.ready(), promise]).then(function () { return _this; }), callback);\r\n        };\r\n        ActivityManager.prototype.getActivityTypes = function () {\r\n            return this._activityTypes.get();\r\n        };\r\n        ActivityManager.prototype.getActivityType = function (name) {\r\n            return this._activityTypes.getByName(name);\r\n        };\r\n        ActivityManager.prototype.registerActivityType = function (activityTypeName, ownerWindowType, helperWindowTypes, config, description, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(activityTypeName)) {\r\n                    reject(\"activityTypeName argument can not be undefined\");\r\n                    return;\r\n                }\r\n                if (!isString(activityTypeName)) {\r\n                    reject(\"activityTypeName should be string\");\r\n                    return;\r\n                }\r\n                var actType = _this.getActivityType(activityTypeName);\r\n                if (!isUndefinedOrNull(actType)) {\r\n                    reject(\"Activity type '\" + activityTypeName + \"' already exists\");\r\n                    return;\r\n                }\r\n                var ownerDefinition;\r\n                if (isUndefined(ownerWindowType)) {\r\n                    reject(\"Owner window type can not be undefined\");\r\n                    return;\r\n                }\r\n                if (isString(ownerWindowType)) {\r\n                    ownerDefinition = { type: ownerWindowType, name: \"\", isIndependent: false, arguments: {} };\r\n                }\r\n                else {\r\n                    ownerDefinition = ownerWindowType;\r\n                }\r\n                var helperDefinitions = [];\r\n                if (!isUndefined(helperWindowTypes) && isArray(helperWindowTypes)) {\r\n                    for (var index in helperWindowTypes) {\r\n                        var item = helperWindowTypes[index];\r\n                        if (isString(item)) {\r\n                            var definition = {\r\n                                type: item,\r\n                                name: \"\",\r\n                                isIndependent: false,\r\n                                arguments: {},\r\n                                relativeTo: \"\",\r\n                                relativeDirection: \"\",\r\n                                windowStyleAttributes: {}\r\n                            };\r\n                            helperDefinitions.push(definition);\r\n                        }\r\n                        else {\r\n                            helperDefinitions.push(item);\r\n                        }\r\n                    }\r\n                }\r\n                _this._bridge\r\n                    .registerActivityType(activityTypeName, ownerDefinition, helperDefinitions, config, description)\r\n                    .then(function (activityType) {\r\n                    _this._grabEntity(activityType);\r\n                    resolve(activityType);\r\n                })\r\n                    .catch(function (error) {\r\n                    reject(error);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.unregisterActivityType = function (type, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var actType = _this.getActivityType(type);\r\n                if (isUndefined(actType)) {\r\n                    reject(\"Activity type '\" + type + \"' does not exists\");\r\n                    return;\r\n                }\r\n                _this._bridge.unregisterActivityType(type).then(function () { return resolve(actType); }, reject);\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.initiate = function (activityType, context, callback, configuration) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var actType = _this.getActivityType(activityType);\r\n                if (isUndefined(actType)) {\r\n                    reject(\"Activity type '\" + activityType + \"' does not exists\");\r\n                    return;\r\n                }\r\n                _this._bridge\r\n                    .initiateActivity(activityType, context, configuration)\r\n                    .then(function (actId) {\r\n                    _this._activities\r\n                        .getOrWait(actId)\r\n                        .then(function (act) {\r\n                        resolve(act);\r\n                    })\r\n                        .catch(function (err) { return reject(err); });\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.subscribeActivityTypeEvents = function (handler) {\r\n            this._activityTypes.subscribe(function (at, context) {\r\n                handler(at, context.type);\r\n            });\r\n        };\r\n        ActivityManager.prototype.getWindowTypes = function () {\r\n            return this._windowTypes.get();\r\n        };\r\n        ActivityManager.prototype.getWindowType = function (name) {\r\n            return this._windowTypes.getByName(name);\r\n        };\r\n        ActivityManager.prototype.registerWindowFactory = function (windowType, factoryMethod, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(windowType)) {\r\n                    reject(\"no windowType specified\");\r\n                    return;\r\n                }\r\n                if (isObject(windowType)) {\r\n                    windowType = windowType.getName();\r\n                }\r\n                else if (!isString(windowType)) {\r\n                    reject(\"windowType should be string or object that has getName method\");\r\n                    return;\r\n                }\r\n                _this._bridge\r\n                    .registerWindowFactory(windowType, factoryMethod)\r\n                    .then(function (v) {\r\n                    resolve(v);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.unregisterWindowFactory = function (windowType, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(windowType)) {\r\n                    reject(\"no windowType specified\");\r\n                    return;\r\n                }\r\n                if (!isString(windowType)) {\r\n                    reject(\"windowType should be a string\");\r\n                    return;\r\n                }\r\n                _this._bridge\r\n                    .unregisterWindowFactory(windowType)\r\n                    .then(function (v) {\r\n                    resolve(v);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.getActivities = function (activityType) {\r\n            var act = this._activities.get();\r\n            act = act.filter(function (a) { return a._ownerId; });\r\n            if (!activityType) {\r\n                return act;\r\n            }\r\n            var types = activityType;\r\n            if (isString(activityType)) {\r\n                types = [activityType];\r\n            }\r\n            else if (activityType instanceof ActivityType) {\r\n                types = [activityType.name];\r\n            }\r\n            else if (activityType instanceof Array) ;\r\n            else {\r\n                throw new Error(\"Invalid input argument 'activityType' = \" + activityType);\r\n            }\r\n            return act.filter(function (at) {\r\n                var type = at.type;\r\n                return some(types, function (t) {\r\n                    return type.id === t.id;\r\n                });\r\n            });\r\n        };\r\n        ActivityManager.prototype.getActivityById = function (id) {\r\n            return this._activities.getByName(id);\r\n        };\r\n        ActivityManager.prototype.announceWindow = function (activityWindowId, windowType) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var announcementInfo = _this._bridge.getAnnouncementInfo();\r\n                if (isUndefined(activityWindowId)) {\r\n                    activityWindowId = announcementInfo.activityWindowId;\r\n                }\r\n                if (isUndefined(windowType)) {\r\n                    windowType = announcementInfo.activityWindowType;\r\n                }\r\n                if (isUndefinedOrNull(windowType)) {\r\n                    throw new Error(\"Can not announce - unknown windowType\");\r\n                }\r\n                var activityId = announcementInfo && announcementInfo.activityId;\r\n                if (isUndefinedOrNull(activityWindowId)) {\r\n                    _this._logger.debug(\"Registering window with type:'\" + windowType + \"', name:'\" + announcementInfo.activityWindowName + \"', ind.:'\" + announcementInfo.activityWindowIndependent + \"'\");\r\n                    _this._bridge.registerWindow(windowType, announcementInfo.activityWindowName, announcementInfo.activityWindowIndependent)\r\n                        .then(_this._windows.getOrWait.bind(_this._windows))\r\n                        .then(function (w) {\r\n                        if (activityId) {\r\n                            return _this._activities.getOrWait(activityId).then(function (_) { return w; });\r\n                        }\r\n                        else {\r\n                            return w;\r\n                        }\r\n                    })\r\n                        .then(function (w) {\r\n                        resolve(w);\r\n                    })\r\n                        .catch(function (err) {\r\n                        _this._logger.error(err);\r\n                    });\r\n                }\r\n                else {\r\n                    _this._logger.debug(\"Announcing window with id '\" + activityWindowId + \"' and type '\" + windowType + \"'\");\r\n                    var currentWindow = _this._windows.getByName(activityWindowId);\r\n                    if (!isUndefinedOrNull(currentWindow)) {\r\n                        _this._logger.debug(\"Window with id '\" + activityWindowId + \"' already announced - reusing the window\");\r\n                        resolve(currentWindow);\r\n                        return;\r\n                    }\r\n                    var windowEventHandler_1 = function (a, w, e) {\r\n                        if (activityWindowId === w.id) {\r\n                            if (e === EntityEventType.ActivityWindowJoinedActivity) {\r\n                                var activity = w.activity;\r\n                                if (isUndefined(activity)) {\r\n                                    reject(\"UNDEFINED ACTIVITY\");\r\n                                }\r\n                                _this._logger.trace(\"Got joined event for id '\" + activityWindowId + \"'\");\r\n                                resolve(w);\r\n                                _this.unsubscribeWindowEvents(windowEventHandler_1);\r\n                            }\r\n                        }\r\n                    };\r\n                    _this.subscribeWindowEvents(windowEventHandler_1);\r\n                    _this._logger.trace(\"Waiting for joined event for id '\" + activityWindowId + \"'\");\r\n                    _this._bridge.announceWindow(windowType, activityWindowId);\r\n                }\r\n            });\r\n            return promise;\r\n        };\r\n        ActivityManager.prototype.subscribeWindowTypeEvents = function (handler) {\r\n            this._windowTypes.subscribe(function (wt, context) {\r\n                handler(wt, context.type);\r\n            });\r\n        };\r\n        ActivityManager.prototype.subscribeActivityEvents = function (handler) {\r\n            var _this = this;\r\n            return this._activities.subscribe(function (act, context) {\r\n                if (context.type === EntityEventType.StatusChange) {\r\n                    var p = context;\r\n                    handler(act, p.newStatus, p.oldStatus);\r\n                }\r\n                if (context.type === EntityEventType.Removed ||\r\n                    (context.type === EntityEventType.StatusChange &&\r\n                        context.newStatus.getState() === ActivityState.Destroyed)) {\r\n                    for (var _i = 0, _a = _this._windows.get(); _i < _a.length; _i++) {\r\n                        var window_1 = _a[_i];\r\n                        if (window_1.activity && window_1.activity.id === act.id) {\r\n                            _this._windows.process(new EntityEvent(window_1, new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)));\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        ActivityManager.prototype.subscribeWindowEvents = function (handler) {\r\n            var wrappingHandler = function (window, context) {\r\n                var eventType = context.type;\r\n                if (eventType === EntityEventType.Added) {\r\n                    eventType = \"opened\";\r\n                }\r\n                handler(window.activity, window, eventType);\r\n            };\r\n            this._windowHandlers.push([handler, wrappingHandler]);\r\n            return this._windows.subscribe(wrappingHandler);\r\n        };\r\n        ActivityManager.prototype.unsubscribeWindowEvents = function (handler) {\r\n            var found = this._windowHandlers.find(function (pair) { return pair[0] === handler; });\r\n            if (found) {\r\n                this._windowHandlers.splice(this._windowHandlers.indexOf(found), 1);\r\n                this._windows.unsubscribe(found[1]);\r\n            }\r\n        };\r\n        ActivityManager.prototype.createWindow = function (activity, windowTypeOrConfiguration, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(windowTypeOrConfiguration)) {\r\n                    reject(\"windowType is undefined\");\r\n                }\r\n                var windowDefinition;\r\n                if (isString(windowTypeOrConfiguration)) {\r\n                    windowDefinition = { type: windowTypeOrConfiguration, name: \"\", isIndependent: false, arguments: {} };\r\n                }\r\n                else if (windowTypeOrConfiguration instanceof WindowType) {\r\n                    windowDefinition = {\r\n                        type: windowTypeOrConfiguration.type || windowTypeOrConfiguration.id,\r\n                        name: windowTypeOrConfiguration.name || windowTypeOrConfiguration.type || windowTypeOrConfiguration.id,\r\n                        isIndependent: false\r\n                    };\r\n                }\r\n                else {\r\n                    var invalidKeys_1 = [\"url\"];\r\n                    var filteredWindowTypeOrConfiguration_1 = {};\r\n                    Object.keys(windowTypeOrConfiguration).forEach(function (key) {\r\n                        if (invalidKeys_1.indexOf(key) === -1) {\r\n                            filteredWindowTypeOrConfiguration_1[key] = windowTypeOrConfiguration[key];\r\n                        }\r\n                    });\r\n                    windowDefinition = filteredWindowTypeOrConfiguration_1;\r\n                }\r\n                var relativeToWindow;\r\n                if (!isUndefinedOrNull(windowDefinition.relativeTo)) {\r\n                    relativeToWindow = windowDefinition.relativeTo;\r\n                    if (typeof relativeToWindow === \"string\") {\r\n                        var windows = _this.getWindows({ type: relativeToWindow });\r\n                        if (!isUndefinedOrNull(windows) && windows.length > 0) {\r\n                            windowDefinition.relativeTo = windows[0].id;\r\n                        }\r\n                    }\r\n                    else if (!isUndefinedOrNull(relativeToWindow.type)) {\r\n                        var windows = _this.getWindows({ type: relativeToWindow.type });\r\n                        if (!isUndefinedOrNull(windows) && windows.length > 0) {\r\n                            windowDefinition.relativeTo = windows[0].id;\r\n                        }\r\n                    }\r\n                    else if (!isUndefinedOrNull(relativeToWindow.windowId)) {\r\n                        windowDefinition.relativeTo = relativeToWindow.windowId;\r\n                    }\r\n                }\r\n                _this._bridge.createWindow(activity && activity.id, windowDefinition)\r\n                    .then(function (wid) {\r\n                    _this._logger.debug(\"Window created, waiting for window entity with id \" + wid);\r\n                    var handler = function (window, context) {\r\n                        if (window.id === wid && (!activity || window.activity)) {\r\n                            _this._logger.debug(\"Got entity window with id \" + wid);\r\n                            resolve(window);\r\n                            _this._windows.unsubscribe(handler);\r\n                        }\r\n                    };\r\n                    _this._windows.subscribe(handler);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.createStackedWindows = function (activity, relativeWindowTypes, timeout, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(activity)) {\r\n                    reject(\"activity is undefined\");\r\n                }\r\n                if (isUndefinedOrNull(relativeWindowTypes)) {\r\n                    reject(\"relativeWindowTypes is undefined\");\r\n                }\r\n                if (!Array.isArray(relativeWindowTypes)) {\r\n                    reject(\"relativeWindowTypes has to be an array\");\r\n                }\r\n                if (isUndefinedOrNull(timeout)) {\r\n                    timeout = 20000;\r\n                }\r\n                var windowDefinitions = [];\r\n                relativeWindowTypes.forEach(function (element) {\r\n                    var windowDefinition;\r\n                    if (isString(element)) {\r\n                        windowDefinition = { type: element, name: \"\", isIndependent: false, arguments: {} };\r\n                    }\r\n                    else {\r\n                        windowDefinition = element;\r\n                    }\r\n                    windowDefinition.stackedWindow = true;\r\n                    windowDefinition.timeout = timeout;\r\n                    var relativeToWindow;\r\n                    if (!isUndefinedOrNull(windowDefinition.relativeTo)) {\r\n                        relativeToWindow = windowDefinition.relativeTo;\r\n                        if (!isUndefinedOrNull(relativeToWindow.type)) {\r\n                            windowDefinition.relativeTo = relativeToWindow.type;\r\n                        }\r\n                        else if (!isUndefinedOrNull(relativeToWindow.windowId)) {\r\n                            var windows = _this.getWindows({ id: relativeToWindow.windowId });\r\n                            if (!isUndefinedOrNull(windows) && windows.length > 0) {\r\n                                windowDefinition.relativeTo = windows[0].type.name;\r\n                            }\r\n                        }\r\n                    }\r\n                    windowDefinitions.push(windowDefinition);\r\n                });\r\n                var tasks = [];\r\n                windowDefinitions.forEach(function (wd) { return tasks.push(_this.createWindow(activity, wd)); });\r\n                Promise.all(tasks).then(resolve).catch(reject);\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.addWindowToActivity = function (activity, window, callback) {\r\n            var toReturn = this._bridge.joinActivity(activity.id, window.id)\r\n                .then(function () { return window; });\r\n            nodeify(toReturn, callback);\r\n            return toReturn;\r\n        };\r\n        ActivityManager.prototype.leaveWindowFromActivity = function (activity, window, callback) {\r\n            var toReturn = this._bridge.leaveActivity(activity.id, window.id)\r\n                .then(function () { return window; });\r\n            nodeify(toReturn, callback);\r\n            return toReturn;\r\n        };\r\n        ActivityManager.prototype.setActivityContext = function (activity, context, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(activity)) {\r\n                    reject(\"activity can not be null\");\r\n                }\r\n                _this._bridge\r\n                    .updateActivityContext(activity, context, true)\r\n                    .then(function (_) {\r\n                    resolve(activity);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.updateActivityContext = function (activity, context, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (isUndefinedOrNull(activity)) {\r\n                    reject(\"activity can not be null\");\r\n                }\r\n                var removedKeys = [];\r\n                for (var key in context) {\r\n                    if (context.hasOwnProperty(key) && context[key] === null) {\r\n                        removedKeys.push(key);\r\n                    }\r\n                }\r\n                for (var _i = 0, removedKeys_1 = removedKeys; _i < removedKeys_1.length; _i++) {\r\n                    var removedKey = removedKeys_1[_i];\r\n                    delete context[removedKey];\r\n                }\r\n                _this._bridge\r\n                    .updateActivityContext(activity, context, false, removedKeys)\r\n                    .then(function (_) {\r\n                    resolve(activity);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.subscribeActivityContextChanged = function (handler) {\r\n            this._activities.subscribe(function (act, context) {\r\n                if (context.type === EntityEventType.ActivityContextChange) {\r\n                    var updateContext = context;\r\n                    handler(act, updateContext.context, updateContext.updated, updateContext.removed);\r\n                }\r\n            });\r\n        };\r\n        ActivityManager.prototype.stopActivity = function (activity, callback) {\r\n            var promise = this._bridge.stopActivity(activity);\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.getWindows = function (filter) {\r\n            if (isUndefined(filter)) {\r\n                return this._windows.get();\r\n            }\r\n            if (!isUndefined(filter.id)) {\r\n                return [this._windows.getByName(filter.id)];\r\n            }\r\n            var allWindows = this._windows.get();\r\n            return allWindows.filter(function (w) {\r\n                if (!isUndefined(filter.type) && w.type.id !== filter.type) {\r\n                    return false;\r\n                }\r\n                if (!isUndefined(filter.name) && w.name !== filter.name) {\r\n                    return false;\r\n                }\r\n                if (!isUndefined(filter.activityId)) {\r\n                    if (isUndefinedOrNull(w.activity)) {\r\n                        return false;\r\n                    }\r\n                    if (w.activity.id !== filter.activityId) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        };\r\n        ActivityManager.prototype.getWindowBounds = function (id) {\r\n            return this._bridge.getWindowBounds(id);\r\n        };\r\n        ActivityManager.prototype.setWindowBounds = function (id, bounds, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                _this._bridge.setWindowBounds(id, bounds)\r\n                    .then(function () { return resolve(); })\r\n                    .catch(function (err) { return reject(err); });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.closeWindow = function (id) {\r\n            return this._bridge.closeWindow(id);\r\n        };\r\n        ActivityManager.prototype.activateWindow = function (id, focus) {\r\n            return this._bridge.activateWindow(id, focus);\r\n        };\r\n        ActivityManager.prototype.setWindowVisibility = function (id, visible) {\r\n            return this._bridge.setWindowVisibility(id, visible);\r\n        };\r\n        ActivityManager.prototype.clone = function (activity, cloneOptions, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                if (!activity) {\r\n                    reject(\"activity can not be null\");\r\n                }\r\n                _this._bridge.cloneActivity(activity.id, cloneOptions)\r\n                    .then(function (activityId) {\r\n                    _this._activities\r\n                        .getOrWait(activityId)\r\n                        .then(function (act) {\r\n                        resolve(act);\r\n                    })\r\n                        .catch(function (err) { return reject(err); });\r\n                })\r\n                    .catch(function (err) { return reject(err); });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.attachActivities = function (from, to, tag, callback) {\r\n            var _this = this;\r\n            tag = tag || {};\r\n            var promise = new Promise(function (resolve, reject) {\r\n                var fromActivity = _this._activities.getByName(from);\r\n                if (!fromActivity) {\r\n                    reject(\"can not find activity with id \" + from);\r\n                    return;\r\n                }\r\n                var toActivity = _this._activities.getByName(to);\r\n                if (!toActivity) {\r\n                    reject(\"can not find activity with id \" + to);\r\n                    return;\r\n                }\r\n                return _this._bridge.attachActivities(from, to, tag)\r\n                    .then(function (data) {\r\n                    var newActId = data.to;\r\n                    var state = data.descriptor;\r\n                    var allStates = data.descriptors;\r\n                    _this._activities.getOrWait(newActId).then(function (act) {\r\n                        act._updateDescriptors(allStates);\r\n                        var stateWrapped = act.attached.filter(function (u) { return u.ownerId === state.ownerId; })[0];\r\n                        resolve(stateWrapped);\r\n                    });\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.detachActivities = function (activityId, descriptor, callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                return _this._bridge.detachActivities(activityId, descriptor)\r\n                    .then(function () {\r\n                    var oldActId = undefined;\r\n                    var newActId = undefined;\r\n                    var descriptors = undefined;\r\n                    _this._activities\r\n                        .getOrWait(oldActId)\r\n                        .then(function (oldAct) {\r\n                        oldAct._updateDescriptors(descriptors);\r\n                        _this._activities\r\n                            .getOrWait(newActId)\r\n                            .then(function (newAct) {\r\n                            resolve(newAct);\r\n                        });\r\n                    })\r\n                        .catch(function (err) { return reject(err); });\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        ActivityManager.prototype.subscribeActivitiesAttached = function (callback) {\r\n            this._attachedCallbacks.push(callback);\r\n        };\r\n        ActivityManager.prototype.subscribeActivitiesDetached = function (callback) {\r\n            this._detachedCallbacks.push(callback);\r\n        };\r\n        ActivityManager.prototype.subscribeActivityFrameColorChanged = function (callback) {\r\n            this._frameColorChangesCallbacks.push(callback);\r\n        };\r\n        ActivityManager.prototype._grabEntity = function (entity) {\r\n            entity._manager = this;\r\n        };\r\n        ActivityManager.prototype._getInitialData = function () {\r\n            var _this = this;\r\n            this._logger.debug(\"Request initial data...\");\r\n            this._bridge.getActivityTypes()\r\n                .then(function (at) {\r\n                _this._activityTypes.add(at);\r\n                _this._dataReadyMarker.signal(\"Got act types\");\r\n            })\r\n                .catch(function (error) {\r\n                _this._logger.error(error);\r\n                _this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity types -\" + error);\r\n            });\r\n            this._bridge.getWindowTypes()\r\n                .then(function (wt) {\r\n                _this._windowTypes.add(wt);\r\n                _this._dataReadyMarker.signal(\"Got window types\");\r\n            })\r\n                .catch(function (error) {\r\n                _this._logger.error(error);\r\n                _this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting window types  \" + error);\r\n            });\r\n            this._bridge.getActivities()\r\n                .then(function (ac) {\r\n                _this._activities.add(ac);\r\n                _this._dataReadyMarker.signal(\"Got activities\");\r\n            })\r\n                .catch(function (error) {\r\n                _this._logger.error(error);\r\n                _this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity instances -\" + error);\r\n            });\r\n            this._bridge.getActivityWindows()\r\n                .then(function (aw) {\r\n                _this._windows.add(aw);\r\n                _this._dataReadyMarker.signal(\"Got windows\");\r\n            })\r\n                .catch(function (error) {\r\n                _this._logger.error(error);\r\n                _this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity windows -\" + error);\r\n            });\r\n        };\r\n        ActivityManager.prototype._subscribeForData = function () {\r\n            var _this = this;\r\n            this._logger.debug(\"Subscribe for data...\");\r\n            this._bridge.onActivityTypeStatusChange(function (event) {\r\n                _this._activityTypes.process(event);\r\n            });\r\n            this._bridge.onWindowTypeStatusChange(function (event) {\r\n                _this._windowTypes.process(event);\r\n            });\r\n            this._bridge.onActivityWindowChange(function (event) {\r\n                _this._windows.process(event);\r\n            });\r\n            this._bridge.onActivityStatusChange(function (event) {\r\n                _this._activities.process(event);\r\n            });\r\n        };\r\n        ActivityManager.prototype._handleActivitiesAttached = function (data) {\r\n            var _this = this;\r\n            var newActId = data.to;\r\n            var descriptor = data.descriptor;\r\n            var descriptors = data.descriptors;\r\n            this._activities.getOrWait(newActId).then(function (act) {\r\n                act._updateDescriptors(descriptors);\r\n                var descriptorAsObjectFromAPI = act.attached.filter(function (u) { return u.ownerId === descriptor.ownerId; })[0];\r\n                _this._attachedCallbacks.forEach(function (callback) {\r\n                    try {\r\n                        callback(act, descriptorAsObjectFromAPI);\r\n                    }\r\n                    catch (err) {\r\n                        return;\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ActivityManager.prototype._handleActivitiesDetached = function (data) {\r\n            var _this = this;\r\n            var oldActId = data.oldActivityId;\r\n            var newActId = data.newActivityId;\r\n            var descriptors = data.descriptors;\r\n            var descriptor = data.descriptor;\r\n            this._activities.getOrWait(oldActId).then(function (oldAct) {\r\n                oldAct._updateDescriptors(descriptors);\r\n                _this._activities.getOrWait(newActId).then(function (newAct) {\r\n                    _this._detachedCallbacks.forEach(function (callback) {\r\n                        try {\r\n                            callback(newAct, oldAct, descriptor);\r\n                        }\r\n                        catch (err) {\r\n                            return;\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        };\r\n        ActivityManager.prototype._handleActivityDescriptorsRefreshed = function (data) {\r\n            var id = data.id;\r\n            var descriptors = data.descriptors;\r\n            var act = this._activities.getByName(id);\r\n            if (act) {\r\n                act._updateDescriptors(descriptors);\r\n            }\r\n        };\r\n        ActivityManager.prototype.refreshDescriptors = function () {\r\n            var _this = this;\r\n            this._bridge.getAttachedDescriptors()\r\n                .then(function (map) {\r\n                if (map) {\r\n                    Object.keys(map).forEach(function (key) {\r\n                        var actId = key;\r\n                        var descriptors = map[key];\r\n                        var act = _this._activities.getByName(actId);\r\n                        if (act) {\r\n                            act._updateDescriptors(descriptors);\r\n                        }\r\n                    });\r\n                }\r\n                _this._descriptorsMarker.signal(\"Successfully got descriptors\");\r\n            })\r\n                .catch(function (err) {\r\n                _this._descriptorsMarker.error(\"failed to get descriptors - \" + err);\r\n            });\r\n        };\r\n        ActivityManager.prototype._handleWindowFrameColorChanged = function (win) {\r\n            if (!win.activityId) {\r\n                return;\r\n            }\r\n            var act = this._activities.getByName(win.activityId);\r\n            if (!act) {\r\n                return;\r\n            }\r\n            if (!act.owner) {\r\n                return;\r\n            }\r\n            if (act.owner.underlyingWindow.id !== win.id) {\r\n                return;\r\n            }\r\n            this._frameColorChangesCallbacks.forEach(function (callback) {\r\n                try {\r\n                    callback(act, win.frameColor);\r\n                }\r\n                catch (e) {\r\n                    return;\r\n                }\r\n            });\r\n        };\r\n        return ActivityManager;\r\n    }());\n\n    var ActivityManagementAPI = (function () {\r\n        function ActivityManagementAPI(manager, my) {\r\n            this._m = manager;\r\n            this._my = my;\r\n            this.activityTypes = {\r\n                get: this._getActivityTypesWrapper.bind(this),\r\n                register: this._m.registerActivityType.bind(this._m),\r\n                unregister: this._m.unregisterActivityType.bind(this._m),\r\n                subscribe: this._m.subscribeActivityTypeEvents.bind(this._m),\r\n                unsubscribe: undefined,\r\n                initiate: this._m.initiate.bind(this._m)\r\n            };\r\n            this.windowTypes = {\r\n                get: this._getWindowTypesWrapper.bind(this),\r\n                registerFactory: this._m.registerWindowFactory.bind(this._m),\r\n                unregisterFactory: this._m.unregisterWindowFactory.bind(this._m),\r\n                subscribe: this._m.subscribeWindowTypeEvents.bind(this._m),\r\n                unsubscribe: undefined\r\n            };\r\n            this.windows = {\r\n                get: this._m.getWindows.bind(this._m),\r\n                subscribe: this._m.subscribeWindowEvents.bind(this._m),\r\n                announce: this._m.announceWindow.bind(this._m),\r\n                unsubscribe: undefined,\r\n                create: this._m.createWindow.bind(this._m)\r\n            };\r\n            this.instances = {\r\n                get: this._m.getActivities.bind(this._m),\r\n                subscribe: this._m.subscribeActivityEvents.bind(this._m),\r\n                unsubscribe: undefined\r\n            };\r\n        }\r\n        ActivityManagementAPI.prototype.onAttached = function (callback) {\r\n            this._m.subscribeActivitiesAttached(callback);\r\n        };\r\n        ActivityManagementAPI.prototype.onDetached = function (callback) {\r\n            this._m.subscribeActivitiesDetached(callback);\r\n        };\r\n        ActivityManagementAPI.prototype.onActivityFrameColorChanged = function (callback) {\r\n            this._m.subscribeActivityFrameColorChanged(callback);\r\n        };\r\n        ActivityManagementAPI.prototype._getActivityTypesWrapper = function (name) {\r\n            if (isUndefined(name)) {\r\n                return this._m.getActivityTypes();\r\n            }\r\n            return this._m.getActivityType(name);\r\n        };\r\n        ActivityManagementAPI.prototype._getWindowTypesWrapper = function (name) {\r\n            if (isUndefined(name)) {\r\n                return this._m.getWindowTypes();\r\n            }\r\n            return this._m.getWindowType(name);\r\n        };\r\n        return ActivityManagementAPI;\r\n    }());\n\n    var ActivityAPI = (function () {\r\n        function ActivityAPI(manager, my) {\r\n            this._mgr = manager;\r\n            this._my = my;\r\n            this.all = new ActivityManagementAPI(manager, my);\r\n        }\r\n        ActivityAPI.prototype.ready = function (callback) {\r\n            var _this = this;\r\n            var promise = new Promise(function (resolve, reject) {\r\n                _this._mgr.ready()\r\n                    .then(function () {\r\n                    resolve(_this);\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            return nodeify(promise, callback);\r\n        };\r\n        Object.defineProperty(ActivityAPI.prototype, \"my\", {\r\n            get: function () {\r\n                return this._my;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityAPI.prototype, \"aware\", {\r\n            get: function () {\r\n                return this._my.window !== undefined;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityAPI.prototype, \"inActivity\", {\r\n            get: function () {\r\n                return this.aware && this._my.activity !== undefined;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityAPI.prototype, \"agm\", {\r\n            get: function () {\r\n                if (!this.aware) {\r\n                    return undefined;\r\n                }\r\n                if (!this.inActivity) {\r\n                    return new ActivityAGM(null);\r\n                }\r\n                return this._my.activity.agm;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityAPI.prototype.getAvailableFrameColors = function () {\r\n            return [];\r\n        };\r\n        return ActivityAPI;\r\n    }());\n\n    var ActivityModule = (function () {\r\n        function ActivityModule(config) {\r\n            var _this = this;\r\n            if (!config) {\r\n                throw new Error(\"config can not be null\");\r\n            }\r\n            if (!isUndefined(config.logLevel)) {\r\n                Logger$1.Level = config.logLevel;\r\n            }\r\n            if (!isUndefinedOrNull(config.logger)) {\r\n                Logger$1.GlueLogger = config.logger;\r\n            }\r\n            var bridge;\r\n            this._isUsingHCImplementation = config.gdMajorVersion === 2;\r\n            this._isUsingGW3Implementation = ActivityModule.checkIsUsingGW3Implementation(config.connection);\r\n            if (this._isUsingHCImplementation) {\r\n                throw new Error(\"GD2 not supported\");\r\n            }\r\n            else if (this._isUsingGW3Implementation) {\r\n                bridge = new GW3Bridge$1(config);\r\n            }\r\n            else {\r\n                throw new Error(\"Unable to instantiate activity bridge implementation\");\r\n            }\r\n            if (!bridge) {\r\n                throw new Error(\"A bridge to native activity is needed to create activity lib.\");\r\n            }\r\n            ActivityAGM.AGM = config.agm;\r\n            var activityManager = new ActivityManager(bridge, !config.disableAutoAnnounce, config.windows);\r\n            var my = new ActivityMy(activityManager, config.windows);\r\n            this._api = new ActivityAPI(activityManager, my);\r\n            this._readyPromise = activityManager.ready().then(function (_) { return _this; });\r\n        }\r\n        ActivityModule.checkIsUsingGW3Implementation = function (connection) {\r\n            return connection.protocolVersion === 3;\r\n        };\r\n        Object.defineProperty(ActivityModule.prototype, \"api\", {\r\n            get: function () {\r\n                return this._api;\r\n            },\r\n            set: function (value) {\r\n                this._api = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityModule.prototype, \"isUsingHCImplementation\", {\r\n            get: function () {\r\n                return this._isUsingHCImplementation;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ActivityModule.prototype, \"isUsingGW3Implementation\", {\r\n            get: function () {\r\n                return this._isUsingGW3Implementation;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ActivityModule.prototype.ready = function (callback) {\r\n            return nodeify(this._readyPromise, callback);\r\n        };\r\n        return ActivityModule;\r\n    }());\n\n    var ShutdownMethodName = \"T42.ACS.Shutdown\";\r\n    var OnGDShutdownMethodName = \"T42.ACS.OnGDShutdown\";\r\n    var RestartMethodName = \"T42.ACS.Restart\";\r\n    var GetConfigurationRegionMethodName = \"T42.ACS.GetConfigurationRegion\";\r\n    var SetConfigurationRegionMethodName = \"T42.ACS.SetConfigurationRegion\";\r\n    var GetUserMethodName = \"T42.ACS.GetUser\";\r\n    var GetBranchesMethodName = \"T42.ACS.GetBranches\";\r\n    var GetCurrentBranchMethodName = \"T42.ACS.GetCurrentBranch\";\r\n    var SetCurrentBranchMethodName = \"T42.ACS.SetCurrentBranch\";\r\n    var GetFunctionalEntitlementMethodName = \"T42.ACS.GetFunctionalEntitlement\";\r\n    var CanIMethodName = \"T42.ACS.CanI\";\r\n    var StartApplicationMethodName = \"T42.ACS.StartApplication\";\r\n    var StopApplicationMethodName = \"T42.ACS.StopApplication\";\r\n    var ActivateApplicationMethodName = \"T42.ACS.ActivateApplication\";\r\n    var OnEventMethodName = \"T42.ACS.OnEvent\";\r\n    var GetApplicationsMethodName = \"T42.ACS.GetApplications\";\n\n    function createRegistry$1(options) {\r\n        if (options && options.errorHandling\r\n            && typeof options.errorHandling !== \"function\"\r\n            && options.errorHandling !== \"log\"\r\n            && options.errorHandling !== \"silent\"\r\n            && options.errorHandling !== \"throw\") {\r\n            throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\r\n        }\r\n        var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\r\n        var callbacks = {};\r\n        function add(key, callback, replayArgumentsArr) {\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey) {\r\n                callbacksForKey = [];\r\n                callbacks[key] = callbacksForKey;\r\n            }\r\n            callbacksForKey.push(callback);\r\n            if (replayArgumentsArr) {\r\n                setTimeout(function () {\r\n                    replayArgumentsArr.forEach(function (replayArgument) {\r\n                        var _a;\r\n                        if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\r\n                            try {\r\n                                if (Array.isArray(replayArgument)) {\r\n                                    callback.apply(undefined, replayArgument);\r\n                                }\r\n                                else {\r\n                                    callback.apply(undefined, [replayArgument]);\r\n                                }\r\n                            }\r\n                            catch (err) {\r\n                                _handleError(err, key);\r\n                            }\r\n                        }\r\n                    });\r\n                }, 0);\r\n            }\r\n            return function () {\r\n                var allForKey = callbacks[key];\r\n                if (!allForKey) {\r\n                    return;\r\n                }\r\n                allForKey = allForKey.reduce(function (acc, element, index) {\r\n                    if (!(element === callback && acc.length === index)) {\r\n                        acc.push(element);\r\n                    }\r\n                    return acc;\r\n                }, []);\r\n                if (allForKey.length === 0) {\r\n                    delete callbacks[key];\r\n                }\r\n                else {\r\n                    callbacks[key] = allForKey;\r\n                }\r\n            };\r\n        }\r\n        function execute(key) {\r\n            var argumentsArr = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                argumentsArr[_i - 1] = arguments[_i];\r\n            }\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey || callbacksForKey.length === 0) {\r\n                return [];\r\n            }\r\n            var results = [];\r\n            callbacksForKey.forEach(function (callback) {\r\n                try {\r\n                    var result = callback.apply(undefined, argumentsArr);\r\n                    results.push(result);\r\n                }\r\n                catch (err) {\r\n                    results.push(undefined);\r\n                    _handleError(err, key);\r\n                }\r\n            });\r\n            return results;\r\n        }\r\n        function _handleError(exceptionArtifact, key) {\r\n            var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\r\n            if (_userErrorHandler) {\r\n                _userErrorHandler(errParam);\r\n                return;\r\n            }\r\n            var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\r\n            if (options) {\r\n                switch (options.errorHandling) {\r\n                    case \"log\":\r\n                        return console.error(msg);\r\n                    case \"silent\":\r\n                        return;\r\n                    case \"throw\":\r\n                        throw new Error(msg);\r\n                }\r\n            }\r\n            console.error(msg);\r\n        }\r\n        function clear() {\r\n            callbacks = {};\r\n        }\r\n        function clearKey(key) {\r\n            var callbacksForKey = callbacks[key];\r\n            if (!callbacksForKey) {\r\n                return;\r\n            }\r\n            delete callbacks[key];\r\n        }\r\n        return {\r\n            add: add,\r\n            execute: execute,\r\n            clear: clear,\r\n            clearKey: clearKey\r\n        };\r\n    }\r\n    createRegistry$1.default = createRegistry$1;\r\n    var lib$2 = createRegistry$1;\n\n    function objectValues(source) {\r\n        if (!source) {\r\n            return [];\r\n        }\r\n        return Object.keys(source).map(function (key) { return source[key]; });\r\n    }\r\n    function objectClone(obj) {\r\n        var result;\r\n        try {\r\n            result = JSON.parse(JSON.stringify(obj || {}));\r\n        }\r\n        catch (error) {\r\n            result = {};\r\n        }\r\n        return result;\r\n    }\n\n    var ApplicationImpl = (function () {\r\n        function ApplicationImpl(_appManager, _name, _agm) {\r\n            var _this = this;\r\n            this._appManager = _appManager;\r\n            this._name = _name;\r\n            this._agm = _agm;\r\n            this._registry = lib$2();\r\n            _appManager.onInstanceStarted(function (instance) {\r\n                if (instance.application && instance.application.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"instanceStarted\", instance);\r\n            });\r\n            _appManager.onInstanceStopped(function (instance) {\r\n                if (instance.application && instance.application.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"instanceStopped\", instance);\r\n            });\r\n            _appManager.onAppRemoved(function (app) {\r\n                if (app.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"appRemoved\", app);\r\n            });\r\n            _appManager.onAppChanged(function (app) {\r\n                if (app.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"appChanged\", app);\r\n            });\r\n            _appManager.onAppAvailable(function (app) {\r\n                if (app.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"appAvailable\", app);\r\n            });\r\n            _appManager.onAppUnavailable(function (app) {\r\n                if (app.name !== _this._name) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"appUnavailable\", app);\r\n            });\r\n        }\r\n        Object.defineProperty(ApplicationImpl.prototype, \"name\", {\r\n            get: function () { return this._name; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"title\", {\r\n            get: function () { return this._props.Title; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"version\", {\r\n            get: function () { return this._props.Version; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"autoStart\", {\r\n            get: function () { return this._props.AutoStart; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"isShell\", {\r\n            get: function () { return this._props.IsShell; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"caption\", {\r\n            get: function () { return this._props.Caption; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"hidden\", {\r\n            get: function () { return this._props.IsHidden; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"container\", {\r\n            get: function () { return this._props.ApplicationName; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"activityType\", {\r\n            get: function () { return this._props.ActivityType; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"activityWindowType\", {\r\n            get: function () { return this._props.ActivityWindowType; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"windowSettings\", {\r\n            get: function () {\r\n                if (!this._props.Arguments) {\r\n                    return {};\r\n                }\r\n                return objectClone(this._props.Arguments);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"allowMultiple\", {\r\n            get: function () { return this._props.AllowMultiple; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"available\", {\r\n            get: function () { return this._props.IsReady || true; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"icon\", {\r\n            get: function () { return this._props.Icon; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"iconURL\", {\r\n            get: function () { return this._props.IconUrl; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"sortOrder\", {\r\n            get: function () { return this._props.SortOrder; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"userProperties\", {\r\n            get: function () {\r\n                if (!this._props.UserProperties) {\r\n                    return {};\r\n                }\r\n                return objectClone(this._props.UserProperties);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"isActivity\", {\r\n            get: function () {\r\n                return this._props.ActivityType !== undefined && this._props.ActivityType !== \"\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"configuration\", {\r\n            get: function () {\r\n                return {\r\n                    autoStart: this._props.AutoStart,\r\n                    caption: this._props.Caption,\r\n                    hidden: this._props.IsHidden,\r\n                    container: this._props.ApplicationName,\r\n                    activityType: this._props.ActivityType,\r\n                    allowMultiple: this._props.AllowMultiple\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"instances\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return this._appManager.instances().filter(function (instance) { return instance.application.name === _this._name; });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"type\", {\r\n            get: function () {\r\n                return this._props.Type;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ApplicationImpl.prototype, \"mode\", {\r\n            get: function () {\r\n                if (!this._props) {\r\n                    return \"unknown\";\r\n                }\r\n                if (this._props.Mode && typeof this._props.Mode === \"string\") {\r\n                    return this._props.Mode.toLowerCase();\r\n                }\r\n                if (this.isActivity) {\r\n                    return \"unknown\";\r\n                }\r\n                if (this._props.Arguments && this._props.Arguments.mode && typeof this._props.Arguments.mode === \"string\") {\r\n                    return this._props.Arguments.mode.toLowerCase();\r\n                }\r\n                var styleAttributes = this._props.WindowStyleAttributes;\r\n                if (styleAttributes) {\r\n                    styleAttributes = styleAttributes.split(\" \").join(\"\");\r\n                    var searchFor = \"mode:\\\"\";\r\n                    var modeIndex = styleAttributes.indexOf(searchFor);\r\n                    if (modeIndex !== -1) {\r\n                        var startModeIndex = modeIndex + searchFor.length;\r\n                        var stopModeIndex = styleAttributes.indexOf(\"\\\"\", startModeIndex);\r\n                        var style = styleAttributes.substr(startModeIndex, stopModeIndex - startModeIndex);\r\n                        if (style && typeof style === \"string\") {\r\n                            return style.toLowerCase();\r\n                        }\r\n                    }\r\n                }\r\n                return \"flat\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ApplicationImpl.prototype.updateFromProps = function (props) {\r\n            var _this = this;\r\n            if (!this._props) {\r\n                this._props = { Name: props.Name };\r\n            }\r\n            Object.keys(props).forEach(function (key) {\r\n                _this._props[key] = props[key];\r\n            });\r\n        };\r\n        ApplicationImpl.prototype.start = function (context, options) {\r\n            var _this = this;\r\n            var name = this._name;\r\n            var startTimeout = 10000;\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                context = context || {};\r\n                var waitForAGMInstance = true;\r\n                var waitForApplicationInstance = function (id) {\r\n                    var check = function () {\r\n                        var filtered = _this._appManager.instances().filter(function (i) { return i.id === id; });\r\n                        var result;\r\n                        if (filtered.length === 2) {\r\n                            result = filtered[0].isActivityInstance ? filtered[0] : filtered[1];\r\n                        }\r\n                        else {\r\n                            result = filtered[0];\r\n                        }\r\n                        if (result && waitForAGMInstance) {\r\n                            if (result.agm) {\r\n                                return result;\r\n                            }\r\n                            else {\r\n                                return undefined;\r\n                            }\r\n                        }\r\n                        return result;\r\n                    };\r\n                    var unsub;\r\n                    var timeout = setTimeout(function () {\r\n                        if (unsub) {\r\n                            unsub();\r\n                        }\r\n                        reject(\"timeout\");\r\n                    }, startTimeout);\r\n                    var waitFunc = function (i) {\r\n                        if (i.id !== id) {\r\n                            return;\r\n                        }\r\n                        if (unsub) {\r\n                            unsub();\r\n                            unsub = undefined;\r\n                        }\r\n                        clearTimeout(timeout);\r\n                        setTimeout(function () {\r\n                            resolve(check());\r\n                        }, 1);\r\n                    };\r\n                    {\r\n                        unsub = _this._appManager.onInstanceAgmServerReady(waitFunc);\r\n                    }\r\n                    var instances = check();\r\n                    if (instances) {\r\n                        if (unsub) {\r\n                            unsub();\r\n                            unsub = undefined;\r\n                        }\r\n                        clearTimeout(timeout);\r\n                        resolve(instances);\r\n                    }\r\n                };\r\n                _this._agm.invoke(StartApplicationMethodName, {\r\n                    Name: name,\r\n                    Context: context,\r\n                    Options: options\r\n                }, \"best\", {\r\n                    methodResponseTimeoutMs: startTimeout\r\n                }, function (result) {\r\n                    var acsResult = result.returned && result.returned.Instance_0\r\n                        ? result.returned.Instance_0\r\n                        : result.returned;\r\n                    if (acsResult && acsResult.Id) {\r\n                        if (_this._appManager.mode === \"startOnly\") {\r\n                            var instance = _this._appManager.handleInstanceStarted(acsResult);\r\n                            resolve(instance);\r\n                        }\r\n                        else {\r\n                            waitForApplicationInstance(acsResult.Id);\r\n                        }\r\n                    }\r\n                    else {\r\n                        resolve(undefined);\r\n                    }\r\n                }, function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n        };\r\n        ApplicationImpl.prototype.onInstanceStarted = function (callback) {\r\n            this._registry.add(\"instanceStarted\", callback);\r\n        };\r\n        ApplicationImpl.prototype.onInstanceStopped = function (callback) {\r\n            this._registry.add(\"instanceStopped\", callback);\r\n        };\r\n        ApplicationImpl.prototype.onAvailable = function (callback) {\r\n            this._registry.add(\"appAvailable\", callback);\r\n        };\r\n        ApplicationImpl.prototype.onUnavailable = function (callback) {\r\n            this._registry.add(\"appUnavailable\", callback);\r\n        };\r\n        ApplicationImpl.prototype.onChanged = function (callback) {\r\n            this._registry.add(\"appChanged\", callback);\r\n        };\r\n        ApplicationImpl.prototype.onRemoved = function (callback) {\r\n            this._registry.add(\"appRemoved\", callback);\r\n        };\r\n        return ApplicationImpl;\r\n    }());\n\n    var InstanceImpl = (function () {\r\n        function InstanceImpl(_id, _appName, _appManager, _agm, _activities, _windows, startFailed) {\r\n            var _this = this;\r\n            this._id = _id;\r\n            this._appName = _appName;\r\n            this._appManager = _appManager;\r\n            this._agm = _agm;\r\n            this._activities = _activities;\r\n            this._windows = _windows;\r\n            this.onAgmReady = this._addToRegistry(\"agmReady\");\r\n            this.onStopped = this._addToRegistry(\"stopped\");\r\n            this._registry = lib$2();\r\n            if (startFailed) {\r\n                return;\r\n            }\r\n            this._unsubscribeInstanceStopped = this._appManager.onInstanceStopped(function (instance) {\r\n                if (instance.id !== _this._id) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"stopped\", instance);\r\n            });\r\n            this._unsubscribeInstanceAgmServerReady = this._appManager.onInstanceAgmServerReady(function (instance) {\r\n                if (instance.id !== _this._id) {\r\n                    return;\r\n                }\r\n                _this._registry.execute(\"agmReady\", instance);\r\n            });\r\n        }\r\n        Object.defineProperty(InstanceImpl.prototype, \"id\", {\r\n            get: function () { return this._id; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"application\", {\r\n            get: function () { return this._appManager.application(this._appName); },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"activity\", {\r\n            get: function () {\r\n                var _this = this;\r\n                if (!this._activities) {\r\n                    throw new Error(\"This method requires glue.activities library to be enabled.\");\r\n                }\r\n                return this._activities.all.instances.get()\r\n                    .filter(function (activityInstance) { return activityInstance.id === _this._activityId; })[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"isActivityOwner\", {\r\n            get: function () { return this._isActivityOwner; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"activityInstances\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return this._appManager.instances().filter(function (i) {\r\n                    return i.application.type !== \"activity\" &&\r\n                        i.activityId &&\r\n                        i.activityId === _this._activityId;\r\n                });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"activityOwnerInstance\", {\r\n            get: function () {\r\n                if (!this._activityId) {\r\n                    return undefined;\r\n                }\r\n                return this.activityInstances.filter(function (inst) { var _a; return (_a = inst) === null || _a === void 0 ? void 0 : _a.isActivityOwner; })[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"window\", {\r\n            get: function () {\r\n                var _this = this;\r\n                if (!this._windows) {\r\n                    throw new Error(\"This method requires glue.windows library to be enabled.\");\r\n                }\r\n                var win = this._windows.list().filter(function (w) { return w.id === _this._id; })[0];\r\n                if (!win && this.activity && this.activityOwnerInstance) {\r\n                    win = this.activityOwnerInstance.window;\r\n                }\r\n                return win;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"context\", {\r\n            get: function () {\r\n                var _a, _b, _c;\r\n                return _c = (_a = this._startUpContext, (_a !== null && _a !== void 0 ? _a : (_b = this.window) === null || _b === void 0 ? void 0 : _b.context)), (_c !== null && _c !== void 0 ? _c : {});\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"title\", {\r\n            get: function () { return this._title; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"isActivityInstance\", {\r\n            get: function () { return this._isActivityInstance; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"activityId\", {\r\n            get: function () { return this._activityId; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"inActivity\", {\r\n            get: function () { return this._inActivity; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"isSingleWindowApp\", {\r\n            get: function () { return !this._inActivity; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InstanceImpl.prototype, \"agm\", {\r\n            get: function () {\r\n                return this._agmInstance;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InstanceImpl.prototype.updateFromProps = function (props) {\r\n            this._startUpContext = props.Context;\r\n            this._title = props.Title;\r\n            this._isActivityInstance = false;\r\n            if (props.ActivityId && props.ActivityId !== \"\") {\r\n                this._activityId = props.ActivityId;\r\n                this._isActivityInstance = true;\r\n            }\r\n            this._isActivityOwner = props.IsActivityOwner;\r\n            if (!this._activityId && this._startUpContext && this._startUpContext.activityId) {\r\n                this._activityId = this._startUpContext.activityId;\r\n            }\r\n            this._inActivity = Boolean(this._activityId);\r\n            this.updateAgmInstanceFromProps(props);\r\n        };\r\n        InstanceImpl.prototype.updateAgmInstanceFromProps = function (props) {\r\n            if (!props.AgmServers) {\r\n                return;\r\n            }\r\n            if (props.GD3) {\r\n                var agmInstances = props.AgmServers;\r\n                if (agmInstances) {\r\n                    this._agmInstance = agmInstances[0];\r\n                }\r\n            }\r\n            else {\r\n                var gdAgmServers = props.AgmServers;\r\n                var propsAgmServer = Object.keys(gdAgmServers)[0];\r\n                if (!propsAgmServer) {\r\n                    return;\r\n                }\r\n                var propsAgm = gdAgmServers[propsAgmServer];\r\n                this._agmInstance = {\r\n                    machine: propsAgm.machineName,\r\n                    user: propsAgm.userName,\r\n                    environment: propsAgm.environment,\r\n                    application: propsAgm.applicationName,\r\n                };\r\n            }\r\n        };\r\n        InstanceImpl.prototype.stop = function () {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var unsubscribe = _this._appManager.onInstanceStopped(function (instance) {\r\n                    if (instance.id === _this._id) {\r\n                        unsubscribe();\r\n                        resolve();\r\n                    }\r\n                });\r\n                _this._agm.invoke(StopApplicationMethodName, {\r\n                    Name: _this._appName,\r\n                    Id: _this._id\r\n                })\r\n                    .then(function () {\r\n                    if (_this._appManager.mode === \"startOnly\") {\r\n                        _this._appManager.handleInstanceStopped({\r\n                            Name: _this._appName,\r\n                            Id: _this.id,\r\n                            Context: undefined,\r\n                            Title: undefined,\r\n                            ActivityId: undefined,\r\n                            IsActivityOwner: undefined,\r\n                            AgmServers: undefined\r\n                        });\r\n                        resolve();\r\n                    }\r\n                })\r\n                    .catch(function (err) { return reject(err); });\r\n            });\r\n        };\r\n        InstanceImpl.prototype.activate = function () {\r\n            return this._agm.invoke(ActivateApplicationMethodName, { Name: this._appName, Id: this._id });\r\n        };\r\n        InstanceImpl.prototype.done = function () {\r\n            this._registry.clear();\r\n            this._unsubscribeInstanceAgmServerReady();\r\n            this._unsubscribeInstanceStopped();\r\n        };\r\n        InstanceImpl.prototype.getContext = function () {\r\n            return Promise.resolve(this.context);\r\n        };\r\n        InstanceImpl.prototype._addToRegistry = function (key) {\r\n            var _this = this;\r\n            return function (callback) {\r\n                _this._registry.add(key, callback);\r\n            };\r\n        };\r\n        return InstanceImpl;\r\n    }());\n\n    var AppManagerImpl = (function () {\r\n        function AppManagerImpl(mode, _agm, _activities, _windows, _logger, _gdMajorVersion) {\r\n            var _this = this;\r\n            this.mode = mode;\r\n            this._agm = _agm;\r\n            this._activities = _activities;\r\n            this._windows = _windows;\r\n            this._logger = _logger;\r\n            this._gdMajorVersion = _gdMajorVersion;\r\n            this._apps = {};\r\n            this._instances = [];\r\n            this._registry = lib$2();\r\n            this.application = function (name) {\r\n                return _this._apps[name];\r\n            };\r\n            this.applications = function () {\r\n                return Object.keys(_this._apps).map(function (k) { return _this._apps[k]; });\r\n            };\r\n            this.instances = function () {\r\n                return _this._instances;\r\n            };\r\n            this.getMyInstance = function () {\r\n                if (_this._gdMajorVersion >= 3) {\r\n                    var instanceId_1 = window.glue42gd.appInstanceId;\r\n                    return _this._instances.filter(function (i) { return i.id === instanceId_1; })[0];\r\n                }\r\n                return undefined;\r\n            };\r\n            this.handleAppAdded = function (props) {\r\n                var id = _this._getAppId(props);\r\n                _this._logger.trace(\"adding app \" + id);\r\n                _this._apps[id] = new ApplicationImpl(_this, id, _this._agm);\r\n                var app = _this._updateAppFromProps(props);\r\n                _this._registry.execute(\"appAdded\", app);\r\n            };\r\n            this.handleAppUpdated = function (props) {\r\n                var app = _this._updateAppFromProps(props);\r\n                _this._registry.execute(\"appChanged\", app);\r\n            };\r\n            this.handleAppRemoved = function (props) {\r\n                var id = _this._getAppId(props);\r\n                _this._logger.trace(\"removing app \" + id);\r\n                var app = _this.application(id);\r\n                _this._instances = _this._instances.filter(function (i) { return i.application.name !== app.name; });\r\n                delete _this._apps[id];\r\n                _this._registry.execute(\"appRemoved\", app);\r\n            };\r\n            this.handleAppReady = function (props) {\r\n                var id = _this._getAppId(props);\r\n                var app = _this._getAppOrThrow(id);\r\n                app.updateFromProps(props);\r\n                if (app.available) {\r\n                    _this._registry.execute(\"appAvailable\", app);\r\n                }\r\n                else {\r\n                    _this._registry.execute(\"appUnavailable\", app);\r\n                }\r\n            };\r\n            this.handleInstanceStarted = function (props) {\r\n                _this._logger.trace(\"started app \" + props.Name + \" \" + props.Id);\r\n                var id = _this._getInstanceId(props);\r\n                var appName = _this._getInstanceAppName(props);\r\n                var instance = new InstanceImpl(id, appName, _this, _this._agm, _this._activities, _this._windows);\r\n                _this._updateInstanceFromProps(instance, props);\r\n                _this._instances.push(instance);\r\n                _this._registry.execute(\"instanceStarted\", instance);\r\n                return instance;\r\n            };\r\n            this.handleInstanceStopped = function (props) {\r\n                _this._logger.trace(\"failed to start app \" + props.Name + \" \" + props.Id);\r\n                var id = _this._getInstanceId(props);\r\n                var appName = _this._getInstanceAppName(props);\r\n                var instance = _this._getInstanceOrThrow(id, appName);\r\n                _this._instances = _this._instances.filter(function (i) { return !_this._matchInstance(i, id, appName); });\r\n                _this._registry.execute(\"instanceStopped\", instance);\r\n                instance.done();\r\n            };\r\n            this.handleInstanceAgmServerReady = function (props) {\r\n                var id = _this._getInstanceId(props);\r\n                var appName = _this._getInstanceAppName(props);\r\n                var instance = _this._getInstanceOrThrow(id, appName);\r\n                instance.updateAgmInstanceFromProps(props);\r\n                _this._registry.execute(\"instanceAgmServerReady\", instance);\r\n            };\r\n            this.handleInstanceStartFailed = function (props) {\r\n                var id = _this._getInstanceId(props);\r\n                var appName = _this._getInstanceAppName(props);\r\n                var startFailed = true;\r\n                var instance = new InstanceImpl(id, appName, undefined, undefined, undefined, undefined, startFailed);\r\n                _this._updateInstanceFromProps(instance, props);\r\n                _this._registry.execute(\"instanceStartFailed\", instance);\r\n            };\r\n            this.handleInstanceUpdated = function (props) {\r\n                var id = _this._getInstanceId(props);\r\n                var app = _this._getInstanceAppName(props);\r\n                var instance = _this._getInstanceOrThrow(id, app);\r\n                _this._updateInstanceFromProps(instance, props);\r\n            };\r\n            this.onInstanceStarted = function (callback) {\r\n                return _this._registry.add(\"instanceStarted\", callback, _this._instances);\r\n            };\r\n            this.onInstanceStartFailed = function (callback) {\r\n                return _this._registry.add(\"instanceStartFailed\", callback);\r\n            };\r\n            this.onInstanceStopped = function (callback) {\r\n                return _this._registry.add(\"instanceStopped\", callback);\r\n            };\r\n            this.onInstanceUpdated = function (callback) {\r\n                return _this._registry.add(\"instanceChanged\", callback);\r\n            };\r\n            this.onInstanceAgmServerReady = function (callback) {\r\n                return _this._registry.add(\"instanceAgmServerReady\", callback);\r\n            };\r\n            this.onAppAdded = function (callback) {\r\n                return _this._registry.add(\"appAdded\", callback, Object.values(_this._apps));\r\n            };\r\n            this.onAppRemoved = function (callback) {\r\n                return _this._registry.add(\"appRemoved\", callback);\r\n            };\r\n            this.onAppAvailable = function (callback) {\r\n                return _this._registry.add(\"appAvailable\", callback);\r\n            };\r\n            this.onAppUnavailable = function (callback) {\r\n                return _this._registry.add(\"appUnavailable\", callback);\r\n            };\r\n            this.onAppChanged = function (callback) {\r\n                return _this._registry.add(\"appChanged\", callback);\r\n            };\r\n        }\r\n        AppManagerImpl.prototype._getAppOrThrow = function (id) {\r\n            var result = this.application(id);\r\n            if (!result) {\r\n                throw Error(\"app with id \" + id + \" not found\");\r\n            }\r\n            return result;\r\n        };\r\n        AppManagerImpl.prototype._getAppId = function (props) {\r\n            return props.Name;\r\n        };\r\n        AppManagerImpl.prototype._matchInstance = function (instance, id, appName) {\r\n            return instance.id === id && instance.application.name === appName;\r\n        };\r\n        AppManagerImpl.prototype._getInstanceByIdAndName = function (id, appName) {\r\n            var _this = this;\r\n            return this._instances.filter(function (i) { return _this._matchInstance(i, id, appName); })[0];\r\n        };\r\n        AppManagerImpl.prototype._getInstanceOrThrow = function (id, appName) {\r\n            var result = this._getInstanceByIdAndName(id, appName);\r\n            if (!result) {\r\n                throw Error(\"instance with id \" + id + \" not found\");\r\n            }\r\n            return result;\r\n        };\r\n        AppManagerImpl.prototype._getInstanceId = function (props) {\r\n            return props.Id;\r\n        };\r\n        AppManagerImpl.prototype._getInstanceAppName = function (props) {\r\n            return props.Name;\r\n        };\r\n        AppManagerImpl.prototype._updateAppFromProps = function (props) {\r\n            var id = this._getAppId(props);\r\n            this._logger.trace(\"updating app with  + \" + id + \", \" + props);\r\n            var app = this._getAppOrThrow(id);\r\n            app.updateFromProps(props);\r\n            return app;\r\n        };\r\n        AppManagerImpl.prototype._updateInstanceFromProps = function (instance, props) {\r\n            this._logger.trace(\"updating instance with \" + this._getInstanceId(props) + \" for app \" + this._getInstanceAppName(props));\r\n            instance.updateFromProps(props);\r\n        };\r\n        return AppManagerImpl;\r\n    }());\n\n    function promisify$2(promise, successCallback, errorCallback) {\r\n        var isFunction = function (arg) {\r\n            return !!(arg && arg.constructor && arg.call && arg.apply);\r\n        };\r\n        if (!isFunction(successCallback) && !isFunction(errorCallback)) {\r\n            return promise;\r\n        }\r\n        if (!isFunction(successCallback)) {\r\n            successCallback = function () {\r\n            };\r\n        }\r\n        else if (!isFunction(errorCallback)) {\r\n            errorCallback = function () {\r\n            };\r\n        }\r\n        promise.then(successCallback, errorCallback);\r\n    }\r\n    var EntitlementsImpl = (function () {\r\n        function EntitlementsImpl(_agm) {\r\n            var _this = this;\r\n            this._agm = _agm;\r\n            this._registry = lib$2();\r\n            this._isMethodRegistered = false;\r\n            this.handleBranchModified = function (branch) {\r\n                _this._registry.execute(\"branchChanged\", branch);\r\n            };\r\n            this.handleBranchesModified = function (branches) {\r\n                _this._registry.execute(\"branchesChanged\", branches);\r\n            };\r\n            this.getRegion = function (success, error) {\r\n                return promisify$2(_this._agmInvoke(GetConfigurationRegionMethodName, function (e) { return e.returned.Region; }), success, error);\r\n            };\r\n            this.getBranches = function (success, error) {\r\n                var promise = _this._agmInvoke(GetBranchesMethodName, function (e) {\r\n                    var obj = e.returned.Branches;\r\n                    return Object.keys(obj).map(function (key) { return obj[key]; });\r\n                });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.getCurrentBranch = function (success, error) {\r\n                var promise = _this._agmInvoke(GetCurrentBranchMethodName, function (e) { return e.returned.Branch; }, undefined);\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.setRegion = function (region, success, error) {\r\n                var promise = _this._agmInvoke(SetConfigurationRegionMethodName, function (e) { return e.returned.ResultMessage; }, { Region: region });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.setCurrentBranch = function (branch, success, error) {\r\n                var promise = _this._agmInvoke(SetCurrentBranchMethodName, function (e) { return e.returned.ResultMessage; }, { Branch: branch });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.currentUser = function (success, error) {\r\n                var promise = _this._agmInvoke(GetUserMethodName);\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.getFunctionalEntitlement = function (funct, success, error) {\r\n                var promise = _this._agmInvoke(GetFunctionalEntitlementMethodName, function (e) { return e.returned.Entitlement; }, { Function: funct });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.getFunctionalEntitlementBranch = function (funct, branch, success, error) {\r\n                var promise = _this._agmInvoke(GetFunctionalEntitlementMethodName, function (e) { return e.returned.Entitlement; }, { Function: funct, Branch: branch });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.canI = function (func, success, error) {\r\n                var promise = _this._agmInvoke(CanIMethodName, function (e) { return e.returned.Result; }, { Function: func });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.canIBranch = function (func, branch, success, error) {\r\n                var promise = _this._agmInvoke(CanIMethodName, function (e) { return e.returned.Result; }, { Function: func, Branch: branch });\r\n                return promisify$2(promise, success, error);\r\n            };\r\n            this.onBranchesChanged = function (callback) {\r\n                return _this._registry.add(\"branchesChanged\", callback);\r\n            };\r\n            this.onBranchChanged = function (callback) {\r\n                return _this._registry.add(\"branchChanged\", callback);\r\n            };\r\n            this.exit = function (options) {\r\n                return _this._agmInvoke(ShutdownMethodName, null, options);\r\n            };\r\n            this.onShuttingDown = function (callback) {\r\n                _this.registerMethod();\r\n                return _this._registry.add(\"onShuttingDown\", callback);\r\n            };\r\n            this.restart = function (options) {\r\n                return _this._agmInvoke(RestartMethodName, null, options);\r\n            };\r\n            this._agmInvoke = function (method, transformFunction, args) {\r\n                args = args || {};\r\n                return new Promise(function (resolve, reject) {\r\n                    var errHandler = function (error) { return reject(error); };\r\n                    _this._agm.invoke(method, args)\r\n                        .then(function (result) {\r\n                        if (!transformFunction) {\r\n                            transformFunction = function (d) { return d.returned; };\r\n                        }\r\n                        resolve(transformFunction(result));\r\n                    })\r\n                        .catch(errHandler);\r\n                });\r\n            };\r\n        }\r\n        EntitlementsImpl.prototype.registerMethod = function () {\r\n            var _this = this;\r\n            if (!this._isMethodRegistered) {\r\n                this._agm.register(OnGDShutdownMethodName, function (args) { return __awaiter(_this, void 0, void 0, function () {\r\n                    var error_1;\r\n                    return __generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                _a.trys.push([0, 2, , 3]);\r\n                                return [4, Promise.all(this._registry.execute(\"onShuttingDown\", args))];\r\n                            case 1:\r\n                                _a.sent();\r\n                                return [3, 3];\r\n                            case 2:\r\n                                error_1 = _a.sent();\r\n                                return [3, 3];\r\n                            case 3: return [2];\r\n                        }\r\n                    });\r\n                }); });\r\n                this._isMethodRegistered = true;\r\n            }\r\n        };\r\n        return EntitlementsImpl;\r\n    }());\n\n    function snapshot(agm, appManager) {\r\n        return new Promise(function (resolve, reject) {\r\n            agm.invoke(GetApplicationsMethodName, { skipIcon: true })\r\n                .then(function (response) {\r\n                var data = response.returned;\r\n                if (!data) {\r\n                    resolve();\r\n                }\r\n                var applications = data.applications;\r\n                if (!applications) {\r\n                    resolve();\r\n                }\r\n                objectValues(applications).map(function (item) { return appManager.handleAppAdded(item); });\r\n                resolve();\r\n            })\r\n                .catch(function (err) { return reject(\"Error getting application snapshot: \" + err.message); });\r\n        });\r\n    }\n\n    var OnBranchChangedEvent = \"OnBranchChanged\";\r\n    var OnBranchesModifiedEvent = \"OnBranchesModified\";\r\n    var OnApplicationAddedEvent = \"OnApplicationAdded\";\r\n    var OnApplicationRemovedEvent = \"OnApplicationRemoved\";\r\n    var OnApplicationChangedEvent = \"OnApplicationChanged\";\r\n    var OnApplicationReadyEvent = \"OnApplicationReady\";\r\n    var OnApplicationStartedEvent = \"OnApplicationStarted\";\r\n    var OnApplicationAgmServerReadyEvent = \"OnApplicationAgmServerReady\";\r\n    var OnApplicationUpdatedEvent = \"OnApplicationUpdated\";\r\n    var OnApplicationStoppedEvent = \"OnApplicationStopped\";\r\n    var OnApplicationStartFailedEvent = \"OnApplicationStartFailed\";\n\n    function createDataSubscription(agm, applications, entitlements, skipIcons) {\r\n        var subscription;\r\n        var start = function () {\r\n            var resolveFunc;\r\n            var rejectFunc;\r\n            var resultPromise = new Promise(function (resolve, reject) {\r\n                resolveFunc = resolve;\r\n                rejectFunc = reject;\r\n            });\r\n            agm.subscribe(OnEventMethodName, { arguments: { skipIcon: skipIcons }, waitTimeoutMs: 10000 })\r\n                .then(function (s) {\r\n                subscription = s;\r\n                subscription.onData(function (streamData) {\r\n                    var events = streamData.data;\r\n                    objectValues(events[OnApplicationAddedEvent])\r\n                        .map(function (item) { return applications.handleAppAdded(item); });\r\n                    objectValues(events[OnApplicationChangedEvent])\r\n                        .map(function (item) { return applications.handleAppUpdated(item); });\r\n                    objectValues(events[OnApplicationRemovedEvent])\r\n                        .map(function (item) { return applications.handleAppRemoved(item); });\r\n                    objectValues(events[OnApplicationReadyEvent])\r\n                        .map(function (item) { return applications.handleAppReady(item); });\r\n                    objectValues(events[OnApplicationStartedEvent])\r\n                        .map(function (item) { return applications.handleInstanceStarted(item); });\r\n                    objectValues(events[OnApplicationStartFailedEvent])\r\n                        .map(function (item) { return applications.handleInstanceStartFailed(item); });\r\n                    objectValues(events[OnApplicationStoppedEvent])\r\n                        .map(function (item) { return applications.handleInstanceStopped(item); });\r\n                    objectValues(events[OnApplicationUpdatedEvent])\r\n                        .map(function (item) { return applications.handleInstanceUpdated(item); });\r\n                    objectValues(events[OnApplicationAgmServerReadyEvent])\r\n                        .map(function (item) { return applications.handleInstanceAgmServerReady(item); });\r\n                    objectValues(events[OnBranchChangedEvent])\r\n                        .map(function (item) { return entitlements.handleBranchModified(item); });\r\n                    objectValues(events[OnBranchesModifiedEvent])\r\n                        .map(function (item) { return entitlements.handleBranchesModified(item); });\r\n                    resolveFunc();\r\n                });\r\n                subscription.onFailed(function (err) { return rejectFunc(err); });\r\n            })\r\n                .catch(function (err) { return rejectFunc(\"Error subscribing for \" + OnEventMethodName + \" stream. Err: \" + err); });\r\n            return resultPromise;\r\n        };\r\n        var stop = function () {\r\n            if (subscription) {\r\n                subscription.close();\r\n            }\r\n        };\r\n        return {\r\n            start: start,\r\n            stop: stop\r\n        };\r\n    }\n\n    var InMemoryStoreCommandMethodName = \"T42.ACS.InMemoryStoreCommand\";\r\n    var InMemoryStore = (function () {\r\n        function InMemoryStore(interop) {\r\n            this.interop = interop;\r\n        }\r\n        InMemoryStore.prototype.import = function (apps, mode) {\r\n            if (!apps || !Array.isArray(apps)) {\r\n                return Promise.reject(\"invalid apps argument - should be an array of application definitions\");\r\n            }\r\n            if (mode && mode !== \"replace\" && mode !== \"merge\") {\r\n                return Promise.reject(\"invalid mode argument - should be 'replace' or 'merge'\");\r\n            }\r\n            mode = (mode !== null && mode !== void 0 ? mode : \"replace\");\r\n            var command = {\r\n                command: \"import\",\r\n                args: {\r\n                    apps: apps,\r\n                    mode: mode\r\n                }\r\n            };\r\n            return this.interop.invoke(InMemoryStoreCommandMethodName, command)\r\n                .then(function (r) { return r.returned; });\r\n        };\r\n        InMemoryStore.prototype.export = function () {\r\n            return this.interop.invoke(InMemoryStoreCommandMethodName, { command: \"export\" })\r\n                .then(function (r) { return r.returned.apps; });\r\n        };\r\n        InMemoryStore.prototype.remove = function (app) {\r\n            if (!app || typeof app !== \"string\") {\r\n                return Promise.reject(\"invalid app name, should be a string value\");\r\n            }\r\n            var command = {\r\n                command: \"remove\",\r\n                args: {\r\n                    apps: [app]\r\n                }\r\n            };\r\n            return this.interop.invoke(InMemoryStoreCommandMethodName, command).then(function (r) { return r.returned; });\r\n        };\r\n        InMemoryStore.prototype.clear = function () {\r\n            var command = {\r\n                command: \"clear\"\r\n            };\r\n            return this.interop.invoke(InMemoryStoreCommandMethodName, command).then(function (r) { return r.returned; });\r\n        };\r\n        InMemoryStore.prototype.createAppDef = function (name, url) {\r\n            if (!url) {\r\n                url = \"https://google.com\";\r\n            }\r\n            return {\r\n                name: name,\r\n                type: \"window\",\r\n                title: name,\r\n                details: {\r\n                    url: url\r\n                }\r\n            };\r\n        };\r\n        return InMemoryStore;\r\n    }());\n\n    var AppManagerFactory = (function (config) {\r\n        if (!config) {\r\n            throw Error(\"config not set\");\r\n        }\r\n        if (!config.agm) {\r\n            throw Error(\"config.agm is missing\");\r\n        }\r\n        var START_ONLY = \"startOnly\";\r\n        var SKIP_ICONS = \"skipIcons\";\r\n        var FULL = \"full\";\r\n        var mode = config.mode || START_ONLY;\r\n        if (mode !== START_ONLY && mode !== SKIP_ICONS && mode !== FULL) {\r\n            throw new Error(\"Invalid mode for appManager lib - \" + mode + \" is not supported\");\r\n        }\r\n        var activities = config.activities;\r\n        var agm = config.agm;\r\n        var logger = config.logger;\r\n        var windows = config.windows;\r\n        var appManager = new AppManagerImpl(mode, agm, activities, windows, logger.subLogger(\"applications\"), config.gdMajorVersion);\r\n        var entitlements = new EntitlementsImpl(agm);\r\n        var readyPromise;\r\n        if (mode === START_ONLY) {\r\n            readyPromise = snapshot(agm, appManager);\r\n        }\r\n        else {\r\n            var subscription = createDataSubscription(agm, appManager, entitlements, mode === SKIP_ICONS);\r\n            readyPromise = subscription.start();\r\n        }\r\n        var api = {\r\n            ready: function () { return readyPromise; },\r\n            applications: appManager.applications,\r\n            application: appManager.application,\r\n            onAppAdded: appManager.onAppAdded,\r\n            onAppRemoved: appManager.onAppRemoved,\r\n            onAppChanged: appManager.onAppChanged,\r\n            onAppAvailable: appManager.onAppAvailable,\r\n            onAppUnavailable: appManager.onAppUnavailable,\r\n            instances: appManager.instances,\r\n            get myInstance() {\r\n                return appManager.getMyInstance();\r\n            },\r\n            onInstanceStarted: appManager.onInstanceStarted,\r\n            onInstanceStopped: appManager.onInstanceStopped,\r\n            onInstanceUpdated: appManager.onInstanceUpdated,\r\n            onInstanceStartFailed: appManager.onInstanceStartFailed,\r\n            getRegion: entitlements.getRegion,\r\n            getBranches: entitlements.getBranches,\r\n            getCurrentBranch: entitlements.getCurrentBranch,\r\n            getFunctionalEntitlement: entitlements.getFunctionalEntitlement,\r\n            getFunctionalEntitlementBranch: entitlements.getFunctionalEntitlementBranch,\r\n            setCurrentBranch: entitlements.setCurrentBranch,\r\n            setRegion: entitlements.setRegion,\r\n            currentUser: entitlements.currentUser,\r\n            canI: entitlements.canI,\r\n            canIBranch: entitlements.canIBranch,\r\n            onBranchesChanged: entitlements.onBranchesChanged,\r\n            exit: entitlements.exit,\r\n            restart: entitlements.restart,\r\n            onShuttingDown: entitlements.onShuttingDown,\r\n            inMemory: new InMemoryStore(agm)\r\n        };\r\n        return api;\r\n    });\n\n    var WindowStore = (function () {\r\n        function WindowStore() {\r\n            this.waitForTimeoutInMilliseconds = 60000;\r\n            this._windows = {};\r\n            this._pendingWindows = {};\r\n            this._pendingWindowsStates = {};\r\n            this._registry = lib$2();\r\n        }\r\n        WindowStore.prototype.init = function (logger) {\r\n            this._logger = logger;\r\n        };\r\n        WindowStore.prototype.get = function (id) {\r\n            return this._windows[id] || this._pendingWindows[id];\r\n        };\r\n        WindowStore.prototype.getIfReady = function (id) {\r\n            return this._windows[id];\r\n        };\r\n        Object.defineProperty(WindowStore.prototype, \"list\", {\r\n            get: function () {\r\n                return this._windows;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WindowStore.prototype.add = function (window) {\r\n            var isExist = this._pendingWindows[window.API.id] ? true : false;\r\n            if (isExist) {\r\n                this._logger.error(\"trying to add window with id \" + window.API.id + \" from windowStore, which already exists\");\r\n                return;\r\n            }\r\n            var remote = window.API.windowType === \"remote\";\r\n            this._pendingWindows[window.API.id] = window;\r\n            this._pendingWindowsStates[window.API.id] = {\r\n                ready: false,\r\n                urlChanged: remote,\r\n            };\r\n            this._registry.execute(\"on-added\", window);\r\n        };\r\n        WindowStore.prototype.remove = function (window) {\r\n            delete this._windows[window.API.id];\r\n            delete this._pendingWindows[window.API.id];\r\n            delete this._pendingWindowsStates[window.API.id];\r\n            this._registry.execute(\"on-removed\", window);\r\n        };\r\n        WindowStore.prototype.setReadyState = function (windowId) {\r\n            var targetWindowState = this._pendingWindowsStates[windowId];\r\n            if (typeof targetWindowState === \"undefined\") {\r\n                return;\r\n            }\r\n            targetWindowState.ready = true;\r\n            if (targetWindowState.urlChanged) {\r\n                this.markReadyToShow(windowId);\r\n            }\r\n        };\r\n        WindowStore.prototype.setUrlChangedState = function (windowId) {\r\n            var targetWindowState = this._pendingWindowsStates[windowId];\r\n            if (typeof targetWindowState === \"undefined\") {\r\n                return;\r\n            }\r\n            targetWindowState.urlChanged = true;\r\n            if (targetWindowState.ready) {\r\n                this.markReadyToShow(windowId);\r\n            }\r\n        };\r\n        WindowStore.prototype.waitFor = function (id) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var un;\r\n                var timeout = setTimeout(function () {\r\n                    un();\r\n                    reject(\"waitFor timed out.\");\r\n                }, _this.waitForTimeoutInMilliseconds);\r\n                var win = _this._windows[id];\r\n                if (win) {\r\n                    clearTimeout(timeout);\r\n                    resolve(win);\r\n                }\r\n                else {\r\n                    un = _this.onReadyWindow(function (w) {\r\n                        if (w.API.id !== id) {\r\n                            return;\r\n                        }\r\n                        clearTimeout(timeout);\r\n                        un();\r\n                        resolve(w);\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        WindowStore.prototype.onReadyWindow = function (callback) {\r\n            return this._registry.add(\"on-ready\", callback);\r\n        };\r\n        WindowStore.prototype.onAdded = function (callback) {\r\n            return this._registry.add(\"on-added\", callback);\r\n        };\r\n        WindowStore.prototype.onRemoved = function (callback) {\r\n            return this._registry.add(\"on-removed\", callback);\r\n        };\r\n        WindowStore.prototype.markReadyToShow = function (windowId) {\r\n            if (this._pendingWindows[windowId]) {\r\n                this._windows[windowId] = this._pendingWindows[windowId];\r\n                delete this._pendingWindows[windowId];\r\n                delete this._pendingWindowsStates[windowId];\r\n            }\r\n            this._registry.execute(\"on-ready\", this._windows[windowId]);\r\n        };\r\n        return WindowStore;\r\n    }());\r\n    var windowStore = new WindowStore();\n\n    var Utils$1 = (function () {\r\n        function Utils() {\r\n        }\r\n        Utils.getGDMajorVersion = function () {\r\n            if (typeof window === \"undefined\") {\r\n                return -1;\r\n            }\r\n            if (!window.glueDesktop) {\r\n                return -1;\r\n            }\r\n            if (!window.glueDesktop.version) {\r\n                return -1;\r\n            }\r\n            var ver = Number(window.glueDesktop.version.substr(0, 1));\r\n            return isNaN(ver) ? -1 : ver;\r\n        };\r\n        Utils.callbackifyPromise = function (action, successCallback, errorCallback) {\r\n            var fail = function (error) {\r\n                var msg = error;\r\n                if (error instanceof Error) {\r\n                    msg = error.message;\r\n                }\r\n                if (typeof errorCallback === \"function\") {\r\n                    errorCallback(msg);\r\n                    return;\r\n                }\r\n                return Promise.reject(msg);\r\n            };\r\n            try {\r\n                return action()\r\n                    .then(function (result) {\r\n                    if (typeof successCallback === \"function\") {\r\n                        successCallback(result);\r\n                    }\r\n                    return result;\r\n                })\r\n                    .catch(function (error) {\r\n                    return fail(error);\r\n                });\r\n            }\r\n            catch (err) {\r\n                return fail(err);\r\n            }\r\n        };\r\n        Utils.getMonitor = function (bounds, displays) {\r\n            var _this = this;\r\n            var monitorsSortedByOverlap = displays.map(function (m) {\r\n                var left = m.left, top = m.top, width = m.workingAreaWidth, height = m.workingAreaHeight;\r\n                var overlap = _this.calculateTotalOverlap({ left: left, top: top, width: width, height: height }, bounds);\r\n                return {\r\n                    monitor: m,\r\n                    totalOverlap: overlap\r\n                };\r\n            }).sort(function (a, b) { return b.totalOverlap - a.totalOverlap; });\r\n            return monitorsSortedByOverlap[0].monitor;\r\n        };\r\n        Utils.getDisplayCenterOfScreen = function (a, display) {\r\n            var left = Math.floor(Math.max(display.left, (display.left + (display.workingAreaWidth - a.width) / 2)));\r\n            var top = Math.floor(Math.max(display.top, (display.top + (display.workingAreaHeight - a.height) / 2)));\r\n            return {\r\n                top: top,\r\n                left: left\r\n            };\r\n        };\r\n        Utils.calculateTotalOverlap = function (r1, r2) {\r\n            var r1x = r1.left;\r\n            var r1y = r1.top;\r\n            var r1xMax = r1x + r1.width;\r\n            var r1yMax = r1y + r1.height;\r\n            var r2x = r2.left;\r\n            var r2y = r2.top;\r\n            var r2xMax = r2x + r2.width;\r\n            var r2yMax = r2y + r2.height;\r\n            var xOverlap = Math.max(0, Math.min(r1xMax, r2xMax) - Math.max(r1x, r2x));\r\n            var yOverlap = Math.max(0, Math.min(r1yMax, r2yMax) - Math.max(r1y, r2y));\r\n            return xOverlap * yOverlap;\r\n        };\r\n        return Utils;\r\n    }());\n\n    var windowFactory = (function (id, options, executor, logger, appManagerGetter, displayAPIGetter, agm, registry) {\r\n        var _registry = (registry !== null && registry !== void 0 ? registry : lib$2());\r\n        var _logger = logger.subLogger(\"window \" + id);\r\n        var _name = options.name;\r\n        var _mode = options.mode;\r\n        var _url = options.url;\r\n        var _title = options.title;\r\n        var _context = options.context || {};\r\n        var _bounds = options.bounds;\r\n        var _frameColor = options.frameColor;\r\n        var _focus = options.focus;\r\n        var _neighbours = options.neighbours || {};\r\n        var _groupId = options.groupId;\r\n        var _isGroupHeaderVisible = options.isGroupHeaderVisible;\r\n        var _isTabHeaderVisible = options.isTabHeaderVisible;\r\n        var _isTabSelected = options.isTabSelected;\r\n        var _settings = options.settings;\r\n        var _isVisible = options.isVisible;\r\n        var _isSticky = options.isSticky;\r\n        var isCollapsed = options.isCollapsed;\r\n        var _windowState = options.state;\r\n        var _tabGroupId = options.tabGroupId;\r\n        var _isLocked = options.isLocked;\r\n        var _group;\r\n        var resultWindow;\r\n        var _frameButtons = [];\r\n        var _zoomFactor = options.zoomFactor;\r\n        var _placementSettings = options.placementSettings;\r\n        function close(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (!id) {\r\n                    var e = new Error(\"The window is already closed.\");\r\n                    if (typeof error === \"function\") {\r\n                        error(e.message);\r\n                    }\r\n                    reject(e);\r\n                    return;\r\n                }\r\n                var un = onClose(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.close(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function navigate(newUrl, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var un = onUrlChanged(function (url, win) {\r\n                    if (url === win.url) {\r\n                        un();\r\n                        if (typeof success === \"function\") {\r\n                            success(resultWindow);\r\n                        }\r\n                        resolve(resultWindow);\r\n                    }\r\n                });\r\n                executor.navigate(resultWindow, newUrl)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setStyle(style, success, error) {\r\n            if (!style || Object.keys(style).length === 0 || Object.keys(style).every(function (key) { return !key; })) {\r\n                var errMessage = \"Invalid style arguments: \" + JSON.stringify(style);\r\n                if (typeof error === \"function\") {\r\n                    error(errMessage);\r\n                    return;\r\n                }\r\n                return Promise.reject(new Error(errMessage));\r\n            }\r\n            if (style && style.focus !== undefined) {\r\n                if (typeof style.focus !== \"boolean\") {\r\n                    var errMessage = \"Focus must be boolean. Currently only focus true is supported ! \" + JSON.stringify(style);\r\n                    if (typeof error === \"function\") {\r\n                        error(errMessage);\r\n                        return;\r\n                    }\r\n                    return Promise.reject(new Error(errMessage));\r\n                }\r\n                else if (style.focus === false) {\r\n                    _logger.warn(\"Focus false is not supported!\");\r\n                }\r\n            }\r\n            if (style && style.hidden !== undefined && typeof style.hidden !== \"boolean\") {\r\n                var errMessage = \"hidden should be boolean\";\r\n                if (typeof error === \"function\") {\r\n                    error(errMessage);\r\n                    return;\r\n                }\r\n                return Promise.reject(new Error(errMessage));\r\n            }\r\n            for (var _i = 0, _a = [\"minHeight\", \"maxHeight\", \"minWidth\", \"maxWidth\"]; _i < _a.length; _i++) {\r\n                var prop = _a[_i];\r\n                var styleAsAny = style;\r\n                if (prop in style && !isNumber(styleAsAny[prop])) {\r\n                    var errMessage = prop + \" should be number\";\r\n                    if (typeof error === \"function\") {\r\n                        error(errMessage);\r\n                        return;\r\n                    }\r\n                    return Promise.reject(new Error(errMessage));\r\n                }\r\n            }\r\n            return Utils$1.callbackifyPromise(function () { return executor.setStyle(resultWindow, style); }, success, error);\r\n        }\r\n        function resetButtons(buttons, success, error) {\r\n            return Utils$1.callbackifyPromise(function () { return executor.resetButtons(resultWindow, buttons); }, success, error);\r\n        }\r\n        function setOnTop(onTop, success, error) {\r\n            if (this.onTop === onTop) {\r\n                var errMessage = \"OnTop setting is already set to '\" + onTop + \"'\";\r\n                error(errMessage);\r\n                return Promise.reject(new Error(errMessage));\r\n            }\r\n            return Utils$1.callbackifyPromise(function () { return executor.setOnTop(resultWindow, onTop); }, success, error);\r\n        }\r\n        function setSizeConstraints(constraints, success, error) {\r\n            if (!constraints || Object.keys(constraints).every(function (value) { return value === undefined; })) {\r\n                var errMessage = \"Invalid Constraints: \" + JSON.stringify(constraints);\r\n                error(errMessage);\r\n                return Promise.reject(new Error(errMessage));\r\n            }\r\n            return Utils$1.callbackifyPromise(function () { return executor.setSizeConstraints(resultWindow, constraints); }, success, error);\r\n        }\r\n        function setTitle(newTitle, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (newTitle === _title) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                    return;\r\n                }\r\n                var un = onTitleChanged(function (title) {\r\n                    if (title === newTitle) {\r\n                        un();\r\n                        if (typeof success === \"function\") {\r\n                            success(resultWindow);\r\n                        }\r\n                        resolve(resultWindow);\r\n                    }\r\n                });\r\n                executor.setTitle(resultWindow, newTitle)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setSticky(isSticky, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.setSticky(resultWindow, isSticky)\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function moveResize(dimensions, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var resolveImmediately = areBoundsEqual(dimensions, _bounds);\r\n                var isDone = false;\r\n                var done = function () {\r\n                    if (isDone) {\r\n                        return;\r\n                    }\r\n                    isDone = true;\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                    if (unsubscribeBoundsChanged) {\r\n                        unsubscribeBoundsChanged();\r\n                        unsubscribeBoundsChanged = undefined;\r\n                    }\r\n                    if (resolveTimeout) {\r\n                        clearTimeout(resolveTimeout);\r\n                        resolveTimeout = undefined;\r\n                    }\r\n                };\r\n                var resolveTimeout;\r\n                var unsubscribeBoundsChanged;\r\n                if (!resolveImmediately) {\r\n                    unsubscribeBoundsChanged = onBoundsChanged(function (win) {\r\n                        if (!areBoundsEqual(dimensions, win.bounds)) {\r\n                            return;\r\n                        }\r\n                        done();\r\n                    });\r\n                }\r\n                executor.moveResize(resultWindow, dimensions)\r\n                    .then(function () {\r\n                    if (resolveImmediately) {\r\n                        done();\r\n                        return;\r\n                    }\r\n                    resolveTimeout = setTimeout(function () {\r\n                        done();\r\n                    }, 1000);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function addFrameButton(buttonInfo, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (typeof buttonInfo === \"undefined\") {\r\n                    if (typeof error === \"function\") {\r\n                        error(\"No button info\");\r\n                        return;\r\n                    }\r\n                    reject(\"No button info\");\r\n                    return;\r\n                }\r\n                if (buttonInfo.buttonId === undefined) {\r\n                    if (typeof error === \"function\") {\r\n                        error(\"No buttonId\");\r\n                        return;\r\n                    }\r\n                    reject(\"No buttonId\");\r\n                    return;\r\n                }\r\n                if (buttonInfo.imageBase64 === undefined) {\r\n                    if (typeof error === \"function\") {\r\n                        error(\"No imageBase64\");\r\n                        return;\r\n                    }\r\n                    reject(\"No imageBase64\");\r\n                    return;\r\n                }\r\n                var un = onFrameButtonAdded(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.addFrameButton(resultWindow, buttonInfo)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function removeFrameButton(buttonId, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (buttonId === undefined || buttonId === \"\") {\r\n                    if (typeof error === \"function\") {\r\n                        error(\"No buttonId\");\r\n                        return;\r\n                    }\r\n                    reject(\"No buttonId\");\r\n                    return;\r\n                }\r\n                var un = onFrameButtonRemoved(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.removeFrameButton(resultWindow, buttonId)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function activate(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_focus) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                    return;\r\n                }\r\n                var un = onFocusChanged(function (win) {\r\n                    if (id === win.id && win.isFocused) {\r\n                        un();\r\n                        if (typeof success === \"function\") {\r\n                            success(resultWindow);\r\n                        }\r\n                        resolve(resultWindow);\r\n                        return;\r\n                    }\r\n                });\r\n                executor.activate(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function focus(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_focus) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                    return;\r\n                }\r\n                var un = onFocusChanged(function (win) {\r\n                    if (id === win.id && win.isFocused) {\r\n                        un();\r\n                        if (typeof success === \"function\") {\r\n                            success(resultWindow);\r\n                        }\r\n                        return resolve(resultWindow);\r\n                    }\r\n                });\r\n                executor.focus(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function maximizeRestore(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var currEvent = _windowState === \"normal\" ? onMaximized : onNormal;\r\n                var un = currEvent(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.maximizeRestore(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function maximize(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_windowState === \"maximized\") {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onMaximized(function (win) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    un();\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.maximize(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function restore(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_windowState === \"normal\") {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onNormal(function (win) {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.restore(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function minimize(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_windowState === \"minimized\") {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onMinimized(function (win) {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                });\r\n                executor.minimize(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function collapse(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (isCollapsed) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onCollapsed(function (win) {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.collapse(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function expand(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (!isCollapsed) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onExpanded(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.expand(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function toggleCollapse(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var currEvent = isCollapsed ? onExpanded : onCollapsed;\r\n                var un = currEvent(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.toggleCollapse(resultWindow)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function snap(target, direction, success, error) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var targetWindowGroup, e, targetWindow, e;\r\n                return __generator(this, function (_a) {\r\n                    if (!target) {\r\n                        e = new Error(\"Please specify a target window - \" + target);\r\n                        if (typeof error === \"function\") {\r\n                            error(e.message);\r\n                            return [2];\r\n                        }\r\n                        throw e;\r\n                    }\r\n                    if (typeof target === \"string\") {\r\n                        targetWindow = windowStore.get(target);\r\n                        if (!targetWindow) {\r\n                            e = new Error(\"Invalid target parameter or no such window. Invoked with:  \" + target);\r\n                            if (typeof error === \"function\") {\r\n                                error(e.message);\r\n                                return [2];\r\n                            }\r\n                            throw e;\r\n                        }\r\n                        targetWindowGroup = targetWindow.API.group;\r\n                    }\r\n                    else {\r\n                        targetWindowGroup = target.group;\r\n                    }\r\n                    return [2, Promise.all([\r\n                            waitForMyWindowToJoinTargetGroup(targetWindowGroup),\r\n                            executor.snap(resultWindow, target, direction)\r\n                        ])\r\n                            .then(function () {\r\n                            if (typeof success === \"function\") {\r\n                                success(resultWindow);\r\n                            }\r\n                            return resultWindow;\r\n                        })\r\n                            .catch(function (e) {\r\n                            if (typeof error === \"function\") {\r\n                                error(e);\r\n                            }\r\n                            return e;\r\n                        })];\r\n                });\r\n            });\r\n        }\r\n        function waitForMyWindowToJoinTargetGroup(targetGroup) {\r\n            return new Promise(function (resolve, reject) {\r\n                var unsub = targetGroup.onWindowAdded(function (_, window) {\r\n                    if (resultWindow.id === window.id) {\r\n                        unsub();\r\n                        resolve();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        function attachTab(tab, index, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var sourceWindowId;\r\n                var targetWindowId = resultWindow.id;\r\n                var errorMessage = \"Invalid tab parameter - should be an object with property id or a string. Invoked for source window id:\" + resultWindow.id;\r\n                if (!tab) {\r\n                    reject(errorMessage);\r\n                    return;\r\n                }\r\n                if (typeof tab === \"string\") {\r\n                    sourceWindowId = tab;\r\n                }\r\n                else if (typeof tab.id !== \"undefined\") {\r\n                    sourceWindowId = tab.id;\r\n                }\r\n                else {\r\n                    reject(errorMessage);\r\n                    return;\r\n                }\r\n                var argsForSend = {\r\n                    sourceWindowId: sourceWindowId,\r\n                    targetWindowId: targetWindowId,\r\n                };\r\n                if (index) {\r\n                    argsForSend.index = index;\r\n                }\r\n                var sourceWin = windowStore.get(argsForSend.sourceWindowId).API;\r\n                var un = sourceWin.onAttached(function (win) {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.attachTab(resultWindow, argsForSend)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    un();\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function detachTab(opt, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var argsForSend = { windowId: resultWindow.id };\r\n                var _options = opt || {};\r\n                if (typeof _options.relativeTo !== \"undefined\") {\r\n                    if (typeof _options.relativeTo === \"string\") {\r\n                        argsForSend.relativeTo = _options.relativeTo;\r\n                    }\r\n                    else if (typeof _options.relativeTo.id !== \"undefined\") {\r\n                        argsForSend.relativeTo = _options.relativeTo.id;\r\n                    }\r\n                    if (typeof _options.relativeDirection !== \"undefined\") {\r\n                        argsForSend.relativeDirection = _options.relativeDirection;\r\n                    }\r\n                    if (typeof _options.width !== \"undefined\") {\r\n                        argsForSend.width = _options.width;\r\n                    }\r\n                    if (typeof _options.height !== \"undefined\") {\r\n                        argsForSend.height = _options.height;\r\n                    }\r\n                }\r\n                if (typeof _options.bounds !== \"undefined\") {\r\n                    argsForSend.bounds = _options.bounds;\r\n                }\r\n                if (typeof _options.hideTabHeader !== \"undefined\") {\r\n                    argsForSend.hideTabHeader = _options.hideTabHeader;\r\n                }\r\n                var visibilityChangeHeard = false;\r\n                var detachedHeard = false;\r\n                var unVisibility = _registry.add(\"frame-attached\", (function (win) {\r\n                    var isVisibilityCorrect = _options.hideTabHeader === undefined || _options.hideTabHeader !== win.isTabHeaderVisible;\r\n                    if (id === win.id && isVisibilityCorrect) {\r\n                        visibilityChangeHeard = true;\r\n                        unVisibility();\r\n                        if (detachedHeard) {\r\n                            if (typeof success === \"function\") {\r\n                                success(resultWindow);\r\n                            }\r\n                            resolve(resultWindow);\r\n                            if (typeof unDetached === \"function\") {\r\n                                unDetached();\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n                var unDetached = onDetached(function (win) {\r\n                    if (id === win.id) {\r\n                        detachedHeard = true;\r\n                        unDetached();\r\n                        if (visibilityChangeHeard) {\r\n                            if (typeof success === \"function\") {\r\n                                success(resultWindow);\r\n                            }\r\n                            resolve(resultWindow);\r\n                            if (typeof unVisibility === \"function\") {\r\n                                unVisibility();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                executor.detachTab(resultWindow, argsForSend)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    unDetached();\r\n                    unVisibility();\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setVisible(toBeVisible, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (toBeVisible === _isVisible) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onVisibilityChanged(function (win) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    un();\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.setVisible(resultWindow, toBeVisible)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function showLoader(loader) {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.showLoader(resultWindow, loader)\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function hideLoader() {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.hideLoader(resultWindow)\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function updateContext(context, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var un = onContextUpdated(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.updateContext(resultWindow, context)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function lock(success, error) {\r\n            if (resultWindow.isLocked) {\r\n                if (typeof success === \"function\") {\r\n                    success(resultWindow);\r\n                }\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return new Promise(function (resolve, reject) {\r\n                executor.lock(resultWindow)\r\n                    .then(function () { return waitForLockingChanged(); })\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function unlock(success, error) {\r\n            if (!resultWindow.isLocked) {\r\n                if (typeof success === \"function\") {\r\n                    success(resultWindow);\r\n                }\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return new Promise(function (resolve, reject) {\r\n                executor.unlock(resultWindow)\r\n                    .then(function () { return waitForLockingChanged(); })\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function waitForLockingChanged() {\r\n            return new Promise(function (resolve) {\r\n                var un = onLockingChanged(function (window) {\r\n                    if (window.id === resultWindow.id) {\r\n                        un();\r\n                        resolve();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        function getIcon(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.getIcon(resultWindow)\r\n                    .then(function (icon) {\r\n                    if (typeof success === \"function\") {\r\n                        success(icon);\r\n                    }\r\n                    resolve(icon);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setIcon(base64Image, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.setIcon(resultWindow, base64Image)\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setFrameColor(frameColor, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var un = onFrameColorChanged(function () {\r\n                    un();\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    resolve(resultWindow);\r\n                });\r\n                executor.setFrameColor(resultWindow, frameColor)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setTabHeaderVisible(toBeTabHeaderVisible, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                if (_isTabHeaderVisible === toBeTabHeaderVisible) {\r\n                    if (typeof success === \"function\") {\r\n                        success(resultWindow);\r\n                    }\r\n                    return resolve(resultWindow);\r\n                }\r\n                var un = onTabHeaderVisibilityChanged(function (win) {\r\n                    if (win.id === id && win.isTabHeaderVisible === toBeTabHeaderVisible) {\r\n                        if (typeof success === \"function\") {\r\n                            success(resultWindow);\r\n                        }\r\n                        un();\r\n                        resolve(resultWindow);\r\n                    }\r\n                });\r\n                executor.setTabHeaderVisible(resultWindow, toBeTabHeaderVisible)\r\n                    .catch(function (e) {\r\n                    if (typeof error === \"function\") {\r\n                        error(e);\r\n                    }\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function setTabTooltip(tooltip) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    if (!tooltip) {\r\n                        throw new Error(tooltip + \" is null or undefined\");\r\n                    }\r\n                    return [2, executor.setTabTooltip(resultWindow, tooltip)];\r\n                });\r\n            });\r\n        }\r\n        function showPopup(config) {\r\n            return executor.showPopup(resultWindow, config);\r\n        }\r\n        function createFlydown(config) {\r\n            return executor.createFlydown(resultWindow.id, config);\r\n        }\r\n        function setModalState(isModal) {\r\n            return executor.setModalState(resultWindow.id, isModal || false);\r\n        }\r\n        function zoomIn(success, error) {\r\n            return Utils$1.callbackifyPromise(function () {\r\n                return executor.zoomIn(resultWindow);\r\n            }, success, error);\r\n        }\r\n        function zoomOut(success, error) {\r\n            return Utils$1.callbackifyPromise(function () {\r\n                return executor.zoomOut(resultWindow);\r\n            }, success, error);\r\n        }\r\n        function setZoomFactor(zoomFactor, success, error) {\r\n            return Utils$1.callbackifyPromise(function () {\r\n                if (isNaN(zoomFactor)) {\r\n                    throw new Error(\"zoomFactor is not a number\");\r\n                }\r\n                return executor.setZoomFactor(resultWindow, zoomFactor);\r\n            }, success, error);\r\n        }\r\n        function showDevTools() {\r\n            return executor.showDevTools(resultWindow);\r\n        }\r\n        function capture(captureOptions) {\r\n            return executor.capture(resultWindow, captureOptions);\r\n        }\r\n        function flash(suppliedOptions, mode) {\r\n            var flashOptions = {\r\n                shouldFlash: true,\r\n                mode: \"auto\"\r\n            };\r\n            if (typeof suppliedOptions === \"boolean\") {\r\n                flashOptions.shouldFlash = suppliedOptions;\r\n            }\r\n            if (typeof mode !== \"undefined\") {\r\n                flashOptions.mode = mode;\r\n            }\r\n            return executor.flash(resultWindow, flashOptions);\r\n        }\r\n        function print(printOptions) {\r\n            return executor.print(resultWindow, printOptions);\r\n        }\r\n        function printToPDF(printToPDFOptions) {\r\n            return executor.printToPDF(resultWindow, printToPDFOptions);\r\n        }\r\n        function ungroup(ungroupOptions) {\r\n            return new Promise(function (resolve, reject) {\r\n                var unGroupChanged = onGroupChanged(function (win, newGroup, oldGroup) {\r\n                    if (id === win.id) {\r\n                        unGroupChanged();\r\n                        resolve(resultWindow);\r\n                    }\r\n                });\r\n                executor.ungroup(resultWindow, ungroupOptions)\r\n                    .catch(function (e) {\r\n                    unGroupChanged();\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function place(placementSettings) {\r\n            return executor.place(resultWindow, placementSettings);\r\n        }\r\n        function onTitleChanged(callback) {\r\n            callback(resultWindow.title, resultWindow);\r\n            return _registry.add(\"onTitleChanged\", callback);\r\n        }\r\n        function onClose(callback) {\r\n            return _registry.add(\"onClose\", callback);\r\n        }\r\n        function onUrlChanged(callback) {\r\n            return _registry.add(\"onUrlChanged\", callback);\r\n        }\r\n        function onFrameButtonAdded(callback) {\r\n            return _registry.add(\"onFrameButtonAdded\", callback);\r\n        }\r\n        function onFrameButtonRemoved(callback) {\r\n            return _registry.add(\"onFrameButtonRemoved\", callback);\r\n        }\r\n        function onFrameButtonClicked(callback) {\r\n            return _registry.add(\"onFrameButtonClicked\", callback);\r\n        }\r\n        function onCollapsed(callback) {\r\n            if (isCollapsed) {\r\n                callback(resultWindow);\r\n            }\r\n            return _registry.add(\"collapsed\", callback);\r\n        }\r\n        function onExpanded(callback) {\r\n            if (!isCollapsed) {\r\n                callback(resultWindow);\r\n            }\r\n            return _registry.add(\"expanded\", callback);\r\n        }\r\n        function onMaximized(callback) {\r\n            if (_windowState === \"maximized\") {\r\n                callback(resultWindow);\r\n            }\r\n            return _registry.add(\"maximized\", callback);\r\n        }\r\n        function onMinimized(callback) {\r\n            if (_windowState === \"minimized\") {\r\n                callback(resultWindow);\r\n            }\r\n            return _registry.add(\"minimized\", callback);\r\n        }\r\n        function onNormal(callback) {\r\n            if (_windowState === \"normal\") {\r\n                callback(resultWindow);\r\n            }\r\n            return _registry.add(\"normal\", callback);\r\n        }\r\n        function onAttached(callback) {\r\n            return _registry.add(\"attached\", callback);\r\n        }\r\n        function onDetached(callback) {\r\n            return _registry.add(\"detached\", callback);\r\n        }\r\n        function onVisibilityChanged(callback) {\r\n            return _registry.add(\"visibility-changed\", callback);\r\n        }\r\n        function onContextUpdated(callback) {\r\n            return _registry.add(\"context-updated\", callback);\r\n        }\r\n        function onLockingChanged(callback) {\r\n            return _registry.add(\"lock-changed\", callback);\r\n        }\r\n        function onBoundsChanged(callback) {\r\n            return _registry.add(\"bounds-changed\", callback);\r\n        }\r\n        function onFocusChanged(callback) {\r\n            return _registry.add(\"focus-changed\", callback);\r\n        }\r\n        function onStickyChanged(callback) {\r\n            return _registry.add(\"sticky-changed\", callback);\r\n        }\r\n        function onFrameColorChanged(callback) {\r\n            return _registry.add(\"frame-color-changed\", callback);\r\n        }\r\n        function onTabHeaderVisibilityChanged(callback) {\r\n            return _registry.add(\"tab-header-visibility-changed\", callback);\r\n        }\r\n        function onWindowAttached(callback) {\r\n            return _registry.add(\"window-attached\", callback);\r\n        }\r\n        function onWindowDetached(callback) {\r\n            return _registry.add(\"window-detached\", callback);\r\n        }\r\n        function onGroupChanged(callback) {\r\n            return _registry.add(\"group-changed\", callback);\r\n        }\r\n        function onTabSelectionChanged(callback) {\r\n            return _registry.add(\"tab-selection-changed\", callback);\r\n        }\r\n        function onClosing(callback) {\r\n            if (!isFunction(callback)) {\r\n                throw new Error(\"callback should be a function\");\r\n            }\r\n            var callbackWrap = function (success, error) {\r\n                var promise = callback();\r\n                if (promise && promise.then) {\r\n                    promise.then(success).catch(error);\r\n                }\r\n                else {\r\n                    success();\r\n                }\r\n            };\r\n            return executor.onClosing(callbackWrap, id);\r\n        }\r\n        function onRefreshing(callback) {\r\n            if (!isFunction(callback)) {\r\n                throw new Error(\"callback should be a function\");\r\n            }\r\n            var callbackWrap = function (success, error, prevent) {\r\n                var promise = callback(prevent);\r\n                if (promise && promise.then) {\r\n                    promise.then(success).catch(error);\r\n                }\r\n                else {\r\n                    success();\r\n                }\r\n            };\r\n            return executor.onRefreshing(callbackWrap, id);\r\n        }\r\n        function onZoomFactorChanged(callback) {\r\n            if (!isFunction(callback)) {\r\n                throw new Error(\"callback should be a function\");\r\n            }\r\n            return _registry.add(\"zoom-factor-changed\", callback);\r\n        }\r\n        function onPlacementSettingsChanged(callback) {\r\n            if (!isFunction(callback)) {\r\n                throw new Error(\"callback should be a function\");\r\n            }\r\n            return _registry.add(\"placementSettingsChanged\", callback);\r\n        }\r\n        function onNeighboursChanged(callback) {\r\n            if (!isFunction(callback)) {\r\n                throw new Error(\"callback should be a function\");\r\n            }\r\n            return _registry.add(\"neighbours-changed\", callback);\r\n        }\r\n        function handleTitleChanged(newTitle) {\r\n            _title = newTitle;\r\n            _registry.execute(\"onTitleChanged\", newTitle, resultWindow);\r\n        }\r\n        function handleUrlChanged(newUrl) {\r\n            _url = newUrl;\r\n            _registry.execute(\"onUrlChanged\", newUrl, resultWindow);\r\n        }\r\n        function handleVisibilityChanged(isVisible) {\r\n            if (isVisible === _isVisible) {\r\n                return;\r\n            }\r\n            _isVisible = isVisible;\r\n            _registry.execute(\"visibility-changed\", resultWindow);\r\n        }\r\n        function handleWindowSettingsChanged(settings) {\r\n            _settings = settings;\r\n            _registry.execute(\"settings-changed\", resultWindow);\r\n        }\r\n        function handleContextUpdated(context) {\r\n            _context = context;\r\n            _registry.execute(\"context-updated\", _context, resultWindow);\r\n        }\r\n        function handleWindowClose() {\r\n            if (resultWindow.id === undefined) {\r\n                return;\r\n            }\r\n            _registry.execute(\"onClose\", resultWindow);\r\n            resultWindow.id = undefined;\r\n        }\r\n        function handleFrameButtonAdded(frameButton) {\r\n            var buttonObj = [\"buttonId\", \"imageBase64\", \"order\", \"tooltip\"].reduce(function (memo, k) {\r\n                memo[k] = frameButton[k];\r\n                return memo;\r\n            }, {});\r\n            var frameButtonsIds = _frameButtons.map(function (btn) {\r\n                return btn.buttonId;\r\n            });\r\n            if (frameButtonsIds.indexOf(frameButton.buttonId) === -1) {\r\n                _frameButtons.push(buttonObj);\r\n            }\r\n            _registry.execute(\"onFrameButtonAdded\", buttonObj, resultWindow);\r\n        }\r\n        function handleFrameButtonRemoved(frameButtonId) {\r\n            var button;\r\n            _frameButtons = _frameButtons.reduce(function (memo, btn) {\r\n                if (btn.buttonId === frameButtonId) {\r\n                    button = btn;\r\n                }\r\n                else {\r\n                    memo.push(btn);\r\n                }\r\n                return memo;\r\n            }, []);\r\n            if (button !== undefined) {\r\n                _registry.execute(\"onFrameButtonRemoved\", button, resultWindow);\r\n            }\r\n        }\r\n        function handleFrameButtonClicked(frameButton) {\r\n            var button = _frameButtons.filter(function (btn) {\r\n                return btn.buttonId === frameButton.buttonId;\r\n            });\r\n            if (button.length > 0) {\r\n                _registry.execute(\"onFrameButtonClicked\", button[0], resultWindow);\r\n            }\r\n        }\r\n        function handleWindowChangeState(state) {\r\n            if (state === \"collapsed\") {\r\n                isCollapsed = true;\r\n            }\r\n            else if (state === \"expanded\") {\r\n                isCollapsed = false;\r\n            }\r\n            else {\r\n                _windowState = state;\r\n            }\r\n            _registry.execute(state, resultWindow);\r\n        }\r\n        function handleFrameIsLockedChanged(isLocked) {\r\n            _isLocked = isLocked;\r\n            _registry.execute(\"lock-changed\", resultWindow);\r\n        }\r\n        function handleBoundsChanged(bounds) {\r\n            if (_bounds.top === bounds.top && _bounds.left === bounds.left && _bounds.width === bounds.width && _bounds.height === bounds.height) {\r\n                return;\r\n            }\r\n            _bounds.top = bounds.top;\r\n            _bounds.left = bounds.left;\r\n            _bounds.width = bounds.width;\r\n            _bounds.height = bounds.height;\r\n            _registry.execute(\"bounds-changed\", resultWindow);\r\n        }\r\n        function handleFocusChanged(isFocused) {\r\n            _focus = isFocused;\r\n            _registry.execute(\"focus-changed\", resultWindow);\r\n        }\r\n        function handleIsStickyChanged(isSticky) {\r\n            _isSticky = isSticky;\r\n            _registry.execute(\"sticky-changed\", isSticky, resultWindow);\r\n        }\r\n        function handleFrameColorChanged(frameColor) {\r\n            _frameColor = frameColor;\r\n            _registry.execute(\"frame-color-changed\", resultWindow);\r\n        }\r\n        function handleFrameAttached(tabGroupId, isTabHeaderVisible) {\r\n            _tabGroupId = tabGroupId;\r\n            _isTabHeaderVisible = isTabHeaderVisible;\r\n            _registry.execute(\"frame-attached\", resultWindow);\r\n        }\r\n        function handleCompositionChanged(neighbours, groupId) {\r\n            _neighbours = neighbours || {};\r\n            _registry.execute(\"neighbours-changed\", neighbours, resultWindow);\r\n            _groupId = groupId;\r\n            if (resultWindow.groupId !== groupId) {\r\n                _registry.execute(\"group-changed\", resultWindow);\r\n            }\r\n        }\r\n        function handleGroupHeaderVisibilityChanged(isGroupHeaderVisible) {\r\n            _isGroupHeaderVisible = isGroupHeaderVisible;\r\n        }\r\n        function handleTabHeaderVisibilityChanged(isTabHeaderVisible) {\r\n            if (_isTabHeaderVisible !== isTabHeaderVisible) {\r\n                _isTabHeaderVisible = isTabHeaderVisible;\r\n                _registry.execute(\"tab-header-visibility-changed\", resultWindow);\r\n            }\r\n        }\r\n        function handleFrameSelectionChanged(newWindow, prevWindow) {\r\n            var selectedWindow;\r\n            if (typeof newWindow !== \"undefined\" && newWindow === id) {\r\n                _isTabSelected = true;\r\n                selectedWindow = resultWindow;\r\n            }\r\n            else {\r\n                _isTabSelected = false;\r\n                selectedWindow = windowStore.get(newWindow) ? windowStore.get(newWindow).API : undefined;\r\n            }\r\n            var previousWindow = windowStore.get(prevWindow) ? windowStore.get(prevWindow).API : undefined;\r\n            if (_isTabSelected && previousWindow) {\r\n                var un_1 = previousWindow.onTabSelectionChanged(function (newWin, prevWin) {\r\n                    if ((prevWin && prevWin.id) === previousWindow.id) {\r\n                        un_1();\r\n                        _registry.execute(\"tab-selection-changed\", selectedWindow, previousWindow, resultWindow);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                _registry.execute(\"tab-selection-changed\", selectedWindow, previousWindow, resultWindow);\r\n            }\r\n        }\r\n        function handleAttached(newTabGroupId, tabHeaderVisible) {\r\n            _tabGroupId = newTabGroupId;\r\n            _isTabHeaderVisible = tabHeaderVisible;\r\n            _registry.execute(\"attached\", resultWindow);\r\n        }\r\n        function handleWindowAttached(win) {\r\n            _registry.execute(\"window-attached\", win);\r\n        }\r\n        function handleDetached(tabGroupId) {\r\n            _tabGroupId = tabGroupId;\r\n            var un = _registry.add(\"frame-attached\", function (win) {\r\n                if (win.id === id) {\r\n                    un();\r\n                    _registry.execute(\"detached\", resultWindow);\r\n                }\r\n            });\r\n        }\r\n        function handleWindowDetached(win) {\r\n            _registry.execute(\"window-detached\", win);\r\n        }\r\n        function handleZoomFactorChanged(zoomFactor) {\r\n            _zoomFactor = zoomFactor;\r\n            _registry.execute(\"zoom-factor-changed\", resultWindow);\r\n        }\r\n        function handlePlacementSettingsChanged(placementSettings) {\r\n            var promise;\r\n            var copy = placementSettings;\r\n            if (!copy.display) {\r\n                promise = Promise.resolve(undefined);\r\n            }\r\n            else {\r\n                var displayAPI_1 = displayAPIGetter();\r\n                if (!displayAPI_1) {\r\n                    promise = Promise.resolve(undefined);\r\n                }\r\n                else {\r\n                    var index_1 = copy.display - 1;\r\n                    promise = new Promise(function (resolve, reject) {\r\n                        displayAPI_1.all().then(function (displays) {\r\n                            var display = displays.find(function (d) { return d.index === index_1; });\r\n                            resolve(display);\r\n                        }).catch(reject);\r\n                    });\r\n                }\r\n            }\r\n            promise.then(function (d) {\r\n                copy.display = d;\r\n                _placementSettings = copy;\r\n                _registry.execute(\"placementSettingsChanged\", resultWindow);\r\n            });\r\n        }\r\n        function handleGroupChanged(newGroup, oldGroup) {\r\n            _logger.trace(\"handle group changed to win: \" + id + \" with group id: \" + newGroup.id);\r\n            _group = newGroup;\r\n            _groupId = newGroup.id;\r\n            _registry.execute(\"group-changed\", resultWindow, newGroup, oldGroup);\r\n        }\r\n        function handleGroupAssociation(group) {\r\n            if (group) {\r\n                _logger.trace(\"setting group to win: \" + id + \" with group id: \" + group.id);\r\n            }\r\n            _group = group;\r\n        }\r\n        function getAllTabs() {\r\n            var allWindows = windowStore.list;\r\n            if (_mode.toLowerCase() !== \"tab\") {\r\n                return [];\r\n            }\r\n            return Object.keys(allWindows).reduce(function (memo, win) {\r\n                var window = allWindows[win];\r\n                if (window\r\n                    && window.API.tabGroupId\r\n                    && typeof window.API.tabGroupId !== \"undefined\"\r\n                    && typeof resultWindow.tabGroupId !== \"undefined\"\r\n                    && window.API.tabGroupId === resultWindow.tabGroupId) {\r\n                    memo.push(window.API);\r\n                }\r\n                return memo;\r\n            }, []);\r\n        }\r\n        function mapWindowIdsToWindowObjects(windowIdArr) {\r\n            return windowIdArr.reduce(function (memo, winId) {\r\n                var window = windowStore.get(winId);\r\n                if (window) {\r\n                    memo.push(window.API);\r\n                }\r\n                return memo;\r\n            }, []);\r\n        }\r\n        function getNeighboursByDirection(direction) {\r\n            var windowIds = _neighbours[direction];\r\n            if (typeof windowIds !== \"undefined\") {\r\n                return mapWindowIdsToWindowObjects(windowIds);\r\n            }\r\n        }\r\n        function getApplicationName() {\r\n            if (_context._APPLICATION_NAME) {\r\n                return _context._APPLICATION_NAME;\r\n            }\r\n            if (_context && _context._t42 && _context._t42.application) {\r\n                return _context._t42.application;\r\n            }\r\n            var info = getWindowInfo();\r\n            if (!info) {\r\n                return undefined;\r\n            }\r\n            return info.applicationName;\r\n        }\r\n        function getWindowInfo() {\r\n            if (typeof window !== \"undefined\" && window.glue42gd && window.glue42gd.getWindowInfo) {\r\n                var info = window.glue42gd.getWindowInfo(id);\r\n                if (!info) {\r\n                    return undefined;\r\n                }\r\n                else {\r\n                    return info;\r\n                }\r\n            }\r\n        }\r\n        function areBoundsEqual(requested, current) {\r\n            var height = requested.height;\r\n            var width = requested.width;\r\n            if (requested.height < _settings.minHeight) {\r\n                height = _settings.minHeight;\r\n            }\r\n            if (requested.height > _settings.maxHeight) {\r\n                height = _settings.maxHeight;\r\n            }\r\n            if (requested.width < _settings.minWidth) {\r\n                width = _settings.minWidth;\r\n            }\r\n            if (requested.width > _settings.maxWidth) {\r\n                width = _settings.maxWidth;\r\n            }\r\n            var areHeightsEqual = height ? current.height === height : true;\r\n            var areWidthsEqual = width ? current.width === width : true;\r\n            var areLeftsEqual = requested.left ? current.left === requested.left : true;\r\n            var areTopsEqual = requested.top ? current.top === requested.top : true;\r\n            return areHeightsEqual && areWidthsEqual && areLeftsEqual && areTopsEqual;\r\n        }\r\n        resultWindow = {\r\n            get name() {\r\n                return _name;\r\n            },\r\n            get application() {\r\n                var appManager = appManagerGetter();\r\n                return appManager ? appManager.application(getApplicationName()) : undefined;\r\n            },\r\n            get hostInstance() {\r\n                return executor.hostInstance;\r\n            },\r\n            get agmInstance() {\r\n                var _this = this;\r\n                if (typeof window !== \"undefined\" && window.glue42gd) {\r\n                    return agm.servers().find(function (s) { return s.windowId === _this.id; });\r\n                }\r\n                var appName = getApplicationName();\r\n                return appName ? { application: appName } : undefined;\r\n            },\r\n            get url() {\r\n                return _url;\r\n            },\r\n            id: id,\r\n            get title() {\r\n                return _title;\r\n            },\r\n            get windowStyleAttributes() {\r\n                return _settings;\r\n            },\r\n            get settings() {\r\n                return _settings;\r\n            },\r\n            get tabGroupId() {\r\n                return _mode.toLowerCase() === \"tab\" ? _tabGroupId : undefined;\r\n            },\r\n            get frameButtons() {\r\n                return _frameButtons;\r\n            },\r\n            get mode() {\r\n                return _mode;\r\n            },\r\n            get state() {\r\n                return _windowState;\r\n            },\r\n            get isCollapsed() {\r\n                return isCollapsed;\r\n            },\r\n            get isVisible() {\r\n                return _isVisible;\r\n            },\r\n            get isLocked() {\r\n                return _isLocked;\r\n            },\r\n            get context() {\r\n                return _context;\r\n            },\r\n            get bounds() {\r\n                return _bounds;\r\n            },\r\n            get minHeight() {\r\n                return _settings.minHeight;\r\n            },\r\n            get maxHeight() {\r\n                return _settings.maxHeight;\r\n            },\r\n            get minWidth() {\r\n                return _settings.minWidth;\r\n            },\r\n            get maxWidth() {\r\n                return _settings.maxWidth;\r\n            },\r\n            get isFocused() {\r\n                return _focus;\r\n            },\r\n            get frameColor() {\r\n                return _frameColor;\r\n            },\r\n            get opened() {\r\n                return resultWindow.id !== undefined;\r\n            },\r\n            get group() {\r\n                return _group;\r\n            },\r\n            get groupId() {\r\n                return _groupId;\r\n            },\r\n            get isSticky() {\r\n                return _isSticky;\r\n            },\r\n            get topNeighbours() {\r\n                return getNeighboursByDirection(\"top\");\r\n            },\r\n            get leftNeighbours() {\r\n                return getNeighboursByDirection(\"left\");\r\n            },\r\n            get rightNeighbours() {\r\n                return getNeighboursByDirection(\"right\");\r\n            },\r\n            get bottomNeighbours() {\r\n                return getNeighboursByDirection(\"bottom\");\r\n            },\r\n            get isGroupHeaderVisible() {\r\n                return _isGroupHeaderVisible;\r\n            },\r\n            get activityId() {\r\n                if (_context._t42) {\r\n                    return _context._t42.activityId;\r\n                }\r\n                var info = getWindowInfo();\r\n                if (!info) {\r\n                    return undefined;\r\n                }\r\n                return info.activityId;\r\n            },\r\n            get activityWindowId() {\r\n                if (_context._t42) {\r\n                    return _context._t42.activityWindowId;\r\n                }\r\n                var info = getWindowInfo();\r\n                if (!info) {\r\n                    return undefined;\r\n                }\r\n                return info.activityWindowId;\r\n            },\r\n            get windowType() {\r\n                return options.windowType || \"electron\";\r\n            },\r\n            get zoomFactor() {\r\n                return _zoomFactor;\r\n            },\r\n            get screen() {\r\n                if (typeof window !== \"undefined\" && window.glue42gd) {\r\n                    return Utils$1.getMonitor(resultWindow.bounds, window.glue42gd.monitors);\r\n                }\r\n                return undefined;\r\n            },\r\n            get placementSettings() {\r\n                return Object.assign({}, _placementSettings);\r\n            },\r\n            maximize: maximize,\r\n            restore: restore,\r\n            minimize: minimize,\r\n            maximizeRestore: maximizeRestore,\r\n            collapse: collapse,\r\n            expand: expand,\r\n            toggleCollapse: toggleCollapse,\r\n            focus: focus,\r\n            activate: activate,\r\n            moveResize: moveResize,\r\n            setTitle: setTitle,\r\n            setStyle: setStyle,\r\n            setOnTop: setOnTop,\r\n            resetButtons: resetButtons,\r\n            setSizeConstraints: setSizeConstraints,\r\n            navigate: navigate,\r\n            addFrameButton: addFrameButton,\r\n            removeFrameButton: removeFrameButton,\r\n            setVisible: setVisible,\r\n            show: function () { return setVisible(true); },\r\n            hide: function () { return setVisible(false); },\r\n            center: function (screen) { return moveResize(Utils$1.getDisplayCenterOfScreen(resultWindow.bounds, screen || resultWindow.screen)); },\r\n            close: close,\r\n            snap: snap,\r\n            showLoader: showLoader,\r\n            hideLoader: hideLoader,\r\n            updateContext: updateContext,\r\n            lock: lock,\r\n            unlock: unlock,\r\n            getIcon: getIcon,\r\n            setIcon: setIcon,\r\n            setFrameColor: setFrameColor,\r\n            setTabTooltip: setTabTooltip,\r\n            attachTab: attachTab,\r\n            detachTab: detachTab,\r\n            setTabHeaderVisible: setTabHeaderVisible,\r\n            showPopup: showPopup,\r\n            createFlydown: createFlydown,\r\n            setModalState: setModalState,\r\n            setZoomFactor: setZoomFactor,\r\n            zoomIn: zoomIn,\r\n            zoomOut: zoomOut,\r\n            showDevTools: showDevTools,\r\n            capture: capture,\r\n            flash: flash,\r\n            setSticky: setSticky,\r\n            print: print,\r\n            printToPDF: printToPDF,\r\n            place: place,\r\n            ungroup: ungroup,\r\n            onClose: onClose,\r\n            onUrlChanged: onUrlChanged,\r\n            onTitleChanged: onTitleChanged,\r\n            onFrameButtonAdded: onFrameButtonAdded,\r\n            onFrameButtonRemoved: onFrameButtonRemoved,\r\n            onFrameButtonClicked: onFrameButtonClicked,\r\n            onCollapsed: onCollapsed,\r\n            onExpanded: onExpanded,\r\n            onMinimized: onMinimized,\r\n            onMaximized: onMaximized,\r\n            onNormal: onNormal,\r\n            onAttached: onAttached,\r\n            onDetached: onDetached,\r\n            onVisibilityChanged: onVisibilityChanged,\r\n            onContextUpdated: onContextUpdated,\r\n            onLockingChanged: onLockingChanged,\r\n            onBoundsChanged: onBoundsChanged,\r\n            onFrameColorChanged: onFrameColorChanged,\r\n            onFocusChanged: onFocusChanged,\r\n            onStickyChanged: onStickyChanged,\r\n            onGroupChanged: onGroupChanged,\r\n            onWindowAttached: onWindowAttached,\r\n            onWindowDetached: onWindowDetached,\r\n            onTabSelectionChanged: onTabSelectionChanged,\r\n            onTabHeaderVisibilityChanged: onTabHeaderVisibilityChanged,\r\n            onClosing: onClosing,\r\n            onRefreshing: onRefreshing,\r\n            onZoomFactorChanged: onZoomFactorChanged,\r\n            onPlacementSettingsChanged: onPlacementSettingsChanged,\r\n            onNeighboursChanged: onNeighboursChanged,\r\n            get tabs() {\r\n                return getAllTabs();\r\n            },\r\n            get isTabHeaderVisible() {\r\n                return _isTabHeaderVisible;\r\n            },\r\n            get isTabSelected() {\r\n                return _isTabSelected;\r\n            },\r\n            getURL: function () {\r\n                return Promise.resolve(_url);\r\n            },\r\n            getTitle: function () {\r\n                return Promise.resolve(_title);\r\n            },\r\n            getBounds: function () {\r\n                return Promise.resolve(_bounds);\r\n            },\r\n            getContext: function () {\r\n                return Promise.resolve(_context);\r\n            },\r\n            setContext: function (context) {\r\n                return updateContext(context);\r\n            },\r\n            resizeTo: function (width, height) {\r\n                return moveResize({ width: width, height: height });\r\n            },\r\n            moveTo: function (top, left) {\r\n                return moveResize({ top: top, left: left });\r\n            },\r\n            getParentWindow: function () {\r\n                var _a;\r\n                return __awaiter(this, void 0, void 0, function () {\r\n                    var myParentId;\r\n                    return __generator(this, function (_b) {\r\n                        myParentId = _settings.parentInstanceId;\r\n                        if (!myParentId) {\r\n                            return [2, undefined];\r\n                        }\r\n                        return [2, (_a = windowStore.list[myParentId]) === null || _a === void 0 ? void 0 : _a.API];\r\n                    });\r\n                });\r\n            },\r\n            getChildWindows: function () {\r\n                return __awaiter(this, void 0, void 0, function () {\r\n                    return __generator(this, function (_a) {\r\n                        return [2, Object.keys(windowStore.list)\r\n                                .map(function (key) { return windowStore.list[key].API; })\r\n                                .filter(function (w) {\r\n                                var parentId = w.settings.parentInstanceId;\r\n                                return parentId === id;\r\n                            })];\r\n                    });\r\n                });\r\n            }\r\n        };\r\n        var events = {\r\n            handleWindowClose: handleWindowClose,\r\n            handleWindowChangeState: handleWindowChangeState,\r\n            handleTitleChanged: handleTitleChanged,\r\n            handleVisibilityChanged: handleVisibilityChanged,\r\n            handleUrlChanged: handleUrlChanged,\r\n            handleWindowSettingsChanged: handleWindowSettingsChanged,\r\n            handleContextUpdated: handleContextUpdated,\r\n            handleFrameIsLockedChanged: handleFrameIsLockedChanged,\r\n            handleBoundsChanged: handleBoundsChanged,\r\n            handleFocusChanged: handleFocusChanged,\r\n            handleFrameButtonAdded: handleFrameButtonAdded,\r\n            handleFrameButtonRemoved: handleFrameButtonRemoved,\r\n            handleFrameButtonClicked: handleFrameButtonClicked,\r\n            handleFrameColorChanged: handleFrameColorChanged,\r\n            handleFrameAttached: handleFrameAttached,\r\n            handleFrameSelectionChanged: handleFrameSelectionChanged,\r\n            handleCompositionChanged: handleCompositionChanged,\r\n            handleGroupHeaderVisibilityChanged: handleGroupHeaderVisibilityChanged,\r\n            handleTabHeaderVisibilityChanged: handleTabHeaderVisibilityChanged,\r\n            handleGroupChanged: handleGroupChanged,\r\n            handleGroupAssociation: handleGroupAssociation,\r\n            handleAttached: handleAttached,\r\n            handleDetached: handleDetached,\r\n            handleWindowAttached: handleWindowAttached,\r\n            handleWindowDetached: handleWindowDetached,\r\n            handleZoomFactorChanged: handleZoomFactorChanged,\r\n            handleIsStickyChanged: handleIsStickyChanged,\r\n            handlePlacementSettingsChanged: handlePlacementSettingsChanged,\r\n        };\r\n        return {\r\n            API: resultWindow,\r\n            Events: events,\r\n            Registry: _registry\r\n        };\r\n    });\n\n    var GDExecutor = (function () {\r\n        function GDExecutor() {\r\n            this._registry = lib$2();\r\n        }\r\n        Object.defineProperty(GDExecutor.prototype, \"hostInstance\", {\r\n            get: function () {\r\n                return this.agmTarget;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GDExecutor.prototype.init = function (agm, instance) {\r\n            this.agm = agm;\r\n            this.agmTarget = instance;\r\n        };\r\n        GDExecutor.prototype.close = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"close\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.navigate = function (resultWindow, newUrl) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"navigate\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        url: newUrl\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setStyle = function (resultWindow, style) {\r\n            var _a;\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var stylePromises, wait, toBeVisible, toolTip, maxWidth, maxHeight, minWidth, minHeight, allowClose, allowCollapse, allowLockUnlock, allowMaximize, allowMinimize;\r\n                return __generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            stylePromises = [];\r\n                            wait = function (promise) { return stylePromises.push(promise); };\r\n                            if (style.focus !== undefined && !resultWindow.isFocused) {\r\n                                wait(resultWindow.focus());\r\n                            }\r\n                            if (style.hidden !== undefined) {\r\n                                toBeVisible = !style.hidden;\r\n                                wait(resultWindow.setVisible(toBeVisible));\r\n                            }\r\n                            if (style.onTop !== undefined) {\r\n                                wait(resultWindow.setOnTop(style.onTop));\r\n                            }\r\n                            if (style.tabTooltip !== undefined || style.tabToolTip !== undefined) {\r\n                                toolTip = (_a = style.tabTooltip, (_a !== null && _a !== void 0 ? _a : style.tabToolTip));\r\n                                wait(resultWindow.setTabTooltip(toolTip));\r\n                            }\r\n                            maxWidth = style.maxWidth, maxHeight = style.maxHeight, minWidth = style.minWidth, minHeight = style.minHeight, allowClose = style.allowClose, allowCollapse = style.allowCollapse, allowLockUnlock = style.allowLockUnlock, allowMaximize = style.allowMaximize, allowMinimize = style.allowMinimize;\r\n                            wait(resultWindow.setSizeConstraints({ maxWidth: maxWidth, maxHeight: maxHeight, minWidth: minWidth, minHeight: minHeight }));\r\n                            wait(resultWindow.resetButtons({ allowClose: allowClose, allowCollapse: allowCollapse, allowLockUnlock: allowLockUnlock, allowMaximize: allowMaximize, allowMinimize: allowMinimize }));\r\n                            return [4, Promise.all(stylePromises)];\r\n                        case 1:\r\n                            _b.sent();\r\n                            return [2, resultWindow];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setSizeConstraints = function (resultWindow, constraints) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"setSizeConstraints\", {\r\n                    windowId: resultWindow.id,\r\n                    options: constraints\r\n                }).then(function () {\r\n                    resolve(resultWindow);\r\n                }).catch(reject);\r\n            });\r\n        };\r\n        GDExecutor.prototype.setTabTooltip = function (w, tabToolTip) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"setTabTooltip\", { windowId: w.id, options: { tabToolTip: tabToolTip } })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, w];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.resetButtons = function (resultWindow, buttonsConfig) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"resetButtons\", {\r\n                    windowId: resultWindow.id,\r\n                    options: buttonsConfig\r\n                }).then(function () {\r\n                    resolve(resultWindow);\r\n                }).catch(reject);\r\n            });\r\n        };\r\n        GDExecutor.prototype.setOnTop = function (resultWindow, onTop) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"setOnTop\", {\r\n                    windowId: resultWindow.id,\r\n                    options: { onTop: onTop }\r\n                }).then(function () {\r\n                    resolve(resultWindow);\r\n                }).catch(reject);\r\n            });\r\n        };\r\n        GDExecutor.prototype.setTitle = function (resultWindow, newTitle) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var options = {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        title: newTitle\r\n                    }\r\n                };\r\n                _this.execute(\"setTitle\", options)\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setSticky = function (resultWindow, isSticky) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var options = {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        isSticky: isSticky\r\n                    }\r\n                };\r\n                _this.execute(\"setSticky\", options)\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.moveResize = function (resultWindow, dimensions) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"moveResize\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        bounds: dimensions\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.addFrameButton = function (resultWindow, buttonInfo) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"addButton\", {\r\n                    windowId: resultWindow.id,\r\n                    options: buttonInfo\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.removeFrameButton = function (resultWindow, buttonId) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"removeButton\", {\r\n                    windowId: resultWindow.id,\r\n                    options: buttonId\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.activate = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"activate\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.focus = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"focus\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.maximizeRestore = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"maximizeRestore\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.maximize = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"maximize\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.restore = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"restore\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.minimize = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"minimize\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.collapse = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"collapse\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.expand = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"expand\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.toggleCollapse = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"toggleCollapse\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.snap = function (resultWindow, target, direction) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var sourceWindowId = resultWindow.id;\r\n                var targetWindowId;\r\n                var errorMessage = \"Invalid target parameter - should be an object with property id or a string. Invoked for source window id:\" +\r\n                    resultWindow.id;\r\n                if (!target) {\r\n                    reject(errorMessage);\r\n                    return;\r\n                }\r\n                if (typeof target === \"string\") {\r\n                    targetWindowId = target;\r\n                }\r\n                else if (typeof target.id !== \"undefined\") {\r\n                    targetWindowId = target.id;\r\n                }\r\n                else {\r\n                    reject(errorMessage);\r\n                    return;\r\n                }\r\n                var args = {\r\n                    targetWindowId: targetWindowId\r\n                };\r\n                if (direction) {\r\n                    args.snappingEdge = direction;\r\n                }\r\n                _this.execute(\"snap\", {\r\n                    windowId: resultWindow.id,\r\n                    options: args\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.attachTab = function (resultWindow, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"attachTab\", {\r\n                    windowId: resultWindow.id,\r\n                    options: options\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.detachTab = function (resultWindow, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"detachTab\", {\r\n                    windowId: resultWindow.id,\r\n                    options: options\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setVisible = function (resultWindow, toBeVisible) {\r\n            var _this = this;\r\n            if (toBeVisible === void 0) { toBeVisible = true; }\r\n            return new Promise(function (resolve, reject) {\r\n                var command;\r\n                if (toBeVisible) {\r\n                    command = \"show\";\r\n                }\r\n                else {\r\n                    command = \"hide\";\r\n                }\r\n                _this.execute(command, { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.showLoader = function (resultWindow, loader) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"showLoadingAnimation\", { windowId: resultWindow.id, options: loader })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.hideLoader = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"hideLoadingAnimation\", { windowId: resultWindow.id })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.updateContext = function (resultWindow, context) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"updateContext\", {\r\n                    windowId: resultWindow.id,\r\n                    context: context,\r\n                    replace: Object.keys(resultWindow.context).length > 0 ? false : true\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.lock = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"lockUnlock\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        lock: true\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.unlock = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"lockUnlock\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        lock: false\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.getIcon = function (resultWindow) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"getIcon\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {}\r\n                })\r\n                    .then(function (result) {\r\n                    resolve(result.icon);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setIcon = function (resultWindow, base64Image) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"setIcon\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        dataURL: base64Image\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setFrameColor = function (resultWindow, frameColor) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"setFrameColor\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        frameColor: frameColor\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setTabHeaderVisible = function (resultWindow, toBeTabHeaderVisible) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.execute(\"setTabHeaderVisible\", {\r\n                    windowId: resultWindow.id,\r\n                    options: {\r\n                        toShow: toBeTabHeaderVisible\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.showPopup = function (targetWindow, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var optionsCopy, reformatedOptions;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!options) {\r\n                                return [2, Promise.reject(\"The options object is not valid!\")];\r\n                            }\r\n                            optionsCopy = __assign({}, options);\r\n                            if (!optionsCopy.targetLocation) {\r\n                                optionsCopy.targetLocation = \"bottom\";\r\n                            }\r\n                            reformatedOptions = __assign(__assign({}, optionsCopy), { popupBounds: optionsCopy.size, targetId: targetWindow.id, popupId: optionsCopy.windowId });\r\n                            return [4, this.execute(\"showPopupWindow\", {\r\n                                    windowId: targetWindow.id,\r\n                                    options: reformatedOptions\r\n                                })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, targetWindow];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.createFlydown = function (windowId, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var optionsCopy, fullOptions;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    if (!options) {\r\n                        return [2, Promise.reject(\"The options object is not valid!\")];\r\n                    }\r\n                    optionsCopy = __assign({}, options);\r\n                    if (!optionsCopy.horizontalOffset) {\r\n                        optionsCopy.horizontalOffset = 0;\r\n                    }\r\n                    if (!optionsCopy.verticalOffset) {\r\n                        optionsCopy.verticalOffset = 0;\r\n                    }\r\n                    fullOptions = this.reformatFlydownOptions(windowId, optionsCopy);\r\n                    return [2, this.execute(\"setFlydownArea\", { windowId: windowId, options: fullOptions }).then(function () {\r\n                            var zoneIds = fullOptions.zones.map(function (z) { return z.id; });\r\n                            fullOptions.zones.forEach(function (z) {\r\n                                var callback = typeof (z.flydownSize) === \"function\" ?\r\n                                    z.flydownSize : function () { return z.flydownSize; };\r\n                                if (options.size instanceof Function && z.flydownSize) {\r\n                                    callback = function (data, cancel) { return __awaiter(_this, void 0, void 0, function () {\r\n                                        var result;\r\n                                        return __generator(this, function (_a) {\r\n                                            switch (_a.label) {\r\n                                                case 0:\r\n                                                    if (!(options.size instanceof Function)) return [3, 2];\r\n                                                    return [4, options.size(data, cancel)];\r\n                                                case 1:\r\n                                                    result = _a.sent();\r\n                                                    _a.label = 2;\r\n                                                case 2:\r\n                                                    if (!(z.flydownSize instanceof Function && z.flydownSize !== options.size)) return [3, 4];\r\n                                                    return [4, z.flydownSize(data, cancel)];\r\n                                                case 3: return [2, (_a.sent()) || result];\r\n                                                case 4: return [2, result || z.flydownSize];\r\n                                            }\r\n                                        });\r\n                                    }); };\r\n                                }\r\n                                _this._registry.clearKey(fullOptions.targetId + \"_\" + z.id);\r\n                                _this._registry.add(fullOptions.targetId + \"_\" + z.id, callback);\r\n                            });\r\n                            return {\r\n                                destroy: function () { return _this.clearFlydownArea(fullOptions.targetId, zoneIds); },\r\n                                options: optionsCopy\r\n                            };\r\n                        })];\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setModalState = function (windowId, isModal) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2, this.execute(\"setModalState\", { windowId: windowId, options: { isModal: isModal } })];\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.handleFlydownBoundsRequested = function (targetId, data) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var cancelCallback, callbackData, responses, defaultResponse, response, responseOptions;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            cancelCallback = function () { return data.cancel = true; };\r\n                            callbackData = {\r\n                                zoneId: data.flydownId,\r\n                                flydownWindowBounds: data.flydownWindowBounds,\r\n                                flydownWindowId: data.flydownWindowId,\r\n                            };\r\n                            return [4, Promise.all(this._registry.execute(targetId + \"_\" + data.flydownId, callbackData, cancelCallback))];\r\n                        case 1:\r\n                            responses = _a.sent();\r\n                            if (responses.length === 1) {\r\n                                defaultResponse = { height: 0, width: 0, top: 0, left: 0 };\r\n                                response = typeof (responses[0]) === \"object\" && !Array.isArray(responses[0]) ? responses[0] : defaultResponse;\r\n                                responseOptions = __assign(__assign({}, data), { flydownWindowBounds: response });\r\n                                return [2, responseOptions];\r\n                            }\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.zoomIn = function (window) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"zoomIn\", {\r\n                                windowId: window.id,\r\n                            })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, window];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.zoomOut = function (window) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"zoomOut\", {\r\n                                windowId: window.id,\r\n                            })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, window];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setZoomFactor = function (window, zoomFactor) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"setZoomFactor\", {\r\n                                windowId: window.id,\r\n                                options: {\r\n                                    zoomFactor: zoomFactor\r\n                                }\r\n                            })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, window];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.showDevTools = function (window) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"showDevTools\", {\r\n                                windowId: window.id,\r\n                            })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, window];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.capture = function (window, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var base64screenshot;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"captureScreenshot\", { windowId: window.id, options: __assign({}, options) })];\r\n                        case 1:\r\n                            base64screenshot = (_a.sent()).data;\r\n                            return [2, base64screenshot];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.captureGroup = function (windowIds, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var base64screenshot;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"captureGroupScreenshot\", { windowId: windowIds[0], options: __assign({ groupWindowIds: windowIds }, options) })];\r\n                        case 1:\r\n                            base64screenshot = (_a.sent()).data;\r\n                            return [2, base64screenshot];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.flash = function (resultWindow, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"flash\", { windowId: resultWindow.id, options: __assign({}, options) })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, resultWindow];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.configure = function (windowId, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2, this.execute(\"configure\", { windowId: windowId, options: __assign({}, options) })];\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.print = function (resultWindow, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"print\", { windowId: resultWindow.id, options: __assign({}, options) })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, resultWindow];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.printToPDF = function (resultWindow, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var filePath;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.execute(\"printToPDF\", { windowId: resultWindow.id, options: __assign({}, options) })];\r\n                        case 1:\r\n                            filePath = (_a.sent()).filePath;\r\n                            return [2, filePath];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.place = function (window, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var copy;\r\n                return __generator(this, function (_a) {\r\n                    copy = __assign({}, options);\r\n                    if (copy.display) {\r\n                        copy.display = copy.display.index + 1;\r\n                    }\r\n                    return [2, this.execute(\"place\", { windowId: window.id, options: __assign({}, copy) })];\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.execute = function (command, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var args = __assign(__assign({}, options), { command: command });\r\n                _this.agm\r\n                    .invoke(\"T42.Wnd.Execute\", args, _this.agmTarget)\r\n                    .then(function (i) {\r\n                    if (i.returned && i.returned.errorMsg) {\r\n                        reject(i);\r\n                    }\r\n                    else {\r\n                        resolve(i.returned);\r\n                    }\r\n                })\r\n                    .catch(function (i) {\r\n                    reject(i);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.setGroupHeaderVisible = function (windowId, toShow) {\r\n            return this.execute(\"setGroupHeaderVisibility\", {\r\n                windowId: windowId,\r\n                options: {\r\n                    toShow: toShow\r\n                }\r\n            });\r\n        };\r\n        GDExecutor.prototype.getGroupTitle = function (windowId) {\r\n            return this.execute(\"getGroupTitle\", {\r\n                windowId: windowId,\r\n                options: {}\r\n            }).then(function (r) { return r.title; });\r\n        };\r\n        GDExecutor.prototype.setGroupTitle = function (windowId, title) {\r\n            return this.execute(\"setGroupTitle\", {\r\n                windowId: windowId,\r\n                options: {\r\n                    title: title\r\n                }\r\n            });\r\n        };\r\n        GDExecutor.prototype.onClosing = function (callback, id) {\r\n            var glue42gd = typeof window !== \"undefined\" && window.glue42gd;\r\n            if (glue42gd) {\r\n                return glue42gd.addCloseHandler(callback, id);\r\n            }\r\n        };\r\n        GDExecutor.prototype.onRefreshing = function (callback, id) {\r\n            var glue42gd = typeof window !== \"undefined\" && window.glue42gd;\r\n            if (glue42gd) {\r\n                return glue42gd.addRefreshHandler(callback, id);\r\n            }\r\n        };\r\n        GDExecutor.prototype.ungroup = function (resultWindow, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var args = {\r\n                    windowId: resultWindow.id,\r\n                    options: options\r\n                };\r\n                _this.execute(\"ungroup\", args)\r\n                    .then(function () {\r\n                    resolve(resultWindow);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        };\r\n        GDExecutor.prototype.reformatFlydownOptions = function (windowId, options) {\r\n            var assignGeneralIfUnassigned = function (zone, prop) {\r\n                if (options[prop] && (zone[prop] === undefined || zone[prop] === null)) {\r\n                    var valueFromOptions = options[prop];\r\n                    zone[prop] = valueFromOptions;\r\n                }\r\n            };\r\n            var zones = options.zones.map(function (z) {\r\n                assignGeneralIfUnassigned(z, \"windowId\");\r\n                assignGeneralIfUnassigned(z, \"targetLocation\");\r\n                if (options.size && (z.flydownSize === undefined || z.flydownSize === null)) {\r\n                    z.flydownSize = options.size;\r\n                }\r\n                z.flydownBounds = z.flydownSize;\r\n                z.flydownId = z.windowId;\r\n                if (!z.targetLocation) {\r\n                    z.targetLocation = \"bottom\";\r\n                }\r\n                return z;\r\n            });\r\n            return __assign(__assign({}, options), { zones: zones, targetId: windowId, flydownBounds: options.size, flydownActiveArea: options.activeArea });\r\n        };\r\n        GDExecutor.prototype.clearFlydownArea = function (windowId, areaIds) {\r\n            var _this = this;\r\n            return this.execute(\"clearFlydownWindowArea\", {\r\n                windowId: windowId,\r\n                options: {}\r\n            }).then(function () {\r\n                areaIds.forEach(function (id) {\r\n                    _this._registry.clearKey(windowId + \"_\" + id);\r\n                });\r\n            });\r\n        };\r\n        return GDExecutor;\r\n    }());\r\n    var executor = new GDExecutor();\n\n    function getWindowsByTabGroupId(windowId, tabGroupId) {\r\n        var windows = windowStore.list;\r\n        return Object.keys(windows).reduce(function (memo, id) {\r\n            var win = windows[id];\r\n            if (win.API.tabGroupId === tabGroupId && win.API.id !== windowId) {\r\n                memo[id] = win;\r\n            }\r\n            return memo;\r\n        }, {});\r\n    }\n\n    var GDEnvironment = (function () {\r\n        function GDEnvironment(agm, logger, appManagerGetter, displayAPIGetter, instance, wndId) {\r\n            this._registry = lib$2();\r\n            this._waitTimeout = 10000;\r\n            this._agm = agm;\r\n            this._logger = logger.subLogger(\"gd-env\");\r\n            this._agmInstance = this.normalizeInstance(instance);\r\n            this._windowId = wndId;\r\n            this._appManagerGetter = appManagerGetter;\r\n            this._displayAPIGetter = displayAPIGetter;\r\n        }\r\n        GDEnvironment.prototype.init = function () {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (typeof _this._agmInstance === \"undefined\") {\r\n                    _this._agmInstance = \"best\";\r\n                }\r\n                _this._agm.registerAsync(\"T42.Wnd.OnEventWithResponse\", function (args, caller, success, err) {\r\n                    _this.respondToEvent(args).then(success).catch(err);\r\n                });\r\n                var streamPromise = new Promise(function (streamResolve, streamReject) {\r\n                    _this._agm.subscribe(\"T42.Wnd.OnEvent\", {\r\n                        waitTimeoutMs: _this._waitTimeout,\r\n                        target: _this._agmInstance,\r\n                        onData: function (streamData) {\r\n                            _this.updateWindow(streamData.data, resolve);\r\n                        },\r\n                        onConnected: function (instance) {\r\n                            _this._agmInstance = _this.normalizeInstance(instance);\r\n                            executor.init(_this._agm, _this._agmInstance);\r\n                        }\r\n                    }).catch(function (err) {\r\n                        reject(\"Can not subscribe for stream T42.Wnd.OnEvent. Err: \" + err);\r\n                    });\r\n                });\r\n            });\r\n        };\r\n        Object.defineProperty(GDEnvironment.prototype, \"executor\", {\r\n            get: function () {\r\n                return executor;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GDEnvironment.prototype.open = function (name, url, options, success, error) {\r\n            options = options || {};\r\n            var copyOptions = __assign({}, options);\r\n            if (name === undefined) {\r\n                error({ message: \"The name is undefined\" });\r\n                return;\r\n            }\r\n            if (copyOptions.relativeTo !== undefined && typeof copyOptions.relativeTo !== \"string\") {\r\n                copyOptions.relativeTo = copyOptions.relativeTo.id || \"\";\r\n            }\r\n            copyOptions.name = name;\r\n            copyOptions.url = url;\r\n            copyOptions.windowState = options.windowState || options.state;\r\n            delete copyOptions.state;\r\n            this._agm.invoke(\"T42.Wnd.Create\", copyOptions, this._agmInstance)\r\n                .then(function (message) {\r\n                if (message.returned !== undefined) {\r\n                    var id = message.returned.id;\r\n                    success(id);\r\n                }\r\n                else {\r\n                    error({ message: \"failed to execute T42.Wnd.Create - unknown reason\" });\r\n                }\r\n            })\r\n                .catch(error);\r\n        };\r\n        GDEnvironment.prototype.createFlydown = function (windowId, options) {\r\n            return this.executor.createFlydown(windowId, options);\r\n        };\r\n        GDEnvironment.prototype.showPopup = function (windowId, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var window;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            window = windowStore.get(windowId);\r\n                            return [4, this.executor.showPopup(window.API, options)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GDEnvironment.prototype.tabAttached = function (callback) {\r\n            return this._registry.add(\"tab-attached\", callback);\r\n        };\r\n        GDEnvironment.prototype.tabDetached = function (callback) {\r\n            return this._registry.add(\"tab-detached\", callback);\r\n        };\r\n        GDEnvironment.prototype.onWindowFrameColorChanged = function (callback) {\r\n            return this._registry.add(\"frame-color-changed\", callback);\r\n        };\r\n        GDEnvironment.prototype.onEvent = function (callback) {\r\n            return this._registry.add(\"window-event\", callback);\r\n        };\r\n        GDEnvironment.prototype.my = function () {\r\n            return this._windowId;\r\n        };\r\n        GDEnvironment.prototype.execute = function (command, windowId, options) {\r\n            return this._agm.invoke(\"T42.Wnd.Execute\", {\r\n                command: command,\r\n                options: options,\r\n                windowId: windowId,\r\n            });\r\n        };\r\n        GDEnvironment.prototype.setGroupHeaderVisible = function (windowId, toShow) {\r\n            return this._agm.invoke(\"T42.Wnd.SetGroupHeaderVisible\", {\r\n                windowId: windowId,\r\n                toShow: toShow,\r\n            }, this._agmInstance);\r\n        };\r\n        GDEnvironment.prototype.onCompositionChanged = function (callback) {\r\n            return this._registry.add(\"composition-changed\", callback);\r\n        };\r\n        GDEnvironment.prototype.onGroupHeaderVisibilityChanged = function (callback) {\r\n            return this._registry.add(\"group-header-changed\", callback);\r\n        };\r\n        GDEnvironment.prototype.onWindowGotFocus = function (callback) {\r\n            return this._registry.add(\"got-focus\", callback);\r\n        };\r\n        GDEnvironment.prototype.onWindowLostFocus = function (callback) {\r\n            return this._registry.add(\"lost-focus\", callback);\r\n        };\r\n        GDEnvironment.prototype.normalizeInstance = function (instance) {\r\n            if (!instance) {\r\n                return undefined;\r\n            }\r\n            return {\r\n                application: instance.application,\r\n                machine: instance.machine,\r\n                user: instance.user,\r\n            };\r\n        };\r\n        GDEnvironment.prototype.respondToEvent = function (args) {\r\n            if (args.type === \"ShowFlydownBoundsRequested\") {\r\n                return this.executor.handleFlydownBoundsRequested(args.data.windowId, args.data);\r\n            }\r\n            return Promise.reject(\"There isn't a handler for \" + args.type);\r\n        };\r\n        GDEnvironment.prototype.updateWindow = function (windowInfo, readyResolve) {\r\n            var _this = this;\r\n            var extendedStreamEvent = this.getExtendedStreamEvent(windowInfo);\r\n            if (windowInfo.type === \"Snapshot\") {\r\n                var windowInfoFullInfoEvent = windowInfo;\r\n                windowInfoFullInfoEvent.windows.forEach(function (w) {\r\n                    var win = _this.createWindow(w.id, w);\r\n                    windowStore.markReadyToShow(win.API.id);\r\n                    _this._registry.execute(\"window-event\", extendedStreamEvent);\r\n                });\r\n                readyResolve(this);\r\n                return;\r\n            }\r\n            if (windowInfo.type === \"Created\") {\r\n                var windowInfoCreatedEvent = windowInfo;\r\n                var win = this.createWindow(windowInfoCreatedEvent.windowId, windowInfoCreatedEvent.data || {});\r\n                windowStore.setReadyState(win.API.id);\r\n                this._registry.execute(\"window-event\", extendedStreamEvent);\r\n                return;\r\n            }\r\n            var windowObjectAndEvents = windowStore.get(windowInfo.windowId);\r\n            if (!windowObjectAndEvents) {\r\n                this._logger.error(\"received update for unknown window. Stream:', \" + JSON.stringify(windowInfo, null, 4));\r\n                return;\r\n            }\r\n            var theWindow = windowObjectAndEvents.API;\r\n            var theWindowEvents = windowObjectAndEvents.Events;\r\n            if (windowInfo.type === \"BoundsChanged\") {\r\n                var windowInfoBoundsChangedEvent = windowInfo;\r\n                theWindowEvents.handleBoundsChanged(windowInfoBoundsChangedEvent.data);\r\n            }\r\n            if (windowInfo.type === \"UrlChanged\") {\r\n                var windowInfoUrlChangedEvent = windowInfo;\r\n                windowStore.setUrlChangedState(windowInfoUrlChangedEvent.windowId);\r\n                theWindowEvents.handleUrlChanged(windowInfoUrlChangedEvent.data);\r\n            }\r\n            if (windowInfo.type === \"TitleChanged\") {\r\n                var windowInfoTitleChanged = windowInfo;\r\n                theWindowEvents.handleTitleChanged(windowInfoTitleChanged.data);\r\n            }\r\n            if (windowInfo.type === \"IsStickyChanged\") {\r\n                var windowInfoIsStickyChangedChanged = windowInfo;\r\n                theWindowEvents.handleIsStickyChanged(windowInfoIsStickyChangedChanged.data);\r\n            }\r\n            if (windowInfo.type === \"VisibilityChanged\") {\r\n                theWindowEvents.handleVisibilityChanged(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"ContextChanged\") {\r\n                theWindowEvents.handleContextUpdated(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"StateChanged\") {\r\n                theWindowEvents.handleWindowChangeState(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"FrameColorChanged\") {\r\n                theWindowEvents.handleFrameColorChanged(windowInfo.data);\r\n                this._registry.execute(\"frame-color-changed\", theWindow);\r\n            }\r\n            if (windowInfo.type === \"CompositionChanged\") {\r\n                var windowInfoCompositionChanged = windowInfo;\r\n                theWindowEvents.handleCompositionChanged(windowInfoCompositionChanged.data.neighbors, windowInfoCompositionChanged.data.groupId);\r\n                this._registry.execute(\"composition-changed\", windowInfoCompositionChanged.data);\r\n            }\r\n            if (windowInfo.type === \"GroupHeaderVisibilityChanged\") {\r\n                var info = windowInfo;\r\n                theWindowEvents.handleGroupHeaderVisibilityChanged(info.data.groupHeaderVisible);\r\n                this._registry.execute(\"group-header-changed\", info.data);\r\n            }\r\n            if (windowInfo.type === \"FocusChanged\") {\r\n                var windowInfoFocusChanged = windowInfo;\r\n                this.focusChanged(theWindowEvents, theWindow, windowInfoFocusChanged.data);\r\n            }\r\n            if (windowInfo.type === \"WindowFrameChanged\") {\r\n                theWindowEvents.handleFrameAttached(windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\r\n                this._registry.execute(\"frame-changed\");\r\n            }\r\n            if (windowInfo.type === \"WindowFrameAdded\") {\r\n                theWindowEvents.handleAttached(windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\r\n                var winsToBeNotified_1 = getWindowsByTabGroupId(theWindow.id, windowInfo.data.frameId);\r\n                Object.keys(winsToBeNotified_1).forEach(function (id) {\r\n                    var win = winsToBeNotified_1[id];\r\n                    win.Events.handleWindowAttached(theWindow);\r\n                });\r\n                this._registry.execute(\"tab-attached\", theWindow, windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\r\n            }\r\n            if (windowInfo.type === \"WindowFrameRemoved\") {\r\n                var oldTabGroupId = theWindow.tabGroupId;\r\n                theWindowEvents.handleDetached(windowInfo.data.frameId);\r\n                var winsToBeNotified_2 = getWindowsByTabGroupId(theWindow.id, oldTabGroupId);\r\n                Object.keys(winsToBeNotified_2).forEach(function (id) {\r\n                    var win = winsToBeNotified_2[id];\r\n                    win.Events.handleWindowDetached(theWindow);\r\n                });\r\n                var un_1 = this._registry.add(\"frame-changed\", function () {\r\n                    un_1();\r\n                    _this._registry.execute(\"tab-detached\", theWindow, windowInfo.data.frameId, theWindow.tabGroupId);\r\n                });\r\n            }\r\n            if (windowInfo.type === \"TabHeaderVisibilityChanged\") {\r\n                theWindowEvents.handleTabHeaderVisibilityChanged(windowInfo.data.isTabHeaderVisible);\r\n            }\r\n            if (windowInfo.type === \"FrameSelectionChanged\") {\r\n                theWindowEvents.handleFrameSelectionChanged(windowInfo.data.newWindowId, windowInfo.data.prevWindowId);\r\n            }\r\n            if (windowInfo.type === \"ButtonClicked\") {\r\n                theWindowEvents.handleFrameButtonClicked(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"ButtonAdded\") {\r\n                theWindowEvents.handleFrameButtonAdded(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"ButtonRemoved\") {\r\n                theWindowEvents.handleFrameButtonRemoved(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"WindowZoomFactorChanged\") {\r\n                theWindowEvents.handleZoomFactorChanged(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"Closed\") {\r\n                windowStore.remove(windowObjectAndEvents);\r\n                theWindowEvents.handleWindowClose();\r\n            }\r\n            if (windowInfo.type === \"FrameIsLockedChanged\") {\r\n                theWindowEvents.handleFrameIsLockedChanged(windowInfo.data);\r\n            }\r\n            if (windowInfo.type === \"PlacementSettingsChanged\") {\r\n                theWindowEvents.handlePlacementSettingsChanged(windowInfo.data);\r\n            }\r\n            this._registry.execute(\"window-event\", extendedStreamEvent);\r\n        };\r\n        GDEnvironment.prototype.createWindow = function (windowId, options) {\r\n            var _a;\r\n            var wrapper = windowStore.get(windowId);\r\n            var windowObjAndEvents = windowFactory(windowId, this.mapToWindowConstructorOptions(options), executor, this._logger, this._appManagerGetter, this._displayAPIGetter, this._agm, (_a = wrapper) === null || _a === void 0 ? void 0 : _a.Registry);\r\n            windowStore.add(windowObjAndEvents);\r\n            return windowObjAndEvents;\r\n        };\r\n        GDEnvironment.prototype.focusChanged = function (theWindowEvents, theWindow, focus) {\r\n            theWindowEvents.handleFocusChanged(focus);\r\n            if (focus) {\r\n                this._registry.execute(\"got-focus\", theWindow);\r\n            }\r\n            else {\r\n                this._registry.execute(\"lost-focus\", theWindow);\r\n            }\r\n        };\r\n        GDEnvironment.prototype.mapToWindowConstructorOptions = function (args) {\r\n            return {\r\n                name: args.name,\r\n                context: args.context,\r\n                bounds: args.bounds,\r\n                url: args.url,\r\n                title: args.title,\r\n                isVisible: args.isVisible,\r\n                focus: args.isFocused,\r\n                state: args.state,\r\n                frameColor: args.frameColor,\r\n                groupId: args.groupId,\r\n                neighbours: args.neighbors,\r\n                isFocused: args.isFocused,\r\n                isGroupHeaderVisible: args.groupHeaderVisible,\r\n                isCollapsed: args.isCollapsed,\r\n                tabGroupId: args.frameId,\r\n                mode: args.mode,\r\n                isTabHeaderVisible: args.isTabHeaderVisible,\r\n                isTabSelected: args.isActiveTab,\r\n                settings: args.settings,\r\n                windowType: args.windowType,\r\n                zoomFactor: args.zoomFactor,\r\n                isLocked: args.isLocked,\r\n                placementSettings: args.placementSettings,\r\n                isSticky: args.isSticky\r\n            };\r\n        };\r\n        GDEnvironment.prototype.getExtendedStreamEvent = function (streamEvent) {\r\n            try {\r\n                var result = __assign({ state: streamEvent.type, windowName: windowStore.get(streamEvent.windowId).API.name }, streamEvent);\r\n                if (result.state === \"WindowFrameAdded\") {\r\n                    result.state = \"TabAttached\";\r\n                }\r\n                if (result.state === \"StateChanged\") {\r\n                    result.state = result.data.charAt(0).toUpperCase() + result.data.slice(1);\r\n                }\r\n                if (result.state === \"ButtonAdded\") {\r\n                    result.state = \"FrameButtonAdded\";\r\n                }\r\n                if (result.state === \"ButtonRemoved\") {\r\n                    result.state = \"FrameButtonRemoved\";\r\n                }\r\n                return result;\r\n            }\r\n            catch (error) {\r\n                return streamEvent;\r\n            }\r\n        };\r\n        return GDEnvironment;\r\n    }());\n\n    var envDetector = (function (agm, logger, appManagerGetter, displayAPIGetter, gdMajorVersion) {\r\n        var _logger = logger;\r\n        return new Promise(function (resolve, reject) {\r\n            if (gdMajorVersion === 2) {\r\n                _logger.trace(\"running in HC\");\r\n                throw new Error(\"GD2 not supported\");\r\n            }\r\n            else if (gdMajorVersion >= 3) {\r\n                _logger.trace(\"running in GD 3\");\r\n                var gd = new GDEnvironment(agm, _logger, appManagerGetter, displayAPIGetter, undefined, window.glue42gd.windowId);\r\n                gd.init()\r\n                    .then(resolve)\r\n                    .catch(reject);\r\n            }\r\n            else {\r\n                var gdPromise = new GDEnvironment(agm, _logger, appManagerGetter, displayAPIGetter).init();\r\n                var wait = function (ms) { return new Promise(function (res, rej) { return setTimeout(function () { rej(\"timeout waiting for streams\"); }, ms); }); };\r\n                Promise.race([gdPromise, wait(10000)])\r\n                    .then(resolve)\r\n                    .catch(reject);\r\n            }\r\n        });\r\n    });\n\n    var groupFactory = (function (id, executor) {\r\n        var _registry = lib$2();\r\n        var _windowsId = [];\r\n        function addWindow(winId) {\r\n            if (_windowsId.indexOf(winId) === -1) {\r\n                _windowsId.push(winId);\r\n                var window_1 = windowStore.get(winId);\r\n                window_1.Events.handleGroupAssociation(groupObject);\r\n                _registry.execute(\"window-added\", groupObject, window_1.API);\r\n            }\r\n        }\r\n        function removeWindow(winId) {\r\n            var index = _windowsId.indexOf(winId);\r\n            if (index !== -1) {\r\n                _windowsId.splice(index, 1);\r\n                var window_2 = _mapToWindowObject(winId);\r\n                _registry.execute(\"window-removed\", groupObject, window_2);\r\n            }\r\n        }\r\n        function find(window, success) {\r\n            if (isUndefinedOrNull(window)) {\r\n                return;\r\n            }\r\n            var winId;\r\n            if (typeof window === \"string\") {\r\n                winId = window;\r\n            }\r\n            else {\r\n                winId = window.id;\r\n            }\r\n            var index = _windowsId.indexOf(winId);\r\n            if (index !== -1) {\r\n                var mappedWindow = _mapToWindowObject(_windowsId[index]);\r\n                if (typeof success === \"function\") {\r\n                    success(mappedWindow);\r\n                }\r\n                return mappedWindow;\r\n            }\r\n        }\r\n        function windows(success) {\r\n            var mappedWindows = _mapToWindowObjects();\r\n            if (typeof success === \"function\") {\r\n                success(mappedWindows);\r\n            }\r\n            return mappedWindows;\r\n        }\r\n        function showHeader(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                Promise.all([\r\n                    executor.setGroupHeaderVisible(_windowsId[0], true),\r\n                    waitForHeaderVisibilityChanged()\r\n                ])\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(groupObject);\r\n                    }\r\n                    resolve(groupObject);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function hideHeader(success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                Promise.all([\r\n                    executor.setGroupHeaderVisible(_windowsId[0], false),\r\n                    waitForHeaderVisibilityChanged()\r\n                ])\r\n                    .then(function () {\r\n                    if (typeof success === \"function\") {\r\n                        success(groupObject);\r\n                    }\r\n                    resolve(groupObject);\r\n                })\r\n                    .catch(function (e) {\r\n                    return;\r\n                });\r\n            });\r\n        }\r\n        function getTitle() {\r\n            return executor.getGroupTitle(_windowsId[0]);\r\n        }\r\n        function setTitle(title) {\r\n            return executor.setGroupTitle(_windowsId[0], title);\r\n        }\r\n        function capture(captureOptions) {\r\n            return executor.captureGroup(_windowsId, captureOptions);\r\n        }\r\n        function waitForHeaderVisibilityChanged() {\r\n            return new Promise(function (resolve, reject) {\r\n                var unsub = onHeaderVisibilityChanged(function (group) {\r\n                    unsub();\r\n                    resolve();\r\n                });\r\n            });\r\n        }\r\n        function execute(command, options, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                executor.execute(command, options)\r\n                    .then(function (w) {\r\n                    if (typeof success === \"function\") {\r\n                        success(groupObject);\r\n                    }\r\n                    resolve(groupObject);\r\n                })\r\n                    .catch(function (e) {\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n        function handleGroupHeaderVisibilityChanged(windowInfo) {\r\n            _registry.execute(\"header-visibility-changed\", groupObject);\r\n        }\r\n        function _mapToWindowObjects() {\r\n            var winObjects = [];\r\n            _windowsId.forEach(function (winId) {\r\n                var windowObject = _mapToWindowObject(winId);\r\n                if (typeof windowObject !== \"undefined\") {\r\n                    winObjects.push(windowObject);\r\n                }\r\n            });\r\n            return winObjects;\r\n        }\r\n        function _mapToWindowObject(windowId) {\r\n            return windowStore.get(windowId) ? windowStore.get(windowId).API : undefined;\r\n        }\r\n        function _getGroupHeaderVisibility() {\r\n            var windowWithHiddenHeader = _mapToWindowObjects().find(function (w) { return !w.isGroupHeaderVisible; });\r\n            var _isGroupHeaderVisible = windowWithHiddenHeader === undefined;\r\n            return _isGroupHeaderVisible;\r\n        }\r\n        function onHeaderVisibilityChanged(callback) {\r\n            return _registry.add(\"header-visibility-changed\", callback);\r\n        }\r\n        function onWindowAdded(callback) {\r\n            return _registry.add(\"window-added\", callback);\r\n        }\r\n        function onWindowRemoved(callback) {\r\n            return _registry.add(\"window-removed\", callback);\r\n        }\r\n        var groupObject = {\r\n            id: id,\r\n            get windows() {\r\n                return windows();\r\n            },\r\n            find: find,\r\n            get isHeaderVisible() {\r\n                return _getGroupHeaderVisibility();\r\n            },\r\n            showHeader: showHeader,\r\n            hideHeader: hideHeader,\r\n            getTitle: getTitle,\r\n            setTitle: setTitle,\r\n            capture: capture,\r\n            maximize: function (success, error) {\r\n                return execute(\"maximizeGroup\", { windowId: _windowsId[0] }, success);\r\n            },\r\n            restore: function (success, error) {\r\n                return execute(\"restoreGroup\", { windowId: _windowsId[0] }, success);\r\n            },\r\n            onHeaderVisibilityChanged: onHeaderVisibilityChanged,\r\n            onWindowAdded: onWindowAdded,\r\n            onWindowRemoved: onWindowRemoved,\r\n        };\r\n        var internal = {\r\n            addWindow: addWindow,\r\n            removeWindow: removeWindow,\r\n            handleGroupHeaderVisibilityChanged: handleGroupHeaderVisibilityChanged,\r\n        };\r\n        return {\r\n            groupAPI: groupObject,\r\n            groupInternal: internal,\r\n        };\r\n    });\n\n    var groupsFactory = (function (environment, logger) {\r\n        var _logger = logger.subLogger(\"groups\");\r\n        var _registry = lib$2();\r\n        var _groups = {};\r\n        var heardForWindowsCounter = -1;\r\n        var windows = windowStore.list;\r\n        Object.keys(windows).forEach(function (k) {\r\n            addNewWindow(windows[k]);\r\n        });\r\n        environment.onCompositionChanged(function (windowInfo) {\r\n            handleCompositionChanged(windowInfo);\r\n        });\r\n        environment.onGroupHeaderVisibilityChanged(function (windowInfo) {\r\n            var windowId = windowInfo.windowId;\r\n            var group = findGroupByWindow(windowId);\r\n            if (typeof group !== \"undefined\") {\r\n                var groupEvents = _groups[group.id];\r\n                if (heardForWindowsCounter === -1) {\r\n                    heardForWindowsCounter = group.windows.length;\r\n                }\r\n                heardForWindowsCounter--;\r\n                if (heardForWindowsCounter === 0) {\r\n                    heardForWindowsCounter = -1;\r\n                    groupEvents.groupInternal.handleGroupHeaderVisibilityChanged(windowInfo);\r\n                }\r\n            }\r\n        });\r\n        windowStore.onAdded(function (win) {\r\n            addNewWindow(win);\r\n        });\r\n        windowStore.onRemoved(function (win) {\r\n            removeWindow(win);\r\n        });\r\n        function my() {\r\n            return findGroupByWindow(environment.my());\r\n        }\r\n        function list(success) {\r\n            var result = Object.keys(_groups).map(function (groupId) {\r\n                if (_groups[groupId]) {\r\n                    return _groups[groupId].groupAPI;\r\n                }\r\n            });\r\n            if (typeof success === \"function\") {\r\n                success(result);\r\n            }\r\n            return result;\r\n        }\r\n        function findGroupByWindow(winId, success) {\r\n            var windowId;\r\n            if (typeof winId === \"undefined\") {\r\n                logger.debug(\"trying to find a group by a window, but winId is undefined\");\r\n                return;\r\n            }\r\n            if (typeof winId === \"string\") {\r\n                windowId = winId;\r\n            }\r\n            else {\r\n                windowId = winId.id;\r\n            }\r\n            var groupFound;\r\n            Object.keys(_groups).forEach(function (groupId) {\r\n                var group = _groups[groupId].groupAPI;\r\n                if (group.find(windowId) !== undefined) {\r\n                    groupFound = group;\r\n                    return;\r\n                }\r\n            });\r\n            if (typeof success === \"function\") {\r\n                success(groupFound);\r\n            }\r\n            return groupFound;\r\n        }\r\n        function onWindowMoved(callback) {\r\n            return _registry.add(\"window-moved\", callback);\r\n        }\r\n        function createOrGetGroup(groupId) {\r\n            if (!_groups.hasOwnProperty(groupId)) {\r\n                var createdGroup = groupFactory(groupId, environment.executor);\r\n                _groups[groupId] = createdGroup;\r\n                return createdGroup;\r\n            }\r\n            else {\r\n                return _groups[groupId];\r\n            }\r\n        }\r\n        function deleteGroup(groupId) {\r\n            if (_groups.hasOwnProperty(groupId) && typeof _groups[groupId] !== \"undefined\") {\r\n                if (_groups[groupId].groupAPI.windows.length === 0) {\r\n                    delete _groups[groupId];\r\n                }\r\n            }\r\n        }\r\n        function addNewWindow(win) {\r\n            _logger.trace(\"Adding new window \" + win.API.id + \" to win.API.groupId \" + win.API.groupId);\r\n            var group = addWindow(win);\r\n            if (group) {\r\n                _logger.trace(\"handleGroupAssociation \" + win.API.id + \" to group.groupAPI.id \" + group.groupAPI.id);\r\n                win.Events.handleGroupAssociation(group.groupAPI);\r\n            }\r\n        }\r\n        function addWindow(win, groupId) {\r\n            var windowGroupId = groupId || win.API.groupId;\r\n            var windowId = win.API.id;\r\n            if (typeof windowGroupId === \"undefined\" || typeof windowId === \"undefined\") {\r\n                _logger.debug(\"trying to add a window without group - winId: \" + windowId);\r\n                return;\r\n            }\r\n            var group = createOrGetGroup(windowGroupId);\r\n            group.groupInternal.addWindow(windowId);\r\n            return group;\r\n        }\r\n        function removeWindow(win, groupId) {\r\n            var windowId = win.API.id;\r\n            var windowGroupId = groupId || win.API.groupId;\r\n            if (typeof windowGroupId !== \"undefined\") {\r\n                var group = _groups[windowGroupId];\r\n                group.groupInternal.removeWindow(windowId);\r\n                win.Events.handleGroupAssociation(undefined);\r\n                deleteGroup(windowGroupId);\r\n            }\r\n        }\r\n        function handleCompositionChanged(windowInfo) {\r\n            var newGroupId = windowInfo.groupId;\r\n            var windowId = windowInfo.windowId;\r\n            var oldGroup = findGroupByWindow(windowId);\r\n            var oldGroupId = oldGroup ? oldGroup.id : undefined;\r\n            _logger.trace(\"handleCompositionChanged newGroupId: \" + newGroupId + \" windowId: \" + windowId + \" oldGroup: \" + oldGroupId);\r\n            if (oldGroupId === newGroupId) {\r\n                _logger.trace(\"handleCompositionChanged newGroupId: \" + newGroupId + \" windowId: \" + windowId + \" oldGroup: \" + oldGroupId + \" are the same - returning...\");\r\n                return;\r\n            }\r\n            var win = windowStore.get(windowId) || windowStore.get(windowId);\r\n            var newGroup = addWindow(win, newGroupId);\r\n            if (oldGroup) {\r\n                removeWindow(win, oldGroupId);\r\n                _registry.execute(\"window-moved\", windowId, oldGroup, newGroupId);\r\n            }\r\n            win.Events.handleGroupChanged(newGroup.groupAPI, oldGroup);\r\n        }\r\n        var groups = {\r\n            get my() {\r\n                return my();\r\n            },\r\n            list: list,\r\n            findGroupByWindow: findGroupByWindow,\r\n        };\r\n        var events = { onWindowMoved: onWindowMoved };\r\n        return {\r\n            groupsAPI: groups,\r\n            groupsEvents: events,\r\n        };\r\n    });\n\n    var WindowsFactory = (function (agm, logger, appManagerGetter, displayAPIGetter, gdMajorVersion) {\r\n        var _registry = lib$2();\r\n        var _logger = logger;\r\n        var groups;\r\n        var environment;\r\n        windowStore.init(_logger);\r\n        var isReady = new Promise(function (resolve, reject) {\r\n            envDetector(agm, _logger, appManagerGetter, displayAPIGetter, gdMajorVersion)\r\n                .then(function (env) {\r\n                environment = env;\r\n                groups = groupsFactory(env, _logger);\r\n                resolve();\r\n            })\r\n                .catch(function (e) {\r\n                var err = \"Environment detector fails with: \" + e;\r\n                _logger.error(err);\r\n                reject(err);\r\n            });\r\n        });\r\n        function ready() {\r\n            return isReady;\r\n        }\r\n        function my() {\r\n            var myWindow = windowStore.getIfReady(environment.my());\r\n            return myWindow ? myWindow.API : undefined;\r\n        }\r\n        function open(name, url, options, success, error) {\r\n            return new Promise(function (resolve, reject) {\r\n                var errorHandler = function (errorResponse) {\r\n                    if (typeof error === \"function\") {\r\n                        error(errorResponse);\r\n                    }\r\n                    reject(errorResponse);\r\n                };\r\n                var successHandler = function (id) {\r\n                    windowStore.waitFor(id)\r\n                        .then(function (win) {\r\n                        if (typeof success === \"function\") {\r\n                            success(win.API);\r\n                        }\r\n                        resolve(win.API);\r\n                        if (win.API.windowType === \"electron\") {\r\n                            win.Events.handleUrlChanged(win.API.url);\r\n                        }\r\n                    })\r\n                        .catch(errorHandler);\r\n                };\r\n                environment.open(name, url, options, successHandler, errorHandler);\r\n            });\r\n        }\r\n        function find(name, success, error) {\r\n            var windows = windowStore.list;\r\n            var windowsForListing = Object.keys(windows).reduce(function (memo, winId) {\r\n                var window = windows[winId];\r\n                if (window && window.API.name === name) {\r\n                    memo.push(window.API);\r\n                }\r\n                return memo;\r\n            }, []);\r\n            if (typeof success !== \"function\") {\r\n                return windowsForListing[0];\r\n            }\r\n            if (windowsForListing.length > 0) {\r\n                success(windowsForListing[0]);\r\n            }\r\n            else {\r\n                if (typeof error === \"function\") {\r\n                    error(\"There is no window with name:\" + name);\r\n                }\r\n            }\r\n        }\r\n        function findById(id, success, error) {\r\n            var windows = windowStore.list;\r\n            var windowsForListing = Object.keys(windows).reduce(function (memo, winId) {\r\n                var window = windows[winId];\r\n                if (typeof window !== \"undefined\" && window.API.id === id) {\r\n                    memo.push(window.API);\r\n                }\r\n                return memo;\r\n            }, []);\r\n            if (typeof success !== \"function\") {\r\n                return windowsForListing[0];\r\n            }\r\n            if (windowsForListing.length > 0) {\r\n                success(windowsForListing[0]);\r\n            }\r\n            else {\r\n                if (typeof error === \"function\") {\r\n                    error(\"There is no window with such id:\" + id);\r\n                }\r\n            }\r\n        }\r\n        function list(success) {\r\n            var windows = windowStore.list;\r\n            var windowsForListing = Object.keys(windows)\r\n                .map(function (k) {\r\n                return windows[k].API;\r\n            });\r\n            if (typeof success !== \"function\") {\r\n                return windowsForListing;\r\n            }\r\n            success(windowsForListing);\r\n        }\r\n        function configure(options) {\r\n            var win = my();\r\n            var winId = win ? win.id : \"\";\r\n            return executor.configure(winId, options);\r\n        }\r\n        function windowAdded(callback) {\r\n            return _registry.add(\"window-added\", callback);\r\n        }\r\n        function windowRemoved(callback) {\r\n            return _registry.add(\"window-removed\", callback);\r\n        }\r\n        function tabAttached(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.tabAttached(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function tabDetached(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.tabDetached(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function onWindowFrameColorChanged(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.onWindowFrameColorChanged(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function onWindowGotFocus(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.onWindowGotFocus(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function onWindowLostFocus(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.onWindowLostFocus(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function onEvent(callback) {\r\n            var unsubFunc;\r\n            var unsubscribed = false;\r\n            isReady.then(function () {\r\n                if (unsubscribed) {\r\n                    return;\r\n                }\r\n                unsubFunc = environment.onEvent(callback);\r\n            });\r\n            return function () {\r\n                unsubscribed = true;\r\n                if (unsubFunc) {\r\n                    unsubFunc();\r\n                }\r\n            };\r\n        }\r\n        function createFlydown(targetId, config) {\r\n            return environment.createFlydown(targetId, config);\r\n        }\r\n        function showPopup(targetId, config) {\r\n            return environment.showPopup(targetId, config);\r\n        }\r\n        function handleWindowAdded(w) {\r\n            _registry.execute(\"window-added\", w.API);\r\n        }\r\n        function handleWindowRemoved(w) {\r\n            _registry.execute(\"window-removed\", w.API);\r\n        }\r\n        windowStore.onReadyWindow(handleWindowAdded);\r\n        windowStore.onRemoved(handleWindowRemoved);\r\n        return {\r\n            my: my,\r\n            open: open,\r\n            find: find,\r\n            findById: findById,\r\n            list: list,\r\n            ready: ready,\r\n            onWindowAdded: windowAdded,\r\n            windowAdded: windowAdded,\r\n            onWindowRemoved: windowRemoved,\r\n            windowRemoved: windowRemoved,\r\n            onTabAttached: tabAttached,\r\n            onTabDetached: tabDetached,\r\n            onWindowFrameColorChanged: onWindowFrameColorChanged,\r\n            get groups() {\r\n                return groups.groupsAPI;\r\n            },\r\n            onWindowGotFocus: onWindowGotFocus,\r\n            onWindowLostFocus: onWindowLostFocus,\r\n            onEvent: onEvent,\r\n            createFlydown: createFlydown,\r\n            showPopup: showPopup,\r\n            configure: configure\r\n        };\r\n    });\n\n    var LayoutStore = (function () {\r\n        function LayoutStore() {\r\n            this.layouts = [];\r\n        }\r\n        LayoutStore.prototype.removeWhere = function (condition) {\r\n            this.layouts = this.layouts.filter(condition);\r\n        };\r\n        LayoutStore.prototype.add = function (item) {\r\n            this.layouts.push(item);\r\n        };\r\n        Object.defineProperty(LayoutStore.prototype, \"all\", {\r\n            get: function () {\r\n                return this.layouts;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        LayoutStore.prototype.where = function (condition) {\r\n            return this.layouts.filter(condition);\r\n        };\r\n        LayoutStore.prototype.first = function (condition) {\r\n            return this.where(condition)[0];\r\n        };\r\n        return LayoutStore;\r\n    }());\r\n    var store = new LayoutStore();\n\n    function createCommonjsModule$1(fn, module) {\n    \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n    }\n\n    // Found this seed-based random generator somewhere\n    // Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\n    var seed$1 = 1;\n\n    /**\n     * return a random number based on a seed\n     * @param seed\n     * @returns {number}\n     */\n    function getNextValue$1() {\n        seed$1 = (seed$1 * 9301 + 49297) % 233280;\n        return seed$1/(233280.0);\n    }\n\n    function setSeed$2(_seed_) {\n        seed$1 = _seed_;\n    }\n\n    var randomFromSeed$1 = {\n        nextValue: getNextValue$1,\n        seed: setSeed$2\n    };\n\n    var ORIGINAL$1 = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\n    var alphabet$1;\n    var previousSeed$1;\n\n    var shuffled$1;\n\n    function reset$1() {\n        shuffled$1 = false;\n    }\n\n    function setCharacters$1(_alphabet_) {\n        if (!_alphabet_) {\n            if (alphabet$1 !== ORIGINAL$1) {\n                alphabet$1 = ORIGINAL$1;\n                reset$1();\n            }\n            return;\n        }\n\n        if (_alphabet_ === alphabet$1) {\n            return;\n        }\n\n        if (_alphabet_.length !== ORIGINAL$1.length) {\n            throw new Error('Custom alphabet for shortid must be ' + ORIGINAL$1.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n        }\n\n        var unique = _alphabet_.split('').filter(function(item, ind, arr){\n           return ind !== arr.lastIndexOf(item);\n        });\n\n        if (unique.length) {\n            throw new Error('Custom alphabet for shortid must be ' + ORIGINAL$1.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n        }\n\n        alphabet$1 = _alphabet_;\n        reset$1();\n    }\n\n    function characters$1(_alphabet_) {\n        setCharacters$1(_alphabet_);\n        return alphabet$1;\n    }\n\n    function setSeed$3(seed) {\n        randomFromSeed$1.seed(seed);\n        if (previousSeed$1 !== seed) {\n            reset$1();\n            previousSeed$1 = seed;\n        }\n    }\n\n    function shuffle$1() {\n        if (!alphabet$1) {\n            setCharacters$1(ORIGINAL$1);\n        }\n\n        var sourceArray = alphabet$1.split('');\n        var targetArray = [];\n        var r = randomFromSeed$1.nextValue();\n        var characterIndex;\n\n        while (sourceArray.length > 0) {\n            r = randomFromSeed$1.nextValue();\n            characterIndex = Math.floor(r * sourceArray.length);\n            targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n        }\n        return targetArray.join('');\n    }\n\n    function getShuffled$1() {\n        if (shuffled$1) {\n            return shuffled$1;\n        }\n        shuffled$1 = shuffle$1();\n        return shuffled$1;\n    }\n\n    /**\n     * lookup shuffled letter\n     * @param index\n     * @returns {string}\n     */\n    function lookup$1(index) {\n        var alphabetShuffled = getShuffled$1();\n        return alphabetShuffled[index];\n    }\n\n    var alphabet_1$1 = {\n        characters: characters$1,\n        seed: setSeed$3,\n        lookup: lookup$1,\n        shuffled: getShuffled$1\n    };\n\n    var crypto$1 = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\n    function randomByte$1() {\n        if (!crypto$1 || !crypto$1.getRandomValues) {\n            return Math.floor(Math.random() * 256) & 0x30;\n        }\n        var dest = new Uint8Array(1);\n        crypto$1.getRandomValues(dest);\n        return dest[0] & 0x30;\n    }\n\n    var randomByteBrowser$1 = randomByte$1;\n\n    function encode$1(lookup, number) {\n        var loopCounter = 0;\n        var done;\n\n        var str = '';\n\n        while (!done) {\n            str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByteBrowser$1() );\n            done = number < (Math.pow(16, loopCounter + 1 ) );\n            loopCounter++;\n        }\n        return str;\n    }\n\n    var encode_1$1 = encode$1;\n\n    /**\n     * Decode the id to get the version and worker\n     * Mainly for debugging and testing.\n     * @param id - the shortid-generated id.\n     */\n    function decode$1(id) {\n        var characters = alphabet_1$1.shuffled();\n        return {\n            version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n            worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n        };\n    }\n\n    var decode_1$1 = decode$1;\n\n    // Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n    // This number should be updated every year or so to keep the generated id short.\n    // To regenerate `new Date() - 0` and bump the version. Always bump the version!\n    var REDUCE_TIME = 1459707606518;\n\n    // don't change unless we change the algos or REDUCE_TIME\n    // must be an integer and less than 16\n    var version$1 = 6;\n\n    // Counter is used when shortid is called multiple times in one second.\n    var counter;\n\n    // Remember the last time shortid was called in case counter is needed.\n    var previousSeconds;\n\n    /**\n     * Generate unique id\n     * Returns string id\n     */\n    function build(clusterWorkerId) {\n\n        var str = '';\n\n        var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n        if (seconds === previousSeconds) {\n            counter++;\n        } else {\n            counter = 0;\n            previousSeconds = seconds;\n        }\n\n        str = str + encode_1$1(alphabet_1$1.lookup, version$1);\n        str = str + encode_1$1(alphabet_1$1.lookup, clusterWorkerId);\n        if (counter > 0) {\n            str = str + encode_1$1(alphabet_1$1.lookup, counter);\n        }\n        str = str + encode_1$1(alphabet_1$1.lookup, seconds);\n\n        return str;\n    }\n\n    var build_1 = build;\n\n    function isShortId$1(id) {\n        if (!id || typeof id !== 'string' || id.length < 6 ) {\n            return false;\n        }\n\n        var characters = alphabet_1$1.characters();\n        var len = id.length;\n        for(var i = 0; i < len;i++) {\n            if (characters.indexOf(id[i]) === -1) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var isValid$1 = isShortId$1;\n\n    var lib$3 = createCommonjsModule$1(function (module) {\n\n\n\n\n\n\n\n    // if you are using cluster or multiple servers use this to make each instance\n    // has a unique value for worker\n    // Note: I don't know if this is automatically set when using third\n    // party cluster solutions such as pm2.\n    var clusterWorkerId =  0;\n\n    /**\n     * Set the seed.\n     * Highly recommended if you don't want people to try to figure out your id schema.\n     * exposed as shortid.seed(int)\n     * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n     */\n    function seed(seedValue) {\n        alphabet_1$1.seed(seedValue);\n        return module.exports;\n    }\n\n    /**\n     * Set the cluster worker or machine id\n     * exposed as shortid.worker(int)\n     * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n     * returns shortid module so it can be chained.\n     */\n    function worker(workerId) {\n        clusterWorkerId = workerId;\n        return module.exports;\n    }\n\n    /**\n     *\n     * sets new characters to use in the alphabet\n     * returns the shuffled alphabet\n     */\n    function characters(newCharacters) {\n        if (newCharacters !== undefined) {\n            alphabet_1$1.characters(newCharacters);\n        }\n\n        return alphabet_1$1.shuffled();\n    }\n\n    /**\n     * Generate unique id\n     * Returns string id\n     */\n    function generate() {\n      return build_1(clusterWorkerId);\n    }\n\n    // Export all other functions as properties of the generate function\n    module.exports = generate;\n    module.exports.generate = generate;\n    module.exports.seed = seed;\n    module.exports.worker = worker;\n    module.exports.characters = characters;\n    module.exports.decode = decode_1$1;\n    module.exports.isValid = isValid$1;\n    });\n    var lib_1$1 = lib$3.generate;\n    var lib_2$1 = lib$3.seed;\n    var lib_3$1 = lib$3.worker;\n    var lib_4$1 = lib$3.characters;\n    var lib_5$1 = lib$3.decode;\n    var lib_6$1 = lib$3.isValid;\n\n    var shortid$1 = lib$3;\n\n    var SaveContextMethodName = \"T42.HC.GetSaveContext\";\r\n    var ContextProvider = (function () {\r\n        function ContextProvider(config, activitiesGetter, callbacks, logger) {\r\n            this.config = config;\r\n            this.activitiesGetter = activitiesGetter;\r\n            this.callbacks = callbacks;\r\n            this.logger = logger;\r\n            this.interop = config.agm;\r\n            this.registerRequestMethods();\r\n        }\r\n        ContextProvider.prototype.onSaveRequested = function (callback) {\r\n            return this.callbacks.add(\"saveRequested\", callback);\r\n        };\r\n        ContextProvider.prototype.isActivityOwner = function () {\r\n            if (typeof htmlContainer !== \"undefined\") {\r\n                var context_1 = htmlContainer.getContext();\r\n                return context_1 && context_1._t42 && context_1._t42.activityIsOwner;\r\n            }\r\n            var activities = this.activitiesGetter();\r\n            if (!activities) {\r\n                return false;\r\n            }\r\n            if (!activities.inActivity) {\r\n                return false;\r\n            }\r\n            var myWindow = activities.my.window;\r\n            var myActivity = activities.my.activity;\r\n            if (!myActivity && !myWindow) {\r\n                return false;\r\n            }\r\n            return myActivity.owner.id === myWindow.id;\r\n        };\r\n        ContextProvider.prototype.registerRequestMethods = function () {\r\n            var _this = this;\r\n            this.interop.register(SaveContextMethodName, function (args) {\r\n                var _a, _b, _c;\r\n                var usersCbs = _this.callbacks.execute(\"saveRequested\", args);\r\n                if (((_a = usersCbs) === null || _a === void 0 ? void 0 : _a.length) > 1) {\r\n                    _this.logger.warn(\"Multiple subscriptions for \\\"glue.layouts.onSaveRequested\\\" - only the first one will be used\");\r\n                }\r\n                var requestResult = usersCbs[0];\r\n                var autoSaveWindowContext = _this.config.autoSaveWindowContext;\r\n                if (autoSaveWindowContext) {\r\n                    return { autoSaveWindowContext: autoSaveWindowContext };\r\n                }\r\n                var result = { windowContext: (_b = requestResult) === null || _b === void 0 ? void 0 : _b.windowContext, activityContext: undefined };\r\n                if (_this.isActivityOwner()) {\r\n                    result.activityContext = (_c = requestResult) === null || _c === void 0 ? void 0 : _c.activityContext;\r\n                }\r\n                return result;\r\n            });\r\n        };\r\n        return ContextProvider;\r\n    }());\n\n    function transformACSLayout(something) {\r\n        if (!something) {\r\n            return something;\r\n        }\r\n        if (Array.isArray(something)) {\r\n            return something.map(function (item) {\r\n                return transformACSLayout(item);\r\n            });\r\n        }\r\n        if (typeof something === \"string\" || typeof something === \"number\" || typeof something === \"boolean\") {\r\n            return something;\r\n        }\r\n        var initial = {};\r\n        return Object.keys(something).reduce(function (accumulator, current) {\r\n            var value = something[current];\r\n            var convertedValue = transformACSLayout(value);\r\n            var key = current;\r\n            if (current[0].toLowerCase() !== current[0]) {\r\n                key = current[0].toLowerCase() + current.substr(1);\r\n            }\r\n            accumulator[key] = convertedValue;\r\n            return accumulator;\r\n        }, initial);\r\n    }\n\n    var LayoutImpl = (function () {\r\n        function LayoutImpl(data) {\r\n            this.name = data.name;\r\n            this.type = data.type;\r\n            this.components = data.components;\r\n            this.context = data.context;\r\n            this.metadata = data.metadata;\r\n            this.version = data.version;\r\n            this.displays = data.displays;\r\n        }\r\n        return LayoutImpl;\r\n    }());\n\n    var LayoutsAPIImpl = (function () {\r\n        function LayoutsAPIImpl(config, stream, callbacks, logger) {\r\n            this.config = config;\r\n            this.stream = stream;\r\n            this.callbacks = callbacks;\r\n            this.appManager = config.appManager;\r\n            this.onEvent = stream.onEvent;\r\n            this.provider = new ContextProvider(config, config.activityGetter, callbacks, logger);\r\n            stream.subscribe();\r\n        }\r\n        LayoutsAPIImpl.prototype.setDefaultGlobal = function (name) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.config.agm.invoke(\"T42.ACS.SelectDefaultLayout\", { name: name })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.clearDefaultGlobal = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.config.agm.invoke(\"T42.ACS.DeselectDefaultLayout\")];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.getDefaultGlobal = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var result, layout;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.config.agm.invoke(\"T42.ACS.GetDefaultLayout\")];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            layout = result.returned;\r\n                            if (!layout) {\r\n                                return [2, undefined];\r\n                            }\r\n                            if (this.isSlimMode()) {\r\n                                return [2, layout];\r\n                            }\r\n                            return [2, this.list().find(function (l) { return l.name === layout.name && l.type === \"Global\"; })];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.ready = function () {\r\n            if (this.config.mode === \"fullWaitSnapshot\") {\r\n                return this.stream.gotSnapshot;\r\n            }\r\n            return this.stream.ready;\r\n        };\r\n        LayoutsAPIImpl.prototype.save = function (layout) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.verifyNotSlimMode();\r\n                if (!layout.name) {\r\n                    throw Error(\"layout.name argument is required\");\r\n                }\r\n                if (!layout.type) {\r\n                    layout.type = \"Global\";\r\n                }\r\n                if (layout.activityId) {\r\n                    layout.type = \"Activity\";\r\n                }\r\n                if (typeof layout.ignoreHidden === \"undefined\") {\r\n                    layout.ignoreHidden = true;\r\n                }\r\n                var layoutObject = {\r\n                    name: layout.name,\r\n                    actIds: [],\r\n                    appIds: [],\r\n                    type: layout.type,\r\n                    context: layout.context,\r\n                    metadata: layout.metadata || {},\r\n                    options: { ignoreLayoutRestrictions: false },\r\n                };\r\n                if (layout.type === \"Activity\") {\r\n                    var actId = layout.activityId;\r\n                    if (!actId) {\r\n                        if (!_this.appManager.myInstance.inActivity) {\r\n                            throw new Error(\"Current application is not in activity. Can not save activity layout for it\");\r\n                        }\r\n                        actId = _this.appManager.myInstance.activityId;\r\n                    }\r\n                    layoutObject.actIds.push(actId);\r\n                    layoutObject.options = { ignoreLayoutRestrictions: true };\r\n                }\r\n                else if (layout.type === \"Global\") {\r\n                    if (_this.config.gdMajorVersion === 2) {\r\n                        var instances = _this.appManager.instances();\r\n                        if (layout.ignoreHidden) {\r\n                            instances = instances.filter(function (i) { return _this.isVisibleWindow(i); });\r\n                        }\r\n                        if (layout.ignoreMyInstance && _this.appManager.myInstance) {\r\n                            instances = instances.filter(function (i) { return i.id !== _this.appManager.myInstance.id; });\r\n                        }\r\n                        instances.reduce(function (prev, current) {\r\n                            if (!current.id) {\r\n                                return prev;\r\n                            }\r\n                            if (current.inActivity) {\r\n                                var actId = current.activityId;\r\n                                if (prev.actIds.indexOf(actId) === -1) {\r\n                                    prev.actIds.push(actId);\r\n                                }\r\n                            }\r\n                            else {\r\n                                prev.appIds.push(current.id);\r\n                            }\r\n                            return prev;\r\n                        }, layoutObject);\r\n                    }\r\n                    else {\r\n                        layoutObject.autoCollectApps = true;\r\n                    }\r\n                }\r\n                else {\r\n                    throw new Error(\"layout type \" + layout.type + \" not supported\");\r\n                }\r\n                _this.invokeMethodAndTrack(\"T42.ACS.SaveLayout\", layoutObject, resolve, reject);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.restore = function (options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.verifyNotSlimMode();\r\n                if (typeof options === \"undefined\") {\r\n                    throw Error(\"options argument is required\");\r\n                }\r\n                if (!options.name) {\r\n                    throw Error(\"options.name argument is required\");\r\n                }\r\n                if (!options.type) {\r\n                    options.type = \"Global\";\r\n                }\r\n                if (options.activityIdToJoin) {\r\n                    options.type = \"Activity\";\r\n                }\r\n                if (typeof options.restoreActivityOwner === \"undefined\") {\r\n                    options.restoreActivityOwner = false;\r\n                }\r\n                if (typeof options.ignoreActivityWindowTypes === \"undefined\") {\r\n                    options.ignoreActivityWindowTypes = [];\r\n                }\r\n                if (typeof options.setActivityContext === \"undefined\") {\r\n                    options.setActivityContext = true;\r\n                }\r\n                if (typeof options.closeRunningInstance === \"undefined\") {\r\n                    if (options.type === \"Global\") {\r\n                        options.closeRunningInstance = true;\r\n                    }\r\n                    else if (options.type === \"Activity\") {\r\n                        options.closeRunningInstance = false;\r\n                    }\r\n                }\r\n                if (typeof options.reuseWindows === \"undefined\") {\r\n                    options.reuseWindows = true;\r\n                }\r\n                options.context = options.context || {};\r\n                var t42 = {\r\n                    restoreOptions: {\r\n                        activityToJoin: options.activityIdToJoin,\r\n                        setActivityContext: options.setActivityContext,\r\n                        ignoreActivityWindowTypes: options.ignoreActivityWindowTypes,\r\n                        restoreActivityOwner: options.restoreActivityOwner,\r\n                        closeOldWindows: options.closeRunningInstance,\r\n                        reuseExistingWindows: options.reuseWindows\r\n                    }\r\n                };\r\n                var arg = {\r\n                    type: options.type,\r\n                    name: options.name,\r\n                    context: options.context,\r\n                    toClose: [],\r\n                    splash: options.splash\r\n                };\r\n                if (_this.config.gdMajorVersion === 2) {\r\n                    if (options.closeRunningInstance) {\r\n                        arg.toClose = _this.getInstancesToClose(options);\r\n                    }\r\n                }\r\n                if (options.timeout) {\r\n                    arg.timeout = options.timeout;\r\n                }\r\n                arg.context._t42 = t42;\r\n                _this.invokeMethodAndTrack(\"T42.ACS.RestoreLayout\", arg, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.remove = function (type, name) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.verifyNotSlimMode();\r\n                if (!name) {\r\n                    throw Error(\"name argument is required\");\r\n                }\r\n                if (!type) {\r\n                    throw Error(\"type argument is required\");\r\n                }\r\n                var msg = {\r\n                    type: type,\r\n                    name: name,\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.RemoveLayout\", msg, resolve, reject);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.list = function () {\r\n            this.verifyNotSlimMode();\r\n            return store.all;\r\n        };\r\n        LayoutsAPIImpl.prototype.import = function (layouts, mode) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.verifyNotSlimMode();\r\n                var msg = {\r\n                    mode: mode || \"replace\",\r\n                    layouts: layouts\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.ImportLayouts\", msg, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.export = function (layoutType) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var handleResult = function (result) {\r\n                    var layouts = _this.getObjectValues(result.Layouts).map(function (t) { return new LayoutImpl(transformACSLayout(t)); });\r\n                    if (layoutType) {\r\n                        layouts = layouts.filter(function (l) { return l.type = layoutType; });\r\n                    }\r\n                    resolve(layouts);\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.ExportLayouts\", {}, handleResult, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.rename = function (layout, newName) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                _this.verifyNotSlimMode();\r\n                if (!layout) {\r\n                    throw Error(\"layout argument is required\");\r\n                }\r\n                if (!layout.name) {\r\n                    throw Error(\"name argument is required\");\r\n                }\r\n                if (!layout.type) {\r\n                    throw Error(\"type argument is required\");\r\n                }\r\n                var msg = { type: layout.type, oldName: layout.name, newName: newName };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.RenameLayout\", msg, resolve, reject);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.updateMetadata = function (layout) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (!layout) {\r\n                    throw Error(\"layout argument is required\");\r\n                }\r\n                if (!layout.name) {\r\n                    throw Error(\"name argument is required\");\r\n                }\r\n                if (!layout.type) {\r\n                    throw Error(\"type argument is required\");\r\n                }\r\n                if (!layout.metadata) {\r\n                    throw Error(\"metadata argument is required\");\r\n                }\r\n                var layoutObject = {\r\n                    name: layout.name,\r\n                    type: layout.type,\r\n                    metadata: layout.metadata\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.UpdateMetadata\", layoutObject, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.hibernate = function (name, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (!name) {\r\n                    return reject(\"name cannot be empty\");\r\n                }\r\n                options = options || {};\r\n                var request = {\r\n                    name: name,\r\n                    type: \"Global\",\r\n                    context: options.context || {},\r\n                    metadata: options.metadata || {},\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.HibernateLayout\", request, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.resume = function (name, context, options) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (!name) {\r\n                    return reject(\"name cannot be empty\");\r\n                }\r\n                var request = __assign({ name: name, type: \"Global\", context: context }, options);\r\n                _this.invokeMethodAndTrack(\"T42.ACS.ResumeLayout\", request, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.getCurrentLayout = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var result, layout;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.config.agm.invoke(\"T42.ACS.GetCurrentLayout\", {}, \"best\", { methodResponseTimeoutMs: 120 * 1000 })];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            layout = result.returned.layout;\r\n                            if (!layout) {\r\n                                return [2, undefined];\r\n                            }\r\n                            if (!this.isSlimMode()) {\r\n                                layout = this.list().find(function (l) { return l.name === layout.name && l.type === layout.type; });\r\n                            }\r\n                            return [2, layout];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.onAdded = function (callback) {\r\n            var result = this.callbacks.add(\"added\", callback);\r\n            if (store.all.length > 0) {\r\n                store.all.forEach(function (layout) {\r\n                    try {\r\n                        callback(layout);\r\n                    }\r\n                    catch (err) { }\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n        LayoutsAPIImpl.prototype.onRemoved = function (callback) {\r\n            return this.callbacks.add(\"removed\", callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.onChanged = function (callback) {\r\n            return this.callbacks.add(\"changed\", callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.onRestored = function (callback) {\r\n            return this.callbacks.add(\"restored\", callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.onRenamed = function (callback) {\r\n            return this.callbacks.add(\"renamed\", callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.onEvent = function (callback) {\r\n            return this.stream.onEvent(callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.onSaveRequested = function (callback) {\r\n            return this.provider.onSaveRequested(callback);\r\n        };\r\n        LayoutsAPIImpl.prototype.updateAppContextInCurrent = function (context) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (context && typeof context !== \"object\") {\r\n                    reject(\"context must be an object\");\r\n                }\r\n                context = (context !== null && context !== void 0 ? context : {});\r\n                var request = {\r\n                    context: context\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.UpdateLayoutComponentContext\", request, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.updateDefaultContext = function (context) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (context && typeof context !== \"object\") {\r\n                    reject(\"context must be an object\");\r\n                }\r\n                context = (context !== null && context !== void 0 ? context : {});\r\n                var request = {\r\n                    context: context\r\n                };\r\n                _this.invokeMethodAndTrack(\"T42.ACS.UpdateDefaultContext\", request, resolve, reject, true);\r\n            });\r\n        };\r\n        LayoutsAPIImpl.prototype.get = function (name, type) {\r\n            var matching = this.list().find(function (l) { return l.name === name && l.type === type; });\r\n            if (!matching) {\r\n                return Promise.reject(\"can not find layout with name=\" + name + \" and type=\" + type);\r\n            }\r\n            return Promise.resolve(matching);\r\n        };\r\n        LayoutsAPIImpl.prototype.getAll = function (type) {\r\n            var matching = this.list().filter(function (l) { return type === l.type; });\r\n            return Promise.resolve(matching);\r\n        };\r\n        LayoutsAPIImpl.prototype.isSlimMode = function () {\r\n            return this.config.mode === \"slim\";\r\n        };\r\n        LayoutsAPIImpl.prototype.verifyNotSlimMode = function () {\r\n            if (this.isSlimMode()) {\r\n                throw Error(\"Operation not allowed in slim mode. Run in full mode.\");\r\n            }\r\n        };\r\n        LayoutsAPIImpl.prototype.isVisibleWindow = function (instance) {\r\n            if (instance.application.type === \"exe\" || instance.application.type === \"node\") {\r\n                return true;\r\n            }\r\n            if (instance.application.type === \"activity\") {\r\n                return true;\r\n            }\r\n            if (!instance || !instance.window) {\r\n                return false;\r\n            }\r\n            return instance.window.isVisible;\r\n        };\r\n        LayoutsAPIImpl.prototype.invokeMethodAndTrack = function (methodName, args, resolve, reject, skipStreamEvent) {\r\n            var streamEventReceived = skipStreamEvent;\r\n            var agmResult;\r\n            var token = shortid$1();\r\n            args.token = token;\r\n            var handleResult = function () {\r\n                if (streamEventReceived && agmResult) {\r\n                    resolve(agmResult);\r\n                }\r\n            };\r\n            if (!skipStreamEvent) {\r\n                this.stream.waitFor(token)\r\n                    .then(function () {\r\n                    streamEventReceived = true;\r\n                    handleResult();\r\n                })\r\n                    .catch(function (err) {\r\n                    reject(err);\r\n                });\r\n            }\r\n            var responseHandler = function (result) {\r\n                if (!result.returned) {\r\n                    reject(\"No result from method \" + methodName);\r\n                }\r\n                if (result.returned.status && (result.returned.status !== \"Success\" && result.returned.status !== \"PartialSuccess\")) {\r\n                    reject(result.returned);\r\n                }\r\n                agmResult = result.returned;\r\n                handleResult();\r\n            };\r\n            this.config.agm.invoke(methodName, args, \"best\", { methodResponseTimeoutMs: 120 * 1000 })\r\n                .then(responseHandler)\r\n                .catch(function (err) { return reject(err); });\r\n        };\r\n        LayoutsAPIImpl.prototype.getInstancesToClose = function (options) {\r\n            var _this = this;\r\n            var instances = [];\r\n            var shellApp = this.appManager.applications().filter(function (a) { return a.isShell; })[0];\r\n            var shellApplicationName = shellApp ? shellApp.name : \"AppManager\";\r\n            this.appManager.instances().forEach(function (i) {\r\n                if (_this.appManager.myInstance && i.id === _this.appManager.myInstance.id) {\r\n                    return;\r\n                }\r\n                if (i.application.name === shellApplicationName) {\r\n                    return;\r\n                }\r\n                if (!_this.isVisibleWindow(i)) {\r\n                    return;\r\n                }\r\n                if (options.type === \"Activity\") {\r\n                    if (i.activityId !== options.activityIdToJoin) {\r\n                        return;\r\n                    }\r\n                }\r\n                instances.push({ application: i.application.name, instance: i.id });\r\n            });\r\n            return instances;\r\n        };\r\n        LayoutsAPIImpl.prototype.getObjectValues = function (obj) {\r\n            if (!obj) {\r\n                return [];\r\n            }\r\n            return Object.keys(obj).map(function (k) { return obj[k]; });\r\n        };\r\n        return LayoutsAPIImpl;\r\n    }());\n\n    var ACSStream = (function () {\r\n        function ACSStream(agm, callbacks) {\r\n            var _this = this;\r\n            this.agm = agm;\r\n            this.callbacks = callbacks;\r\n            this.ready = new Promise(function (resolve, reject) {\r\n                _this.resolveReady = resolve;\r\n                _this.rejectReady = reject;\r\n            });\r\n            this.gotSnapshot = new Promise(function (resolve, reject) {\r\n                _this.resolveGotSnapshot = resolve;\r\n                _this.rejectGotSnapshot = reject;\r\n            });\r\n        }\r\n        ACSStream.prototype.subscribe = function (noRetry) {\r\n            var _this = this;\r\n            var transform = function (obj) {\r\n                return _this.getObjectValues(obj).map(function (t) { return transformACSLayout(t); });\r\n            };\r\n            if (!this.checkForLayoutEventMethod()) {\r\n                if (noRetry) {\r\n                    this.resolveReady();\r\n                }\r\n                setTimeout(function () {\r\n                    _this.subscribe(true);\r\n                }, 500);\r\n            }\r\n            else {\r\n                this.agm.subscribe(\"T42.ACS.OnLayoutEvent\", { waitTimeoutMs: 10000 })\r\n                    .then(function (subs) {\r\n                    subs.onData(function (args) {\r\n                        var data = args.data;\r\n                        if (data.IsSnapshot) {\r\n                            _this.resolveGotSnapshot();\r\n                        }\r\n                        _this.addLayouts(transform(data.OnLayoutAdded));\r\n                        _this.removeLayouts(transform(data.OnLayoutRemoved));\r\n                        _this.changeLayouts(transform(data.OnLayoutChanged));\r\n                        _this.renameLayouts(transform(data.OnLayoutRenamed));\r\n                        _this.restoredLayout(transform(data.OnLayoutRestored));\r\n                        _this.callbacks.execute(\"streamEvent\", data);\r\n                    });\r\n                    subs.onFailed(function (err) {\r\n                        var msg = \"can not subscribe to T42.ACS.OnLayoutEvent \" + err;\r\n                        _this.rejectReady(msg);\r\n                        _this.rejectGotSnapshot(msg);\r\n                    });\r\n                    _this.resolveReady();\r\n                })\r\n                    .catch(function (err) {\r\n                    var msg = \"Error subscribing for T42.ACS.OnLayoutEvent stream. Err: \" + err;\r\n                    _this.rejectReady(msg);\r\n                    _this.rejectGotSnapshot(msg);\r\n                });\r\n            }\r\n        };\r\n        ACSStream.prototype.onEvent = function (callback) {\r\n            return this.callbacks.add(\"streamEvent\", callback);\r\n        };\r\n        ACSStream.prototype.waitFor = function (token, timeout) {\r\n            var _this = this;\r\n            if (!timeout) {\r\n                timeout = 10000;\r\n            }\r\n            return new Promise(function (resolve, reject) {\r\n                var done = false;\r\n                var unsubscribe = _this.onEvent(function (streamEvent) {\r\n                    if (streamEvent.Token === token) {\r\n                        done = true;\r\n                        unsubscribe();\r\n                        resolve();\r\n                    }\r\n                });\r\n                setTimeout(function () {\r\n                    if (!done) {\r\n                        reject(\"timed out\");\r\n                    }\r\n                }, timeout);\r\n            });\r\n        };\r\n        ACSStream.prototype.checkForLayoutEventMethod = function () {\r\n            try {\r\n                return this.agm\r\n                    .methods()\r\n                    .map(function (m) { return m.name; })\r\n                    .indexOf(\"T42.ACS.OnLayoutEvent\") !== -1;\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        };\r\n        ACSStream.prototype.addLayouts = function (layoutsData) {\r\n            var _this = this;\r\n            if (!layoutsData) {\r\n                return;\r\n            }\r\n            layoutsData.forEach(function (layoutData) {\r\n                var layout = new LayoutImpl(layoutData);\r\n                store.add(layout);\r\n                _this.callbacks.execute(\"added\", layout);\r\n            });\r\n        };\r\n        ACSStream.prototype.removeLayouts = function (removedLayouts) {\r\n            var _this = this;\r\n            if (!removedLayouts) {\r\n                return;\r\n            }\r\n            removedLayouts.forEach(function (removedLayout) {\r\n                store.removeWhere(function (existingLayout) { return !_this.compareLayouts(existingLayout, removedLayout); });\r\n                _this.callbacks.execute(\"removed\", removedLayout);\r\n            });\r\n        };\r\n        ACSStream.prototype.changeLayouts = function (changedLayouts) {\r\n            var _this = this;\r\n            if (!changedLayouts) {\r\n                return;\r\n            }\r\n            changedLayouts.forEach(function (changedLayout) {\r\n                store.removeWhere(function (existingLayout) { return !_this.compareLayouts(existingLayout, changedLayout); });\r\n                store.add(new LayoutImpl(changedLayout));\r\n                _this.callbacks.execute(\"changed\", changedLayout);\r\n            });\r\n        };\r\n        ACSStream.prototype.renameLayouts = function (renamedLayouts) {\r\n            var _this = this;\r\n            if (!renamedLayouts) {\r\n                return;\r\n            }\r\n            renamedLayouts.forEach(function (renamedLayout) {\r\n                var existingLayout = store.first(function (current) { return _this.compareLayouts(current, { type: renamedLayout.type, name: renamedLayout.oldName }); });\r\n                if (!existingLayout) {\r\n                    throw Error(\"received rename event for unknown layout with type \" + renamedLayout.type + \" and name \" + renamedLayout.oldName);\r\n                }\r\n                existingLayout.name = renamedLayout.newName;\r\n                _this.callbacks.execute(\"renamed\", existingLayout);\r\n            });\r\n        };\r\n        ACSStream.prototype.compareLayouts = function (layout1, layout2) {\r\n            return layout1.name === layout2.name && layout1.type === layout2.type;\r\n        };\r\n        ACSStream.prototype.getObjectValues = function (obj) {\r\n            if (!obj) {\r\n                return [];\r\n            }\r\n            return Object.keys(obj).map(function (k) { return obj[k]; });\r\n        };\r\n        ACSStream.prototype.restoredLayout = function (restoredLayouts) {\r\n            var _this = this;\r\n            if (!restoredLayouts) {\r\n                return;\r\n            }\r\n            restoredLayouts.forEach(function (restoredLayout) {\r\n                var existingLayout = store.first(function (current) { return _this.compareLayouts(current, { type: restoredLayout.type, name: restoredLayout.name }); });\r\n                _this.callbacks.execute(\"restored\", existingLayout);\r\n            });\r\n        };\r\n        return ACSStream;\r\n    }());\n\n    function streamNull () {\r\n        return {\r\n            ready: Promise.resolve(undefined),\r\n            subscribe: function () { },\r\n            onEvent: function (callback) { return function () { }; },\r\n            waitFor: function (token, timeout) { return Promise.resolve(undefined); },\r\n            gotSnapshot: Promise.resolve(undefined),\r\n        };\r\n    }\n\n    function LayoutsFactory (config) {\r\n        if (!config.agm) {\r\n            throw Error(\"config.agm is required\");\r\n        }\r\n        if (!config.logger) {\r\n            throw Error(\"config.logger is required\");\r\n        }\r\n        config.mode = config.mode || \"slim\";\r\n        var logger = config.logger;\r\n        var callbacks = lib$2();\r\n        var acsStream;\r\n        if (config.mode === \"full\" || \"fullWaitSnapshot\") {\r\n            acsStream = new ACSStream(config.agm, callbacks);\r\n        }\r\n        else {\r\n            acsStream = streamNull();\r\n        }\r\n        return new LayoutsAPIImpl(config, acsStream, callbacks, logger);\r\n    }\n\n    var T42DisplayCommand = \"T42.Displays.Command\";\r\n    var DisplayManager = (function () {\r\n        function DisplayManager(_agm, _logger) {\r\n            var _this = this;\r\n            this._agm = _agm;\r\n            this._logger = _logger;\r\n            this.all = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var displays;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.callGD(DisplayCommand.GetAll, {})];\r\n                        case 1:\r\n                            displays = _a.sent();\r\n                            return [2, displays.map(this.decorateDisplay)];\r\n                    }\r\n                });\r\n            }); };\r\n            this.get = function (id) { return __awaiter(_this, void 0, void 0, function () {\r\n                var display;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.callGD(DisplayCommand.Get, { id: id })];\r\n                        case 1:\r\n                            display = _a.sent();\r\n                            return [2, this.decorateDisplay(display)];\r\n                    }\r\n                });\r\n            }); };\r\n            this.getPrimary = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var primary;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.all()];\r\n                        case 1:\r\n                            primary = (_a.sent()).find(function (d) { return d.isPrimary; });\r\n                            return [2, primary];\r\n                    }\r\n                });\r\n            }); };\r\n            this.capture = function (options) { return __awaiter(_this, void 0, void 0, function () {\r\n                var screenshot;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.callGD(DisplayCommand.Capture, __assign({}, options))];\r\n                        case 1:\r\n                            screenshot = _a.sent();\r\n                            return [2, screenshot];\r\n                    }\r\n                });\r\n            }); };\r\n            this.captureAll = function (options) { return __awaiter(_this, void 0, void 0, function () {\r\n                var screenshots;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.callGD(DisplayCommand.CaptureAll, __assign({}, options))];\r\n                        case 1:\r\n                            screenshots = _a.sent();\r\n                            return [2, screenshots];\r\n                    }\r\n                });\r\n            }); };\r\n            this.getMousePosition = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var point;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.callGD(DisplayCommand.GetMousePosition)];\r\n                        case 1:\r\n                            point = _a.sent();\r\n                            return [2, point];\r\n                    }\r\n                });\r\n            }); };\r\n            this.callGD = function (command, options) { return __awaiter(_this, void 0, void 0, function () {\r\n                var invocationResult;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this._agm.invoke(T42DisplayCommand, { options: __assign({}, options), command: command })];\r\n                        case 1:\r\n                            invocationResult = _a.sent();\r\n                            return [2, invocationResult.returned.data];\r\n                    }\r\n                });\r\n            }); };\r\n            this.decorateDisplay = function (original) {\r\n                return __assign(__assign({}, original), { capture: function (size) { return _this.capture({ id: original.id, size: size }); } });\r\n            };\r\n        }\r\n        return DisplayManager;\r\n    }());\r\n    var DisplayCommand;\r\n    (function (DisplayCommand) {\r\n        DisplayCommand[\"Capture\"] = \"capture\";\r\n        DisplayCommand[\"CaptureAll\"] = \"captureAll\";\r\n        DisplayCommand[\"GetAll\"] = \"getAll\";\r\n        DisplayCommand[\"Get\"] = \"get\";\r\n        DisplayCommand[\"GetMousePosition\"] = \"getMousePosition\";\r\n    })(DisplayCommand || (DisplayCommand = {}));\n\n    var interop;\r\n    var windowId;\r\n    function setupAGM(interopLib, channels) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        interop = interopLib;\r\n                        if (typeof window !== \"undefined\") {\r\n                            if (window.glue42gd) {\r\n                                windowId = window.glue42gd.windowId;\r\n                            }\r\n                        }\r\n                        if (!windowId) {\r\n                            return [2];\r\n                        }\r\n                        return [4, interop.register(\"T42.Channels.Command\", function (args) {\r\n                                var command = args.command;\r\n                                if (!command) {\r\n                                    throw new Error(\"missing command argument\");\r\n                                }\r\n                                if (command === \"join\") {\r\n                                    var id = args.channel;\r\n                                    if (!id) {\r\n                                        throw new Error(\"missing argument id\");\r\n                                    }\r\n                                    channels.joinNoSelectorSwitch(id);\r\n                                    return;\r\n                                }\r\n                                if (command === \"leave\") {\r\n                                    channels.leaveNoSelectorSwitch();\r\n                                    return;\r\n                                }\r\n                                if (command === \"get\") {\r\n                                    var id = channels.current();\r\n                                    return { id: id };\r\n                                }\r\n                                throw new Error(\"unknown command \" + command);\r\n                            })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        interop.invoke(\"T42.Channels.Announce\", { swId: windowId, instance: interop.instance.instance });\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function switchChannel(channel, id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                interop.invoke(\"T42.Channels.Announce\", {\r\n                    swId: (id !== null && id !== void 0 ? id : windowId),\r\n                    command: \"switchChannel\",\r\n                    data: { newChannel: channel }\r\n                });\r\n                return [2];\r\n            });\r\n        });\r\n    }\n\n    var CONTEXT_PREFIX = \"___channel___\";\r\n    var SharedContextSubscriber = (function () {\r\n        function SharedContextSubscriber(contexts) {\r\n            this.contexts = contexts;\r\n        }\r\n        SharedContextSubscriber.prototype.subscribe = function (callback) {\r\n            this.callback = callback;\r\n        };\r\n        SharedContextSubscriber.prototype.subscribeFor = function (name, callback) {\r\n            if (!this.isChannel(name)) {\r\n                return Promise.reject(new Error(\"Channel with name: \" + name + \" doesn't exist!\"));\r\n            }\r\n            var contextName = this.createContextName(name);\r\n            return this.contexts.subscribe(contextName, function (data, _, __, ___, extraData) {\r\n                var _a;\r\n                callback(data.data, data, (_a = extraData) === null || _a === void 0 ? void 0 : _a.updaterId);\r\n            });\r\n        };\r\n        SharedContextSubscriber.prototype.switchChannel = function (name) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var contextName, _a;\r\n                var _this = this;\r\n                return __generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            this.unsubscribe();\r\n                            contextName = this.createContextName(name);\r\n                            _a = this;\r\n                            return [4, this.contexts.subscribe(contextName, function (data, _, __, ___, extraData) {\r\n                                    var _a;\r\n                                    if (_this.callback) {\r\n                                        _this.callback(data.data, data, (_a = extraData) === null || _a === void 0 ? void 0 : _a.updaterId);\r\n                                    }\r\n                                })];\r\n                        case 1:\r\n                            _a.unsubscribeFunc = _b.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        SharedContextSubscriber.prototype.unsubscribe = function () {\r\n            if (this.unsubscribeFunc) {\r\n                this.unsubscribeFunc();\r\n            }\r\n        };\r\n        SharedContextSubscriber.prototype.all = function () {\r\n            var contextNames = this.contexts.all();\r\n            var channelContextNames = contextNames.filter(function (contextName) { return contextName.startsWith(CONTEXT_PREFIX); });\r\n            var channelNames = channelContextNames.map(function (channelContextName) { return channelContextName.substr(CONTEXT_PREFIX.length); });\r\n            return channelNames;\r\n        };\r\n        SharedContextSubscriber.prototype.getContextData = function (name) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (!_this.isChannel(name)) {\r\n                    return reject(new Error(\"A channel with name: \" + name + \" doesn't exist!\"));\r\n                }\r\n                var contextName = _this.createContextName(name);\r\n                _this.contexts.subscribe(contextName, function (data) {\r\n                    resolve(data);\r\n                }).then(function (unsubscribeFunc) { return unsubscribeFunc(); });\r\n            });\r\n        };\r\n        SharedContextSubscriber.prototype.updateChannel = function (name, data) {\r\n            var contextName = this.createContextName(name);\r\n            return this.contexts.update(contextName, data);\r\n        };\r\n        SharedContextSubscriber.prototype.updateData = function (name, data) {\r\n            var contextName = this.createContextName(name);\r\n            if (this.contexts.setPathSupported) {\r\n                var pathValues = Object.keys(data).map(function (key) {\r\n                    return {\r\n                        path: \"data.\" + key,\r\n                        value: data[key]\r\n                    };\r\n                });\r\n                return this.contexts.setPaths(contextName, pathValues);\r\n            }\r\n            else {\r\n                return this.contexts.update(contextName, { data: data });\r\n            }\r\n        };\r\n        SharedContextSubscriber.prototype.isChannel = function (name) {\r\n            return this.all().some(function (channelName) { return channelName === name; });\r\n        };\r\n        SharedContextSubscriber.prototype.createContextName = function (name) {\r\n            return CONTEXT_PREFIX + name;\r\n        };\r\n        return SharedContextSubscriber;\r\n    }());\n\n    var ChannelsImpl = (function () {\r\n        function ChannelsImpl(shared) {\r\n            this.shared = shared;\r\n            this.subsKey = \"subs\";\r\n            this.changedKey = \"changed\";\r\n            this.registry = lib$2();\r\n            this.shared.subscribe(this.handler.bind(this));\r\n        }\r\n        ChannelsImpl.prototype.subscribe = function (callback) {\r\n            if (typeof callback !== \"function\") {\r\n                throw new Error(\"Please provide the callback as a function!\");\r\n            }\r\n            return this.registry.add(this.subsKey, callback);\r\n        };\r\n        ChannelsImpl.prototype.subscribeFor = function (name, callback) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var unsubscribeFunc;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof name !== \"string\") {\r\n                                throw new Error(\"Please provide the name as a string!\");\r\n                            }\r\n                            if (typeof callback !== \"function\") {\r\n                                throw new Error(\"Please provide the callback as a function!\");\r\n                            }\r\n                            return [4, this.shared.subscribeFor(name, callback)];\r\n                        case 1:\r\n                            unsubscribeFunc = _a.sent();\r\n                            return [2, unsubscribeFunc];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.publish = function (data, name) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    if (typeof data !== \"object\") {\r\n                        throw new Error(\"Please provide the data as an object!\");\r\n                    }\r\n                    if (name) {\r\n                        if (typeof name !== \"string\") {\r\n                            throw new Error(\"Please provide the name as a string!\");\r\n                        }\r\n                        if (!this.shared.isChannel(name)) {\r\n                            return [2, Promise.reject(new Error(\"A channel with name: \" + name + \" doesn't exist!\"))];\r\n                        }\r\n                        return [2, this.shared.updateData(name, data)];\r\n                    }\r\n                    if (!this.currentContext) {\r\n                        throw new Error(\"Not joined to any channel!\");\r\n                    }\r\n                    return [2, this.shared.updateData(this.currentContext, data)];\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.all = function () {\r\n            var channelNames = this.shared.all();\r\n            return Promise.resolve(channelNames);\r\n        };\r\n        ChannelsImpl.prototype.list = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var channelNames, channelContexts;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.all()];\r\n                        case 1:\r\n                            channelNames = _a.sent();\r\n                            return [4, Promise.all(channelNames.map(function (channelName) { return _this.get(channelName); }))];\r\n                        case 2:\r\n                            channelContexts = _a.sent();\r\n                            return [2, channelContexts];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.get = function (name) {\r\n            if (typeof name !== \"string\") {\r\n                return Promise.reject(new Error(\"Please provide the channel name as a string!\"));\r\n            }\r\n            return this.shared.getContextData(name);\r\n        };\r\n        ChannelsImpl.prototype.join = function (name) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2, this.joinCore(name)];\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.joinNoSelectorSwitch = function (name) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2, this.joinCore(name, false)];\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.leave = function () {\r\n            return this.leaveCore();\r\n        };\r\n        ChannelsImpl.prototype.leaveNoSelectorSwitch = function () {\r\n            return this.leaveCore(false);\r\n        };\r\n        ChannelsImpl.prototype.current = function () {\r\n            return this.currentContext;\r\n        };\r\n        ChannelsImpl.prototype.my = function () {\r\n            return this.current();\r\n        };\r\n        ChannelsImpl.prototype.changed = function (callback) {\r\n            if (typeof callback !== \"function\") {\r\n                throw new Error(\"Please provide the callback as a function!\");\r\n            }\r\n            return this.registry.add(this.changedKey, callback);\r\n        };\r\n        ChannelsImpl.prototype.onChanged = function (callback) {\r\n            return this.changed(callback);\r\n        };\r\n        ChannelsImpl.prototype.add = function (info) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var context;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof info !== \"object\") {\r\n                                throw new Error(\"Please provide the info as an object!\");\r\n                            }\r\n                            if (typeof info.name === \"undefined\") {\r\n                                throw new Error(\"info.name is missing!\");\r\n                            }\r\n                            if (typeof info.name !== \"string\") {\r\n                                throw new Error(\"Please provide the info.name as a string!\");\r\n                            }\r\n                            if (typeof info.meta === \"undefined\") {\r\n                                throw new Error(\"info.meta is missing!\");\r\n                            }\r\n                            if (typeof info.meta !== \"object\") {\r\n                                throw new Error(\"Please provide the info.meta as an object!\");\r\n                            }\r\n                            if (typeof info.meta.color === \"undefined\") {\r\n                                throw new Error(\"info.meta.color is missing!\");\r\n                            }\r\n                            if (typeof info.meta.color !== \"string\") {\r\n                                throw new Error(\"Please provide the info.meta.color as a string!\");\r\n                            }\r\n                            context = {\r\n                                name: info.name,\r\n                                meta: info.meta || {},\r\n                                data: info.data || {}\r\n                            };\r\n                            return [4, this.shared.updateChannel(info.name, context)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2, context];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.handler = function (data, context, updaterId) {\r\n            this.registry.execute(this.subsKey, data, context, updaterId);\r\n        };\r\n        ChannelsImpl.prototype.joinCore = function (name, changeSelector) {\r\n            if (changeSelector === void 0) { changeSelector = true; }\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var doesChannelExist, channelExistsPromise;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof name !== \"string\") {\r\n                                throw new Error(\"Please provide the channel name as a string!\");\r\n                            }\r\n                            if (name === this.currentContext) {\r\n                                return [2];\r\n                            }\r\n                            doesChannelExist = function (channelName) {\r\n                                var channelNames = _this.shared.all();\r\n                                return channelNames.includes(channelName);\r\n                            };\r\n                            if (!!doesChannelExist(name)) return [3, 2];\r\n                            channelExistsPromise = new Promise(function (resolve, reject) {\r\n                                var timeoutId;\r\n                                var intervalId = setInterval(function () {\r\n                                    if (doesChannelExist(name)) {\r\n                                        clearTimeout(timeoutId);\r\n                                        clearInterval(intervalId);\r\n                                        resolve();\r\n                                    }\r\n                                }, 100);\r\n                                timeoutId = setTimeout(function () {\r\n                                    clearInterval(intervalId);\r\n                                    return reject(new Error(\"A channel with name: \" + name + \" doesn't exist!\"));\r\n                                }, 3000);\r\n                            });\r\n                            return [4, channelExistsPromise];\r\n                        case 1:\r\n                            _a.sent();\r\n                            _a.label = 2;\r\n                        case 2:\r\n                            this.currentContext = name;\r\n                            return [4, this.shared.switchChannel(name)];\r\n                        case 3:\r\n                            _a.sent();\r\n                            if (changeSelector) {\r\n                                switchChannel(name);\r\n                            }\r\n                            this.registry.execute(this.changedKey, name);\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ChannelsImpl.prototype.leaveCore = function (changeSelector) {\r\n            if (changeSelector === void 0) { changeSelector = true; }\r\n            this.currentContext = undefined;\r\n            this.registry.execute(this.changedKey, undefined);\r\n            this.shared.unsubscribe();\r\n            if (changeSelector) {\r\n                switchChannel();\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        return ChannelsImpl;\r\n    }());\n\n    function factory(contexts, agm) {\r\n        var sharedContexts = new SharedContextSubscriber(contexts);\r\n        var channels = new ChannelsImpl(sharedContexts);\r\n        setupAGM(agm, channels);\r\n        return {\r\n            subscribe: channels.subscribe.bind(channels),\r\n            subscribeFor: channels.subscribeFor.bind(channels),\r\n            publish: channels.publish.bind(channels),\r\n            all: channels.all.bind(channels),\r\n            list: channels.list.bind(channels),\r\n            get: channels.get.bind(channels),\r\n            join: channels.join.bind(channels),\r\n            leave: channels.leave.bind(channels),\r\n            current: channels.current.bind(channels),\r\n            my: channels.my.bind(channels),\r\n            changed: channels.changed.bind(channels),\r\n            onChanged: channels.onChanged.bind(channels),\r\n            add: channels.add.bind(channels),\r\n            ready: function () { return contexts.ready(); }\r\n        };\r\n    }\n\n    var CommandMethod = \"T42.Hotkeys.Command\";\r\n    var InvokeMethod = \"T42.Hotkeys.Invoke\";\r\n    var RegisterCommand = \"register\";\r\n    var UnregisterCommand = \"unregister\";\r\n    var UnregisterAllCommand = \"unregisterAll\";\r\n    var HotkeysImpl = (function () {\r\n        function HotkeysImpl(agm) {\r\n            this.agm = agm;\r\n            this.registry = lib$2();\r\n            this.firstHotkey = true;\r\n            this.hotkeys = new Map();\r\n        }\r\n        HotkeysImpl.prototype.register = function (info, callback) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var hkToLower;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof info === \"undefined\") {\r\n                                throw new Error(\"Hotkey parameter missing\");\r\n                            }\r\n                            if (typeof info === \"string\") {\r\n                                info = {\r\n                                    hotkey: info\r\n                                };\r\n                            }\r\n                            else {\r\n                                if (!info.hotkey) {\r\n                                    throw new Error(\"Info's hotkey parameter missing\");\r\n                                }\r\n                                info = {\r\n                                    hotkey: info.hotkey,\r\n                                    description: info.description\r\n                                };\r\n                            }\r\n                            hkToLower = this.formatHotkey(info.hotkey);\r\n                            if (this.hotkeys.has(hkToLower)) {\r\n                                throw new Error(\"Shortcut for \" + hkToLower + \" already registered\");\r\n                            }\r\n                            if (!this.firstHotkey) return [3, 2];\r\n                            this.firstHotkey = false;\r\n                            return [4, this.registerInvokeAGMMethod()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            _a.label = 2;\r\n                        case 2:\r\n                            this.registry.add(hkToLower, callback);\r\n                            return [4, this.agm.invoke(CommandMethod, { command: RegisterCommand, hotkey: hkToLower, description: info.description })];\r\n                        case 3:\r\n                            _a.sent();\r\n                            this.hotkeys.set(hkToLower, info);\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        HotkeysImpl.prototype.unregister = function (hotkey) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var hkToLower;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (typeof hotkey === \"undefined\") {\r\n                                throw new Error(\"hotkey parameter missing\");\r\n                            }\r\n                            if (typeof hotkey !== \"string\") {\r\n                                throw new Error(\"hotkey parameter must be string\");\r\n                            }\r\n                            hkToLower = this.formatHotkey(hotkey);\r\n                            return [4, this.agm.invoke(CommandMethod, { command: UnregisterCommand, hotkey: hkToLower })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this.hotkeys.delete(hkToLower);\r\n                            this.registry.clearKey(hkToLower);\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        HotkeysImpl.prototype.unregisterAll = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.agm.invoke(CommandMethod, { command: UnregisterAllCommand })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this.hotkeys.clear();\r\n                            this.registry.clear();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        HotkeysImpl.prototype.isRegistered = function (hotkey) {\r\n            var hkToLower = this.formatHotkey(hotkey);\r\n            return this.hotkeys.has(hkToLower);\r\n        };\r\n        HotkeysImpl.prototype.registerInvokeAGMMethod = function () {\r\n            var _this = this;\r\n            this.agm.register(InvokeMethod, function (args) {\r\n                var hkToLower = args.key.toLowerCase();\r\n                var info = _this.hotkeys.get(hkToLower);\r\n                _this.registry.execute(hkToLower, info);\r\n            });\r\n        };\r\n        HotkeysImpl.prototype.formatHotkey = function (hotkey) {\r\n            if (hotkey) {\r\n                return hotkey.replace(/\\s/g, \"\").toLowerCase();\r\n            }\r\n        };\r\n        return HotkeysImpl;\r\n    }());\n\n    function factory$1(agm) {\r\n        var hotkeys = new HotkeysImpl(agm);\r\n        return {\r\n            register: hotkeys.register.bind(hotkeys),\r\n            unregister: hotkeys.unregister.bind(hotkeys),\r\n            unregisterAll: hotkeys.unregisterAll.bind(hotkeys),\r\n            isRegistered: hotkeys.isRegistered.bind(hotkeys),\r\n            ready: function () { return Promise.resolve(); }\r\n        };\r\n    }\n\n    var version$2 = \"5.5.2\";\n\n    var prepareConfig$1 = (function (options) {\r\n        function getLibConfig(value, defaultMode, trueMode) {\r\n            if (typeof value === \"boolean\" && !value) {\r\n                return undefined;\r\n            }\r\n            var mode = getModeAsString(value, defaultMode, trueMode);\r\n            if (typeof value === \"object\") {\r\n                value.mode = mode;\r\n                return value;\r\n            }\r\n            return {\r\n                mode: mode,\r\n            };\r\n        }\r\n        function getModeAsString(value, defaultMode, trueMode) {\r\n            if (typeof value === \"object\") {\r\n                return getModeAsString(value.mode, defaultMode, trueMode) + \"\";\r\n            }\r\n            else if (typeof value === \"undefined\") {\r\n                if (typeof defaultMode === \"boolean\" && !defaultMode) {\r\n                    return undefined;\r\n                }\r\n                else {\r\n                    return defaultMode + \"\";\r\n                }\r\n            }\r\n            else if (typeof value === \"boolean\") {\r\n                if (value) {\r\n                    return ((trueMode === undefined) ? defaultMode : trueMode) + \"\";\r\n                }\r\n                else {\r\n                    return undefined;\r\n                }\r\n            }\r\n            return value + \"\";\r\n        }\r\n        var appDefaultMode = false;\r\n        var appDefaultTrueMode = \"startOnly\";\r\n        var activitiesDefaultMode = \"trackMyTypeAndInitiatedFromMe\";\r\n        var layoutsDefaultMode = \"slim\";\r\n        return {\r\n            layouts: getLibConfig(options.layouts, layoutsDefaultMode),\r\n            activities: getLibConfig(options.activities, activitiesDefaultMode),\r\n            appManager: getLibConfig(options.appManager, appDefaultMode, appDefaultTrueMode),\r\n            windows: getLibConfig(options.windows, true),\r\n            channels: getLibConfig(options.channels || false, false),\r\n            displays: getLibConfig(options.displays, true)\r\n        };\r\n    });\n\n    var Glue42Notification = (function () {\r\n        function Glue42Notification(options) {\r\n            this.options = options;\r\n            this.callbacks = lib$2();\r\n            this.actions = options.actions;\r\n            this.body = options.body;\r\n            this.badge = options.badge;\r\n            this.data = options.data;\r\n            this.dir = options.dir;\r\n            this.icon = options.icon;\r\n            this.image = options.image;\r\n            this.lang = options.lang;\r\n            this.renotify = options.renotify;\r\n            this.requireInteraction = options.requireInteraction;\r\n            this.silent = options.silent;\r\n            this.tag = options.tag;\r\n            this.timestamp = options.timestamp;\r\n            this.title = options.title;\r\n        }\r\n        Glue42Notification.prototype.close = function () {\r\n            throw new Error(\"Method not implemented.\");\r\n        };\r\n        Glue42Notification.prototype.addEventListener = function (type, listener, options) {\r\n            this.callbacks.add(type, listener);\r\n        };\r\n        Glue42Notification.prototype.removeEventListener = function (type, listener, options) {\r\n        };\r\n        Glue42Notification.prototype.dispatchEvent = function (event) {\r\n            this.callbacks.execute(event.type, event);\r\n            return true;\r\n        };\r\n        return Glue42Notification;\r\n    }());\n\n    var STARTING_INDEX = 0;\r\n    var Notifications = (function () {\r\n        function Notifications(interop) {\r\n            this.interop = interop;\r\n            this.methodsRegistered = false;\r\n            this.methodNameRoot = \"T42.Notifications.Handler-\" + shortid$1();\r\n            this.nextId = 0;\r\n            this.notifications = {};\r\n        }\r\n        Object.defineProperty(Notifications.prototype, \"maxActions\", {\r\n            get: function () {\r\n                return 2;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Notifications.prototype.raise = function (options) {\r\n            var _a, _b;\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var bunchOfPromises, index, id, notification, validActions, index, _loop_1, this_1, _i, validActions_1, action, g42notification;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            if (!options) {\r\n                                throw new Error(\"invalid options - should be an object\");\r\n                            }\r\n                            if (!options.title) {\r\n                                throw new Error(\"invalid options - should have title\");\r\n                            }\r\n                            if (!!this.methodsRegistered) return [3, 2];\r\n                            bunchOfPromises = [];\r\n                            for (index = STARTING_INDEX; index < this.maxActions; index++) {\r\n                                bunchOfPromises.push(this.interop.register(this.methodNameRoot + \"_\" + index, this.handleNotificationAction.bind(this)));\r\n                            }\r\n                            return [4, Promise.all(bunchOfPromises)];\r\n                        case 1:\r\n                            _c.sent();\r\n                            this.methodsRegistered = true;\r\n                            _c.label = 2;\r\n                        case 2:\r\n                            id = String(this.nextId++);\r\n                            notification = {\r\n                                title: options.title,\r\n                                severity: \"Medium\",\r\n                                description: options.body,\r\n                                glueRoutingDetailMethodName: this.methodNameRoot + \"_\" + STARTING_INDEX,\r\n                                actions: [],\r\n                                source: id\r\n                            };\r\n                            if (options.actions) {\r\n                                validActions = options.actions.slice(0, this.maxActions);\r\n                                index = STARTING_INDEX;\r\n                                _loop_1 = function (action) {\r\n                                    var args = {\r\n                                        g42notificationId: id,\r\n                                        g42action: action.action,\r\n                                        g42interopMethod: (_a = action.interop) === null || _a === void 0 ? void 0 : _a.method,\r\n                                        g42interopTarget: (_b = action.interop) === null || _b === void 0 ? void 0 : _b.target,\r\n                                    };\r\n                                    var parameters = Object.keys(args).map(function (key) {\r\n                                        var value = args[key];\r\n                                        return {\r\n                                            name: key,\r\n                                            value: {\r\n                                                stringValue: value\r\n                                            }\r\n                                        };\r\n                                    });\r\n                                    var glueAction = {\r\n                                        name: this_1.methodNameRoot + \"_\" + index,\r\n                                        description: action.title,\r\n                                        displayName: action.title,\r\n                                        parameters: parameters\r\n                                    };\r\n                                    notification.actions.push(glueAction);\r\n                                    index++;\r\n                                };\r\n                                this_1 = this;\r\n                                for (_i = 0, validActions_1 = validActions; _i < validActions_1.length; _i++) {\r\n                                    action = validActions_1[_i];\r\n                                    _loop_1(action);\r\n                                }\r\n                            }\r\n                            return [4, this.interop.invoke(\"T42.GNS.Publish.RaiseNotification\", { notification: notification })];\r\n                        case 3:\r\n                            _c.sent();\r\n                            g42notification = new Glue42Notification(options);\r\n                            this.notifications[id] = g42notification;\r\n                            return [2, g42notification];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Notifications.prototype.handleNotificationAction = function (args) {\r\n            if (args.g42notificationId) {\r\n                var payload_1 = args;\r\n                var id = payload_1.g42notificationId;\r\n                var notification = this.notifications[id];\r\n                if (!notification) {\r\n                    return;\r\n                }\r\n                var event_1 = new Event(\"onaction\");\r\n                event_1.action = payload_1.g42action;\r\n                if (notification.onaction) {\r\n                    notification.onaction(event_1);\r\n                }\r\n                var actionDefinition = (notification.actions || []).find(function (item) { return item.action === payload_1.g42action; });\r\n                var actionInterop = actionDefinition.interop;\r\n                if (actionInterop) {\r\n                    this.interop.invoke(actionInterop.method, actionInterop.arguments || {}, actionInterop.target || \"best\");\r\n                }\r\n                notification.dispatchEvent(event_1);\r\n            }\r\n            else if (args.notification && args.notification.source) {\r\n                var id = args.notification.source;\r\n                var notification = this.notifications[id];\r\n                if (!notification) {\r\n                    return;\r\n                }\r\n                var event_2 = new Event(\"onclick\");\r\n                if (notification.onclick) {\r\n                    notification.onclick(event_2);\r\n                }\r\n                var clickInterop = notification.options.clickInterop;\r\n                if (clickInterop) {\r\n                    this.interop.invoke(clickInterop.method, clickInterop.arguments || {}, clickInterop.target || \"best\");\r\n                }\r\n                notification.dispatchEvent(event_2);\r\n            }\r\n        };\r\n        return Notifications;\r\n    }());\n\n    var ThemesConfigurationMethodName = \"T42.Themes.Configuration\";\r\n    var ThemesImpl = (function () {\r\n        function ThemesImpl(core) {\r\n            this.core = core;\r\n            this.registry = lib$2();\r\n            this.isSubscribed = false;\r\n            this.getConfiguration();\r\n        }\r\n        ThemesImpl.prototype.list = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.getConfiguration()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            if (!this.getMethodName) {\r\n                                throw new Error(\"not supported\");\r\n                            }\r\n                            return [4, this.getAll()];\r\n                        case 2: return [2, (_a.sent()).returned.all];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ThemesImpl.prototype.getCurrent = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var all;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.getConfiguration()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            if (!this.getMethodName) {\r\n                                throw new Error(\"not supported\");\r\n                            }\r\n                            return [4, this.getAll()];\r\n                        case 2:\r\n                            all = _a.sent();\r\n                            return [2, all.returned.all.find(function (t) { return t.name === all.returned.selected; })];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ThemesImpl.prototype.select = function (theme) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.getConfiguration()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            if (!this.setMethodName) {\r\n                                throw new Error(\"not supported\");\r\n                            }\r\n                            return [4, this.core.interop.invoke(this.setMethodName, { theme: theme })];\r\n                        case 2:\r\n                            _a.sent();\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ThemesImpl.prototype.onChanged = function (callback) {\r\n            this.subscribe();\r\n            return this.registry.add(\"changed\", callback);\r\n        };\r\n        ThemesImpl.prototype.getConfiguration = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var config, error_1;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            _a.trys.push([0, 2, , 3]);\r\n                            if (this.sharedContextName) {\r\n                                return [2];\r\n                            }\r\n                            return [4, this.core.interop.invoke(ThemesConfigurationMethodName)];\r\n                        case 1:\r\n                            config = _a.sent();\r\n                            this.sharedContextName = config.returned.sharedContextName;\r\n                            this.getMethodName = config.returned.getThemesMethodName;\r\n                            this.setMethodName = config.returned.setThemesMethodName;\r\n                            return [3, 3];\r\n                        case 2:\r\n                            error_1 = _a.sent();\r\n                            return [2];\r\n                        case 3: return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ThemesImpl.prototype.getAll = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.getConfiguration()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [4, this.core.interop.invoke(this.getMethodName)];\r\n                        case 2: return [2, _a.sent()];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ThemesImpl.prototype.subscribe = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.getConfiguration()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            if (this.isSubscribed) {\r\n                                return [2];\r\n                            }\r\n                            this.isSubscribed = true;\r\n                            this.core.contexts.subscribe(this.sharedContextName, function (data) {\r\n                                if (data && data.all && data.selected) {\r\n                                    _this.registry.execute(\"changed\", data.all.find(function (t) { return t.name === data.selected; }));\r\n                                }\r\n                            });\r\n                            return [2];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return ThemesImpl;\r\n    }());\n\n    function factory$2(core) {\r\n        var themes = new ThemesImpl(core);\r\n        return {\r\n            list: themes.list.bind(themes),\r\n            getCurrent: themes.getCurrent.bind(themes),\r\n            select: themes.select.bind(themes),\r\n            onChanged: themes.onChanged.bind(themes),\r\n            ready: function () { return Promise.resolve(); },\r\n        };\r\n    }\n\n    var GLUE42_FDC3_INTENTS_METHOD_PREFIX = \"Tick42.FDC3.Intents.\";\r\n    var Intents = (function () {\r\n        function Intents(interop, windows, logger) {\r\n            this.interop = interop;\r\n            this.windows = windows;\r\n            this.logger = logger;\r\n        }\r\n        Intents.prototype.find = function (intentFilter) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var intents, ctToLower_1;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.all()];\r\n                        case 1:\r\n                            intents = _a.sent();\r\n                            if (typeof intentFilter === \"undefined\") {\r\n                                return [2, intents];\r\n                            }\r\n                            if (typeof intentFilter === \"string\") {\r\n                                return [2, intents.filter(function (intent) { return intent.name === intentFilter; })];\r\n                            }\r\n                            if (typeof intentFilter !== \"object\") {\r\n                                throw new Error(\"Please provide the intentFilter as a string or an object!\");\r\n                            }\r\n                            if (intentFilter.contextType) {\r\n                                ctToLower_1 = intentFilter.contextType.toLowerCase();\r\n                                intents = intents.filter(function (intent) { return intent.handlers.some(function (handler) { var _a; return (_a = handler.contextTypes) === null || _a === void 0 ? void 0 : _a.some(function (ct) { return ct.toLowerCase() === ctToLower_1; }); }); });\r\n                            }\r\n                            if (intentFilter.name) {\r\n                                intents = intents.filter(function (intent) { return intent.name === intentFilter.name; });\r\n                            }\r\n                            return [2, intents];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.raise = function (intent) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var intentName, intentDef, isDynamicIntent, target, handler, anAppHandler, anInstanceHandler, instanceId, result;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\r\n                                throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\r\n                            }\r\n                            if (typeof intent === \"string\") {\r\n                                intent = {\r\n                                    intent: intent\r\n                                };\r\n                            }\r\n                            intentName = intent.intent;\r\n                            return [4, this.get(intentName)];\r\n                        case 1:\r\n                            intentDef = _a.sent();\r\n                            if (typeof intentDef === \"undefined\") {\r\n                                throw new Error(\"Intent \" + intentName + \" not found.\");\r\n                            }\r\n                            isDynamicIntent = !intentDef.handlers.some(function (intentDefHandler) { return intentDefHandler.type === \"app\"; });\r\n                            target = intent.target || (isDynamicIntent ? \"reuse\" : \"startNew\");\r\n                            anAppHandler = intentDef.handlers.find(function (intentHandler) { return intentHandler.type === \"app\"; });\r\n                            if (target === \"startNew\") {\r\n                                handler = anAppHandler;\r\n                            }\r\n                            else if (target === \"reuse\") {\r\n                                anInstanceHandler = intentDef.handlers.find(function (intentHandler) { return intentHandler.type === \"instance\"; });\r\n                                handler = anInstanceHandler || anAppHandler;\r\n                            }\r\n                            else if (target.instance) {\r\n                                handler = intentDef.handlers.find(function (intentHandler) { return intentHandler.type === \"instance\" && intentHandler.instanceId === target.instance; });\r\n                            }\r\n                            else if (target.app) {\r\n                                handler = intentDef.handlers.find(function (intentHandler) { return intentHandler.type === \"app\" && intentHandler.applicationName === target.app; });\r\n                            }\r\n                            else {\r\n                                throw new Error(\"Invalid intent target: \" + JSON.stringify(target));\r\n                            }\r\n                            if (!handler) {\r\n                                throw new Error(\"Can not raise intent for request \" + JSON.stringify(intent) + \" - can not find intent handler.\");\r\n                            }\r\n                            instanceId = handler.instanceId;\r\n                            if (!(handler.type === \"app\")) return [3, 3];\r\n                            return [4, this.startApp(handler.applicationName, intent.options)];\r\n                        case 2:\r\n                            instanceId = _a.sent();\r\n                            _a.label = 3;\r\n                        case 3: return [4, this.raiseIntentToInstance(instanceId, intentName, intent.context)];\r\n                        case 4:\r\n                            result = _a.sent();\r\n                            result.request = intent;\r\n                            result.handler = handler;\r\n                            return [2, result];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.all = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var apps, result, e_1, intents, appsWithIntents, _i, appsWithIntents_1, app, _a, _b, intentDef, intent, handler, servers, serverWindowIds, T42WndGetInfo, isT42WndGetInfoMethodRegistered, windowsInfos, result, e_2, _loop_1, _c, servers_1, server;\r\n                var _this = this;\r\n                return __generator(this, function (_d) {\r\n                    switch (_d.label) {\r\n                        case 0:\r\n                            _d.trys.push([0, 2, , 3]);\r\n                            return [4, this.interop.invoke(\"T42.ACS.GetApplications\", { withIntentsInfo: true })];\r\n                        case 1:\r\n                            result = _d.sent();\r\n                            apps = result.returned.applications;\r\n                            return [3, 3];\r\n                        case 2:\r\n                            e_1 = _d.sent();\r\n                            this.logger.error(\"Failed to get the applications!\", e_1);\r\n                            return [2, []];\r\n                        case 3:\r\n                            intents = {};\r\n                            appsWithIntents = apps.filter(function (app) { return app.intents && app.intents.length > 0; });\r\n                            for (_i = 0, appsWithIntents_1 = appsWithIntents; _i < appsWithIntents_1.length; _i++) {\r\n                                app = appsWithIntents_1[_i];\r\n                                for (_a = 0, _b = app.intents; _a < _b.length; _a++) {\r\n                                    intentDef = _b[_a];\r\n                                    intent = intents[intentDef.name];\r\n                                    if (!intent) {\r\n                                        intent = {\r\n                                            name: intentDef.name,\r\n                                            handlers: [],\r\n                                        };\r\n                                        intents[intentDef.name] = intent;\r\n                                    }\r\n                                    handler = {\r\n                                        applicationName: app.name,\r\n                                        applicationTitle: app.title,\r\n                                        applicationDescription: app.caption,\r\n                                        displayName: intentDef.displayName,\r\n                                        contextTypes: intentDef.contexts,\r\n                                        applicationIcon: app.icon,\r\n                                        type: \"app\"\r\n                                    };\r\n                                    intent.handlers.push(handler);\r\n                                }\r\n                            }\r\n                            servers = this.interop.servers();\r\n                            serverWindowIds = servers.map(function (server) { return server.windowId; }).filter(function (serverWindowId) { return typeof serverWindowId !== \"undefined\"; });\r\n                            T42WndGetInfo = \"T42.Wnd.GetInfo\";\r\n                            isT42WndGetInfoMethodRegistered = this.interop.methods().some(function (method) { return method.name === T42WndGetInfo; });\r\n                            if (!isT42WndGetInfoMethodRegistered) return [3, 7];\r\n                            _d.label = 4;\r\n                        case 4:\r\n                            _d.trys.push([4, 6, , 7]);\r\n                            return [4, this.interop.invoke(T42WndGetInfo, { ids: serverWindowIds })];\r\n                        case 5:\r\n                            result = _d.sent();\r\n                            windowsInfos = result.returned.windows;\r\n                            return [3, 7];\r\n                        case 6:\r\n                            e_2 = _d.sent();\r\n                            return [3, 7];\r\n                        case 7:\r\n                            _loop_1 = function (server) {\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0: return [4, Promise.all(server.getMethods()\r\n                                                .filter(function (method) { return method.name.startsWith(GLUE42_FDC3_INTENTS_METHOD_PREFIX); })\r\n                                                .map(function (method) { return __awaiter(_this, void 0, void 0, function () {\r\n                                                var intentName, intent, info, app, appIntent, title, handler;\r\n                                                var _a, _b, _c, _d, _e;\r\n                                                return __generator(this, function (_f) {\r\n                                                    switch (_f.label) {\r\n                                                        case 0:\r\n                                                            intentName = method.name.replace(GLUE42_FDC3_INTENTS_METHOD_PREFIX, \"\");\r\n                                                            intent = intents[intentName];\r\n                                                            if (!intent) {\r\n                                                                intent = {\r\n                                                                    name: intentName,\r\n                                                                    handlers: [],\r\n                                                                };\r\n                                                                intents[intentName] = intent;\r\n                                                            }\r\n                                                            info = method.flags;\r\n                                                            app = apps.find(function (appWithIntents) { return appWithIntents.name === server.application; });\r\n                                                            if (app && app.intents) {\r\n                                                                appIntent = app.intents.find(function (appDefIntent) { return appDefIntent.name === intentName; });\r\n                                                            }\r\n                                                            return [4, this.windowsIdToTitle(server.windowId, windowsInfos)];\r\n                                                        case 1:\r\n                                                            title = _f.sent();\r\n                                                            handler = {\r\n                                                                instanceId: server.instance,\r\n                                                                applicationName: server.application,\r\n                                                                applicationIcon: info.icon || ((_a = app) === null || _a === void 0 ? void 0 : _a.icon),\r\n                                                                applicationTitle: (_b = app) === null || _b === void 0 ? void 0 : _b.title,\r\n                                                                applicationDescription: info.description || ((_c = app) === null || _c === void 0 ? void 0 : _c.caption),\r\n                                                                displayName: info.displayName || ((_d = appIntent) === null || _d === void 0 ? void 0 : _d.displayName),\r\n                                                                contextTypes: info.contextTypes || ((_e = appIntent) === null || _e === void 0 ? void 0 : _e.contexts),\r\n                                                                instanceTitle: title,\r\n                                                                type: \"instance\"\r\n                                                            };\r\n                                                            intent.handlers.push(handler);\r\n                                                            return [2];\r\n                                                    }\r\n                                                });\r\n                                            }); }))];\r\n                                        case 1:\r\n                                            _a.sent();\r\n                                            return [2];\r\n                                    }\r\n                                });\r\n                            };\r\n                            _c = 0, servers_1 = servers;\r\n                            _d.label = 8;\r\n                        case 8:\r\n                            if (!(_c < servers_1.length)) return [3, 11];\r\n                            server = servers_1[_c];\r\n                            return [5, _loop_1(server)];\r\n                        case 9:\r\n                            _d.sent();\r\n                            _d.label = 10;\r\n                        case 10:\r\n                            _c++;\r\n                            return [3, 8];\r\n                        case 11: return [2, Object.values(intents)];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.addIntentListener = function (intent, handler) {\r\n            var _this = this;\r\n            if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\r\n                throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\r\n            }\r\n            if (typeof handler !== \"function\") {\r\n                throw new Error(\"Please provide the handler as a function!\");\r\n            }\r\n            var result = { unsubscribe: function () { return console.log(\"Could not unsubscribe!\"); } };\r\n            var intentName = typeof intent === \"string\" ? intent : intent.intent;\r\n            var methodName = \"\" + GLUE42_FDC3_INTENTS_METHOD_PREFIX + intentName;\r\n            var flags = typeof intent === \"string\" ? { intent: intent } : intent;\r\n            this.interop.register({ name: methodName, flags: flags }, function (args) {\r\n                return handler(args);\r\n            }).then(function () {\r\n                result.unsubscribe = function () {\r\n                    _this.interop.unregister(methodName);\r\n                };\r\n            });\r\n            return result;\r\n        };\r\n        Intents.prototype.get = function (intent) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.all()];\r\n                        case 1: return [2, (_a.sent()).find(function (registeredIntent) { return registeredIntent.name === intent; })];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.startApp = function (application, options) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var result;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4, this.interop.invoke(\"T42.ACS.StartApplication\", { Name: application, options: options })];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            return [2, result.returned.Id];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.raiseIntentToInstance = function (instanceId, intent, context) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var methodName, interopServer, method, result;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            methodName = \"\" + GLUE42_FDC3_INTENTS_METHOD_PREFIX + intent;\r\n                            interopServer = this.interop.servers().find(function (server) { return server.instance === instanceId; });\r\n                            if (!!interopServer) return [3, 2];\r\n                            return [4, (new Promise(function (resolve, reject) {\r\n                                    var timeoutId;\r\n                                    var unsub = _this.interop.serverAdded(function (server) {\r\n                                        if (server.instance === instanceId) {\r\n                                            interopServer = server;\r\n                                            resolve();\r\n                                            clearTimeout(timeoutId);\r\n                                            unsub();\r\n                                        }\r\n                                    });\r\n                                    timeoutId = setTimeout(function () {\r\n                                        unsub();\r\n                                        reject(new Error(\"Can not find interop server for instance \" + instanceId));\r\n                                    }, 30 * 1000);\r\n                                }))];\r\n                        case 1:\r\n                            _a.sent();\r\n                            _a.label = 2;\r\n                        case 2:\r\n                            method = interopServer.getMethods().find(function (registeredMethod) { return registeredMethod.name === methodName; });\r\n                            if (!!method) return [3, 4];\r\n                            return [4, (new Promise(function (resolve, reject) {\r\n                                    var timeoutId;\r\n                                    var unsub = _this.interop.methodAdded(function (addedMethod) {\r\n                                        if (addedMethod.name === methodName) {\r\n                                            resolve();\r\n                                            clearTimeout(timeoutId);\r\n                                            unsub();\r\n                                        }\r\n                                    });\r\n                                    timeoutId = setTimeout(function () {\r\n                                        unsub();\r\n                                        reject(new Error(\"Can not find interop method \" + methodName + \" for instance \" + instanceId));\r\n                                    }, 10 * 1000);\r\n                                }))];\r\n                        case 3:\r\n                            _a.sent();\r\n                            _a.label = 4;\r\n                        case 4: return [4, this.interop.invoke(methodName, context, { instance: instanceId })];\r\n                        case 5:\r\n                            result = _a.sent();\r\n                            return [2, {\r\n                                    result: result.returned\r\n                                }];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Intents.prototype.windowsIdToTitle = function (id, windowsInfos) {\r\n            var _a, _b, _c;\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var window, title;\r\n                return __generator(this, function (_d) {\r\n                    switch (_d.label) {\r\n                        case 0:\r\n                            if (typeof windowsInfos !== \"undefined\") {\r\n                                return [2, (_a = windowsInfos.find(function (windowsInfo) { return windowsInfo.id === id; })) === null || _a === void 0 ? void 0 : _a.title];\r\n                            }\r\n                            window = (_b = this.windows) === null || _b === void 0 ? void 0 : _b.findById(id);\r\n                            return [4, ((_c = window) === null || _c === void 0 ? void 0 : _c.getTitle())];\r\n                        case 1:\r\n                            title = _d.sent();\r\n                            return [2, title];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return Intents;\r\n    }());\n\n    var InitInfo = (function () {\r\n        function InitInfo() {\r\n            var _this = this;\r\n            this.numberOfCalls = 0;\r\n            this.numberOfCalls = 1;\r\n            this.promise = new Promise(function (resolve, reject) {\r\n                _this.resolve = resolve;\r\n                _this.reject = reject;\r\n            });\r\n        }\r\n        InitInfo.prototype.getPromise = function () {\r\n            this.numberOfCalls++;\r\n            return this.promise;\r\n        };\r\n        InitInfo.prototype.done = function (g) {\r\n            this.resolve(g);\r\n        };\r\n        InitInfo.prototype.error = function (e) {\r\n            this.reject(e);\r\n        };\r\n        return InitInfo;\r\n    }());\n\n    var initInfo;\r\n    var factory$3 = function (options) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var glue42gd, g;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    glue42gd = typeof window !== \"undefined\" && window.glue42gd;\r\n                    if (glue42gd) {\r\n                        if (initInfo) {\r\n                            return [2, initInfo.getPromise()];\r\n                        }\r\n                        else {\r\n                            initInfo = new InitInfo();\r\n                        }\r\n                    }\r\n                    return [4, factoryCore(options, glue42gd)];\r\n                case 1:\r\n                    g = _b.sent();\r\n                    (_a = initInfo) === null || _a === void 0 ? void 0 : _a.resolve(g);\r\n                    return [2, g];\r\n            }\r\n        });\r\n    }); };\r\n    var factoryCore = function (options, glue42gd) { return __awaiter(void 0, void 0, void 0, function () {\r\n        function createWindows(core) {\r\n            if (glueConfig.windows) {\r\n                var windowsLogger = getLibLogger(\"windows\", core.logger, glueConfig.windows);\r\n                _windows = WindowsFactory(core.agm, windowsLogger, function () {\r\n                    return _appManager;\r\n                }, function () {\r\n                    return _displays;\r\n                }, gdMajorVersion);\r\n                debugLog(_windows);\r\n                return _windows;\r\n            }\r\n        }\r\n        function createActivities(core) {\r\n            var _a, _b;\r\n            if (glueConfig.activities) {\r\n                if (ActivityModule.checkIsUsingGW3Implementation && ActivityModule.checkIsUsingGW3Implementation(core.connection)) {\r\n                    var activityLogger = getLibLogger(\"activity\", core.logger, glueConfig.activities);\r\n                    _activity = new ActivityModule({\r\n                        connection: core.connection,\r\n                        contexts: core.contexts,\r\n                        agm: core.agm,\r\n                        logger: activityLogger,\r\n                        logLevel: \"info\",\r\n                        disableAutoAnnounce: false,\r\n                        disposeRequestHandling: \"exit\",\r\n                        announcementInfo: null,\r\n                        windows: _windows,\r\n                        appManagerGetter: function () {\r\n                            return _appManager;\r\n                        },\r\n                        mode: glueConfig.activities.mode,\r\n                        typesToTrack: glueConfig.activities.typesToTrack,\r\n                        activityId: (_b = (_a = glue42gd) === null || _a === void 0 ? void 0 : _a.activityInfo) === null || _b === void 0 ? void 0 : _b.activityId,\r\n                        gdMajorVersion: gdMajorVersion\r\n                    }).api;\r\n                    debugLog(_activity);\r\n                    return _activity;\r\n                }\r\n            }\r\n        }\r\n        function createAppManager(core) {\r\n            if (!glueConfig.appManager) {\r\n                return;\r\n            }\r\n            var logger = getLibLogger(\"appManager\", core.logger, glueConfig.appManager);\r\n            _appManager = AppManagerFactory({\r\n                agm: core.agm,\r\n                windows: _windows,\r\n                logger: logger,\r\n                activities: _activity,\r\n                mode: glueConfig.appManager.mode,\r\n                gdMajorVersion: gdMajorVersion\r\n            });\r\n            debugLog(_appManager);\r\n            return _appManager;\r\n        }\r\n        function createLayouts(core) {\r\n            var _a;\r\n            if (!glueConfig.layouts) {\r\n                return;\r\n            }\r\n            var logger = getLibLogger(\"layouts\", core.logger, glueConfig.layouts);\r\n            var layoutsConfig = glueConfig.layouts;\r\n            var lay = LayoutsFactory({\r\n                agm: core.agm,\r\n                appManager: _appManager,\r\n                activityGetter: function () { return _activity; },\r\n                logger: logger,\r\n                mode: layoutsConfig.mode,\r\n                autoSaveWindowContext: (_a = layoutsConfig.autoSaveWindowContext, (_a !== null && _a !== void 0 ? _a : false)),\r\n                gdMajorVersion: gdMajorVersion\r\n            });\r\n            debugLog(lay);\r\n            return lay;\r\n        }\r\n        function createChannels(core) {\r\n            if (!glueConfig.channels) {\r\n                return;\r\n            }\r\n            if (!core.contexts) {\r\n                return;\r\n            }\r\n            var channelsAPI = factory(core.contexts, core.agm);\r\n            debugLog(channelsAPI);\r\n            return channelsAPI;\r\n        }\r\n        function createHotkeys(core) {\r\n            var hotkeysAPI = factory$1(core.agm);\r\n            debugLog(hotkeysAPI);\r\n            return hotkeysAPI;\r\n        }\r\n        function createIntents(core) {\r\n            var intentsAPI = new Intents(core.agm, _windows, core.logger.subLogger(\"intents\"));\r\n            debugLog(intentsAPI);\r\n            return intentsAPI;\r\n        }\r\n        function createNotifications(core) {\r\n            var notificationsAPI = new Notifications(core.interop);\r\n            debugLog(notificationsAPI);\r\n            return notificationsAPI;\r\n        }\r\n        function createDisplaysApi(core) {\r\n            if (glueConfig.displays) {\r\n                var displaysLogger = getLibLogger(\"displays\", core.logger, glueConfig.displays);\r\n                _displays = new DisplayManager(core.agm, displaysLogger);\r\n                debugLog(_displays);\r\n                return _displays;\r\n            }\r\n        }\r\n        function createThemes(core) {\r\n            if (!core.contexts) {\r\n                return;\r\n            }\r\n            var themesAPI = factory$2(core);\r\n            debugLog(themesAPI);\r\n            return themesAPI;\r\n        }\r\n        function getLibLogger(loggerName, logger, config) {\r\n            var newLogger = logger.subLogger(loggerName);\r\n            if (config && config.logger) {\r\n                var loggerConfig = config.logger;\r\n                if (loggerConfig.console) {\r\n                    newLogger.consoleLevel(loggerConfig.console);\r\n                }\r\n                if (loggerConfig.publish) {\r\n                    newLogger.publishLevel(loggerConfig.publish);\r\n                }\r\n            }\r\n            return newLogger;\r\n        }\r\n        function debugLog(entry) {\r\n            currentLog.push(entry);\r\n        }\r\n        var gdMajorVersion, glueConfig, _appManager, _activity, _windows, _displays, ext, currentLog, glueApi;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    gdMajorVersion = Utils$1.getGDMajorVersion();\r\n                    options = options || {};\r\n                    glueConfig = prepareConfig$1(options);\r\n                    options.gateway = options.gateway || {};\r\n                    ext = {\r\n                        libs: [\r\n                            { name: \"windows\", create: createWindows },\r\n                            { name: \"activities\", create: createActivities },\r\n                            { name: \"appManager\", create: createAppManager },\r\n                            { name: \"layouts\", create: createLayouts },\r\n                            { name: \"channels\", create: createChannels },\r\n                            { name: \"hotkeys\", create: createHotkeys },\r\n                            { name: \"displays\", create: createDisplaysApi },\r\n                            { name: \"intents\", create: createIntents },\r\n                            { name: \"notifications\", create: createNotifications },\r\n                            { name: \"themes\", create: createThemes }\r\n                        ],\r\n                        version: version$2,\r\n                        enrichGlue: function (glue) {\r\n                            glue.config.activities = glueConfig.activities;\r\n                            glue.config.windows = glueConfig.windows;\r\n                            glue.config.appManager = glueConfig.appManager;\r\n                            glue.config.layouts = glueConfig.layouts;\r\n                            glue.config.channels = glueConfig.channels;\r\n                            glue.config.displays = glueConfig.displays;\r\n                        },\r\n                    };\r\n                    currentLog = [];\r\n                    if (typeof window !== \"undefined\") {\r\n                        if (!window.glueFactoryLog) {\r\n                            window.glueFactoryLog = [];\r\n                        }\r\n                        window.glueFactoryLog.push(currentLog);\r\n                    }\r\n                    return [4, GlueCore(options, ext)];\r\n                case 1:\r\n                    glueApi = (_b.sent());\r\n                    if (!(Array.isArray((_a = options) === null || _a === void 0 ? void 0 : _a.libraries) && options.libraries.length)) return [3, 3];\r\n                    return [4, Promise.all(options.libraries.map(function (lib) { return lib(glueApi, options); }))];\r\n                case 2:\r\n                    _b.sent();\r\n                    _b.label = 3;\r\n                case 3: return [2, glueApi];\r\n            }\r\n        });\r\n    }); };\r\n    factory$3.coreVersion = GlueCore.version;\r\n    factory$3.version = version$2;\r\n    factory$3.initInfo = initInfo;\n\n    var whatToExpose = factory$3;\r\n    var shouldSetToWindow = true;\r\n    if (typeof window !== \"undefined\") {\r\n        var glue42gd = window.glue42gd;\r\n        if (glue42gd && glue42gd.autoInjected) {\r\n            whatToExpose = window.Glue;\r\n            shouldSetToWindow = false;\r\n        }\r\n        if (shouldSetToWindow) {\r\n            window.Glue = whatToExpose;\r\n        }\r\n        delete window.GlueCore;\r\n    }\r\n    whatToExpose.default = whatToExpose;\r\n    var whatToExpose$1 = whatToExpose;\n\n    return whatToExpose$1;\n\n})));\n//# sourceMappingURL=desktop.browser.js.map\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (newInputs[i] !== lastInputs[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      var _tag = createStyleElement(this);\n\n      var before;\n\n      if (this.tags.length === 0) {\n        before = this.before;\n      } else {\n        before = this.tags[this.tags.length - 1].nextSibling;\n      }\n\n      this.container.insertBefore(_tag, before);\n      this.tags.push(_tag);\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is a really hot path\n        // we check the second character first because having \"i\"\n        // as the second character will happen less often than\n        // having \"@\" as the first character\n        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n\n        sheet.insertRule(rule, // we need to insert @import rules before anything else\n        // otherwise there will be an error\n        // technically this means that the @import rules will\n        // _usually_(not always since there could be multiple style tags)\n        // be the first ones in prod and generally later in dev\n        // this shouldn't really matter in the real world though\n        // @import is generally only used for font faces from google fonts and etc.\n        // so while this could be technically correct then it would be slower and larger\n        // for a tiny bit of correctness that won't matter in the real world\n        isImportRule ? 0 : sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","function stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n          T(d[c]);\n        } else Y = !!d | 0;\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexport default stylis_min;\n","import { StyleSheet } from '@emotion/sheet';\nimport Stylis from '@emotion/stylis';\nimport '@emotion/weak-memoize';\n\n// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n// since we use stylis after closure compiler\nvar delimiter = '/*|*/';\nvar needle = delimiter + '}';\n\nfunction toSheet(block) {\n  if (block) {\n    Sheet.current.insert(block + '}');\n  }\n}\n\nvar Sheet = {\n  current: null\n};\nvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n  switch (context) {\n    // property\n    case 1:\n      {\n        switch (content.charCodeAt(0)) {\n          case 64:\n            {\n              // @import\n              Sheet.current.insert(content + ';');\n              return '';\n            }\n          // charcode for l\n\n          case 108:\n            {\n              // charcode for b\n              // this ignores label\n              if (content.charCodeAt(2) === 98) {\n                return '';\n              }\n            }\n        }\n\n        break;\n      }\n    // selector\n\n    case 2:\n      {\n        if (ns === 0) return content + delimiter;\n        break;\n      }\n    // at-rule\n\n    case 3:\n      {\n        switch (ns) {\n          // @font-face, @page\n          case 102:\n          case 112:\n            {\n              Sheet.current.insert(selectors[0] + content);\n              return '';\n            }\n\n          default:\n            {\n              return content + (at === 0 ? delimiter : '');\n            }\n        }\n      }\n\n    case -2:\n      {\n        content.split(needle).forEach(toSheet);\n      }\n  }\n};\n\nvar createCache = function createCache(options) {\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var stylis = new Stylis(stylisOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n\n  {\n    container = options.container || document.head;\n    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\n      attrib.split(' ').forEach(function (id) {\n        inserted[id] = true;\n      });\n\n      if (node.parentNode !== container) {\n        container.appendChild(node);\n      }\n    });\n  }\n\n  var _insert;\n\n  {\n    stylis.use(options.stylisPlugins)(ruleSheet);\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      Sheet.current = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        var map = serialized.map;\n        Sheet.current = {\n          insert: function insert(rule) {\n            sheet.insert(rule + map);\n          }\n        };\n      }\n\n      stylis(selector, serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[name] = true;\n      }\n    };\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n    var commentStart = /\\/\\*/g;\n    var commentEnd = /\\*\\//g;\n    stylis.use(function (context, content) {\n      switch (context) {\n        case -1:\n          {\n            while (commentStart.test(content)) {\n              commentEnd.lastIndex = commentStart.lastIndex;\n\n              if (commentEnd.test(content)) {\n                commentStart.lastIndex = commentEnd.lastIndex;\n                continue;\n              }\n\n              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n            }\n\n            commentStart.lastIndex = 0;\n            break;\n          }\n      }\n    });\n    stylis.use(function (context, content, selectors) {\n      switch (context) {\n        case -1:\n          {\n            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\n            if (unsafePseudoClasses && cache.compat !== true) {\n              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n                var ignore = ignoreRegExp.test(content);\n\n                if (unsafePseudoClass && !ignore) {\n                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n                }\n              });\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  return cache;\n};\n\nexport default createCache;\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className]);\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport default murmur2;\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\nfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n\n  if (process.env.NODE_ENV !== 'production' && couldBeSelectorInterpolation && shouldWarnAboutInterpolatingClassNameFromCss && cached !== undefined) {\n    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n    shouldWarnAboutInterpolatingClassNameFromCss = false;\n  }\n\n  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i], false);\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings, false);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","import '@babel/runtime/helpers/inheritsLoose';\nimport { createContext, forwardRef, createElement } from 'react';\nimport createCache from '@emotion/cache';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar EmotionCacheContext = /*#__PURE__*/createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? createCache() : null);\nvar ThemeContext = /*#__PURE__*/createContext({});\nvar CacheProvider = EmotionCacheContext.Provider;\n\nvar withEmotionCache = function withEmotionCache(func) {\n  var render = function render(props, ref) {\n    return /*#__PURE__*/createElement(EmotionCacheContext.Consumer, null, function (cache) {\n      return func(props, cache, ref);\n    });\n  }; // $FlowFixMe\n\n\n  return /*#__PURE__*/forwardRef(render);\n};\n\n// thus we only need to replace what is a valid character for JS, but not for CSS\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/css' like this: css`\" + props.css + \"`\");\n  }\n\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type; // TODO: check if this still works with all of those different JSX functions\n\n  if (process.env.NODE_ENV !== 'production') {\n    var error = new Error();\n\n    if (error.stack) {\n      // chrome\n      var match = error.stack.match(/at (?:Object\\.|Module\\.|)(?:jsx|createEmotionProps).*\\n\\s+at (?:Object\\.|)([A-Z][A-Za-z$]+) /);\n\n      if (!match) {\n        // safari and firefox\n        match = error.stack.match(/.*\\n([A-Z][A-Za-z$]+)@/);\n      }\n\n      if (match) {\n        newProps[labelPropName] = sanitizeIdentifier(match[1]);\n      }\n    }\n  }\n\n  return newProps;\n};\n\nvar render = function render(cache, props, theme, ref) {\n  var cssProp = theme === null ? props.css : props.css(theme); // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles);\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = /*#__PURE__*/createElement(type, newProps);\n\n  return ele;\n}; // eslint-disable-next-line no-undef\n\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  if (typeof props.css === 'function') {\n    return /*#__PURE__*/createElement(ThemeContext.Consumer, null, function (theme) {\n      return render(cache, props, theme, ref);\n    });\n  }\n\n  return render(cache, props, null, ref);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n}\n\nexport { CacheProvider as C, Emotion as E, ThemeContext as T, createEmotionProps as c, hasOwnProperty as h, withEmotionCache as w };\n","import { serializeStyles } from '@emotion/serialize';\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serializeStyles(args);\n}\n\nexport default css;\n","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport { createElement, Component } from 'react';\nimport '@emotion/cache';\nimport { h as hasOwnProperty, E as Emotion, c as createEmotionProps, w as withEmotionCache, T as ThemeContext } from './emotion-element-57a3a7a3.browser.esm.js';\nexport { C as CacheProvider, T as ThemeContext, w as withEmotionCache } from './emotion-element-57a3a7a3.browser.esm.js';\nimport { insertStyles, getRegisteredStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\nimport { StyleSheet } from '@emotion/sheet';\nimport css from '@emotion/css';\nexport { default as css } from '@emotion/css';\n\nvar jsx = function jsx(type, props) {\n  var args = arguments;\n\n  if (props == null || !hasOwnProperty.call(props, 'css')) {\n    // $FlowFixMe\n    return createElement.apply(undefined, args);\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = Emotion;\n  createElementArgArray[1] = createEmotionProps(type, props);\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  } // $FlowFixMe\n\n\n  return createElement.apply(null, createElementArgArray);\n};\n\nvar warnedAboutCssPropForGlobal = false;\nvar Global = /* #__PURE__ */withEmotionCache(function (props, cache) {\n  if (process.env.NODE_ENV !== 'production' && !warnedAboutCssPropForGlobal && ( // check for className as well since the user is\n  // probably using the custom createElement which\n  // means it will be turned into a className prop\n  // $FlowFixMe I don't really want to add it to the type since it shouldn't be used\n  props.className || props.css)) {\n    console.error(\"It looks like you're using the css prop on Global, did you mean to use the styles prop instead?\");\n    warnedAboutCssPropForGlobal = true;\n  }\n\n  var styles = props.styles;\n\n  if (typeof styles === 'function') {\n    return /*#__PURE__*/createElement(ThemeContext.Consumer, null, function (theme) {\n      var serialized = serializeStyles([styles(theme)]);\n      return /*#__PURE__*/createElement(InnerGlobal, {\n        serialized: serialized,\n        cache: cache\n      });\n    });\n  }\n\n  var serialized = serializeStyles([styles]);\n  return /*#__PURE__*/createElement(InnerGlobal, {\n    serialized: serialized,\n    cache: cache\n  });\n});\n\n// maintain place over rerenders.\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\nvar InnerGlobal = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(InnerGlobal, _React$Component);\n\n  function InnerGlobal(props, context, updater) {\n    return _React$Component.call(this, props, context, updater) || this;\n  }\n\n  var _proto = InnerGlobal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.sheet = new StyleSheet({\n      key: this.props.cache.key + \"-global\",\n      nonce: this.props.cache.sheet.nonce,\n      container: this.props.cache.sheet.container\n    }); // $FlowFixMe\n\n    var node = document.querySelector(\"style[data-emotion-\" + this.props.cache.key + \"=\\\"\" + this.props.serialized.name + \"\\\"]\");\n\n    if (node !== null) {\n      this.sheet.tags.push(node);\n    }\n\n    if (this.props.cache.sheet.tags.length) {\n      this.sheet.before = this.props.cache.sheet.tags[0];\n    }\n\n    this.insertStyles();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.serialized.name !== this.props.serialized.name) {\n      this.insertStyles();\n    }\n  };\n\n  _proto.insertStyles = function insertStyles$1() {\n    if (this.props.serialized.next !== undefined) {\n      // insert keyframes\n      insertStyles(this.props.cache, this.props.serialized.next, true);\n    }\n\n    if (this.sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = this.sheet.tags[this.sheet.tags.length - 1].nextElementSibling;\n      this.sheet.before = element;\n      this.sheet.flush();\n    }\n\n    this.props.cache.insert(\"\", this.props.serialized, this.sheet, false);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.sheet.flush();\n  };\n\n  _proto.render = function render() {\n\n    return null;\n  };\n\n  return InnerGlobal;\n}(Component);\n\nvar keyframes = function keyframes() {\n  var insertable = css.apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name; // $FlowFixMe\n\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n};\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar ClassNames = withEmotionCache(function (props, context) {\n  return /*#__PURE__*/createElement(ThemeContext.Consumer, null, function (theme) {\n    var hasRendered = false;\n\n    var css = function css() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('css can only be used during render');\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var serialized = serializeStyles(args, context.registered);\n\n      {\n        insertStyles(context, serialized, false);\n      }\n\n      return context.key + \"-\" + serialized.name;\n    };\n\n    var cx = function cx() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('cx can only be used during render');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return merge(context.registered, css, classnames(args));\n    };\n\n    var content = {\n      css: css,\n      cx: cx,\n      theme: theme\n    };\n    var ele = props.children(content);\n    hasRendered = true;\n\n    return ele;\n  });\n});\n\nexport { ClassNames, Global, jsx as createElement, jsx, keyframes };\n","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport { Component, createContext } from 'react';\nimport { jsx, keyframes, ClassNames } from '@emotion/core';\nimport { createPortal } from 'react-dom';\nimport _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _css from '@emotion/css';\nimport _taggedTemplateLiteral from '@babel/runtime/helpers/esm/taggedTemplateLiteral';\nimport AutosizeInput from 'react-input-autosize';\n\n// ==============================\n// NO OP\n// ==============================\nvar noop = function noop() {};\n// Class Name Prefixer\n// ==============================\n\n/**\n String representation of component state for styling with class names.\n\n Expects an array of strings OR a string/object pair:\n - className(['comp', 'comp-arg', 'comp-arg-2'])\n   @returns 'react-select__comp react-select__comp-arg react-select__comp-arg-2'\n - className('comp', { some: true, state: false })\n   @returns 'react-select__comp react-select__comp--some'\n*/\n\nfunction applyPrefixToName(prefix, name) {\n  if (!name) {\n    return prefix;\n  } else if (name[0] === '-') {\n    return prefix + name;\n  } else {\n    return prefix + '__' + name;\n  }\n}\n\nfunction classNames(prefix, state, className) {\n  var arr = [className];\n\n  if (state && prefix) {\n    for (var key in state) {\n      if (state.hasOwnProperty(key) && state[key]) {\n        arr.push(\"\".concat(applyPrefixToName(prefix, key)));\n      }\n    }\n  }\n\n  return arr.filter(function (i) {\n    return i;\n  }).map(function (i) {\n    return String(i).trim();\n  }).join(' ');\n} // ==============================\n// Clean Value\n// ==============================\n\nvar cleanValue = function cleanValue(value) {\n  if (Array.isArray(value)) return value.filter(Boolean);\n  if (_typeof(value) === 'object' && value !== null) return [value];\n  return [];\n}; // ==============================\n// Handle Input Change\n// ==============================\n\nfunction handleInputChange(inputValue, actionMeta, onInputChange) {\n  if (onInputChange) {\n    var newValue = onInputChange(inputValue, actionMeta);\n    if (typeof newValue === 'string') return newValue;\n  }\n\n  return inputValue;\n} // ==============================\n// Scroll Helpers\n// ==============================\n\nfunction isDocumentElement(el) {\n  return [document.documentElement, document.body, window].indexOf(el) > -1;\n} // Normalized Scroll Top\n// ------------------------------\n\nfunction getScrollTop(el) {\n  if (isDocumentElement(el)) {\n    return window.pageYOffset;\n  }\n\n  return el.scrollTop;\n}\nfunction scrollTo(el, top) {\n  // with a scroll distance, we perform scroll on the element\n  if (isDocumentElement(el)) {\n    window.scrollTo(0, top);\n    return;\n  }\n\n  el.scrollTop = top;\n} // Get Scroll Parent\n// ------------------------------\n\nfunction getScrollParent(element) {\n  var style = getComputedStyle(element);\n  var excludeStaticParent = style.position === 'absolute';\n  var overflowRx = /(auto|scroll)/;\n  var docEl = document.documentElement; // suck it, flow...\n\n  if (style.position === 'fixed') return docEl;\n\n  for (var parent = element; parent = parent.parentElement;) {\n    style = getComputedStyle(parent);\n\n    if (excludeStaticParent && style.position === 'static') {\n      continue;\n    }\n\n    if (overflowRx.test(style.overflow + style.overflowY + style.overflowX)) {\n      return parent;\n    }\n  }\n\n  return docEl;\n} // Animated Scroll To\n// ------------------------------\n\n/**\n  @param t: time (elapsed)\n  @param b: initial value\n  @param c: amount of change\n  @param d: duration\n*/\n\nfunction easeOutCubic(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\n\nfunction animatedScrollTo(element, to) {\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;\n  var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : noop;\n  var start = getScrollTop(element);\n  var change = to - start;\n  var increment = 10;\n  var currentTime = 0;\n\n  function animateScroll() {\n    currentTime += increment;\n    var val = easeOutCubic(currentTime, start, change, duration);\n    scrollTo(element, val);\n\n    if (currentTime < duration) {\n      window.requestAnimationFrame(animateScroll);\n    } else {\n      callback(element);\n    }\n  }\n\n  animateScroll();\n} // Scroll Into View\n// ------------------------------\n\nfunction scrollIntoView(menuEl, focusedEl) {\n  var menuRect = menuEl.getBoundingClientRect();\n  var focusedRect = focusedEl.getBoundingClientRect();\n  var overScroll = focusedEl.offsetHeight / 3;\n\n  if (focusedRect.bottom + overScroll > menuRect.bottom) {\n    scrollTo(menuEl, Math.min(focusedEl.offsetTop + focusedEl.clientHeight - menuEl.offsetHeight + overScroll, menuEl.scrollHeight));\n  } else if (focusedRect.top - overScroll < menuRect.top) {\n    scrollTo(menuEl, Math.max(focusedEl.offsetTop - overScroll, 0));\n  }\n} // ==============================\n// Get bounding client object\n// ==============================\n// cannot get keys using array notation with DOMRect\n\nfunction getBoundingClientObj(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    bottom: rect.bottom,\n    height: rect.height,\n    left: rect.left,\n    right: rect.right,\n    top: rect.top,\n    width: rect.width\n  };\n}\n// Touch Capability Detector\n// ==============================\n\nfunction isTouchCapable() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n} // ==============================\n// Mobile Device Detector\n// ==============================\n\nfunction isMobileDevice() {\n  try {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nfunction getMenuPlacement(_ref) {\n  var maxHeight = _ref.maxHeight,\n      menuEl = _ref.menuEl,\n      minHeight = _ref.minHeight,\n      placement = _ref.placement,\n      shouldScroll = _ref.shouldScroll,\n      isFixedPosition = _ref.isFixedPosition,\n      theme = _ref.theme;\n  var spacing = theme.spacing;\n  var scrollParent = getScrollParent(menuEl);\n  var defaultState = {\n    placement: 'bottom',\n    maxHeight: maxHeight\n  }; // something went wrong, return default state\n\n  if (!menuEl || !menuEl.offsetParent) return defaultState; // we can't trust `scrollParent.scrollHeight` --> it may increase when\n  // the menu is rendered\n\n  var _scrollParent$getBoun = scrollParent.getBoundingClientRect(),\n      scrollHeight = _scrollParent$getBoun.height;\n\n  var _menuEl$getBoundingCl = menuEl.getBoundingClientRect(),\n      menuBottom = _menuEl$getBoundingCl.bottom,\n      menuHeight = _menuEl$getBoundingCl.height,\n      menuTop = _menuEl$getBoundingCl.top;\n\n  var _menuEl$offsetParent$ = menuEl.offsetParent.getBoundingClientRect(),\n      containerTop = _menuEl$offsetParent$.top;\n\n  var viewHeight = window.innerHeight;\n  var scrollTop = getScrollTop(scrollParent);\n  var marginBottom = parseInt(getComputedStyle(menuEl).marginBottom, 10);\n  var marginTop = parseInt(getComputedStyle(menuEl).marginTop, 10);\n  var viewSpaceAbove = containerTop - marginTop;\n  var viewSpaceBelow = viewHeight - menuTop;\n  var scrollSpaceAbove = viewSpaceAbove + scrollTop;\n  var scrollSpaceBelow = scrollHeight - scrollTop - menuTop;\n  var scrollDown = menuBottom - viewHeight + scrollTop + marginBottom;\n  var scrollUp = scrollTop + menuTop - marginTop;\n  var scrollDuration = 160;\n\n  switch (placement) {\n    case 'auto':\n    case 'bottom':\n      // 1: the menu will fit, do nothing\n      if (viewSpaceBelow >= menuHeight) {\n        return {\n          placement: 'bottom',\n          maxHeight: maxHeight\n        };\n      } // 2: the menu will fit, if scrolled\n\n\n      if (scrollSpaceBelow >= menuHeight && !isFixedPosition) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollDown, scrollDuration);\n        }\n\n        return {\n          placement: 'bottom',\n          maxHeight: maxHeight\n        };\n      } // 3: the menu will fit, if constrained\n\n\n      if (!isFixedPosition && scrollSpaceBelow >= minHeight || isFixedPosition && viewSpaceBelow >= minHeight) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollDown, scrollDuration);\n        } // we want to provide as much of the menu as possible to the user,\n        // so give them whatever is available below rather than the minHeight.\n\n\n        var constrainedHeight = isFixedPosition ? viewSpaceBelow - marginBottom : scrollSpaceBelow - marginBottom;\n        return {\n          placement: 'bottom',\n          maxHeight: constrainedHeight\n        };\n      } // 4. Forked beviour when there isn't enough space below\n      // AUTO: flip the menu, render above\n\n\n      if (placement === 'auto' || isFixedPosition) {\n        // may need to be constrained after flipping\n        var _constrainedHeight = maxHeight;\n        var spaceAbove = isFixedPosition ? viewSpaceAbove : scrollSpaceAbove;\n\n        if (spaceAbove >= minHeight) {\n          _constrainedHeight = Math.min(spaceAbove - marginBottom - spacing.controlHeight, maxHeight);\n        }\n\n        return {\n          placement: 'top',\n          maxHeight: _constrainedHeight\n        };\n      } // BOTTOM: allow browser to increase scrollable area and immediately set scroll\n\n\n      if (placement === 'bottom') {\n        scrollTo(scrollParent, scrollDown);\n        return {\n          placement: 'bottom',\n          maxHeight: maxHeight\n        };\n      }\n\n      break;\n\n    case 'top':\n      // 1: the menu will fit, do nothing\n      if (viewSpaceAbove >= menuHeight) {\n        return {\n          placement: 'top',\n          maxHeight: maxHeight\n        };\n      } // 2: the menu will fit, if scrolled\n\n\n      if (scrollSpaceAbove >= menuHeight && !isFixedPosition) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollUp, scrollDuration);\n        }\n\n        return {\n          placement: 'top',\n          maxHeight: maxHeight\n        };\n      } // 3: the menu will fit, if constrained\n\n\n      if (!isFixedPosition && scrollSpaceAbove >= minHeight || isFixedPosition && viewSpaceAbove >= minHeight) {\n        var _constrainedHeight2 = maxHeight; // we want to provide as much of the menu as possible to the user,\n        // so give them whatever is available below rather than the minHeight.\n\n        if (!isFixedPosition && scrollSpaceAbove >= minHeight || isFixedPosition && viewSpaceAbove >= minHeight) {\n          _constrainedHeight2 = isFixedPosition ? viewSpaceAbove - marginTop : scrollSpaceAbove - marginTop;\n        }\n\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollUp, scrollDuration);\n        }\n\n        return {\n          placement: 'top',\n          maxHeight: _constrainedHeight2\n        };\n      } // 4. not enough space, the browser WILL NOT increase scrollable area when\n      // absolutely positioned element rendered above the viewport (only below).\n      // Flip the menu, render below\n\n\n      return {\n        placement: 'bottom',\n        maxHeight: maxHeight\n      };\n\n    default:\n      throw new Error(\"Invalid placement provided \\\"\".concat(placement, \"\\\".\"));\n  } // fulfil contract with flow: implicit return value of undefined\n\n\n  return defaultState;\n} // Menu Component\n// ------------------------------\n\nfunction alignToControl(placement) {\n  var placementToCSSProp = {\n    bottom: 'top',\n    top: 'bottom'\n  };\n  return placement ? placementToCSSProp[placement] : 'bottom';\n}\n\nvar coercePlacement = function coercePlacement(p) {\n  return p === 'auto' ? 'bottom' : p;\n};\n\nvar menuCSS = function menuCSS(_ref2) {\n  var _ref3;\n\n  var placement = _ref2.placement,\n      _ref2$theme = _ref2.theme,\n      borderRadius = _ref2$theme.borderRadius,\n      spacing = _ref2$theme.spacing,\n      colors = _ref2$theme.colors;\n  return _ref3 = {\n    label: 'menu'\n  }, _defineProperty(_ref3, alignToControl(placement), '100%'), _defineProperty(_ref3, \"backgroundColor\", colors.neutral0), _defineProperty(_ref3, \"borderRadius\", borderRadius), _defineProperty(_ref3, \"boxShadow\", '0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)'), _defineProperty(_ref3, \"marginBottom\", spacing.menuGutter), _defineProperty(_ref3, \"marginTop\", spacing.menuGutter), _defineProperty(_ref3, \"position\", 'absolute'), _defineProperty(_ref3, \"width\", '100%'), _defineProperty(_ref3, \"zIndex\", 1), _ref3;\n};\nvar PortalPlacementContext = /*#__PURE__*/createContext({\n  getPortalPlacement: null\n}); // NOTE: internal only\n\nvar MenuPlacer = /*#__PURE__*/function (_Component) {\n  _inherits(MenuPlacer, _Component);\n\n  var _super = _createSuper(MenuPlacer);\n\n  function MenuPlacer() {\n    var _this;\n\n    _classCallCheck(this, MenuPlacer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      maxHeight: _this.props.maxMenuHeight,\n      placement: null\n    };\n\n    _this.getPlacement = function (ref) {\n      var _this$props = _this.props,\n          minMenuHeight = _this$props.minMenuHeight,\n          maxMenuHeight = _this$props.maxMenuHeight,\n          menuPlacement = _this$props.menuPlacement,\n          menuPosition = _this$props.menuPosition,\n          menuShouldScrollIntoView = _this$props.menuShouldScrollIntoView,\n          theme = _this$props.theme;\n      if (!ref) return; // DO NOT scroll if position is fixed\n\n      var isFixedPosition = menuPosition === 'fixed';\n      var shouldScroll = menuShouldScrollIntoView && !isFixedPosition;\n      var state = getMenuPlacement({\n        maxHeight: maxMenuHeight,\n        menuEl: ref,\n        minHeight: minMenuHeight,\n        placement: menuPlacement,\n        shouldScroll: shouldScroll,\n        isFixedPosition: isFixedPosition,\n        theme: theme\n      });\n      var getPortalPlacement = _this.context.getPortalPlacement;\n      if (getPortalPlacement) getPortalPlacement(state);\n\n      _this.setState(state);\n    };\n\n    _this.getUpdatedProps = function () {\n      var menuPlacement = _this.props.menuPlacement;\n      var placement = _this.state.placement || coercePlacement(menuPlacement);\n      return _objectSpread(_objectSpread({}, _this.props), {}, {\n        placement: placement,\n        maxHeight: _this.state.maxHeight\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(MenuPlacer, [{\n    key: \"render\",\n    value: function render() {\n      var children = this.props.children;\n      return children({\n        ref: this.getPlacement,\n        placerProps: this.getUpdatedProps()\n      });\n    }\n  }]);\n\n  return MenuPlacer;\n}(Component);\nMenuPlacer.contextType = PortalPlacementContext;\n\nvar Menu = function Menu(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerRef = props.innerRef,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('menu', props),\n    className: cx({\n      menu: true\n    }, className)\n  }, innerProps, {\n    ref: innerRef\n  }), children);\n};\n// Menu List\n// ==============================\n\nvar menuListCSS = function menuListCSS(_ref4) {\n  var maxHeight = _ref4.maxHeight,\n      baseUnit = _ref4.theme.spacing.baseUnit;\n  return {\n    maxHeight: maxHeight,\n    overflowY: 'auto',\n    paddingBottom: baseUnit,\n    paddingTop: baseUnit,\n    position: 'relative',\n    // required for offset[Height, Top] > keyboard scroll\n    WebkitOverflowScrolling: 'touch'\n  };\n};\nvar MenuList = function MenuList(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      isMulti = props.isMulti,\n      innerRef = props.innerRef,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('menuList', props),\n    className: cx({\n      'menu-list': true,\n      'menu-list--is-multi': isMulti\n    }, className),\n    ref: innerRef\n  }, innerProps), children);\n}; // ==============================\n// Menu Notices\n// ==============================\n\nvar noticeCSS = function noticeCSS(_ref5) {\n  var _ref5$theme = _ref5.theme,\n      baseUnit = _ref5$theme.spacing.baseUnit,\n      colors = _ref5$theme.colors;\n  return {\n    color: colors.neutral40,\n    padding: \"\".concat(baseUnit * 2, \"px \").concat(baseUnit * 3, \"px\"),\n    textAlign: 'center'\n  };\n};\n\nvar noOptionsMessageCSS = noticeCSS;\nvar loadingMessageCSS = noticeCSS;\nvar NoOptionsMessage = function NoOptionsMessage(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('noOptionsMessage', props),\n    className: cx({\n      'menu-notice': true,\n      'menu-notice--no-options': true\n    }, className)\n  }, innerProps), children);\n};\nNoOptionsMessage.defaultProps = {\n  children: 'No options'\n};\nvar LoadingMessage = function LoadingMessage(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('loadingMessage', props),\n    className: cx({\n      'menu-notice': true,\n      'menu-notice--loading': true\n    }, className)\n  }, innerProps), children);\n};\nLoadingMessage.defaultProps = {\n  children: 'Loading...'\n}; // ==============================\n// Menu Portal\n// ==============================\n\nvar menuPortalCSS = function menuPortalCSS(_ref6) {\n  var rect = _ref6.rect,\n      offset = _ref6.offset,\n      position = _ref6.position;\n  return {\n    left: rect.left,\n    position: position,\n    top: offset,\n    width: rect.width,\n    zIndex: 1\n  };\n};\nvar MenuPortal = /*#__PURE__*/function (_Component2) {\n  _inherits(MenuPortal, _Component2);\n\n  var _super2 = _createSuper(MenuPortal);\n\n  function MenuPortal() {\n    var _this2;\n\n    _classCallCheck(this, MenuPortal);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this2 = _super2.call.apply(_super2, [this].concat(args));\n    _this2.state = {\n      placement: null\n    };\n\n    _this2.getPortalPlacement = function (_ref7) {\n      var placement = _ref7.placement;\n      var initialPlacement = coercePlacement(_this2.props.menuPlacement); // avoid re-renders if the placement has not changed\n\n      if (placement !== initialPlacement) {\n        _this2.setState({\n          placement: placement\n        });\n      }\n    };\n\n    return _this2;\n  }\n\n  _createClass(MenuPortal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          appendTo = _this$props2.appendTo,\n          children = _this$props2.children,\n          controlElement = _this$props2.controlElement,\n          menuPlacement = _this$props2.menuPlacement,\n          position = _this$props2.menuPosition,\n          getStyles = _this$props2.getStyles;\n      var isFixed = position === 'fixed'; // bail early if required elements aren't present\n\n      if (!appendTo && !isFixed || !controlElement) {\n        return null;\n      }\n\n      var placement = this.state.placement || coercePlacement(menuPlacement);\n      var rect = getBoundingClientObj(controlElement);\n      var scrollDistance = isFixed ? 0 : window.pageYOffset;\n      var offset = rect[placement] + scrollDistance;\n      var state = {\n        offset: offset,\n        position: position,\n        rect: rect\n      }; // same wrapper element whether fixed or portalled\n\n      var menuWrapper = jsx(\"div\", {\n        css: getStyles('menuPortal', state)\n      }, children);\n      return jsx(PortalPlacementContext.Provider, {\n        value: {\n          getPortalPlacement: this.getPortalPlacement\n        }\n      }, appendTo ? /*#__PURE__*/createPortal(menuWrapper, appendTo) : menuWrapper);\n    }\n  }]);\n\n  return MenuPortal;\n}(Component);\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nfunction equal(a, b) {\n  // fast-deep-equal index.js 2.0.1\n  if (a === b) return true;\n\n  if (a && b && _typeof(a) == 'object' && _typeof(b) == 'object') {\n    var arrA = isArray(a),\n        arrB = isArray(b),\n        i,\n        length,\n        key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n    var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length) {\n      return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      if (!hasProp.call(b, keys[i])) return false;\n    } // end fast-deep-equal\n    // Custom handling for React\n\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of a react element\n        continue;\n      } else {\n        // all other properties should be traversed as usual\n        if (!equal(a[key], b[key])) return false;\n      }\n    } // fast-deep-equal index.js 2.0.1\n\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n} // end fast-deep-equal\n\n\nfunction exportedEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (error.message && error.message.match(/stack|recursion/i)) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('Warning: react-fast-compare does not handle circular references.', error.name, error.message);\n      return false;\n    } // some other error. we should definitely know about these\n\n\n    throw error;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isDisabled = _ref.isDisabled,\n      isRtl = _ref.isRtl;\n  return {\n    label: 'container',\n    direction: isRtl ? 'rtl' : null,\n    pointerEvents: isDisabled ? 'none' : null,\n    // cancel mouse events when disabled\n    position: 'relative'\n  };\n};\nvar SelectContainer = function SelectContainer(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isDisabled = props.isDisabled,\n      isRtl = props.isRtl;\n  return jsx(\"div\", _extends({\n    css: getStyles('container', props),\n    className: cx({\n      '--is-disabled': isDisabled,\n      '--is-rtl': isRtl\n    }, className)\n  }, innerProps), children);\n}; // ==============================\n// Value Container\n// ==============================\n\nvar valueContainerCSS = function valueContainerCSS(_ref2) {\n  var spacing = _ref2.theme.spacing;\n  return {\n    alignItems: 'center',\n    display: 'flex',\n    flex: 1,\n    flexWrap: 'wrap',\n    padding: \"\".concat(spacing.baseUnit / 2, \"px \").concat(spacing.baseUnit * 2, \"px\"),\n    WebkitOverflowScrolling: 'touch',\n    position: 'relative',\n    overflow: 'hidden'\n  };\n};\nvar ValueContainer = function ValueContainer(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      isMulti = props.isMulti,\n      getStyles = props.getStyles,\n      hasValue = props.hasValue;\n  return jsx(\"div\", {\n    css: getStyles('valueContainer', props),\n    className: cx({\n      'value-container': true,\n      'value-container--is-multi': isMulti,\n      'value-container--has-value': hasValue\n    }, className)\n  }, children);\n}; // ==============================\n// Indicator Container\n// ==============================\n\nvar indicatorsContainerCSS = function indicatorsContainerCSS() {\n  return {\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    display: 'flex',\n    flexShrink: 0\n  };\n};\nvar IndicatorsContainer = function IndicatorsContainer(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles;\n  return jsx(\"div\", {\n    css: getStyles('indicatorsContainer', props),\n    className: cx({\n      indicators: true\n    }, className)\n  }, children);\n};\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  0%, 80%, 100% { opacity: 0; }\\n  40% { opacity: 1; }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nvar _ref2 = process.env.NODE_ENV === \"production\" ? {\n  name: \"19bqh2r\",\n  styles: \"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;\"\n} : {\n  name: \"19bqh2r\",\n  styles: \"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0JJIiwiZmlsZSI6ImluZGljYXRvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyB0eXBlIE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBqc3gsIGtleWZyYW1lcyB9IGZyb20gJ0BlbW90aW9uL2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IENvbW1vblByb3BzLCBUaGVtZSB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHsgc2l6ZSwgLi4ucHJvcHMgfTogeyBzaXplOiBudW1iZXIgfSkgPT4gKFxuICA8c3ZnXG4gICAgaGVpZ2h0PXtzaXplfVxuICAgIHdpZHRoPXtzaXplfVxuICAgIHZpZXdCb3g9XCIwIDAgMjAgMjBcIlxuICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgZm9jdXNhYmxlPVwiZmFsc2VcIlxuICAgIGNzcz17e1xuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBmaWxsOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGxpbmVIZWlnaHQ6IDEsXG4gICAgICBzdHJva2U6ICdjdXJyZW50Q29sb3InLFxuICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgfX1cbiAgICB7Li4ucHJvcHN9XG4gIC8+XG4pO1xuXG5leHBvcnQgY29uc3QgQ3Jvc3NJY29uID0gKHByb3BzOiBhbnkpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCBjb25zdCBEb3duQ2hldnJvbiA9IChwcm9wczogYW55KSA9PiAoXG4gIDxTdmcgc2l6ZT17MjB9IHsuLi5wcm9wc30+XG4gICAgPHBhdGggZD1cIk00LjUxNiA3LjU0OGMwLjQzNi0wLjQ0NiAxLjA0My0wLjQ4MSAxLjU3NiAwbDMuOTA4IDMuNzQ3IDMuOTA4LTMuNzQ3YzAuNTMzLTAuNDgxIDEuMTQxLTAuNDQ2IDEuNTc0IDAgMC40MzYgMC40NDUgMC40MDggMS4xOTcgMCAxLjYxNS0wLjQwNiAwLjQxOC00LjY5NSA0LjUwMi00LjY5NSA0LjUwMi0wLjIxNyAwLjIyMy0wLjUwMiAwLjMzNS0wLjc4NyAwLjMzNXMtMC41Ny0wLjExMi0wLjc4OS0wLjMzNWMwIDAtNC4yODctNC4wODQtNC42OTUtNC41MDJzLTAuNDM2LTEuMTcgMC0xLjYxNXpcIiAvPlxuICA8L1N2Zz5cbik7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRHJvcGRvd24gJiBDbGVhciBCdXR0b25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgSW5kaWNhdG9yUHJvcHMgPSBDb21tb25Qcm9wcyAmIHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW46IE5vZGUsXG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogYW55LFxuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgdGV4dCBpcyByaWdodCB0byBsZWZ0ICovXG4gIGlzUnRsOiBib29sZWFuLFxufTtcblxuY29uc3QgYmFzZUNTUyA9ICh7XG4gIGlzRm9jdXNlZCxcbiAgdGhlbWU6IHtcbiAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgY29sb3JzLFxuICB9LFxufTogSW5kaWNhdG9yUHJvcHMpID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yQ29udGFpbmVyJyxcbiAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHBhZGRpbmc6IGJhc2VVbml0ICogMixcbiAgdHJhbnNpdGlvbjogJ2NvbG9yIDE1MG1zJyxcblxuICAnOmhvdmVyJzoge1xuICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDgwIDogY29sb3JzLm5ldXRyYWw0MCxcbiAgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgZHJvcGRvd25JbmRpY2F0b3JDU1MgPSBiYXNlQ1NTO1xuZXhwb3J0IGNvbnN0IERyb3Bkb3duSW5kaWNhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBjbGFzc05hbWUsIGN4LCBnZXRTdHlsZXMsIGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2Ryb3Bkb3duSW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnZHJvcGRvd24taW5kaWNhdG9yJzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbiB8fCA8RG93bkNoZXZyb24gLz59XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYXJJbmRpY2F0b3JDU1MgPSBiYXNlQ1NTO1xuZXhwb3J0IGNvbnN0IENsZWFySW5kaWNhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBjbGFzc05hbWUsIGN4LCBnZXRTdHlsZXMsIGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2NsZWFySW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnY2xlYXItaW5kaWNhdG9yJzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbiB8fCA8Q3Jvc3NJY29uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTZXBhcmF0b3Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG50eXBlIFNlcGFyYXRvclN0YXRlID0geyBpc0Rpc2FibGVkOiBib29sZWFuIH07XG5cbmV4cG9ydCBjb25zdCBpbmRpY2F0b3JTZXBhcmF0b3JDU1MgPSAoe1xuICBpc0Rpc2FibGVkLFxuICB0aGVtZToge1xuICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICBjb2xvcnMsXG4gIH0sXG59OiBDb21tb25Qcm9wcyAmIFNlcGFyYXRvclN0YXRlKSA9PiAoe1xuICBsYWJlbDogJ2luZGljYXRvclNlcGFyYXRvcicsXG4gIGFsaWduU2VsZjogJ3N0cmV0Y2gnLFxuICBiYWNrZ3JvdW5kQ29sb3I6IGlzRGlzYWJsZWQgPyBjb2xvcnMubmV1dHJhbDEwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgbWFyZ2luQm90dG9tOiBiYXNlVW5pdCAqIDIsXG4gIG1hcmdpblRvcDogYmFzZVVuaXQgKiAyLFxuICB3aWR0aDogMSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNsYXNzTmFtZSwgY3gsIGdldFN0eWxlcywgaW5uZXJQcm9wcyB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPHNwYW5cbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2luZGljYXRvclNlcGFyYXRvcicsIHByb3BzKX1cbiAgICAgIGNsYXNzTmFtZT17Y3goeyAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUgfSwgY2xhc3NOYW1lKX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gKHtcbiAgaXNGb2N1c2VkLFxuICBzaXplLFxuICB0aGVtZToge1xuICAgIGNvbG9ycyxcbiAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gIH0sXG59OiB7XG4gIGlzRm9jdXNlZDogYm9vbGVhbixcbiAgc2l6ZTogbnVtYmVyLFxuICB0aGVtZTogVGhlbWUsXG59KSA9PiAoe1xuICBsYWJlbDogJ2xvYWRpbmdJbmRpY2F0b3InLFxuICBjb2xvcjogaXNGb2N1c2VkID8gY29sb3JzLm5ldXRyYWw2MCA6IGNvbG9ycy5uZXV0cmFsMjAsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxufSk7XG5cbnR5cGUgRG90UHJvcHMgPSB7IGRlbGF5OiBudW1iZXIsIG9mZnNldDogYm9vbGVhbiB9O1xuY29uc3QgTG9hZGluZ0RvdCA9ICh7IGRlbGF5LCBvZmZzZXQgfTogRG90UHJvcHMpID0+IChcbiAgPHNwYW5cbiAgICBjc3M9e3tcbiAgICAgIGFuaW1hdGlvbjogYCR7bG9hZGluZ0RvdEFuaW1hdGlvbnN9IDFzIGVhc2UtaW4tb3V0ICR7ZGVsYXl9bXMgaW5maW5pdGU7YCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBib3JkZXJSYWRpdXM6ICcxZW0nLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW5MZWZ0OiBvZmZzZXQgPyAnMWVtJyA6IG51bGwsXG4gICAgICBoZWlnaHQ6ICcxZW0nLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICB3aWR0aDogJzFlbScsXG4gICAgfX1cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIExvYWRpbmdJY29uUHJvcHMgPSB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogYW55LFxuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgdGV4dCBpcyByaWdodCB0byBsZWZ0ICovXG4gIGlzUnRsOiBib29sZWFuLFxufSAmIENvbW1vblByb3BzICYge1xuICAgIC8qKiBTZXQgc2l6ZSBvZiB0aGUgY29udGFpbmVyLiAqL1xuICAgIHNpemU6IG51bWJlcixcbiAgfTtcbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gKHByb3BzOiBMb2FkaW5nSWNvblByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBjeCwgZ2V0U3R5bGVzLCBpbm5lclByb3BzLCBpc1J0bCB9ID0gcHJvcHM7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIGNzcz17Z2V0U3R5bGVzKCdsb2FkaW5nSW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnbG9hZGluZy1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezB9IG9mZnNldD17aXNSdGx9IC8+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MTYwfSBvZmZzZXQgLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXszMjB9IG9mZnNldD17IWlzUnRsfSAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcbkxvYWRpbmdJbmRpY2F0b3IuZGVmYXVsdFByb3BzID0geyBzaXplOiA0IH07XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\n// ==============================\n// Dropdown & Clear Icons\n// ==============================\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = _objectWithoutProperties(_ref, [\"size\"]);\n\n  return jsx(\"svg\", _extends({\n    height: size,\n    width: size,\n    viewBox: \"0 0 20 20\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    css: _ref2\n  }, props));\n};\n\nvar CrossIcon = function CrossIcon(props) {\n  return jsx(Svg, _extends({\n    size: 20\n  }, props), jsx(\"path\", {\n    d: \"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"\n  }));\n};\nvar DownChevron = function DownChevron(props) {\n  return jsx(Svg, _extends({\n    size: 20\n  }, props), jsx(\"path\", {\n    d: \"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"\n  }));\n}; // ==============================\n// Dropdown & Clear Buttons\n// ==============================\n\nvar baseCSS = function baseCSS(_ref3) {\n  var isFocused = _ref3.isFocused,\n      _ref3$theme = _ref3.theme,\n      baseUnit = _ref3$theme.spacing.baseUnit,\n      colors = _ref3$theme.colors;\n  return {\n    label: 'indicatorContainer',\n    color: isFocused ? colors.neutral60 : colors.neutral20,\n    display: 'flex',\n    padding: baseUnit * 2,\n    transition: 'color 150ms',\n    ':hover': {\n      color: isFocused ? colors.neutral80 : colors.neutral40\n    }\n  };\n};\n\nvar dropdownIndicatorCSS = baseCSS;\nvar DropdownIndicator = function DropdownIndicator(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, innerProps, {\n    css: getStyles('dropdownIndicator', props),\n    className: cx({\n      indicator: true,\n      'dropdown-indicator': true\n    }, className)\n  }), children || jsx(DownChevron, null));\n};\nvar clearIndicatorCSS = baseCSS;\nvar ClearIndicator = function ClearIndicator(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, innerProps, {\n    css: getStyles('clearIndicator', props),\n    className: cx({\n      indicator: true,\n      'clear-indicator': true\n    }, className)\n  }), children || jsx(CrossIcon, null));\n}; // ==============================\n// Separator\n// ==============================\n\nvar indicatorSeparatorCSS = function indicatorSeparatorCSS(_ref4) {\n  var isDisabled = _ref4.isDisabled,\n      _ref4$theme = _ref4.theme,\n      baseUnit = _ref4$theme.spacing.baseUnit,\n      colors = _ref4$theme.colors;\n  return {\n    label: 'indicatorSeparator',\n    alignSelf: 'stretch',\n    backgroundColor: isDisabled ? colors.neutral10 : colors.neutral20,\n    marginBottom: baseUnit * 2,\n    marginTop: baseUnit * 2,\n    width: 1\n  };\n};\nvar IndicatorSeparator = function IndicatorSeparator(props) {\n  var className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"span\", _extends({}, innerProps, {\n    css: getStyles('indicatorSeparator', props),\n    className: cx({\n      'indicator-separator': true\n    }, className)\n  }));\n}; // ==============================\n// Loading\n// ==============================\n\nvar loadingDotAnimations = keyframes(_templateObject());\nvar loadingIndicatorCSS = function loadingIndicatorCSS(_ref5) {\n  var isFocused = _ref5.isFocused,\n      size = _ref5.size,\n      _ref5$theme = _ref5.theme,\n      colors = _ref5$theme.colors,\n      baseUnit = _ref5$theme.spacing.baseUnit;\n  return {\n    label: 'loadingIndicator',\n    color: isFocused ? colors.neutral60 : colors.neutral20,\n    display: 'flex',\n    padding: baseUnit * 2,\n    transition: 'color 150ms',\n    alignSelf: 'center',\n    fontSize: size,\n    lineHeight: 1,\n    marginRight: size,\n    textAlign: 'center',\n    verticalAlign: 'middle'\n  };\n};\n\nvar LoadingDot = function LoadingDot(_ref6) {\n  var delay = _ref6.delay,\n      offset = _ref6.offset;\n  return jsx(\"span\", {\n    css: /*#__PURE__*/_css({\n      animation: \"\".concat(loadingDotAnimations, \" 1s ease-in-out \").concat(delay, \"ms infinite;\"),\n      backgroundColor: 'currentColor',\n      borderRadius: '1em',\n      display: 'inline-block',\n      marginLeft: offset ? '1em' : null,\n      height: '1em',\n      verticalAlign: 'top',\n      width: '1em'\n    }, process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0xJIiwiZmlsZSI6ImluZGljYXRvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyB0eXBlIE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBqc3gsIGtleWZyYW1lcyB9IGZyb20gJ0BlbW90aW9uL2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IENvbW1vblByb3BzLCBUaGVtZSB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHsgc2l6ZSwgLi4ucHJvcHMgfTogeyBzaXplOiBudW1iZXIgfSkgPT4gKFxuICA8c3ZnXG4gICAgaGVpZ2h0PXtzaXplfVxuICAgIHdpZHRoPXtzaXplfVxuICAgIHZpZXdCb3g9XCIwIDAgMjAgMjBcIlxuICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgZm9jdXNhYmxlPVwiZmFsc2VcIlxuICAgIGNzcz17e1xuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBmaWxsOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGxpbmVIZWlnaHQ6IDEsXG4gICAgICBzdHJva2U6ICdjdXJyZW50Q29sb3InLFxuICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgfX1cbiAgICB7Li4ucHJvcHN9XG4gIC8+XG4pO1xuXG5leHBvcnQgY29uc3QgQ3Jvc3NJY29uID0gKHByb3BzOiBhbnkpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCBjb25zdCBEb3duQ2hldnJvbiA9IChwcm9wczogYW55KSA9PiAoXG4gIDxTdmcgc2l6ZT17MjB9IHsuLi5wcm9wc30+XG4gICAgPHBhdGggZD1cIk00LjUxNiA3LjU0OGMwLjQzNi0wLjQ0NiAxLjA0My0wLjQ4MSAxLjU3NiAwbDMuOTA4IDMuNzQ3IDMuOTA4LTMuNzQ3YzAuNTMzLTAuNDgxIDEuMTQxLTAuNDQ2IDEuNTc0IDAgMC40MzYgMC40NDUgMC40MDggMS4xOTcgMCAxLjYxNS0wLjQwNiAwLjQxOC00LjY5NSA0LjUwMi00LjY5NSA0LjUwMi0wLjIxNyAwLjIyMy0wLjUwMiAwLjMzNS0wLjc4NyAwLjMzNXMtMC41Ny0wLjExMi0wLjc4OS0wLjMzNWMwIDAtNC4yODctNC4wODQtNC42OTUtNC41MDJzLTAuNDM2LTEuMTcgMC0xLjYxNXpcIiAvPlxuICA8L1N2Zz5cbik7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRHJvcGRvd24gJiBDbGVhciBCdXR0b25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgSW5kaWNhdG9yUHJvcHMgPSBDb21tb25Qcm9wcyAmIHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW46IE5vZGUsXG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogYW55LFxuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgdGV4dCBpcyByaWdodCB0byBsZWZ0ICovXG4gIGlzUnRsOiBib29sZWFuLFxufTtcblxuY29uc3QgYmFzZUNTUyA9ICh7XG4gIGlzRm9jdXNlZCxcbiAgdGhlbWU6IHtcbiAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgY29sb3JzLFxuICB9LFxufTogSW5kaWNhdG9yUHJvcHMpID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yQ29udGFpbmVyJyxcbiAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHBhZGRpbmc6IGJhc2VVbml0ICogMixcbiAgdHJhbnNpdGlvbjogJ2NvbG9yIDE1MG1zJyxcblxuICAnOmhvdmVyJzoge1xuICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDgwIDogY29sb3JzLm5ldXRyYWw0MCxcbiAgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgZHJvcGRvd25JbmRpY2F0b3JDU1MgPSBiYXNlQ1NTO1xuZXhwb3J0IGNvbnN0IERyb3Bkb3duSW5kaWNhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBjbGFzc05hbWUsIGN4LCBnZXRTdHlsZXMsIGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2Ryb3Bkb3duSW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnZHJvcGRvd24taW5kaWNhdG9yJzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbiB8fCA8RG93bkNoZXZyb24gLz59XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYXJJbmRpY2F0b3JDU1MgPSBiYXNlQ1NTO1xuZXhwb3J0IGNvbnN0IENsZWFySW5kaWNhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBjbGFzc05hbWUsIGN4LCBnZXRTdHlsZXMsIGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2NsZWFySW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnY2xlYXItaW5kaWNhdG9yJzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbiB8fCA8Q3Jvc3NJY29uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTZXBhcmF0b3Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG50eXBlIFNlcGFyYXRvclN0YXRlID0geyBpc0Rpc2FibGVkOiBib29sZWFuIH07XG5cbmV4cG9ydCBjb25zdCBpbmRpY2F0b3JTZXBhcmF0b3JDU1MgPSAoe1xuICBpc0Rpc2FibGVkLFxuICB0aGVtZToge1xuICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICBjb2xvcnMsXG4gIH0sXG59OiBDb21tb25Qcm9wcyAmIFNlcGFyYXRvclN0YXRlKSA9PiAoe1xuICBsYWJlbDogJ2luZGljYXRvclNlcGFyYXRvcicsXG4gIGFsaWduU2VsZjogJ3N0cmV0Y2gnLFxuICBiYWNrZ3JvdW5kQ29sb3I6IGlzRGlzYWJsZWQgPyBjb2xvcnMubmV1dHJhbDEwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgbWFyZ2luQm90dG9tOiBiYXNlVW5pdCAqIDIsXG4gIG1hcmdpblRvcDogYmFzZVVuaXQgKiAyLFxuICB3aWR0aDogMSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gKHByb3BzOiBJbmRpY2F0b3JQcm9wcykgPT4ge1xuICBjb25zdCB7IGNsYXNzTmFtZSwgY3gsIGdldFN0eWxlcywgaW5uZXJQcm9wcyB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPHNwYW5cbiAgICAgIHsuLi5pbm5lclByb3BzfVxuICAgICAgY3NzPXtnZXRTdHlsZXMoJ2luZGljYXRvclNlcGFyYXRvcicsIHByb3BzKX1cbiAgICAgIGNsYXNzTmFtZT17Y3goeyAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUgfSwgY2xhc3NOYW1lKX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gKHtcbiAgaXNGb2N1c2VkLFxuICBzaXplLFxuICB0aGVtZToge1xuICAgIGNvbG9ycyxcbiAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gIH0sXG59OiB7XG4gIGlzRm9jdXNlZDogYm9vbGVhbixcbiAgc2l6ZTogbnVtYmVyLFxuICB0aGVtZTogVGhlbWUsXG59KSA9PiAoe1xuICBsYWJlbDogJ2xvYWRpbmdJbmRpY2F0b3InLFxuICBjb2xvcjogaXNGb2N1c2VkID8gY29sb3JzLm5ldXRyYWw2MCA6IGNvbG9ycy5uZXV0cmFsMjAsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxufSk7XG5cbnR5cGUgRG90UHJvcHMgPSB7IGRlbGF5OiBudW1iZXIsIG9mZnNldDogYm9vbGVhbiB9O1xuY29uc3QgTG9hZGluZ0RvdCA9ICh7IGRlbGF5LCBvZmZzZXQgfTogRG90UHJvcHMpID0+IChcbiAgPHNwYW5cbiAgICBjc3M9e3tcbiAgICAgIGFuaW1hdGlvbjogYCR7bG9hZGluZ0RvdEFuaW1hdGlvbnN9IDFzIGVhc2UtaW4tb3V0ICR7ZGVsYXl9bXMgaW5maW5pdGU7YCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBib3JkZXJSYWRpdXM6ICcxZW0nLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW5MZWZ0OiBvZmZzZXQgPyAnMWVtJyA6IG51bGwsXG4gICAgICBoZWlnaHQ6ICcxZW0nLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICB3aWR0aDogJzFlbScsXG4gICAgfX1cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIExvYWRpbmdJY29uUHJvcHMgPSB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogYW55LFxuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgdGV4dCBpcyByaWdodCB0byBsZWZ0ICovXG4gIGlzUnRsOiBib29sZWFuLFxufSAmIENvbW1vblByb3BzICYge1xuICAgIC8qKiBTZXQgc2l6ZSBvZiB0aGUgY29udGFpbmVyLiAqL1xuICAgIHNpemU6IG51bWJlcixcbiAgfTtcbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gKHByb3BzOiBMb2FkaW5nSWNvblByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBjeCwgZ2V0U3R5bGVzLCBpbm5lclByb3BzLCBpc1J0bCB9ID0gcHJvcHM7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIGNzcz17Z2V0U3R5bGVzKCdsb2FkaW5nSW5kaWNhdG9yJywgcHJvcHMpfVxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAge1xuICAgICAgICAgIGluZGljYXRvcjogdHJ1ZSxcbiAgICAgICAgICAnbG9hZGluZy1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezB9IG9mZnNldD17aXNSdGx9IC8+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MTYwfSBvZmZzZXQgLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXszMjB9IG9mZnNldD17IWlzUnRsfSAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcbkxvYWRpbmdJbmRpY2F0b3IuZGVmYXVsdFByb3BzID0geyBzaXplOiA0IH07XG4iXX0= */\")\n  });\n};\n\nvar LoadingIndicator = function LoadingIndicator(props) {\n  var className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isRtl = props.isRtl;\n  return jsx(\"div\", _extends({}, innerProps, {\n    css: getStyles('loadingIndicator', props),\n    className: cx({\n      indicator: true,\n      'loading-indicator': true\n    }, className)\n  }), jsx(LoadingDot, {\n    delay: 0,\n    offset: isRtl\n  }), jsx(LoadingDot, {\n    delay: 160,\n    offset: true\n  }), jsx(LoadingDot, {\n    delay: 320,\n    offset: !isRtl\n  }));\n};\nLoadingIndicator.defaultProps = {\n  size: 4\n};\n\nvar css = function css(_ref) {\n  var isDisabled = _ref.isDisabled,\n      isFocused = _ref.isFocused,\n      _ref$theme = _ref.theme,\n      colors = _ref$theme.colors,\n      borderRadius = _ref$theme.borderRadius,\n      spacing = _ref$theme.spacing;\n  return {\n    label: 'control',\n    alignItems: 'center',\n    backgroundColor: isDisabled ? colors.neutral5 : colors.neutral0,\n    borderColor: isDisabled ? colors.neutral10 : isFocused ? colors.primary : colors.neutral20,\n    borderRadius: borderRadius,\n    borderStyle: 'solid',\n    borderWidth: 1,\n    boxShadow: isFocused ? \"0 0 0 1px \".concat(colors.primary) : null,\n    cursor: 'default',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    minHeight: spacing.controlHeight,\n    outline: '0 !important',\n    position: 'relative',\n    transition: 'all 100ms',\n    '&:hover': {\n      borderColor: isFocused ? colors.primary : colors.neutral30\n    }\n  };\n};\n\nvar Control = function Control(props) {\n  var children = props.children,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      className = props.className,\n      isDisabled = props.isDisabled,\n      isFocused = props.isFocused,\n      innerRef = props.innerRef,\n      innerProps = props.innerProps,\n      menuIsOpen = props.menuIsOpen;\n  return jsx(\"div\", _extends({\n    ref: innerRef,\n    css: getStyles('control', props),\n    className: cx({\n      control: true,\n      'control--is-disabled': isDisabled,\n      'control--is-focused': isFocused,\n      'control--menu-is-open': menuIsOpen\n    }, className)\n  }, innerProps), children);\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar groupCSS = function groupCSS(_ref) {\n  var spacing = _ref.theme.spacing;\n  return {\n    paddingBottom: spacing.baseUnit * 2,\n    paddingTop: spacing.baseUnit * 2\n  };\n};\n\nvar Group = function Group(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      Heading = props.Heading,\n      headingProps = props.headingProps,\n      label = props.label,\n      theme = props.theme,\n      selectProps = props.selectProps;\n  return jsx(\"div\", {\n    css: getStyles('group', props),\n    className: cx({\n      group: true\n    }, className)\n  }, jsx(Heading, _extends({}, headingProps, {\n    selectProps: selectProps,\n    theme: theme,\n    getStyles: getStyles,\n    cx: cx\n  }), label), jsx(\"div\", null, children));\n};\n\nvar groupHeadingCSS = function groupHeadingCSS(_ref2) {\n  var spacing = _ref2.theme.spacing;\n  return {\n    label: 'group',\n    color: '#999',\n    cursor: 'default',\n    display: 'block',\n    fontSize: '75%',\n    fontWeight: '500',\n    marginBottom: '0.25em',\n    paddingLeft: spacing.baseUnit * 3,\n    paddingRight: spacing.baseUnit * 3,\n    textTransform: 'uppercase'\n  };\n};\nvar GroupHeading = function GroupHeading(props) {\n  var className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      theme = props.theme,\n      selectProps = props.selectProps,\n      cleanProps = _objectWithoutProperties(props, [\"className\", \"cx\", \"getStyles\", \"theme\", \"selectProps\"]);\n\n  return jsx(\"div\", _extends({\n    css: getStyles('groupHeading', _objectSpread$1({\n      theme: theme\n    }, cleanProps)),\n    className: cx({\n      'group-heading': true\n    }, className)\n  }, cleanProps));\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar inputCSS = function inputCSS(_ref) {\n  var isDisabled = _ref.isDisabled,\n      _ref$theme = _ref.theme,\n      spacing = _ref$theme.spacing,\n      colors = _ref$theme.colors;\n  return {\n    margin: spacing.baseUnit / 2,\n    paddingBottom: spacing.baseUnit / 2,\n    paddingTop: spacing.baseUnit / 2,\n    visibility: isDisabled ? 'hidden' : 'visible',\n    color: colors.neutral80\n  };\n};\n\nvar inputStyle = function inputStyle(isHidden) {\n  return {\n    label: 'input',\n    background: 0,\n    border: 0,\n    fontSize: 'inherit',\n    opacity: isHidden ? 0 : 1,\n    outline: 0,\n    padding: 0,\n    color: 'inherit'\n  };\n};\n\nvar Input = function Input(_ref2) {\n  var className = _ref2.className,\n      cx = _ref2.cx,\n      getStyles = _ref2.getStyles,\n      innerRef = _ref2.innerRef,\n      isHidden = _ref2.isHidden,\n      isDisabled = _ref2.isDisabled,\n      theme = _ref2.theme,\n      selectProps = _ref2.selectProps,\n      props = _objectWithoutProperties(_ref2, [\"className\", \"cx\", \"getStyles\", \"innerRef\", \"isHidden\", \"isDisabled\", \"theme\", \"selectProps\"]);\n\n  return jsx(\"div\", {\n    css: getStyles('input', _objectSpread$2({\n      theme: theme\n    }, props))\n  }, jsx(AutosizeInput, _extends({\n    className: cx({\n      input: true\n    }, className),\n    inputRef: innerRef,\n    inputStyle: inputStyle(isHidden),\n    disabled: isDisabled\n  }, props)));\n};\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar multiValueCSS = function multiValueCSS(_ref) {\n  var _ref$theme = _ref.theme,\n      spacing = _ref$theme.spacing,\n      borderRadius = _ref$theme.borderRadius,\n      colors = _ref$theme.colors;\n  return {\n    label: 'multiValue',\n    backgroundColor: colors.neutral10,\n    borderRadius: borderRadius / 2,\n    display: 'flex',\n    margin: spacing.baseUnit / 2,\n    minWidth: 0 // resolves flex/text-overflow bug\n\n  };\n};\nvar multiValueLabelCSS = function multiValueLabelCSS(_ref2) {\n  var _ref2$theme = _ref2.theme,\n      borderRadius = _ref2$theme.borderRadius,\n      colors = _ref2$theme.colors,\n      cropWithEllipsis = _ref2.cropWithEllipsis;\n  return {\n    borderRadius: borderRadius / 2,\n    color: colors.neutral80,\n    fontSize: '85%',\n    overflow: 'hidden',\n    padding: 3,\n    paddingLeft: 6,\n    textOverflow: cropWithEllipsis ? 'ellipsis' : null,\n    whiteSpace: 'nowrap'\n  };\n};\nvar multiValueRemoveCSS = function multiValueRemoveCSS(_ref3) {\n  var _ref3$theme = _ref3.theme,\n      spacing = _ref3$theme.spacing,\n      borderRadius = _ref3$theme.borderRadius,\n      colors = _ref3$theme.colors,\n      isFocused = _ref3.isFocused;\n  return {\n    alignItems: 'center',\n    borderRadius: borderRadius / 2,\n    backgroundColor: isFocused && colors.dangerLight,\n    display: 'flex',\n    paddingLeft: spacing.baseUnit,\n    paddingRight: spacing.baseUnit,\n    ':hover': {\n      backgroundColor: colors.dangerLight,\n      color: colors.danger\n    }\n  };\n};\nvar MultiValueGeneric = function MultiValueGeneric(_ref4) {\n  var children = _ref4.children,\n      innerProps = _ref4.innerProps;\n  return jsx(\"div\", innerProps, children);\n};\nvar MultiValueContainer = MultiValueGeneric;\nvar MultiValueLabel = MultiValueGeneric;\nfunction MultiValueRemove(_ref5) {\n  var children = _ref5.children,\n      innerProps = _ref5.innerProps;\n  return jsx(\"div\", innerProps, children || jsx(CrossIcon, {\n    size: 14\n  }));\n}\n\nvar MultiValue = function MultiValue(props) {\n  var children = props.children,\n      className = props.className,\n      components = props.components,\n      cx = props.cx,\n      data = props.data,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isDisabled = props.isDisabled,\n      removeProps = props.removeProps,\n      selectProps = props.selectProps;\n  var Container = components.Container,\n      Label = components.Label,\n      Remove = components.Remove;\n  return jsx(ClassNames, null, function (_ref6) {\n    var css = _ref6.css,\n        emotionCx = _ref6.cx;\n    return jsx(Container, {\n      data: data,\n      innerProps: _objectSpread$3(_objectSpread$3({}, innerProps), {}, {\n        className: emotionCx(css(getStyles('multiValue', props)), cx({\n          'multi-value': true,\n          'multi-value--is-disabled': isDisabled\n        }, className))\n      }),\n      selectProps: selectProps\n    }, jsx(Label, {\n      data: data,\n      innerProps: {\n        className: emotionCx(css(getStyles('multiValueLabel', props)), cx({\n          'multi-value__label': true\n        }, className))\n      },\n      selectProps: selectProps\n    }, children), jsx(Remove, {\n      data: data,\n      innerProps: _objectSpread$3({\n        className: emotionCx(css(getStyles('multiValueRemove', props)), cx({\n          'multi-value__remove': true\n        }, className))\n      }, removeProps),\n      selectProps: selectProps\n    }));\n  });\n};\n\nMultiValue.defaultProps = {\n  cropWithEllipsis: true\n};\n\nvar optionCSS = function optionCSS(_ref) {\n  var isDisabled = _ref.isDisabled,\n      isFocused = _ref.isFocused,\n      isSelected = _ref.isSelected,\n      _ref$theme = _ref.theme,\n      spacing = _ref$theme.spacing,\n      colors = _ref$theme.colors;\n  return {\n    label: 'option',\n    backgroundColor: isSelected ? colors.primary : isFocused ? colors.primary25 : 'transparent',\n    color: isDisabled ? colors.neutral20 : isSelected ? colors.neutral0 : 'inherit',\n    cursor: 'default',\n    display: 'block',\n    fontSize: 'inherit',\n    padding: \"\".concat(spacing.baseUnit * 2, \"px \").concat(spacing.baseUnit * 3, \"px\"),\n    width: '100%',\n    userSelect: 'none',\n    WebkitTapHighlightColor: 'rgba(0, 0, 0, 0)',\n    // provide some affordance on touch devices\n    ':active': {\n      backgroundColor: !isDisabled && (isSelected ? colors.primary : colors.primary50)\n    }\n  };\n};\n\nvar Option = function Option(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      isDisabled = props.isDisabled,\n      isFocused = props.isFocused,\n      isSelected = props.isSelected,\n      innerRef = props.innerRef,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('option', props),\n    className: cx({\n      option: true,\n      'option--is-disabled': isDisabled,\n      'option--is-focused': isFocused,\n      'option--is-selected': isSelected\n    }, className),\n    ref: innerRef\n  }, innerProps), children);\n};\n\nvar placeholderCSS = function placeholderCSS(_ref) {\n  var _ref$theme = _ref.theme,\n      spacing = _ref$theme.spacing,\n      colors = _ref$theme.colors;\n  return {\n    label: 'placeholder',\n    color: colors.neutral50,\n    marginLeft: spacing.baseUnit / 2,\n    marginRight: spacing.baseUnit / 2,\n    position: 'absolute',\n    top: '50%',\n    transform: 'translateY(-50%)'\n  };\n};\n\nvar Placeholder = function Placeholder(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('placeholder', props),\n    className: cx({\n      placeholder: true\n    }, className)\n  }, innerProps), children);\n};\n\nvar css$1 = function css(_ref) {\n  var isDisabled = _ref.isDisabled,\n      _ref$theme = _ref.theme,\n      spacing = _ref$theme.spacing,\n      colors = _ref$theme.colors;\n  return {\n    label: 'singleValue',\n    color: isDisabled ? colors.neutral40 : colors.neutral80,\n    marginLeft: spacing.baseUnit / 2,\n    marginRight: spacing.baseUnit / 2,\n    maxWidth: \"calc(100% - \".concat(spacing.baseUnit * 2, \"px)\"),\n    overflow: 'hidden',\n    position: 'absolute',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    top: '50%',\n    transform: 'translateY(-50%)'\n  };\n};\n\nvar SingleValue = function SingleValue(props) {\n  var children = props.children,\n      className = props.className,\n      cx = props.cx,\n      getStyles = props.getStyles,\n      isDisabled = props.isDisabled,\n      innerProps = props.innerProps;\n  return jsx(\"div\", _extends({\n    css: getStyles('singleValue', props),\n    className: cx({\n      'single-value': true,\n      'single-value--is-disabled': isDisabled\n    }, className)\n  }, innerProps), children);\n};\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar components = {\n  ClearIndicator: ClearIndicator,\n  Control: Control,\n  DropdownIndicator: DropdownIndicator,\n  DownChevron: DownChevron,\n  CrossIcon: CrossIcon,\n  Group: Group,\n  GroupHeading: GroupHeading,\n  IndicatorsContainer: IndicatorsContainer,\n  IndicatorSeparator: IndicatorSeparator,\n  Input: Input,\n  LoadingIndicator: LoadingIndicator,\n  Menu: Menu,\n  MenuList: MenuList,\n  MenuPortal: MenuPortal,\n  LoadingMessage: LoadingMessage,\n  NoOptionsMessage: NoOptionsMessage,\n  MultiValue: MultiValue,\n  MultiValueContainer: MultiValueContainer,\n  MultiValueLabel: MultiValueLabel,\n  MultiValueRemove: MultiValueRemove,\n  Option: Option,\n  Placeholder: Placeholder,\n  SelectContainer: SelectContainer,\n  SingleValue: SingleValue,\n  ValueContainer: ValueContainer\n};\nvar defaultComponents = function defaultComponents(props) {\n  return _objectSpread$4(_objectSpread$4({}, components), props.components);\n};\n\nexport { isDocumentElement as A, exportedEqual as B, cleanValue as C, scrollIntoView as D, noop as E, components as F, handleInputChange as G, MenuPlacer as M, containerCSS as a, css as b, clearIndicatorCSS as c, dropdownIndicatorCSS as d, groupHeadingCSS as e, indicatorSeparatorCSS as f, groupCSS as g, inputCSS as h, indicatorsContainerCSS as i, loadingMessageCSS as j, menuListCSS as k, loadingIndicatorCSS as l, menuCSS as m, menuPortalCSS as n, multiValueCSS as o, multiValueLabelCSS as p, multiValueRemoveCSS as q, noOptionsMessageCSS as r, optionCSS as s, placeholderCSS as t, css$1 as u, valueContainerCSS as v, isTouchCapable as w, isMobileDevice as x, defaultComponents as y, classNames as z };\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport React, { Component, PureComponent } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { jsx } from '@emotion/core';\nimport { findDOMNode } from 'react-dom';\nimport { c as clearIndicatorCSS, a as containerCSS, b as css, d as dropdownIndicatorCSS, g as groupCSS, e as groupHeadingCSS, i as indicatorsContainerCSS, f as indicatorSeparatorCSS, h as inputCSS, l as loadingIndicatorCSS, j as loadingMessageCSS, m as menuCSS, k as menuListCSS, n as menuPortalCSS, o as multiValueCSS, p as multiValueLabelCSS, q as multiValueRemoveCSS, r as noOptionsMessageCSS, s as optionCSS, t as placeholderCSS, u as css$1, v as valueContainerCSS, w as isTouchCapable, x as isMobileDevice, y as defaultComponents, z as classNames, A as isDocumentElement, B as exportedEqual, C as cleanValue, D as scrollIntoView, E as noop, M as MenuPlacer } from './index-75b02bac.browser.esm.js';\nimport _css from '@emotion/css';\n\nvar diacritics = [{\n  base: 'A',\n  letters: \"A\\u24B6\\uFF21\\xC0\\xC1\\xC2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\xC3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\xC4\\u01DE\\u1EA2\\xC5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F\"\n}, {\n  base: 'AA',\n  letters: \"\\uA732\"\n}, {\n  base: 'AE',\n  letters: \"\\xC6\\u01FC\\u01E2\"\n}, {\n  base: 'AO',\n  letters: \"\\uA734\"\n}, {\n  base: 'AU',\n  letters: \"\\uA736\"\n}, {\n  base: 'AV',\n  letters: \"\\uA738\\uA73A\"\n}, {\n  base: 'AY',\n  letters: \"\\uA73C\"\n}, {\n  base: 'B',\n  letters: \"B\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181\"\n}, {\n  base: 'C',\n  letters: \"C\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\xC7\\u1E08\\u0187\\u023B\\uA73E\"\n}, {\n  base: 'D',\n  letters: \"D\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\"\n}, {\n  base: 'DZ',\n  letters: \"\\u01F1\\u01C4\"\n}, {\n  base: 'Dz',\n  letters: \"\\u01F2\\u01C5\"\n}, {\n  base: 'E',\n  letters: \"E\\u24BA\\uFF25\\xC8\\xC9\\xCA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\xCB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E\"\n}, {\n  base: 'F',\n  letters: \"F\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B\"\n}, {\n  base: 'G',\n  letters: \"G\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E\"\n}, {\n  base: 'H',\n  letters: \"H\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D\"\n}, {\n  base: 'I',\n  letters: \"I\\u24BE\\uFF29\\xCC\\xCD\\xCE\\u0128\\u012A\\u012C\\u0130\\xCF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197\"\n}, {\n  base: 'J',\n  letters: \"J\\u24BF\\uFF2A\\u0134\\u0248\"\n}, {\n  base: 'K',\n  letters: \"K\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2\"\n}, {\n  base: 'L',\n  letters: \"L\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780\"\n}, {\n  base: 'LJ',\n  letters: \"\\u01C7\"\n}, {\n  base: 'Lj',\n  letters: \"\\u01C8\"\n}, {\n  base: 'M',\n  letters: \"M\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C\"\n}, {\n  base: 'N',\n  letters: \"N\\u24C3\\uFF2E\\u01F8\\u0143\\xD1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\"\n}, {\n  base: 'NJ',\n  letters: \"\\u01CA\"\n}, {\n  base: 'Nj',\n  letters: \"\\u01CB\"\n}, {\n  base: 'O',\n  letters: \"O\\u24C4\\uFF2F\\xD2\\xD3\\xD4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\xD5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\xD6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\xD8\\u01FE\\u0186\\u019F\\uA74A\\uA74C\"\n}, {\n  base: 'OI',\n  letters: \"\\u01A2\"\n}, {\n  base: 'OO',\n  letters: \"\\uA74E\"\n}, {\n  base: 'OU',\n  letters: \"\\u0222\"\n}, {\n  base: 'P',\n  letters: \"P\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754\"\n}, {\n  base: 'Q',\n  letters: \"Q\\u24C6\\uFF31\\uA756\\uA758\\u024A\"\n}, {\n  base: 'R',\n  letters: \"R\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782\"\n}, {\n  base: 'S',\n  letters: \"S\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784\"\n}, {\n  base: 'T',\n  letters: \"T\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786\"\n}, {\n  base: 'TZ',\n  letters: \"\\uA728\"\n}, {\n  base: 'U',\n  letters: \"U\\u24CA\\uFF35\\xD9\\xDA\\xDB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\xDC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244\"\n}, {\n  base: 'V',\n  letters: \"V\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245\"\n}, {\n  base: 'VY',\n  letters: \"\\uA760\"\n}, {\n  base: 'W',\n  letters: \"W\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72\"\n}, {\n  base: 'X',\n  letters: \"X\\u24CD\\uFF38\\u1E8A\\u1E8C\"\n}, {\n  base: 'Y',\n  letters: \"Y\\u24CE\\uFF39\\u1EF2\\xDD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE\"\n}, {\n  base: 'Z',\n  letters: \"Z\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762\"\n}, {\n  base: 'a',\n  letters: \"a\\u24D0\\uFF41\\u1E9A\\xE0\\xE1\\xE2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\xE3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\xE4\\u01DF\\u1EA3\\xE5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250\"\n}, {\n  base: 'aa',\n  letters: \"\\uA733\"\n}, {\n  base: 'ae',\n  letters: \"\\xE6\\u01FD\\u01E3\"\n}, {\n  base: 'ao',\n  letters: \"\\uA735\"\n}, {\n  base: 'au',\n  letters: \"\\uA737\"\n}, {\n  base: 'av',\n  letters: \"\\uA739\\uA73B\"\n}, {\n  base: 'ay',\n  letters: \"\\uA73D\"\n}, {\n  base: 'b',\n  letters: \"b\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253\"\n}, {\n  base: 'c',\n  letters: \"c\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\xE7\\u1E09\\u0188\\u023C\\uA73F\\u2184\"\n}, {\n  base: 'd',\n  letters: \"d\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\"\n}, {\n  base: 'dz',\n  letters: \"\\u01F3\\u01C6\"\n}, {\n  base: 'e',\n  letters: \"e\\u24D4\\uFF45\\xE8\\xE9\\xEA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\xEB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD\"\n}, {\n  base: 'f',\n  letters: \"f\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C\"\n}, {\n  base: 'g',\n  letters: \"g\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F\"\n}, {\n  base: 'h',\n  letters: \"h\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265\"\n}, {\n  base: 'hv',\n  letters: \"\\u0195\"\n}, {\n  base: 'i',\n  letters: \"i\\u24D8\\uFF49\\xEC\\xED\\xEE\\u0129\\u012B\\u012D\\xEF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131\"\n}, {\n  base: 'j',\n  letters: \"j\\u24D9\\uFF4A\\u0135\\u01F0\\u0249\"\n}, {\n  base: 'k',\n  letters: \"k\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3\"\n}, {\n  base: 'l',\n  letters: \"l\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747\"\n}, {\n  base: 'lj',\n  letters: \"\\u01C9\"\n}, {\n  base: 'm',\n  letters: \"m\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F\"\n}, {\n  base: 'n',\n  letters: \"n\\u24DD\\uFF4E\\u01F9\\u0144\\xF1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\"\n}, {\n  base: 'nj',\n  letters: \"\\u01CC\"\n}, {\n  base: 'o',\n  letters: \"o\\u24DE\\uFF4F\\xF2\\xF3\\xF4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\xF5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\xF6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\xF8\\u01FF\\u0254\\uA74B\\uA74D\\u0275\"\n}, {\n  base: 'oi',\n  letters: \"\\u01A3\"\n}, {\n  base: 'ou',\n  letters: \"\\u0223\"\n}, {\n  base: 'oo',\n  letters: \"\\uA74F\"\n}, {\n  base: 'p',\n  letters: \"p\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755\"\n}, {\n  base: 'q',\n  letters: \"q\\u24E0\\uFF51\\u024B\\uA757\\uA759\"\n}, {\n  base: 'r',\n  letters: \"r\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783\"\n}, {\n  base: 's',\n  letters: \"s\\u24E2\\uFF53\\xDF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\"\n}, {\n  base: 't',\n  letters: \"t\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787\"\n}, {\n  base: 'tz',\n  letters: \"\\uA729\"\n}, {\n  base: 'u',\n  letters: \"u\\u24E4\\uFF55\\xF9\\xFA\\xFB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\xFC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289\"\n}, {\n  base: 'v',\n  letters: \"v\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C\"\n}, {\n  base: 'vy',\n  letters: \"\\uA761\"\n}, {\n  base: 'w',\n  letters: \"w\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73\"\n}, {\n  base: 'x',\n  letters: \"x\\u24E7\\uFF58\\u1E8B\\u1E8D\"\n}, {\n  base: 'y',\n  letters: \"y\\u24E8\\uFF59\\u1EF3\\xFD\\u0177\\u1EF9\\u0233\\u1E8F\\xFF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF\"\n}, {\n  base: 'z',\n  letters: \"z\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763\"\n}];\nvar anyDiacritic = new RegExp('[' + diacritics.map(function (d) {\n  return d.letters;\n}).join('') + ']', 'g');\nvar diacriticToBase = {};\n\nfor (var i = 0; i < diacritics.length; i++) {\n  var diacritic = diacritics[i];\n\n  for (var j = 0; j < diacritic.letters.length; j++) {\n    diacriticToBase[diacritic.letters[j]] = diacritic.base;\n  }\n}\n\nvar stripDiacritics = function stripDiacritics(str) {\n  return str.replace(anyDiacritic, function (match) {\n    return diacriticToBase[match];\n  });\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar trimString = function trimString(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\nvar defaultStringify = function defaultStringify(option) {\n  return \"\".concat(option.label, \" \").concat(option.value);\n};\n\nvar createFilter = function createFilter(config) {\n  return function (option, rawInput) {\n    var _ignoreCase$ignoreAcc = _objectSpread({\n      ignoreCase: true,\n      ignoreAccents: true,\n      stringify: defaultStringify,\n      trim: true,\n      matchFrom: 'any'\n    }, config),\n        ignoreCase = _ignoreCase$ignoreAcc.ignoreCase,\n        ignoreAccents = _ignoreCase$ignoreAcc.ignoreAccents,\n        stringify = _ignoreCase$ignoreAcc.stringify,\n        trim = _ignoreCase$ignoreAcc.trim,\n        matchFrom = _ignoreCase$ignoreAcc.matchFrom;\n\n    var input = trim ? trimString(rawInput) : rawInput;\n    var candidate = trim ? trimString(stringify(option)) : stringify(option);\n\n    if (ignoreCase) {\n      input = input.toLowerCase();\n      candidate = candidate.toLowerCase();\n    }\n\n    if (ignoreAccents) {\n      input = stripDiacritics(input);\n      candidate = stripDiacritics(candidate);\n    }\n\n    return matchFrom === 'start' ? candidate.substr(0, input.length) === input : candidate.indexOf(input) > -1;\n  };\n};\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nvar _ref = process.env.NODE_ENV === \"production\" ? {\n  name: \"1laao21-a11yText\",\n  styles: \"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;\"\n} : {\n  name: \"1laao21-a11yText\",\n  styles: \"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkExMXlUZXh0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVFJIiwiZmlsZSI6IkExMXlUZXh0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgdHlwZSBFbGVtZW50Q29uZmlnIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IH0gZnJvbSAnQGVtb3Rpb24vY29yZSc7XG5cbi8vIEFzc2lzdGl2ZSB0ZXh0IHRvIGRlc2NyaWJlIHZpc3VhbCBlbGVtZW50cy4gSGlkZGVuIGZvciBzaWdodGVkIHVzZXJzLlxuY29uc3QgQTExeVRleHQgPSAocHJvcHM6IEVsZW1lbnRDb25maWc8J3NwYW4nPikgPT4gKFxuICA8c3BhblxuICAgIGNzcz17e1xuICAgICAgbGFiZWw6ICdhMTF5VGV4dCcsXG4gICAgICB6SW5kZXg6IDk5OTksXG4gICAgICBib3JkZXI6IDAsXG4gICAgICBjbGlwOiAncmVjdCgxcHgsIDFweCwgMXB4LCAxcHgpJyxcbiAgICAgIGhlaWdodDogMSxcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgfX1cbiAgICB7Li4ucHJvcHN9XG4gIC8+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBBMTF5VGV4dDtcbiJdfQ== */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar A11yText = function A11yText(props) {\n  return jsx(\"span\", _extends({\n    css: _ref\n  }, props));\n};\n\nfunction DummyInput(_ref) {\n  var inProp = _ref.in,\n      out = _ref.out,\n      onExited = _ref.onExited,\n      appear = _ref.appear,\n      enter = _ref.enter,\n      exit = _ref.exit,\n      innerRef = _ref.innerRef,\n      emotion = _ref.emotion,\n      props = _objectWithoutProperties(_ref, [\"in\", \"out\", \"onExited\", \"appear\", \"enter\", \"exit\", \"innerRef\", \"emotion\"]);\n\n  return jsx(\"input\", _extends({\n    ref: innerRef\n  }, props, {\n    css: /*#__PURE__*/_css({\n      label: 'dummyInput',\n      // get rid of any default styles\n      background: 0,\n      border: 0,\n      fontSize: 'inherit',\n      outline: 0,\n      padding: 0,\n      // important! without `width` browsers won't allow focus\n      width: 1,\n      // remove cursor on desktop\n      color: 'transparent',\n      // remove cursor on mobile whilst maintaining \"scroll into view\" behaviour\n      left: -100,\n      opacity: 0,\n      position: 'relative',\n      transform: 'scale(0)'\n    }, process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkR1bW15SW5wdXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUJNIiwiZmlsZSI6IkR1bW15SW5wdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3ggfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRHVtbXlJbnB1dCh7XG4gIGluOiBpblByb3AsXG4gIG91dCxcbiAgb25FeGl0ZWQsXG4gIGFwcGVhcixcbiAgZW50ZXIsXG4gIGV4aXQsXG4gIGlubmVyUmVmLFxuICBlbW90aW9uLFxuICAuLi5wcm9wc1xufTogYW55KSB7XG4gIHJldHVybiAoXG4gICAgPGlucHV0XG4gICAgICByZWY9e2lubmVyUmVmfVxuICAgICAgey4uLnByb3BzfVxuICAgICAgY3NzPXt7XG4gICAgICAgIGxhYmVsOiAnZHVtbXlJbnB1dCcsXG4gICAgICAgIC8vIGdldCByaWQgb2YgYW55IGRlZmF1bHQgc3R5bGVzXG4gICAgICAgIGJhY2tncm91bmQ6IDAsXG4gICAgICAgIGJvcmRlcjogMCxcbiAgICAgICAgZm9udFNpemU6ICdpbmhlcml0JyxcbiAgICAgICAgb3V0bGluZTogMCxcbiAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgLy8gaW1wb3J0YW50ISB3aXRob3V0IGB3aWR0aGAgYnJvd3NlcnMgd29uJ3QgYWxsb3cgZm9jdXNcbiAgICAgICAgd2lkdGg6IDEsXG5cbiAgICAgICAgLy8gcmVtb3ZlIGN1cnNvciBvbiBkZXNrdG9wXG4gICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuXG4gICAgICAgIC8vIHJlbW92ZSBjdXJzb3Igb24gbW9iaWxlIHdoaWxzdCBtYWludGFpbmluZyBcInNjcm9sbCBpbnRvIHZpZXdcIiBiZWhhdmlvdXJcbiAgICAgICAgbGVmdDogLTEwMCxcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJyxcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn1cbiJdfQ== */\")\n  }));\n}\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar NodeResolver = /*#__PURE__*/function (_Component) {\n  _inherits(NodeResolver, _Component);\n\n  var _super = _createSuper(NodeResolver);\n\n  function NodeResolver() {\n    _classCallCheck(this, NodeResolver);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(NodeResolver, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.innerRef(findDOMNode(this));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.innerRef(null);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return NodeResolver;\n}(Component);\n\nvar STYLE_KEYS = ['boxSizing', 'height', 'overflow', 'paddingRight', 'position'];\nvar LOCK_STYLES = {\n  boxSizing: 'border-box',\n  // account for possible declaration `width: 100%;` on body\n  overflow: 'hidden',\n  position: 'relative',\n  height: '100%'\n};\n\nfunction preventTouchMove(e) {\n  e.preventDefault();\n}\nfunction allowTouchMove(e) {\n  e.stopPropagation();\n}\nfunction preventInertiaScroll() {\n  var top = this.scrollTop;\n  var totalScroll = this.scrollHeight;\n  var currentScroll = top + this.offsetHeight;\n\n  if (top === 0) {\n    this.scrollTop = 1;\n  } else if (currentScroll === totalScroll) {\n    this.scrollTop = top - 1;\n  }\n} // `ontouchstart` check works on most browsers\n// `maxTouchPoints` works on IE10/11 and Surface\n\nfunction isTouchDevice() {\n  return 'ontouchstart' in window || navigator.maxTouchPoints;\n}\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nvar canUseDOM = !!( window.document && window.document.createElement);\nvar activeScrollLocks = 0;\n\nvar ScrollLock = /*#__PURE__*/function (_Component) {\n  _inherits(ScrollLock, _Component);\n\n  var _super = _createSuper$1(ScrollLock);\n\n  function ScrollLock() {\n    var _this;\n\n    _classCallCheck(this, ScrollLock);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.originalStyles = {};\n    _this.listenerOptions = {\n      capture: false,\n      passive: false\n    };\n    return _this;\n  }\n\n  _createClass(ScrollLock, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!canUseDOM) return;\n      var _this$props = this.props,\n          accountForScrollbars = _this$props.accountForScrollbars,\n          touchScrollTarget = _this$props.touchScrollTarget;\n      var target = document.body;\n      var targetStyle = target && target.style;\n\n      if (accountForScrollbars) {\n        // store any styles already applied to the body\n        STYLE_KEYS.forEach(function (key) {\n          var val = targetStyle && targetStyle[key];\n          _this2.originalStyles[key] = val;\n        });\n      } // apply the lock styles and padding if this is the first scroll lock\n\n\n      if (accountForScrollbars && activeScrollLocks < 1) {\n        var currentPadding = parseInt(this.originalStyles.paddingRight, 10) || 0;\n        var clientWidth = document.body ? document.body.clientWidth : 0;\n        var adjustedPadding = window.innerWidth - clientWidth + currentPadding || 0;\n        Object.keys(LOCK_STYLES).forEach(function (key) {\n          var val = LOCK_STYLES[key];\n\n          if (targetStyle) {\n            targetStyle[key] = val;\n          }\n        });\n\n        if (targetStyle) {\n          targetStyle.paddingRight = \"\".concat(adjustedPadding, \"px\");\n        }\n      } // account for touch devices\n\n\n      if (target && isTouchDevice()) {\n        // Mobile Safari ignores { overflow: hidden } declaration on the body.\n        target.addEventListener('touchmove', preventTouchMove, this.listenerOptions); // Allow scroll on provided target\n\n        if (touchScrollTarget) {\n          touchScrollTarget.addEventListener('touchstart', preventInertiaScroll, this.listenerOptions);\n          touchScrollTarget.addEventListener('touchmove', allowTouchMove, this.listenerOptions);\n        }\n      } // increment active scroll locks\n\n\n      activeScrollLocks += 1;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      if (!canUseDOM) return;\n      var _this$props2 = this.props,\n          accountForScrollbars = _this$props2.accountForScrollbars,\n          touchScrollTarget = _this$props2.touchScrollTarget;\n      var target = document.body;\n      var targetStyle = target && target.style; // safely decrement active scroll locks\n\n      activeScrollLocks = Math.max(activeScrollLocks - 1, 0); // reapply original body styles, if any\n\n      if (accountForScrollbars && activeScrollLocks < 1) {\n        STYLE_KEYS.forEach(function (key) {\n          var val = _this3.originalStyles[key];\n\n          if (targetStyle) {\n            targetStyle[key] = val;\n          }\n        });\n      } // remove touch listeners\n\n\n      if (target && isTouchDevice()) {\n        target.removeEventListener('touchmove', preventTouchMove, this.listenerOptions);\n\n        if (touchScrollTarget) {\n          touchScrollTarget.removeEventListener('touchstart', preventInertiaScroll, this.listenerOptions);\n          touchScrollTarget.removeEventListener('touchmove', allowTouchMove, this.listenerOptions);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return ScrollLock;\n}(Component);\n\nScrollLock.defaultProps = {\n  accountForScrollbars: true\n};\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__$1() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar _ref$1 = process.env.NODE_ENV === \"production\" ? {\n  name: \"1dsbpcp\",\n  styles: \"position:fixed;left:0;bottom:0;right:0;top:0;\"\n} : {\n  name: \"1dsbpcp\",\n  styles: \"position:fixed;left:0;bottom:0;right:0;top:0;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcm9sbEJsb2NrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZEVSIsImZpbGUiOiJTY3JvbGxCbG9jay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG4vKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFB1cmVDb21wb25lbnQsIHR5cGUgRWxlbWVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ0BlbW90aW9uL2NvcmUnO1xuaW1wb3J0IE5vZGVSZXNvbHZlciBmcm9tICcuL05vZGVSZXNvbHZlcic7XG5pbXBvcnQgU2Nyb2xsTG9jayBmcm9tICcuL1Njcm9sbExvY2svaW5kZXgnO1xuXG50eXBlIFByb3BzID0ge1xuICBjaGlsZHJlbjogRWxlbWVudDwqPixcbiAgaXNFbmFibGVkOiBib29sZWFuLFxufTtcbnR5cGUgU3RhdGUgPSB7XG4gIHRvdWNoU2Nyb2xsVGFyZ2V0OiBIVE1MRWxlbWVudCB8IG51bGwsXG59O1xuXG4vLyBOT1RFOlxuLy8gV2Ugc2hvdWxkbid0IG5lZWQgdGhpcyBhZnRlciB1cGRhdGluZyB0byBSZWFjdCB2MTYuMy4wLCB3aGljaCBpbnRyb2R1Y2VzOlxuLy8gLSBjcmVhdGVSZWYoKSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvcmVhY3QtYXBpLmh0bWwjcmVhY3RjcmVhdGVyZWZcbi8vIC0gZm9yd2FyZFJlZigpIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1hcGkuaHRtbCNyZWFjdGZvcndhcmRyZWZcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Nyb2xsQmxvY2sgZXh0ZW5kcyBQdXJlQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBzdGF0ZSA9IHsgdG91Y2hTY3JvbGxUYXJnZXQ6IG51bGwgfTtcblxuICAvLyBtdXN0IGJlIGluIHN0YXRlIHRvIHRyaWdnZXIgYSByZS1yZW5kZXIsIG9ubHkgcnVucyBvbmNlIHBlciBpbnN0YW5jZVxuICBnZXRTY3JvbGxUYXJnZXQgPSAocmVmOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIGlmIChyZWYgPT09IHRoaXMuc3RhdGUudG91Y2hTY3JvbGxUYXJnZXQpIHJldHVybjtcbiAgICB0aGlzLnNldFN0YXRlKHsgdG91Y2hTY3JvbGxUYXJnZXQ6IHJlZiB9KTtcbiAgfTtcblxuICAvLyB0aGlzIHdpbGwgY2xvc2UgdGhlIG1lbnUgd2hlbiBhIHVzZXIgY2xpY2tzIG91dHNpZGVcbiAgYmx1clNlbGVjdElucHV0ID0gKCkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICB9XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIGlzRW5hYmxlZCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IHRvdWNoU2Nyb2xsVGFyZ2V0IH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgLy8gYmFpbCBlYXJseSBpZiBub3QgZW5hYmxlZFxuICAgIGlmICghaXNFbmFibGVkKSByZXR1cm4gY2hpbGRyZW47XG5cbiAgICAvKlxuICAgICAqIERpdlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIGJsb2NrcyBzY3JvbGxpbmcgb24gbm9uLWJvZHkgZWxlbWVudHMgYmVoaW5kIHRoZSBtZW51XG5cbiAgICAgKiBOb2RlUmVzb2x2ZXJcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiB3ZSBuZWVkIGEgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQgdG8gXCJ1bmxvY2tcIiBzY3JvbGwgb25cbiAgICAgKiBtb2JpbGUgZGV2aWNlc1xuXG4gICAgICogU2Nyb2xsTG9ja1xuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIGFjdHVhbGx5IGRvZXMgdGhlIHNjcm9sbCBsb2NraW5nXG4gICAgICovXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmJsdXJTZWxlY3RJbnB1dH1cbiAgICAgICAgICBjc3M9e3sgcG9zaXRpb246ICdmaXhlZCcsIGxlZnQ6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDAsIHRvcDogMCB9fVxuICAgICAgICAvPlxuICAgICAgICA8Tm9kZVJlc29sdmVyIGlubmVyUmVmPXt0aGlzLmdldFNjcm9sbFRhcmdldH0+e2NoaWxkcmVufTwvTm9kZVJlc29sdmVyPlxuICAgICAgICB7dG91Y2hTY3JvbGxUYXJnZXQgPyAoXG4gICAgICAgICAgPFNjcm9sbExvY2sgdG91Y2hTY3JvbGxUYXJnZXQ9e3RvdWNoU2Nyb2xsVGFyZ2V0fSAvPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiJdfQ== */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__$1\n};\n\n// NOTE:\n// We shouldn't need this after updating to React v16.3.0, which introduces:\n// - createRef() https://reactjs.org/docs/react-api.html#reactcreateref\n// - forwardRef() https://reactjs.org/docs/react-api.html#reactforwardref\nvar ScrollBlock = /*#__PURE__*/function (_PureComponent) {\n  _inherits(ScrollBlock, _PureComponent);\n\n  var _super = _createSuper$2(ScrollBlock);\n\n  function ScrollBlock() {\n    var _this;\n\n    _classCallCheck(this, ScrollBlock);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      touchScrollTarget: null\n    };\n\n    _this.getScrollTarget = function (ref) {\n      if (ref === _this.state.touchScrollTarget) return;\n\n      _this.setState({\n        touchScrollTarget: ref\n      });\n    };\n\n    _this.blurSelectInput = function () {\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ScrollBlock, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          isEnabled = _this$props.isEnabled;\n      var touchScrollTarget = this.state.touchScrollTarget; // bail early if not enabled\n\n      if (!isEnabled) return children;\n      /*\n       * Div\n       * ------------------------------\n       * blocks scrolling on non-body elements behind the menu\n        * NodeResolver\n       * ------------------------------\n       * we need a reference to the scrollable element to \"unlock\" scroll on\n       * mobile devices\n        * ScrollLock\n       * ------------------------------\n       * actually does the scroll locking\n       */\n\n      return jsx(\"div\", null, jsx(\"div\", {\n        onClick: this.blurSelectInput,\n        css: _ref$1\n      }), jsx(NodeResolver, {\n        innerRef: this.getScrollTarget\n      }, children), touchScrollTarget ? jsx(ScrollLock, {\n        touchScrollTarget: touchScrollTarget\n      }) : null);\n    }\n  }]);\n\n  return ScrollBlock;\n}(PureComponent);\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ScrollCaptor = /*#__PURE__*/function (_Component) {\n  _inherits(ScrollCaptor, _Component);\n\n  var _super = _createSuper$3(ScrollCaptor);\n\n  function ScrollCaptor() {\n    var _this;\n\n    _classCallCheck(this, ScrollCaptor);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.isBottom = false;\n    _this.isTop = false;\n    _this.scrollTarget = void 0;\n    _this.touchStart = void 0;\n\n    _this.cancelScroll = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    _this.handleEventDelta = function (event, delta) {\n      var _this$props = _this.props,\n          onBottomArrive = _this$props.onBottomArrive,\n          onBottomLeave = _this$props.onBottomLeave,\n          onTopArrive = _this$props.onTopArrive,\n          onTopLeave = _this$props.onTopLeave;\n      var _this$scrollTarget = _this.scrollTarget,\n          scrollTop = _this$scrollTarget.scrollTop,\n          scrollHeight = _this$scrollTarget.scrollHeight,\n          clientHeight = _this$scrollTarget.clientHeight;\n      var target = _this.scrollTarget;\n      var isDeltaPositive = delta > 0;\n      var availableScroll = scrollHeight - clientHeight - scrollTop;\n      var shouldCancelScroll = false; // reset bottom/top flags\n\n      if (availableScroll > delta && _this.isBottom) {\n        if (onBottomLeave) onBottomLeave(event);\n        _this.isBottom = false;\n      }\n\n      if (isDeltaPositive && _this.isTop) {\n        if (onTopLeave) onTopLeave(event);\n        _this.isTop = false;\n      } // bottom limit\n\n\n      if (isDeltaPositive && delta > availableScroll) {\n        if (onBottomArrive && !_this.isBottom) {\n          onBottomArrive(event);\n        }\n\n        target.scrollTop = scrollHeight;\n        shouldCancelScroll = true;\n        _this.isBottom = true; // top limit\n      } else if (!isDeltaPositive && -delta > scrollTop) {\n        if (onTopArrive && !_this.isTop) {\n          onTopArrive(event);\n        }\n\n        target.scrollTop = 0;\n        shouldCancelScroll = true;\n        _this.isTop = true;\n      } // cancel scroll\n\n\n      if (shouldCancelScroll) {\n        _this.cancelScroll(event);\n      }\n    };\n\n    _this.onWheel = function (event) {\n      _this.handleEventDelta(event, event.deltaY);\n    };\n\n    _this.onTouchStart = function (event) {\n      // set touch start so we can calculate touchmove delta\n      _this.touchStart = event.changedTouches[0].clientY;\n    };\n\n    _this.onTouchMove = function (event) {\n      var deltaY = _this.touchStart - event.changedTouches[0].clientY;\n\n      _this.handleEventDelta(event, deltaY);\n    };\n\n    _this.getScrollTarget = function (ref) {\n      _this.scrollTarget = ref;\n    };\n\n    return _this;\n  }\n\n  _createClass(ScrollCaptor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startListening(this.scrollTarget);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopListening(this.scrollTarget);\n    }\n  }, {\n    key: \"startListening\",\n    value: function startListening(el) {\n      // bail early if no element is available to attach to\n      if (!el) return; // all the if statements are to appease Flow 😢\n\n      if (typeof el.addEventListener === 'function') {\n        el.addEventListener('wheel', this.onWheel, false);\n      }\n\n      if (typeof el.addEventListener === 'function') {\n        el.addEventListener('touchstart', this.onTouchStart, false);\n      }\n\n      if (typeof el.addEventListener === 'function') {\n        el.addEventListener('touchmove', this.onTouchMove, false);\n      }\n    }\n  }, {\n    key: \"stopListening\",\n    value: function stopListening(el) {\n      if (!el) return; // all the if statements are to appease Flow 😢\n\n      if (typeof el.removeEventListener === 'function') {\n        el.removeEventListener('wheel', this.onWheel, false);\n      }\n\n      if (typeof el.removeEventListener === 'function') {\n        el.removeEventListener('touchstart', this.onTouchStart, false);\n      }\n\n      if (typeof el.removeEventListener === 'function') {\n        el.removeEventListener('touchmove', this.onTouchMove, false);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(NodeResolver, {\n        innerRef: this.getScrollTarget\n      }, this.props.children);\n    }\n  }]);\n\n  return ScrollCaptor;\n}(Component);\n\nfunction ScrollCaptorSwitch(_ref) {\n  var _ref$isEnabled = _ref.isEnabled,\n      isEnabled = _ref$isEnabled === void 0 ? true : _ref$isEnabled,\n      props = _objectWithoutProperties(_ref, [\"isEnabled\"]);\n\n  return isEnabled ? /*#__PURE__*/React.createElement(ScrollCaptor, props) : props.children;\n}\n\nvar instructionsAriaMessage = function instructionsAriaMessage(event) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isSearchable = context.isSearchable,\n      isMulti = context.isMulti,\n      label = context.label,\n      isDisabled = context.isDisabled,\n      tabSelectsValue = context.tabSelectsValue;\n\n  switch (event) {\n    case 'menu':\n      return \"Use Up and Down to choose options\".concat(isDisabled ? '' : ', press Enter to select the currently focused option', \", press Escape to exit the menu\").concat(tabSelectsValue ? ', press Tab to select the option and exit the menu' : '', \".\");\n\n    case 'input':\n      return \"\".concat(label ? label : 'Select', \" is focused \").concat(isSearchable ? ',type to refine list' : '', \", press Down to open the menu, \").concat(isMulti ? ' press left to focus selected values' : '');\n\n    case 'value':\n      return 'Use left and right to toggle between focused values, press Backspace to remove the currently focused value';\n  }\n};\nvar valueEventAriaMessage = function valueEventAriaMessage(event, context) {\n  var value = context.value,\n      isDisabled = context.isDisabled;\n  if (!value) return;\n\n  switch (event) {\n    case 'deselect-option':\n    case 'pop-value':\n    case 'remove-value':\n      return \"option \".concat(value, \", deselected.\");\n\n    case 'select-option':\n      return isDisabled ? \"option \".concat(value, \" is disabled. Select another option.\") : \"option \".concat(value, \", selected.\");\n  }\n};\nvar valueFocusAriaMessage = function valueFocusAriaMessage(_ref) {\n  var focusedValue = _ref.focusedValue,\n      getOptionLabel = _ref.getOptionLabel,\n      selectValue = _ref.selectValue;\n  return \"value \".concat(getOptionLabel(focusedValue), \" focused, \").concat(selectValue.indexOf(focusedValue) + 1, \" of \").concat(selectValue.length, \".\");\n};\nvar optionFocusAriaMessage = function optionFocusAriaMessage(_ref2) {\n  var focusedOption = _ref2.focusedOption,\n      getOptionLabel = _ref2.getOptionLabel,\n      options = _ref2.options;\n  return \"option \".concat(getOptionLabel(focusedOption), \" focused\").concat(focusedOption.isDisabled ? ' disabled' : '', \", \").concat(options.indexOf(focusedOption) + 1, \" of \").concat(options.length, \".\");\n};\nvar resultsAriaMessage = function resultsAriaMessage(_ref3) {\n  var inputValue = _ref3.inputValue,\n      screenReaderMessage = _ref3.screenReaderMessage;\n  return \"\".concat(screenReaderMessage).concat(inputValue ? ' for search term ' + inputValue : '', \".\");\n};\n\nvar formatGroupLabel = function formatGroupLabel(group) {\n  return group.label;\n};\nvar getOptionLabel = function getOptionLabel(option) {\n  return option.label;\n};\nvar getOptionValue = function getOptionValue(option) {\n  return option.value;\n};\nvar isOptionDisabled = function isOptionDisabled(option) {\n  return !!option.isDisabled;\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar defaultStyles = {\n  clearIndicator: clearIndicatorCSS,\n  container: containerCSS,\n  control: css,\n  dropdownIndicator: dropdownIndicatorCSS,\n  group: groupCSS,\n  groupHeading: groupHeadingCSS,\n  indicatorsContainer: indicatorsContainerCSS,\n  indicatorSeparator: indicatorSeparatorCSS,\n  input: inputCSS,\n  loadingIndicator: loadingIndicatorCSS,\n  loadingMessage: loadingMessageCSS,\n  menu: menuCSS,\n  menuList: menuListCSS,\n  menuPortal: menuPortalCSS,\n  multiValue: multiValueCSS,\n  multiValueLabel: multiValueLabelCSS,\n  multiValueRemove: multiValueRemoveCSS,\n  noOptionsMessage: noOptionsMessageCSS,\n  option: optionCSS,\n  placeholder: placeholderCSS,\n  singleValue: css$1,\n  valueContainer: valueContainerCSS\n}; // Merge Utility\n// Allows consumers to extend a base Select with additional styles\n\nfunction mergeStyles(source) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // initialize with source styles\n  var styles = _objectSpread$1({}, source); // massage in target styles\n\n\n  Object.keys(target).forEach(function (key) {\n    if (source[key]) {\n      styles[key] = function (rsCss, props) {\n        return target[key](source[key](rsCss, props), props);\n      };\n    } else {\n      styles[key] = target[key];\n    }\n  });\n  return styles;\n}\n\nvar colors = {\n  primary: '#2684FF',\n  primary75: '#4C9AFF',\n  primary50: '#B2D4FF',\n  primary25: '#DEEBFF',\n  danger: '#DE350B',\n  dangerLight: '#FFBDAD',\n  neutral0: 'hsl(0, 0%, 100%)',\n  neutral5: 'hsl(0, 0%, 95%)',\n  neutral10: 'hsl(0, 0%, 90%)',\n  neutral20: 'hsl(0, 0%, 80%)',\n  neutral30: 'hsl(0, 0%, 70%)',\n  neutral40: 'hsl(0, 0%, 60%)',\n  neutral50: 'hsl(0, 0%, 50%)',\n  neutral60: 'hsl(0, 0%, 40%)',\n  neutral70: 'hsl(0, 0%, 30%)',\n  neutral80: 'hsl(0, 0%, 20%)',\n  neutral90: 'hsl(0, 0%, 10%)'\n};\nvar borderRadius = 4; // Used to calculate consistent margin/padding on elements\n\nvar baseUnit = 4; // The minimum height of the control\n\nvar controlHeight = 38; // The amount of space between the control and menu */\n\nvar menuGutter = baseUnit * 2;\nvar spacing = {\n  baseUnit: baseUnit,\n  controlHeight: controlHeight,\n  menuGutter: menuGutter\n};\nvar defaultTheme = {\n  borderRadius: borderRadius,\n  colors: colors,\n  spacing: spacing\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$4(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$4(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$4() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nvar defaultProps = {\n  backspaceRemovesValue: true,\n  blurInputOnSelect: isTouchCapable(),\n  captureMenuScroll: !isTouchCapable(),\n  closeMenuOnSelect: true,\n  closeMenuOnScroll: false,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: createFilter(),\n  formatGroupLabel: formatGroupLabel,\n  getOptionLabel: getOptionLabel,\n  getOptionValue: getOptionValue,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !isMobileDevice(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return \"\".concat(count, \" result\").concat(count !== 1 ? 's' : '', \" available\");\n  },\n  styles: {},\n  tabIndex: '0',\n  tabSelectsValue: true\n};\nvar instanceId = 1;\n\nvar Select = /*#__PURE__*/function (_Component) {\n  _inherits(Select, _Component);\n\n  var _super = _createSuper$4(Select);\n\n  // Misc. Instance Properties\n  // ------------------------------\n  // TODO\n  // Refs\n  // ------------------------------\n  // Lifecycle\n  // ------------------------------\n  function Select(_props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _super.call(this, _props);\n    _this.state = {\n      ariaLiveSelection: '',\n      ariaLiveContext: '',\n      focusedOption: null,\n      focusedValue: null,\n      inputIsHidden: false,\n      isFocused: false,\n      menuOptions: {\n        render: [],\n        focusable: []\n      },\n      selectValue: []\n    };\n    _this.blockOptionHover = false;\n    _this.isComposing = false;\n    _this.clearFocusValueOnUpdate = false;\n    _this.commonProps = void 0;\n    _this.components = void 0;\n    _this.hasGroups = false;\n    _this.initialTouchX = 0;\n    _this.initialTouchY = 0;\n    _this.inputIsHiddenAfterUpdate = void 0;\n    _this.instancePrefix = '';\n    _this.openAfterFocus = false;\n    _this.scrollToFocusedOptionOnUpdate = false;\n    _this.userIsDragging = void 0;\n    _this.controlRef = null;\n\n    _this.getControlRef = function (ref) {\n      _this.controlRef = ref;\n    };\n\n    _this.focusedOptionRef = null;\n\n    _this.getFocusedOptionRef = function (ref) {\n      _this.focusedOptionRef = ref;\n    };\n\n    _this.menuListRef = null;\n\n    _this.getMenuListRef = function (ref) {\n      _this.menuListRef = ref;\n    };\n\n    _this.inputRef = null;\n\n    _this.getInputRef = function (ref) {\n      _this.inputRef = ref;\n    };\n\n    _this.cacheComponents = function (components) {\n      _this.components = defaultComponents({\n        components: components\n      });\n    };\n\n    _this.focus = _this.focusInput;\n    _this.blur = _this.blurInput;\n\n    _this.onChange = function (newValue, actionMeta) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          name = _this$props.name;\n      onChange(newValue, _objectSpread$2(_objectSpread$2({}, actionMeta), {}, {\n        name: name\n      }));\n    };\n\n    _this.setValue = function (newValue) {\n      var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'set-value';\n      var option = arguments.length > 2 ? arguments[2] : undefined;\n      var _this$props2 = _this.props,\n          closeMenuOnSelect = _this$props2.closeMenuOnSelect,\n          isMulti = _this$props2.isMulti;\n\n      _this.onInputChange('', {\n        action: 'set-value'\n      });\n\n      if (closeMenuOnSelect) {\n        _this.inputIsHiddenAfterUpdate = !isMulti;\n\n        _this.onMenuClose();\n      } // when the select value should change, we should reset focusedValue\n\n\n      _this.clearFocusValueOnUpdate = true;\n\n      _this.onChange(newValue, {\n        action: action,\n        option: option\n      });\n    };\n\n    _this.selectOption = function (newValue) {\n      var _this$props3 = _this.props,\n          blurInputOnSelect = _this$props3.blurInputOnSelect,\n          isMulti = _this$props3.isMulti;\n      var selectValue = _this.state.selectValue;\n\n      if (isMulti) {\n        if (_this.isOptionSelected(newValue, selectValue)) {\n          var candidate = _this.getOptionValue(newValue);\n\n          _this.setValue(selectValue.filter(function (i) {\n            return _this.getOptionValue(i) !== candidate;\n          }), 'deselect-option', newValue);\n\n          _this.announceAriaLiveSelection({\n            event: 'deselect-option',\n            context: {\n              value: _this.getOptionLabel(newValue)\n            }\n          });\n        } else {\n          if (!_this.isOptionDisabled(newValue, selectValue)) {\n            _this.setValue([].concat(_toConsumableArray(selectValue), [newValue]), 'select-option', newValue);\n\n            _this.announceAriaLiveSelection({\n              event: 'select-option',\n              context: {\n                value: _this.getOptionLabel(newValue)\n              }\n            });\n          } else {\n            // announce that option is disabled\n            _this.announceAriaLiveSelection({\n              event: 'select-option',\n              context: {\n                value: _this.getOptionLabel(newValue),\n                isDisabled: true\n              }\n            });\n          }\n        }\n      } else {\n        if (!_this.isOptionDisabled(newValue, selectValue)) {\n          _this.setValue(newValue, 'select-option');\n\n          _this.announceAriaLiveSelection({\n            event: 'select-option',\n            context: {\n              value: _this.getOptionLabel(newValue)\n            }\n          });\n        } else {\n          // announce that option is disabled\n          _this.announceAriaLiveSelection({\n            event: 'select-option',\n            context: {\n              value: _this.getOptionLabel(newValue),\n              isDisabled: true\n            }\n          });\n        }\n      }\n\n      if (blurInputOnSelect) {\n        _this.blurInput();\n      }\n    };\n\n    _this.removeValue = function (removedValue) {\n      var selectValue = _this.state.selectValue;\n\n      var candidate = _this.getOptionValue(removedValue);\n\n      var newValue = selectValue.filter(function (i) {\n        return _this.getOptionValue(i) !== candidate;\n      });\n\n      _this.onChange(newValue.length ? newValue : null, {\n        action: 'remove-value',\n        removedValue: removedValue\n      });\n\n      _this.announceAriaLiveSelection({\n        event: 'remove-value',\n        context: {\n          value: removedValue ? _this.getOptionLabel(removedValue) : ''\n        }\n      });\n\n      _this.focusInput();\n    };\n\n    _this.clearValue = function () {\n      _this.onChange(null, {\n        action: 'clear'\n      });\n    };\n\n    _this.popValue = function () {\n      var selectValue = _this.state.selectValue;\n      var lastSelectedValue = selectValue[selectValue.length - 1];\n      var newValue = selectValue.slice(0, selectValue.length - 1);\n\n      _this.announceAriaLiveSelection({\n        event: 'pop-value',\n        context: {\n          value: lastSelectedValue ? _this.getOptionLabel(lastSelectedValue) : ''\n        }\n      });\n\n      _this.onChange(newValue.length ? newValue : null, {\n        action: 'pop-value',\n        removedValue: lastSelectedValue\n      });\n    };\n\n    _this.getValue = function () {\n      return _this.state.selectValue;\n    };\n\n    _this.cx = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return classNames.apply(void 0, [_this.props.classNamePrefix].concat(args));\n    };\n\n    _this.getOptionLabel = function (data) {\n      return _this.props.getOptionLabel(data);\n    };\n\n    _this.getOptionValue = function (data) {\n      return _this.props.getOptionValue(data);\n    };\n\n    _this.getStyles = function (key, props) {\n      var base = defaultStyles[key](props);\n      base.boxSizing = 'border-box';\n      var custom = _this.props.styles[key];\n      return custom ? custom(base, props) : base;\n    };\n\n    _this.getElementId = function (element) {\n      return \"\".concat(_this.instancePrefix, \"-\").concat(element);\n    };\n\n    _this.getActiveDescendentId = function () {\n      var menuIsOpen = _this.props.menuIsOpen;\n      var _this$state = _this.state,\n          menuOptions = _this$state.menuOptions,\n          focusedOption = _this$state.focusedOption;\n      if (!focusedOption || !menuIsOpen) return undefined;\n      var index = menuOptions.focusable.indexOf(focusedOption);\n      var option = menuOptions.render[index];\n      return option && option.key;\n    };\n\n    _this.announceAriaLiveSelection = function (_ref2) {\n      var event = _ref2.event,\n          context = _ref2.context;\n\n      _this.setState({\n        ariaLiveSelection: valueEventAriaMessage(event, context)\n      });\n    };\n\n    _this.announceAriaLiveContext = function (_ref3) {\n      var event = _ref3.event,\n          context = _ref3.context;\n\n      _this.setState({\n        ariaLiveContext: instructionsAriaMessage(event, _objectSpread$2(_objectSpread$2({}, context), {}, {\n          label: _this.props['aria-label']\n        }))\n      });\n    };\n\n    _this.onMenuMouseDown = function (event) {\n      if (event.button !== 0) {\n        return;\n      }\n\n      event.stopPropagation();\n      event.preventDefault();\n\n      _this.focusInput();\n    };\n\n    _this.onMenuMouseMove = function (event) {\n      _this.blockOptionHover = false;\n    };\n\n    _this.onControlMouseDown = function (event) {\n      var openMenuOnClick = _this.props.openMenuOnClick;\n\n      if (!_this.state.isFocused) {\n        if (openMenuOnClick) {\n          _this.openAfterFocus = true;\n        }\n\n        _this.focusInput();\n      } else if (!_this.props.menuIsOpen) {\n        if (openMenuOnClick) {\n          _this.openMenu('first');\n        }\n      } else {\n        if ( // $FlowFixMe\n        event.target.tagName !== 'INPUT' && event.target.tagName !== 'TEXTAREA') {\n          _this.onMenuClose();\n        }\n      }\n\n      if ( // $FlowFixMe\n      event.target.tagName !== 'INPUT' && event.target.tagName !== 'TEXTAREA') {\n        event.preventDefault();\n      }\n    };\n\n    _this.onDropdownIndicatorMouseDown = function (event) {\n      // ignore mouse events that weren't triggered by the primary button\n      if (event && event.type === 'mousedown' && event.button !== 0) {\n        return;\n      }\n\n      if (_this.props.isDisabled) return;\n      var _this$props4 = _this.props,\n          isMulti = _this$props4.isMulti,\n          menuIsOpen = _this$props4.menuIsOpen;\n\n      _this.focusInput();\n\n      if (menuIsOpen) {\n        _this.inputIsHiddenAfterUpdate = !isMulti;\n\n        _this.onMenuClose();\n      } else {\n        _this.openMenu('first');\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    _this.onClearIndicatorMouseDown = function (event) {\n      // ignore mouse events that weren't triggered by the primary button\n      if (event && event.type === 'mousedown' && event.button !== 0) {\n        return;\n      }\n\n      _this.clearValue();\n\n      event.stopPropagation();\n      _this.openAfterFocus = false;\n\n      if (event.type === 'touchend') {\n        _this.focusInput();\n      } else {\n        setTimeout(function () {\n          return _this.focusInput();\n        });\n      }\n    };\n\n    _this.onScroll = function (event) {\n      if (typeof _this.props.closeMenuOnScroll === 'boolean') {\n        if (event.target instanceof HTMLElement && isDocumentElement(event.target)) {\n          _this.props.onMenuClose();\n        }\n      } else if (typeof _this.props.closeMenuOnScroll === 'function') {\n        if (_this.props.closeMenuOnScroll(event)) {\n          _this.props.onMenuClose();\n        }\n      }\n    };\n\n    _this.onCompositionStart = function () {\n      _this.isComposing = true;\n    };\n\n    _this.onCompositionEnd = function () {\n      _this.isComposing = false;\n    };\n\n    _this.onTouchStart = function (_ref4) {\n      var touches = _ref4.touches;\n      var touch = touches && touches.item(0);\n\n      if (!touch) {\n        return;\n      }\n\n      _this.initialTouchX = touch.clientX;\n      _this.initialTouchY = touch.clientY;\n      _this.userIsDragging = false;\n    };\n\n    _this.onTouchMove = function (_ref5) {\n      var touches = _ref5.touches;\n      var touch = touches && touches.item(0);\n\n      if (!touch) {\n        return;\n      }\n\n      var deltaX = Math.abs(touch.clientX - _this.initialTouchX);\n      var deltaY = Math.abs(touch.clientY - _this.initialTouchY);\n      var moveThreshold = 5;\n      _this.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n    };\n\n    _this.onTouchEnd = function (event) {\n      if (_this.userIsDragging) return; // close the menu if the user taps outside\n      // we're checking on event.target here instead of event.currentTarget, because we want to assert information\n      // on events on child elements, not the document (which we've attached this handler to).\n\n      if (_this.controlRef && !_this.controlRef.contains(event.target) && _this.menuListRef && !_this.menuListRef.contains(event.target)) {\n        _this.blurInput();\n      } // reset move vars\n\n\n      _this.initialTouchX = 0;\n      _this.initialTouchY = 0;\n    };\n\n    _this.onControlTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n\n      _this.onControlMouseDown(event);\n    };\n\n    _this.onClearIndicatorTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n\n      _this.onClearIndicatorMouseDown(event);\n    };\n\n    _this.onDropdownIndicatorTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n\n      _this.onDropdownIndicatorMouseDown(event);\n    };\n\n    _this.handleInputChange = function (event) {\n      var inputValue = event.currentTarget.value;\n      _this.inputIsHiddenAfterUpdate = false;\n\n      _this.onInputChange(inputValue, {\n        action: 'input-change'\n      });\n\n      if (!_this.props.menuIsOpen) {\n        _this.onMenuOpen();\n      }\n    };\n\n    _this.onInputFocus = function (event) {\n      var _this$props5 = _this.props,\n          isSearchable = _this$props5.isSearchable,\n          isMulti = _this$props5.isMulti;\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n\n      _this.inputIsHiddenAfterUpdate = false;\n\n      _this.announceAriaLiveContext({\n        event: 'input',\n        context: {\n          isSearchable: isSearchable,\n          isMulti: isMulti\n        }\n      });\n\n      _this.setState({\n        isFocused: true\n      });\n\n      if (_this.openAfterFocus || _this.props.openMenuOnFocus) {\n        _this.openMenu('first');\n      }\n\n      _this.openAfterFocus = false;\n    };\n\n    _this.onInputBlur = function (event) {\n      if (_this.menuListRef && _this.menuListRef.contains(document.activeElement)) {\n        _this.inputRef.focus();\n\n        return;\n      }\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n\n      _this.onInputChange('', {\n        action: 'input-blur'\n      });\n\n      _this.onMenuClose();\n\n      _this.setState({\n        focusedValue: null,\n        isFocused: false\n      });\n    };\n\n    _this.onOptionHover = function (focusedOption) {\n      if (_this.blockOptionHover || _this.state.focusedOption === focusedOption) {\n        return;\n      }\n\n      _this.setState({\n        focusedOption: focusedOption\n      });\n    };\n\n    _this.shouldHideSelectedOptions = function () {\n      var _this$props6 = _this.props,\n          hideSelectedOptions = _this$props6.hideSelectedOptions,\n          isMulti = _this$props6.isMulti;\n      if (hideSelectedOptions === undefined) return isMulti;\n      return hideSelectedOptions;\n    };\n\n    _this.onKeyDown = function (event) {\n      var _this$props7 = _this.props,\n          isMulti = _this$props7.isMulti,\n          backspaceRemovesValue = _this$props7.backspaceRemovesValue,\n          escapeClearsValue = _this$props7.escapeClearsValue,\n          inputValue = _this$props7.inputValue,\n          isClearable = _this$props7.isClearable,\n          isDisabled = _this$props7.isDisabled,\n          menuIsOpen = _this$props7.menuIsOpen,\n          onKeyDown = _this$props7.onKeyDown,\n          tabSelectsValue = _this$props7.tabSelectsValue,\n          openMenuOnFocus = _this$props7.openMenuOnFocus;\n      var _this$state2 = _this.state,\n          focusedOption = _this$state2.focusedOption,\n          focusedValue = _this$state2.focusedValue,\n          selectValue = _this$state2.selectValue;\n      if (isDisabled) return;\n\n      if (typeof onKeyDown === 'function') {\n        onKeyDown(event);\n\n        if (event.defaultPrevented) {\n          return;\n        }\n      } // Block option hover events when the user has just pressed a key\n\n\n      _this.blockOptionHover = true;\n\n      switch (event.key) {\n        case 'ArrowLeft':\n          if (!isMulti || inputValue) return;\n\n          _this.focusValue('previous');\n\n          break;\n\n        case 'ArrowRight':\n          if (!isMulti || inputValue) return;\n\n          _this.focusValue('next');\n\n          break;\n\n        case 'Delete':\n        case 'Backspace':\n          if (inputValue) return;\n\n          if (focusedValue) {\n            _this.removeValue(focusedValue);\n          } else {\n            if (!backspaceRemovesValue) return;\n\n            if (isMulti) {\n              _this.popValue();\n            } else if (isClearable) {\n              _this.clearValue();\n            }\n          }\n\n          break;\n\n        case 'Tab':\n          if (_this.isComposing) return;\n\n          if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption || // don't capture the event if the menu opens on focus and the focused\n          // option is already selected; it breaks the flow of navigation\n          openMenuOnFocus && _this.isOptionSelected(focusedOption, selectValue)) {\n            return;\n          }\n\n          _this.selectOption(focusedOption);\n\n          break;\n\n        case 'Enter':\n          if (event.keyCode === 229) {\n            // ignore the keydown event from an Input Method Editor(IME)\n            // ref. https://www.w3.org/TR/uievents/#determine-keydown-keyup-keyCode\n            break;\n          }\n\n          if (menuIsOpen) {\n            if (!focusedOption) return;\n            if (_this.isComposing) return;\n\n            _this.selectOption(focusedOption);\n\n            break;\n          }\n\n          return;\n\n        case 'Escape':\n          if (menuIsOpen) {\n            _this.inputIsHiddenAfterUpdate = false;\n\n            _this.onInputChange('', {\n              action: 'menu-close'\n            });\n\n            _this.onMenuClose();\n          } else if (isClearable && escapeClearsValue) {\n            _this.clearValue();\n          }\n\n          break;\n\n        case ' ':\n          // space\n          if (inputValue) {\n            return;\n          }\n\n          if (!menuIsOpen) {\n            _this.openMenu('first');\n\n            break;\n          }\n\n          if (!focusedOption) return;\n\n          _this.selectOption(focusedOption);\n\n          break;\n\n        case 'ArrowUp':\n          if (menuIsOpen) {\n            _this.focusOption('up');\n          } else {\n            _this.openMenu('last');\n          }\n\n          break;\n\n        case 'ArrowDown':\n          if (menuIsOpen) {\n            _this.focusOption('down');\n          } else {\n            _this.openMenu('first');\n          }\n\n          break;\n\n        case 'PageUp':\n          if (!menuIsOpen) return;\n\n          _this.focusOption('pageup');\n\n          break;\n\n        case 'PageDown':\n          if (!menuIsOpen) return;\n\n          _this.focusOption('pagedown');\n\n          break;\n\n        case 'Home':\n          if (!menuIsOpen) return;\n\n          _this.focusOption('first');\n\n          break;\n\n        case 'End':\n          if (!menuIsOpen) return;\n\n          _this.focusOption('last');\n\n          break;\n\n        default:\n          return;\n      }\n\n      event.preventDefault();\n    };\n\n    _this.buildMenuOptions = function (props, selectValue) {\n      var _props$inputValue = props.inputValue,\n          inputValue = _props$inputValue === void 0 ? '' : _props$inputValue,\n          options = props.options;\n\n      var toOption = function toOption(option, id) {\n        var isDisabled = _this.isOptionDisabled(option, selectValue);\n\n        var isSelected = _this.isOptionSelected(option, selectValue);\n\n        var label = _this.getOptionLabel(option);\n\n        var value = _this.getOptionValue(option);\n\n        if (_this.shouldHideSelectedOptions() && isSelected || !_this.filterOption({\n          label: label,\n          value: value,\n          data: option\n        }, inputValue)) {\n          return;\n        }\n\n        var onHover = isDisabled ? undefined : function () {\n          return _this.onOptionHover(option);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this.selectOption(option);\n        };\n        var optionId = \"\".concat(_this.getElementId('option'), \"-\").concat(id);\n        return {\n          innerProps: {\n            id: optionId,\n            onClick: onSelect,\n            onMouseMove: onHover,\n            onMouseOver: onHover,\n            tabIndex: -1\n          },\n          data: option,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: 'option',\n          value: value\n        };\n      };\n\n      return options.reduce(function (acc, item, itemIndex) {\n        if (item.options) {\n          // TODO needs a tidier implementation\n          if (!_this.hasGroups) _this.hasGroups = true;\n          var items = item.options;\n          var children = items.map(function (child, i) {\n            var option = toOption(child, \"\".concat(itemIndex, \"-\").concat(i));\n            if (option) acc.focusable.push(child);\n            return option;\n          }).filter(Boolean);\n\n          if (children.length) {\n            var groupId = \"\".concat(_this.getElementId('group'), \"-\").concat(itemIndex);\n            acc.render.push({\n              type: 'group',\n              key: groupId,\n              data: item,\n              options: children\n            });\n          }\n        } else {\n          var option = toOption(item, \"\".concat(itemIndex));\n\n          if (option) {\n            acc.render.push(option);\n            acc.focusable.push(item);\n          }\n        }\n\n        return acc;\n      }, {\n        render: [],\n        focusable: []\n      });\n    };\n\n    var _value = _props.value;\n    _this.cacheComponents = memoizeOne(_this.cacheComponents, exportedEqual).bind(_assertThisInitialized(_this));\n\n    _this.cacheComponents(_props.components);\n\n    _this.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n\n    var _selectValue = cleanValue(_value);\n\n    _this.buildMenuOptions = memoizeOne(_this.buildMenuOptions, function (newArgs, lastArgs) {\n      var _ref6 = newArgs,\n          _ref7 = _slicedToArray(_ref6, 2),\n          newProps = _ref7[0],\n          newSelectValue = _ref7[1];\n\n      var _ref8 = lastArgs,\n          _ref9 = _slicedToArray(_ref8, 2),\n          lastProps = _ref9[0],\n          lastSelectValue = _ref9[1];\n\n      return newSelectValue === lastSelectValue && newProps.inputValue === lastProps.inputValue && newProps.options === lastProps.options;\n    }).bind(_assertThisInitialized(_this));\n\n    var _menuOptions = _props.menuIsOpen ? _this.buildMenuOptions(_props, _selectValue) : {\n      render: [],\n      focusable: []\n    };\n\n    _this.state.menuOptions = _menuOptions;\n    _this.state.selectValue = _selectValue;\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startListeningComposition();\n      this.startListeningToTouch();\n\n      if (this.props.closeMenuOnScroll && document && document.addEventListener) {\n        // Listen to all scroll events, and filter them out inside of 'onScroll'\n        document.addEventListener('scroll', this.onScroll, true);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this$props8 = this.props,\n          options = _this$props8.options,\n          value = _this$props8.value,\n          menuIsOpen = _this$props8.menuIsOpen,\n          inputValue = _this$props8.inputValue; // re-cache custom components\n\n      this.cacheComponents(nextProps.components); // rebuild the menu options\n\n      if (nextProps.value !== value || nextProps.options !== options || nextProps.menuIsOpen !== menuIsOpen || nextProps.inputValue !== inputValue) {\n        var selectValue = cleanValue(nextProps.value);\n        var menuOptions = nextProps.menuIsOpen ? this.buildMenuOptions(nextProps, selectValue) : {\n          render: [],\n          focusable: []\n        };\n        var focusedValue = this.getNextFocusedValue(selectValue);\n        var focusedOption = this.getNextFocusedOption(menuOptions.focusable);\n        this.setState({\n          menuOptions: menuOptions,\n          selectValue: selectValue,\n          focusedOption: focusedOption,\n          focusedValue: focusedValue\n        });\n      } // some updates should toggle the state of the input visibility\n\n\n      if (this.inputIsHiddenAfterUpdate != null) {\n        this.setState({\n          inputIsHidden: this.inputIsHiddenAfterUpdate\n        });\n        delete this.inputIsHiddenAfterUpdate;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props9 = this.props,\n          isDisabled = _this$props9.isDisabled,\n          menuIsOpen = _this$props9.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n      if ( // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled || // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      }\n\n      if (isFocused && isDisabled && !prevProps.isDisabled) {\n        // ensure select state gets blurred in case Select is programatically disabled while focused\n        this.setState({\n          isFocused: false\n        }, this.onMenuClose);\n      } // scroll the focused option into view if necessary\n\n\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        scrollIntoView(this.menuListRef, this.focusedOptionRef);\n        this.scrollToFocusedOptionOnUpdate = false;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopListeningComposition();\n      this.stopListeningToTouch();\n      document.removeEventListener('scroll', this.onScroll, true);\n    }\n  }, {\n    key: \"onMenuOpen\",\n    // ==============================\n    // Consumer Handlers\n    // ==============================\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: \"onMenuClose\",\n    value: function onMenuClose() {\n      var _this$props10 = this.props,\n          isSearchable = _this$props10.isSearchable,\n          isMulti = _this$props10.isMulti;\n      this.announceAriaLiveContext({\n        event: 'input',\n        context: {\n          isSearchable: isSearchable,\n          isMulti: isMulti\n        }\n      });\n      this.onInputChange('', {\n        action: 'menu-close'\n      });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    } // ==============================\n    // Methods\n    // ==============================\n\n  }, {\n    key: \"focusInput\",\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: \"blurInput\",\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    } // aliased for consumers\n\n  }, {\n    key: \"openMenu\",\n    value: function openMenu(focusOption) {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          selectValue = _this$state3.selectValue,\n          isFocused = _this$state3.isFocused;\n      var menuOptions = this.buildMenuOptions(this.props, selectValue);\n      var _this$props11 = this.props,\n          isMulti = _this$props11.isMulti,\n          tabSelectsValue = _this$props11.tabSelectsValue;\n      var openAtIndex = focusOption === 'first' ? 0 : menuOptions.focusable.length - 1;\n\n      if (!isMulti) {\n        var selectedIndex = menuOptions.focusable.indexOf(selectValue[0]);\n\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      } // only scroll if the menu isn't already open\n\n\n      this.scrollToFocusedOptionOnUpdate = !(isFocused && this.menuListRef);\n      this.inputIsHiddenAfterUpdate = false;\n      this.setState({\n        menuOptions: menuOptions,\n        focusedValue: null,\n        focusedOption: menuOptions.focusable[openAtIndex]\n      }, function () {\n        _this2.onMenuOpen();\n\n        _this2.announceAriaLiveContext({\n          event: 'menu',\n          context: {\n            tabSelectsValue: tabSelectsValue\n          }\n        });\n      });\n    }\n  }, {\n    key: \"focusValue\",\n    value: function focusValue(direction) {\n      var _this$props12 = this.props,\n          isMulti = _this$props12.isMulti,\n          isSearchable = _this$props12.isSearchable;\n      var _this$state4 = this.state,\n          selectValue = _this$state4.selectValue,\n          focusedValue = _this$state4.focusedValue; // Only multiselects support value focusing\n\n      if (!isMulti) return;\n      this.setState({\n        focusedOption: null\n      });\n      var focusedIndex = selectValue.indexOf(focusedValue);\n\n      if (!focusedValue) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'value'\n        });\n      }\n\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n\n          break;\n\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n\n          break;\n      }\n\n      if (nextFocus === -1) {\n        this.announceAriaLiveContext({\n          event: 'input',\n          context: {\n            isSearchable: isSearchable,\n            isMulti: isMulti\n          }\n        });\n      }\n\n      this.setState({\n        inputIsHidden: nextFocus !== -1,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: \"focusOption\",\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var _this$props13 = this.props,\n          pageSize = _this$props13.pageSize,\n          tabSelectsValue = _this$props13.tabSelectsValue;\n      var _this$state5 = this.state,\n          focusedOption = _this$state5.focusedOption,\n          menuOptions = _this$state5.menuOptions;\n      var options = menuOptions.focusable;\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n\n      var focusedIndex = options.indexOf(focusedOption);\n\n      if (!focusedOption) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'menu',\n          context: {\n            tabSelectsValue: tabSelectsValue\n          }\n        });\n      }\n\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null\n      });\n      this.announceAriaLiveContext({\n        event: 'menu',\n        context: {\n          isDisabled: isOptionDisabled(options[nextFocus]),\n          tabSelectsValue: tabSelectsValue\n        }\n      });\n    }\n  }, {\n    key: \"getTheme\",\n    // ==============================\n    // Getters\n    // ==============================\n    value: function getTheme() {\n      // Use the default theme if there are no customizations.\n      if (!this.props.theme) {\n        return defaultTheme;\n      } // If the theme prop is a function, assume the function\n      // knows how to merge the passed-in default theme with\n      // its own modifications.\n\n\n      if (typeof this.props.theme === 'function') {\n        return this.props.theme(defaultTheme);\n      } // Otherwise, if a plain theme object was passed in,\n      // overlay it with the default theme.\n\n\n      return _objectSpread$2(_objectSpread$2({}, defaultTheme), this.props.theme);\n    }\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n          cx = this.cx,\n          getStyles = this.getStyles,\n          getValue = this.getValue,\n          setValue = this.setValue,\n          selectOption = this.selectOption,\n          props = this.props;\n      var isMulti = props.isMulti,\n          isRtl = props.isRtl,\n          options = props.options;\n      var hasValue = this.hasValue();\n      return {\n        cx: cx,\n        clearValue: clearValue,\n        getStyles: getStyles,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        setValue: setValue,\n        selectProps: props,\n        theme: this.getTheme()\n      };\n    }\n  }, {\n    key: \"getNextFocusedValue\",\n    value: function getNextFocusedValue(nextSelectValue) {\n      if (this.clearFocusValueOnUpdate) {\n        this.clearFocusValueOnUpdate = false;\n        return null;\n      }\n\n      var _this$state6 = this.state,\n          focusedValue = _this$state6.focusedValue,\n          lastSelectValue = _this$state6.selectValue;\n      var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n\n      if (lastFocusedIndex > -1) {\n        var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n\n        if (nextFocusedIndex > -1) {\n          // the focused value is still in the selectValue, return it\n          return focusedValue;\n        } else if (lastFocusedIndex < nextSelectValue.length) {\n          // the focusedValue is not present in the next selectValue array by\n          // reference, so return the new value at the same index\n          return nextSelectValue[lastFocusedIndex];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getNextFocusedOption\",\n    value: function getNextFocusedOption(options) {\n      var lastFocusedOption = this.state.focusedOption;\n      return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n    }\n  }, {\n    key: \"hasValue\",\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n      return selectValue.length > 0;\n    }\n  }, {\n    key: \"hasOptions\",\n    value: function hasOptions() {\n      return !!this.state.menuOptions.render.length;\n    }\n  }, {\n    key: \"countOptions\",\n    value: function countOptions() {\n      return this.state.menuOptions.focusable.length;\n    }\n  }, {\n    key: \"isClearable\",\n    value: function isClearable() {\n      var _this$props14 = this.props,\n          isClearable = _this$props14.isClearable,\n          isMulti = _this$props14.isMulti; // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n\n      if (isClearable === undefined) return isMulti;\n      return isClearable;\n    }\n  }, {\n    key: \"isOptionDisabled\",\n    value: function isOptionDisabled(option, selectValue) {\n      return typeof this.props.isOptionDisabled === 'function' ? this.props.isOptionDisabled(option, selectValue) : false;\n    }\n  }, {\n    key: \"isOptionSelected\",\n    value: function isOptionSelected(option, selectValue) {\n      var _this3 = this;\n\n      if (selectValue.indexOf(option) > -1) return true;\n\n      if (typeof this.props.isOptionSelected === 'function') {\n        return this.props.isOptionSelected(option, selectValue);\n      }\n\n      var candidate = this.getOptionValue(option);\n      return selectValue.some(function (i) {\n        return _this3.getOptionValue(i) === candidate;\n      });\n    }\n  }, {\n    key: \"filterOption\",\n    value: function filterOption(option, inputValue) {\n      return this.props.filterOption ? this.props.filterOption(option, inputValue) : true;\n    }\n  }, {\n    key: \"formatOptionLabel\",\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var inputValue = this.props.inputValue;\n        var selectValue = this.state.selectValue;\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: inputValue,\n          selectValue: selectValue\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: \"formatGroupLabel\",\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    } // ==============================\n    // Mouse Handlers\n    // ==============================\n\n  }, {\n    key: \"startListeningComposition\",\n    // ==============================\n    // Composition Handlers\n    // ==============================\n    value: function startListeningComposition() {\n      if (document && document.addEventListener) {\n        document.addEventListener('compositionstart', this.onCompositionStart, false);\n        document.addEventListener('compositionend', this.onCompositionEnd, false);\n      }\n    }\n  }, {\n    key: \"stopListeningComposition\",\n    value: function stopListeningComposition() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('compositionstart', this.onCompositionStart);\n        document.removeEventListener('compositionend', this.onCompositionEnd);\n      }\n    }\n  }, {\n    key: \"startListeningToTouch\",\n    // ==============================\n    // Touch Handlers\n    // ==============================\n    value: function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: \"stopListeningToTouch\",\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    }\n  }, {\n    key: \"constructAriaLiveMessage\",\n    // ==============================\n    // Renderers\n    // ==============================\n    value: function constructAriaLiveMessage() {\n      var _this$state7 = this.state,\n          ariaLiveContext = _this$state7.ariaLiveContext,\n          selectValue = _this$state7.selectValue,\n          focusedValue = _this$state7.focusedValue,\n          focusedOption = _this$state7.focusedOption;\n      var _this$props15 = this.props,\n          options = _this$props15.options,\n          menuIsOpen = _this$props15.menuIsOpen,\n          inputValue = _this$props15.inputValue,\n          screenReaderStatus = _this$props15.screenReaderStatus; // An aria live message representing the currently focused value in the select.\n\n      var focusedValueMsg = focusedValue ? valueFocusAriaMessage({\n        focusedValue: focusedValue,\n        getOptionLabel: this.getOptionLabel,\n        selectValue: selectValue\n      }) : ''; // An aria live message representing the currently focused option in the select.\n\n      var focusedOptionMsg = focusedOption && menuIsOpen ? optionFocusAriaMessage({\n        focusedOption: focusedOption,\n        getOptionLabel: this.getOptionLabel,\n        options: options\n      }) : ''; // An aria live message representing the set of focusable results and current searchterm/inputvalue.\n\n      var resultsMsg = resultsAriaMessage({\n        inputValue: inputValue,\n        screenReaderMessage: screenReaderStatus({\n          count: this.countOptions()\n        })\n      });\n      return \"\".concat(focusedValueMsg, \" \").concat(focusedOptionMsg, \" \").concat(resultsMsg, \" \").concat(ariaLiveContext);\n    }\n  }, {\n    key: \"renderInput\",\n    value: function renderInput() {\n      var _this$props16 = this.props,\n          isDisabled = _this$props16.isDisabled,\n          isSearchable = _this$props16.isSearchable,\n          inputId = _this$props16.inputId,\n          inputValue = _this$props16.inputValue,\n          tabIndex = _this$props16.tabIndex,\n          form = _this$props16.form;\n      var Input = this.components.Input;\n      var inputIsHidden = this.state.inputIsHidden;\n      var id = inputId || this.getElementId('input'); // aria attributes makes the JSX \"noisy\", separated for clarity\n\n      var ariaAttributes = {\n        'aria-autocomplete': 'list',\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby']\n      };\n\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return /*#__PURE__*/React.createElement(DummyInput, _extends({\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: noop,\n          onFocus: this.onInputFocus,\n          readOnly: true,\n          disabled: isDisabled,\n          tabIndex: tabIndex,\n          form: form,\n          value: \"\"\n        }, ariaAttributes));\n      }\n\n      var _this$commonProps = this.commonProps,\n          cx = _this$commonProps.cx,\n          theme = _this$commonProps.theme,\n          selectProps = _this$commonProps.selectProps;\n      return /*#__PURE__*/React.createElement(Input, _extends({\n        autoCapitalize: \"none\",\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        cx: cx,\n        getStyles: this.getStyles,\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        selectProps: selectProps,\n        spellCheck: \"false\",\n        tabIndex: tabIndex,\n        form: form,\n        theme: theme,\n        type: \"text\",\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: \"renderPlaceholderOrValue\",\n    value: function renderPlaceholderOrValue() {\n      var _this4 = this;\n\n      var _this$components = this.components,\n          MultiValue = _this$components.MultiValue,\n          MultiValueContainer = _this$components.MultiValueContainer,\n          MultiValueLabel = _this$components.MultiValueLabel,\n          MultiValueRemove = _this$components.MultiValueRemove,\n          SingleValue = _this$components.SingleValue,\n          Placeholder = _this$components.Placeholder;\n      var commonProps = this.commonProps;\n      var _this$props17 = this.props,\n          controlShouldRenderValue = _this$props17.controlShouldRenderValue,\n          isDisabled = _this$props17.isDisabled,\n          isMulti = _this$props17.isMulti,\n          inputValue = _this$props17.inputValue,\n          placeholder = _this$props17.placeholder;\n      var _this$state8 = this.state,\n          selectValue = _this$state8.selectValue,\n          focusedValue = _this$state8.focusedValue,\n          isFocused = _this$state8.isFocused;\n\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : /*#__PURE__*/React.createElement(Placeholder, _extends({}, commonProps, {\n          key: \"placeholder\",\n          isDisabled: isDisabled,\n          isFocused: isFocused\n        }), placeholder);\n      }\n\n      if (isMulti) {\n        var selectValues = selectValue.map(function (opt, index) {\n          var isOptionFocused = opt === focusedValue;\n          return /*#__PURE__*/React.createElement(MultiValue, _extends({}, commonProps, {\n            components: {\n              Container: MultiValueContainer,\n              Label: MultiValueLabel,\n              Remove: MultiValueRemove\n            },\n            isFocused: isOptionFocused,\n            isDisabled: isDisabled,\n            key: \"\".concat(_this4.getOptionValue(opt)).concat(index),\n            index: index,\n            removeProps: {\n              onClick: function onClick() {\n                return _this4.removeValue(opt);\n              },\n              onTouchEnd: function onTouchEnd() {\n                return _this4.removeValue(opt);\n              },\n              onMouseDown: function onMouseDown(e) {\n                e.preventDefault();\n                e.stopPropagation();\n              }\n            },\n            data: opt\n          }), _this4.formatOptionLabel(opt, 'value'));\n        });\n        return selectValues;\n      }\n\n      if (inputValue) {\n        return null;\n      }\n\n      var singleValue = selectValue[0];\n      return /*#__PURE__*/React.createElement(SingleValue, _extends({}, commonProps, {\n        data: singleValue,\n        isDisabled: isDisabled\n      }), this.formatOptionLabel(singleValue, 'value'));\n    }\n  }, {\n    key: \"renderClearIndicator\",\n    value: function renderClearIndicator() {\n      var ClearIndicator = this.components.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _this$props18 = this.props,\n          isDisabled = _this$props18.isDisabled,\n          isLoading = _this$props18.isLoading;\n      var isFocused = this.state.isFocused;\n\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderLoadingIndicator\",\n    value: function renderLoadingIndicator() {\n      var LoadingIndicator = this.components.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _this$props19 = this.props,\n          isDisabled = _this$props19.isDisabled,\n          isLoading = _this$props19.isLoading;\n      var isFocused = this.state.isFocused;\n      if (!LoadingIndicator || !isLoading) return null;\n      var innerProps = {\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderIndicatorSeparator\",\n    value: function renderIndicatorSeparator() {\n      var _this$components2 = this.components,\n          DropdownIndicator = _this$components2.DropdownIndicator,\n          IndicatorSeparator = _this$components2.IndicatorSeparator; // separator doesn't make sense without the dropdown indicator\n\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      return /*#__PURE__*/React.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderDropdownIndicator\",\n    value: function renderDropdownIndicator() {\n      var DropdownIndicator = this.components.DropdownIndicator;\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderMenu\",\n    value: function renderMenu() {\n      var _this5 = this;\n\n      var _this$components3 = this.components,\n          Group = _this$components3.Group,\n          GroupHeading = _this$components3.GroupHeading,\n          Menu = _this$components3.Menu,\n          MenuList = _this$components3.MenuList,\n          MenuPortal = _this$components3.MenuPortal,\n          LoadingMessage = _this$components3.LoadingMessage,\n          NoOptionsMessage = _this$components3.NoOptionsMessage,\n          Option = _this$components3.Option;\n      var commonProps = this.commonProps;\n      var _this$state9 = this.state,\n          focusedOption = _this$state9.focusedOption,\n          menuOptions = _this$state9.menuOptions;\n      var _this$props20 = this.props,\n          captureMenuScroll = _this$props20.captureMenuScroll,\n          inputValue = _this$props20.inputValue,\n          isLoading = _this$props20.isLoading,\n          loadingMessage = _this$props20.loadingMessage,\n          minMenuHeight = _this$props20.minMenuHeight,\n          maxMenuHeight = _this$props20.maxMenuHeight,\n          menuIsOpen = _this$props20.menuIsOpen,\n          menuPlacement = _this$props20.menuPlacement,\n          menuPosition = _this$props20.menuPosition,\n          menuPortalTarget = _this$props20.menuPortalTarget,\n          menuShouldBlockScroll = _this$props20.menuShouldBlockScroll,\n          menuShouldScrollIntoView = _this$props20.menuShouldScrollIntoView,\n          noOptionsMessage = _this$props20.noOptionsMessage,\n          onMenuScrollToTop = _this$props20.onMenuScrollToTop,\n          onMenuScrollToBottom = _this$props20.onMenuScrollToBottom;\n      if (!menuIsOpen) return null; // TODO: Internal Option Type here\n\n      var render = function render(props) {\n        // for performance, the menu options in state aren't changed when the\n        // focused option changes so we calculate additional props based on that\n        var isFocused = focusedOption === props.data;\n        props.innerRef = isFocused ? _this5.getFocusedOptionRef : undefined;\n        return /*#__PURE__*/React.createElement(Option, _extends({}, commonProps, props, {\n          isFocused: isFocused\n        }), _this5.formatOptionLabel(props.data, 'menu'));\n      };\n\n      var menuUI;\n\n      if (this.hasOptions()) {\n        menuUI = menuOptions.render.map(function (item) {\n          if (item.type === 'group') {\n            var type = item.type,\n                group = _objectWithoutProperties(item, [\"type\"]);\n\n            var headingId = \"\".concat(item.key, \"-heading\");\n            return /*#__PURE__*/React.createElement(Group, _extends({}, commonProps, group, {\n              Heading: GroupHeading,\n              headingProps: {\n                id: headingId,\n                data: item.data\n              },\n              label: _this5.formatGroupLabel(item.data)\n            }), item.options.map(function (option) {\n              return render(option);\n            }));\n          } else if (item.type === 'option') {\n            return render(item);\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({\n          inputValue: inputValue\n        });\n        if (message === null) return null;\n        menuUI = /*#__PURE__*/React.createElement(LoadingMessage, commonProps, message);\n      } else {\n        var _message = noOptionsMessage({\n          inputValue: inputValue\n        });\n\n        if (_message === null) return null;\n        menuUI = /*#__PURE__*/React.createElement(NoOptionsMessage, commonProps, _message);\n      }\n\n      var menuPlacementProps = {\n        minMenuHeight: minMenuHeight,\n        maxMenuHeight: maxMenuHeight,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition,\n        menuShouldScrollIntoView: menuShouldScrollIntoView\n      };\n      var menuElement = /*#__PURE__*/React.createElement(MenuPlacer, _extends({}, commonProps, menuPlacementProps), function (_ref10) {\n        var ref = _ref10.ref,\n            _ref10$placerProps = _ref10.placerProps,\n            placement = _ref10$placerProps.placement,\n            maxHeight = _ref10$placerProps.maxHeight;\n        return /*#__PURE__*/React.createElement(Menu, _extends({}, commonProps, menuPlacementProps, {\n          innerRef: ref,\n          innerProps: {\n            onMouseDown: _this5.onMenuMouseDown,\n            onMouseMove: _this5.onMenuMouseMove\n          },\n          isLoading: isLoading,\n          placement: placement\n        }), /*#__PURE__*/React.createElement(ScrollCaptorSwitch, {\n          isEnabled: captureMenuScroll,\n          onTopArrive: onMenuScrollToTop,\n          onBottomArrive: onMenuScrollToBottom\n        }, /*#__PURE__*/React.createElement(ScrollBlock, {\n          isEnabled: menuShouldBlockScroll\n        }, /*#__PURE__*/React.createElement(MenuList, _extends({}, commonProps, {\n          innerRef: _this5.getMenuListRef,\n          isLoading: isLoading,\n          maxHeight: maxHeight\n        }), menuUI))));\n      }); // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n\n      return menuPortalTarget || menuPosition === 'fixed' ? /*#__PURE__*/React.createElement(MenuPortal, _extends({}, commonProps, {\n        appendTo: menuPortalTarget,\n        controlElement: this.controlRef,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition\n      }), menuElement) : menuElement;\n    }\n  }, {\n    key: \"renderFormField\",\n    value: function renderFormField() {\n      var _this6 = this;\n\n      var _this$props21 = this.props,\n          delimiter = _this$props21.delimiter,\n          isDisabled = _this$props21.isDisabled,\n          isMulti = _this$props21.isMulti,\n          name = _this$props21.name;\n      var selectValue = this.state.selectValue;\n      if (!name || isDisabled) return;\n\n      if (isMulti) {\n        if (delimiter) {\n          var value = selectValue.map(function (opt) {\n            return _this6.getOptionValue(opt);\n          }).join(delimiter);\n          return /*#__PURE__*/React.createElement(\"input\", {\n            name: name,\n            type: \"hidden\",\n            value: value\n          });\n        } else {\n          var input = selectValue.length > 0 ? selectValue.map(function (opt, i) {\n            return /*#__PURE__*/React.createElement(\"input\", {\n              key: \"i-\".concat(i),\n              name: name,\n              type: \"hidden\",\n              value: _this6.getOptionValue(opt)\n            });\n          }) : /*#__PURE__*/React.createElement(\"input\", {\n            name: name,\n            type: \"hidden\"\n          });\n          return /*#__PURE__*/React.createElement(\"div\", null, input);\n        }\n      } else {\n        var _value2 = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n\n        return /*#__PURE__*/React.createElement(\"input\", {\n          name: name,\n          type: \"hidden\",\n          value: _value2\n        });\n      }\n    }\n  }, {\n    key: \"renderLiveRegion\",\n    value: function renderLiveRegion() {\n      if (!this.state.isFocused) return null;\n      return /*#__PURE__*/React.createElement(A11yText, {\n        \"aria-live\": \"polite\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        id: \"aria-selection-event\"\n      }, \"\\xA0\", this.state.ariaLiveSelection), /*#__PURE__*/React.createElement(\"span\", {\n        id: \"aria-context\"\n      }, \"\\xA0\", this.constructAriaLiveMessage()));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$components4 = this.components,\n          Control = _this$components4.Control,\n          IndicatorsContainer = _this$components4.IndicatorsContainer,\n          SelectContainer = _this$components4.SelectContainer,\n          ValueContainer = _this$components4.ValueContainer;\n      var _this$props22 = this.props,\n          className = _this$props22.className,\n          id = _this$props22.id,\n          isDisabled = _this$props22.isDisabled,\n          menuIsOpen = _this$props22.menuIsOpen;\n      var isFocused = this.state.isFocused;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return /*#__PURE__*/React.createElement(SelectContainer, _extends({}, commonProps, {\n        className: className,\n        innerProps: {\n          id: id,\n          onKeyDown: this.onKeyDown\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }), this.renderLiveRegion(), /*#__PURE__*/React.createElement(Control, _extends({}, commonProps, {\n        innerRef: this.getControlRef,\n        innerProps: {\n          onMouseDown: this.onControlMouseDown,\n          onTouchEnd: this.onControlTouchEnd\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused,\n        menuIsOpen: menuIsOpen\n      }), /*#__PURE__*/React.createElement(ValueContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderPlaceholderOrValue(), this.renderInput()), /*#__PURE__*/React.createElement(IndicatorsContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderClearIndicator(), this.renderLoadingIndicator(), this.renderIndicatorSeparator(), this.renderDropdownIndicator())), this.renderMenu(), this.renderFormField());\n    }\n  }]);\n\n  return Select;\n}(Component);\n\nSelect.defaultProps = defaultProps;\n\nexport { Select as S, defaultTheme as a, createFilter as c, defaultProps as d, mergeStyles as m };\n","import _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport React, { Component } from 'react';\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nvar defaultProps = {\n  defaultInputValue: '',\n  defaultMenuIsOpen: false,\n  defaultValue: null\n};\n\nvar manageState = function manageState(SelectComponent) {\n  var _class, _temp;\n\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inherits(StateManager, _Component);\n\n    var _super = _createSuper(StateManager);\n\n    function StateManager() {\n      var _this;\n\n      _classCallCheck(this, StateManager);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.select = void 0;\n      _this.state = {\n        inputValue: _this.props.inputValue !== undefined ? _this.props.inputValue : _this.props.defaultInputValue,\n        menuIsOpen: _this.props.menuIsOpen !== undefined ? _this.props.menuIsOpen : _this.props.defaultMenuIsOpen,\n        value: _this.props.value !== undefined ? _this.props.value : _this.props.defaultValue\n      };\n\n      _this.onChange = function (value, actionMeta) {\n        _this.callProp('onChange', value, actionMeta);\n\n        _this.setState({\n          value: value\n        });\n      };\n\n      _this.onInputChange = function (value, actionMeta) {\n        // TODO: for backwards compatibility, we allow the prop to return a new\n        // value, but now inputValue is a controllable prop we probably shouldn't\n        var newValue = _this.callProp('onInputChange', value, actionMeta);\n\n        _this.setState({\n          inputValue: newValue !== undefined ? newValue : value\n        });\n      };\n\n      _this.onMenuOpen = function () {\n        _this.callProp('onMenuOpen');\n\n        _this.setState({\n          menuIsOpen: true\n        });\n      };\n\n      _this.onMenuClose = function () {\n        _this.callProp('onMenuClose');\n\n        _this.setState({\n          menuIsOpen: false\n        });\n      };\n\n      return _this;\n    }\n\n    _createClass(StateManager, [{\n      key: \"focus\",\n      value: function focus() {\n        this.select.focus();\n      }\n    }, {\n      key: \"blur\",\n      value: function blur() {\n        this.select.blur();\n      } // FIXME: untyped flow code, return any\n\n    }, {\n      key: \"getProp\",\n      value: function getProp(key) {\n        return this.props[key] !== undefined ? this.props[key] : this.state[key];\n      } // FIXME: untyped flow code, return any\n\n    }, {\n      key: \"callProp\",\n      value: function callProp(name) {\n        if (typeof this.props[name] === 'function') {\n          var _this$props;\n\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          return (_this$props = this.props)[name].apply(_this$props, args);\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        var _this$props2 = this.props,\n            defaultInputValue = _this$props2.defaultInputValue,\n            defaultMenuIsOpen = _this$props2.defaultMenuIsOpen,\n            defaultValue = _this$props2.defaultValue,\n            props = _objectWithoutProperties(_this$props2, [\"defaultInputValue\", \"defaultMenuIsOpen\", \"defaultValue\"]);\n\n        return /*#__PURE__*/React.createElement(SelectComponent, _extends({}, props, {\n          ref: function ref(_ref) {\n            _this2.select = _ref;\n          },\n          inputValue: this.getProp('inputValue'),\n          menuIsOpen: this.getProp('menuIsOpen'),\n          onChange: this.onChange,\n          onInputChange: this.onInputChange,\n          onMenuClose: this.onMenuClose,\n          onMenuOpen: this.onMenuOpen,\n          value: this.getProp('value')\n        }));\n      }\n    }]);\n\n    return StateManager;\n  }(Component), _class.defaultProps = defaultProps, _temp;\n};\n\nexport { manageState as m };\n","import '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/extends';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport React, { Component } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { CacheProvider } from '@emotion/core';\nimport 'react-dom';\nimport '@babel/runtime/helpers/typeof';\nexport { F as components } from './index-75b02bac.browser.esm.js';\nimport { S as Select } from './Select-e1cf49ae.browser.esm.js';\nexport { c as createFilter, a as defaultTheme, m as mergeStyles } from './Select-e1cf49ae.browser.esm.js';\nimport '@emotion/css';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport 'react-input-autosize';\nimport { m as manageState } from './stateManager-2f2b6f5b.browser.esm.js';\nimport createCache from '@emotion/cache';\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar NonceProvider = /*#__PURE__*/function (_Component) {\n  _inherits(NonceProvider, _Component);\n\n  var _super = _createSuper(NonceProvider);\n\n  function NonceProvider(props) {\n    var _this;\n\n    _classCallCheck(this, NonceProvider);\n\n    _this = _super.call(this, props);\n\n    _this.createEmotionCache = function (nonce) {\n      return createCache({\n        nonce: nonce\n      });\n    };\n\n    _this.createEmotionCache = memoizeOne(_this.createEmotionCache);\n    return _this;\n  }\n\n  _createClass(NonceProvider, [{\n    key: \"render\",\n    value: function render() {\n      var emotionCache = this.createEmotionCache(this.props.nonce);\n      return /*#__PURE__*/React.createElement(CacheProvider, {\n        value: emotionCache\n      }, this.props.children);\n    }\n  }]);\n\n  return NonceProvider;\n}(Component);\n\nvar index = manageState(Select);\n\nexport default index;\nexport { NonceProvider };\n","/** @license React v16.14.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var l=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,z=n?Symbol.for(\"react.memo\"):60115,A=n?Symbol.for(\"react.lazy\"):\n60116,B=\"function\"===typeof Symbol&&Symbol.iterator;function C(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction G(){}G.prototype=F.prototype;function H(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps,f)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}\nfunction N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();d.result=a;d.keyPrefix=b;d.func=c;d.context=e;d.count=0;return d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}\nfunction S(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>Q.length&&Q.push(a)}\nfunction T(a,b,c,e){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,\"\"===b?\".\"+U(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+U(d,k);g+=T(d,f,c,e)}else if(null===a||\"object\"!==typeof a?f=null:(f=B&&a[B]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(d=a.next()).done;)d=d.value,f=b+U(d,k++),g+=T(d,f,c,e);else if(\"object\"===d)throw c=\"\"+a,Error(C(31,\"[object Object]\"===c?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":c,\"\"));return g}function V(a,b,c){return null==a?0:T(a,\"\",b,c)}function U(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}\nfunction aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?X(a,e,c,function(a){return a}):null!=a&&(O(a)&&(a=N(a,d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(P,\"$&/\")+\"/\")+c)),e.push(a))}function X(a,b,c,e,d){var g=\"\";null!=c&&(g=(\"\"+c).replace(P,\"$&/\")+\"/\");b=R(b,g,e,d);V(a,aa,b);S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}\nvar ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];X(a,e,null,b,c);return e},forEach:function(a,b,c){if(null==a)return a;b=R(null,null,b,c);V(a,W,b);S(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];X(a,b,null,function(a){return a});return b},only:function(a){if(!O(a))throw Error(C(143));return a}};\nexports.Component=F;exports.Fragment=r;exports.Profiler=u;exports.PureComponent=H;exports.StrictMode=t;exports.Suspense=y;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=J.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,\nkey:d,ref:g,props:e,_owner:k}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:x,render:a}};exports.isValidElement=O;\nexports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}};exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return Z().useCallback(a,b)};exports.useContext=function(a,b){return Z().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return Z().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return Z().useMemo(a,b)};exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)};exports.useRef=function(a){return Z().useRef(a)};exports.useState=function(a){return Z().useState(a)};exports.version=\"16.14.0\";\n","/** @license React v16.14.0\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),n=require(\"object-assign\"),r=require(\"scheduler\");function u(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(u(227));\nfunction ba(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(a){da=!0;ea=a}};function ja(a,b,c,d,e,f,g,h,k){da=!1;ea=null;ba.apply(ia,arguments)}function ka(a,b,c,d,e,f,g,h,k){ja.apply(this,arguments);if(da){if(da){var l=ea;da=!1;ea=null}else throw Error(u(198));fa||(fa=!0,ha=l)}}var la=null,ma=null,na=null;\nfunction oa(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=na(c);ka(d,b,void 0,a);a.currentTarget=null}var pa=null,qa={};\nfunction ra(){if(pa)for(var a in qa){var b=qa[a],c=pa.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!sa[c]){if(!b.extractEvents)throw Error(u(97,a));sa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;if(ta.hasOwnProperty(h))throw Error(u(99,h));ta[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ua(k[e],g,h);e=!0}else f.registrationName?(ua(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a));}}}}\nfunction ua(a,b,c){if(va[a])throw Error(u(100,a));va[a]=b;wa[a]=b.eventTypes[c].dependencies}var sa=[],ta={},va={},wa={};function xa(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!qa.hasOwnProperty(c)||qa[c]!==d){if(qa[c])throw Error(u(102,c));qa[c]=d;b=!0}}b&&ra()}var ya=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),za=null,Aa=null,Ba=null;\nfunction Ca(a){if(a=ma(a)){if(\"function\"!==typeof za)throw Error(u(280));var b=a.stateNode;b&&(b=la(b),za(a.stateNode,a.type,b))}}function Da(a){Aa?Ba?Ba.push(a):Ba=[a]:Aa=a}function Ea(){if(Aa){var a=Aa,b=Ba;Ba=Aa=null;Ca(a);if(b)for(a=0;a<b.length;a++)Ca(b[a])}}function Fa(a,b){return a(b)}function Ga(a,b,c,d,e){return a(b,c,d,e)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){if(null!==Aa||null!==Ba)Ha(),Ea()}\nfunction Ma(a,b,c){if(Ka)return a(b,c);Ka=!0;try{return Ia(a,b,c)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};\nfunction Ra(a){if(Oa.call(Qa,a))return!0;if(Oa.call(Pa,a))return!1;if(Na.test(a))return Qa[a]=!0;Pa[a]=!0;return!1}function Sa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction Ta(a,b,c,d){if(null===b||\"undefined\"===typeof b||Sa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}var C={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){C[a]=new v(a,0,!1,a,null,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];C[b]=new v(b,1,!1,a[1],null,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){C[a]=new v(a,2,!1,a.toLowerCase(),null,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){C[a]=new v(a,2,!1,a,null,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){C[a]=new v(a,3,!1,a.toLowerCase(),null,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){C[a]=new v(a,3,!0,a,null,!1)});[\"capture\",\"download\"].forEach(function(a){C[a]=new v(a,4,!1,a,null,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){C[a]=new v(a,6,!1,a,null,!1)});[\"rowSpan\",\"start\"].forEach(function(a){C[a]=new v(a,5,!1,a.toLowerCase(),null,!1)});var Ua=/[\\-:]([a-z])/g;function Va(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(Ua,\nVa);C[b]=new v(b,1,!1,a,null,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!1)});\nC.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!0)});var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa.hasOwnProperty(\"ReactCurrentDispatcher\")||(Wa.ReactCurrentDispatcher={current:null});Wa.hasOwnProperty(\"ReactCurrentBatchConfig\")||(Wa.ReactCurrentBatchConfig={suspense:null});\nfunction Xa(a,b,c,d){var e=C.hasOwnProperty(b)?C[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(Ta(b,c,e,d)&&(c=null),d||null===e?Ra(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar Ya=/^(.*)[\\\\\\/]/,E=\"function\"===typeof Symbol&&Symbol.for,Za=E?Symbol.for(\"react.element\"):60103,$a=E?Symbol.for(\"react.portal\"):60106,ab=E?Symbol.for(\"react.fragment\"):60107,bb=E?Symbol.for(\"react.strict_mode\"):60108,cb=E?Symbol.for(\"react.profiler\"):60114,db=E?Symbol.for(\"react.provider\"):60109,eb=E?Symbol.for(\"react.context\"):60110,fb=E?Symbol.for(\"react.concurrent_mode\"):60111,gb=E?Symbol.for(\"react.forward_ref\"):60112,hb=E?Symbol.for(\"react.suspense\"):60113,ib=E?Symbol.for(\"react.suspense_list\"):\n60120,jb=E?Symbol.for(\"react.memo\"):60115,kb=E?Symbol.for(\"react.lazy\"):60116,lb=E?Symbol.for(\"react.block\"):60121,mb=\"function\"===typeof Symbol&&Symbol.iterator;function nb(a){if(null===a||\"object\"!==typeof a)return null;a=mb&&a[mb]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function ob(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}\nfunction pb(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ab:return\"Fragment\";case $a:return\"Portal\";case cb:return\"Profiler\";case bb:return\"StrictMode\";case hb:return\"Suspense\";case ib:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case eb:return\"Context.Consumer\";case db:return\"Context.Provider\";case gb:var b=a.render;b=b.displayName||b.name||\"\";return a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\n\"ForwardRef\");case jb:return pb(a.type);case lb:return pb(a.render);case kb:if(a=1===a._status?a._result:null)return pb(a)}return null}function qb(a){var b=\"\";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c=\"\";break a;default:var d=a._debugOwner,e=a._debugSource,f=pb(a.type);c=null;d&&(c=pb(d.type));d=f;f=\"\";e?f=\" (at \"+e.fileName.replace(Ya,\"\")+\":\"+e.lineNumber+\")\":c&&(f=\" (created by \"+c+\")\");c=\"\\n    in \"+(d||\"Unknown\")+f}b+=c;a=a.return}while(a);return b}\nfunction rb(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function sb(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction tb(a){var b=sb(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function xb(a){a._valueTracker||(a._valueTracker=tb(a))}function yb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=sb(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function zb(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}\nfunction Ab(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=rb(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Bb(a,b){b=b.checked;null!=b&&Xa(a,\"checked\",b,!1)}\nfunction Cb(a,b){Bb(a,b);var c=rb(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?Db(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Db(a,b.type,rb(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Eb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction Db(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function Fb(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Gb(a,b){a=n({children:void 0},b);if(b=Fb(b.children))a.children=b;return a}\nfunction Hb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+rb(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction Ib(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function Jb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(u(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(u(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:rb(c)}}\nfunction Kb(a,b){var c=rb(b.value),d=rb(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function Lb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var Mb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction Nb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function Ob(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Nb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar Pb,Qb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Mb.svg||\"innerHTML\"in a)a.innerHTML=b;else{Pb=Pb||document.createElement(\"div\");Pb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=Pb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction Rb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}function Sb(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Tb={animationend:Sb(\"Animation\",\"AnimationEnd\"),animationiteration:Sb(\"Animation\",\"AnimationIteration\"),animationstart:Sb(\"Animation\",\"AnimationStart\"),transitionend:Sb(\"Transition\",\"TransitionEnd\")},Ub={},Vb={};\nya&&(Vb=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),\"TransitionEvent\"in window||delete Tb.transitionend.transition);function Wb(a){if(Ub[a])return Ub[a];if(!Tb[a])return a;var b=Tb[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Vb)return Ub[a]=b[c];return a}\nvar Xb=Wb(\"animationend\"),Yb=Wb(\"animationiteration\"),Zb=Wb(\"animationstart\"),$b=Wb(\"transitionend\"),ac=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),bc=new (\"function\"===typeof WeakMap?WeakMap:Map);function cc(a){var b=bc.get(a);void 0===b&&(b=new Map,bc.set(a,b));return b}\nfunction dc(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function ec(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function fc(a){if(dc(a)!==a)throw Error(u(188));}\nfunction gc(a){var b=a.alternate;if(!b){b=dc(a);if(null===b)throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return fc(e),a;if(f===d)return fc(e),b;f=f.sibling}throw Error(u(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(u(189));}}if(c.alternate!==d)throw Error(u(190));}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}function hc(a){a=gc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction ic(a,b){if(null==b)throw Error(u(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function jc(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var kc=null;\nfunction lc(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)oa(a,b[d],c[d]);else b&&oa(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function mc(a){null!==a&&(kc=ic(kc,a));a=kc;kc=null;if(a){jc(a,lc);if(kc)throw Error(u(95));if(fa)throw a=ha,fa=!1,ha=null,a;}}\nfunction nc(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function oc(a){if(!ya)return!1;a=\"on\"+a;var b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}var pc=[];function qc(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>pc.length&&pc.push(a)}\nfunction rc(a,b,c,d){if(pc.length){var e=pc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}\nfunction sc(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=tc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=nc(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,k=0;k<sa.length;k++){var l=sa[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=\nic(h,l))}mc(h)}}function uc(a,b,c){if(!c.has(a)){switch(a){case \"scroll\":vc(b,\"scroll\",!0);break;case \"focus\":case \"blur\":vc(b,\"focus\",!0);vc(b,\"blur\",!0);c.set(\"blur\",null);c.set(\"focus\",null);break;case \"cancel\":case \"close\":oc(a)&&vc(b,a,!0);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===ac.indexOf(a)&&F(a,b)}c.set(a,null)}}\nvar wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit\".split(\" \"),Ic=\"focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture\".split(\" \");\nfunction Jc(a,b){var c=cc(b);Hc.forEach(function(a){uc(a,b,c)});Ic.forEach(function(a){uc(a,b,c)})}function Kc(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,container:d}}\nfunction Lc(a,b){switch(a){case \"focus\":case \"blur\":Bc=null;break;case \"dragenter\":case \"dragleave\":Cc=null;break;case \"mouseover\":case \"mouseout\":Dc=null;break;case \"pointerover\":case \"pointerout\":Ec.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Fc.delete(b.pointerId)}}function Mc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Kc(b,c,d,e,f),null!==b&&(b=Nc(b),null!==b&&xc(b)),a;a.eventSystemFlags|=d;return a}\nfunction Oc(a,b,c,d,e){switch(b){case \"focus\":return Bc=Mc(Bc,a,b,c,d,e),!0;case \"dragenter\":return Cc=Mc(Cc,a,b,c,d,e),!0;case \"mouseover\":return Dc=Mc(Dc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Ec.set(f,Mc(Ec.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Fc.set(f,Mc(Fc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Pc(a){var b=tc(a.target);if(null!==b){var c=dc(b);if(null!==c)if(b=c.tag,13===b){if(b=ec(c),null!==b){a.blockedOn=b;r.unstable_runWithPriority(a.priority,function(){yc(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function Qc(a){if(null!==a.blockedOn)return!1;var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Nc(b);null!==c&&xc(c);a.blockedOn=b;return!1}return!0}\nfunction Sc(a,b,c){Qc(a)&&c.delete(b)}function Tc(){for(zc=!1;0<Ac.length;){var a=Ac[0];if(null!==a.blockedOn){a=Nc(a.blockedOn);null!==a&&wc(a);break}var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:Ac.shift()}null!==Bc&&Qc(Bc)&&(Bc=null);null!==Cc&&Qc(Cc)&&(Cc=null);null!==Dc&&Qc(Dc)&&(Dc=null);Ec.forEach(Sc);Fc.forEach(Sc)}function Uc(a,b){a.blockedOn===b&&(a.blockedOn=null,zc||(zc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tc)))}\nfunction Vc(a){function b(b){return Uc(b,a)}if(0<Ac.length){Uc(Ac[0],a);for(var c=1;c<Ac.length;c++){var d=Ac[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Bc&&Uc(Bc,a);null!==Cc&&Uc(Cc,a);null!==Dc&&Uc(Dc,a);Ec.forEach(b);Fc.forEach(b);for(c=0;c<Gc.length;c++)d=Gc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Gc.length&&(c=Gc[0],null===c.blockedOn);)Pc(c),null===c.blockedOn&&Gc.shift()}\nvar Wc={},Yc=new Map,Zc=new Map,$c=[\"abort\",\"abort\",Xb,\"animationEnd\",Yb,\"animationIteration\",Zb,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\n\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",$b,\"transitionEnd\",\"waiting\",\"waiting\"];function ad(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f=\"on\"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+\"Capture\"},dependencies:[d],eventPriority:b};Zc.set(d,b);Yc.set(d,f);Wc[e]=f}}\nad(\"blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),0);\nad(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);ad($c,2);for(var bd=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);\nvar dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function F(a,b){vc(b,a,!1)}function vc(a,b,c){var d=Zc.get(b);switch(void 0===d?2:d){case 0:d=gd.bind(null,b,1,a);break;case 1:d=hd.bind(null,b,1,a);break;default:d=id.bind(null,b,1,a)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function gd(a,b,c,d){Ja||Ha();var e=id,f=Ja;Ja=!0;try{Ga(e,a,b,c,d)}finally{(Ja=f)||La()}}function hd(a,b,c,d){ed(dd,id.bind(null,a,b,c,d))}\nfunction id(a,b,c,d){if(fd)if(0<Ac.length&&-1<Hc.indexOf(a))a=Kc(null,a,b,c,d),Ac.push(a);else{var e=Rc(a,b,c,d);if(null===e)Lc(a,d);else if(-1<Hc.indexOf(a))a=Kc(e,a,b,c,d),Ac.push(a);else if(!Oc(e,a,b,c,d)){Lc(a,d);a=rc(a,d,null,b);try{Ma(sc,a)}finally{qc(a)}}}}\nfunction Rc(a,b,c,d){c=nc(d);c=tc(c);if(null!==c){var e=dc(c);if(null===e)c=null;else{var f=e.tag;if(13===f){c=ec(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=rc(a,d,c,b);try{Ma(sc,a)}finally{qc(a)}return null}\nvar jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(jd).forEach(function(a){kd.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);jd[b]=jd[a]})});function ld(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||jd.hasOwnProperty(a)&&jd[a]?(\"\"+b).trim():b+\"px\"}\nfunction md(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=ld(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var nd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction od(a,b){if(b){if(nd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,\"\"));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(u(62,\"\"));}}\nfunction pd(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var qd=Mb.html;function rd(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=cc(a);b=wa[b];for(var d=0;d<b.length;d++)uc(b[d],a,c)}function sd(){}\nfunction td(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ud(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vd(a,b){var c=ud(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ud(c)}}\nfunction wd(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?wd(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function xd(){for(var a=window,b=td();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=td(a.document)}return b}\nfunction yd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}var zd=\"$\",Ad=\"/$\",Bd=\"$?\",Cd=\"$!\",Dd=null,Ed=null;function Fd(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction Gd(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Hd=\"function\"===typeof setTimeout?setTimeout:void 0,Id=\"function\"===typeof clearTimeout?clearTimeout:void 0;function Jd(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}\nfunction Kd(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===zd||c===Cd||c===Bd){if(0===b)return a;b--}else c===Ad&&b++}a=a.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md=\"__reactInternalInstance$\"+Ld,Nd=\"__reactEventHandlers$\"+Ld,Od=\"__reactContainere$\"+Ld;\nfunction tc(a){var b=a[Md];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Od]||c[Md]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Kd(a);null!==a;){if(c=a[Md])return c;a=Kd(a)}return b}a=c;c=a.parentNode}return null}function Nc(a){a=a[Md]||a[Od];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pd(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33));}function Qd(a){return a[Nd]||null}\nfunction Rd(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction Sd(a,b){var c=a.stateNode;if(!c)return null;var d=la(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==typeof c)throw Error(u(231,\nb,typeof c));return c}function Td(a,b,c){if(b=Sd(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a)}function Ud(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Rd(b);for(b=c.length;0<b--;)Td(c[b],\"captured\",a);for(b=0;b<c.length;b++)Td(c[b],\"bubbled\",a)}}\nfunction Vd(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Sd(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Wd(a){a&&a.dispatchConfig.registrationName&&Vd(a._targetInst,null,a)}function Xd(a){jc(a,Ud)}var Yd=null,Zd=null,$d=null;\nfunction ae(){if($d)return $d;var a,b=Zd,c=b.length,d,e=\"value\"in Yd?Yd.value:Yd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return $d=e.slice(a,1<d?1-d:void 0)}function be(){return!0}function ce(){return!1}\nfunction G(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?be:ce;this.isPropagationStopped=ce;return this}\nn(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=be)},persist:function(){this.isPersistent=be},isPersistent:ce,destructor:function(){var a=this.constructor.Interface,\nb;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=ce;this._dispatchInstances=this._dispatchListeners=null}});G.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\nG.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;n(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=n({},d.Interface,a);c.extend=d.extend;de(c);return c};de(G);function ee(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\nfunction fe(a){if(!(a instanceof this))throw Error(u(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function de(a){a.eventPool=[];a.getPooled=ee;a.release=fe}var ge=G.extend({data:null}),he=G.extend({data:null}),ie=[9,13,27,32],je=ya&&\"CompositionEvent\"in window,ke=null;ya&&\"documentMode\"in document&&(ke=document.documentMode);\nvar le=ya&&\"TextEvent\"in window&&!ke,me=ya&&(!je||ke&&8<ke&&11>=ke),ne=String.fromCharCode(32),oe={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},pe=!1;\nfunction qe(a,b){switch(a){case \"keyup\":return-1!==ie.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function re(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var se=!1;function te(a,b){switch(a){case \"compositionend\":return re(b);case \"keypress\":if(32!==b.which)return null;pe=!0;return ne;case \"textInput\":return a=b.data,a===ne&&pe?null:a;default:return null}}\nfunction ue(a,b){if(se)return\"compositionend\"===a||!je&&qe(a,b)?(a=ae(),$d=Zd=Yd=null,se=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return me&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar ve={eventTypes:oe,extractEvents:function(a,b,c,d){var e;if(je)b:{switch(a){case \"compositionstart\":var f=oe.compositionStart;break b;case \"compositionend\":f=oe.compositionEnd;break b;case \"compositionupdate\":f=oe.compositionUpdate;break b}f=void 0}else se?qe(a,c)&&(f=oe.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(f=oe.compositionStart);f?(me&&\"ko\"!==c.locale&&(se||f!==oe.compositionStart?f===oe.compositionEnd&&se&&(e=ae()):(Yd=d,Zd=\"value\"in Yd?Yd.value:Yd.textContent,se=!0)),f=ge.getPooled(f,\nb,c,d),e?f.data=e:(e=re(c),null!==e&&(f.data=e)),Xd(f),e=f):e=null;(a=le?te(a,c):ue(a,c))?(b=he.getPooled(oe.beforeInput,b,c,d),b.data=a,Xd(b)):b=null;return null===e?b:null===b?e:[e,b]}},we={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!we[a.type]:\"textarea\"===b?!0:!1}\nvar ye={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function ze(a,b,c){a=G.getPooled(ye.change,a,b,c);a.type=\"change\";Da(c);Xd(a);return a}var Ae=null,Be=null;function Ce(a){mc(a)}function De(a){var b=Pd(a);if(yb(b))return a}function Ee(a,b){if(\"change\"===a)return b}var Fe=!1;ya&&(Fe=oc(\"input\")&&(!document.documentMode||9<document.documentMode));\nfunction Ge(){Ae&&(Ae.detachEvent(\"onpropertychange\",He),Be=Ae=null)}function He(a){if(\"value\"===a.propertyName&&De(Be))if(a=ze(Be,a,nc(a)),Ja)mc(a);else{Ja=!0;try{Fa(Ce,a)}finally{Ja=!1,La()}}}function Ie(a,b,c){\"focus\"===a?(Ge(),Ae=b,Be=c,Ae.attachEvent(\"onpropertychange\",He)):\"blur\"===a&&Ge()}function Je(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return De(Be)}function Ke(a,b){if(\"click\"===a)return De(b)}function Le(a,b){if(\"input\"===a||\"change\"===a)return De(b)}\nvar Me={eventTypes:ye,_isInputEventSupported:Fe,extractEvents:function(a,b,c,d){var e=b?Pd(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if(\"select\"===f||\"input\"===f&&\"file\"===e.type)var g=Ee;else if(xe(e))if(Fe)g=Le;else{g=Je;var h=Ie}else(f=e.nodeName)&&\"input\"===f.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(g=Ke);if(g&&(g=g(a,b)))return ze(g,c,d);h&&h(a,e,b);\"blur\"===a&&(a=e._wrapperState)&&a.controlled&&\"number\"===e.type&&Db(e,\"number\",e.value)}},Ne=G.extend({view:null,detail:null}),\nOe={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pe(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Oe[a])?!!b[a]:!1}function Qe(){return Pe}\nvar Re=0,Se=0,Te=!1,Ue=!1,Ve=Ne.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if(\"movementX\"in a)return a.movementX;var b=Re;Re=a.screenX;return Te?\"mousemove\"===a.type?a.screenX-b:0:(Te=!0,0)},movementY:function(a){if(\"movementY\"in a)return a.movementY;\nvar b=Se;Se=a.screenY;return Ue?\"mousemove\"===a.type?a.screenY-b:0:(Ue=!0,0)}}),We=Ve.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",\ndependencies:[\"pointerout\",\"pointerover\"]}},Ye={eventTypes:Xe,extractEvents:function(a,b,c,d,e){var f=\"mouseover\"===a||\"pointerover\"===a,g=\"mouseout\"===a||\"pointerout\"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?tc(b):null,null!==b){var h=dc(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if(\"mouseout\"===a||\"mouseover\"===\na){var k=Ve;var l=Xe.mouseLeave;var m=Xe.mouseEnter;var p=\"mouse\"}else if(\"pointerout\"===a||\"pointerover\"===a)k=We,l=Xe.pointerLeave,m=Xe.pointerEnter,p=\"pointer\";a=null==g?f:Pd(g);f=null==b?f:Pd(b);l=k.getPooled(l,g,c,d);l.type=p+\"leave\";l.target=a;l.relatedTarget=f;c=k.getPooled(m,b,c,d);c.type=p+\"enter\";c.target=f;c.relatedTarget=a;d=g;p=b;if(d&&p)a:{k=d;m=p;g=0;for(a=k;a;a=Rd(a))g++;a=0;for(b=m;b;b=Rd(b))a++;for(;0<g-a;)k=Rd(k),g--;for(;0<a-g;)m=Rd(m),a--;for(;g--;){if(k===m||k===m.alternate)break a;\nk=Rd(k);m=Rd(m)}k=null}else k=null;m=k;for(k=[];d&&d!==m;){g=d.alternate;if(null!==g&&g===m)break;k.push(d);d=Rd(d)}for(d=[];p&&p!==m;){g=p.alternate;if(null!==g&&g===m)break;d.push(p);p=Rd(p)}for(p=0;p<k.length;p++)Vd(k[p],\"bubbled\",l);for(p=d.length;0<p--;)Vd(d[p],\"captured\",c);return 0===(e&64)?[l]:[l,c]}};function Ze(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var $e=\"function\"===typeof Object.is?Object.is:Ze,af=Object.prototype.hasOwnProperty;\nfunction bf(a,b){if($e(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!af.call(b,c[d])||!$e(a[c[d]],b[c[d]]))return!1;return!0}\nvar cf=ya&&\"documentMode\"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},ef=null,ff=null,gf=null,hf=!1;\nfunction jf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(hf||null==ef||ef!==td(c))return null;c=ef;\"selectionStart\"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return gf&&bf(gf,c)?null:(gf=c,a=G.getPooled(df.select,ff,a,b),a.type=\"select\",a.target=ef,Xd(a),a)}\nvar kf={eventTypes:df,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=cc(e);f=wa.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pd(b):window;switch(a){case \"focus\":if(xe(e)||\"true\"===e.contentEditable)ef=e,ff=b,gf=null;break;case \"blur\":gf=ff=ef=null;break;case \"mousedown\":hf=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":return hf=!1,jf(c,d);case \"selectionchange\":if(cf)break;\ncase \"keydown\":case \"keyup\":return jf(c,d)}return null}},lf=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),nf=Ne.extend({relatedTarget:null});function of(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar pf={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},qf={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},rf=Ne.extend({key:function(a){if(a.key){var b=pf[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=of(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?qf[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(a){return\"keypress\"===\na.type?of(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?of(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),sf=Ve.extend({dataTransfer:null}),tf=Ne.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),uf=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(a,b,c,d){var e=Yc.get(a);if(!e)return null;switch(a){case \"keypress\":if(0===of(c))return null;case \"keydown\":case \"keyup\":a=rf;break;case \"blur\":case \"focus\":a=nf;break;case \"click\":if(2===c.button)return null;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=\nVe;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=sf;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=tf;break;case Xb:case Yb:case Zb:a=lf;break;case $b:a=uf;break;case \"scroll\":a=Ne;break;case \"wheel\":a=vf;break;case \"copy\":case \"cut\":case \"paste\":a=mf;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=\nWe;break;default:a=G}b=a.getPooled(e,b,c,d);Xd(b);return b}};if(pa)throw Error(u(101));pa=Array.prototype.slice.call(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));ra();var xf=Nc;la=Qd;ma=xf;na=Pd;xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Me,SelectEventPlugin:kf,BeforeInputEventPlugin:ve});var yf=[],zf=-1;function H(a){0>zf||(a.current=yf[zf],yf[zf]=null,zf--)}\nfunction I(a,b){zf++;yf[zf]=a.current;a.current=b}var Af={},J={current:Af},K={current:!1},Bf=Af;function Cf(a,b){var c=a.type.contextTypes;if(!c)return Af;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function L(a){a=a.childContextTypes;return null!==a&&void 0!==a}\nfunction Df(){H(K);H(J)}function Ef(a,b,c){if(J.current!==Af)throw Error(u(168));I(J,b);I(K,c)}function Ff(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(u(108,pb(b)||\"Unknown\",e));return n({},c,{},d)}function Gf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Af;Bf=J.current;I(J,a);I(K,K.current);return!0}\nfunction Hf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(a=Ff(a,b,Bf),d.__reactInternalMemoizedMergedChildContext=a,H(K),H(J),I(J,a)):H(K);I(K,c)}\nvar If=r.unstable_runWithPriority,Jf=r.unstable_scheduleCallback,Kf=r.unstable_cancelCallback,Lf=r.unstable_requestPaint,Mf=r.unstable_now,Nf=r.unstable_getCurrentPriorityLevel,Of=r.unstable_ImmediatePriority,Pf=r.unstable_UserBlockingPriority,Qf=r.unstable_NormalPriority,Rf=r.unstable_LowPriority,Sf=r.unstable_IdlePriority,Tf={},Uf=r.unstable_shouldYield,Vf=void 0!==Lf?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1E4>Zf?Mf:function(){return Mf()-Zf};\nfunction ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u(332));}}function bg(a){switch(a){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u(332));}}function cg(a,b){a=bg(a);return If(a,b)}function dg(a,b,c){a=bg(a);return Jf(a,b,c)}function eg(a){null===Wf?(Wf=[a],Xf=Jf(Of,fg)):Wf.push(a);return Tf}function gg(){if(null!==Xf){var a=Xf;Xf=null;Kf(a)}fg()}\nfunction fg(){if(!Yf&&null!==Wf){Yf=!0;var a=0;try{var b=Wf;cg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});Wf=null}catch(c){throw null!==Wf&&(Wf=Wf.slice(a+1)),Jf(Of,gg),c;}finally{Yf=!1}}}function hg(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function ig(a,b){if(a&&a.defaultProps){b=n({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}\nfunction og(a){var b=jg.current;H(jg);a.type._context._currentValue=b}function pg(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function qg(a,b){kg=a;mg=lg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(rg=!0),a.firstContext=null)}\nfunction sg(a,b){if(mg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)mg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===lg){if(null===kg)throw Error(u(308));lg=b;kg.dependencies={expirationTime:0,firstContext:b,responders:null}}else lg=lg.next=b}return a._currentValue}var tg=!1;function ug(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}\nfunction vg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function wg(a,b){a={expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null};return a.next=a}function xg(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction yg(a,b){var c=a.alternate;null!==c&&vg(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}\nfunction zg(a,b,c,d){var e=a.updateQueue;tg=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&(h.baseQueue=g))}if(null!==f){h=f.next;var k=e.baseState,l=0,m=null,p=null,x=null;if(null!==h){var z=h;do{g=z.expirationTime;if(g<d){var ca={expirationTime:z.expirationTime,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null};null===x?(p=x=\nca,m=k):x=x.next=ca;g>l&&(l=g)}else{null!==x&&(x=x.next={expirationTime:1073741823,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null});Ag(g,z.suspenseConfig);a:{var D=a,t=z;g=b;ca=c;switch(t.tag){case 1:D=t.payload;if(\"function\"===typeof D){k=D.call(ca,k,g);break a}k=D;break a;case 3:D.effectTag=D.effectTag&-4097|64;case 0:D=t.payload;g=\"function\"===typeof D?D.call(ca,k,g):D;if(null===g||void 0===g)break a;k=n({},k,g);break a;case 2:tg=!0}}null!==z.callback&&\n(a.effectTag|=32,g=e.effects,null===g?e.effects=[z]:g.push(z))}z=z.next;if(null===z||z===h)if(g=e.shared.pending,null===g)break;else z=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===x?m=k:x.next=p;e.baseState=m;e.baseQueue=x;Bg(l);a.expirationTime=l;a.memoizedState=k}}\nfunction Cg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if(\"function\"!==typeof d)throw Error(u(191,d));d.call(e)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=(new aa.Component).refs;function Fg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:n({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}\nvar Jg={isMounted:function(a){return(a=a._reactInternalFiber)?dc(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e=wg(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);xg(a,e);Ig(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e=wg(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);xg(a,e);Ig(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Gg(),d=Dg.suspense;\nc=Hg(c,a,d);d=wg(c,d);d.tag=2;void 0!==b&&null!==b&&(d.callback=b);xg(a,d);Ig(a,c)}};function Kg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!bf(c,d)||!bf(e,f):!0}\nfunction Lg(a,b,c){var d=!1,e=Af;var f=b.contextType;\"object\"===typeof f&&null!==f?f=sg(f):(e=L(b)?Bf:J.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Cf(a,e):Af);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Jg;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Mg(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Jg.enqueueReplaceState(b,b.state,null)}\nfunction Ng(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Eg;ug(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=sg(f):(f=L(b)?Bf:J.current,e.context=Cf(a,f));zg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Fg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Jg.enqueueReplaceState(e,e.state,null),zg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.effectTag|=4)}var Og=Array.isArray;\nfunction Pg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Eg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a));}return a}\nfunction Qg(a,b){if(\"textarea\"!==a.type)throw Error(u(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\"));}\nfunction Rg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Sg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Tg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Pg(a,b,c),d.return=a,d;d=Ug(c.type,c.key,c.props,null,a.mode,d);d.ref=Pg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==\nc.implementation)return b=Vg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Wg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function p(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Tg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Za:return c=Ug(b.type,b.key,b.props,null,a.mode,c),c.ref=Pg(a,null,b),c.return=a,c;case $a:return b=Vg(b,a.mode,c),b.return=a,b}if(Og(b)||\nnb(b))return b=Wg(b,a.mode,c,null),b.return=a,b;Qg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Za:return c.key===e?c.type===ab?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case $a:return c.key===e?l(a,b,c,d):null}if(Og(c)||nb(c))return null!==e?null:m(a,b,c,d,null);Qg(a,c)}return null}function z(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=\na.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Za:return a=a.get(null===d.key?c:d.key)||null,d.type===ab?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case $a:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Og(d)||nb(d))return a=a.get(c)||null,m(b,a,d,e,null);Qg(b,d)}return null}function ca(e,g,h,k){for(var l=null,t=null,m=g,y=g=0,A=null;null!==m&&y<h.length;y++){m.index>y?(A=m,m=null):A=m.sibling;var q=x(e,m,h[y],k);if(null===q){null===m&&(m=A);break}a&&\nm&&null===q.alternate&&b(e,m);g=f(q,g,y);null===t?l=q:t.sibling=q;t=q;m=A}if(y===h.length)return c(e,m),l;if(null===m){for(;y<h.length;y++)m=p(e,h[y],k),null!==m&&(g=f(m,g,y),null===t?l=m:t.sibling=m,t=m);return l}for(m=d(e,m);y<h.length;y++)A=z(m,e,y,h[y],k),null!==A&&(a&&null!==A.alternate&&m.delete(null===A.key?y:A.key),g=f(A,g,y),null===t?l=A:t.sibling=A,t=A);a&&m.forEach(function(a){return b(e,a)});return l}function D(e,g,h,l){var k=nb(h);if(\"function\"!==typeof k)throw Error(u(150));h=k.call(h);\nif(null==h)throw Error(u(151));for(var m=k=null,t=g,y=g=0,A=null,q=h.next();null!==t&&!q.done;y++,q=h.next()){t.index>y?(A=t,t=null):A=t.sibling;var D=x(e,t,q.value,l);if(null===D){null===t&&(t=A);break}a&&t&&null===D.alternate&&b(e,t);g=f(D,g,y);null===m?k=D:m.sibling=D;m=D;t=A}if(q.done)return c(e,t),k;if(null===t){for(;!q.done;y++,q=h.next())q=p(e,q.value,l),null!==q&&(g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return k}for(t=d(e,t);!q.done;y++,q=h.next())q=z(t,e,y,q.value,l),null!==q&&(a&&null!==\nq.alternate&&t.delete(null===q.key?y:q.key),g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);a&&t.forEach(function(a){return b(e,a)});return k}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ab&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Za:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ab){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,\nk.sibling);d=e(k,f.props);d.ref=Pg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ab?(d=Wg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Ug(f.type,f.key,f.props,null,a.mode,h),h.ref=Pg(a,d,f),h.return=a,a=h)}return g(a);case $a:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=\nd.sibling}d=Vg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Tg(f,a.mode,h),d.return=a,a=d),g(a);if(Og(f))return ca(a,d,f,h);if(nb(f))return D(a,d,f,h);l&&Qg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||\"Component\"));}return c(a,d)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};\nfunction ch(a){if(a===Zg)throw Error(u(174));return a}function dh(a,b){I(bh,b);I(ah,a);I($g,Zg);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Ob(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Ob(b,a)}H($g);I($g,b)}function eh(){H($g);H(ah);H(bh)}function fh(a){ch(bh.current);var b=ch($g.current);var c=Ob(b,a.type);b!==c&&(I(ah,a),I($g,c))}function gh(a){ah.current===a&&(H($g),H(ah))}var M={current:0};\nfunction hh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===Bd||c.data===Cd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ih(a,b){return{responder:a,props:b}}\nvar jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N=null,O=null,P=null,mh=!1;function Q(){throw Error(u(321));}function nh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!$e(a[c],b[c]))return!1;return!0}\nfunction oh(a,b,c,d,e,f){lh=f;N=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;jh.current=null===a||null===a.memoizedState?ph:qh;a=c(d,e);if(b.expirationTime===lh){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(u(301));f+=1;P=O=null;b.updateQueue=null;jh.current=rh;a=c(d,e)}while(b.expirationTime===lh)}jh.current=sh;b=null!==O&&null!==O.next;lh=0;P=O=N=null;mh=!1;if(b)throw Error(u(300));return a}\nfunction th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===P?N.memoizedState=P=a:P=P.next=a;return P}function uh(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(u(310));O=a;a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null};null===P?N.memoizedState=P=a:P=P.next=a}return P}\nfunction vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction wh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.expirationTime;if(l<lh){var m={expirationTime:k.expirationTime,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};null===h?(g=h=m,f=d):h=h.next=m;l>N.expirationTime&&\n(N.expirationTime=l,Bg(l))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),Ag(l,k.suspenseConfig),d=k.eagerReducer===a?k.eagerState:a(d,k.action);k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;$e(d,b.memoizedState)||(rg=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction xh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);$e(f,b.memoizedState)||(rg=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction yh(a){var b=th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a};a=a.dispatch=zh.bind(null,N,a);return[b.memoizedState,a]}function Ah(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=N.updateQueue;null===b?(b={lastEffect:null},N.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}\nfunction Bh(){return uh().memoizedState}function Ch(a,b,c,d){var e=th();N.effectTag|=a;e.memoizedState=Ah(1|b,c,void 0,void 0===d?null:d)}function Dh(a,b,c,d){var e=uh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;f=g.destroy;if(null!==d&&nh(d,g.deps)){Ah(b,c,f,d);return}}N.effectTag|=a;e.memoizedState=Ah(1|b,c,f,d)}function Eh(a,b){return Ch(516,4,a,b)}function Fh(a,b){return Dh(516,4,a,b)}function Gh(a,b){return Dh(4,2,a,b)}\nfunction Hh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function Ih(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Dh(4,2,Hh.bind(null,b,a),c)}function Jh(){}function Kh(a,b){th().memoizedState=[a,void 0===b?null:b];return a}function Lh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&nh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction Mh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&nh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Nh(a,b,c){var d=ag();cg(98>d?98:d,function(){a(!0)});cg(97<d?97:d,function(){var d=kh.suspense;kh.suspense=void 0===b?null:b;try{a(!1),c()}finally{kh.suspense=d}})}\nfunction zh(a,b,c){var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===N||null!==f&&f===N)mh=!0,e.expirationTime=lh,N.expirationTime=lh;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.eagerReducer=f;e.eagerState=h;if($e(h,g))return}catch(k){}finally{}Ig(a,\nd)}}\nvar sh={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Ch(4,2,Hh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Ch(4,2,a,b)},useMemo:function(a,b){var c=th();b=void 0===b?null:b;a=a();c.memoizedState=[a,\nb];return a},useReducer:function(a,b,c){var d=th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=zh.bind(null,N,a);return[d.memoizedState,a]},useRef:function(a){var b=th();a={current:a};return b.memoizedState=a},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=yh(a),d=c[0],e=c[1];Eh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=\nc}},[a,b]);return d},useTransition:function(a){var b=yh(!1),c=b[0];b=b[1];return[Kh(Nh.bind(null,b,a),[b,a]),c]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=wh(vh),d=c[0],e=c[1];Fh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}},[a,b]);return d},useTransition:function(a){var b=\nwh(vh),c=b[0];b=b[1];return[Lh(Nh.bind(null,b,a),[b,a]),c]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=xh(vh),d=c[0],e=c[1];Fh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}},[a,b]);return d},useTransition:function(a){var b=xh(vh),c=b[0];b=b[1];return[Lh(Nh.bind(null,\nb,a),[b,a]),c]}},Oh=null,Ph=null,Qh=!1;function Rh(a,b){var c=Sh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}\nfunction Th(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction Uh(a){if(Qh){var b=Ph;if(b){var c=b;if(!Th(a,b)){b=Jd(c.nextSibling);if(!b||!Th(a,b)){a.effectTag=a.effectTag&-1025|2;Qh=!1;Oh=a;return}Rh(Oh,c)}Oh=a;Ph=Jd(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Qh=!1,Oh=a}}function Vh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;Oh=a}\nfunction Wh(a){if(a!==Oh)return!1;if(!Qh)return Vh(a),Qh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!Gd(b,a.memoizedProps))for(b=Ph;b;)Rh(a,b),b=Jd(b.nextSibling);Vh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(u(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===Ad){if(0===b){Ph=Jd(a.nextSibling);break a}b--}else c!==zd&&c!==Cd&&c!==Bd||b++}a=a.nextSibling}Ph=null}}else Ph=Oh?Jd(a.stateNode.nextSibling):null;return!0}\nfunction Xh(){Ph=Oh=null;Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R(a,b,c,d){b.child=null===a?Yg(b,null,c,d):Xg(b,a.child,c,d)}function Zh(a,b,c,d,e){c=c.render;var f=b.ref;qg(b,e);d=oh(a,b,c,d,f,e);if(null!==a&&!rg)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e);b.effectTag|=1;R(a,b,d,e);return b.child}\nfunction ai(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!bi(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ci(a,b,g,d,e,f);a=Ug(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:bf,c(e,d)&&a.ref===b.ref))return $h(a,b,f);b.effectTag|=1;a=Sg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ci(a,b,c,d,e,f){return null!==a&&bf(a.memoizedProps,d)&&a.ref===b.ref&&(rg=!1,e<f)?(b.expirationTime=a.expirationTime,$h(a,b,f)):di(a,b,c,d,f)}function ei(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function di(a,b,c,d,e){var f=L(c)?Bf:J.current;f=Cf(b,f);qg(b,e);c=oh(a,b,c,d,f,e);if(null!==a&&!rg)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e);b.effectTag|=1;R(a,b,c,e);return b.child}\nfunction fi(a,b,c,d,e){if(L(c)){var f=!0;Gf(b)}else f=!1;qg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Lg(b,c,d),Ng(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=sg(l):(l=L(c)?Bf:J.current,l=Cf(b,l));var m=c.getDerivedStateFromProps,p=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;p||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l);tg=!1;var x=b.memoizedState;g.state=x;zg(b,d,g,e);k=b.memoizedState;h!==d||x!==k||K.current||tg?(\"function\"===typeof m&&(Fg(b,c,m,d),k=b.memoizedState),(h=tg||Kg(b,c,h,d,x,k,l))?(p||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.effectTag|=4)):(\"function\"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,vg(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:ig(b.type,h),k=g.context,l=c.contextType,\"object\"===typeof l&&null!==l?l=sg(l):(l=L(c)?Bf:J.current,l=Cf(b,l)),m=c.getDerivedStateFromProps,(p=\"function\"===typeof m||\"function\"===\ntypeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1,k=b.memoizedState,g.state=k,zg(b,d,g,e),x=b.memoizedState,h!==d||k!==x||K.current||tg?(\"function\"===typeof m&&(Fg(b,c,m,d),x=b.memoizedState),(m=tg||Kg(b,c,h,d,k,x,l))?(p||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,l),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,l)),\"function\"===typeof g.componentDidUpdate&&(b.effectTag|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=l,d=m):\n(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return gi(a,b,c,d,f,e)}\nfunction gi(a,b,c,d,e,f){ei(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hf(b,c,!1),$h(a,b,f);d=b.stateNode;Yh.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.effectTag|=1;null!==a&&g?(b.child=Xg(b,a.child,null,f),b.child=Xg(b,null,h,f)):R(a,b,h,f);b.memoizedState=d.state;e&&Hf(b,c,!0);return b.child}function hi(a){var b=a.stateNode;b.pendingContext?Ef(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Ef(a,b.context,!1);dh(a,b.containerInfo)}\nvar ii={dehydrated:null,retryTime:0};\nfunction ji(a,b,c){var d=b.mode,e=b.pendingProps,f=M.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);I(M,f&1);if(null===a){void 0!==e.fallback&&Uh(b);if(g){g=e.fallback;e=Wg(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Wg(g,d,c,null);c.return=\nb;e.sibling=c;b.memoizedState=ii;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Yg(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;c=Sg(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sg(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=ii;b.child=c;return d}c=Xg(b,a.child,e.children,c);b.memoizedState=null;return b.child=\nc}a=a.child;if(g){g=e.fallback;e=Wg(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Wg(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=ii;b.child=e;return c}b.memoizedState=null;return b.child=Xg(b,a,e.children,c)}\nfunction ki(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);pg(a.return,b)}function li(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;R(a,b,d.children,c);d=M.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ki(a,c);else if(19===a.tag)ki(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(M,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===hh(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);li(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===hh(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}li(b,!0,c,null,f,b.lastEffect);break;case \"together\":li(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction $h(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Bg(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){a=b.child;c=Sg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}var ni,oi,pi,qi;\nni=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};oi=function(){};\npi=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;ch($g.current);a=null;switch(c){case \"input\":f=zb(g,f);d=zb(g,d);a=[];break;case \"option\":f=Gb(g,f);d=Gb(g,d);a=[];break;case \"select\":f=n({},f,{value:void 0});d=n({},d,{value:void 0});a=[];break;case \"textarea\":f=Ib(g,f);d=Ib(g,d);a=[];break;default:\"function\"!==typeof f.onClick&&\"function\"===typeof d.onClick&&(g.onclick=sd)}od(c,d);var h,k;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if(\"style\"===\nh)for(k in g=f[h],g)g.hasOwnProperty(k)&&(c||(c={}),c[k]=\"\");else\"dangerouslySetInnerHTML\"!==h&&\"children\"!==h&&\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(va.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if(\"style\"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]=\"\");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),\nc[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else\"dangerouslySetInnerHTML\"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,l)):\"children\"===h?g===l||\"string\"!==typeof l&&\"number\"!==typeof l||(a=a||[]).push(h,\"\"+l):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&(va.hasOwnProperty(h)?(null!=l&&rd(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push(\"style\",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};\nqi=function(a,b,c,d){c!==d&&(b.effectTag|=4)};function ri(a,b){switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction si(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(b.type)&&Df(),null;case 3:return eh(),H(K),H(J),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Wh(b)||(b.effectTag|=4),oi(b),null;case 5:gh(b);c=ch(bh.current);var e=b.type;if(null!==a&&null!=b.stateNode)pi(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(u(166));\nreturn null}a=ch($g.current);if(Wh(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Md]=b;d[Nd]=f;switch(e){case \"iframe\":case \"object\":case \"embed\":F(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<ac.length;a++)F(ac[a],d);break;case \"source\":F(\"error\",d);break;case \"img\":case \"image\":case \"link\":F(\"error\",d);F(\"load\",d);break;case \"form\":F(\"reset\",d);F(\"submit\",d);break;case \"details\":F(\"toggle\",d);break;case \"input\":Ab(d,f);F(\"invalid\",d);rd(c,\"onChange\");break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};F(\"invalid\",d);rd(c,\"onChange\");break;case \"textarea\":Jb(d,f),F(\"invalid\",d),rd(c,\"onChange\")}od(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(a=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(a=[\"children\",\"\"+h]):va.hasOwnProperty(g)&&null!=h&&rd(c,g)}switch(e){case \"input\":xb(d);Eb(d,f,!0);break;case \"textarea\":xb(d);Lb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&\n(d.onclick=sd)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;a===qd&&(a=Nb(e));a===qd?\"script\"===e?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),\"select\"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Md]=b;a[Nd]=d;ni(a,b,!1,!1);b.stateNode=a;g=pd(e,d);switch(e){case \"iframe\":case \"object\":case \"embed\":F(\"load\",\na);h=d;break;case \"video\":case \"audio\":for(h=0;h<ac.length;h++)F(ac[h],a);h=d;break;case \"source\":F(\"error\",a);h=d;break;case \"img\":case \"image\":case \"link\":F(\"error\",a);F(\"load\",a);h=d;break;case \"form\":F(\"reset\",a);F(\"submit\",a);h=d;break;case \"details\":F(\"toggle\",a);h=d;break;case \"input\":Ab(a,d);h=zb(a,d);F(\"invalid\",a);rd(c,\"onChange\");break;case \"option\":h=Gb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};h=n({},d,{value:void 0});F(\"invalid\",a);rd(c,\"onChange\");break;case \"textarea\":Jb(a,\nd);h=Ib(a,d);F(\"invalid\",a);rd(c,\"onChange\");break;default:h=d}od(e,h);var k=h;for(f in k)if(k.hasOwnProperty(f)){var l=k[f];\"style\"===f?md(a,l):\"dangerouslySetInnerHTML\"===f?(l=l?l.__html:void 0,null!=l&&Qb(a,l)):\"children\"===f?\"string\"===typeof l?(\"textarea\"!==e||\"\"!==l)&&Rb(a,l):\"number\"===typeof l&&Rb(a,\"\"+l):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(va.hasOwnProperty(f)?null!=l&&rd(c,f):null!=l&&Xa(a,f,l,g))}switch(e){case \"input\":xb(a);Eb(a,d,!1);\nbreak;case \"textarea\":xb(a);Lb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+rb(d.value));break;case \"select\":a.multiple=!!d.multiple;c=d.value;null!=c?Hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&Hb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof h.onClick&&(a.onclick=sd)}Fd(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)qi(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(u(166));\nc=ch(bh.current);ch($g.current);Wh(b)?(c=b.stateNode,d=b.memoizedProps,c[Md]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),c[Md]=b,b.stateNode=c)}return null;case 13:H(M);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Wh(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=\ne,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(M.current&1))S===ti&&(S=ui);else{if(S===ti||S===ui)S=vi;0!==wi&&null!==T&&(xi(T,U),yi(T,wi))}if(c||d)b.effectTag|=4;return null;case 4:return eh(),oi(b),null;case 10:return og(b),null;case 17:return L(b.type)&&Df(),null;case 19:H(M);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)ri(d,!1);else{if(S!==ti||null!==a&&0!==(a.effectTag&\n64))for(f=b.child;null!==f;){a=hh(f);if(null!==a){b.effectTag|=64;ri(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,\ne.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;I(M,M.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=hh(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),ri(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!f.alternate)return b=\nb.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*$f()-d.renderingStartTime>d.tailExpiration&&1<c&&(b.effectTag|=64,e=!0,ri(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=$f()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=$f(),c.sibling=null,b=M.current,I(M,e?b&1|2:b&1),c):null}throw Error(u(156,\nb.tag));}function zi(a){switch(a.tag){case 1:L(a.type)&&Df();var b=a.effectTag;return b&4096?(a.effectTag=b&-4097|64,a):null;case 3:eh();H(K);H(J);b=a.effectTag;if(0!==(b&64))throw Error(u(285));a.effectTag=b&-4097|64;return a;case 5:return gh(a),null;case 13:return H(M),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return H(M),null;case 4:return eh(),null;case 10:return og(a),null;default:return null}}function Ai(a,b){return{value:a,source:b,stack:qb(b)}}\nvar Bi=\"function\"===typeof WeakSet?WeakSet:Set;function Ci(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=qb(c));null!==c&&pb(c.type);b=b.value;null!==a&&1===a.tag&&pb(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function Di(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ei(a,c)}}function Fi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Ei(a,c)}else b.current=null}\nfunction Gi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:ig(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163));}\nfunction Hi(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Ii(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}\nfunction Ji(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:Ii(3,c);return;case 1:a=c.stateNode;if(c.effectTag&4)if(null===b)a.componentDidMount();else{var d=c.elementType===c.type?b.memoizedProps:ig(c.type,b.memoizedProps);a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}b=c.updateQueue;null!==b&&Cg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Cg(c,b,a)}return;\ncase 5:a=c.stateNode;null===b&&c.effectTag&4&&Fd(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Vc(c))));return;case 19:case 17:case 20:case 21:return}throw Error(u(163));}\nfunction Ki(a,b,c){\"function\"===typeof Li&&Li(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;cg(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ei(g,h)}}a=a.next}while(a!==d)})}break;case 1:Fi(b);c=b.stateNode;\"function\"===typeof c.componentWillUnmount&&Di(b,c);break;case 5:Fi(b);break;case 4:Mi(a,b,c)}}\nfunction Ni(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Ni(b)}function Oi(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Pi(a){a:{for(var b=a.return;null!==b;){if(Oi(b)){var c=b;break a}b=b.return}throw Error(u(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(u(161));}c.effectTag&16&&(Rb(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Oi(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Qi(a,c,b):Ri(a,c,b)}\nfunction Qi(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=sd));else if(4!==d&&(a=a.child,null!==a))for(Qi(a,b,c),a=a.sibling;null!==a;)Qi(a,b,c),a=a.sibling}\nfunction Ri(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Ri(a,b,c),a=a.sibling;null!==a;)Ri(a,b,c),a=a.sibling}\nfunction Mi(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Ki(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break a;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return;m=m.sibling}g?(h=\nf,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ki(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}\nfunction Si(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Hi(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[Nd]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&Bb(c,d);pd(a,e);b=pd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];\"style\"===g?md(c,h):\"dangerouslySetInnerHTML\"===g?Qb(c,h):\"children\"===g?Rb(c,h):Xa(c,g,h,b)}switch(a){case \"input\":Cb(c,d);break;\ncase \"textarea\":Kb(c,d);break;case \"select\":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?Hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Hb(c,!!d.multiple,d.defaultValue,!0):Hb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(u(162));b.stateNode.nodeValue=b.memoizedProps;return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,Vc(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?\nd=!1:(d=!0,c=b.child,Ti=$f());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null,f.style.display=ld(\"display\",e));else if(6===a.tag)a.stateNode.nodeValue=d?\"\":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=\nf;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Ui(b);return;case 19:Ui(b);return;case 17:return}throw Error(u(163));}function Ui(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Bi);b.forEach(function(b){var d=Vi.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nvar Wi=\"function\"===typeof WeakMap?WeakMap:Map;function Xi(a,b,c){c=wg(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Yi||(Yi=!0,Zi=d);Ci(a,b)};return c}\nfunction $i(a,b,c){c=wg(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ci(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===aj?aj=new Set([this]):aj.add(this),Ci(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nvar bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,V=0,ej=8,fj=16,gj=32,ti=0,hj=1,ij=2,ui=3,vi=4,jj=5,W=V,T=null,X=null,U=0,S=ti,kj=null,lj=1073741823,mj=1073741823,nj=null,wi=0,oj=!1,Ti=0,pj=500,Y=null,Yi=!1,Zi=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W&(fj|gj))!==V?1073741821-($f()/10|0):0!==wj?wj:wj=1073741821-($f()/10|0)}\nfunction Hg(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=ag();if(0===(b&4))return 99===d?1073741823:1073741822;if((W&fj)!==V)return U;if(null!==c)a=hg(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=hg(a,150,100);break;case 97:case 96:a=hg(a,5E3,250);break;case 95:a=2;break;default:throw Error(u(326));}null!==T&&a===U&&--a;return a}\nfunction Ig(a,b){if(50<uj)throw uj=0,vj=null,Error(u(185));a=xj(a,b);if(null!==a){var c=ag();1073741823===b?(W&ej)!==V&&(W&(fj|gj))===V?yj(a):(Z(a),W===V&&gg()):Z(a);(W&4)===V||98!==c&&99!==c||(null===tj?tj=new Map([[a,b]]):(c=tj.get(a),(void 0===c||c>b)&&tj.set(a,b)))}}\nfunction xj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&(T===e&&(Bg(b),S===vi&&xi(e,U)),yi(e,b));return e}\nfunction zj(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Aj(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}\nfunction Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=eg(yj.bind(null,a));else{var b=zj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Gg();1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Tf&&Kf(c)}a.callbackExpirationTime=\nb;a.callbackPriority=d;b=1073741823===b?eg(yj.bind(null,a)):dg(d,Bj.bind(null,a),{timeout:10*(1073741821-b)-$f()});a.callbackNode=b}}}\nfunction Bj(a,b){wj=0;if(b)return b=Gg(),Cj(a,b),Z(a),null;var c=zj(a);if(0!==c){b=a.callbackNode;if((W&(fj|gj))!==V)throw Error(u(327));Dj();a===T&&c===U||Ej(a,c);if(null!==X){var d=W;W|=fj;var e=Fj();do try{Gj();break}catch(h){Hj(a,h)}while(1);ng();W=d;cj.current=e;if(S===hj)throw b=kj,Ej(a,c),xi(a,c),Z(a),b;if(null===X)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=S,T=null,d){case ti:case hj:throw Error(u(345));case ij:Cj(a,2<c?2:c);break;case ui:xi(a,c);d=a.lastSuspendedTime;\nc===d&&(a.nextKnownPendingLevel=Ij(e));if(1073741823===lj&&(e=Ti+pj-$f(),10<e)){if(oj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c;Ej(a,c);break}}f=zj(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=Hd(Jj.bind(null,a),e);break}Jj(a);break;case vi:xi(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ij(e));if(oj&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;Ej(a,c);break}e=zj(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=\nd;break}1073741823!==mj?d=10*(1073741821-mj)-$f():1073741823===lj?d=0:(d=10*(1073741821-lj)-5E3,e=$f(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*bj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=Hd(Jj.bind(null,a),d);break}Jj(a);break;case jj:if(1073741823!==lj&&null!==nj){f=lj;var g=nj;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=$f()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){xi(a,c);a.timeoutHandle=\nHd(Jj.bind(null,a),d);break}}Jj(a);break;default:throw Error(u(329));}Z(a);if(a.callbackNode===b)return Bj.bind(null,a)}}return null}\nfunction yj(a){var b=a.lastExpiredTime;b=0!==b?b:1073741823;if((W&(fj|gj))!==V)throw Error(u(327));Dj();a===T&&b===U||Ej(a,b);if(null!==X){var c=W;W|=fj;var d=Fj();do try{Kj();break}catch(e){Hj(a,e)}while(1);ng();W=c;cj.current=d;if(S===hj)throw c=kj,Ej(a,b),xi(a,b),Z(a),c;if(null!==X)throw Error(u(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;T=null;Jj(a);Z(a)}return null}function Lj(){if(null!==tj){var a=tj;tj=null;a.forEach(function(a,c){Cj(c,a);Z(c)});gg()}}\nfunction Mj(a,b){var c=W;W|=1;try{return a(b)}finally{W=c,W===V&&gg()}}function Nj(a,b){var c=W;W&=-2;W|=ej;try{return a(b)}finally{W=c,W===V&&gg()}}\nfunction Ej(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Id(c));if(null!==X)for(c=X.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Df();break;case 3:eh();H(K);H(J);break;case 5:gh(d);break;case 4:eh();break;case 13:H(M);break;case 19:H(M);break;case 10:og(d)}c=c.return}T=a;X=Sg(a.current,null);U=b;S=ti;kj=null;mj=lj=1073741823;nj=null;wi=0;oj=!1}\nfunction Hj(a,b){do{try{ng();jh.current=sh;if(mh)for(var c=N.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}lh=0;P=O=N=null;mh=!1;if(null===X||null===X.return)return S=hj,kj=b,X=null;a:{var e=a,f=X.return,g=X,h=b;b=U;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&\"object\"===typeof h&&\"function\"===typeof h.then){var k=h;if(0===(g.mode&2)){var l=g.alternate;l?(g.updateQueue=l.updateQueue,g.memoizedState=l.memoizedState,g.expirationTime=l.expirationTime):(g.updateQueue=\nnull,g.memoizedState=null)}var m=0!==(M.current&1),p=f;do{var x;if(x=13===p.tag){var z=p.memoizedState;if(null!==z)x=null!==z.dehydrated?!0:!1;else{var ca=p.memoizedProps;x=void 0===ca.fallback?!1:!0!==ca.unstable_avoidThisFallback?!0:m?!1:!0}}if(x){var D=p.updateQueue;if(null===D){var t=new Set;t.add(k);p.updateQueue=t}else D.add(k);if(0===(p.mode&2)){p.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var y=wg(1073741823,null);y.tag=2;xg(g,y)}g.expirationTime=1073741823;\nbreak a}h=void 0;g=b;var A=e.pingCache;null===A?(A=e.pingCache=new Wi,h=new Set,A.set(k,h)):(h=A.get(k),void 0===h&&(h=new Set,A.set(k,h)));if(!h.has(g)){h.add(g);var q=Oj.bind(null,e,k,g);k.then(q,q)}p.effectTag|=4096;p.expirationTime=b;break a}p=p.return}while(null!==p);h=Error((pb(g.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+qb(g))}S!==\njj&&(S=ij);h=Ai(h,g);p=f;do{switch(p.tag){case 3:k=h;p.effectTag|=4096;p.expirationTime=b;var B=Xi(p,k,b);yg(p,B);break a;case 1:k=h;var w=p.type,ub=p.stateNode;if(0===(p.effectTag&64)&&(\"function\"===typeof w.getDerivedStateFromError||null!==ub&&\"function\"===typeof ub.componentDidCatch&&(null===aj||!aj.has(ub)))){p.effectTag|=4096;p.expirationTime=b;var vb=$i(p,k,b);yg(p,vb);break a}}p=p.return}while(null!==p)}X=Pj(X)}catch(Xc){b=Xc;continue}break}while(1)}\nfunction Fj(){var a=cj.current;cj.current=sh;return null===a?sh:a}function Ag(a,b){a<lj&&2<a&&(lj=a);null!==b&&a<mj&&2<a&&(mj=a,nj=b)}function Bg(a){a>wi&&(wi=a)}function Kj(){for(;null!==X;)X=Qj(X)}function Gj(){for(;null!==X&&!Uf();)X=Qj(X)}function Qj(a){var b=Rj(a.alternate,a,U);a.memoizedProps=a.pendingProps;null===b&&(b=Pj(a));dj.current=null;return b}\nfunction Pj(a){X=a;do{var b=X.alternate;a=X.return;if(0===(X.effectTag&2048)){b=si(b,X,U);if(1===U||1!==X.childExpirationTime){for(var c=0,d=X.child;null!==d;){var e=d.expirationTime,f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}X.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=X.firstEffect),null!==X.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=X.firstEffect),a.lastEffect=X.lastEffect),1<X.effectTag&&(null!==\na.lastEffect?a.lastEffect.nextEffect=X:a.firstEffect=X,a.lastEffect=X))}else{b=zi(X);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}b=X.sibling;if(null!==b)return b;X=a}while(null!==X);S===ti&&(S=jj);return null}function Ij(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function Jj(a){var b=ag();cg(99,Sj.bind(null,a,b));return null}\nfunction Sj(a,b){do Dj();while(null!==rj);if((W&(fj|gj))!==V)throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(u(177));a.callbackNode=null;a.callbackExpirationTime=0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ij(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=\nd-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===T&&(X=T=null,U=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=W;W|=gj;dj.current=null;Dd=fd;var g=xd();if(yd(g)){if(\"selectionStart\"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var k=h.getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,\nm=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(wb){h=null;break a}var p=0,x=-1,z=-1,ca=0,D=0,t=g,y=null;b:for(;;){for(var A;;){t!==h||0!==l&&3!==t.nodeType||(x=p+l);t!==m||0!==k&&3!==t.nodeType||(z=p+k);3===t.nodeType&&(p+=t.nodeValue.length);if(null===(A=t.firstChild))break;y=t;t=A}for(;;){if(t===g)break b;y===h&&++ca===l&&(x=p);y===m&&++D===k&&(z=p);if(null!==(A=t.nextSibling))break;t=y;y=t.parentNode}t=A}h=-1===x||-1===z?null:{start:x,end:z}}else h=null}h=h||{start:0,end:0}}else h=\nnull;Ed={activeElementDetached:null,focusedElem:g,selectionRange:h};fd=!1;Y=e;do try{Tj()}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);Y=e;do try{for(g=a,h=b;null!==Y;){var q=Y.effectTag;q&16&&Rb(Y.stateNode,\"\");if(q&128){var B=Y.alternate;if(null!==B){var w=B.ref;null!==w&&(\"function\"===typeof w?w(null):w.current=null)}}switch(q&1038){case 2:Pi(Y);Y.effectTag&=-3;break;case 6:Pi(Y);Y.effectTag&=-3;Si(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=\n-1025;Si(Y.alternate,Y);break;case 4:Si(Y.alternate,Y);break;case 8:l=Y,Mi(g,l,h),Ni(l)}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);w=Ed;B=xd();q=w.focusedElem;h=w.selectionRange;if(B!==q&&q&&q.ownerDocument&&wd(q.ownerDocument.documentElement,q)){null!==h&&yd(q)&&(B=h.start,w=h.end,void 0===w&&(w=B),\"selectionStart\"in q?(q.selectionStart=B,q.selectionEnd=Math.min(w,q.value.length)):(w=(B=q.ownerDocument||document)&&B.defaultView||window,w.getSelection&&\n(w=w.getSelection(),l=q.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!w.extend&&g>h&&(l=h,h=g,g=l),l=vd(q,g),m=vd(q,h),l&&m&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==m.node||w.focusOffset!==m.offset)&&(B=B.createRange(),B.setStart(l.node,l.offset),w.removeAllRanges(),g>h?(w.addRange(B),w.extend(m.node,m.offset)):(B.setEnd(m.node,m.offset),w.addRange(B))))));B=[];for(w=q;w=w.parentNode;)1===w.nodeType&&B.push({element:w,left:w.scrollLeft,\ntop:w.scrollTop});\"function\"===typeof q.focus&&q.focus();for(q=0;q<B.length;q++)w=B[q],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}fd=!!Dd;Ed=Dd=null;a.current=c;Y=e;do try{for(q=a;null!==Y;){var ub=Y.effectTag;ub&36&&Ji(q,Y.alternate,Y);if(ub&128){B=void 0;var vb=Y.ref;if(null!==vb){var Xc=Y.stateNode;switch(Y.tag){case 5:B=Xc;break;default:B=Xc}\"function\"===typeof vb?vb(B):vb.current=B}}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);Y=\nnull;Vf();W=f}else a.current=c;if(qj)qj=!1,rj=a,sj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;b=a.firstPendingTime;0===b&&(aj=null);1073741823===b?a===vj?uj++:(uj=0,vj=a):uj=0;\"function\"===typeof Uj&&Uj(c.stateNode,d);Z(a);if(Yi)throw Yi=!1,a=Zi,Zi=null,a;if((W&ej)!==V)return null;gg();return null}function Tj(){for(;null!==Y;){var a=Y.effectTag;0!==(a&256)&&Gi(Y.alternate,Y);0===(a&512)||qj||(qj=!0,dg(97,function(){Dj();return null}));Y=Y.nextEffect}}\nfunction Dj(){if(90!==sj){var a=97<sj?97:sj;sj=90;return cg(a,Vj)}}function Vj(){if(null===rj)return!1;var a=rj;rj=null;if((W&(fj|gj))!==V)throw Error(u(331));var b=W;W|=gj;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Hi(5,c),Ii(5,c)}}catch(d){if(null===a)throw Error(u(330));Ei(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}W=b;gg();return!0}\nfunction Wj(a,b,c){b=Ai(c,b);b=Xi(a,b,1073741823);xg(a,b);a=xj(a,1073741823);null!==a&&Z(a)}function Ei(a,b){if(3===a.tag)Wj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Wj(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===aj||!aj.has(d))){a=Ai(b,a);a=$i(c,a,1073741823);xg(c,a);c=xj(c,1073741823);null!==c&&Z(c);break}}c=c.return}}\nfunction Oj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);T===a&&U===c?S===vi||S===ui&&1073741823===lj&&$f()-Ti<pj?Ej(a,U):oj=!0:Aj(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,Z(a)))}function Vi(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=Gg(),b=Hg(b,a,null));a=xj(a,b);null!==a&&Z(a)}var Rj;\nRj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)rg=!0;else{if(d<c){rg=!1;switch(b.tag){case 3:hi(b);Xh();break;case 5:fh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Gf(b);break;case 4:dh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;I(jg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;\nif(0!==d&&d>=c)return ji(a,b,c);I(M,M.current&1);b=$h(a,b,c);return null!==b?b.sibling:null}I(M,M.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return mi(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);I(M,M.current);if(!d)return null}return $h(a,b,c)}rg=!1}}else rg=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Cf(b,J.current);qg(b,c);e=oh(null,\nb,d,a,e,c);b.effectTag|=1;if(\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(L(d)){var f=!0;Gf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ug(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Fg(b,d,g,a);e.updater=Jg;b.stateNode=e;e._reactInternalFiber=b;Ng(b,d,a,c);b=gi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=\nnull,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ob(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Xj(e);a=ig(e,a);switch(f){case 0:b=di(null,b,e,a,c);break a;case 1:b=fi(null,b,e,a,c);break a;case 11:b=Zh(null,b,e,a,c);break a;case 14:b=ai(null,b,e,ig(e.type,a),d,c);break a}throw Error(u(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),di(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),fi(a,b,d,e,c);\ncase 3:hi(b);d=b.updateQueue;if(null===a||null===d)throw Error(u(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;vg(a,b);zg(b,d,null,c);d=b.memoizedState.element;if(d===e)Xh(),b=$h(a,b,c);else{if(e=b.stateNode.hydrate)Ph=Jd(b.stateNode.containerInfo.firstChild),Oh=b,e=Qh=!0;if(e)for(c=Yg(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else R(a,b,d,c),Xh();b=b.child}return b;case 5:return fh(b),null===a&&Uh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:\nnull,g=e.children,Gd(d,e)?g=null:null!==f&&Gd(d,f)&&(b.effectTag|=16),ei(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&Uh(b),null;case 13:return ji(a,b,c);case 4:return dh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Xg(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),Zh(a,b,d,e,c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:return R(a,\nb,b.pendingProps.children,c),b.child;case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(jg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=$e(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!K.current){b=$h(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==\nk){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=wg(c,null),l.tag=2,xg(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);pg(h.return,c);k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=\ng}R(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,qg(b,c),e=sg(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return e=b.type,f=ig(e,b.pendingProps),f=ig(e.type,f),ai(a,b,e,f,d,c);case 15:return ci(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Gf(b)):a=!1,qg(b,c),Lg(b,d,e),Ng(b,d,e,c),gi(null,\nb,d,!0,a,c);case 19:return mi(a,b,c)}throw Error(u(156,b.tag));};var Uj=null,Li=null;function Yj(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Uj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(e){}};Li=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}\nfunction Zj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Sh(a,b,c,d){return new Zj(a,b,c,d)}\nfunction bi(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Xj(a){if(\"function\"===typeof a)return bi(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===gb)return 11;if(a===jb)return 14}return 2}\nfunction Sg(a,b){var c=a.alternate;null===c?(c=Sh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,\nfirstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Ug(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)bi(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ab:return Wg(c.children,e,f,b);case fb:g=8;e|=7;break;case bb:g=8;e|=1;break;case cb:return a=Sh(12,c,b,e|8),a.elementType=cb,a.type=cb,a.expirationTime=f,a;case hb:return a=Sh(13,c,b,e),a.type=hb,a.elementType=hb,a.expirationTime=f,a;case ib:return a=Sh(19,c,b,e),a.elementType=ib,a.expirationTime=f,a;default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case db:g=\n10;break a;case eb:g=9;break a;case gb:g=11;break a;case jb:g=14;break a;case kb:g=16;d=null;break a;case lb:g=22;break a}throw Error(u(130,null==a?a:typeof a,\"\"));}b=Sh(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Wg(a,b,c,d){a=Sh(7,a,d,b);a.expirationTime=c;return a}function Tg(a,b,c){a=Sh(6,a,null,b);a.expirationTime=c;return a}\nfunction Vg(a,b,c){b=Sh(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction ak(a,b,c){this.tag=b;this.current=null;this.containerInfo=a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}\nfunction Aj(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function xi(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}\nfunction yi(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Cj(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}\nfunction bk(a,b,c,d){var e=b.current,f=Gg(),g=Dg.suspense;f=Hg(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(dc(c)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171));}if(1===c.tag){var k=c.type;if(L(k)){c=Ff(c,k,h);break a}}c=h}else c=Af;null===b.context?b.context=c:b.pendingContext=c;b=wg(f,g);b.payload={element:a};d=void 0===\nd?null:d;null!==d&&(b.callback=d);xg(e,b);Ig(e,f);return f}function ck(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function dk(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function ek(a,b){dk(a,b);(a=a.alternate)&&dk(a,b)}\nfunction fk(a,b,c){c=null!=c&&!0===c.hydrate;var d=new ak(a,b,c),e=Sh(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ug(e);a[Od]=d.current;c&&0!==b&&Jc(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}fk.prototype.render=function(a){bk(a,this._internalRoot,null,null)};fk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;bk(null,a,null,function(){b[Od]=null})};\nfunction gk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function hk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new fk(a,0,b?{hydrate:!0}:void 0)}\nfunction ik(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=ck(g);h.call(a)}}bk(b,g,a,e)}else{f=c._reactRootContainer=hk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=ck(g);k.call(a)}}Nj(function(){bk(b,g,a,e)})}return ck(g)}function jk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$a,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nwc=function(a){if(13===a.tag){var b=hg(Gg(),150,100);Ig(a,b);ek(a,b)}};xc=function(a){13===a.tag&&(Ig(a,3),ek(a,3))};yc=function(a){if(13===a.tag){var b=Gg();b=Hg(b,a,null);Ig(a,b);ek(a,b)}};\nza=function(a,b,c){switch(b){case \"input\":Cb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Qd(d);if(!e)throw Error(u(90));yb(d);Cb(d,e)}}}break;case \"textarea\":Kb(a,c);break;case \"select\":b=c.value,null!=b&&Hb(a,!!c.multiple,b,!1)}};Fa=Mj;\nGa=function(a,b,c,d,e){var f=W;W|=4;try{return cg(98,a.bind(null,b,c,d,e))}finally{W=f,W===V&&gg()}};Ha=function(){(W&(1|fj|gj))===V&&(Lj(),Dj())};Ia=function(a,b){var c=W;W|=2;try{return a(b)}finally{W=c,W===V&&gg()}};function kk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(b))throw Error(u(200));return jk(a,b,null,c)}var lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(a){jc(a,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};\n(function(a){var b=a.findFiberByHostInstance;return Yj(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=hc(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:\"16.14.0\",\nrendererPackageName:\"react-dom\"});exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;exports.createPortal=kk;exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if(\"function\"===typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)));}a=hc(b);a=null===a?null:a.stateNode;return a};\nexports.flushSync=function(a,b){if((W&(fj|gj))!==V)throw Error(u(187));var c=W;W|=1;try{return cg(99,a.bind(null,b))}finally{W=c,gg()}};exports.hydrate=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!0,c)};exports.render=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!1,c)};\nexports.unmountComponentAtNode=function(a){if(!gk(a))throw Error(u(40));return a._reactRootContainer?(Nj(function(){ik(null,null,a,!1,function(){a._reactRootContainer=null;a[Od]=null})}),!0):!1};exports.unstable_batchedUpdates=Mj;exports.unstable_createPortal=function(a,b){return kk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!gk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return ik(a,b,c,!1,d)};exports.version=\"16.14.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.19.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var f,g,h,k,l;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(t,0),b;}},u=Date.now();exports.unstable_now=function(){return Date.now()-u};f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))};g=function(a,b){q=setTimeout(a,b)};h=function(){clearTimeout(q)};k=function(){return!1};l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,\ny=window.setTimeout,z=window.clearTimeout;if(\"undefined\"!==typeof console){var A=window.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\");\"function\"!==typeof A&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")}if(\"object\"===\ntypeof w&&\"function\"===typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G};l=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):F=0<a?Math.floor(1E3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=\nfunction(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b;}}else C=!1};f=function(a){D=a;C||(C=!0,I.postMessage(null))};g=function(a,b){E=y(function(){a(exports.unstable_now())},b)};h=function(){z(E);E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<K(e,b))a[d]=b,a[c]=e,c=d;else break a}}function L(a){a=a[0];return void 0===a?null:a}\nfunction M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>K(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;\nfunction V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else if(b.startTime<=a)M(O),b.sortIndex=b.expirationTime,J(N,b);else break;b=L(O)}}function W(a){U=!1;V(a);if(!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}\nfunction X(a,b){T=!1;U&&(U=!1,h());S=!0;var c=R;try{V(b);for(Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null;R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?Q.callback=e:Q===L(N)&&M(N);V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b);m=!1}return m}finally{Q=null,R=c,S=!1}}\nfunction Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var Z=l;exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))};\nexports.unstable_getCurrentPriorityLevel=function(){return R};exports.unstable_getFirstCallbackNode=function(){return L(N)};exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=Z;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var e=c.delay;e=\"number\"===typeof e&&0<e?d+e:d;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;c=e+c;a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X)));return a};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()};exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","'use strict';\n\nmodule.exports = function() {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nmodule.exports = _taggedTemplateLiteral;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n"],"sourceRoot":""}